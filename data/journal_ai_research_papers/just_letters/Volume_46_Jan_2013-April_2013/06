journal artificial intelligence research                  

submitted       published     

efficient computation shapley value
game theoretic network centrality
tomasz p  michalak

tomasz michalak cs ox ac uk

department computer science  university oxford
ox   qd  uk
institute informatics  university warsaw
       warsaw  poland

karthik  v  aadithya

aadithya eecs berkeley edu

department electrical engineering computer sciences
university california
berkeley  ca             united states  usa

piotr l  szczepaski

p szczepanski stud elka pw edu pl

institute informatics
warsaw university technology
       warsaw  poland

balaraman ravindran

ravi cse iitm ac in

computer science engineering
indian institute technology madras
chennai           india

nicholas r  jennings

nrj ecs soton ac uk

school electronics computer science
university southampton
so    bj southampton  uk

abstract
shapley valueprobably important normative payoff division scheme coalitional gameshas recently advocated useful measure centrality networks 
however  although approach variety real world applications  including social
organisational networks  biological networks communication networks   computational properties widely studied  date  practicable approach
compute shapley value based centrality via monte carlo simulations
computationally expensive guaranteed give exact answer 
background  paper presents first study computational aspects shapley
value network centralities  specifically  develop exact analytical formulae shapley value based centrality weighted unweighted networks develop efficient
 polynomial time  exact algorithms based them  empirically evaluate algorithms two real life examples  an infrastructure network representing topology
western states power grid collaboration network field astrophysics 
demonstrate deliver significant speedups monte carlo approach 
instance  case unweighted networks algorithms able return exact
solution      times faster monte carlo approximation  even allow
generous     error margin latter method 
c
    
ai access foundation  rights reserved 

fimichalak  aadithya  szczepaski  ravindran    jennings

   introduction
many network applications  important determine nodes edges
critical others  classic examples include identifying important hubs road
network  schultes   sanders         critical functional entities protein network
 jeong  mason  barabasi    oltvai         influential people social network
 kempe  kleinberg    tardos         consequently  concept centrality  aims
quantify importance individual nodes edges  extensively studied
literature  koschtzki  lehmann  peeters  richter  tenfelde podehl    zlotowski       
brandes   erlebach        
v 

v 
v 
v 

v 

v 

v 
v  

v 
v  

v 

v  

v  

figure    sample network    nodes
generally speaking  centrality analysis aims create consistent ranking nodes within
network  end  centrality measures assign score node way corresponds importance node given particular application  since importance
depends context problem hand  many different centrality measures
developed  three well known widely applied are  degree centrality 
closeness centrality betweenness centrality   paper  refer measures
conventional standard centrality  degree centrality  brief  quantifies power
node degree  i e   number adjacent edges  instance  sample
network figure    nodes v  v  degree   and  judged degree centrality 
important nodes within entire network  conversely  closeness centrality
focuses distances among nodes gives high value nodes close
nodes  measure  node v  figure   ranked top  last measure
betweenness centralityconsiders shortest paths  i e   paths use minimal number
links  two nodes network  shortest paths node belongs to 
important is  measure  v  figure   important
nodes  including v  v    chosen measures important
node   clearly  measures expose different characteristics node  consider 
instance  epidemiology application  aim identify people  i e   nodes 
social network biggest influence spread disease
become focal point prevention emergency measures  here  degree centrality
   koschtzki et al         brandes erlebach        give good overview
centrality measures 

   

ficomputation shapley value game theoretic network centrality

ranks top nodes biggest immediate sphere influencetheir infection would lead
highest number adjacent nodes exposed disease  hand 
closeness centrality identifies nodes whose infection would lead fastest spread
disease throughout society  finally  betweenness centrality reveals nodes
play crucial role passing disease one person network another  
common feature aforementioned standard measures assess
importance node focusing role node plays itself  however 
many applications approach inadequate synergies may occur
functioning nodes considered groups  referring figure  
epidemiology example  vaccination individual node v   or v  v    would prevent
spread disease left right part network  or vice versa  
however  simultaneous vaccination v    v  v  would achieve goal  thus 
particular context  nodes v    v  v  play significant role individually 
together do  quantify importance groups nodes  notion
group centrality introduced everett borgatti         intuitively  group centrality
works broadly way standard centrality  focus functioning
given group nodes  rather individual nodes  instance  figure    group
degree centrality  v    v        distinct adjacent nodes 
although concept group centrality addresses issue synergy functions
played various nodes  suffers fundamental deficiency  focuses particular 
priori determined  groups nodes clear construct consistent ranking
individual nodes using group results  specifically  nodes
valuable group ranked top  important nodes belong
group highest average value per node  focus nodes
contribute every coalition join  fact  many possibilities
choose from 
framework address issue game theoretic network centrality measure 
detail  allows consistent ranking individual nodes computed way
accounts various possible synergies occurring within possible groups nodes  grofman
  owen        gmez  gonzlez arangena  manuel  owen  del pozo    tejada       
suri   narahari         specifically  concept builds upon cooperative game theorya
part game theory agents  or players  allowed form coalitions order
increase payoffs game  now  one fundamental questions cooperative
game theory distribute surplus achieved cooperation among agents 
end  shapley        proposed remunerate agents payoffs correspond
individual marginal contributions game  detail  given agent 
individual marginal contribution measured weighted average marginal increase
payoff coalition agent could potentially join  shapley famously proved
conceptknown since shapley valueis division scheme
meets certain desirable normative properties   given this  key idea game theoretic
network centrality define cooperative game network agents
nodes  coalitions groups nodes  payoffs coalitions defined meet
   differences interpretation standard centralities see work borgatti everett        
   see section   details 

   

fimichalak  aadithya  szczepaski  ravindran    jennings

requirements given application  means shapley value agent
game interpreted centrality measure represents average
marginal contribution made node every coalition nodes  
words  shapley value answers question construct consistent ranking
individual nodes groups nodes evaluated 
detail  shapley value based approach centrality is  one hand  much
sophisticated conventional measures  accounts group nodes
shapley value derives consistent ranking individual nodes 
hand  confers high degree flexibility cooperative game network
defined variety ways  means many different versions shapley value based
centrality developed depending particular application consideration 
well features network analyzed  prominent example 
specific shapley value based centrality measure developed crafted particular
application  consider work suri narahari        study problem selecting
top k nodes social network  problem relevant applications
key issue choose group nodes together biggest influence
entire network  include  example  analysis co authorship networks 
diffusion information  viral marketing  new approach problem  suri
narahari define cooperative game value group nodes equal
number nodes within  adjacent to  group  words  assumed
agents sphere influence reaches immediate neighbors group  whereas
definition game natural extension  group  degree centrality discussed
above  shapley value nodes game constitutes new centrality metric is 
arguably  qualitatively better standard degree centrality far nodes influence
concerned  intuition behind visible even small network figure    terms
influence  node v  important v    node connected
v  v    without v  impossible influence v  v    neighbor v 
accessible node  thus  unlike standard degree centrality  evaluates
v  v  equally  centrality based shapley value game defined suri
narahari recognizes difference influence assigns higher value v  v   
unfortunately  despite advantages shapley value based centrality conventional
approaches  efficient algorithms compute yet developed  indeed  given
network g v  e   v set nodes e set edges  using original
shapley value formula involves computing marginal contribution every node every
coalition o   v      exponential computation clearly prohibitive bigger
networks  of  e g           nodes   networks  feasible approach currently
outlined literature monte carlo sampling  e g   suri   narahari        castro 
gomez    tejada         however  method inexact 
time consuming  instance  shown simulations  weighted network
       nodes         edges  monte carlo approach iterate         
   note division schemes power indices cooperative game theory  banzhaf
power index  banzhaf         could used centrality measures  see  instance  discussion
work grofman   owen         however  literature  focus shapley
value due desirable properties 

   

ficomputation shapley value game theoretic network centrality

b 

a 
v 

v 

v 

 
  

v 
v 

v 
v 

v 
v 

 

 

v 

 

v 

 
v 

v 

figure    sample unweighted weighted networks     nodes  respectively 
times entire network produce approximation shapley value
    error margin   moreover  exponentially iterations needed reduce
error margin 
background  develop polynomial time algorithms compute shapley valuebased centrality  specifically  focus five underlying games defined network 
games extend  various directions  standard notions degree closeness centrality 
starting point  consider game defined suri narahari propose
exact  linear time algorithm compute corresponding shapley value based centrality 
denote game g    analyse computational properties four
games defined networks  denote g    g    g    g    respectively 
games captures different flavor centrality  all  similarly game
suri narahari  embrace one fundamental centrality idea  given group nodes c 
function defines value c game must somehow quantify sphere
influence c nodes network  particular 
g  game value coalition c function size number
nodes immediately reachable least k different ways c 
game inspired bikhchandani  hirshleifer  welch        instance
general threshold model introduced kempe  kleinberg  tardos        
natural interpretation  agent becomes influenced  with ideas  information 
marketing message  etc   least k neighbors already become
influenced  instance  given k      value coalition  v    v    figure  a
  coalition size   two neighbors less   edges
adjacent coalition 
g  game concerns weighted graphs  unlike g  g     here  value coalition c
depends size set nodes within cutoff distance c  measured
shortest path lengths weighted graph  example  figure  b 
cutoff set   coalition  v    value   able influence   nodes v   
v    v    away  v     cutoff distance
interpreted radius sphere influence coalition 
   see section   exact definition error margin 

   

fimichalak  aadithya  szczepaski  ravindran    jennings

game graph
value coalition c  i e    c 
complexity
accuracy
g 
u w  c  number nodes c
o  v      e  
exact
immediately reachable c
g 
u w  c  number nodes c
o  v      e  
exact
immediately reachable c 
via least k different edges
g 
w  c  number nodes c o  v   e     v    log v    exact
dcutoff away
g 
w  c  sum f    s nono  v   e     v    log v    exact
 increasing functions distance
c nodes
g 
w  c  number nodes c
o  v   e  
approx 
directly connected c via edges
     
sum weights exceeds wcutoff
table    games considered paper results  u w denotes unweighted graphs
w weighted  
g  game generalizes g  allowing value c specified size
arbitrary non increasing function f     distance c nodes
network  instance  value  v    v    figure  b function
 
 
f  d      d
                               
  intuition
coalition influence closer nodes awaya property
cannot expressed standard closeness centrality  thus  g  seen
extension closeness centrality 
g  last game extension g  case weighted networks  here  value
c depends adjacent nodes connected coalition weighted
edges whose sum exceeds given threshold wcutof f  recall g  threshold
defined simply integer k   whereas g  g  weights edges interpreted
distance  g  interpreted power influence  example 
figure  b  threshold vertex    value coalition  v    v     
coalition size two enough power influence one additional
node v   
computation shapley value five games  see table  
overview  main focus paper  shapley values extensions either
degree closeness centrality metrics applications settings
influence nodes nodes network evaluated  results
summarized follows 

demonstrate possible exactly efficiently compute number
shapley value based network centrality measures  methods take advantage
   

ficomputation shapley value game theoretic network centrality

network structure  well specifics underlying game defined
network 
first four games  derive closed form expressions shapley values 
based these  provide exact linear polynomial time algorithms efficiently
compute shapley values  i e   without need enumerate possible coalitions 
specifically  algorithms run o  v      e   g  g  o  v   e   
 v    log v    g  g    furthermore  fifth measure centrality  develop
closed form polynomial time computable shapley value approximation  algorithm
running time o  v   e   experiments show approximation error
   large networks  summary algorithms performance
found table   
evaluate algorithms two real life examples  infrastructure network representing topology western states power grid collaboration network
field astrophysics  results show algorithms deliver significant
speedups monte carlo simulations  instance  given unweighted network
western states power grid  algorithms return exact shapley value g 
g       times faster monte carlo method returns approximation
    error margin 
remainder paper organized follows  section   discuss related work 
notation preliminary definitions presented section    section   analyse
five types centrality related coalitional games propose polynomial time shapley value
algorithms them  results numerical simulations presented section  
 with details simulation setup presented appendix a   conclusions future
work follow  finally  appendix b provides summary key notational conventions 

   related literature
issue centrality one fundamental research directions network analysis
literature  particular  freeman        first formalise notion centrality
presenting conventional centrality measures  degree  closeness betweenness  many
authors subsequently worked developing new centrality measures  refining existing
ones  e g   bonacich        noh   rieger        stephenson   zelen         developing
algorithms efficient centrality computation  e g   brandes        eppstein   wang        
context  grofman owen        first apply game theory topic
centrality  focused banzhaf power index  banzhaf         followup work  gmez et al         combined myersons        idea graph restricted games
 in feasible coalition induced subgraph graph  concept
centrality proposed new shapley value based network centrality measures  contrast
gmez et al   suri narahari              assumed coalitions feasible 
approach adopt paper 
fundamental problem conventional models coalitional games  i e   exponential complexity number agents  tackle paper 
   

fimichalak  aadithya  szczepaski  ravindran    jennings

 

 
v 

 
v 

 
 
 
v 
figure    induced subgraph representation sample coalitional game   players 
game  values coalitions  v      v      v      v    v      v    v      v    v      v    v    v  
                                           respectively 
studied literature algorithmic aspects coalitional games  indeed  since seminal work deng papadimitriou         issue received considerable attention
computer scientists  specifically  alternative straightforward  but exponential  listing possible coalitions  number authors proposed efficient
representations coalitional games  representations fall two main categories
 wooldridge   dunne        
give characteristic function specific interpretation terms combinatorial structures graphs  approach adopted by  instance 
deng papadimitriou         greco  malizia  palopoli  scarcello        
wooldridge dunne        advantage ensuing representation
always guaranteed succinct  however  disadvantage always
fully expressive  i e   cannot represent coalitional games 
try find succinct  still fully expressive  representation  is 
instance  approach adopted conitzer sandholm         ieong shoham
        elkind  goldberg  goldberg  wooldridge         representations general completely capture coalitional games interest 
although always guaranteed succinct 
unfortunately  even succinctly representable games  computing shapley value
shown np hard  or even worse   p complete  many domains  including weighted voting games  deng   papadimitriou         threshold network flow games
 bachrach   rosenschein        minimum spanning tree games  nagamochi  zeng 
kabutoya    ibaraki         similarly  aziz  lachish  paterson  savani      a  obtained negative results related problem computing shapley shubik power index
spanning connectivity games based undirected  unweighted multigraphs 
also  bachrach  rosenschein  porat      b  showed computation banzhaf
index connectivity games  agents vertices control adjacent edges
aim become connected certain set primary edges   p complete 
fortunately  positive results discovered  probably known
among due deng papadimitriou        ieong shoham        
   

ficomputation shapley value game theoretic network centrality

detail  deng papadimitriou proposed representation based weighted graphs 
node interpreted agent  weight edge interpreted value
cooperation two agents connected edge   value
coalition defined sum weights internal edges  or  words 
weights edges belonging subgraph induced members coalition  threeplayer example formalism  called induced subgraph representation  found
figure    downside representation fully expressive  however 
upside that  games formalised weighted graphs  representation
always concise  furthermore  allows shapley value computed time linear
number players  specifically  case  shapley value given
following formula 

shapley value vi     vi self loop weight  
vj

weight edge vi vj
 
 
neighbours v
x

   



ieong shoham        developed representation consisting finite set logical rules
following form  boolean expression real number  agents atomic
boolean variables  representation  value coalition equal sum
right sides rules whose left sides satisfied coalition  representation  called marginal contribution networks  or mc nets short   i  fully expressive
 i e   used model game    ii  exponentially concise games 
importantly   iii  allows shapley value computed time linear
size representation  provided boolean expressions rules conjunctions
 either positive negative  atomic literals  mc nets  rules interesting
game theoretic interpretation  rule directly specifies incremental marginal contribution made agents featured rule  now  using additivity axiom met
shapley value  possible consider every rule separate simple game 
using axioms straightforwardly compute shapley value simple game 
and  finally  sum results simple games obtained shapley value  building this  elkind et al         developed extensions mc nets sophisticated
 read once  boolean expressions  michalak  marciniak  samotulski  rahwan  mcburney  wooldridge  jennings      a   michalak  rahwan  marciniak  szamotulski 
jennings      b  developed generalizations coalitional games externalities  another
recently proposed representation formalism coalitional games allows polynomial
calculations shapley value decision diagrams  bolus        aadithya  michalak   
jennings        sakurai  ueda  iwasaki  minato    yokoo         now  mc nets offer
fully expressive representation works arbitrary coalitional games  possible
speed shapley value computation focusing specific  not necessarily fully expressive  classes games  one particular class games investigated detail
weighted voting  approximate  but strictly polynomial   fatima  wooldridge 
  jennings        exact  but pseudo polynomial  algorithms  mann   shapley       
matsui   matsui        proposed  chalkiadakis  elkind  wooldridge       
provided comprehensive discussion literature 
   self loops allowed 

   

fimichalak  aadithya  szczepaski  ravindran    jennings

whereas choice representation foremost consideration efficient shapley value computation context conventional coalitional games  paper 
face rather different set challenges 
unlike conventional coalitional games  conciseness usually issue networks context  games aim capture network centrality
notions completely specified  a  underlying network compactly represented
graph   b  concise closed form characteristic function expression evaluating coalition values  see next section example   rather  issue
exact specification characteristic function dictated computational considerations  real world application game theoretic network
centrality  words  choice representation shapley value computation
already fixed centrality consideration 
games paper designed reflect network centrality  characteristic function definition often depends highly non trivial way underlying
graph structure  specifically  value assigned characteristic function
subset nodes depends subgraph induced nodes 
relationship subgraph rest network  example 
value assigned coalition nodes may based shortest path lengths
nodes outside coalition  may depend relationship coalition
neighbors 
therefore  specific challenge tackle efficiently compute shapley value  given
network game defined it  coalition values game given
closed form expression depends non trivially network  key question
take advantage  a  network structure   b  functional form
coalition values  compute shapley values efficiently  i e   without need
enumerate possible coalitions 
finally  conclude section mentioning shapley value solution concepts game theory applied network related problems  instance 
application shapley value  and nucleolus  problem cost allocation
electric market transmission system considered zolezzi rudnick        
though computational aspects discussed  problem maximizing probability hitting strategically chosen hidden virtual network placing wiretap
single link communication network analysed aziz  lachish  paterson  savani
     b   problem viewed two player win lose  zero sum  game  wiretap
game  authors provide polynomial time computational results game 
show one  key  strategies nucleolus simple cooperative
spanning connectivity game  aziz et al       a  mentioned above 

   preliminaries notation
section formally introduce basic concepts graph theory cooperative
game theory used throughout paper  look closely sample coalitional
   

ficomputation shapley value game theoretic network centrality

game defined network shapley value game used
centrality measure 
graph  or network   g consists vertices  or nodes  edges  sets
denoted v  g  e g   respectively  every edge set e g  connects two vertices
set v  g     u  v  denote edge connecting vertices u  v v  g   number
edges incident vertex called vertex degree  neighboring vertices v v
vertices connected v graph  weighted network weight  label 
associated every edge e g   path is  informally  sequence connected edges 
shortest path problem find path two given vertices sum
edge weights minimized 
formalize notions coalitional games shapley value  specifically  let
us denote    a            a a    set players participate coalitional game 
characteristic function   r assigns every coalition c real number representing
quality performance  assumed         characteristic function
game tuple  a     assuming grand coalition  i e   coalition
agents game  highest value formed  one key questions
coalitional game theory distribute gain cooperation among agents
meet certain normative positive criteria  end  shapley        proposed
evaluate role agent game computing weighted average marginal
contributions agent possible coalitions belong to  importance
shapley value stems fact unique division scheme meets four
desirable criteria 
 i  efficiency wealth available agents grand coalition distributed
among them 
 ii  symmetry payoffs agents depend identity 
 iii  null player agents zero marginal contributions coalitions receive zero
payoff 
 iv  additivity values two games sum value computed sum
games 
order formalize concept  let  a  denote permutation agents a 
let c  i  denote coalition made predecessors agent ai   formally 
denote  j  location aj   then  c  i     aj    j     i    shapley
value ai   denoted svi     defined average marginal contribution ai
coalition c  i   shapley        
svi     

  x
  c  i   ai     c  i    
 a  

   



   whereas main focus paper undirected graphs  show results
readily extended case directed graphs 

   

fimichalak  aadithya  szczepaski  ravindran    jennings

shapley provides following intuition behind formula  imagine players
arrive meeting point random order  every player ai arrives receives
marginal contribution arrival would bring already meeting point 
average contributions possible orders arrival  obtain svi    
ai payoff game 
formula     stated equivalent  computationally less involved 
form 
x  c    a   c     
svi     
  c  ai     c   
   
 a  
ca  ai  

network context  use g define coalitional game  v  g     set
agents   v  g  characteristic function   agents coalitional game
vertices graph g  thus  coalition agents c simply subset v  g  
furthermore  characteristic function    v  g  r function depends
graph g long satisfies condition         use phrase value
coalition c informally refer  c  
first consider sample characteristic function game defined network  well
shapley value becomes centrality measure  discuss advantages
game theoretic network centrality conventional measures 
detail  consider notion closeness centrality node graph g v  e  
traditionally defined reciprocal average distance node
 reachable  nodes graph  koschtzki et al          definition captures
intuitive idea node close proximity many nodes valuable
virtue central location  hence assigned higher centrality score 
measure  however  fails recognize importance combinations nodes 
example  consider typical application closeness centrality  disseminating piece
information nodes network  time point dissemination process 
define random variable ct subset nodes actively involved propagating
information  situation  new node added ct would make maximum contribution
diffusion information close proximity nodes currently
close proximity node ct   thus  conventional closeness centrality
takes account average proximity nodes  actual importance node
actual applications based different measure  proximity nodes
close proximity random variable ct  
show coalitional game theory used construct centrality measure
faithfully models situation  let c arbitrary subset nodes
given network g v  e   then  every c  assign value  c  given
 c   

x
vv  g 

 
 
    min d u  v  u c 

d u  v  distance nodes u v  measured shortest path length
u v graph g  
   

ficomputation shapley value game theoretic network centrality

map defined captures fundamental centrality notion  intrinsic value
subset nodes c context application information dissemination
proportional overall proximity nodes c nodes network 
effect  map carries original definition closeness centrality global level 
measure importance assigned every possible combination nodes 
map therefore characteristic function coalitional game 
vertex network viewed agent playing game  follows node v
high shapley value game  likely v would contribute arbitrary
randomly chosen coalition nodes c terms increasing proximity c
nodes network  thus  computing shapley values game yields centrality
score vertex much improved characterization closeness centrality 
difficulty adopting game theoretically inspired centrality measure
previously mentioned problem exponential complexity number agents 
next section  show overcome difficulty compute shapley value
many centrality applications  including formulation  time polynomial
size network 

   algorithms shapley value based network centrality
section  present five characteristic function formulations  c   designed
convey specific centrality notion  already mentioned introduction  common
element formulations aim quantify  albeit different way 
sphere influence coalition c nodes network  specifically 
first game formulation  start simplest possible idea sphere influence
coalition nodes c set nodes immediately reachable  within one hop 
c  subsequent games generalize notion  particular  second formulation
specifies sophisticated sphere influence  one includes nodes
immediately reachable least k different ways c  three formulations
extend notion sphere influence weighted graphs  third game defines sphere
influence set nodes within cutoff distance c  as measured shortest
path lengths weighted graph   fourth formulation extreme generalization 
allows sphere influence c specified arbitrary function f    
distance c nodes  final formulation straightforward extension
second game  case weighted networks 
relationships among five games graphically presented figure   
    game       c     agents   degree away
let g v  e  unweighted  undirected network  first define fringe subset
c v  g  set  v v  g    v c  or  u c  u  v  e g    i e  
fringe coalition includes nodes reachable coalition one hop 
based fringe  define coalitional game g   v  g       respect network
g v  e  characteristic function      v  g  r given
   

fimichalak  aadithya  szczepaski  ravindran    jennings

figure    euler diagram showing relationships among five games considered
paper  specifically  game g  generalizes g    g  generalizes g  generalized
g    g  generalizes g    finally  note certain instances games
represented g    g  g   

 
 
   c   
size fringe c  

c  
otherwise 

 
game applied suri narahari        find influential nodes
social networks shown deliver promising results concerning target
set selection problem  see kempe  kleinberg    tardos         therefore desired
compute shapley values nodes game  shall present exact
formula computation rather obtaining monte carlo simulation
done suri narahari 
detail  evaluate shapley value node vi   consider possible permutations
nodes vi would make positive marginal contribution coalition
nodes occurring itself  let set nodes occurring node vi random
permutation nodes denoted ci   let neighbours node vi graph g v  e 
denoted ng  vi   degree node vi denoted degg  vi   
key question ask is  necessary sufficient condition node vi
marginally contribute node vj ng  vi    vi   fringe ci    clearly  happens
neither vj neighbours present ci   formally   ng  vj   vj   ci  
 
going show condition holds probability

 
  degg  vj    

proposition    probability random permutation none vertices
ng  vj    vj   occurs vi   vi vj neighbours    deg g  vj    
   

ficomputation shapley value game theoretic network centrality

algorithm    computing shapley value game  
input  unweighted graph g v  e 
output  shapley values nodes v  g  game g 
foreach v v  g 
sv v      deg  g  v   
foreach u ng  v 
sv v       deg  g  u   
end
end
return sv 

proof  need count number permutations satisfy 
v ng  vj   vj     vi      v  

   

end 
let us choose   ng  vj    vj    positions sequence elements v  

 v  
  deg
ways 
g  vj  
then  last degg  vj   chosen positions  place elements  ng  vj    vj     
 vi    directly these  place element vi   number line ups
 degg  vj     
remaining elements arrange   v        degg  vj     different ways 
all  number permutations satisfying condition     is 

 v  
 degg  vj      v
  degg  vj  

       degg  vj      

 v   
  degg  vj    

thus  probability one permutations randomly chosen

 
  degg  vj    

now  denote bvi  vj bernoulli random variable vi marginally contributes vj
fringe ci    above  have 
e bvi  vj     pr  ng  vj    vj    ci      

 
 
    degg  vj  

therefore  svg   vi    expected marginal contribution vi   given by 
svg   vi    

x

e bvi  vj    

x
vj  vi  ng  vi  

vj  vi  ng  vi  

   

 
 
    degg  vj  

   

fimichalak  aadithya  szczepaski  ravindran    jennings

exact closed form expression computing shapley value node
network 
possible derive intuition formula  node high degree 
number terms shapley value summation high  terms
inversely related degree neighboring nodes  gives
intuition node high centrality degree high 
whenever degree tends higher comparison degree neighboring nodes 
words  power comes connected powerless  fact
well recognized centrality literature  e g   bonacich         following
reasoning  easily predict dynamic changes network  adding
removing edge  would influence shapley value   adding edge powerful
powerless node add even power former decrease power
latter  naturally  removing edge would reverse effect 
interestingly  although game g  quite different induced subgraph representation
deng papadimitriou         formula svg   vi   is  extent  similar
formula      particular  cases  shapley value node depends solely set
immediate neighbours  moreover  cases  linear combination fractions
involving numerator weight edges node neighbours  
difference denominators  case depends degree involved
nodes  see next two games considered paper yield comparable g 
closed form expressions shapley value 
algorithm   directly implements expression     compute exact shapley values
nodes network  cycles nodes neighbours  running time
o  v      e   
finally  note algorithm   adopted directed graphs couple simple
modifications  specifically  order capture many nodes access given
node from  degree node replaced indegree  furthermore  set
neighbours given node v consist nodes edge directed
v 
    game       c     agents least k neighbors c
consider general game formulation unweighted graph g v  e  
value coalition includes number agents either coalition
adjacent least k agents coalition  formally  consider game g 
characterised      v  g  r 
 
 
   c   
  v   v c  or   ng  v  c  k  

c  
otherwise 

   many real life networks fact dynamic challenge developing fast streaming algorithms
recently attracted considerable attention literature  lee  lee  park  choi    chung        
   note case g  weight edge   

   

ficomputation shapley value game theoretic network centrality

second game instance general threshold model widely studied
literature  e g   kempe et al         granovetter         intuitively  model
node become active monotone activation function reaches threshold 
instance problem proposed goyal  bonchi  lakshmanan        
authors introduced method learning influence probabilities social networks  from
users action logs   however  many realistic situations much less information available
network possible assess specific probabilities individual
nodes become active  consequently  much simpler models studied  bikhchandani et al 
        instance  consider teenager deciding whether try drugs  strong
motivation trying drugs fact friends so  conversely  seeing friends
reject drugs could help persuade teenager stay clean  situation modelled
second game  threshold node k activation function f  s   
 s   another example viral marketing innovation diffusion analysis  again 
application  often assumed agent influenced least k
neighbors already convinced  valente         note game reduces
game g  k     
adopting notation previous subsection  ask  necessary
sufficient condition node vi marginally contribute node vj ng  vi    vi   value
coalition ci  
clearly  degg  vj     k  e bvi  vj       vi   vj   otherwise  degg  nj   k 
split argument two cases  vj    vi   condition marginal contribution
exactly  k    neighbors vj already belong ci vj
  ci  
hand  vj   vi   marginal contribution occurs ci originally consisted
 k    neighbors vj   degg  vj   k vj    vi   need determine
appropriate probability 
proposition    probability random permutation exactly k   neighbours vj
  degg  vj  k
occur vi   vj occurs vi   is  degg  vj     deg
  vj vi neighbors
g  vj   
degg  vj   k 
proof  need count number permutations satisfy 

n


 kng  vj    k    k   vk  v     vi  



vng  vj   k  vi    v   vi      vj    

   

end 
let us choose   ng  vj    vj    positions sequence elements v  

 v  
  deg
ways 
 v
 
g j
then  choose k   elements set  ng  vj      vi    number choices
 vj   
deggk 
 
   

fimichalak  aadithya  szczepaski  ravindran    jennings

algorithm    computing shapley value game  
input  unweighted graph g v  e   positive integer k
output  shapley value nodes v  g  game g 
foreach v v  g 
sv v    min      degk g  v    
foreach u ng  v 
g  u k  
sv v     max    deggdeg
 u    degg  u     
end
end
return sv 

then  first k   chosen positions  place elements chosen previous step 
directly those  place element vi   remaining vertices chosen
first step  number line ups  k         degg  vj   k   
remaining elements arrange   v   degg  vj       different ways 
taking together  number permutations satisfying condition     is 
degg  
 v  
k   k
  degg  vj  

        degg  vj   k    v   degg  vj        

 v      degg  vj  k 
degg  vj     degg  vj     

thus  probability one permutations randomly chosen

  degg  vj  k
degg  vj     degg  vj     

using proposition   obtain 
e bvi  vj    

    degg  vj   k
 
degg  vj       degg  vj   

degg  vi   k vj   vi   have 

e bvi  vi    

k 
x
n  

 
k
 
 
    degg  vi  
    degg  vi  

before  shapley values given substituting formulae into 
svg   vi    

x

e bvi  vj   

vj ng  vi   vi  

although game generalization game g    still solved obtain shapley
values nodes o  v      e   time  formalised algorithm   
   

ficomputation shapley value game theoretic network centrality

even general formulation game possible allowing k function
agent  i e   node vi v  g  assigned unique attribute k vi   
translates application form  agent convinced least ki
neighbors convinced  frequently used model literature  valente        
argument use fact k constant across nodes 
generalized formulation solved simple modification original shapley value
expression 
sv  vi    

k vi  
 
    degg  vi  

x
vj ng  vi  

    degg  vj   k vj  
 
degg  vj       degg  vj   

equation  which implementable o  v    e   time  assumes k vi  
  degg  vi   nodes vi   condition assumed without loss generality
cases still modelled  we set k vi         degg  vi   extreme case node
vi never convinced matter many neighbors already convinced  
finally  note algorithm   adapted case directed graphs along
lines algorithm   
    game       c     agents dcutoff away
hitherto  games confined unweighted networks  many applications 
necessary model real world networks weighted graphs  example  coauthorship network mentioned introduction  edge often assigned weight
proportional number joint publications corresponding authors produced
 newman        
subsection extends game g  case weighted networks  whereas game g  equates
 c  number nodes located within one hop node c  formulation
subsection equates  c  number nodes located within distance dcutoff
node c  here  distance two nodes measured length shortest
path nodes given weighted graph g v  e  w    w   e r 
weight function 
formally  define game g    coalition c v  g  
 
 
   c   
size  vi   vj c   distance vi   vj   dcutoff   

c  
otherwise 

clearly  g  used settings g  applicable  instance  diffusion
information social networks analyse research collaboration networks  e g   suri  
narahari               moreover  general game  g  provides additional modelling
opportunities  instance  suri narahari        suggest intelligent way
sieving nodes neighbourhood would improve algorithm solving target
selection problem  top k problem   now  g  allows us define different cutoff distance
   

fimichalak  aadithya  szczepaski  ravindran    jennings

algorithm    computing shapley value game  
input  weighted graph g v  e  w    dcutoff    
output  shapley value nodes g game g 
foreach v v  g 
distancevector   dijkstra v g  
extneighbors v      extdegree v      
foreach u v  g  u    v
d u  dcutoff
extneighbors v  push u  
extdegree v    
end
end
end
foreach v v  g 
 
sv v      extdegree v 
 
foreach u extn eighbors v 
 
sv v       extdegree u 
 
end
end
return sv 

node suri naraharis setting  furthermore  g  specific case
general model g  discussed next subsection 
shall show even highly general centrality game g  amenable analysis
yields exact formula shapley value  however  case algorithm
implementing formula linear size network  o  v   e   
 v    log v    complexity 
deriving exact shapley value formula  introduce extra notation  define
extended neighborhood ng  vj   dcutoff      vk    vj   distance vk   vj   dcutoff    i e  
set nodes whose distance vj dcutoff   denote size ng  vj   dcutoff  
degg  vj   dcutoff    notation  necessary sufficient condition node vi
marginally contribute node vj value coalition ci is  distance vi   vj   dcutoff
distance vj   vk     dcutoff vk ci   is  neither vj node extended
neighborhood present ci   discussion previous subsections
proposition    know probability event exactly   degg  v j  dcutoff     therefore  exact formula shapley value node vi game g  is 
svg   vi    

x
vj  vi  ng  vi  dcutoff  

 
 
    degg  vj   dcutoff  

algorithm   works follows  node v network g v  e   extended neighborhood ng  v  dcutoff   size degg  v  dcutoff   first computed using dijkstras algorithm
   

ficomputation shapley value game theoretic network centrality

o  e     v  log v    time  cormen         results used directly implement
equation  takes maximum time o  v       practice step runs much
faster worst case situation occurs every node reachable every
node within dcutoff   overall complexity o  v   e     v    log v    
furthermore  deal directed graphs need redefine notion extdegree
extn eighbors given node u algorithm    former number vertices
distance u smaller than  equal to  dcutoff   latter set
nodes whose distance u dcutoff  
finally  make observation proof depend dcutoff
constant across nodes  indeed  node vi v  g  may assigned unique
value dcutoff  vi     c  would number agents vi within distance
dcutoff  vi   c  case  proof gives 
sv  vi    

x

vj  distance vi  vj  
dcutoff  vj  

    game       c   

 
 
    degg  vj   dcutoff  vj   

p

vi v  g  f  distance vi   c  

subsection generalizes game g    taking motivation real life network
problems  game g    agents distances dagent dcutoff contributed equally
value coalition  however  assumption may always hold true
applications intuitively expect agents closer coalition contribute value 
instance  expect facebook user exert influence immediate circle
friends friends friends  even though may satisfy dcutoff criterion 
similarly  expect virus affected computer infect neighboring computer quickly
computer two hops away 
general  expect agent distance coalition would contribute f  d 
value  f     positive valued decreasing function argument  formally 
define game g    value coalition c given by 
 
 
   c    p

vi v  g  f  d vi   c  

c  
otherwise 

d vi   c  minimum distance  min distance vi   vj   vj c  
note possible solve shapley value formulation
constructing mc nets representation  see section   details formalism  
indeed  combinatorial structure networks certain extent similar structure
mc nets  consequently  existence polynomial algorithm compute shapley
value mc nets strongly suggests polynomial algorithms could developed
games defined networks  results paper demonstrate indeed
case  however  underlined approach compute shapley
   

fimichalak  aadithya  szczepaski  ravindran    jennings

value different applied mc nets  solutions focus
computing expected contribution every node random permutation nodes
disaggregating game collection simple  easily solvable  games
done mc nets  difference approaches clearly visible case
g    here  mc nets would o  v      rules  whereas discussion below 
propose efficient algorithm g  runs o  v   e     v    log v    
considerable improvement real world networks sparse  i e   e o  v   
 reka   barabsi        
case g    key question ask is  expected value marginal
contribution vi node vj    vi value coalition ci   let marginal
contribution denoted c vi   vj    clearly 
 
 
c vi   vj    
f  distance vi   vj    f  d vj   ci   

distance vi   vj   d vj   ci  
otherwise 

let dvj    d    d     d v      distances node vj nodes network 
sorted increasing order  let nodes corresponding distances  w    w     w v      
respectively  let kij     number nodes  out  v      whose distances
vj distance vi   vj    let wkij      vi  i e   among nodes distance
vj vi   vi placed last increasing order  
use literal wi mean wi ci literal wi mean wi
  ci   define sequence
boolean variables pk   vj w  w      wk   k  v      finally denote
expressions form c vi   vj  f   mean marginal contribution vi ci
vj given coalition ci satisfies boolean expression f  

c vi   vj  pkij    wkij        f  dkij      f  dkij      
c vi   vj  pkij    wkij        f  dkij      f  dkij      
  
  
  
 
 
 
c vi   vj  p v    w v        f  dkij      f  d v      
c vi   vj  p v        f  dkij      
notation  obtain expressions c vi   vj   splitting mutually
exclusive exhaustive  i e   covering possible non zero marginal contributions  cases 
now  need determine probability pr pk wk     
proposition    probability random permutation none nodes
 
 
 vj   w            wk   occur vi node wk   occurs vi  k    k   
proof  let us count number permutations satisfy 
v vj  w       wk    vi      v   vi    wk     
end 
   

   

ficomputation shapley value game theoretic network centrality

let us choose   vj   w            wk   vj   wk      positions sequence elements
 v  
v   k  
ways 
then  last k     chosen positions  place elements  vj   w            wk   
directly these  place element vi   vertex wk     number
line ups  k       
remaining elements arrange   v    k       different ways 
thus  number permutations satisfying     is 
 v  
k    k

       v    k         

 v   
 k    k     

probability one permutations randomly chosen

 
 k    k     

proposition find that 
pr pk wk    

 
    kij k  v     
 k      k     

using c vi   vj   equations probabilities pr pk wk     




x f  distance vi   vj    f  dk    
  f  distance vi   vj   
e m c vi   vj     
 k      k     
 v  
 v   

k   kij

f  distance vi   vj   

 
kij    

 v   

x
k kij   

f  dk    
 
 k      k     

vi   vj   similar analysis produces 
 v   

e m c vi   vi      f    

x
k  

f  dk    
 
 k      k     

finally exact shapley value given by 
svg   vi    

x

e m c vi   vj    

vj v  g 

algorithm   implements formulae  vertex v  vector distances
every vertex first computed using dijkstras algorithm  cormen         yields
vector dv already sorted increasing order  vector traversed
   

fimichalak  aadithya  szczepaski  ravindran    jennings

algorithm    computing shapley value game  
input  weighted graph g v  e  w    function f   r  r 
output  shapley value nodes g game g 
initialise  v v  g  set sv v      
foreach v v  g 
 distances d  nodes w    dijkstra v g  
sum      index    v     prevdistance       prevsv      
index    
d index     prevdistance
currsv   prevsv 
else
currsv   f  d index  
  index sum 
end
sv w index      currsv 
sum   

f  d index  
index   index   

prevdistance   d index   prevsv   currsv 
index   
end
sv v     f    sum 
end
return sv 

p f  dk    
reverse  compute backwards cumulative sum
 k    k      step backward traversal  shapley value appropriate node w updated according
e m c w  v   equation  traversal  shapley value v updated according
e m c v  v   equation  process repeated nodes v end
algorithm  shapley value computed exactly o  v   e     v    log v    time 
final observation algorithm   works directed graphs long use
appropriate version dijkstras algorithm  see  e g   cormen        
    game       c     agents

p
 weights inside c  wcutoff  agent 

subsection  generalize game g  case weighted networks  given positive
weighted network g v 
p e  w   value wcutoff  vi   every node vi v  g   first
define w  vj   c    vi c w  vj   vi   every coalition c  w  vi   vj   weight
edge nodes vi vj  or   edge   notation 
define game g  characteristic function 
 
 
   c   
size  vi   vi c  or  w  vi   c  wcutoff  vi    
   

c  
otherwise 

ficomputation shapley value game theoretic network centrality

algorithm    computing shapley value game  
input  weighted network g v  e  w    cutoffs wcutoff  vi   vi v  g 
output  shapley value nodes g game g 
foreach vi v  g 
compute store  
end
foreach vi v  g 
sv vi       
foreach   degg  vi  
ii       x ii    p   pr n          w
compute    xm
cutoff  vi    

p
sv vi        degg  vi    
end
foreach vj ng  vi  
p     
foreach   degg  vj    
ij
ij
ij
compute    xm
      xm
  z   zm
 
deg  v  m

g j
p    z degg  vj   deg
 
g  vj     

end
sv vi      p 
end
end
return sv 

formulation applications in  instance  analysis information diffusion  adoption innovations  viral marketing  indeed  many cascade models
phenomena weighted graphs proposed  e g   granovetter        kempe et al  
      young        work assuming agent change state inactive
active sum weights active neighbors least equal
agent specific cutoff 
although able come exact formula shapley value
game     analysis yields approximate formula found accurate
practice 
detail  observe node vi marginally contributes node vj ng  vi   value
coalition ci vj
  ci wcutoff  vj   w  vi   vj   w  vj   ci     wcutoff  vj   
let us denote bvi  vj bernoulli random variable corresponding event 
need following additional notation 
let ng  vj      vi   w    w     wdegg  vj      
    computing shapley value game involves determining whether sum weights specific
edges  adjacent random coalition  exceeds threshold  problem seems least hard
computing shapley value weighted voting games   p complete  elkind et al         

   

fimichalak  aadithya  szczepaski  ravindran    jennings

let weights edges vj nodes ng  vj   wj  
 w  vi   vj    w    w     wdegg  vj      order 
let j sum weights wj j sum squares
weights wj  
let kij number nodes ng  vj   occur vi ci  
let xtij sum t subset wj    w  vi   vj    drawn uniformly random
set possible t subsets  finally
let ymij event  kij   vj
  ci   
then 
degg  vj   

e bvi  vj    

x

ij
pr ymij   pr xm
 wcutoff  vj   w  vi   vj    wcutoff  vj     

m  

pr ymij   obtained proposition   
pr ymij  



degg  vj  
degg  vj     m   degg  vj   m  
 
 
 
 degg  vj        
degg  vj   degg  vj       


ij
evaluating pr xm
 wcutoff  vj   w  vi   vj    wcutoff  vj     much difficult
ij
complicated function degg  vj     numbers wj  
distribution xm
ij
 w  vi   vj     however  obtain analytical expressions mean  xm
  variance
ij
   xm
   given by 


 j w  vi   vj   
degg  vj    
 j w  vi   vj    
m degg  vj     m 
ij
  
 j w  vi   vj   
  
   xm
 degg  vj      degg  vj     
degg  vj    
ij
 xm
  

ij
knowing mean variance  not exact distribution  xm
  propose
approximation 

ij
ij
ij
xm
n   xm
      xm
   

n        denotes gaussian random variable mean variance    
approximation similar randomised approach proposed tested
fatima et al         
approximation  have 
   

ficomputation shapley value game theoretic network centrality

ij
ij
zm
  pr xm
 wcutoff  vj   w  vi   vj    wcutoff  vj    

given

ij
zm

 
 
erf

 

ij
wcutoff  vj    xm
 

ij
  xm  

 
erf

ij
wcutoff  vj   w  vi   vj    xm
 

ij
  xm  

  
 

allows us write 
degg  vj   

e bvi  vj    

x
m  

degg  vj  
z ij  
degg  vj   degg  vj       

equations true vj    vi   vj   vi have 

 
e bvi  vi  
    degg  vi  

degg  vi  

x

ii
ii
pr n   xm
      xm
     wcutoff  vi    

m  


ii
 xm
  



degg  vi  



ii
   xm
  

i 
 degg  vi   m 
 i
  
degg  vi    degg  vi     
degg  vi  

p
finally shapley value node vi given vj  vi  ng  vi   e bvi  vj   
p
inpeach graph
p holds vi v  g  degg  vi     e   algorithm   implements
o  v     vi v  g  vj ng  vi   degg  vj    o  v      v   e     o  v   e   solution compute
shapley value agents game g  using approximation 
furthermore  make following observation  approximation discrete random
ij
variable xm
continuous gaussian random variable good degg  vj   large 
small degg  vj    one might well use brute force computation determine e bvi  vj  
o  degg  vj      time 
far directed graphs concerned  calculations algorithm   consider
indegree node instead degree  furthermore  set neighbours node u
defined set nodes vi connected directed edge  u  vi   
   

fimichalak  aadithya  szczepaski  ravindran    jennings

   simulations
section evaluate time performance exact algorithms games g 
g  approximation algorithm game g    detail  compare exact
algorithms method approximating shapley value via monte carlo sampling
feasible approach compute game theoretic network centrality
available date literature  first  provide detailed description simulation
setup  then  present data sets simulation results 
    simulation setup
approximation methods shapley value recently
proposed literature  divided three groupseach referring specific
subclass coalitional games consideration 
   first  let us consider method proposed fatima et al         elaborated
fatima  wooldridge  jennings         approach concerns weighted
voting games  games  player certain number votes  or
words  weight   coalition winning number votes coalition
exceeds specific threshold  losing otherwise  fatima et al  propose
following method approximate shapley value weighted voting games  instead
finding marginal contributions players  n coalitions  authors consider
n randomly selected coalitions  one size  i e     n  
n coalitions players expected marginal contributions calculated
average contributions yields approximation shapley value  whereas
fatima et al  method certainly attractive  applicable games
value coalition depends sum associated weights bounds 
case games g  g     
   another method proposed bachrach  markakis  procaccia  rosenschein 
saberi      a  context simple coalitional games    characteristic function binaryi e   coalition value either zero one 
games  bachrach et al  extend approach suggested mann shapley
       provide rigorous statistical analysis  particular  mann shapley
described monte carlo simulations estimate shapley value random
sample coalitions  bachrach al  use technique compute banzhaf power
index suggested using random sample permutations players
order compute shapley shubik index simple coalitional games   
computation confidence interval  crucial approach  hinges
upon binary form characteristic function simple coalitional games 
    recall approximation algorithm g  builds upon fatima et al  method 
game marginal contribution node depends weights assigned incident edges 
    note weighted voting games simple coalitional games 
    shapley shubik index well known application shapley value evaluates power
individuals voting  shapley   shubik        

   

ficomputation shapley value game theoretic network centrality

algorithm    monte carlo method approximate shapley value
input 
characteristic function v  maximum iteration maxiter
output  aproximation shapley value game v
vi v  g 
sv vi        
end
    maxiter
shuffle v  g   
marginal contribution block
p  
vi v  g 
sv vi      v p  vi      v p   
p   p  vi    
end
end
vi v  g 
sv vi  
sv vi     maxiter
 
end
return sv  

method general one proposed fatima et al        as weighted
voting games subset simple coalitional gamesbut still cannot effectively
used games g  g    characteristic functions binary 
   unlike first two methods  last method described castro et al        
efficiently applied coalitional games characteristic function game form 
assuming worth every coalition computed polynomial time  here 
approximating shapley value involves generating permutations players
computing marginal contribution player set players occurring
it  solution precision increases  statistically  every new permutation
analysed  furthermore  authors show estimate appropriate size
permutation sample order guarantee low error  given broad applicability 
method used simulations comparison benchmark 
detail  preliminary step  test maximum number monte
carlo iterations performed reasonable time given game 
maximum number iterations  denoted maxiter  becomes input algorithm  
monte carlo sampling  algorithm  one maxiter iterations  random
permutation nodes generated  then  using characteristic function set
                      calculates marginal contribution node set p
   

fimichalak  aadithya  szczepaski  ravindran    jennings

nodes occurring given node random permutation    finally  algorithm
divides aggregated sum contributions node number iterations
performed  time complexity algorithm o maxiter con   con denotes
number operations necessary computing marginal contribution block 
block specifically tailored particular form characteristic function
games g  g    particular  game g   see algorithm     constructed follows 
recall that  game  node vi makes positive contribution coalition p
adjacent node u two conditions  firstly  neither vi u p  
secondly  edge p vi u  check conditions algorithm  
store nodes already contributed value coalition p array
called  counted  node vi   algorithm iterates set neighbours
adjacent node checks whether adjacent node counted array
counted  not  marginal contribution node vi increased one  appendix
describe marginal contribution block games g            g    respectively   
details algorithm   applied generate shapley value approximations
games g  g    propose exact polynomial solutions  differ g   
developed approximate solution  specifically  games g  g   
   use exact algorithm proposed paper compute shapley value 
   then  run monte carlo simulations    times    every run 
perform maxiter monte carlo iterations 
every five iterations  compare approximation shapley value
obtained via monte carlo simulation exact shapley value obtained
algorithm 
record algorithms runtime error  error defined
maximum discrepancy actual shapley value monte carlobased approximation shapley value 
   finally  compute confidence interval using iterations        confidence
level    
case game g  cannot determine exact shapley value larger networks 
therefore  performed two levels simulation  one level small networks one level
large networks  specifically 
   small networks  generate    random instances weighted complete graphs
  nodes  denoted k    number graphs    nodes  denoted
    recall characteristic functions v    v            v  correspond games g    g            g    respectively 
    software package c   containing exact approximation algorithms  well monte
carlo approximation algorithms available www tomaszmichalak net 
    purpose comparison method  suffices use    iterations  standard errors
converge significantly indicate magnitude cost using monte carlo method 
    since g  monte carlo iteration relatively time consuming  run once  thus 
confidence interval generated  i e   third step omitted 

   

ficomputation shapley value game theoretic network centrality

k     weights drawn uniform distribution u         then  graph
two parameters wcutoff  vi         vi   wcutoff  vi         vi     
compute exact shapley value using formula     
then  run approximation algorithm determine error approximation 
finally  run           monte carlo iterations k  k     respectively 
   large networks  generate    random instances weighted complete
graphs       nodes  we denote k        then  graph
three parameters wcutoff  vi         vi    wcutoff  vi         vi   
wcutoff  vi         vi    
run approximation algorithm shapley value 
then  run fixed number          monte carlo iterations 
finally  compute monte carlo solution converges results
approximation algorithm 
described simulation setup  discuss data sets and  finally 
simulation results 
    data used simulations
consider two networks already well studied literature  specifically 
games g  g  present simulations undirected  unweighted network representing
topology western states power grid  wspg     network  which     
nodes      edges  studied many contexts  see  instance  watts  
strogatz        freely available online  see  e g   http   networkdata ics uci edu 
data php id       games g  g   played weighted networks   used network
astrophysics collaborations  abbreviated henceforth aphc  jan        
december           network  which       nodes        edges  freely
available online  see  e g   http   networkdata ics uci edu  data php id    
used previous studies newman        
    simulation results
results presented section show exact algorithms are  general  much
faster monte carlo sampling  case even allow generous
error tolerance  furthermore  requiring smaller monte carlo errors makes monte carlo
runtime exponentially slower exact solution 
    recall j sum weights wj defined section     
    note distance threshold dcutoff replaced hop threshold kcutoff   game g  played
unweighted network 

   

fimichalak  aadithya  szczepaski  ravindran    jennings

    

    

    

    

    

    

    

    
   

    
   

   

   

   

   

   

   
     ms

 
   

  

                    
maximal allowable mc error    

  

    

   

  

                    
maximal allowable mc error    

  

 

figure    g    k      wspg  uw 
    

monte carlo solution
exact solution

    

     ms

 

 

figure    g    wspg  uw 

monte carlo solution
exact solution

    

    

    

    

    

    

    

time  ms 

time  ms 

monte carlo solution
exact solution

    

time  ms 

time  ms 

    

monte carlo solution
exact solution

    

    
   

    
   

   

   

   

   

   

   
     ms

 
   

  

                    
maximal allowable mc error    

figure    g    ki  

degi
   

  

 

     ms

 
   

  

                    
maximal allowable mc error    

figure    g    ki  

wspg  uw 

 
 

  

 

degi   wspg  uw 

detail  simulation results game g  shown figure    dotted line
shows performance exact algorithm needs     ms compute shapley
value  contrast  generating reasonable monte carlo result takes substantially longer
time  the solid line shows average shaded area depicts confidence interval
monte carlo simulations   particular  takes average    ms achieve
    error     ms required guarantee    error  which
     times slower exact algorithm  
 

figures       concern game g  different values k  k      ki   deg
    ki     degi  
  
respectively  degi degree node vi    advantage exact algorithm
monte carlo simulation exponential 

replacing distance threshold dcutoff hop threshold kcutoff enables game g 
played unweighted network  thus  similarly games g  g    test
western states power grid  results shown figures      kcutoff
equal      respectively  third game clearly computationally challenging
g  g   note vertical axis seconds instead milliseconds   now 
    recall g  meaning parameter k follows  value coalition c depends
number nodes network least k neighbours c 

   

fi  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  

monte carlo solution
exact solution

time  s 

time  s 

computation shapley value game theoretic network centrality

     
   

  

                    
maximal allowable mc error    

  

 

  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  

monte carlo solution
exact solution

     
   

figure    g    kcutoff      wspg  uw 

  

                    
maximal allowable mc error    

  

 

figure     g    kcutoff      wspg  uw 

exact algorithm takes   s complete  much lower speedups exact
methods respect monte carlo approach stem fact algorithms
start dijkstras algorithm  although algorithm run
cases takes     s considered network  means exact
solution slower orders magnitude  compared games g  g     monte carlo
approach slower  slowdown much less significant relative terms 
figures       show performance algorithms game g  astrophysics
collaboration network that  unlike western states power grid  weighted network 

davg
observe increasing value dcutoff  here dcutoff   avg
  dcutoff      
significantly worsens performance monte carlo based algorithm 
increasing number nodes taken account computing marginal
contributions  see inner loop algorithm    time consuming 
increases monte carlo error 
 
game g  performance algorithms shown figures          for f  d      d
 
 

f  d      d  f  d    e   respectively   whereas monte carlo methods
first three games able achieve reasonable error bound seconds minutes 
fourth game takes    hours approach     error 
inner loop marginal contribution block  see algorithm    iterates nodes
network  due time consuming performance run simulations once 
interestingly  observe error monte carlo method sometimes increases
slightly iterations performed  confirms error monte
carlo method approximate shapley value proposed castro et al        
statistically decreasing time  certain new randomly chosen permutations actually
increase error 

figures               present comparisons approximation algorithm game g 
monte carlo sampling small networks  for exact shapley value
computed definition formula       figures  horizontal dotted
line shows running time solution  vertical dotted line shows average
approximation error shaded area confidence interval  previously 
   

fi  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
 
 
 

monte carlo solution
exact solution

   
   
   
   
  
  
  
  
     min
   

  

                    
maximal allowable mc error    

figure     g    dcutoff  

  

davg
   

  

     min

 

   

  

  

  

  

  

  

  

  

  

  

 

 
     min
  

                    
maximal allowable mc error    

figure     g    f  d   

 
  d  

  

  

aphc  w 

     min

 
  

                    
maximal allowable mc error    

figure     g    f  d   

aphc  w 

 

monte carlo solution
exact solution

   

 

davg
   

  

  

  

   

                    
maximal allowable mc error    

  

monte carlo solution
exact solution

 

  

figure     g    dcutoff  

aphc  w 

time  h 

time  h 

monte carlo solution
exact solution

   

time  min 

time  min 

michalak  aadithya  szczepaski  ravindran    jennings

 
 
  d 

  

 

aphc  w 

monte carlo solution
exact solution

  
  

time  h 

  
  
  
  
 
     min

 
   

  

                    
maximal allowable mc error    

  

 

figure     g    f  d    ed   aphc  w 
solid line shows average  shaded area depicts confidence interval
monte carlo simulations  see figures           approximation error
proposed algorithm well contained small networks  specifically  k 
     whereas bigger network k       however  notice that 
higher values wcutoff   monte carlo method may slightly outperform solution  see
   

fi 
   
 
   
 
   
 
   
 
   
 
   
 
   
 

  
     
        
    
 

monte carlo solution
approximation solution

time  ms 

time  ms 

  
     
        
    
 

computation shapley value game theoretic network centrality

     ms
      

                       
maximal allowable mc error    

 
   
 
   
 
   
 
   
 
   
 
   
 
   
 

 

monte carlo solution
approximation solution

     ms
      

  
 
      
 
      
  
 

monte carlo solution
approximation solution

time  ms 

time  ms 

  
  
  
  
  
  
  
  
  
 
 
 
 
 

     ms
      

                       
maximal allowable mc error    

 

figure     g    wcutoff        k   w  

  
 
      
 
      
  
 

figure     g    wcutoff        k   w 

                       
maximal allowable mc error    

 

  
  
  
  
  
  
  
  
  
 
 
 
 
 

monte carlo solution
approximation solution

     ms
      

figure     g    wcutoff        k    w 

                       
maximal allowable mc error    

 

figure     g    wcutoff        k    w 

figure    average approximation error monte carlo sampling achieved
    ms lower average error achieved method  already k   effect
occur  see figure     
large networks  exact shapley value cannot obtained  naturally
unable compute exact approximation error  believe error may higher
values obtained k  k     however  mixed strategy  discussed
section   uses approximation large degree vertices  work
towards containing error within practical tolerance bounds  far believe
monte carlo gives good results  figure     infer approximation solution
large networks gives good results  within     least two times faster
monte carlo algorithm 
summarise  exact solutions outperform monte carlo simulations even relatively
wide error margins allowed  however  always case approximation
algorithm game g    furthermore  underlined centrality metrics
consideration cannot described games g  g  exact
algorithms available  monte carlo simulations still viable option 
   

fimichalak  aadithya  szczepaski  ravindran    jennings

approximation solution
monte carlo solution wcutoff     
monte carlo solution wcutoff     
monte carlo solution wcutoff     

  
  
  

time  min 

  
  
  
      min

  
 
 

    

 

    

 

    

 
   

  

                    
maximal allowable mc error    

  

 

figure     g    wcutoff        wcutoff        wcutoff        k      w 

   conclusions future work
key finding paper shapley value many centrality related cooperative
games interest played networks solved analytically  resulting algorithms
error free  run polynomial time and  practice  much faster
monte carlo methods  approximate closed form expressions algorithms
constructed classes games played weighted networks  simulation results
show approximations acceptable range situations 
number directions future work  one hand  shapley value based
extensions centrality notions  suit particular applications  developed 
step direction  first study shapley value based betweenness centrality
recently presented szczepaski  michalak  rahwan         hand 
would interesting analyze coalitional games defined network would
better reflect centrality nodes certain real life applications  spirit  recent works
del pozo  manuel  gonzlez arangena  owen        amer  gimnez  magana
       focus generalized coalitional games order agents forming coalitions
matter  nevertheless  still classes coalitional games  games
either positive negative externalities  yi         extensively studied
game theory may yield interesting results applied network centrality 
another interesting application new class coalitional games defined
network could developed problem influence maximization  already mentioned
introduction 
interesting analyse properties game theoretic network centralities constructed solution concepts cooperative game theory shapley value 
particular  game defined network belongs class simple coalitional
games  i e   binary characteristic function  banzhaf power index  banzhaf 
      could used centrality metric  otherwise  general solution concepts
core  osborne   rubinstein        nucleolus  schmeidler        could
applied 
   

ficomputation shapley value game theoretic network centrality

ultimately  would interesting develop formal general approach
would allow us construct coalitional games defined networks correspond
known centrality metrics even entire families them    approach would
involve developing group centrality first building characteristic function
coalitional game upon it  course  developing new centrality metrics based
coalitional games  one keep mind computational properties proposed
solutions  although able obtain satisfactory computational results games
considered paper  computation game theoretic network centrality may
become much challenging complex definitions characteristic function 

acknowledgments
would thank three anonymous reviewers comments earlier version
paper helped improve considerably  also  would thank dr talal
rahwan dr suri rama narayanam proofreading  helpful comments suggestions 
tomasz michalak partially supported european research council advanced grant         race   nicholas r  jennings  and partially tomasz michalak 
supported orchid project  funded epsrc  engineering physical research
council  grant ep i         

appendix a  marginal contribution blocks algorithm   g   g 
algorithm    marginal contribution block algorithm   g 
counted false  
edges    
foreach vi v  g 
foreach u ng  vi    vi  
edges u     
 counted u    edges u  k u  u   vi  
sv vi      
counted u    true  
end
end
end
games considered paper marginal contribution block algorithm   takes slightly different form  main text explained functioning
block g    appendix  discuss block remaining four games 
particular 
g    here  node vi makes positive contribution coalition p
adjacent node u two conditions  firstly  neither vi u
    thank anonymous reviewer suggestion 

   

fimichalak  aadithya  szczepaski  ravindran    jennings

algorithm    marginal contribution block algorithm   g 
counted false  
foreach vi v  g 
foreach u extn eighbors vi    vi  
 counted u 
sv vi      
counted u    true  
end
end
end
algorithm    marginal contribution block algorithm   g 
dist infinity  
foreach vi v  g 
foreach u v  g 
d u    dist u 
sv vi      f d u     f dist u    
dist u    d u   
end
end
sv vi      f dist u     f     
dist vi        
end

p   secondly  less k edges p vi exactly k   edges
p u  order check first condition algorithm   use array
counted  check second one  use array edges  node vi  
algorithm iterates set neighbours adjacent node
checks whether adjacent node meets two conditions  so  marginal
contribution node vi increased one 
g      marginal contribution blocks games g  g   algorithms      
values dependent distance  extn eighbours d  calculated
using dijkstras algorithm stored memory  pre computations allow us
significantly speed monte carlo methods  now  g  node vi makes positive
contribution coalition p adjacent node u
two conditions  firstly  neither vi u p   secondly  edge length
dcutoff p vi u  check conditions algorithm   use
array counted  node vi   algorithm iterates set extended
neighbours checks whether neighbour meets conditions 
so  marginal contribution node vi increased one  game g    node
vi makes positive contribution coalition p node  including itself 
closer vi p   algorithm   use array dist store distances
   

ficomputation shapley value game theoretic network centrality

algorithm     marginal contribution block algorithm   g 
counted false  
weights    
foreach vi v  g 
foreach u ng  vi    vi  
weights u    w  vi   u  
 counted u    weights u  wcutoff  u  u   vi  
sv vi      
counted u    true  
end
end
end

coalition p nodes graph array store distances vi
nodes  node vi   algorithm iterates nodes
graph  node u  distance vi u smaller p u 
algorithm computes marginal contribution f  d u   f  dist u    value
dist u  updated d u this new distance p u 
g    game g    extension g  weighted graphs  node vi makes positive
contribution coalition p  both adjacent node u 
two conditions  firstly  neither vi u p   secondly  sum weights
edges p vi less wcutoff  vi   sum weights edges p u
greater than  equal to  wcutoff  u w  vi   u  smaller wcutoff  vi   w  vi   u  
order check first condition algorithm    use array counted 
check second one  use array w eights  node vi   algorithm
iterates set neighbours adjacent node checks whether
adjacent node meets two conditions  so  marginal contribution
node vi increased one 

appendix b  main notation used paper


set players 

ai

player a 

c

coalition 
value coalition  characteristic function 

 c 
 a    gi
svgj  vi  
g    v  e 
g    v  e  w  
w  v  u 

coalitional game 
shapley value od vertex vi game gj  
unweighted graph network consisting set vertices v edges e 
weighted graph network 
weight edge v u 
   

fimichalak  aadithya  szczepaski  ravindran    jennings

v  g  v  e g  e
vi v

set vertices edges graph g 

deg vi  

vertex set v  
degree vertex vi  

ng  vi  

set neighbours vertex vi g 

distance v  u  d v  u  distance vertices v u 
extended neighbourhood  ng  vj   dcutoff      vk    vj   distance vk   vj  
ng  vi   dcutof f  
dcutoff   
marginal contribution vertex u makes vertex v 
c u  v 
 a 
 a 
 i 
c  i 

set orders players a 
single ordering agents a 
position th element ordering  
 aj    j     i   

e  

 v v  g    v c  or  u c  u  v  e g   
number assigned vertex v used game    minimum number
adjacent nodes necessary influence node vi  
number assigned vertex v used game    minimum sum weights
adjacent edges necessary influence node vi  
expectation operator 

p  

probability operator 

o  

big complexity notation 

f ringe c 
k vi   ki
wcutoff  vi  

b  x 
n       
erf   

random variables 
normal distribution mean variance    

j

error function 
sum weights incident edges vertex vj  

j

sum squares weights incident edges vertex vj  

f    

positive valued decreasing function 

ki

complete graph  clique  nodes 

references
aadithya  k   michalak  t     jennings  n          representation coalitional games
algebraic decision diagrams  aamas     proceedings   th international
joint conference autonomous agents multi agent systems  pp           
amer  r   gimnez  j     magana  a          accessibility measures nodes directed
graphs using solutions generalized cooperative games  mathematical methods
operations research             
aziz  h   lachish  o   paterson  m     savani  r       a   power indices spanning connectivity games  aaim     proceedings  th international conference
algorithmic aspects information management  pp       
   

ficomputation shapley value game theoretic network centrality

aziz  h   lachish  o   paterson  m     savani  r       b   wiretapping hidden network 
wine     proceedings  th workshop internet   network economics 
pp         
bachrach  y   markakis  e   procaccia  a  d   rosenschein  j  s     saberi  a       a  
approximating power indices  aamas     proceedings  th international
joint conference autonomous agents multi agent systems  pp         
bachrach  y   rosenschein  j  s     porat  e       b   power stability connectivity
games  aamas     proceedings  th international joint conference
autonomous agents multi agent systems  pp          
bachrach  y     rosenschein  j          power threshold network flow games  autonomous
agents multi agent systems                 
banzhaf  j  f          weighted voting doesnt work  mathematical analysis  rutgers
law rev              
bikhchandani  s   hirshleifer  d     welch  i          theory fads  fashion  custom 
cultural change informational cascades  journal political economy          
        
bolus  s          power indices simple games vector weighted majority games
means binary decision diagrams  european journal operational research          
       
bonacich  p          factoring weighting approaches status scores clique identification  journal mathematical sociology                
bonacich  p          power centrality  family measures  american journal
sociology                   
borgatti  s  p     everett  m          graph theoretic framework classifying centrality
measures  social networks  social networks                
brandes  u          faster algorithm betweenness centrality  journal mathematical
sociology                 
brandes  u     erlebach  t          network analysis  methodological foundations  lecture
notes computer science  tutorial  springer 
castro  j   gomez  d     tejada  j          polynomial calculation shapley value
based sampling  computers   operations research                   
chalkiadakis  g   elkind  e     wooldridge  m          computational aspects cooperative game theory  synthesis lectures artificial intelligence machine learning 
morgan   claypool publishers 
conitzer  v     sandholm  t          computing shapley values  manipulating value division schemes checking core membership multi issue domains  aaai    
proceedings nineteenth national conference artificial intelligence  pp     
    
cormen  t          introduction algorithms  mit press 
   

fimichalak  aadithya  szczepaski  ravindran    jennings

del pozo  m   manuel  c   gonzlez arangena  e     owen  g          centrality directed
social networks  game theoretic approach  social networks                 
deng  x     papadimitriou  c          complexity cooperative solution concepts 
mathematics operations research                 
elkind  e   goldberg  l   goldberg  p     wooldridge  m          tractable expressive
class marginal contribution nets applications  mathematical logic quarterly 
               
eppstein  d     wang  j          fast approximation centrality  soda     proceedings
twelfth annual acm siam symposium discrete algorithms  pp         
everett  m  g     borgatti  s  p          centrality groups classes   journal
mathematical sociology                 
fatima  s  s   wooldridge  m     jennings  n          randomized method shapley
value voting game  aamas     proceedings   th international joint
conference autonomous agents multi agent systems  pp         
fatima  s  s   wooldridge  m     jennings  n          linear approximation method
shapley value  artificial intellilgence                     
freeman  l          centrality social networks  conceptual clarification  social networks 
              
gmez  d   gonzlez arangena  e   manuel  c   owen  g   del pozo  m     tejada  j 
        centrality power social networks  game theoretic approach  mathematical social sciences               
goyal  a   bonchi  f     lakshmanan  l  v          learning influence probabilities
social networks  wsdm     proceedings  rd acm international conference
web search data mining  pp         
granovetter  m          threshold models collective behavior  american journal
sociology                   
greco  g   malizia  e   palopoli  l     scarcello  f          complexity compact
coalitional games  ijcai     proceedings twenty first international joint
conference artifical intelligence  pp         
grofman  b     owen  g          game theoretic approach measuring centrality
social networks  social networks            
ieong  s     shoham  y          marginal contribution nets  compact representation
scheme coalitional games  ec     proceedings sixth acm conference
electronic commerce  pp         
irwin  m     shapley  l  s          values large games  iv   evaluating electoral
college montecarlo techniques  ca   rand corporation  santa monica 
jeong  h   mason  s  p   barabasi  a  l     oltvai  z  n          lethality centrality
protein networks  nature                   
kempe  d   kleinberg  j     tardos            maximizing spread influence
social network  kdd     proceedings ninth acm sigkdd international
conference knowledge discovery data mining  pp         
   

ficomputation shapley value game theoretic network centrality

kempe  d   kleinberg  j     tardos            influential nodes diffusion model
social networks  automata  languages programming           
koschtzki  d   lehmann  k   peeters  l   richter  s   tenfelde podehl  d     zlotowski  o 
        centrality indices  network analysis  vol       lecture notes computer
science  pp        springer 
lee  m  j   lee  j   park  j  y   choi  r  h     chung  c  w          qube  quick
algorithm updating betweenness centrality  mille  a   gandon  f  l   misselis 
j   rabinovich  m     staab  s   eds    www  pp          acm 
mann  i     shapley  l          values large games  vi  evaluating electoral college
exactly   rand research memorandum 
matsui  t     matsui  y          survey algorithms calculating power indices
weighted majority games  journal operations research society japan     
     
michalak  t   marciniak  d   samotulski  m   rahwan  t   mcburney  p   wooldridge  m  
  jennings  n       a   logic based representation coalitional games externalities  aamas     proceedings  th international joint conference
autonomous agents multi agent systems  pp         
michalak  t   rahwan  t   marciniak  d   szamotulski  m     jennings  n       b   computational aspects extending shapley value coalitional games externalities 
ecai     proceedings nineteenth european conference artificial intelligence 
myerson  r          graphs cooperation games  mathematics operations research 
              
nagamochi  h   zeng  d   kabutoya  n     ibaraki  t          complexity minimum
base game matroids  mathematics operations research                 
newman  m          scientific collaboration networks  ii  shortest paths  weighted networks 
centrality  physical review e                     
noh  j     rieger  h          random walks complex networks  physical review letters 
                    
osborne  m  j     rubinstein  a          course game theory  vol    mit press
books  mit press 
reka  a     barabsi  a          statistical mechanics complex networks  reviews
modern physics           
sakurai  y   ueda  s   iwasaki  a   minato  s     yokoo  m          compact representation
scheme coalitional games based multi terminal zero suppressed binary decision
diagrams  prima     public risk management association  pp      
schmeidler  d          nucleolus characteristic function game  siam journal
applied mathematics           
schultes  d     sanders  p          dynamic highway node routing  sea     proceedings
 th workshop experimental efficient algorithms  lncs  pp        springer 
   

fimichalak  aadithya  szczepaski  ravindran    jennings

shapley  l  s          value n person games  kuhn  h     tucker  a   eds   
contributions theory games  volume ii  pp          princeton university
press 
shapley  l  s     shubik  m          method evaluating distribution power
committee system  american political science review                 
stephenson  k     zelen  m          rethinking centrality  methods examples  social
networks              
suri  n     narahari  y          determining top k nodes social networks using
shapley value  aamas     proceedings  th international joint conference
autonomous agents multi agent systems  pp           
suri  n     narahari  y          shapley value based approach discover influential
nodes social networks  ieee transaction automation science engineering 
        
szczepaski  p  l   michalak  t     rahwan  t          new approach betweenness
centrality based shapley value  aamas     proceedings   th international joint conference autonomous agents multi agent systems  pp 
       
valente  t          social network thresholds diffusion innovations  social networks 
             
watts  d     strogatz  s          collective dynamics small world networks  nature 
                   
wooldridge  m     dunne  p          computational complexity coalitional resource games  artificial intelligence                   
yi  s  s          stable coalition structures externalities  games economic behavior                 
young  h  p          diffusion innovations social networks  blume  b  l    
durlauf  s  n   eds    economy evolving complex system  vol    proceedings
volume santa fe institute studies sciences complexity santa fe institute
studies sciences complexity  pp          oxford university press us 
zolezzi  j  m     rudnick  h          transmission cost allocation cooperative games
coalition formation  ieee transactions power systems               

   


