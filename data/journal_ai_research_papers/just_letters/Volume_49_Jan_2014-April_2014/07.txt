journal of artificial intelligence research                  

submitted        published      

mechanisms for fair allocation problems 
no punishment payment rules in verifiable settings
gianluigi greco

ggreco mat unical it

dipartimento di matematica e informatica
universita della calabria
i       rende  italy

francesco scarcello

scarcello dimes unical it

dimes
universita della calabria
i       rende  italy

abstract
mechanism design is considered in the context of fair allocations of indivisible goods
with monetary compensation  by focusing on problems where agents declarations on allocated goods can be verified before payments are performed  a setting is considered where
verification might be subject to errors  so that payments have to be awarded under the presumption of innocence  as incorrect declared values do not necessarily mean manipulation
attempts by the agents  within this setting  a mechanism is designed that is shown to be
truthful  efficient  and budget balanced  moreover  agents utilities are fairly determined by
the shapley value of suitable coalitional games  and enjoy highly desirable properties such as
equal treatment of equals  envy freeness  and a stronger one called individual optimality 
in particular  the latter property guarantees that  for every agent  her his utility is the
maximum possible one over any alternative optimal allocation 
the computational complexity of the proposed mechanism is also studied  it turns
out that it is  p complete so that  to deal with applications with many agents involved 
two polynomial time randomized variants are also proposed  one that is still truthful and
efficient  and which is approximately budget balanced with high probability  and another
one that is truthful in expectation  while still budget balanced and efficient 

   introduction
whenever the outcome of some social choice process depends on the information collected
from a number of self interested agents  strategic issues may come into play  indeed  agents
may find it convenient to misreport their types  i e   the relevant information they own
as private knowledge  so that the  global  best possible solution can be missed  in these
cases  mechanism design techniques can be used as solution approaches  which augment
combinatorial algorithms with appropriate monetary payments  aimed at motivating all
agents to truthfully report their private types  see  e g   nisan  roughgarden  tardos   
vazirani        shoham   leyton brown        
on the class of social choice utilitarian problems  agent types encode  monetary  valuations over the set of all solutions and the goal is to compute a solution maximizing the social
welfare  i e   the sum of agents true evaluations  a prominent role in mechanism design
for problems of this class is played by the vickrey clarke grove  vcg  paradigm  vick 

c
    
ai access foundation  all rights reserved 

figreco   scarcello

ery        clarke        groves         which is a general method for designing truthful
mechanisms  i e   mechanisms where truth telling is a dominant strategy for each agent  in
particular  vcg mechanisms are efficient  that is  they guarantee that a solution maximizing the social welfare is actually computed  however  they are not budget balanced  i e   the
algebraic sum of the monetary transfers is not always zero and mechanisms from this class
can run into deficit  in fact  this is a well known drawback of vcg mechanisms  see  e g  
archer   tardos         but it is essentially the best one can hope to do  given classical
impossibility theorems  green   laffont        hurwicz        stating that no truthful
mechanism can be designed to be always efficient and budget balanced 
in many practical applications  however  payments to agents can be performed after
the final outcome is known  so that some kind of verification on reported types might be
possible  this additional power is not considered in the classical mechanism design setting
and  in fact  whenever verification is allowed  some impossibility results might no longer
hold  mechanisms with verification have been introduced by nisan and ronen         who
considered verification for a task scheduling problem  we have some agents declaring the
amount of time they need to solve each task  and the goal is to have all tasks being solved 
by minimizing the completion time of the last solved one  hence  the make span   in this
context  payments are computed after the actual task release times have been observed  so
that we have  for instance  the ability to punish some agent whose declared ability has
been verified to be different than its actual performance in the process 
compared to standard mechanisms  see  e g   nisan et al          those with verification
have received considerably less attention in the literature  see  e g   nisan   ronen       
auletta  de prisco  penna    persiano        penna   ventre      a  krysta   ventre 
      ferrante  parlato  sorrentino    ventre        penna   ventre      b  auletta 
de prisco  penna  persiano    ventre        auletta  penna  persiano    ventre         in
particular  such works consider a verification ability that is partial  in the sense that agents
reporting is restricted to true types plus certain specific kinds of deviations  e g   values
that are lower than the true ones  and verification is focused on detecting such lies only 
an extension of the above model has been recently proposed by caragiannis  elkind 
szegedy  and yu         who assume no a priori restrictions on the agents reported types 
within a setting where an agent cheating on her his type will be caught with some probability that may depend on her his true type  the reported type  or both  in fact  despite the
different facets of the verification power  most of the mechanisms with verification proposed
in the literature share the idea of providing incentives to truthfully report private types by
exploiting the intimidation of punishing those agents that will be caught lying  moreover 
while budget limits have been considered in some approaches  see  e g   nisan   ronen 
       no mechanism with verification has been designed to be budget balanced  with the
focus being on truthfulness and efficiency 
in this paper  we consider instead a budget balanced mechanism based on a model
of verification where there is no restriction on the possible declarations  hence  arbitrary
deviations are possible   and nevertheless no punishment can be used after the verification
process  this design constraint has been guided by real world applications where it clearly
emerges that a punishing approach would hardly be acceptable by agents  unless a clear
proof of a deliberate malevolent behavior can be exhibited  moreover  even in this case
the punishment should be proportional to the amount of discrepancy between declared and
   

fimechanisms for fair allocation problems

verified values that can be attributed to a malevolent behavior  the resulting setting shares
the spirit of the work by feige and tennenholtz         where it is observed that possible
discrepancies between agents declarations and third party verified values are more often
due to different reasons  in particular to the fact that agents  while not being malevolent 
might still be unable to accurately collect and or report information about their valuations 
in more detail  feige and tennenholtz        considered a scheduling problem on a single
machine where each agent reports the length of her his job and the scheduler needs to finish
as many jobs as possible by a given deadline  differently from earlier literature  it is assumed
that agents are uncertain of their own job lengths  for instance  because of their limited
computational resources  moving from the observation that mechanisms with verification
are often designed in way that performs well when agents have accurate information about
their private features  but might perform arbitrarily bad when agents are uncertain of this
information  feige and tennenholtz then proposed the use of the forgiving mechanisms 
where punishments are not used to enforce truthfulness  these mechanisms are applied
over two models of uncertainty  one that is probabilistic in nature  and another  called
qualitative private input  where there is no quantitative model explaining to which extent
the agents can trust their estimate  and the preference of an agent over various lotteries
might be even inconsistent with any probability distribution 
in this paper we follow the work by feige and tennenholtz        and in particular their
qualitative model of uncertainty  moreover  in addition to their subjective perspective of
the problem  where uncertainty is inherent to private inputs  we also take into account the
dual  objective  perspective  where discrepancies between declared and verified values
might due to errors that can occur in the verification process  indeed  verification can
be practically implemented by sensing some parameters that become observable after the
mechanism is performed  and sensing is clearly affected by errors  it is unrealistic to assume
that it can be carried out with arbitrary precision  
in fact  no matter the perspective  objective vs subjective  from which the problem
discussed above is analyzed  an intrinsic limit of mechanisms with verification has clearly
emerged  whenever an agent misreports her his type and this is detected by the verifier 
punishing this agent might be effective in mathematical studies  but very inappropriate
in real life situations in which uncertainty is inherent  accordingly  we will therefore assume
that only a limited use of the verification power given at hand can be made  in particular 
the goal of the paper is to design mechanisms that are not based on punishments  while
nonetheless resulting to be truthful  efficient  and budget balanced  and that are tolerant of
measurement errors and uncertain inputs  in the sense that small errors should determine
small deviations from the outcome we would have obtained with no errors at all 
    mechanisms for fair division with monetary compensation
we consider mechanisms with verification in the context of fair allocation problems  see 
e g   moulin        young        thomson         we assume that we are given a set
of indivisible goods to be allocated to a set of agents  each agent is equipped with a private preference relation  which is encoded as a real valued function  basically  a monetary
valuation  over all possible goodsformal definitions are in section    an agent can have
allocated more then one good  in which case her his evaluation is additive over them  more 

   

figreco   scarcello

over  goods are indivisible  i e   each good can be allocated to one agent at most  however 
monetary transfers are allowed  in terms of both payments charged to agents and monetary
compensations provided to them  the goal is to find an efficient allocation  that is  an allocation maximizing the total value of the allocated goods  by designing rules guaranteeing
that certain desirable properties are achieved  such as truthfulness and individual rationality  i e   no agent is ever worse off than she he would have been without participating in the
mechanism  moreover  we want to obtain outcomes that are politically acceptable  that
is  agents should perceive the designed mechanism as a fair one  see  e g   brandt  conitzer 
  endriss         independently of the rules leading them to be honest  for instance  it
is desirable that no agent envies the allocation of any other agent  or that the selected
outcome is pareto efficient  i e   there must be no different allocation that is preferred by
all agents and strictly preferred by at least one of them 
the model and  in particular  properties of fair allocations with indivisible objects
and monetary transfers have been studied  e g   by svensson         bevia         maskin
        tadenuma and thomson         meertens  potters  and reijnierse         tadenuma and thomson         alkan  demange  and gale         willson         su        
yang         quinzii         and sakai         moreover  procedures to compute fair allocations have been proposed by aragones         klijn         haake  raith  and su        
brams and kilgour         potthoff         and abdulkadiroglu  sonmez  and unver        
none of the approaches listed above  however  can guarantee the elicitation of honest
preferences from the agents  in fact  the question of designing truthful and fair mechanisms
has been recently considered as well  andersson   svensson        andersson        svensson        yengin        ohseto        porter  shoham    tennenholtz        shioura 
sun    yang         in these approaches  while budget limits are sometimes enforced and
mechanisms are defined that cannot run into deficit  budget balance is never guaranteed 
indeed  this comes again with no surprise  given that no truthful mechanism can be simultaneously fair  e g   envy free or pareto efficient  and budget balanced  see  e g   tadenuma
  thomson        alcalde   barbera        andersson  svensson    ehlers        
to circumvent this impossibility  approaches have been studied that focus on weaker
notions of truthfulness  for instance  andersson et al         and pathak        consider
a notion of degree of manipulability which can be used to compare the ease of manipulation in allocation mechanisms  whereas the notion of weak strategy proofness is considered
by lindner         i e   cheating agents are always risking an actual loss  and are never
guaranteed to cheat successfully 
in this paper  we depart from the settings studied in all such earlier approaches  because
we are interested in applications where a form of verification is available to the mechanism
at the time of deciding monetary compensations among agents  in particular  we assume
that valuations as well as allocation scenarios are determined by objective properties of
goods and agents that can be observed and measured by a verifier  after an allocation is
performed and payments are to be computed  note that only information on allocated
goods can be verified and hence used by the mechanism  in this framework  classical
impossibility results no longer hold  indeed  we propose mechanisms for allocation problems
that enjoy a number of highly desirable properties  being in particular truthful  efficient 
budget balanced  individually rational  and fair  even though agents with verified incorrect
declarations are not punished  observe that having this kind of a posteriori knowledge
   

fimechanisms for fair allocation problems

at payment time is quite common to many applications  we also point out that in some
cases a thorough verification could also be performed in advance  in order to get the best
performances independently of agents declarations  however  in practice this is not done
because of either money or time restrictions  so that it is more convenient to allocate goods
on the basis of agents declarations  especially if a mechanism makes them honest enough  
anyway  our results can be used even when the full information is known to the mechanism 
to provide a fair division enjoying a number of desirable properties listed below 
appendix a reports a number of examples of possible applications of the proposed
framework  including the real world case of the italian research assessment program  which
first motivated this work 
for completeness  we leave the section by recalling that our work  as well as the above
mentioned related literature  deals with a setting where monetary transfers are allowed  in
fact  fair division of indivisible goods without money transfers has also attracted attention
in the literature  for instance  this topic has been studied by bouveret and lang       
from the points of view of compact representation  for expressing preference relations 
and computational complexity  of reasoning about efficiency and fairness concepts in the
resulting framework   and by lipton  markakis  mossel  and saberi        from the point of
view of defining approximation schemes for envy freeness  finally  it is relevant to point out
that  in our paper and in the papers discussed above  allocations are assumed to be computed
in a centralized way  however  it might be relevant in some cases to adopt decentralized
approaches  based on successive negotiations of goods  and of money  between groups of
agents  the reader interested in distributed negotiation frameworks is referred to the work
by sandholm         dunne  wooldridge  and laurence         dunne         and endriss 
maudet  sadri  and toni         and to the references therein 
    contributions
in this paper  we study allocation problems in a strategic setting where agents can misreport
their private types  and we study mechanisms with verification from both the algorithmic
and the computational complexity viewpoint 
      algorithmic issues
we show that in the given setting none of the classical impossibility theorems discussed
above holds  in particular  we exhibit a payment rule p that turns any optimal allocation
algorithm  i e   any algorithm computing an optimal allocation given the reported types 
into a mechanism with verification such that 
i the mechanism is truthful  this is shown by pointing out a number of properties of
allocation problems which are of interest on their own 
i the mechanism is efficient  budget balanced  individually rational  envy free  and pareto
efficient 
i the payment rule is indifferent w r t  the values  possibly misreports  declared for goods
that do not occur in the allocation being selected  and hence that are not verified  

   

figreco   scarcello

i for each agent  her his utility  when truthtelling  is the maximum one over all possible
allocations  in particular  the utility is indifferent w r t  the specific choice of allocated
goods in optimal allocations  note that this is a strong fairness property  which immediately entails envy freeness and pareto efficiency 
i verification is not used to force truthfulness by just punishing those agents whose reported values are found different from the verified ones  so that the mechanism is forgiving in the sense recently discussed by feige and tennenholtz         moreover  the
mechanism is shown to be tolerant of discrepancies emerging between declared types and
verified true ones  that is  all its properties hold at the equilibrium where all agents
report their true types  and are also preserved approximatively in case of discrepancies 
with a guarantee that is within a constant factor from the distance between declared
types and verified true ones  note that this is generally not possible in mechanisms
based on punishment approaches where  to enforce truthfulness  the punishment might
be disproportional to the harm done by misreporting  cf  feige   tennenholtz        
i agents utilities are distributed according to the shapley value of two suitably associated
coalitional gamessee  e g    nisan et al          for a comprehensive introduction to
sharing problems and coalitional games  in fact  the shapley value is a prototypical
solution concept for fair division with monetary compensations   and its desirable properties in  games associated with  allocation problems have been extensively studied in
the literature  e g   moulin        maniquet        mishra   rangarajan        
note that the shapely value has been studied in mechanism design contexts too  where
emphasis has been given to the pricing problem for a service provider  moulin   shenker 
      moulin        jain   vazirani         the cost of providing a service is a function
of the sets of customers  and the goal is that of determining which customers  and at
what price  have to receive it  the model gives rise to a cross monotonic cost sharing
game  where shapley value based sharing mechanisms can be defined that are truthful and
budget balanced  and which achieve the lowest worst case loss of efficiency over all utility
profiles  moulin   shenker         with this respect  our pricing rule p can abstractly be
viewed as a witness that  whenever  partial  verification is possible  shapley valued based
mechanisms may also be implemented with no loss of efficiency at all 
      complexity issues
computing an optimal allocation on the basis of the reported types is an easy task  which
can be carried out via adaptations of classical matching algorithms  however  one might
suspect that computing payments is not computationally efficient  as it is based on the
computation of a shapley value  this is indeed a challenging task that involves iterating
over all possible subsets of agents  we analyze these issues  and we provide the following
contributions 
i we show that computing the shapley value for allocation problems is inherently intractable  in fact   p complete  note that  p hardness results for problems involving
   depending on the application  solutions concepts different from the shapley value might be more appropriate  for instance  in bankruptcy problems  the nucleolus is considered as the most appropriate
solution concept for fair distribution  aumann   maschler        

   

fimechanisms for fair allocation problems

shapley value computation have been proven in the literature  for instance  for weighted
voting games  deng   papadimitriou         minimum spanning tree games  nagamochi  zeng  kabutoya    ibaraki         and games associated with normative systems  agotnes  van der hoek  tennenholtz    wooldridge         moreover   phardness results have been established for the banzhaf power index  which is a solution
concept closely related to the shapley value  see  e g   bachrach   rosenschein       
      bachrach  zuckerman  wooldridge    rosenschein        
i therefore  in order to deal also with scenarios involving a large number of agents  two
modified rules  p and p   are presented  which allow us to employ a fully polynomialtime randomized approximation scheme for the shapley value computation  the resulting polynomial time mechanisms retain most of the properties of p   in particular 
the mechanism based on p is universally truthful  efficient  and with high probability
approximately budget balanced  instead  the mechanism based on p is truthful in expectation  but it is always efficient and budget balanced 
      organization
the rest of the paper is organized as follows  section   illustrates the formal framework and
the basic concepts to design mechanisms with verification  whose desirable properties are
illustrated in section    the payment rule p is defined in section    and its connections
with coalitional games are pointed out in section    rules p and p are defined in section   
where computational issues are dealt with  a comparison with related works is reported in
section    and a few concluding remarks are discussed in section    finally  appendix a
illustrates a real world case study and further application examples of the notions presented
in the paper 

   formal framework
in this section  we define a formal framework for studying allocation problems based on
mechanism design tools  in particular  we focus on mechanisms equipped with a verification
ability that meets the no punishment perspective 
    allocation scenarios
we focus on allocation problems where goods from a set g have to be allocated to a set of
agents a            n  in such a way that the overall value of the allocated goods is maximum
over all feasible allocations  that is  the social welfare is maximized  more precisely  an
allocation is a function    a   g mapping each agent i  a into a non empty set of
goods  i   g such that  i    j      for each j    i  moreover  we are given a vector
of upper bound constraints              n   that specifies the maximum number of goods i
that can be assigned to any agent i  a  the tuple s   ha  g  i is called an allocation
scenario  a mapping    a   g is a feasible allocation for the scenario s if it is an
allocation of goods in g to agents in a such that  for each agent i  a    i    i holds 
observe that it is not required that all goods from g are allocated to the agents 
note that in most applications the maximum number of goods i that can be assigned
to agent i represents some ability of i  e g   the maximum number of tasks that she he
   

figreco   scarcello

can execute   hence we next represent it as a function i   fu  i    where i is an objective
property of the agent  e g   her his speed  and fu is a public knowledge computable function 
note that the setting is more general than earlier approaches in the literature for which
upper bounds are fixed and independent of agents features 
moreover  in this paper we assume that the value of each good g for agent i is determined
by some objective property g of the good  as well as by the property i of the agent 
formally  we assume that good valuations are encoded by a valuation vector w    w         wn  
where  for each i  a  is valuation function assigns to any good g  g a real value
wi  g    fv  g   i    for some public knowledge computable function fv   
the idea is that a verifier  best described in the next section  should be able to measure 
after an allocation  of goods to agents has been performed  the objective property g
of every allocated good g and the objective property i of every agent  therefore  by
using the  public  function fv   it is then possible to compute the values of all those goods
that have been assigned to some agent  we believe that this assumption about valuations
as functions of objective properties of goods and agents holds for many applications of
allocation problems  in particular for those where the social welfare is to be maximized
 since this is typically a measurable value   we provide some examples in appendix a 
including the real world application about the evaluation of the research activities in italy 
which originally motivated the present work 
let us fix an allocation scenario s   ha 
pg  i and a valuation vector w    w         wn   
let  be an allocation  define
wi     
g i  wi  g   for each i  a  and denote by
p
val   w  the overall value ia wi     we say that  is optimal  for s  w r t  w if it is a
feasible allocation for s and there is no feasible allocation    for s such that val      w   
val   w   the value of an optimal allocation for s w r t  w is denoted by opt s  w  
an allocation algorithm is a function a mapping each allocation scenario s and each
vector w to a feasible allocation a s  w  for s  the algorithm is optimal if a s  w  is an
optimal allocation w r t  w  for any given pair  s  w  
    strategic issues and verification
we consider a classical setting for mechanism design where optimal allocations have to be
computed in a context where neither the agent depending upper bounds  nor the valuation
vector w is known to the allocation algorithm  therefore  even having an optimal algorithm
a at hand  we do not have enough information to find an optimal allocation  in general 
in fact  we assume as usual that each agent i  a privately knows certain features 
called is type  determining both the maximum number of goods i that can be allocated to
her him  as well as the function wi encoding her his preferences over the allocations  note
that  in our setting  the type of agent i naturally consists of her his characterizing property
i plus the property g   for any good g  s he is interested in  in section      we also consider
what happens when agent i may have a subjective  possibly incorrect  perception of such
properties  including her his characterizing property i   
   note that  for the sake of simplicity  we use two functions fu and fv for all agents  however  nothing
changes in the paper if we consider a slightly more general version where different agents may have
different public functions 

   

fimechanisms for fair allocation problems

figure    running example in section   
we assume that the type of agent i is taken from a set i of available types  and we
denote by  the cartesian product        n of all possible agents types  then  we
consider direct revelation mechanisms where agents are asked to report such types to let the
mechanism compute an allocation  while doing so  agents are self interested  and strategic
issues come into play 
for each agent i  a  we hereinafter assume that ti  i always denotes the true type
of agent i  i e   the type owned as private knowledge  and that di  i is her his declared
type  then  t    t         tn   and d    d         dn   are the vectors of true and declared types 
respectively  in general  it can happen that d does not coincide with t  if agents find
convenient to misreport their types 
for any  true or declared  type vector              n      we denote hereinafter
by s   ha  g    i the allocation scenario for   that is  the scenario where the vector
              n   is such that  for each i  a  i is the upper bound determined by is
type i   similarly  we denote by w    w         wn   the valuation vector such that wi is the
valuation function determined by is type i   for each i  a 
example      let us consider two agents  a  and a    the type vector t    t    t     and
the allocation scenario st   ha  g   t i illustrated in figure   i  by means of an intuitive
graphical notation  with a    a    a     g    g         g     and  t           moreover  consider
the valuation vector w with wt    wa    wa    such that  if there is an edge connecting
a   resp   a    with gj in figure   i   then wa   gj    resp   wa   gj    is the value associated
with it  otherwise  i e   if there is no edge connecting a   resp   a    with gj   then wa   gj  
 resp   wa   gj    is some negative number  say    given this setting  it is easily seen that
an optimal allocation for st w r t  wt is the allocation   where    a       g    g    g    and
   a       g    g    g   see figure   ii   note that wa            and wa            
consider now the allocation   of figure   iii   note that   is another optimal allocation  however  we have wa              wa       and wa              wa       


   

figreco   scarcello

figure    strategic manipulation 
example      consider again the setting of example      where the type vector t is private
knowledge of the agents  moreover  assume that the vector d of declared types is such that
sd   st  the allocation scenario is the correct one  and that the vector wd is the one
illustrated in figure   i   where negative edges are omitted  basically  agent a  truthfully
reports her his type  while agent a  reports a type for which the values of the goods g 
and g  are underestimated  therefore  wd    wt holds  the only optimal allocation   for
sd w r t  wd is shown in figure   ii   it emerges that  because of the declarations of agent
a    it is not convenient to include g  and g  in     in fact    coincides with the optimal
allocation   depicted in figure   iii   hence  by misreporting the type  agent a  has now
the guarantee that the overall value of the goods assigned to her him is     instead  by
truthfully reporting the type  a  might risk that the allocation   is selected  where the
overall value of the goods assigned to her him is only    
finally  consider a slight variant of the problem instance where the actual value of good
g  is    instead of    for a    then  the above egoistic behavior of agent a  also leads to an
allocation that is no longer optimal  indeed  due to the low declared values for g  and g   
the good g  is selected and allocated to a  in the unique  wrong  optimal allocation  whose
total value is now     instead of     

in this paper  we focus on allocation problems where some kind of verification on reported types is possible  because objective properties of agents and goods can be observed
and measured  we say verified  hereinafter  by a third party verifier after an allocation  is
performed  recall that
sin general only a subset of goods is actually assigned to some agent
by   denote the set ia  i   g of allocated goods by img    thus  in our model  for
each good g  img    its objective property g can be verified  while nothing can be said
for non allocated and hence non observed goods  moreover  for each agent i  a participating in the mechanism  is property i that determines the upper bound constraint and
is preferences over good allocations is verifiable  too  thus  by using such a verifier  the
correct allocation scenario and a restriction over img   of the valuation functions can be
determined  as formalized next 
definition      let t be the vector of true types  then  the verifier v  for t  is the function
mapping any allocation  to the pair sv     wv   such that 
    sv   is the actual allocation scenario st  in particular  the true upper bound fu  i  
is computed by the verifier for each agent i   and
    wv      wv         wvn   is the vector such that  for each agent i  a  wvi   img    r
is the function assigning to each good g  img   its actual value fv  g   i   for agent
   

fimechanisms for fair allocation problems

i  observe that  by definition of the framework  wvi coincides with the restriction over
img   of the valuation function wti   g  r determined by is  true  type ti  
 
it is worthwhile noting that the verifier is in general unable to discover whether some
agent misreported her his type  because goods that are not allocated do not undergo any
measurement process  we pinpoint that this is actually the case in practical applications 
where measurements over non allocated goods may be technically unfeasible or simply too
expensive  in money or time   we refer the reader to appendix a    in particular  subsections a    a      for an exemplification of these notions in the real world case study of the
italian research evaluation  vqr  
example      consider again the setting of example      and recall that agent a  finds it
convenient to underestimate the true values of g  and g    however  since g  and g  are not
selected in     as we can see in figure   ii   then there is no way to discover that a  has
actually misreported her his type 

in some cases  the constraints in the allocation scenario depend only on the specific
application and not on agents types  so that item     above is immaterial  more generally 
however  the proposed setting allows us to model classes of problems where types play a
role even in the definitions of upper bound constraints 
for completeness  we remark that all results in the paper can easily be shown to hold
even for allocation problems where every agent must get a minimum number of goods
greater than one  defined by the specific application   however  for the sake of presentation
we prefer to keep the standard setting where any non empty set of goods can be assigned
to each agent  as long as her his upper bound constraint is met 
    payment rules and mechanisms with verification
in order to encourage agents to truthfully report their private types  we design mechanisms
where monetary transfers can be performed  after the verification process 
for the sake of presentation  let us assume that st   ha  g   t i is an allocation scenario
 recall that t denotes the vector of true types   that d is a vector of declared types with an
associated allocation scenario sd   ha  g   d i  and that v is the verifier  for t  
a payment rule p is defined as a vector of functions  p         pn    with pi    wd   v  being
some amount of money that is given to agent i  on the basis of a given allocation   the
vector of declared valuations wd   and the verifier v  observe that  with this notation  any
negative value pi    wd   v  means that some amount of money is charged to i  let wt be
the vector  w         wn    then  is  quasi linear  utility under p  sometimes called individual
welfare  is defined as the value ui p    wd   v    wi      pi    wd   v   as the verifier v for t
is always understood  ui p    wd   v  and pi    wd   v  are simply denoted by ui p    wd   and
pi    wd    respectively  moreover  whenever the payment rule is also understood from the
context  is utility is simply denoted as ui    wd   
as payments can be computed after the verification process  to define the amount of
money pi    wd   to be paid to agent i  we exploit the verifier v  accordingly  it is desirable
that goods that are not allocated  and hence not verified  play no role in the definition of
the payments  this latter property is formalized below 

   

figreco   scarcello

 verifiability  let d  and d   be two type vectors  and let wd     w          wn    and wd    
 w           wn     be their associated valuations  moreover  let  be any mapping that is a
feasible allocation for both scenarios sd  and sd     then  for each i  a  pi    wd     
pi    wd     whenever wi   g    wi    g  holds for every allocated good g  img    therefore 
d  and d   are undistinguishable as far as the computation of the payments is concerned 
even if they differ on some unallocated goods  that is  the payment rule depends only
on goods subject to the verifier evaluation 
a mechanism with verification is a pair  a  p   where a is an allocation algorithm and
p is a payment rule that can exploit the verifier v  the mechanism  a  p  can be viewed
as consisting of the following two phases  first  agents report a declaration vector d  and
a feasible allocation    a wd   for sd is computed  second  v   is made available  and
payments under a given rule p are calculated with respect to the allocation  and the
valuations wd   by exploiting the knowledge of v    our goal is to design a payment rule p
guaranteeing that declared types in d lead to an allocation  maximizing the social welfare 
i e   such that  is an optimal allocation for st w r t  wt   this might be problematic as  in
our setting  even the fact that  is a feasible allocation for st is not guaranteed  because
the allocation scenario depends on the types of the agents and we might have st    sd  
in order to accomplish the above goal  we use an optimal allocation algorithm a  and
we need that p encourages agents to truthfully report their private types  formally  for any
type vector              n     and for any type i  i   with i  a  let  i   i   be the
type vector           i    i   i          n      then  we shall consider the following concept
of truthful mechanism 
definition      let  a  p  be a mechanism with verification  and let i be any agent in a 
we say that i is a dominant strategy of agent i w r t   a  p  if  for each type vector    
ui  a w i  i      w i  i      ui  a w    w   holds  the mechanism  a  p  is truthful if  for
each i  a  ti is a dominant strategy 
 
example      consider again the setting discussed in example      and the trivial payment
rule p where no payment is actually performed  consider again the optimal allocation  
 for st w r t  wt   depicted in figure   ii   and note that ua       wt         instead  for the
allocation   depicted in figure   ii   we have ua       wt         with   being the unique
optimal allocation for sd   st w r t  wd   where d    da    ta    
therefore  any mechanism  a  p    with a being an optimal allocation algorithm such
that a wt         is not truthful  more generally  for each optimal allocation algorithm a 
an example witnessing that  a  p   is not truthful can be easily defined by suitably adapting
the above  hence  non trivial payment rules are necessary to encourage agents to truthfully
report their types 

a comparison of our approach to verification with existing ones is reported in section   

   properties of  truthful  mechanisms
in this section  we discuss desiderata for mechanisms that lead to fair allocations and that
are tolerant of uncertain inputs  note that the design of mechanisms that are able to
deal with these two issues is of interest even in settings that are not strategic  i e   even
   

fimechanisms for fair allocation problems

when we are granted that all agents truthfully report their types  exemplifications of the
proposed notions are reported appendix a      which completes the description of the case
study regarding the italian research evaluation  vqr   further examples are described in
appendix a   and appendix a   
    fairness issues and further desirable properties
let  a  p  be any truthful mechanism with verification  in the paper  we focus on a number
of  ex post  properties of such a mechanism  to be checked at the equilibrium t where agents
truthfully report their private types 
  allocative  efficiency  a wt   is an optimal allocation for st w r t  wt   that is  the social
welfare is maximized 
 individual rationality  ui  a w ti  i      w ti  i         for each agent i  a and for each
type vector i for the agents in a    i   hence  voluntary participation of each agent to
take part in the allocation problem is encouraged  independently of whether the other
agents actually report their true types or not  
p
  strong  budget balance  ia pi  a wt    wt        in other words  there is no transfer of
money out or into the scenario 
 envy freeness  for each pair of agents i  j  a  and for each feasible allocation  for st
such that  i   a wt   j       ui  a wt    wt    ui    wt   
 pareto efficiency  there is no feasible allocation  for st such that      ui    wt   
ui  a wt    wt    for each agent i  a  and     there is an agent j  a with uj    wt    
uj  a wt    wt    that is  a wt   is not pareto dominated by any other allocation 
 equal treatment of equals  for each pair of agents i  j  a such that i   j and wi   wj  
with wt    w         wn    it must be the case that ui  a wt    wt     uj  a wt    wt   
 individual optimality  ui  a wt    wt    ui    wt    for each i  a and each feasible allocation  for st  
note that all the above properties make sense even in settings that are not strategic 
but where the goal is to compute a fair allocation  indeed  in a setting that is not strategic 
agents report their true types  even without any monetary incentive  however  without such
payments  fairness cannot be achieved in general  just think  for instance  about a scenario
with two agents  a  and a    and one good g having the same value for both agents  in this
case  no matter which optimal allocation is considered  where g is assigned to either a  or
a     one of the two agents would envy the other  this makes it clear that payment rules
play not only the role to encourage agents to reports their true types  but they are also
crucial to induce agents to perceive a given allocation as a fair one  in fact  all the above
properties  but the last  have been classically considered in the context of fair allocation
problems  also in absence of strategic issues 
here  we have additionally considered individual optimality  which is readily seen to
imply both envy freeness and pareto efficiency  it also entails that there is a unique possible
   

figreco   scarcello

vector of utilities for agents  in particular  this means that agents utilities are not sensible
to possible alternative allocations  and hence are independent of the specific set of allocated
goods selected by the optimal algorithm a 
example      consider the trivial payment rule p discussed in example      consider
the optimal allocation   depicted in figure   ii   and compare it with the allocation  
of figure   iii   recall that   is another optimal allocation  for st w r t  wt    moreover 
under p   ua       wt        and ua       wt        hold  therefore  while from the optimization perspective the choice between   and   is immaterial  a  might have good arguments
to complain if   is selected in place of     in fact  p is not individually optimal 

individual optimality is definitely a very desirable requirement  but we still miss something  indeed  notice that this property is trivially satisfied by the fully uniform payment
rule  which guarantees that each agent gets the same utility  no matter of her his valuation
of goods  of course  this is not desirable in general  rather  meritocracy should be somehow
addressed  so that a true fair rule should reflect the actual contribution of each agent to
the overall value of the allocation 
let  be an allocation for st   not necessarily an optimal one w r t  wt   and define the
marginal contribution of a non empty set c  a of agents to  w r t  wt as the value 
marg wt  c    opt ha  img     t i  wt    opt ha   c  img     t i  wt   

   

in words  the marginal contribution marg wt  c  of the agents in c assesses the loss of
the overall value of  we would register if the agents in c were not part of the problem 
example      consider the setting of example     and the optimal allocation   of figure   ii   note that marg  wt   a       marg  wt   a                    therefore  the two
agents  viewed as singletons  have the same marginal contribution  and defining a payment
rule that leads to utilities equally sharing the overall value of    is a natural option 
consider now a different setting  where true types induce the same allocation scenario
st and the same vector wt   but for the valuation of good g  for agent a    which is now
    instead of     in this case    would still remain an optimal allocation  with overall
value      moreover  the marginal contribution of a  is not affected by the modification 
while the marginal contribution of a  would become                this witnesses that a 
contributes more than a    and a payment rule leading to equally sharing the overall value
can be no longer perceived as a fair one 

the intuition conveyed by the above example can be then formalized via the following
requirement 
p
 marginality  for each non empty set c  a of agents 
ic ui  a wt    wt   
marga wt   wt  c   hence  each group of agents gets at least its own marginal contribution
to the given allocation 
    sensing and errors
we conclude the presentation of our  strategic  setting for fair allocation problems by illustrating some subtle issues arising with the process of verification  the starting point of our
   

fimechanisms for fair allocation problems

discussion is the observation that verifiers can be practically implemented by sensing some
parameters  in our setting the parameters i   for each agent i  and g   for each allocated
good g  that become observable after the allocation is performed and that  in real world
applications  sensing is subject to errors  for instance  because of the limited precision of
the measurement instruments  therefore  it is unrealistic to assume that the verifier is
always able to exactly discover  i e   with arbitrary precision  the actual upper bounds in
the scenario st and the valuation vector wt   and it might be problematic to decide whether
an observed discrepancy between verified values and declared ones is due to a strategic
behavior or to such sensing errors  in fact  sensing troubles arise even in settings where all
relevant information is available as public knowledge that can be acquired via sensing the
environment  i e   even by getting rid of any strategic consideration 
as discussed in the introduction  this issue has been pointed out in the recent work by
feige and tennenholtz         though from a slightly different perspective  there  it is observed that mechanisms with verification are often designed in way that performs well when
agents have accurate information about their private inputs  but might perform arbitrarily
bad when agents are uncertain of their private features  uncertainty might be again the
result of hardware measurement errors  or due to the limited computational resources
employed by agents for identifying the declared valuations  for instance  in our setting  the
type of an agent i consists of her his characterizing property i plus the property g   for
each good g  s he is interested in  according to the perspective of feige and tennenholtz
        agent i might only have an estimate of this type  for instance  the agent might
not have enough computational resources to precisely determine such properties g for all
goods g  so that is type actually represent just a subjective perception of them 
in the light of the above observations  it clearly emerges that punishing agents might
be effective in mathematical studies  but very inappropriate in real life situations in which
uncertainty is inherent due to measurements errors or uncertain inputs  therefore  in addition to the requirements discussed so far  another desirable property is for the mechanism
to use no punishment  or to be forgiving  in the sense of feige   tennenholtz        
 no punishment  for each type vector     for each feasible allocation  for s   and for
each agent i  a  it is the case that pi    w     pi    w ti  i      that is  discrepancies
between the given type  possibly declared  and the true verified one do not have any
impact on the payment to agent i  in other words  we may think of payments being
always computed under the presumption of innocence  where incorrect declared values
do not mean manipulation attempts by the agents 
moreover  if we admit that sensing errors  or uncertain inputs  might occur  then it
is relevant to quantitatively assess their impact  too  ideally  we would like to deal with
mechanisms that can tolerate such errors  in the sense that small errors should determine
small deviations from the outcome we would have obtained with no errors at all  note
that this is generally not possible in mechanisms based on punishment approaches where 
to enforce truthfulness  the punishment might be disproportional to the harm done by
misreporting  cf  feige   tennenholtz         we next formalize our final desideratum 
for any type vector   for any set c  a of agents  and for any set g   g of goods 
let us define hc  g      i as the restriction of the scenario ha  g    i where only agents in c
   

figreco   scarcello

and goods in g  are considered   moreover  given two type vectors  and   we denote by
     the set of all type vectors of the form  x         xn    where xi   i   i    for each
i  a  then  the distance dist w      between  and  under the valuation vector w
 or just dist      if w is understood from the context  is defined by looking at the worst
possible impact that type vectors in      may have on the optimal solutions computed
over all possible restrictions of the given setting 
dist w       

max

ca  g  g             

 opt hc  g       i  w     opt hc  g        i  w      

now  recall that in a truthful mechanism it is always convenient for the agents to report
the true types  assume however that agents declare a type vector t different from their
true type vector t   as a consequence  we get a revealed setting st and a valuation vector
wt    w         wn    while the available verifier v discloses information about the scenario st
and the vector wt    w         wn    restricted to allocated goods   in standard mechanisms
design settings  and in particular under punishment approaches   no guarantee on any
property could be given in this case  as mechanisms are designed to be analyzed when
reports are truthful  instead  we would like here that mechanisms are tolerant of sensing
errors  as formalized below 
 error tolerance  there is a constant c    such that  for each type vector t and for each
agent i  a   ui  a wt    wt    ui  a wt    wt     c  dist t  t  
intuitively  under an error tolerant mechanism  the consequences of errors over good
allocation outcomes produce a linear distorting effect over agents utilities  and  in turn
on the various properties of the mechanism   in particular  the above property is stated
without any assumption about how sensing errors come into play  indeed  the notion of
dist t  t  formalizes these errors from a global perspective  for instance  we do not require
that errors affect uniformly the valuations of agents  and it might be well the case that
errors are biased towards some specific agent 

   mechanisms with verification for allocation problems
in this section  we introduce a mechanism with verification for allocation problems and start
its analysis  by preliminary proving some properties that hold over optimal allocations 
    general properties of allocation problems
let    be any given type vector  and consider the allocation scenario s   ha  g    i 
where               n    together with the valuations given by w    w         wn    we start
   note the little abuse of notation  the vector  in hc  g    i should be in fact its restriction over c  however 
to keep the notation simple  we just write   as no confusion may arise  similarly  any valuation vector
w for a will be transparently considered as a valuation vector for any subset of agents c  awe just
get rid of the unused components associated with agents in a   c 
   the property is discussed from the perspective of uncertain inputs  the adaptation to the case of
verification errors  or to the case when both types of errors occur  is an easy task  as it is mainly a
matter of different interpretation of concepts 

   

fimechanisms for fair allocation problems

figure    one good version of the allocation problem in example      with two allocations
and their associated update graph  as defined in the proof of theorem      in the
graphical representation  crossing lines represent the edges of the bipartite cliques
connecting the two groups of virtual agents with the goods they are interested in 

by observing that the optimization problem used to allocate goods to agents can be equivalently reformulated in such a way that precisely one good can be allocated to each agent 
intuitively  we may replace each agent i by i fresh agents with the same valuations as i 
we remark that such an equivalence is just used for combinatorial optimization purposes 
i e   without affecting any game theoretic issue 
let us now formalize the above intuition  first  we denote by s  the one good version
ha    g   i of the scenario s   where 
s
 a  is the set of agents ia clones i  such that for each agent i  a  clones i  is a
set of i fresh agents 
   is the vector where all components are   
moreover  we denote by w  the vector for agents in a  where  for each agent c  a   
the component wc  associated with c is such that wc    wi   with i being the agent in a
for which c  clones i  holds  thus  in the allocation problem s  and by considering the
vector w    each clone c  clones i  gets exactly one good  and has the same valuations
as agent i in w  
example      consider the scenario st   ha   g         g      t i  with a    a    a     and the
vector wt    wa    wa    discussed in example      the one good version is the scenario
st    ha     g         g      i shown figure   i   note that the set of agents in this scenario
is a      a        a        a        a        a        a        where clones ai       ai       ai       ai       for
 
each i          indeed  recall that  t           finally  the vector wt  is such that w a
 
   h
 

wa   resp   w a   h   wa     for each h            
   

figreco   scarcello

now  consider the scenario hc  g      i  i e   the restriction of ha  g    i where only agents
in c and goods in g  are considered  and let c  be an allocation for s
its one good version
 
 
 
g
hc  g     i   consider the function c   c    such that c  i    cclones i  c   c   for
each i  a  note that  c  i    i   for each i  a  therefore  c is a feasible allocation for
hc  g      i  denoted by  good c     moreover  by construction  val c   w     val c    w    
conversely  any feasible allocation c for hc  g      i is associated with the non empty set
one good c   of all those allocations c  for hc  g      i  such that c    good c     also
called the one good forms of c   the following is immediate by definition of one good
version and forms 
fact      let    be any given type vector  let s  be the one good version of s   and let
c  be an allocation for s    then  c  is an optimal allocation for s  w r t  w  if  and only
if   good c    is an optimal allocation for s w r t  w  
example      consider again the setting of example      and the allocation  such that
 a       g    g    g    and  a       g    g    g     note that  is not an optimal allocation
w r t  the valuation vector wt  reported in figure   i    because val   wt        while
opt st   wt         see  e g   the optimal allocation   in figure   ii    now  notice that the
allocation depicted in figure   ii  is indeed an associated one good form allocation  which
is actually not an optimal allocation for st  w r t  wt    by fact     

we are now in the position of stating a property that holds on any optimal allocation  
the property is in fact of interest of its own  i e   independently of its application to the
study of fair allocation problems  in words  it tells us that  whenever we are interested
in allocating goods to any subset of agents  we may safely consider only goods in img   
rather than the whole set g  in our case  it is a basic technical ingredient for showing a
number of key properties because  intuitively  it allows us to get rid of alternative  optimal 
allocations  possibly based on non allocated goods in g   img   
theorem      let    be any given type vector  let  be an optimal allocation for
ha  g    i w r t  w   and let c  a be a set of agents  then  every optimal allocation for
hc  img      i w r t  w is an optimal allocation for hc  g    i w r t  w  
proof  let c  a be any set of agents  and assume that c is an optimal allocation for
hc  img      i w r t  w   we shall show that c is an optimal allocation for the unrestricted
problem hc  g    i w r t  w   too 
to this end  consider any optimal allocation c for the problem hc  g    i where all
goods in g are available to the agents in c  we next prove that val c   w     val c   w   
this clearly follows from the optimality of c if img c    img   holds  therefore  to
be strictly better than c   c must allocate some good in g   img    assume thus by
contradiction that val c   w     val c   w    and hence img c     img    which entails
that img    g  consider two allocations c   one good c   and  c  one good c    and
observe first that  val c    w      val c   w     val c   w     val  c   w    
let l be the set of agents whose good assignment are the same according to these
allocations  i e   l    c  c      c  c    c   c    then  define  c     c      c     l   s  t   e 
to be the directed graph  called update graph for c  w r t   c   whose nodes are the agents
in c   that change their goods in the two allocations plus two distinguished nodes s and t 
and whose edges in e are defined as follows 
   

fimechanisms for fair allocation problems

 there is an edge from agent c to agent c  if  c  c      c   c      
 there is an edge from s to agent c  if there is no agent c such that  c  c      c   c      
 there is an edge from agent c to t if there is no agent c  such that  c  c      c   c      
 no further edges are in e 
for an example construction  consider figure   iv  showing the update graph for the allocation shown in figure   ii  w r t  the allocation shown in figure   iii  
as each agent gets one good in c  and  c   each node in  c     c   but s and t has exactly
one incoming edge and one outgoing edge  moreover  by construction  s has no incoming
edge  and t has no outgoing edge  thus  the update graph consists of a number of paths
from s to t and a number of cycles  all of them being disjoint from each other 
let           h   be the set of all possible paths from s to t or cycles in  c     c    and
for a path or a cycle i            m   let agents i   be the set           m      s  t   in
addition  let us fix the following notation  for any function    x   g over some given
domain x  let  x     denote the restriction of  over the  sub  domain x    x  moreover 
  x    g  over the two domains x  and x   
given two functions     x    g  and   u
respectively 
    let       x   x    g  g  be the function such
u such that x   x  u
that        x        and        x         
by the construction of the update graph  note that  c can be expressed in terms of the
disjoint paths cycles          h by the following expression 
c   c    

h
 

agents i   

h
 

 c  agents i    

i  

i  

observe now that  because val c    w      val  c   w     there must exists a set of agents
agents k    associated with some disjoint path cycle k   with    k  h  such that the value
of the goods allocated to these agents according to  c is greater than the corresponding
value for theusame agents obtained with c    then  consider the function k   c   c    
agents k     c  agents k     and note first that k is an allocation for hc  g    i    in
particular  note that  for each agent c  c      k  c       holds  because this
u constraint
actually holds on c  and  c   and because of the definition of the operator    moreover 
by the choice of k   we also have val k   w      val c    w    
note that if k were either a cycle or a path of the form s              m    t such that
 c       img    then img k    img   would hold  indeed  by definition of the edges
of the update graph  only the first node of a path  that is    in case k is a path  may
be such that  c        img        however  as observed above  this is impossible because
val k   w      val c    w    would contradict the optimality of c    and hence the optimality
of c   by fact      therefore  we can conclude that k is a path of the form s              m    t
with k         c         g      g   img    that is  the allocation k  over the agents
in c     is such that img k      g      img c      c   m     in particular  observe that
c   m     img     img k   holds  by definition of the edges of the update graph and
since there is an edge from m  to t 
let us now come back to the optimal allocation  for ha  g    i w r t  w   and let   
be an  optimal  allocation in one good    let a  c   be a set of agents with    a
   

figreco   scarcello

input 
assumption 
notation 
  
  
  
  
  
  
  
  

a type vector     and a feasible allocation  for s  
the verifier v  for t  is available  with v      v         vn   
s   ha  g    i  w    w         wn    wv      wv         wvn   

let c denote the set of all possible subsets of a 
for each i  a and c  c 
b compute an optimal allocation c i for hc  img      vi  i   i w r t  w vi  i    
for each agent i  a 
  for each set c  c such that i  p
c 
 
  val c i   w vi  i      
    let c i         wvi  c i     jc  i  wj  c i   
p
  val c  i  i   w vi  i      
  b let  c i         jc  i  wj  c  i  i   
p
  c i        c i       
  let i    w      cc   a  c     c    
 a  

   b

define pi    w      i    w    wvi    

figure    payment rule p  
s
such
of goods ca     c  allocated to these agents according to    is equal to
s that the set
 
  
  
  
ca k  c   g  g   where g  img   img k   and  g       note that a set a having
this property in fact exists  just start with      and then add agents from agents k   until
some c is found with     c   img  
u     img k   
consider then    k  a    a   a  and note that  is well defined  because the
construction of the set a guarantees that no good allocated according to k  a  can be
allocated by    to agents in a    a  and vice versa  moreover   is a feasible allocation for
ha  g    i    indeed  for each agent c  a      c       holds  because this constraint actually
holds on k and      eventually  since    is an optimal allocation for ha  g    i  w r t  w   
val      w     val   w    holds  thus  by construction of   we get val     a   w    
val  a   w      val k  a   w     u
finally  let c    k  c     a      a  and note that c  is a feasible allocation for
hc  g    i    because of the arguments used above to show that  is a feasible allocation 
moreover  observe that val c    w     val k   w      val c    w    and img c     img   
for this latter  just recall that    a is the only agent in c   such that k      img       
again  this entails that c  is not optimal w r t  w  and hence  by fact      c is also not
optimal for hc  img      i w r t  w   contradiction 
the result immediately entails the following two corollaries 
corollary      for each optimal allocation  for ha  g    i w r t  w and for each set
c  a of agents  opt hc  img      i  w     opt hc  g    i  w   
corollary      let  be an optimal allocation for ha  g    i w r t  w   and let    be any
feasible allocation for ha  g    i  hence with val   w    val      w    then  for each set
c  a of agents  opt hc  img      i  w    opt hc  img         i  w   

   

fimechanisms for fair allocation problems

    the design of a truthful mechanism
consider the payment rule p defined in figure    we are given a type vector    
and a feasible allocation  for s that selects some goods img    g for the agents in
a  moreover  we use the verifier v  for the vector of true types t  that  given   is able
to compute the actual scenario sv   and the valuation vector wv      wv         wvn   over
the allocated goods in img    note that  for the sake of presentation  in this section it is
convenient to look at the output of the verifier as a list of equivalent types v      v         vn  
where vi   for each agent i  is such that is upper bound constraint and is goods valuation
over img   are those computed by the verifier v  then  as usual   vi   i   denotes the
type vector obtained from  by replacing is type i with the verified type vi   in particular 
w vi  i   denotes the valuation vector  defined over img    where the function wvi is used
in place of the valuation function declared in i  
in the first three steps  the payment rule associates an optimal allocation c i for
hc  img      vi  i   i w r t  w vi  i   with each set c  c of agents and each agent i  a 
where c is the powerset of a  i e   the set of all possible subsets of agents  then  for each
agent i  a  the rule computes the value i    w   in step    by means of a formula that
depends on the valuations associated with the allocations c i and c  i  i   for each c  c 
in particular  it defines two terms   c i      and  c i        which evaluate the allocations
c i and c  i  i   respectively  w r t  the valuation vector w vi  i     actually  for the term
 c i       is valuation is immaterial as c  i  i is an allocation over c    i   finally  the
payment pi    w  is defined in step   as the difference between i    w   and wvi    
note that the payment rule depends only on the values of the goods in img    so that
it is verifiable  according to the definition provided in section      moreover note that  as
far as paying agent i is concerned  the rule depends only on the values given by wvi over
allocated goods  i e   by those values returned by the verifier  rather than by wi   thus  is
declaration is immaterial as far as the computation of the payment is concerned  and the
next fact easily follows 
fact      no punishment   for each type vector     for each feasible allocation  for
s   and for each agent i  a  it is the case that pi    w     pi    w ti  i     
moreover  note that the idea underlying the definition of p is that  after verification
is performed  the utility function will precisely coincide with the bonus i    w    hence
sharing the spirit  of the approach by nisan and ronen        
lemma      for each type vector    and for each feasible allocation  for s   it is the
case that ui    w     i    w   
by exploiting this characterization  we can now show the first crucial result on the payment rule p   i e   that the mechanism  a  p   is truthful  provided that a is any arbitrary
optimal allocation algorithm 
to get a high level intuition of the proof below observe that i    w   depends on two
groups of terms  with  c i      being basically independent on the given agent i  thus 
   we say the spirit  because the peculiar form of i    w   does not formally fit the framework considered
by nisan and ronen        

   

figreco   scarcello

the goal of agent i is to maximize the terms of the form  c i      defined in step   as
the valuations of optimal allocations computed  in step    by considering is verified type 
by focusing on goods in img    so that verified values coincide with true ones   and by
considering subsets of the whole set a of agents  the salient machinery is then provided
by corollary      according to which it will be always convenient for agent i to report its
true type  indeed  if  is an optimal allocation computed via a based on the true type
of agent i  then corollary     guarantees that  c i      will get the maximum possible
value over all possible allocations for scenarios obtained by considering subsets of agents 
i e   independently on the allocation  being actually selected  this can be done without
strategically interacting with the other agents  therefore  by designing the payment rule in
a way that depends only on the values returned by the verifier  not only we end up with a
verifiable rule using no punishment  but we also obtain a truthful mechanism based on it 
theorem      truthfulness   let a be any optimal allocation algorithm  then  the mechanism with verification  a  p   is truthful 
proof  we have to show that  for each agent i  a and each reported type vector d  the
following holds  ui  a w ti  di      w ti  di      ui  a wd    wd    hence  by lemma      that
i  a w ti  di      w ti  di      i  a wd    wd   
consider the construction reported in figure   for the two cases of    d and   
 ti   di    and let    a wd   and      a w ti  di     be the corresponding optimal allocations
 for the scenarios sd and s ti  di     respectively  received as input by the payment rule in
    be
figure    for any set c  c of agents  and for any agent i  a  let c i  resp   c i
the allocation computed at step    note that this step is well defined  because such an
optimal allocation always exists  indeed  just note that there exist feasible allocations for
any scenario s   e g   any allocation    c   img   such that  j     g  for some good
g   j   that is  any allocation that trivially satisfies every upper bound constraint  since
it assigns one good to each agent 
we now show that the following two properties hold  for each c  c and i  a 
 a   c i        ti   di      c i    d   and
 b   c i        ti   di       c i    d  
in order to prove  a   observe that by step     c i        ti   di      val c i   w vi  di      
 
val c i   w ti  di      where the last equality holds because c i
 img       so that the true
 
is an optimal allocation for
valuation is disclosed by the verifier  then  observe that c i
 
 
hc  img       vi  di   i   hc  img       ti  di   i w r t  w vi  di   and  hence  w r t  w ti  di     and
     a w ti  di     is an optimal allocation for s ti  di     ha  g    ti  di   i w r t  w ti  di    
thus  by corollary      we get the following expression 
 
 c i        ti   di      val c i
  w ti  di       opt hc  g    ti  di   i  w ti  di     

   

similarly   c i    d    val c i   w vi  di       val c i   w ti  di     holds  thus  we
can use equation    in order to get  c i        ti   di      opt hc  g    ti  di   i  w ti  di     
val c i   w ti  di      this shows that  a  holds 

   

fimechanisms for fair allocation problems

 
let us now focus on  b   by step    we have  c i        ti   di      val c  i  i
  w vi  di    
 
 
whereas c i    d    val c  i  i   w vi  di      recall that c  i  i  resp   c  i  i   is an optimal allocation for hc   i   img      vi  di   i  resp   hc   i   img         vi  di   i  w r t  w vi  di    
then  because of the fact that is evaluation is immaterial here  we have that c  i  i  resp  
 
c  i  i
  is an optimal allocation for hc    i   img     d i  resp   hc    i   img         ti  di   i 
w r t  wd  resp   w ti  di      then  we recall that   resp        is an optimal allocation for
sd  resp   s ti  di     w r t  wd  resp   w ti  di      thus  by corollary       c i        ti   di     
opt hc    i   g    ti  di   i  w ti  di      moreover  we get 

 c i    d    opt hc    i   g   d i  wd   

   

eventually   c i        ti   di      opt hc    i   g    ti  di   i  w ti  di       opt hc  
 i   g   d i  wd   holds  as is valuation is immaterial  and we get  b  by equation   
    further properties of truthful strategies
let us now analyze some relevant properties that hold whenever agents choose the dominant strategy of truthfully reporting their private types  the first property is a useful
characterization of agents utilities 
theorem       for each optimal allocation  for st   ha  g   t i w r t  wt   and for each
agent i  a  it holds that 
ui    wt    


x   a    c     c       
opt hc  g   t i  wt    opt hc    i   g   t i  wt    
 a  

cc

proof  by lemma      we know that ui    wt     i    wt    then  for each set c  c of
agents  and for each agent i  a  consider the expressions  c i    t  and  c i    t  defined
in step   and step    respectively  of the mechanism in figure    note that  because of the
properties of the verifier v stated in definition     and the fact that the payment rule consider only goods that are allocated via    c i    t    val c i   w vi  ti       val c i   wt   and
 c i    t    val c i   w vi  ti       val c  i  i   wt   hold  where c i and c  i  i are optimal
allocations for hc  img     t i w r t  wt and for hc    i   img     t i w r t  wt   respectively 
thus   c i    t    opt hc  img     t i  wt   and  c i    t    opt hc    i   img     t i  wt   
it follows that 
ui    wt    

x   a    c     c      
 opt hc  img     t i  wt    opt hc    i   img     t i  wt     
 a  

cc

   

recall now by corollary     that  for each optimal allocation  for ha  g   t i w r t  wt
and for each set c  c of agents  opt hc  img     t i  wt     opt hc  g   t i  wt    therefore 
 c i    t    opt hc  g   t i  wt   and  c i    t    opt hc    i   g   t i  wt    by using these
equalities  the result follows from equation   
as agents utilities are completely independent of the particular optimal allocation  
every agent gets precisely the same utility in every optimal allocation 
   

figreco   scarcello

corollary       let  and    be two optimal allocations for st w r t  wt   then  ui    wt    
ui       wt   holds  for each i  a 
example       consider the scenario s   ha  g   t i  with a    a    a    and g  
 g         g     the valuation vector wt    wa    wa    discussed in example      and the allocation   illustrated in figure   i    then  we have 
ua       wt    

 
   opt h a    a     g   t i  wt    opt h a     g   t i  wt    
 
   opt h a     g   t i  wt    opt h    g   t i  wt    
 
   opt h a     g   t i  wt    opt h a     g   t i  wt    
 
 
 
  
                                         

for instance  note that opt h a     g   t i  wt          as we can allocate g    g    and g  to
a    if  s he is the only agent in the scenario 
similarly  we get ua       wt       
    that is  the two agents will share precisely half of
the total value  based on our payment scheme  in fact  by looking at the allocation   in
figure   ii   one might navely suppose that a  contributed more than a  to the overall
value associated with     however  this is only due to the specific allocation considered  and
not to the actual values of the goods of the two agents  indeed  the fairness of the utility
values resulting from our payment rule suddenly appears when considering the existence
of the alternative allocation   in figure   ii   which is symmetric w r t    and where it
seems that a  contributed more than a  to the overall value  as a matter of fact  the two
agents are completely interchangeable over optimal allocations  and this is correctly reflected
by our payment scheme  without the need of actually looking at      in particular  from
corollary       the agents are indifferent w r t  the specific optimal allocation being selected 
and hence in this case they equally divide all the available value between themselves 

further basic properties of the mechanism are pointed out next 
theorem       basic properties   let a be any optimal allocation algorithm  then  the
mechanism  a  p   is efficient and guarantees an equal treatment of the equals  moreover 
if all valuations are non negative  then  a  p   is individually rational 
proof  it is clear that  a  p   satisfies efficiency and equal treatment of equals 
let now i  a be an agent and recall from lemma     that  for each type vector
   and allocation  for s   ui    w     i    w   holds  consider the payment rule
p defined in figure    and observe that i    w   is defined as a weighted summation 
over all coalitions c  c  of terms having the form  c i        c i       in particular 
all weights are positive and we claim that  c i        c i         holds  indeed  just
check that  by definition   c i        opt hc  img      i  w   and  c i        opt hc  
 i   img      i  w    so  under the hypothesis that all valuations are non negative  we have
that opt hc  img      i  w    opt hc    i   img      i  w      holds  for each c  a and
agent i  a  thus  ui    w       hence the fact that  a  p   is individually rational trivially
follows  even independently of the allocation   and of whether agent i is truthtelling  
moreover  the mechanism is also tolerant of sensing errors  or uncertain inputs   in the
sense of section     
   

fimechanisms for fair allocation problems

theorem       error tolerance   let a be any optimal allocation algorithm  then  the
mechanism  a  p   is such that for each type vector t and each agent i  a   ui  a wt    wt  
ui  a wt    wt        dist t  t  
proof  consider the construction reported in figure   for the two cases of    t and    t 
and let    a wt   and    a wt   be the corresponding allocations received as its input by
the payment rule  optimal w r t  wt and wt   respectively   moreover  for any set c  c of
agents and for any agent i  a  let c i and c i be the corresponding allocations computed
at step    then  we get 
  c i    t    opt hc  g   t i  wt    by equation   in the proof of theorem     
  c i    t    opt hc  img      ti  ti  i  w ti  ti      by step   in figure   and the fact the
true valuation of agent i is disclosed by the verifier because c i  img   
  c i    t    opt hc    i   g   t i  wt    by equation   in the proof of theorem     
  c i    t    opt hc    i   g   t i  wt    again by equation   
note now that   c i    t   opt hc  img     t i  wt     dist t  t   moreover  since  is an
optimal allocation w r t  wt   by corollary      opt hc  img     t i  wt     opt hc  g   t i  wt  
and  hence    c i    t   opt hc  g   t i  wt     dist t  t  holds  then  observe that
 opt hc  g   t i  wt     c i    t    dist t  t   therefore  we conclude that   c i    t  
 c i    t       dist t  t  
similarly    c i    t    c i    t    dist t  t  holds  hence  by putting it all together 
we derive    c i    t    c i    t      c i    t    c i    t        dist t  t  
in the light of the above expression and by step   in figure    we have that
 i    wt    i    wt    

x   a    c     c      
   dist t  t  
 a  

cc

p
to conclude the proof  observe that cc   a  c     c    
    holds  so that  i    wt   
 a  
i    wt        dist t  t  
therefore  by lemma      we get  ui  a wt    wt   
ui  a wt    wt       i    wt    i    wt        dist t  t  
in fact  we next show that  a  p    with a being an optimal allocation algorithm  satisfies
all the remaining properties discussed in section      to this end  we first discuss an
interpretation of p in the context of coalitional games 

   a coalitional game theory viewpoint
a coalitional game can be modeled as a pair g   hn  i  where n            n  is a finite
set of agents  and  is a function associating with each coalition r  n a real value
 r   r  with           which is meant to encode the worth that agents in c obtain
by collaborating with each other  the function  is supermodular  resp   submodular   if
 r  t      r  t     r     t    resp    r  t      r  t     r     t    holds 
for each pair of coalitions r  t  n  
   

figreco   scarcello

a fundamental problem for coalitional games is to single out the most desirable outcomes  usually called solution concepts  in terms of appropriate notions
of worth distribup
n
tions  i e   of vectors of payoffs x    x         xn    r such that in xi    n    this
question was studied in economics and game theory with the aim of providing arguments
and counterarguments about why such proposals are reasonable mathematical renderings
of the intuitive concepts of fairness and stability  for further background on coalitional
games  the reader is referred to  e g   the work of osborne and rubinstein        
here  we consider the shapley value of g   hn  i  which is a well known solution
concept such that 
x   n     r     r      
i  g   
  r    r    i     for each i  n 
 n   
rn

indeed  we shall show that the mechanism defined in section   has a nice interpretation in
terms of the shapley value of some suitable defined coalitional games  the correspondence
will be exploited to prove further properties of our mechanism  at the equilibrium t where
agents truthfully report their types 
    the shapley value of allocation games
we consider two coalitional games defined on top of an allocation problem 
marg
best
definition      given the valuation vector w  we define gw
  ha  margw i and gw
 
ha  bestw i as the coalitional games such  that for each set c  a of agents 

 margw  c    opt ha  g   t i  wt    opt ha   c  g   t i  wt    and 
 bestw  c    opt hc  g   t i  wt   

 

recall that in section     we have defined the concept of marginal contribution
marg w  c  of a coalition c with respect to a given allocation   because it is sensible
to the set of goods allocated by    in the above definition  with a slight abuse of notation 
we have defined a similar concept margw  c   which does not depend on any goods allocation 
it turns out that these two concepts actually coincide over optimal allocations 
theorem      let  be any optimal allocation for st w r t  wt   and let c  a be an
arbitrary set of agents  then  marg w  c    margw  c  
proof  let  be an optimal allocation for st   ha  g   t i w r t  wt   hence optimal
for ha  img     t i w r t  wt   that is  opt st   wt     opt ha  img     t i  wt    moreover  for each set c  a of agents  by corollary      opt ha   c  img     t i  wt    
opt ha c  g   t i  wt   holds  therefore  margw  c    opt st   wt  opt ha c  g   t i  wt    
opt ha  img     t i  wt    opt ha   c  img     t i  wt    and the result follows as this value
is equivalent to the definition of marg w  c  in equation    on page      
note also that bestw  c  is the best contribution of c  computed assuming that agents in
best
has already
c were the only agents in the allocation problem  in particular  the game gw
been considered by moulin         precisely in the setting of fair division for allocation
best
is submodular 
problems  there  it is shown that the cost function associated with gw
   

fimechanisms for fair allocation problems

proposition      the function bestw is submodular 
marg
since opt hc  g   t i  wt     bestw  c   it turns out that gw
is what is called in the
best
literature the dual game of gw   and the following result is known to hold  nevertheless 
we give a direct proof  for completeness 

corollary      the function margw is supermodular 
proof  let st   ha  g   t i be the given scenario  the result just follows by noticing that
margw  c    opt ha  g   t i  wt    opt ha   c  g   t i  wt     opt ha  g   t i  wt    bestw  a  
c   for each set of agents c  a  therefore  bestw  c    opt ha  g   t i  wt  margw  a c  
thus  if bestw  r  t     bestw  r  t    bestw  r    bestw  t   holds r  t  a  then
we have that margw  a    r  t      margw  a    r  t     margw  a   r    margw  a   t  
holds as well  r  t  a  eventually  by letting r    a   r and t     a   t   we get
margw  r   t       margw  r   t       margw  r      margw  t      for each r    t    a  that
is  margw is supermodular 
the second relevant property is that the payment rule in section   coincides with the
best
shapley value of the game gw
associated with w  the result follows by comparing the utility function as in theorem      with the expression for the shapley value of the coalitional
best
game gw
  moreover  we show that the same result can be established for the dual game
marg
gt   so that the shapley values of the two games are identicalfor similar correspondences
between shapley values of different games  see also the works by maniquet        and kalai
and samet        
theorem      for each optimal allocation  for st w r t  wt   and for each agent i  a 
marg
best
  
    i  gw
it holds that ui    wt     i    wt     i  gw
proof  by comparing the utility function as in theorem      with the expression for the
best
associating with each coalition c of agents the
shapley value of the coalitional game gw
worth opt hc  g   t i  wt    we immediately get that  for each optimal allocation  for st
best
  
w r t  wt   and for each agent i  a  it holds that ui    wt     i    wt     i  gw
marg
best
in order to conclude the proof  we show that for each agent i  a  i  gw     i  gw
 
holds  to this end  first note that these shapley values can be written as follows 
p
marg
 i  gw
    ca ic   a  c     c    
tc    and
 a  
best
 i  gw
  

p

ca ic

  a  c     c    
tc  
 a  

where tc    margw  c margw  c  i   and tc   opt hc  g   t i  wt  opt hc  i   g   t i  wt   
then  we claim that 
    for each set c  a of agents with i  c  the set c    a   c    i  is such that tc    tc 
and
 the set c    a   c 
   i  is such that t     t  
    for each set c  a of agents with i  c 
c
c

   

figreco   scarcello

    let c  a such that i  c  and observe that tc    margw  c   margw  c    i    
 opt st   wt    opt ha   c  g   t i  wt      opt st   wt    opt ha    c    i    g   t i  wt     
opt ha    c    i    g   t i  wt    opt ha   c  g   t i  wt     opt h a   c    i    g   t i  wt   
opt ha   c  g   t i  wt    thus  let c    a   c    i   and note that tc    tc 
 g   t i  wt   
 and observe that t    opt hc 
    let c  a such that i  c 
c


opt hc    i   g   t i  wt      opt st   wt    opt hc    i   g   t i  wt      opt st   wt   
 g   t i  wt      marg   a   c 
   i    marg  a   c  
 thus  let c    a   c 
   i  and
opt hc 
w
w
 
note that tc   tc 
marg
best
as     and     hold  and given the two expressions for i  gw
  and i  gw
   we conclude
that the two values coincide 

    marginality  budget balancedness  and individual optimality
now that we have established a precise correspondence between our mechanism and the
shapley value of its associated allocation games  we can show further desirable properties of p   in fact  we exploit the following well known properties  see  e g   osborne  
rubinstein        young        of the shapley value of any game g   hn  i 
 i 

p

in

i  g     n   

 ii  p
if  is supermodular  resp   submodular    then
ir i  g    r    for each coalition r  n  

p

ir i  g 

  r   resp  

 iii  if g     hn    i is a game such that    r    r   for each r  n   then i  g      i  g  
for each agent i  n  
in particular  property
 ii  entails that the shapley value of the supermodular game
p
marg
   margw  r   this means that the shapley value of this
gw is such that ir i  gw
game belongs to another important solution concept for coalitional games called core  osborne   rubinstein         which is highly desirable for its stability  as every coalition
marg
gets at least the worth it deserves according to the function margw  
of agents in gw
in our context  this will easily entail that the utility of every group  coalition  of agents
c  i e   the sum of the utilities of agents in c   is not less than its actual marginal contribution to the best possible allocations  note that considering such a collective utility is
particularly useful whenever we reason in terms of fairness for groups of agents  rather than
just singletons  we first pinpoint that bestw  c  and margw  c  provide an upper bound
and a lower bound  respectively  to the utility of c 
marg

theorem      let  be
pan optimal allocation for st w r t  wt   then  for each set c  a
of agents  bestw  c   ic ui    wt    margw  c  

marg
best
   for each agent
    i  gw
proof  by theorem      we know that ui    wt     i  gw
i  a and optimal allocation   then  we can simply recall that the function margw  resp  
marg
best
bestw   associated with the game gw
 resp   gw
  is supermodular  resp  
p submodular 
by
corollary
   
 resp  
proposition
     
hence 
the
result
follows
as
ic ui    wt    
p
p
marg
best

 g
 
and
by
property
 ii  

 g
 
 
ic i w
ic i w

   

fimechanisms for fair allocation problems

by combining the above result and theorem      we immediately get the following 
corollary      marginality  
p let a be any optimal allocation algorithm  then  the mechanism  a  p   is such that ic ui  a wt    wt    marga wt   w  c   for each set c  a 
hence  under the payment rule p and optimal allocation algorithms  we get mechanisms
that accurately take care of the marginality property defined in section      our next result
pertains the budget balance property of the mechanisms  again  the correspondence with
the shapley value is crucial to establish the result 
theorem
     let  be an optimal allocation for st w r t  wt  
p

p
  
w
t       
ia i

then  it holds that

best
   for each agent i  a and optiproof  by theorem      we know that ui    wt     i  gw
best
best
mal allocation   where

 g
 
is
the
shapley
value
of
g
w   by property  i 
pof the shapley
p
p i w best
best
  
value  we know that ia i  gw     bestw  a   thus  ia ui    wt     ia i  gw
opt ha  g   t i  wt    by definition of the utility and letting wt    w         wn    it then folp
p
p


lows that opt ha  g   t i  wt    
ia pi    w   hence 
ia wi    
ia pi    wt    
opt ha  g   t i  wt    val   wt        as  is indeed an optimal allocation w r t  wt  

corollary      budget balancedness   let a be any optimal allocation algorithm  then 
the mechanism  a  p   is budget balanced 
finally  we complete the picture of our analysis by proving a strong fairness property
of the proposed payment rule p   in words  the best outcome for every agent is always
determined by a  global  optimal allocation  moreover  from corollary       any agent
is indifferent about the specific optimal allocation being considered  that is  any chosen
optimal allocation leads to the best results for all agents 
lemma       let  and    be two feasible allocations for st such that  is optimal w r t  wt  
and hence val   wt    val      wt    then  ui    wt    ui       wt    for each i  a  moreover  if    is not optimal  there exists some agent i  a such that ui    wt     ui       wt   
proof  for any allocation   consider the coalitional game g    ha  v  i such that v   c   
opt hc  img     t i  wt    for each c  a  by looking at the expression of the shapley value
for g    it is easy to check that ui    wt     i  g     just use the same reasoning in the proof
of theorem        assume now that    is an allocation with val   wt    val      wt    and
 
consider the value v   c    opt hc  img        t i  wt    for each c  a  by corollary     
 
we have that v   c   v   c   for each c  a  then  we derive that ui    wt     i  g    
 
i  g      ui       w  for every i  a  because of property  iii  
now assume that    is not optimal  and thus val   wt     val      wt    therefore  for
 
the grand coalition a  we have v   a    v   a   because of property  i  of the shapley
 
value  only  and all  the total value v   a  is distributed to agents  it follows that there
 
exists some agent i  a such that ui    wt     i  g      i  g      ui       wt   
by focusing on optimal allocation algorithms  the above lemma immediately entails the
following two fairness properties 

   

figreco   scarcello

theorem       individual optimality   let a be any optimal allocation algorithm 
then  for any agent i  a and any feasible allocation  for st   ui  a wt    wt    ui    wt   
corollary       pareto efficiency and envy freeness   let a be any optimal allocation
algorithm  then  the mechanism  a  p   is pareto efficient and envy free 
note that individual optimality guarantees much more than classical pareto efficiency
and envy freeness  because it entails that the mechanism leads to a unique evaluation 
independently of the chosen optimal allocation  in particular  the pareto set is a singleton 

   complexity issues
in this section  we shall reconsider our mechanism with verification from a computational
perspective  note first that computing an optimal allocation on the basis of the reported
types is an easy task  which can be carried out via adaptations of classical matching algorithms  indeed  in the light of fact      computing an optimal allocation for an arbitrary
scenario  with agents in a and goods in g  reduces to computing an optimal allocation for
a scenario where each agent  in a    gets one good  this is equivalent to finding a matching
of maximum weight over a complete bipartite graph over the set of disjoint nodes a  and
g  and where edge weights are encoded via the function w    such a combinatorial problem
is known to be feasible in polynomial time  e g   schrijver        
    hardness result
despite the fact that optimal allocations can be computed in polynomial time  our mechanism is not computationally efficient  since payments are unlikely to be computable in
polynomial time  indeed  we next show that this computation problem is complete for the
complexity class  p  see papadimitriou        
let us recall that a counting turing machine is a standard nondeterministic turing
machine with an auxiliary output device that prints in binary notation the number of
accepting computations induced by the input  it has  worst case  time complexity f  n  if
the longest accepting computation induced by the set of all inputs of size n takes f  n  steps 
then   p is the class of all functions that can be computed by counting turing machines of
polynomial time complexity  a prototypical  p complete problem is to count the number
of truth variable assignments that satisfy a boolean formula  of course  np p  and a
polynomial time algorithm for solving a  p complete problem would imply p   np 
theorem      computing the shapley value of coalitional games associated with allocation
problems  as in definition      is  p complete 
proof  the problem belongs to  p  because computing the shapley value is known to be feasible in  p for any class of coalitional games with polynomial time value cost functions  c f 
deng   papadimitriou         to show that it is  p hard  we exhibit a reduction from the
following problem  let g    a  b  e  be a bipartite graph with  a     b    n  e  a  b 
and  e    m  n  recall that a matching is a set e    e of edges such that for each pair
of distinct edges  a  b  and  a    b    in e     a    a  and b    b  hold  the matching e   is perfect
if  e       n  the problem of counting the number of perfect matchings in such bipartite
graphs is  p complete  valiant      a  
   

fimechanisms for fair allocation problems

given a graph g    a  b  e  as above and a constant k     which we shall fix below  
we build in polynomial time a tuple s g    ha  g   t i and a vector wt such that 
s
    a        a b e   a  b           a  b k    i e   agents are one to one associated with k
distinct clones of each edge  a  b   e  plus a distinguished agent   note that  a    n 
because in the considered bipartite graphs m  n holds 
    g    g    a  b  i e   goods correspond to nodes  plus a distinguished good g  
         and  a b i      for each  a  b   a and i           k   are the components of  t
associated with agents  and  a  b i   respectively 
    for each agent c  a  the associated component wc in the vector wt is defined as
follows  for each  a  b i  a  w a b i  a       w a b i  b       w a b i  g        w a b i  x      
x   a  b     a  b   moreover  w  g        w  x         x    a  b  
let us now fix some notations  for any set e    e of edges  let match e     denote the
size of the largest set e     e   of edges that is a matching  for any set c  a      of
agents  let a c     a    a  b i  c  and b c     b    a  b i  c   finally  we say that
c  a      is tight if it does not contain two agents of the form  a  b i and  a  b j   with
i    j  i e   associated with the same edge of g 
observe that  for each set c  a      of agents 
opt hc      g   t i  wt    opt hc  g   t i  wt    



 
 

if c is tight  and  c    a c    b c 
otherwise

   

indeed  if c  is an optimal allocation for hc      g   t i w r t  wt   then we always have that
val c    t        a c         b c        instead  if c is an optimal allocation for hc  g   t i
w r t  wt   then we have

    a c         b c  
if c is tight  and  c    a c    b c 
val c    
    a c         b c       otherwise
best
for
by exploiting equation    we can now express the shapley value of the game gs g  t
agent  in a convenient way  let xh denote the number of sets c  a      of agents which
are tight and such that  c     a c      b c     h  and let x       then 

 a  
best
  gw
  

x   a   h      h  
xh  
 a  

   

h  

in particular  let us now focus on the coefficient xh   denote by yh the number of matchings
in g whose cardinality is h  by construction of s g  it is immediate to check that for each
matching of cardinality h in g  there are precisely k h sets of agents c  a      that are
tight and such that  c     a c      b c     h  thus  we can rewrite the above expression 
 a  
best
  gw
  

x

 zh  yh    k h   with zh  

h  

   

  a h    h  
 
 a  

   

figreco   scarcello

best
for an expression as the one above  given the value of   gw
   it is known that under
certain circumstances we can reconstruct in polynomial time the value of each single term of
the form zh  yh  see fact   in the work by valiant      b    we need an integer constant
a     such that  for each h            a       zh  yh  a  and k  a    in our case  it can
be noticed that  for each h            a     zh yh    holds  as yh   a     h    a   h    
best
   we can compute in polynomial
thus  for k      we have that  given the value of   gw
time all such terms  in particular  we can compute in polynomial time the term associated
to h    a     b    n  where recall that  a    n  this term has the form zn  yn   with yn
being the number of perfect matchings in g  thus  by putting it all together and since zn
can be computed in polynomial time  as the size of the numbers n and  a  are logarithmic
w r t  the size of g   the number of perfect matchings in bipartite graphs can be counted in
polynomial time too  which concludes the proof 

by lemma     and theorem      the following is immediate 
corollary      computing the payments as given by the rule p is  p complete 
    a fully polynomial time randomized approximation scheme
an approach to circumvent the intractability of the shapley value is based on approximation 
for a game g   hn  i  a vector  is an  approximation of the shapley value if  i i  g   
  i  g  holds  for each i  n  
recently  a sampling method conceived by bachrach  markakis  resnick  procaccia 
rosenschein  and saberi        for the special class of simple coalitional games has been
extended to deal with arbitrary games that are supermodular and monotone    liben nowell 
sharp  wexler    woods         under the assumption that the value  r  can be computed
by an oracle having unitary cost  for each r  n   the result is that  for any      and
      it is possible to compute in time poly n      log      a vector  that is an approximation of the shapley value with probability of failure at most   a method with
these properties is called a fully polynomial time randomized approximation scheme 
next  we propose a payment rule p that is founded on the sampling strategy described
in the work by liben nowell et al          the payment rule  reported in figure    samples
m subsets of a storing them in c  together with other subsets functionally determined by
the samples   and then computes the value    w   as in figure    but with c playing the
role of the power set c  the process is repeated  log      times  and the componentwise median vector of all such payments is computed  the resulting payment is eventually
defined at step   
the new rule p gives rise to a randomized mechanism that is of course still verifiable
and uses no punishment  moreover  the mechanism is truthful even when the realization
of the set c  sampled in step    is known beforehand   formally  the mechanism turns out
to be universally truthful  i e   it is a probability distribution over deterministic truthful
mechanisms  see  e g   dobzinski   dughmi        
   monotonicity of g   hn  i means that  r    t    t  r  n  
   this evidences that if truthfulness is our only desideratum  then there is no need to implement a payment
rule computing the shapley value of the coalitional game associated with the allocation problem  as in
definition       which in fact is a concept defined over all possible subsets of a and which we have shown
to be computationally hard in theorem     

   

fimechanisms for fair allocation problems

input 
a type vector     a feasible allocation  for s   and an integer m     
assumption  the verifier v  for t  is available  with v      v         vn   
notation 
s   ha  g    i  w    w         wn    wv      wv         wvn   
  
  
  
  
  
  
  
  
  

generate a set c of m subsets of a  and
let c    c    a   c    i    c  c  i  c    a  
for each i  a and c  c 
  compute an optimal allocation c i for hc  img      vi  i   i w r t  w vi  i    
b compute an optimal allocation for c  i  i for hc    i   img      vi  i   i w r t  w vi  i    
for each agent i  a 
b compute i    w   as in figure    steps      with c    c 
repeat  log      times steps       and    and
 w   be the component wise median vector of these vectors    w   
let   
define pi    w      i    w    wvi    
figure    payment rule p  

theorem      let a be any optimal allocation algorithm  then  the mechanism  a  p   is
universally truthful 
proof  the result follows by inspecting the proof of theorem     for rule p in section   
indeed  it can be immediately checked that the proof does not depend on the specific
subset of coalitions c  and thus it smoothly applies if any set of coalitions c is used as
in figure    instead of all possible subsets of a  note in particular that  in the proof of
theorem      properties  a  and  b  are precisely those guaranteeing truthfulness  and that
these properties hold for each given coalition c  therefore  they still hold for any subset of
coalitions randomly chosen by the mechanism 
similarly  by inspecting the proofs in section    in this universally truthful mechanism 
the following properties are seen to hold for every realization of the random coin tosses 
theorem      basic properties   let a be any optimal allocation algorithm  then  the
mechanism  a  p   is efficient and guarantees an equal treatment of the equals  moreover 
if all valuations are non negative  then  a  p   is individually rational 
for a deeper analysis of the payment rule p   we next point out a relationship between
utility values and approximations of the shapley value  at the equilibrium when all agents
report their true types 
lemma      let a             a    and let m     a         for each optimal allocation
 for st w r t  wt   the vector  u  p    wt         u a  p    wt    is an  approximation of the
marg
best
shapley value of gw
 and gw
  with probability      and coincides with it in expectation 
proof  by exploiting the same line of reasoning as in the proofs in section   for p   we can
see that i    wt    at step   of the algorithm in figure    can be rewritten as follows 
i    wt    

x   a    c     c      
 bestw  c   bestw  c    i     
 a  

cc

   

figreco   scarcello

then  we observe that by construction of c in step    for each set c  c and each agent
i  a  the set  a   c    i  is in c  too  thus  we can apply the same line of reasoning as
in the proof of theorem      in order to conclude that 
i    wt    

x   a    c     c      
 margw  c   margw  c    i     
 a  

cc

marg
  ha  margw i is supermodular by corollary      morenow  recall that the game gw
marg
over  gw is clearly monotone  thus  by liben nowell et al          the above expression
marg
  and it approximates this value
coincides in expectation with the shapley value of gw
with constant probability  steps   and   serve to amplify the probability  c f  liben nowell
et al          and to get a fully polynomial time randomized approximation scheme  the
result follows as step   implements the usual bonus and compensation approach  so that
ui p    wt   coincides with the above expression  for each i  a  cf  lemma      

note that in the approach by liben nowell
p et al          a final normalization step
is carried out that would guarantee that
ia u  p    wt     margw  a    bestw  a  
unfortunately  this way truthfulness might be lost  hence we did not include such a normalization procedure in the above payment rule  as a consequence  the mechanism p does
not guarantee  for instance  budget balancedness and pareto efficiency  however  because
of lemma      since the expected utility profile coincides with the shapley value  p enjoys
in expectation all the properties of p including the above two ones  in particular  we can
still have approximate counterparts for theorem     and theorem     
theorem      let  be an optimal allocation for st w r t  wt   let m     a         then 
with probability     
p
         bestw  c   ic ui p    wt           margw  c   for each c  a 
   val   wt   

p


ia pi    wt  

   val   wt   

proof  here  just observe
of lemma     and theoremp     for each set
pthat  in the light p
c  a  we have     ic ui p    wt    ic ui p    wt         ic ui p    wt   
the result then follows by substituting such bounds in theorem     and theorem     
respectively  with simple algebraic manipulations 
finally  we propose a further randomized mechanism that is able to guarantee both economic efficiency and budget balancedness  the price to be paid is however that truthfulness
holds in expectation only  the mechanism is based on a payment rule that we call p  
theorem      let a be any optimal allocation algorithm  then  there is a  randomized 
mechanism with verification  a  p   that is truthful in expectation  and that  at the truthful
equilibrium  is efficient and budget balanced  moreover  if all valuations are non negative 
then  a  p   is individually rational 
proof  the payment rule p follows the steps in figure    with minor modifications in
step   and step    first  in step    whenever we compute the median value i    w   for
agent i  we also compute the corresponding value i    wv      evaluated on the revealed
   

fimechanisms for fair allocation problems

types rather than on the reported ones   then  we define a normalization factor r  
p
opt ha  img     v   i  wv       ia i    wv       so that  in step    pi    w   is eventually
returned as wvi     i    w    r 
concerning truthfulness  we can just note that the expected value of r is    indeed  by
lemma      the expected value of i    wv     is i    wv      hence  the sum of all these
values coincides with opt ha  img     v   i  wv     by the efficiency of the shapley value
 as in the proof of theorem       thus  the expected utility of an agent i under the payment
rule p coincides with the  actual  i e   not in expectation  utility of i under the rule p  
hence  truthfulness in expectation follows by theorem      now  we can just check that 
at the truthful equilibrium  the maximum social welfare is achieved  equilibrium efficiency 
p
p
and ia pi    wt     opt ha  img     t i  wv      ia i    wt    r      that is  the
mechanism is budget balanced  too  finally  the mechanism p is seen to be individuallyrational  by exploiting the same line of reasoning as the one used for the mechanism based on
p   since the corresponding proof in section   is not affected by the sampling strategy 
again  by lemma      all the remaining properties hold in expectation 

   related approaches to mechanisms with verification
we next review the main approaches in the literature for mechanisms with verification  and
point out the differences w r t  our proposal 
first we observe that  differently from our general setting where the types of the agents
can determine the vector of the upper bounds for the allocation problem  in earlier approaches it is assumed that agent types do not have any impact on the underlying combinatorial problem  so that the type vector precisely coincides with the valuation vector  instead 
we deal explicitly with both allocation constraints and goods valuations  for instance  in
a scheduling problem formalized in our setting  the private type of an agent machine can
be its speed  while its valuation function is fully determined by this speed and the size
of the job to be processed  then  the verifier is just asked to measure the speed of such
agents machinessee also appendix a  in fact  it is immediate to encode the valuations
as types as well  at the price however of hiding the true complexity  or simplicity  of the
setting  for instance  in the above example  if the type of an agent is the vector of its
valuations  then we would miss the information that the agent is ultimately characterized
by one  observable  parameter only 
more substantial differences between earlier approaches and our proposal come in the
very definition of the utility of an agent  in the works by auletta et al          penna
and ventre      a      b   krysta and ventre         auletta et al         and ferrante
et al          the individual welfare of an agent i  given the outcome  and the vector d of
reported types  is assumed to be of the following form 

 
if i is caught lying
ui p    d    ti    
pi    d  otherwise
where pi      is a payment that does not depend on the vector t of the true types 
in these papers  the only information that is assumed to be available at payment time is
whether the reported type di of agent i differs or not from its actual true type ti   this is the

   

figreco   scarcello

role played by the verifier  and in fact pi    d  does not exploit the possibility of partially
revealing ti   moreover  the payment scheme adopted punishes those agents that are caught
lying  hence  while the verification process provides a smaller amount of information than
the verification process in our approach  the rules used to discourage strategic behaviors
are stronger than ours and based on punishing agents  also  the above works assume
that agents misreporting is restricted to certain kinds of lies  e g   values lower than the
corresponding true ones   so that a form of one sided verification suffices 
recently  the above model of  partial  verification has been extended by caragiannis
et al         to a setting where an agent cheating on her his type will be identified with
some probability that may depend on her his true type  the reported type  or both  in fact 
caragiannis et al  also showed that there are cases in which verification does not help if
it is not one sided  the payment scheme is exactly the same as the one discussed above
and  hence  verification does not exploit any  possibly partial  knowledge of the actual
true type and a punishment approach is still used  the main novelty  in addition to the
probabilistic verification  is that there is no constraint on the type that an agent can report
while cheating 
finally  a different kind of verification model goes back to the seminal paper by nisan
and ronen         and it is actually closer to our no punishment perspective  because an
agent i can in principle be paid by the mechanism even if i has been caught lying  given
n agents  nisan and ronen consider a vector e    e         en   of observed agent types 
which are completely known after the verification process  moreover  the individual utility
of any agent i has the form ui p    d    ei     pi    d   so that the vector e in such a
framework plays the same role as the verifiers output in our approach  a first difference
between the work by nisan and ronen and our approach is that  in the above model  agents
misreporting is again restricted only to certain kinds of lies  on the other hand  we consider
a restriction on the form of valuation functions  since our verification model assumes that
valuations are determined by some objective and observable properties of goods and agents
 encoded by functions of the form g and i   as defined in section     as a consequence 
at payment time  the valuation of any agent i is known for every good in img    instead 
in the setting by nisan and ronen  the valuation of each agent i for goods in img      i 
remains unknown even after the verification is performed  from the results presented in this
paper  it turns out that this difference between the two framework is crucial to overcome
classical impossibility results  and to meet all desirable properties at once  without using
any punishing power  

   conclusion
in this paper  we have proposed and analyzed mechanisms for fair allocation problems in a
setting where agents declarations regard objective properties of goods or agents  and thus
can be  partially  verified before payments are made  in particular  we have considered a
model of verification that is able to disclose the true values of allocated goods  in contrast
to previous approaches in the literature where partial and probabilistic verification have
been considered  however  the use of this verification power is in fact quite limited  because
payment rules have been designed so that no punishment is meted out to agents whose
declarations do not match the output of the verification process  this requirement is crucial
   

fimechanisms for fair allocation problems

for practical applications of the framework  such as the italian research evaluation described
in  greco   scarcello         and summarized in the appendix   because any discrepancy
between declared and verified values may be due to sensing errors or subjective issues that
cannot be interpreted as agents lies to be punished 
the challenge was to show that  in this framework  truthfulness  efficiency  budgetbalancedness  and fairness  as well as further desirable properties discussed in section   
can be achieved simultaneously  unlike the classical setting  it is worthwhile noting that  if
one is guaranteed that all agents truthfully report their true types  no strategic behaviors 
or  equivalently  if these types are given as public knowledge  then the problem is quite easy 
for instance  one can just use payments in a way that each agent gets as her his utility
the shapley value according to either coalitional game defined in section    moreover  if
fairness is not an issue  then the other properties can be obtained by even using the simple
uniform payment rule  however  whenever agents may behave strategically  reporting the
true type is no longer a dominant strategy  if such approaches are used  in fact  truthfulness
might be enforced by equipping the mechanism with suitable punishment rules  however 
we already argued that this would be not appropriate in our context  and typically the
resulting mechanism would not be error tolerant 
by looking at the proposed framework from an abstract perspective  one may notice that
it is based on two fundamental ingredients  a base combinatorial problem that determines
feasible and optimal allocations  and a game theoretic notion that describes what is considered fair  with respect to agents contributions and expectations  namely  in the application
domain of allocation problems addressed in the paper  the weighted matching is the basic
combinatorial problem and the shapley value is the most natural game theoretic solution
concept  under this perspective  a natural research direction is to study different instances
of such an abstract framework for mechanisms with verification  where other combinatorial
problems  colorings  coverings  etc   and different solution concepts  nucleolus  banzhaf
index  etc   may be more appropriate and best describe the problem at hands 
another interesting avenue for further research would be to study a modification of
the framework where agents preferences are not directly expressed in terms of real valued
functions  but they are rather formalized in terms of orderings ranks over available goods 
this is particularly interesting given that  in the strategic setting we have defined  agents
declarations only contribute to the definition of which goods will be selected  but they do
not determine their values 

acknowledgments
we thank the anonymous referees and the associate editor for their very useful comments 

appendix a  application scenarios
fair allocation with monetary compensation has been intensively studied in the literature 
very often in settings where all parameters of interest are public knowledge  or  simply 
by getting rid of strategic issues   one example application discussed in the literature is
parking space and benefit allocation at a workplace  where each employee gets a parking
space and a share from a fixed benefits package  house allocation problems are another

   

figreco   scarcello

classical example  where agents collectively own a set of houses  and we look for a systematic
way of exclusively assigning a house to each agent  possibly with monetary compensations 
a third example is room assignment rent division  where a group of agents rent a house 
with each of them getting a room and paying a share of the rent 
in the following  we illustrate further applications of fair allocation problems that fit
our general framework discussed in section    in the applications we shall discuss  part of
the relevant information is private knowledge of the agents  and verification can be adopted
to measure observable properties before the payment phase  nonetheless  we stress here
that  even if all the relevant information were available as public knowledge or could be
measured in advance  such applications would still remain of interest  as they show the
need of defining allocation policies that guarantee fair and or error tolerant solutions 
a   the italian research assessment program  vqr          
we start our overview of possible application scenarios by focusing on a real world case
study that first motivated our investigation on allocation problems  this application is
best described in a companion paper  greco   scarcello         which applies the results
presented here to the specific case of the italian research assessment program 
a     the setting
in       the national agency for the evaluation of universities and research institutes
 anvur  has promoted the vqr assessment program devoted to evaluate the quality of
the whole italian research production  in its first application  the program focuses on the
period            while the evaluation will be repeated on a regular basis  the next one
should cover years           
in the first phase of the program  every structure r  a university or a research institute 
selects and submits to anvur a set p of its products  under the constraints that  i  each
product has to be univocally associated with an author  even if the product is co authored 
and that  ii  at most three products can be associated with each author affiliated with r  
in abstract terms  r computes in this phase an allocation   with img     p   for the
scenario where r is the set of the agents researchers affiliated with r  where p is the set
of all the goods products they have co authored  and where for each r  r  r     is the
associated constraint on the number of goods products that can be allocated to r  the way
this allocation is performed is described below 
in the second phase  anvur evaluates the products in p by equipping each of them
with a quality score  expressed as a number   hence  this phase defines an official valuation
such that  for each product p   r   w p  is the quality score assigned by anvur to p 
the overall score of r will be the sum of the values of all products in p   and it will be
used to proportionally transfer to r the funds allocated by the ministry to support research
activities in the next years  until data from a new evaluation for the subsequent period will
be available 
   we simplify here  actually  the number of publications may be less than three  for some authors 
   the set of the possible scores is defined in the vqr guidelines  to our ends  this detail is immaterial
and scores are just viewed as  arbitrary  real numbers 

   

fimechanisms for fair allocation problems

a     the need of a fair division
the vqr program actually assigns a score not only to the structure r  but also to all its
substructures  e g   to departments  if r is a university   of course  this is expected to
have an impact on the funds redistribution inside every research structure  and therefore a
crucial problem is to define a fair rule for funds redistribution  that is  a rule that is capable
to assign funds by clearly reflecting the true contribution of each researcher substructure
to the performances of the structure as a whole  moreover  the recruitment policies of
universities are going to be evaluated as well  by looking at the  vqr  performances of
researchers that were hired recently  however  no redistribution rule has been specified in
the program  and most researchers believe that the evaluation
p of  the contribution of  each
r  r will just coincide with the overall value wr     
p r  w p  of those products
allocated to r in the submission phase  of course this is not fair in general  because if a
product p  p is co authored by two researchers of r  then they both  and  in turn  their
structures  might claim this contribution even if the product has been formally allocated
just to one of them    therefore  more sophisticated approaches have to be defined for a
proper evaluation of individuals and substructures 
a     strategic issues and verification in the vqr program
recall that the goal of structure r is to submit to anvur  in the first phase of the program  the products that will likely get the highest possible scores  in the second phase  
to this end  there are publicly available evaluation criteria that should allow one to perform a ranking of products  ideally by equipping each of them with the quality score that
will be assigned to it by anvur in the subsequent phase  both for time and economic
reasons  this first evaluation phase was based only on self evaluations performed by the
authors of the products  which are clearly assumed to be the best experts on their research
subjects  moreover  in most structures  to decide the precise allocation of products  hence
to deal with the conflicts related to co authored products  researchers performed choices in
a decentralized way  only a few structures set up an optimization framework to compute
an optimal allocation  based on agents declarations  in any case  by abstracting from the
specific method adopted to end up with a feasible allocation to be submitted for the vqr 
strategic issues emerged in this phase  in particular  there are some researchers r  r that
guided the allocation of the products  e g   cheating on their quality  for the supposed
personal interest of maximizing the value wr     clearly enough  this way optimal product
selections can hardly be achieved by the structure 
note that the vqr case perfectly fits our framework of allocation problems  here the research products are the indivisible goods to be allocated to researchers agents  who initially
declare their goods valuations  moreover  the social welfare is the total anvur score of
the research structure  that should be distributed in a budget balanced way to researchers 
and hence to their substructures  in a fair way  note that the upper bound constraint for
each researcher    products  with some exceptions  does not depend on the type in this case 
    this problem does not occur for products co authored by researchers belonging to different structures 
indeed  the same product can be submitted by several structures  assigned to a different co author in
each of them   thus  for a given research structure r  the co authors of interest are only those affiliated
with r 

   

figreco   scarcello

because it is a parameter fixed by anvur  therefore  the private information of agents
is limited to good valuations  moreover  observe that the specific valuation functions occurring in the vqr fit the verification model proposed in the paper  in particular  every
research product has an objective value  which can be measured by a verifier for each
allocated and hence submitted product  while nothing can be said for products that are not
allocated to any researcher   thus  anvur precisely acts as the verifier of the model 
a     mechanisms for the vqr program
the basic approach of assigning to each researcher r  r the value wr    is precisely the
 trivial no payment  rule p in example      there  we have observed that mechanisms
based on this rule are not truthful in general  moreover  from example     is also emerged
that the rule is not fair  in particular  when combined with an optimal allocation algorithm
 in order to to guarantee efficiency   therefore  this rule is highly undesirable  and different
kinds of mechanisms have to be defined for the vqr setting 
in fact  we would like to end up with a mechanism that is able as able to collect the
correct self evaluations  truthfulness  and to obtain the maximum possible performance
 efficiency  for the research structures  these two goals  however  have to be accomplished
together with fairness  indeed  we would like to guarantee to every researcher or group of
researchers to get at least their marginal contributions  and that the resulting mechanism is
also individually optimal  the latter property is very important for this application  since
it guarantees that  for any researcher  her his score is the maximum one over all possible
alternative allocations  including allocations using products that were not submitted by the
structure and hence not verified  moreover  it is also relevant that these properties are
guaranteed via mechanisms enjoying the verifiability property  in that the payment rule
only uses certified valuations  it would be unacceptable to use product values that are
not verified by anvur  
finally  it is worthwhile noting that anvur guidelines defines a range of possible product values determined  e g   by the publishing venues and by citation indices  by pointing
out that peer reviews can also be used to override such a basic classification  e g   for papers published on a good journal but without many citations  or after an explicit authors
request   clearly enough  this entails that discrepancies between authors declarations and
anvur evaluations might well emerge even in absence of any malicious behavior  hence 
the no punishment  and error tolerant  approach seems to be unavoidable for a concrete
and politically acceptable application of any mechanism 
a    cooperative  scheduling and task allocation
assume that h jobs in the set j             h   have to be executed within a deadline d  and
that n agents machines  m         mn   with n  h  are available to execute in parallel these
jobs  for each machine mi   with i         n   let i  j denote the set of jobs that mi can
in principle execute  these sets are determined  for instance  by physical  technological  or
accessibility constraints and are known to the scheduler  while the precise speed that the
machines guarantee for this process is not known to the scheduler  and should be declared by
agents  it is assumed that each machine mi can always work at such a speed independently
of the workload actually assigned to it  for the considered jobs i at hand   for the sake of
   

fimechanisms for fair allocation problems

simplicity  assume also that each job consists of the same workload wl   and that for each
executed job  a fixed profit pr is earned  moreover  a further profit pr add will be earned
by the scheduler if all jobs are correctly executed  and  part of it  can be distributed to
agents  every machine participating in the process will execute at least one job  i e   we
are assuming we have many jobs that can be executed by any machine and machines have
comparable speeds so that it is convenient to use all of them   furthermore  every machine
is dedicated to this process and it aims at executing as many jobs from j as possible 
because it cannot earn any profit from external jobs  not in j   
therefore  we have an allocation problem where the goods jobs in the set           h  
have to be allocated scheduled to the agents machines in the set  m         mn    here  the
private type of agent mi is its speed si  devoted to this process   for each i           n  
moreover  the vector  of the upper bounds to the number of goods that can be allocated
i
to the agents is defined as i  si     b ds
wl c  for each i           n   note  in particular  that
the jobs have to be completed within the deadline  so that the upper bound constraints of
the allocation scenario are functions of the types speeds of agents machines  finally  we
can define the valuation vector w    w         wh   so that  for each i           n   wi  x     pr  
if x  i   and wi  x        if x   i   note that in this case valuations are independent on
the types of the agents  of course  we are assuming that any single job in i can be executed
within the deadline d  
given that the same task can be carried out by different agents  it is sensible that
allocations are perceived to be as fair ones  see  e g   porter et al          to this end  the
mechanism with monetary compensations described in this paper can be adopted  in fact 
note that strategic issues come into play  and the egoistic behavior of some agents may lead
to allocations that are not optimal and possibly can miss the extra reward pr add   observe
that the scheduler may act as the verifier in our model  at the end of the process  indeed 
after the allocation is computed and jobs are executed based on it  it can immediately
verify the truthfulness of agents declarations by looking at the amount of time used by
each machine to execute the jobs assigned to it 
furthermore  in practice  speed values are given with a finite precision  as well as their
physical verification is subject to measurement errors  for this reason  even this mechanism
should be tolerant of errors  and not based on punishments 
as a further example  consider the following task allocation problem  which can be
viewed as a variation of the previous one  assume that a company select some agents
e         en to perform a given set of tasks  t         tm   within a certain deadline  and assume
that the company does not know precisely whether or not such agents have the necessary
skills  experience  strength  speed  competence  etc    for instance  this may happen if the
company is starting some new line of production with new tasks  or if such tasks should be
executed by means of crowdsourcing  where agents are selected through an internet call 
therefore  in this case agents types declarations comprise both their skills and the
number of tasks they are able to execute within the required deadline  valuation functions
encode the profit to be earned by any agent executing a given task  where the value  
means that the agent is not able to execute that task   note that here both the upper
bound constraints of the allocation scenario and the valuations functions depend on agents
types  again  a mechanism with monetary compensations can be used  in order to provide a
fair distribution of the company reward for those tasks  and to encourage agents to truthfully
   

figreco   scarcello

declare their skills  note that the framework with verification proposed in this paper can
be used under the assumption that the agents skills necessary for the proposed set of tasks
can be observed and evaluated by the verifier   at least  at the end of the process  where
all agents performed their work  possibly with failures  
a   protocols for wireless communication networks
we conclude this overview of possible applications by considering a cost problem where 
moreover  there is no private information  and hence no strategic behavior  this is to remark
that the proposal described in the paper can be used even when mechanism design is not
necessary  but one still needs a policy for fair division that enjoys the properties described
in section      e g   envy freeness  individual optimality  and so on   in fact  fairness
issues are currently attracting much attention in the design of scheduling protocols over
wireless communication networks  where the underlying problem is bandwidth allocation 
for instance  in the design of protocols for high speed wide area wireless networks  where
the role of monetary compensation is played by adjustments in the priorities of users  see 
e g   jalali  padovani    pankaj         moreover  a number of network applications are
emerging where direct forms of monetary compensation are considered 
as an example  let us consider ad hoc networks  which are self organizing wireless infrastructures where mobile nodes cooperatively act via multi hop routing to transmit data even
when source and destination nodes are out of their transmission ranges  cooperation can be
achieved by associating a credit balance with each node  so that nodes use credits to pay for
sending their own traffic  and earn credits by forwarding traffic from other nodes to compensate bandwidth and power consumptionsee  for instance  the work by gobel  krzesinski 
and mandjes        and the references therein  consider a setting where the nodes s         sn
are willing to transmit some data in an ad hoc network  in a given configuration of the
network  the nodes r         rm can be used to forward these data  in particular  whenever
si and rj   with i           n  and j           m   are within their transmission ranges  we
denote by ci j the credit paid by si to transfer the data via rj a large enough value for ci j
can be used to state that the transmission is not possible  the resulting cost problem can
be modeled via an allocation scenario where i      and where the valuation vector is such
that wi  rj     ci j   for each i           n  and j           m   thus  maximizing the social
welfare amounts to minimizing the overall credits paid by source nodes 
it is easily seen that  even if there is no private information and everything is public 
fairness issues emerge in this context  too  indeed  different sources may want to use the
same routing node to transfer data  for instance  in a simple setting where m     and
n     and where r  is the most preferred routing node for both s  and s   i e   c      c   
and c      c       the node that is forced to transfer data via r  might perceive the
given allocation as unfair  this suggests that the credits paid by source nodes should be
adjusted via payment rules that  in our proposal  are based on the shapley value of the
coalitional games described in section   
a setting similar to the one discussed above emerges in wireless cooperative file sharing
systems  where mobile subscribers cluster together by downloading  portions of  files of
interest over long range cellular links  and by exchanging them over short range radio communications in a wireless local area network  these systems are cooperative environments 

   

fimechanisms for fair allocation problems

whose benefits can be appreciated not only in terms of increased throughput and reduced
energy consumption  but also in terms of economic advantages both for users and content
providers  in order to be effective  however  fair allocation protocols have to be designed 
whose goal is to encourage cooperation  see  e g   militano  iera    scarcello        

references
abdulkadiroglu  a   sonmez  t     unver  m  u          room assignment rent division 
a market approach  social choice and welfare             
agotnes  t   van der hoek  w   tennenholtz  m     wooldridge  m          power in
normative systems  in proc  of aamas    pp         
alcalde  j     barbera  s          top dominance and the possibility of strategyproof stable
allocations to matching problems  economic theory            
alkan  a   demange  g     gale  d          fair allocation of indivisible goods and criteria
of justice  econometrica                 
andersson  t          a general strategy proof fair allocation mechanism revisited  economics bulletin                   
andersson  t     svensson  l  g          non manipulable assignment of individuals to
positions revisited  mathematical social sciences                 
andersson  t   svensson  l  g     ehlers  l          budget balance  fairness and minimal
manipulability  working papers          lund university  department of economics 
aragones  e          a derivation of the money rawlsian solution  social choice and
welfare             
archer  a     tardos  e          frugal path mechanisms  acm transactions on algorithms         
auletta  v   de prisco  r   penna  p     persiano  g          the power of verification for
one parameter agents  journal of computer and system sciences             
auletta  v   de prisco  r   penna  p   persiano  g     ventre  c          new constructions
of mechanisms with verification  in proc  of icalp    pp         
auletta  v   penna  p   persiano  g     ventre  c          alternatives to truthfulness are
hard to recognize  autonomous agents and multi agent systems                 
aumann  r  j     maschler  m          game theoretic analysis of a bankruptcy problem
from the talmud  journal of economic theory                 
bachrach  y   markakis  e   resnick  e   procaccia  a  d   rosenschein  j  s     saberi  a 
        approximating power indices  theoretical and empirical analysis  autonomous
agents and multi agent systems             
bachrach  y     rosenschein  j  s          coalitional skill games  in proc  of aamas   
pp           
bachrach  y     rosenschein  j          power in threshold network flow games  autonomous agents and multi agent systems                 

   

figreco   scarcello

bachrach  y   zuckerman  m   wooldridge  m     rosenschein  j          proof systems
and transformation games  annals of mathematics and artificial intelligence         
    
bevia  c          fair allocation in a general model with indivisible goods  review of
economic design            
bouveret  s     lang  j          efficiency and envy freeness in fair division of indivisible goods  logical representation and complexity  journal of artificial intelligence
research             
brams  s  j     kilgour  d  m          competitive fair division  journal of political
economy                  
brandt  f   conitzer  v     endriss  u          multiagent systems  chap  computational
social choices  mit press 
caragiannis  i   elkind  e   szegedy  m     yu  l          mechanism design  from partial
to probabilistic verification  in proc  of ec    pp         
clarke  e          multipart pricing of public goods  public choice          
deng  x     papadimitriou  c  h          on the complexity of cooperative solution concepts  mathematics of operations research             
dobzinski  s     dughmi  s          on the power of randomization in algorithmic mechanism design  in proc  of focs    pp         
dunne  p  e          extremal behaviour in multiagent contract negotiation  journal of
artificial intelligence research           
dunne  p  e   wooldridge  m     laurence  m          the complexity of contract negotiation  artificial intelligence                  
endriss  u   maudet  n   sadri  f     toni  f          negotiating socially optimal allocations of resources  journal of artificial intelligence research             
feige  u     tennenholtz  m          mechanism design with uncertain inputs   to err is
human  to forgive divine   in proc  of stoc    pp         
ferrante  a   parlato  g   sorrentino  f     ventre  c          fast payment schemes for
truthful mechanisms with verification  theoretical computer science              
gobel  j   krzesinski  a     mandjes  m          incentive based control of ad hoc networks 
a performance study  computer networks                    
greco  g     scarcello  f          fair division rules for funds distribution  the case of the
italian research assessment program  vqr             intelligenza artificiale        
     
green  j     laffont  j          characterization of satisfactory mechanisms for the revelation of preferences for public goods  econometrica                 
groves  t          incentives in teams  econometrica             
haake  c  j   raith  m  g     su  f  e          bidding for envy freeness  a procedural
approach to n player fair division problems  social choice and welfare             
    
   

fimechanisms for fair allocation problems

hurwicz  l          on the existence of allocation systems whose manipulative nash equilibria are pareto optimal  unpublished paper  presented at the third world congress
of the economic sosciety  toronto 
jain  k     vazirani  v          applications of approximation algorithms to cooperative
games  in proc  of stoc    pp         
jalali  a   padovani  r     pankaj  r          data throughput of cdma hdr a high efficiencyhigh data rate personal communication wireless system  in proc  of ieee vtc   
vol     pp           
kalai  e     samet  d          on weighted shapley values  discussion papers      northwestern university  center for mathematical studies in economics and management
science 
klijn  f          an algorithm for envy free allocations in an economy with indivisible
objects and money  social choice and welfare                 
krysta  p     ventre  c          combinatorial auctions with verification are tractable  in
proc  of esa    pp       
liben nowell  d   sharp  a   wexler  t     woods  k          computing shapley value in
supermodular coalitional games  in proc  of cocoon    pp         
lindner  c          a market affected sealed bid auction protocol  in proc  of setn   
pp         
lipton  r  j   markakis  e   mossel  e     saberi  a          on approximately fair allocations of indivisible goods  in proc  of ec    pp         
maniquet  f          a characterization of the shapley value in queueing problems  journal
of economic theory                 
maskin  e          on the fair allocation of indivisible goods  pp          macmillan 
meertens  m   potters  j     reijnierse  h          envy free and pareto efficient allocations
in economies with indivisible goods and money  mathematical social sciences         
       
militano  l   iera  a     scarcello  f          a fair cooperative content sharing service 
computer networks                   
mishra  d     rangarajan  b          cost sharing in a job scheduling problem  social
choice and welfare                 
moulin  h          an application of the shapley value to fair division with money  econometrica                 
moulin  h          incremental cost sharing  characterization by coalition strategyproofness  social choice and welfare                 
moulin  h          fair division and collective welfare  mit press 
moulin  h     shenker  s          strategyproof sharing of submodular costs  budget balance
versus effciency  economic theory                 
nagamochi  h   zeng  d  z   kabutoya  n     ibaraki  t          complexity of the minimum base game on matroids  mathematics of operations research             
   

figreco   scarcello

nisan  n     ronen  a          algorithmic mechanism design  games and economic
behavior             
nisan  n   roughgarden  t   tardos  e     vazirani  v  v          algorithmic game
theory  cambridge university press  cambridge  uk 
ohseto  s          implementing egalitarian equivalent allocation of indivisible goods on
restricted domains  economic theory                    
osborne  m  j     rubinstein  a          a course in game theory  the mit press 
cambridge  ma  usa 
papadimitriou  c  h          computational complexity  addison wesley 
pathak  a p   s  t          comparing mechanisms by their vulnerability to manipulation 
the american economic review                  
penna  p     ventre  c       a   collusion resistant mechanisms with verification yielding
optimal solutions  acm transaction on computation theory             
penna  p     ventre  c       b   optimal collusion resistant mechanisms with verification  games and economic behavior  in press  electronically available with doi
        j geb             
porter  r   shoham  y     tennenholtz  m          fair imposition  journal of economic
theory                  
potthoff  r  f          use of linear programming to find an envy free solution closest
to the bramskilgour gap solution for the housemates problem  group decision and
negotiation             
quinzii  m          core and competitive equilibria with indivisibilities  international
journal of game theory           
sakai  t          fairness and implementability in allocation of indivisible objects with
monetary compensations  journal of mathematical economics                 
sandholm  t          contract types for satisficing task allocation  i theoretical results  in
aaai spring symposium  satisficing models 
schrijver  a          combinatorial optimization  polyhedra and efficiency  springerverlag 
shioura  a   sun  n     yang  z          efficient strategy proof fair allocation algorithms 
journal of the operations research society of japan                 
shoham  y     leyton brown  k          multiagent systems  cambridge university press 
su  f          rental harmony  sperners lemma in fair division  american mathematical
monthly              
svensson  l  g          large indivisibles  an analysis with respect to price equilibrium
and fairness  econometrica          pp         
svensson  l  g          coalitional strategy proofness and fairness  economic theory     
       

   

fimechanisms for fair allocation problems

tadenuma  k     thomson  w          no envy and consistency in economies with indivisible goods  econometrica                 
tadenuma  k     thomson  w          the fair allocation of an indivisible good when
monetary compensations are possible  mathematical social sciences                 
tadenuma  k     thomson  w          games of fair division  games and economic
behavior                
thomson  w          fair allocation rules  in kenneth j  arrow  a  s     suzumura  k 
 eds    handbook of social choice and welfare  vol     pp          elsevier 
valiant  l  g       a   the complexity of computing the permanent  theoretical computer
science                
valiant  l  g       b   the complexity of enumeration and reliability problems  siam
journal on computing                
vickery  w          counterspeculation  auctions and competitive sealed tenders  journal
of finance      
willson  s  j          money egalitarian equivalent and gain maximin allocations of indivisible items with monetary compensation  social choice and welfare             
yang  z          an intersection theorem on an unbounded set and its application to the fair
allocation problem  journal of optimization theory and applications              
yengin  d          egalitarian equivalent groves mechanisms in the allocation of heterogenous objects  social choice and welfare                 
young  h  p          monotonic solutions of cooperative games  international journal of
game theory           
young  h  p          equity in theory and practice  princeton university press 

   

fi