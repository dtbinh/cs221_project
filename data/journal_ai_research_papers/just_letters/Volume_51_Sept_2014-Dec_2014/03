journal artificial intelligence research                  

submitted        published       

reasoning topological cardinal direction relations
  dimensional spatial objects
anthony g  cohn

a g c ohn   leeds   ac   uk

school computing  university leeds  uk
faculty engineering information technology 
university technology sydney  australia

sanjiang li

anjiang  l   uts   edu   au

amss uts joint research lab 
centre quantum computation   intelligent systems 
university technology sydney  australia
college computer science  shaanxi normal university  china

weiming liu

l iu w eiming   baidu   com

baidu  china  co   ltd   shanghai  china

jochen renz

j ochen  r enz   anu   edu   au

research school computer science 
australian national university  australia

abstract
increasing expressiveness qualitative spatial calculi essential step towards meeting
requirements applications  achieved combining existing calculi way
express spatial information using relations multiple calculi  great challenge
develop reasoning algorithms correct complete reasoning combined
information  previous work mainly studied cases interaction combined
calculi small  one two calculi simple  paper tackle
important combination topological directional information extended spatial objects 
combine best known calculi qualitative spatial reasoning  rcc  algebra
representing topological information  rectangle algebra  ra  cardinal direction
calculus  cdc  directional information  consider two different interpretations rcc 
algebra  one uses weak connectedness relation  uses strong connectedness relation 
interpretations  show reasoning topological directional information decidable remains np  computational complexity results unveil significant differences
ra cdc  weak strong rcc  models  take combination
basic rcc  basic cdc constraints example  show consistency problem
p use strong rcc  algebra explicitly know corresponding basic ra
constraints 

   introduction
qualitative spatial reasoning  qsr  multi disciplinary research field aims establishing
expressive representation formalisms qualitative spatial knowledge providing effective reasoning mechanisms  originating allens work        temporal interval relations  qsr
widely acknowledged ai approach spatial knowledge representation reasoning 
applications ranging natural language understanding  davis         robot navigation  shi 
jian    krieg bruckner        falomir         geographic information systems  giss   egenhofer
c
    
ai access foundation  rights reserved 

fic ohn   l   l iu     r enz

  mark         sea navigation  wolter et al          high level interpretation video data  sridhar  cohn    hogg        cohn  renz    sridhar         refer reader work cohn
renz         wolter wallgrun        information 
qualitative approach usually represents spatial information introducing relation model
domain spatial entities  could points  line segments  rectangles  arbitrary
regions  literature  relation model often called qualitative calculus  ligozat  
renz         contains finite set jointly exhaustive pairwise disjoint  jepd  relations
defined domain  past three decades  dozens spatial relation models
proposed literature  cohn   renz        chen  cohn  liu  wang  ouyang    yu        
many qualitative calculi approximate spatial entities points  convenient
representing spatial direction  distance positions  providing extent objects
small compared distance apart   inappropriate far shapes and or topology
spatial objects concerned  paper  represent spatial entities   dimensional
bounded regions real plane  may holes multiple connected components 
literature  spatial calculi focus one single aspect space  e g  topology  direction  distance  position  shape  topological relations relations invariant
homeomorphisms scale  rotation  translation  widely acknowledged topological relations crucial importance  one influential formalism topological relations
region connection calculus  rcc   randell  cui    cohn         based one primitive binary
connectedness relation  set eight jepd topological relations defined rcc 
calculus known rcc  algebra  according different interpretations connectedness 
calculus may different variants  paper  say two  closed  regions weakly connected share least common point  say strongly connected intersection
least one dimensional  accordingly  address two resulting rcc  algebras weak
strong rcc  algebras respectively  convenience  denote weak rcc  algebra
rcc   strong one rcc    
importance distinction strong weak rcc  becomes clear analysing
different ways defining neighbourhood pixels commonly used computer vision   connectedness refers pixels horizontally vertically connected pixel 
  connectedness includes diagonally neighbouring pixels well  distinction corresponds
nicely distinction strong weak rcc    connectedness considers connections point    connectedness considers connections along line  which onedimensional   therefore  use strong weak rcc  similar way use     connectedness  depending requirements application hand 
rcc  algebra represents topological information spatial objects  many
practical applications  however  kinds relations often used together topological
relations  example  recommending restaurant dined common give
descriptions restaurant city centre  west central station  nearby
mcdonalds 
among aspects spatial information topology  directional relations
perhaps important  two well known formalisms cope directional
relations extended spatial objects  one rectangle algebra  ra   balbiani  condotta 
  farinas del cerro         cardinal direction calculus  cdc   goyal   egenhofer 
      skiadopoulos   koubarakis         representing direction primary object
reference object  ra approximates reference object primary object
   

fir easoning opological c ardinal irection r elations

minimum bounding rectangles  mbrs   relates two objects interval relations
projected intervals  hand  cdc approximates reference object mbr 
leaving primary object unchanged  cdc     basic relations  ra    
basic relations            basic cdc relations intersect one one basic
ra relation and  hence  contained unique basic ra relation  therefore  cdc sense
expressive ra 
central reasoning problem qsr consistency problem  instance consistency
problem set constraints  xy   x  spatial variables  qualitative
relation qualitative calculus  say consistent satisfiable exists instantiation spatial variables constraints satisfied  without loss generality 
assume unique constraint two variables  note x
related  add  x   y  without changing consistency    universal relation
calculus  unlike classical csps  domain spatial variable usually infinite  may
undecidable determine consistency binary csps infinite domains  hirsch        
past three decades  qsr made significant progress solving consistency problems
variety qualitative calculi  renz   nebel        renz        balbiani et al         zhang 
liu  li    ying        skiadopoulos   koubarakis        liu  zhang  li    ying        liu   li 
      
order bring spatial reasoning theory closer practical applications  necessary
combine multiple aspects spatial information  growing number works devoted
combining topological rcc relations aspects spatial information  e g  qualitative size
 gerevini   renz         cardinal directions  sistla   yu        li      a        liu  li    renz 
      li   cohn         connectivity  kontchakov  nenov  pratt hartmann    zakharyaschev 
       convexity  davis  gotts    cohn        schockaert   li         betweenness  schockaert
  li         gravity  ge   renz         recently  wolfl westphal        empirically
compared two approaches combination binary qualitative constraint calculi general 
interesting works combining spatial temporal formalisms  gerevini   nebel 
      gabelaia  kontchakov  kurucz  wolter    zakharyaschev         moreover  subareas
formalisms constraint research  combination formalisms discussed long time
strong results  see e g  work bodirsky kara         jonsson
krokhin        
current paper considers full combination rcc  rcc   two directional
relation models ra cdc  identify joint satisfaction problem  jsp  main reasoning
task  given network topological  rcc  rcc     constraints network directional
 ra cdc  constraints   assuming involve set variables  jsp
decide joint network   satisfiable  note use    instead   indicate
variables 
since topological directional information independent  possible joint
network   unsatisfiable satisfiable  solving joint satisfaction
problem general harder solving independently  paper  interpret directional relations terms ra cdc  interpret topological relations terms weak
strong rcc  algebras  basic constraints involved  show jsp
basic  weak strong  rcc  basic ra networks solved polynomial time 
jsp basic  weak strong  rcc  basic cdc networks np complete  furthermore 
show that  three calculi  viz  rcc   ra  cdc  combined together  jsp
   

fic ohn   l   l iu     r enz

basic rcc   networks basic ra cdc networks tractable  since non basic constraints
always backtracked basic constraints  results show jsp  weak strong 
rcc  ra cdc np 
paper significant extension conference paper  liu et al          combination basic weak rcc  ra cdc constraints considered  paper considers
combination rcc   ra and or cdc constraints  addition  extend tractable
results two maximal tractable subsets rcc  one large tractable subset ra  paper
closely related work li         li cohn         combination
weak rcc  algebra two subalgebras  viz  dir  dir    ra considered 
    application scenario
example demonstrating usefulness results  use angry birds domain 
similar representation reasoning tasks applied whenever use computer vision
detect objects image video  angry birds popular computer game gained increasing
attention within ai community  see e g  work zhang renz         angry birds
ai competition ai challenge problem  goal build intelligent agent
play angry birds better best human players  see http   aibirds org  

figure    screenshot angry birds game 
angry birds domain includes number building blocks different materials  sizes
shapes  even holes  building blocks form complicated spatial structures
protect pigs attacking birds  see figure     ai agents able play game
humans do  get visual information game form screenshots 
competition organisers provide basic computer vision software detects minimum
bounding boxes objects screenshot well object category  given
set rectangles form minimum bounding boxes actual objects  see figure    
object solid physical object cannot overlap another object  only rcc  relations dc
ec possible objects   bounding boxes related relation
rectangle algebra relation cdc  instead considering spatial relations
single objects  take account sets objects  example  set objects
directly indirectly supported particular object  set objects provide
cover particular pig  set wooden blocks 
   

fir easoning opological c ardinal irection r elations

notations
         
d  r  s 

w
x  y  z vi   vj
   
a  b  c 
b    q    c 
h
p  q
h
ix  a   iy  a 
m a 

   mi  ni  
    
x           
    
 
jsp s   
ra t  
rcc  d 
ccp vi   vj  

meanings
relations  usually basic relations  page     
relations  usually non basic relations  page     
converse relation  page     
weak composition  page     
spatial variable interval variable  page     
network constraints  page     
bounded regions  page     
three maximal tractable subclasses rcc   page     
points  page     
unique maximal tractable subclass ia  page     
x  y  projective intervals region  page     
minimal bounding rectangle  mbr  region  page     
ra relation induced two ia relations    page     
n tuple regions mi form solution network  page     
consistent pair basic cdc relations  page     
x  y  projective interval relations       page     
ra relation x           induced       page     
combination two networks set variables  page     
joint satisfaction problem subclasses  page     
ra relation induced rcc  relation  page     
rcc  relation induced ra relation  page     
two variables vi   vj common conflict point relation  page     
table    notations 

sets building blocks form spatial regions general sense used rcc 
brcc   wolter   zakharyaschev         include regions multiple disconnected
pieces regions holes  particular  means rcc  relation possible two
sets objects  dc ec 
given spatial configurations angry birds domain  use rcc  relations well
ra cdc relations represent spatial information  sets of  objects minimum
bounding boxes extracted screenshots  results paper allow us accurately reason combined information represented using rcc   ra  cdc  important
reasoning tasks benefit results include  example  inferring configuration
changes hit bird inferring whether given representation consistent whether
stable gravity  zhang   renz         algorithm predicting configuration
blocks shot might work envisaging individual possible block positions might
mutually globally inconsistent  algorithm reasoning consistency
predictions therefore desirable 
remainder paper proceeds follows  section   introduces basic notions  important
examples  essential results qualitative calculi  section   describes joint satisfaction
problem considers simple example combination ra cdc constraints  sections
    consider computational complexity combination weak and  respectively  strong
   

fic ohn   l   l iu     r enz

rcc  ra  section   discusses computational complexity combination weak
strong rcc  cdc  conclude paper section   give proofs major computational complexity results appendices  convenience reader  table   summarises
notations used paper 

   qualitative calculi
establishment proper qualitative calculus key success qualitative approach temporal spatial reasoning  section introduces basic notions qualitative calculi recalls rcc  algebra  rectangle algebra  cardinal direction calculus 
addition  summarise essential results used main part
paper 
    basic notions
let u domain temporal spatial entities  rel u  set binary relations u 
usual relational operations intersection  union  complement  rel u  boolean
algebra  finite set b nonempty binary relations u jointly exhaustive pairwise disjoint
 jepd short  two entities u related one one relation b  write hbi
subalgebra rel u  generated b  clearly  relations b atoms algebra hbi 
call hbi qualitative calculus u  call relations b basic relations calculus 
notation  note relation hbi union set basic relations  paper 
write r                 k   r union basic relations              k   convenience 
regard basic relation singleton    
two relations r  qualitative calculus   hbi  write r converse r 
defined
r     x  y  u u    y  x  r  

   

write r w smallest relation contains r s  usual composition r
s  defined
r     x  y  u    z u  x  z  r  z  y  s  
call r w weak composition r  duntsch  wang    mccloskey        
constraint hbi form  xry   r relation hbi  call  xry  basic
constraint r basic relation b  important reasoning problem qualitative calculus
determine satisfiability consistency network    vi rij vj  ni j   constraints hbi 
satisfiable  or consistent  instantiation  ai  ni   u  ai   aj   rij
holds   i  j n 
given two constraint networks    vi rij vj  ni j      vi tij vj  ni j     say refines
tij subset rij   i  j n  consistent scenario consistent basic
network refines   clear consistent iff consistent scenario 
hand  given n tuple entities  ai  ni   u  write ij basic relation fixed qualitative
calculus relates ai aj      vi ij vj  ni j   consistent scenario call
scenario  or basic constraint network  induced  ai  ni    
   

fir easoning opological c ardinal irection r elations

consistency constraint network partially determined path consistency algorithms  say network    vi rij vj  ni j   path consistent

rji   rij
 

   rij rik w rkj

   

i  j k    i  j  case basic network  equivalent saying every
subnetwork involving three variables consistent 
path consistency enforced cubic time  vilain   kautz         is  apply
path consistency algorithm constraint network   cubic time algorithm
terminate either get empty constraint  and hence know inconsistent  transform
equivalent path consistent network  basic networks  easy see consistency
implies path consistency  opposite proposition always hold 
following subsections recall qualitative topological directional calculi
discussed paper 
    region connection calculus rcc 
region connection calculus  rcc   randell et al         first order theory based binary
connectedness relation  standard rcc models arise topological spaces  paper 
concerned interpretations rcc real plane  provides arguably
important model rcc  another reason lies directional calculi considered paper
defined real plane  plane region  or region  nonempty regular closed subset
real plane  consider bounded regions  cardinal directions involve bounded
regions  regions could multi pieces and or holes  
one standard interpretation rcc based whiteheadean connectedness  whitehead 
      plane regions  two regions connected common point  connectedness may considered weak many cases  example  worm cannot pass
interior one apple another  touch point  without becoming visible exterior worms point view might well say apples sufficiently
connected   borgo  guarino    masolo        p       paper  consider stronger
connectedness  two regions regarded connected intersection least onedimensional  li  liu    wang         case rectangular grid spatial primitive entities 
already noted  strong weak connectedness correspond to  respectively  important notion
     neighbourhood pixels commonly used computer vision 
interpretations  relations table   converses tpp ntpp form
jepd set  write brcc  brcc   two sets  call boolean algebras generated
brcc  brcc     respectively  weak strong rcc  models  written rcc  rcc    
strong connectedness considered borgo et al           cohn varzi        
li et al           easy see that  relations  strong connectedness contained weak
connectedness  table   illustrates configuration  the  nd left  instance ec
rcc  instance dc rcc     configuration  the  nd right 
instance tpp rcc  instance ntpp rcc    
   stress restriction rcc bounded plane regions affect complexity reasoning
rcc   every consistent rcc  network solution rcc model  li      b  

   

fic ohn   l   l iu     r enz

relation
equals
disconnected
externally connected

symb 
eq
dc
ec

partially overlap

po

tangential proper part
non tangential proper part

tpp
ntpp

definition  weak 
a b
ab 
b    b  
b   
  b   b
b   b
b

definition  strong 
a b
dim a b   
dim a b     
b   
  b   b
b dim a b     
b dim a b   

table    set basic rcc  rcc   relations  a  b two plane regions x   x  dim x 
denote  respectively  interior  boundary  dimension x  note notational convenience set dim       

remark    far consistency realisations concerned  li      b  shown
consistent rcc  network solution rcc model  cubic realisation algorithm described used construct solution weak strong rcc  models 
implies particular rcc  network solution weak rcc  model iff
solution strong rcc  model  show paper  is  however  case
cardinal directions combined topological relations 
following  recall important properties three maximal tractable subclasses
b
h    c    q  rcc  identified renz         complete list relations subclasses
found appendix work renz        
lemma    suppose r non basic rcc  relation r  dc  ec  po     
    r q  iff r either  tpp  ntpp   tpp   ntpp   
b  iff r q  one following relations
    r h
 tpp  eq    tpp  ntpp  eq    tpp   eq    tpp   ntpp   eq  
b    either  ntpp  eq   ntpp   eq  
    r c  iff r h
note lemma define subclasses  particular  subclasses
include rcc  relations r r  dc  ec  po   
   
renz shows consistent scenario constructed o n    time pathconsistent network one three maximal tractable subclasses 
   

fir easoning opological c ardinal irection r elations

theorem    renz         consistent scenario path consistent network constraints
b    c    q  computed o n    time  replacing every constraint  vi rvj  
h
 vi base r  vj     base r  basic relation obtained follows 
    r b  base r    r 
    else  dc  r  base r     dc  
b    base r     ec  
    else  ec  r   q    h
    else  po  r  base r     po  
    else  ntpp  r   c    base r     ntpp  
    else  tpp  r  base r     tpp  
    else base r    base r   
follows  call canonical consistent scenario  
      r ealisation basic rcc  n etworks
known that  basic rcc  networks  path consistency implies consistency  nebel        
next give short description cubic realisation algorithm proposed li      b   need
devise similar algorithm later combination cases 
given basic rcc  network    vi ij vj  ni j     suppose path consistent  ntpp chain
defined series variables vi    vi      vik vis ntppvis  
       k    ntpp level l i  variable vi defined maximum length
ntpp chains contained ends vi  
realisation constructed follows  variable may interpreted bounded
region multiple pieces  without loss generality  assume  vi eqvj  
  j  first define variable vi finite set xi control points follows  i 
introduce point pi vi   vi ecvj vi povj   introduce point pij vi   vi tppvj
vi ntppvj   put xi points xj   expand point p xi little obtain
square s p    squares pairwise disjoint  then  taking union squares  obtain
instantiation bounded regions vi   works ec ntpp constraints 
modifications needed cope constraints  cf  li      b appendix c
paper  
    interval algebra rectangle algebra
subsection  recall interval algebra  ia   allen        rectangle algebra  ra   balbiani et al          ia qualitative calculus generated    basic relations closed
intervals real line shown table    write
bint    b  m  o  s  d  f  eq  fi  di  si  oi  mi  bi 

   

set basic ia relations  ligozat        defines dimension  basic interval relation
  minus number equalities appearing definition relation  see table     is 
   stress notion dimension different topological dimension 

   

fic ohn   l   l iu     r enz

basic relations
dim eq       dim m    dim s    dim f       dim b    dim o    dim d      

   

non basic relation r define
dim r    max dim     basic relation r  

relation

meets
overlaps
starts

finishes
equals

symb 
b




f
eq

conv 
bi
mi
oi
si
di

eq

dim 
 
 
 
 
 
 
 

   

definition
x   
x   
x     x     
x     x     
  x   x     
  x   x     
x     x     

 i 

 ii 

table    ia basic relations  i  definitions  ii  conceptual neighbourhood graph  x  
 x   x        y       two intervals 
nebel burckert        shown unique maximal tractable subclass ia
contains basic relations  subclass  written h  known ord horn class 
using conceptual neighbourhood graph  cng  ia  freksa         ligozat        gives
geometrical characterisation ord horn relations  consider cng ia  shown table  
 ii   partially ordered set  bint      by interpreting relation smaller right upper
neighbours         bint       write          set basic interval relations
      call relation convex interval relation  ia relation r called
pre convex obtained convex relation removing one basic relations
dimension lower r  example   o  eq     o  s  fi  eq  convex relation  o  eq 
pre convex relation  ligozat shown ord horn relations precisely pre convex relations 
nebel burckert show every path consistent ia network h consistent  furthermore  construct consistent scenario every path consistent ia network h
quadratic time 
suppose r ia relation let
rcore     bint   dim     dim r   r  

   

    clear rcore    eq  iff r    eq   rcore   r  b  o  d  di  oi  bi  r
 b  o  d  di  oi  bi  nonempty  rcore   r    eq  otherwise 
lemma     renz        suppose    vi rij vj  ni j   path consistent ia network h  let
core
core    vi rij
vj  ni j    

core path consistent 
   

   

fir easoning opological c ardinal irection r elations

table    ii  easy see pre convex relation r dimension   iff either r
  dim basic relation r contained  s  eq  si   fi  eq  f   consequence  know
corollary    suppose    vi rij vj  ni j   path consistent network h 
v  n
consistent scenario    vi rij
j i j   following property 
    dim r   
dim rij
ij
   eq  r    eq   r    m  r    m   r    mi  r    mi  
rij
ij
ij
ij
ij
ij

result shows that  path consistent network h  construct quadratic
time consistent scenario  

 i 

 ii 

figure     i  minimum bounding rectangle m a  region a   ii  ra relation b
o 
ia naturally extended regions plane  assume orthogonal basis euclidean plane  bounded region a  minimum bounding rectangle  mbr   denoted m a  
smallest rectangle contains whose sides parallel axes basis 
write ix  a  iy  a  as  respectively  x  y projections m a   basic rectangle
relation two bounded regions a  b iff  ix  a   ix  b    iy  a   iy  b    
  two basic ia relations  see figure   illustration   write brec set
basic rectangle relations  i e  
brec         bint   

   

    different basic rectangle relations brec   rectangle algebra  ra  algebra
generated relations brec  balbiani et al         
following definitions used later 
definition    suppose       basic ra relation  say   meet relation
       m  mi   corner relation        m  mi  s  si  f  fi  eq   general  say
non basic ra relation r             k    k    corner relation    k 
corner relation 
definition    meet relation corner relation  furthermore  easy see basic
ra relation   meet relation iff  every two rectangles r  r   r  r      r r 
singleton plane  corner relation iff every two rectangles r  r   r  r    have 
least  corner point common 
following lemma straightforward 
   

fic ohn   l   l iu     r enz

lemma    let    vi  rij sij  vj  ni j   ra network  rij sij arbitrary ia
relations  satisfiable iff projections x    xi rij xj  ni j      yi sij yj  ni j  
satisfiable ia networks 
corollary   lemma
lemma    suppose    vi rij vj   path consistent ra network h h 
consistent scenario    vi ij vj  
ij   meet relation iff rij   meet basic relation 
ij corner relation iff rij consists basic corner relations 
consequence  know h h tractable subclass ra  maximal tractable subclass
identified ra  larger tractable subclass ra identified  balbiani et al  
      
next show path consistent basic ia ra network canonical solution
following sense 
  n
definition    canonical tuple intervals  rectangles    suppose     m
  mi   i   n tuple
intervals  let e m  set values end points intervals m  say
canonical iff e m                tuple rectangles  mi  ni   canonical iff x 
y projections   ix  mi   ni    iy  mi   ni     canonical tuples intervals  solution
ia  ra  respectively  network called canonical solution canonical tuple intervals
 rectangles  respectively  

basic satisfiable ia network  compute total order end points  hence
obtain canonical solution  by assigning   first end point    second  etc   
gives us following proposition 
proposition     suppose satisfiable basic ia  ra  constraint network  unique
canonical solution 
    cardinal direction calculus
cardinal direction calculus  cdc  proposed goyal egenhofer         given
bounded region b real plane  extending four edges m b   partition plane
nine tiles  denoted bij    i  j     see figure    i  illustration 
primary region reference region b  cdc relation b  denoted ab  
encoded     boolean matrix  dij   i j    dij     iff bij     where
interior a   example  basic cdc relations ab ba regions a  b
figure   ii  represented following matrices 




     
     
  ab             ba          
   
     
     
cdc relation zero boolean matrix             basic relations
cdc  denote set bcdc   pair basic cdc relations      called consistent pair
   

fir easoning opological c ardinal irection r elations

 i 

 ii 

 iii 

figure    illustrations  i  nine tiles reference region   ii   iii   two solutions
cdc basic constraint network  v  v    v  v     defined eq      

constraint network  v  v    v  v    solution  call weak converse
     consistent pair  figure   shows basic cdc relation may one weak
converse  therefore  need relation b relation b give complete
description  in terms cdc calculus  directional information two regions a  b 

 i 

 ii 

figure    illustration two consistent cdc pairs  i   ab   ba    ii   a  b    b     ab  
a  b  ba    b  a    note rectangle relation a  b
a    b  o 
following show strong connection cdc ra relations 
definition      zhang et al         liu et al         pair basic cdc relations      
define x projective interval relation       written x       disjunction basic
ia relations instance x projection solution  v  v    v  v    
i e 
x          bint    m    m     m    m     m    m     ix  m     ix  m        
similar definition applies y direction 
note      consistent pair  x           empty relation 
     consistent pair  prove  liu et al         x   or y   projective interval
   

fic ohn   l   l iu     r enz

relation ia relation r following property
r    b  m  r    bi  mi   r basic ia relation  o  s  d  f  eq  oi  si  di  fi  

    

two projective interval relations combined ra relation 
definition      zhang et al         liu et al         pair basic cdc relations      
call        x           ra relation induced       general  basic cdc
constraint network    vi ij vj  ni j     call       vi rij vj  ni j   ra constraint network
induced   rij    ij   ji   
note      necessarily basic ra relation       consistent  know
ra relation      form     ia relations satisfy       furthermore 
solution  v  v    v  v    always solution  v      v     note solution
 v      v    necessarily solution  v  v    v  v    
take consistent pair       defined     example  figure    ii   iii  show two
solutions  a  b   a    b    basic cdc constraint network  v  v    v  v     implies
definition x       contains  b  m   easy see definition x      
contains basic ia relations x          b  m   similarly  show        
 d   shows consistent pair       corresponds basic ra relations  viz 
b d 
      c anonical olutions basic cdc n etworks
ia ra  consistent cdc networks canonical solutions 
definition     regular solution  zhang et al         liu et al          suppose    mi  ni  
solution basic cdc constraint network   say maximal m i mi holds
solution  m i  ni   m mi     m m i    say regular maximal
 m mi   ni   canonical tuple rectangles 
basic cdc network general many regular solutions  following result 
proposition     let basic cdc network  suppose basic ra network refines
    induced ra network   determine cubic time whether solution
satisfies   moreover  solution  unique regular solution
satisfies   furthermore  unique regular solution constructed cubic time 
proof  proof similar proposition    work liu et al           sketch
given appendix a 
proof result  see region mi regular solution  mi  ni  
consists unit cells  i e  rectangles form  i  i    j  j      i  j z  canonical
solution   i e  region mi cell c  either c mi c mi    
basic cdc network   may exist exponentially many different basic ra networks
refine     hence  may exponentially many different regular solutions  see figure    a  example network   however  verify solution  need
prove solution special basic ra network refines     liu et al  
      proposition       therefore  consistency determined cubic time  and 
consistent  regular solution constructed cubic time  liu et al         
   special network called meet free basic ra network work liu et al          

   

fir easoning opological c ardinal irection r elations

   joint satisfaction problem
preparatory introduction basic notions essential results qualitative calculi 
ready describe joint satisfaction problem 
let m  m  two qualitative calculi domain u  suppose si subclass
mi  i          write jsp s    s    joint satisfaction problem  gerevini   renz        li 
      s  s   
suppose    vi tij vj  ni j   constraint network s       vi dij vj  ni j  
constraint network s  involving variables  say   instance
jsp s    s     joint satisfaction problem first considered rcc  qualitative size
calculus  identical point algebra vilain   kautz        gerevini renz        
moreover  shown consistency joint network approximated polynomial bipath consistency algorithm  li cohn        recently showed bipath consistency
equivalently expressed below 
definition     let   joint constraint network m  m       vi tij vj  ni j  
   vi dij vj  ni j     say   bi closed dij tij nonempty
basic relation tij   basic relation dij     i  j n  here regard
relation subset u u   bi closed joint network   bipath consistent
path consistent 
informally speaking  joint constraint network bi closed basic relation given
relation one calculi consistent corresponding relation calculus 
simple example joint satisfaction problem  consider combination ra
cdc next subsection 
    combination ra cdc
let r basic cdc relation  r   set theoretic converse  or inverse  relation r
 cf        may representable relation algebra cdc  cicerone   di felice        liu
et al          is  r cannot represented union several basic cdc relations 
sense  say cdc closed converse  recently  schneider et al         proposed
variant cdc  called object interaction model  oim   closed converse 
two bounded regions a  b  oim divides plane  l        l       tiles
extending edges m a  m b   l      l      numbers horizontal
and  respectively  vertical lines  clear   l    l    since edges m a  m b  may
coincide  oim relation ab represented l  l  matrix  also written ab   considering
existence interior points and or b corresponding bounded tiles  let bounded
tile  set entry corresponding matrix ab   interior point
either b  set       respectively  interior point  b  respectively 
interior point b  a  respectively   set   otherwise  converse relation
basic oim relation basic oim relation  particular  basic oim relation ba b
obtained swapping occurrences     ab  
example  oim relations regions figure    ii   iii  respectively




     
   
ab           a  b         
     
   
   

fic ohn   l   l iu     r enz

oim relations regions figure   respectively

ab



     
         
     

a  b 



     
         
     

note regions a  b  a    b  figures ab   a  b    suggests oim
finer grained cdc sense splits one basic cdc relation several oim relations 
nevertheless  since cdc closed converse  need consider consistent pairs basic
cdc relations order evaluate expressivity  comparing expressivity two
calculi way  see  ab   ba       a  b    b  a    figure     ab   ba      a  b    b  a   
figure    shows oim makes finer distinctions cdc describing scenarios
given figure   ii   iii   saying west b  cdc differentiate east
boundary meets precedes west boundary b  following result shows oim
finer cdc describing cardinal relations  essence combination
cdc ra 
theorem      li   liu        two regions b  compute ra relation
b  cdc relation b  cdc relation b oim relation b 
vice versa 
words  basic oim relation   exist two basic cdc relations    
basic ra relation       i e  two regions b  relation
oim relation b iff     are  respectively  cdc relation b  cdc relation
b a  ra relation b  basic cdc ra relations jepd 
choices       unique  following  call cdc relation induced
call ra relation induced   note case    as relation b a  cdc
relation induced   oim relation b a 
consequence  following result 

proposition     suppose    vi ij vj  ni j   basic oim network ji   ij
n
n
i  j  let    vi ij vj  i j      vi ij vj  i j     ij ij are  respectively  cdc
relation ra relation induced ij   consistent iff joint network  
consistent 

proof  recall converse basic oim relation basic oim relation 
  straightforward show     therefore  solutions
ji   ij
ij
ij
ij
ji
exactly solutions    
consequence propositions      
corollary     let   given proposition     basic ra network
refines     consistency determined cubic time  moreover  consistent 
unique regular solution solution  
far  described example jsp  next three sections 
consider main task paper  jsp topological directional constraints 
   

fir easoning opological c ardinal irection r elations

   combination weak rcc  ra networks
section represent topological information weak rcc  relations directional information ra relations  first consider interaction weak rcc  ra relations 
consider jsp basic constraints  and  lastly  consider jsp general 
    interaction weak rcc  ra relations
relations different calculi may interact sense relation one calculus may intersect
several relations second calculus  recall related definitions preliminary
results obtained li cohn        
definition     let rcc  relation ra relation  ra relation induced
rcc  relation induced defined
ra t         basic ra relation     

    

rcc  d        basic rcc  relation      

    

note joint network   bi closed ij ra ij   ij rcc  ij   i  j 

easy see  cf  li cohn        ra t      ra        
ra  dc   ra  ec   ra  po   ra  tpp   ra  ntpp  eq   




ra  po   ra  tpp    ra  ntpp   eq   

    
    

where  example  ra  ec   ra  po   holds because  basic ra relation  
ra  ec   m a  m b      a  b    ra  po   m a  m b 
non degenerate rectangle  a  b   
lemma     let rcc  relation ra relation  rcc  d  relation
b    q    c    ra t   relation h h relation h
b  q   
intersection h
proof  follows definitions rcc  d  ra t   simple table look up
appendix work renz        
second statement apply relations c    example  consider    ntpp 
eq   relation c    ra t      d d  eq eq  outside h h 
    combination basic networks
consider combination rcc  ra  first show bipath consistency
sufficient consistency jsp brcc    brec    li   cohn         let    vi ij vj   i j  
basic ra network induced four rectangles mi  i               illustrated below 
let    vi ij vj   i j   basic rcc  constraint network            ec 
others  dc   clearly  satisfiable  although   bipath consistent 
satisfiable  because  otherwise  exists solution    mi   i   m m   m m     
m m    m m       p   singleton             ec  know p mi  i               
contradicts       dc  
call point p configuration conflict point  general  following
definition 
   

fic ohn   l   l iu     r enz

definition     conflict point   let    vi ij vj  ni j   basic rcc  network    vi
ij vj  ni j   basic ra network  suppose canonical solution   point q called
conflict point mi exists j mi mj    q  ij    ec   write ci
set conflict points mi  
clearly  conflict point mi corner point mi   implies mi mj
may one common conflict point  moreover  suppose    mi  ni   solution
  m mi     mi   n  conflict point mi contained
mi   means ci mi   consequence 
ci cj    ij     dc     i  j n 

    

following theorem shows sufficient 
theorem     let    vi ij vj  ni j   basic rcc  network    vi ij vj  ni j   basic ra
network  suppose   bipath consistent    satisfiable iff      holds 
proof  necessity part clear  defer proof sufficiency part appendix b 
corollary  jsp brcc    brec   p 
corollary     basic rcc  network basic ra network   consistency  
decided cubic time 
proof  bipath consistency   checked cubic time  construct unique
canonical rectangle solution quadratic time  conflict point set ci computed
quadratic time  is  condition theorem    checked cubic time 
    large tractable subsets
b    c    q    ia one maximal
recall rcc  three maximal tractable subclasses h
tractable subclass h  containing basic relations  subsection  aim extend
b    c  rcc   large tractable subset h h
result maximal tractable subsets h
ra 
end  need extend notion conflict points basic networks arbitrary
networks  recall   meet relations corner relations basic ra relations defined definition   
definition     common conflict point   let    vi tij vj  ni j   rcc  network  
 vi dij vj  ni j   ra network  say two variables vi   vj ccp  common conflict point 
relation  written ccp vi   vj    dij   meet  basic  relation tij    ec  
dij  possibly disjunctive  corner relation 
   

fir easoning opological c ardinal irection r elations

exist i    j   dii  djj     meet  basic  relations  dij     di  j di  j  
 possibly disjunctive  corner relations  tii    tjj      ec  
ccp vi   vj   vi    vj  variables satisfy conditions  write ccp i  j  
i    j     stress roles vi  vj    

 i 

 ii 

figure    two joint constraint networks jsp rcc   ra    i   ii 
dij basic ra relation vi vj illustrated picture  t     t      ec  unspecified rcc  constraints
non basic rcc  relation  dc  ec  po  
 i   ii 
ccp        ccp        ccp        ccp        ccp        ccp       

examples shown figure    note basic networks  vi vj
ccp relation iff ci cj nonempty  i e  vi vj common conflict point 
definition     let    vi tij vj  ni j   rcc  network    vi dij vj  ni j   ra
network  say   ccp consistent
ccp vi   vj   dc   tij

    

holds    j  say joint network   bc consistent bipath consistent
ccp consistent 
general  vi vj ccp relation   in realisation  vi vj share least
one corner point  of mbrs  common  therefore  weak rcc  algebra  cannot
disconnected  neither contained another non tangential proper part  note
latter statement follows bi closedness    
similar bipath consistency algorithm  gerevini   renz         devise algorithm
 algorithm    enforcing bc consistency  following theorem shows algorithm
sound 
theorem     suppose   joint network rcc  ra constraints     vi tij
vj  ni j      vi dij vj  ni j     o n    time  algorithm bc c onsistency either
finds inconsistency transforms   equivalent joint network      
bc consistent 
   

fic ohn   l   l iu     r enz

input  joint network        vi tij vj  ni j      vi dij vj  ni j    
output  false  empty constraint generated  bc consistent joint network equivalent
    otherwise 
q   i  k  j       j  k    i  k    j  
 i indicates i th variable    
analogously j k 
q   
select delete path  i  k  j  q 
bc r evision i  k  j 
tij   dij  
return false 
end
q q   i  j  k    k  i  j    k    i  k    j  
end
end
function  bc r evision i  k  j 
input  three variables i  k j
output  true  tij dij revised  false otherwise 
side effects  tij dji revised using operations w  
tij
 tij rcc  dij     tji rcc  dji     tik rcc  dik    w  tkj rcc  dkj    
dij  dij ra tij     dji ra tji     dik ra tik    w  dkj ra tkj    
ccp i  j   k 
tij tij    dc  
end
neither tij dij revised
return false 
end
 
dji dij
tji tij  
return true 
algorithm    bc c onsistency  write ccp i  j   k  represent situation
exists another variable vl vl vk together evidence ccp i  j  

   

fir easoning opological c ardinal irection r elations

proof  because  iteratively use following updating rules either empty constraint occurs network becomes stable 
tij  tij rcc  dij     tji rcc  dji   
 tik rcc  dik    w  tkj rcc  dkj   


    

dij  dij ra tij     dji ra tji     dik ra tik    w  dkj ra tkj   

    

tij tij    dc  ccp i  j   k  

    

i  j  k represent variables vi   vj vk ccp i  j   k  represents situation
exists another variable vl vl vk together evidence ccp i  j  
triple  ccp i  j   k  determined o n  time subroutine bc r evision i  k  j 
carried o n  time  since tij set basic rcc  relations dij set
basic ra relations   tij   dij   revised constant number times  therefore number
loops remains cubic  bc c onsistency terminate o n    time 
algorithm general complete  following lemma useful prove main
result  theorem      guarantee completeness algorithm rcc  networks
b  ra networks h h 
h
lemma     let    vi tij vj  ni j   rcc  network    vi dij vj  ni j   ra network 
b  q    bipath consistent  assume canonical
suppose h
consistent scenario  cf  theorem     consistent scenario    
bipath consistent 
proof  path consistent basic networks  need show  
ra    rcc        j  since basic
bi closed  i e  ij
ij
ij
ij
ij
ij
nonempty    j           
relations  equivalent showing ij
ij
   therefore ra t     ra    
straightforward show ra tij     ra ij
ij
ij
ij
ij


i e  ij ij nonempty 
note result apply c    example  let    ntpp  eq    
 d d  eq eq   rcc  relation ntpp inconsistent ra relation eq eq 
theorem     let    vi tij vj  ni j   rcc  network    vi dij vj  ni j   ra netb    h h    consistent bc consistent 
work  suppose h
proof  recall ra network h h essence pair ia networks h 
  meet relation iff is 
lemma   know consistent scenario  i  ij
ij

 ii  ij corner relation iff dij consists corner relations  let canonical consistent
scenario   show   consistent 
lemma    know   bipath consistent  next show satisfies      
equivalent      basic constraints concerned  end  show ccp i  j  
i    j     holds   holds     choice   know tii   
tjj      ec  ra relations either   meet relations consist corner relations 
therefore  ccp i  j   i    j     holds       bc consistent  know dc
    dc    satisfies       theorem     know    
ij   implies ij
hence     consistent 
   

fic ohn   l   l iu     r enz

b  q  h h
consequence  know joint consistency problem h
solved polynomial time 
b    h h  jsp q    h h  p 
theorem     joint satisfaction problems jsp h
b  q    h h 
proof  suppose   joint network h
first apply algorithm bc c onsistency     empty relation occurs
process    inconsistent  otherwise  suppose       bc consistent joint network
b  q    h h  note that 
equivalent     assert   still h
b   or q     ra relation h h  lemma   
rcc  relation h
b  q   
rcc  d  relation h
ra t   relation h h 
b   or q    
   dc     ec  po  tpp  ntpp  tpp   ntpp   eq  h
bc c onsistency uses rules           update relations  rcc  relation
b   or q     ra relation   remains hh  consistency     
  remains h
follows theorem    
property proof theorem hold c    remains open
jsp c    h h  tractable  though important practical purposes since either
b  q  used backtrack find solution required  
h

   combination rcc   ra networks
section  represent topological information rcc   relations directional information
ra relations  previous section shown that  certain tractable subclasses rcc 
ra  jsp determined polynomial time  show bipath consistency
incomplete subclasses  reason lies two regions constrained dc
may common conflict point  rcc     situation exist anymore two
disjoint regions may still   dimensional intersection  section show that  rcc    
bipath consistency alone sufficient show consistency joint network  
h  c  h h 
case weak rcc   first consider interaction rcc   ra relations 
consider consistency joint basic networks  and  lastly  consider general case 
similar definition     following definition 
definition     let rcc   relation ra relation  ra relation induced
rcc   relation induced defined
ra t         basic ra relation     
 

rcc   d        basic rcc   relation      

easy see ra t      ra        

    
    

ra  dc   ra  ec   ra  po   ra  tpp     ra  ntpp   ra  eq   
ra  po   ra  tpp      ra  ntpp    ra  eq   
   

fir easoning opological c ardinal irection r elations

note ra  tpp     ra  ntpp     s  d  f  eq   s  d  f  eq  
rcc   non tangential proper part region may mbr a  example 
star region figure   non tangential proper part mbr rcc    
lemma     let rcc   relation ra relation  rcc    d  relation
b    q    c    ra t   relation h h relation h
b 
intersection h
q  c   
particular  unlike case weak rcc   ra  ntpp  eq      s  d  f  eq 
 s  d  f  eq  relation h h 

figure    basic regions control point p combination rcc   ra 
theorem     suppose basic rcc   network basic ra network   
consistent bipath consistent 
proof  proof follows pattern combination weak rcc  ra  theorem      need replace basic regions around control point p star regions shown figure    show three regions b  r  g around p   bntppr
rntppg 
following result rcc   ra 
b  q  rcc     ra network   
theorem     suppose network h
consistent   bi closed  path consistent  consistent 
proof  assume canonical consistent scenario   consistent scenario
    ra    hence
  then  completely similar lemma     show ra ij
ij




bi closeness     consistent  know   bipath consistent 
hence consistent theorem    
b    ra  polynothe result shows consistency joint network jsp h
b  ra network 
mially reduced determining consistency rcc  network h
b    ra  separable problem  particular 
sense  jsp h
   

fic ohn   l   l iu     r enz

theorem     rcc  relations interpreted using strong connectedness  joint satisb    h h  jsp q    h h  p 
faction problems jsp h
again  remains open whether result holds networks c  rcc     even
though case ra  ntpp  eq     ra tpp  relation h h 
following section  consider combination rcc  cdc constraints 

   combination rcc  cdc constraints
although basic rcc  networks basic cdc networks solved cubic time independently  interaction rcc  cdc constraints makes joint satisfaction problem
hard solve  section  first show joint satisfaction problem np designing polynomial non deterministic algorithm show np hard even basic constraints  shows jsp brcc    bcdc   np complete  consider three variants
jsp brcc    bcdc   obtained replacing rcc  rcc   and or cdc oim  write boim
set basic oim relations  show jsp brcc    boim   jsp brcc     bcdc   np complete 
jsp brcc     boim   p 
    algorithms
let instance joint basic rcc  rcc   network basic cdc oim network
set variables  provide subsection algorithms determining consistency     key idea first showing   consistent iff regular solution
ra consistent  see below  giving algorithms determining whether
regular solution 
suppose    mi  ni   solution   recall say    mi  ni   regular solution
maximal solution  m mi   ni   canonical tuple rectangles  cf  dfn       note
region regular solution union set cells introduced canonical
tuple rectangles 
definition     let    vi ij vj  ni j   basic rcc  network    vi ij vj  ni j   basic
cdc network  suppose    mi  ni   regular solution   write ra network
induced m  say regular solution ra consistent exists solution
  satisfies  
following lemma gives characterisation consistent joint basic networks 
lemma     let    vi ij vj  ni j   basic rcc  network    vi ij vj  ni j   basic
cdc network    consistent iff regular solution ra consistent  
proof  sufficiency part clear definition  prove necessity part  suppose  
 ai  ni   solution    write ra network induced a  solution
    hence unique regular solution satisfies   write    mi  ni  
regular solution  clear regular solution ra consistent  
lemma  determine consistency     need determine existence
regular solutions ra consistent   suppose regular solution  
next give necessary sufficient condition ra consistent  
   

fir easoning opological c ardinal irection r elations

end  first fix notation terminology  region mi m  say corner
point p mi potential conflict point  in m  exactly one four cells incident p
contained mi   example  grey region shown figure   five potential conflict points
pi  i               later show points may introduce conflicts hard resolve
rcc  constraints involved  furthermore  denote gi set cells contained
mi   ei set edges cells lie boundary mi   ni set potential conflict
points vi  

figure    illustration potential conflict points 
lemma     let    vi ij vj  ni j   basic rcc  network    vi ij vj  ni j   basic
cdc network  regular solution    mi  ni   ra consistent   have 
ij   tpp ntpp gi gj  

    

proof  prove contradiction  assume  vi tppvj    vi ntppvj   constraint
gi   gj  
suppose  vs vt   constraint   basic cdc relation represented    
boolean matrix  dpq   p q    solution     p  q  
dpq     iff ms mpq
    

    

mpq
denotes one nine tiles generated mbr mt  cf  fig      since
regular solution gs set cells contained ms   equivalent saying
dpq     iff

gs mpq
common cell 

    

let g cell gi   gj   g gj   construction procedure regular
solutions  see appendix a   exists constraint  vj   vk        d uv   g
 pq     hence 
cell contained mpq
k p  q       g gj know
pq

  
      mj mk     let  vi vk   cdc constraint vi vk suppose
  pq          
      d  uv    g cell gi mpq
k  
ra consistent   exists solution    ai  ni    
m ai     m mi    since  vi tppvj    vi ntppvj     know ai aj   furthermore 
pq
aj mj maximal solution   therefore  ai mj   mpq
k   ak
pq
pq


  
  pq
mj mk     ai ak empty  shows  ai   ak   since
    
contradiction 
ntpp constraints may furthermore exclude edges ei nodes ni
valuation vi   suppose vi ntppvj constraint    mi  ni   ra consistent
  solution    ai  ni     m ai     m mi    ai ntppaj aj mj
   

fic ohn   l   l iu     r enz

aj mj     say  ai cannot touch edges nodes ej nj  
characterise this  define
 
ei ei    ej   vi ntppvj   
    
 
ni ni    nj   vi ntppvj   
    
since every region represented boolean matrix  gi   ei   ni calculated
polynomial time  following proposition gives necessary sufficient condition
ra consistent  
lemma     let    vi ij vj  ni j   basic rcc  network    vi ij vj  ni j   basic
cdc network  regular solution    mi  ni   ra consistent iff
vi tppvj vi ntppvj implies gi gj  

m  ei     m mi   i 
vi povj implies gi gj     

exists resolving function f   defined function v p   n      nn   
satisfying           
f  vi   ni  

    

vi ecvj gi gj    ei ej    f  vi   f  vj       

    

vi dcvj f  vi   f  vj      

    

proof  begin necessity part  suppose ra consistent   definition
exists solution    ai  ni     m ai     m mi    first condition
proven lemma     second condition  m ai     m mi    ai mi   know
ai nonempty intersection one unit edge cell lies top  bottom  leftmost 
rightmost  edge m mi    unit
edge clearly ei   furthermore  proven
edge ei   thus m  ei     m mi    following two conditions guarantee
po  ec constraints
satisfied violating dc constraints  third condition
follows directly ai gi ai poaj   last condition  define resolving function
f f  vi      p ni   p ai    straightforward prove f satisfies           
sufficiency part  construct solution     procedure quite similar
given theorem    appendix b  vi   choose control point cell gi
control point edge ei   vi povj   choose control point
common cell gi gj   vi ecvj   choose control point common cell
gi gj      common edge ei ej      f  vi   f  vj   resolving
function f   proven control points lead solution   moreover 
choice control points ensures regions solution  
since conditions lemma    verified nondeterministic polynomial algorithm 
following theorem 
theorem     jsp brcc    bcdc   np 
   

fir easoning opological c ardinal irection r elations

proof  suppose   instance jsp brcc    bcdc    devise nondeterministic polynomial
algorithm follows  first guess basic ra network consistent basic cdc
network   compute regular solution satisfies cubic time  guess
resolving function f satisfies conditions            check whether consistent
basic rcc  network lemma    via f   case  algorithm returns true 
otherwise  algorithm returns false  shows jsp brcc    bcdc   np 
since oim network one regular solution  lemma   
corollary     jsp brcc    boim   np 
interpret topological constraints rcc     following simplified condition
determining whether regular solution ra consistent  
proposition     suppose basic rcc   network  basic cdc network 
set variables v    v      vn    regular solution ra consistent
iff
vi tppvj vi ntppvj implies gi gj  
vi povj implies gi gj     
vi ecvj implies either gi gj ei ej nonempty 
moreover  conditions checked polynomial time 
proof  proof similar lemma     resolving function irrelevant 
rcc   conflict points longer evidence ec relations  point p  a set x  respectively  regarded evidence
relation  aecb  p   b  x b   respectively 
note require m  ei     m mi    rcc  possible antppb
m a    m b   see figure   illustration 
directly leads following two results 
theorem     jsp brcc     bcdc   np 
proof  proof similar theorem     suppose   instance jsp brcc    bcdc   
first guess basic ra network consistent construct regular solution
satisfies check whether ra consistent proposition    
recall oim essence combination cdc ra  basic oim network
consistent iff two component cdc ra networks consistent  see proposition     
case rcc   combined oim  following tractability result 
theorem     jsp brcc     boim   p 
proof  algorithm jsp brcc     boim   contains three steps  suppose   instance
n variables  first step decide whether independently consistent 
so  return false  otherwise  construct unique regular solution   achieved
o n    time  calculate gi ni   done o n    time  third step
decide whether ra consistent according proposition     done
o n    time  therefore  consistency   determined o n    time and  hence 
jsp brcc     boim   p 
   

fic ohn   l   l iu     r enz

next subsection  show jsp brcc    bcdc    jsp brcc     bcdc    jsp brcc    boim  
np hard 
    np hardness results
recall proof theorem     guess twice determining consistency
instance   jsp brcc    bcdc    basic ra network consistent  
resolving function f satisfies            see proposition      subsection
devise two polynomial reductions known np hard problems jsp brcc    bcdc   exploiting
two facts 
theorem     jsp brcc    bcdc   np hard 
proof  first reduction   sat jsp brcc    bcdc    quite complicated 
defer construction appendix c  explain problem np hard 
  sat instance   construct instance   jsp brcc    bcdc  
rcc  constraint either dc ec constraint  furthermore  show
unique regular solution ra consistent consistent 
intractability caused potential conflict points regular solution  which  together ec dc constraints  may introduce conflicts hard resolve 
lemma     satisfy ec constraint vi ecvj   need check whether mi mj share
cell  else edge  else corner point  last case  proven without much difficulty
points shared mi mj exactly points ni nj   therefore  mi mj share
cell edge  evidence point constraint vi ecvj chosen ni nj  
turns choosing evidence points ec constraints violating
dc constraints np hard 
second reduction graph   colouring problem jsp brcc    bcdc    defer construction appendix d  graph g  construct instance g   g jsp brcc    bcdc   
reduction differs first one exploit intractability finding
resolving function  fact  vi ecvj constraint  regular solution g  
either mi mj share cell edge  mi mj disjoint  in case ra
consistent    say  resolving functions effect ra consistency m 
reduction based fact g exponentially many regular solutions 
general way test polynomial time  unless p   np  
note first reduction shown unique regular solution ra
consistent consistent    sat instance   instance
jsp brcc    bcdc   defined reduction  write basic ra network induced
particular regular solution   easy see   consistent iff    
consistent  words  reduction   sat reduction jsp brcc    boim   
corollary     jsp brcc    boim   np hard 
similarly  second reduction reduction jsp brcc     bcdc   
jsp brcc    bcdc   instance graph g uses dc ec constraints  two variables required ec  mbrs   meet  mbrs may overlap 
corollary     jsp brcc     bcdc   np hard 
   

fir easoning opological c ardinal irection r elations

np hardness results theorem     corollary     theorem     know
theorem     joint satisfaction problems jsp brcc    bcdc    jsp brcc     bcdc    jsp brcc   
boim   np complete 

   conclusion
paper  investigated computational complexity reasoning topological
relations cardinal directions extended spatial objects  used two different interpretations well known rcc  algebra representing topological information  use
rectangle algebra  ra  cardinal direction calculus  cdc  describe directional information  shown joint satisfaction problems decidable remain np
interpretations topological directional information  importantly  shown
consistency problem p basic  weak strong  rcc  basic ra constraints
involved  topological constraints basic strong rcc  constraints directional
constraints jointly represented basic ra cdc constraints 
related work reported work sistla yu         li         li
cohn         small fragments ra used express directional information 
results represent large step towards applicability qualitative spatial reasoning techniques
real world problems  particular tractable results promising enable efficient
reasoning important calculi  means efficient reasoning important
potential application  developers aim representing directional information using ra
 or together cdc  instead cdc alone and or representing topological information using
rcc   instead rcc   results combining rcc  cdc oim important
theoretical point view first formal results combination  demonstrated using concrete application scenario  results practical significance 
combined information consider easily extracted cases computer vision used
obtaining spatial information 

acknowledgments
thank anonymous reviewers invaluable comments detailed suggestions 
first author thanks university technology sydney funding visit sydney
adjunct professor  work partially supported australian research council  grant
no s dp           dp          ft          national natural science foundation
china  grant no             eu funded projects race  fp  ict         strands
 fp  ict         

appendix a  realisation basic cdc networks
describe cubic algorithm given work zhang et al           liu et al          
given basic cdc network  first  compute canonical solution induced  possibly nonbasic  ra network  next  remove cells violate constraints rectangle 
third  check whether obtained valid solution  following  give
detailed description running example illustrated table   figure   
   

fic ohn   l   l iu     r enz

      

      

      


 
 
 
 
 
 
 
 
 

ij
 
 
 
 
 
 
 
 
 


 
 
 
 
 
 
 
 
 


 
 
 
 
 
 
 
 
 

ji
 
 
 
 
 
 
 
 
 

xij yij

xij yij

oo

oo

 m  b 

b

oi

oi



 
 
 
 
 
 
 
 
 

table    example solving basic cdc network 

step    compute induced ra network    
step    refine   basic ra network    vi  xij yij  vj  ni j   setting xij   xij   m  mi 
yij   yij   m  mi   unsatisfiable  neither   suppose satisfiable construct
canonical solution    mi  ni    cf  figure    

figure    illustration step    deriving solution canonical solution  
step    step tries find solution    mi  ni   basic cdc network
m mi     m mi    recall basic cdc relation ij represented     boolean matrix
  ij  xy    solution  mi  mj  xy   holds every  ij  xy       mj  xy one
nine tiles generated m mj    cf  figure    
make solution  
means 


need exclude impossible cells mi   set ti     mj  xy    ij  xy     nj     let mi
closure mi   ti  cf  figure   left  
step    last step checks whether    mi  ni   solution   solution 
must regular solution  not  assert solution all 
note regular solutions may exist  cf  figure   right   get
repeating steps     using every possible refinement    

appendix b  proof theorem   
need show sufficiency part  similar cubic construction method basic rcc  constraints  cf  li      b section       paper   construct solution
   mi  ni   additional requirement m mi     mi   n 
 m         mn   canonical solution   recall coordinates corner point
rectangle mi integral  assuming ntpp level l i  computed   n 
next describe construction detail 
   

fir easoning opological c ardinal irection r elations

step    selection control points
vi select set control points xi   first all  corner point ci control point
vi   select one  non integral  point edge mi put four points
xi   then  j   ij   ec po select point pij mi mj  which nonempty
bipath consistency      put xi xj   note mi mj
could single point  line segment  rectangle  choosing pij mi mj  
require pij fresh point chosen corner point
rectangle  unless mj singleton set   write p set control points 
step    basic regions associated control points
control point q  construct series sectors  q i k   k          ni   series
squares  q  i   ni    see figure     call basic regions associated q  note
use upper case letter denote control point  use corresponding lower case letter  with
indices  denote basic regions  sectors chosen way allows us distinguish
four connecting regions cases q corner point  such point p figure   
sectors completely fill disks 

figure    basic regions control point q 
two different control points  require outermost squares disjoint  furthermore  basic region must small enough crossed border mi
q boundary point 
step    region construction
control point q  set q  
a i
a i
a i
a i

s 

k   q

i k  

let
 
  mi  q   q xi  
 
  a i  mi  q j   ij   po  q xi xj   
 
  a i  a j   ji   tpp ji   ntpp 
 
  a i  q  l i     ji   ntpp  q a j  

set mi   a i    mi  ni     easy prove satisfies rcc  constraints  
example  suppose  vi dc vj   constraint        holds  know vi vj share
common conflict point  i e  ci cj     due choice control points vi vj   know
   

fic ohn   l   l iu     r enz

xi xj empty  easy show mi mj empty hence dc constraint
satisfied 
show satisfies   need prove m mi     mi i  clear a i
a i subsets mi   choice xi   know mi   m a i     m a i    ji   tpp
ntpp  mj mi bipath consistency  implies m a i     mi   furthermore 
ji   ntpp   mj   mi   bipath consistency  control point q
a j mj   q interior mi   therefore  choice basic regions  know
outmost square q  n  q  hence q  l i     contained mi   therefore  m a i     mi   proves
solution    

appendix c  reduction  sat jsp brcc    bcdc  
v
n
let  
i   cj  sat instance involving n propositional variables  pk  k   clauses 
assume j th clause cj qi  qi  qi    qij literal  pk  nk    pk  nk    
construct jsp brcc    bcdc   instance   choose particular regular solution
satisfiable iff ra consistent  
three types spatial variables     auxiliary variables  called grid variables 
used fix relative locations variables  variables simulate propositional
variables  variables simulate propositional clauses 
c   grid variables
introduce    n grid variables gij     n    j     cdc constraints
variables specified figure     left   rcc  relation two grid variables
gij   gi  j   ec   neighbours  i e    i i      j j                ec constraints
make sure gap mbrs two neighbouring grid variables  implies
one regular solution  
grid variables mainly used locate spatial variables  new variable v grid
variable gij   say v occupies gij v m gij   nonempty  mbr m gij    i e 
m v m gij      m gij   

figure     grid spatial variables propositional variables 

c   spatial variables propositional variables
propositional variable pi   four spatial variables ai   bi   ci di introduced
occupies two grid cells  empty intersection interiors mbrs
   

fir easoning opological c ardinal irection r elations

grid variables  corresponding grid cells illustrated figure     right   take ai
example  assigning cdc constraints ai grid variables  require ai
occupies g i    g i      disjoint mbrs grid variables  easy
see ai bi contains two points  viz  pi  pi   ci di  
topological constraints  require ai ecbi ci ecdi   constraints
dc  ec constraints imply ai bi ci di nonempty  hand 
since ai dcci   conclude ai bi must share one pi  pi   ci
di share one 
c   spatial variables propositional clauses
clause  qj  qj  qj      introduce two new spatial variables ej fj  
occupy three grid cells  precise occupied grid cells set according variables signs
qjk   figure    gives example illustrate construction  assume qj    pi    qj   
pi    qj    pi    topological constraints  set constraint ej fj
ec  set constraints dc  implies ej fj contains least one point
pi    pi     pi     claim case ai  bi     pi     ai  bi     pi    
ai  bi     pi      otherwise  dc constraint  e g  ai  ej   violated 
c   regular solution may ra consistent

figure     spatial variables clauses 
finished construction  note always satisfiable exponentially many regular solutions  as may may gap   neighbouring
grid variables   however  ec constraints   neighbouring grid variables imply
regular solution gap   neighbouring grid variables ra
consistent   denote regular solution m 
next show consistent iff   consistent  suppose   solution a 
define assignment    pi  ni    true  f alse   pi     true iff ai bi    pi   
a  verify satisfies   hard  suppose assignment satisfies
  prove   solution  idea introduce instance jsp brcc    brec   

two spatial variables a 
ai instead ai  also bi   ci   di    three
k
variables ej    k    instead ej  also fj    ra constraints set according
figure    figure     rcc  constraints set   proven
new joint network satisfies       solution obtained cubic time  solution

  obtained merging related regions  e g  merging a 
ai ai   
   

fic ohn   l   l iu     r enz

verification straightforward  therefore  satisfiable iff   satisfiable  thus
satisfiable iff ra consistent  

appendix d  reduction graph   colouring jsp brcc    bcdc  
suppose g    v  e  graph  construct instance g   g jsp brcc    bcdc   follows 
node vi v   construct gadget    spatial variables  uki  k               xi
 
yi   first describe cdc constraints  basic cdc constraints uki uki
specified figure     i   example  g contains following basic cdc constraints








     
     
     
     
u i       u i   u i       u i   u i       u i   u i       u i  
     
     
     
     
note that  induced ra constraint u l  
u l  
l            b m  eq 


basic cdc constraints xi yi specified figure     ii   i e 




     
     
xi       yi   yi       xi  
     
     
cdc constraints concerning xi   yi uki specified follows 

 
xi  
 

 
xi  
 

 
k
ui  
 

 

yi  
 

 
yi  
 

 
uki  
 




     
   
    u i   xi       u i  
     
   



   
     
    u i   xi       u i  
   
     

   
    xi  k       
   



   
     
    u i   yi       u i  
   
     



   
     
    u i   yi       u i  
   
     

   
    yi    k    
   


 
xi  
 

 
xi  
 

 
 
ui  
 

 

yi  
 

 
yi  
 

 
u i  
 




     
   
    u i   xi       u i  
     
   

   
    uki  k         
   

   
    xi  
   



   
     
    u i   yi       u i  
   
     

   
    uki  k         
   

   
    yi  
   

figure     ii  illustrates regular solution uki   xi yi   u i meets u i
gap u i u i   u i u i   note total eight different
regular solutions network restricted gadget vi  
   

fir easoning opological c ardinal irection r elations

 i 

 ii 
figure     illustrations cdc constraints   i  constraints uki  k                ii 
constraints relating xi   yi   note use dashed squares denote variables u i u i  
connect two variables  note xi yi three disjoint parts 

   

fic ohn   l   l iu     r enz

rcc  constraint two variables either ec dc  require xi ecyi  
realisable u l  
meets u l  
x direction least one l             use fact


mimic node vi v coloured one three colours  rcc  constraints
remaining pairs variables specified dc   
gadgets nodes v horizontally aligned  illustrated figure    

figure     illustrations gadgets nodes v

figure     illustrations gadget edge ek    vi   vj    dashed lines suggest corresponding edges aligned according proper cdc constraints 
devise gadgets edges graph g  let ek    vi   vj   edge e 
    w     w   w   well constraints
colour l            introduce four variables wk l
k l
k l
k l
 l  
 l  
 l  
guarantee u l  
cannot
meet
u

u
meets
u
 

corresponds
nodes vi


j
j
vj cannot colour l  because ek edge g   cdc constraints specified
  meets w   iff u l   meets u l     w   meets w   iff u l  
figure     note wk l


j
k l
k l
k l
    contained
meets u l  
 


x direction 


cdc
constraints


show

m w
j
k l
     implies either gap w   w   gap w  
m wk l
k l
k l
k l
    words  w   meets w   w   meets w   cannot happen simultaneously 
wk l
k l
k l
k l
k l
   one l u l  
meets u l  
x direction  always choose smallest l


colour node vi  
   note u i dcu i together cdc relations u i u i necessarily imply u i
precede u i x direction  is  u i could still meet u i x direction case 

   

fir easoning opological c ardinal irection r elations

constraints enforcing dashed lines know u l  
cannot meet u l  
u l  
meets u l  
 


j
j
vice versa 
note need complete   unspecified cdc constraints easily
deduced figures  unspecified rcc  constraints dc 
hard verify graph g   colourable iff joint network g   g consistent 
idea that    v             colouring g  may construct solution
g   g ra relation u l  
u l  
eq  i    l  b eq


otherwise  guarantees xi yi realisable  fact incident nodes g
r realisable  hand    satisfiable 
colour implies wk l
g
g
least one pair   u i   u i     u i   u i     u i   u i    ra relation eq  otherwise 
xi ecyi violated   define   v            vi     min l   u l  
eq u l  
  


r realisable 
verified   colouring g due fact wk l
completed reduction graph   colouring jsp brcc    bcdc    note
ec constraints interpreted terms rcc     means g   g
regarded instance jsp brcc    bcdc    therefore  provided reduction
graph   colouring jsp brcc     bcdc   

references
allen  j  f          maintaining knowledge temporal intervals  communications acm 
               
balbiani  p   condotta  j  f     farinas del cerro  l          new tractable subclass rectangle algebra  dean  d   ed    proceedings sixteenth international joint conference
artificial intelligence  ijcai      pp          morgan kaufmann 
bodirsky  m     kara  j          complexity temporal constraint satisfaction problems  j 
acm        
borgo  s   guarino  n     masolo  c          pointless theory space based strong connection
congruence  aiello  l  c   doyle  j     shapiro  s  c   eds    kr  pp          morgan
kaufmann 
chen  j   cohn  a  g   liu  d   wang  s   ouyang  j     yu  q          survey qualitative
spatial representations  knowledge engineering review  firstview      
cicerone  s     di felice  p          cardinal directions spatial objects  pairwiseconsistency problem  information sciences                   
cohn  a  g     renz  j          qualitative spatial reasoning  van harmelen  f   lifschitz  v    
porter  b   eds    handbook knowledge representation  elsevier 
cohn  a  g   renz  j     sridhar  m          thinking inside box  comprehensive spatial
representation video analysis  kr  pp         
cohn  a  g     varzi  a  c          modes connection  freksa  c     mark  d  m   eds   
cosit  vol       lecture notes computer science  pp          springer 
davis  e          qualitative spatial reasoning interpreting text narrative  spatial cognition
  computation                
   

fic ohn   l   l iu     r enz

davis  e   gotts  n  m     cohn  a  g          constraint networks topological relations
convexity  constraints               
duntsch  i   wang  h     mccloskey  s          relation algebraic approach region
connection calculus  theoretical computer science            
egenhofer  m  j     mark  d  m          naive geography  frank  a     kuhn  w   eds   
cosit     pp       springer 
falomir  z          qualitative distances qualitative description images indoor scene
description recognition robotics  ai communications                
freksa  c          temporal reasoning based semi intervals  artificial intelligence            
    
gabelaia  d   kontchakov  r   kurucz  a   wolter  f     zakharyaschev  m          combining
spatial temporal logics  expressiveness vs  complexity  journal artificial intelligence
research             
ge  x     renz  j          representation reasoning general solid rectangles  rossi 
f   ed    ijcai  ijcai aaai 
gerevini  a     renz  j          combining topological size information spatial reasoning 
artificial intelligence              
gerevini  a     nebel  b          qualitative spatio temporal reasoning rcc   allens
interval calculus  computational complexity  ecai  pp         
goyal  r     egenhofer  m          direction relation matrix  representation directions
relations extended spatial objects  annual assembly summer retreat
university consortium geographic information systems science 
goyal  r     egenhofer  m          similarity cardinal directions  jensen  c   schneider  m  
seeger  b     tsotras  v   eds    proceedings  th international symposium advances
spatial temporal databases  sstd      pp        springer 
hirsch  r          finite relation algebra undecidable network satisfaction problem  logic
journal igpl               
jonsson  p     krokhin  a  a          complexity classification qualitative temporal constraint
reasoning  artificial intelligence                 
kontchakov  r   nenov  y   pratt hartmann  i     zakharyaschev  m          decidability
connectedness constraints  d  d euclidean spaces  ijcai  pp         
li  s       a   combining topological directional information  first results  lang  j   lin  f  
  wang  j   eds    proceedings first international conference knowledge science 
engineering management  ksem      pp          springer 
li  s       b   topological consistency realization  constraints              
li  s          combining topological directional information spatial reasoning  veloso 
m   ed    proceedings   th international joint conference artificial intelligence
 ijcai      pp          aaai 
li  s     cohn  a  g          reasoning topological directional spatial information 
computational intelligence                
   

fir easoning opological c ardinal irection r elations

li  s     liu  w          cardinal directions  comparison direction relation matrix objects
interaction matrix  international journal geographical information science  accepted
publication  doi  http   dx doi org                              
li  s   liu  w     wang  s          qualitative constraint satisfaction problems  extended
framework landmarks  artificial intelligence            
ligozat  g          tractable relations temporal reasoning  pre convex relations  ecai    
workshop spatial temporal reasoning  pp        
ligozat  g     renz  j          qualitative calculus  general framework  zhang  c  
guesgen  h     yeap  w  k   eds    pricai     pp        springer 
liu  w     li  s          reasoning cardinal directions extended objects  nphardness result  artificial intelligence                    
liu  w   li  s     renz  j          combining rcc   qualitative direction calculi  algorithms
complexity  boutilier  c   ed    proceedings twenty first international joint
conference artificial intelligence  ijcai      pp         
liu  w   zhang  x   li  s     ying  m          reasoning cardinal directions extended objects  artificial intelligence                     
nebel  b          computational properties qualitative spatial reasoning  first results  ki    
pp          berlin  germany  springer verlag 
nebel  b     burckert  h  j          reasoning temporal relations  maximal tractable
subclass allens interval algebra  journal acm              
randell  d  a   cui  z     cohn  a  g          spatial logic based regions connection 
kr     pp         
renz  j          maximal tractable fragments region connection calculus  complete
analysis  dean  d   ed    proceedings sixteenth international joint conference
artificial intelligence  ijcai      pp          morgan kaufmann 
renz  j          qualitative spatial reasoning topological information  vol       lecture
notes artificial intelligence  springer verlag  berlin  germany 
renz  j     nebel  b          complexity qualitative spatial reasoning  maximal
tractable fragment region connection calculus  artificial intelligence             
schneider  m   chen  t   viswanathan  g     yuan  w          cardinal directions complex
regions  acm transactions database systems                 
schockaert  s     li  s          convex solutions rcc  networks  ecai  pp         
schockaert  s     li  s          combining rcc  relations betweenness information 
ijcai  pp           
shi  h   jian  c     krieg bruckner  b          qualitative spatial modelling human route instructions mobile robots  achi  pp     
sistla  a     yu  c          reasoning qualitative spatial relationships  journal automated
reasoning                
skiadopoulos  s     koubarakis  m          consistency cardinal direction constraints 
artificial intelligence                
   

fic ohn   l   l iu     r enz

sridhar  m   cohn  a  g     hogg  d  c          video rcc   exploiting distance
based semantics stabilise interpretation mereotopological relations  cosit  pp 
       
vilain  m  b     kautz  h  a          constraint propagation algorithms temporal reasoning 
aaai  pp         
whitehead  a          process reality  essay cosmology  cambridge university press 
cambridge 
wolfl  s     westphal  m          combinations binary qualitative constraint calculi 
boutilier  c   ed    proceedings twenty first international joint conference artificial
intelligence  ijcai      pp         
wolter  d     wallgrun  j          qualitative spatial reasoning applications  new challenges
sparq toolbox  hazarika  m   ed    qualitative spatio temporal representation
reasoning  trends future directions  pp         
wolter  d   dylla  f   wolfl  s   wallgrun  j  o   frommberger  l   nebel  b     freksa  c         
sailaway  spatial cognition sea navigation  ki              
wolter  f     zakharyaschev  m          spatial reasoning rcc   boolean region terms 
ecai  pp         
zhang  p     renz  j          qualitative spatial representation reasoning angry birds 
extended rectangle algebra  kr 
zhang  x   liu  w   li  s     ying  m          reasoning cardinal directions  efficient
algorithm  fox  d     gomes  c   eds    proceedings twenty third aaai conference
artificial intelligence  aaai      pp          aaai 

   


