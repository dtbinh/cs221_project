journal artificial intelligence research                  

submitted       published      

novel sat based approach model based diagnosis
amit metodi

amitmet   cs   bgu   ac   il

department computer science 
ben gurion university negev  beer sheva  israel

roni stern
meir kalech

roni   stern   gmail   com
kalech   bgu   ac   il

department information systems engineering 
ben gurion university negev  beer sheva  israel

michael codish

mcodish   cs   bgu   ac   il

department computer science 
ben gurion university negev  beer sheva  israel

abstract
paper introduces novel encoding model based diagnosis  mbd  boolean satisfaction  sat  focusing minimal cardinality diagnosis  encoding based combination
sophisticated mbd preprocessing algorithms application sat compiler optimizes encoding provide succinct cnf representations obtained previous
works  experimental evidence indicates approach superior published algorithms
minimal cardinality mbd  particular  determine  first time  minimal cardinality diagnoses entire standard iscas      xxx benchmarks  results open way
improve state of the art range similar mbd problems 

   introduction
automated diagnosis concerned reasoning health systems  including identification abnormal behavior  isolation faulty components prediction system behavior
normal abnormal conditions  systems become large scale complex 
automated diagnosis becomes challenging  model based diagnosis  mbd  artificial
intelligence based approach aims cope diagnosis problem  reiter        de kleer
  williams         mbd  model system first built  diagnoser observes
system predict behavior model  discrepancies observation prediction used input diagnosis algorithm produces set possible faults
explain observation  mbd deployed several real world applications  including
spacecrafts  williams   nayak         satellite decision support systems  feldman  de castro  van
gemund    provan         automotive industry  struss   price        spreadsheets  jannach   schmitz         also  exist several commercial mbd tools  feldman        dressler
  struss        
mbd known hard problem algorithms exponential runtime  exponential
number components diagnosed system   moreover  number potential diagnoses given observation huge  therefore  mbd algorithms typically focus minimal
c
    
ai access foundation  rights reserved 

fim etodi   tern   k alech   c odish

diagnoses  minimal subset contain diagnoses  minimal cardinality
smallest size  computing first minimal diagnosis p   computing next one
np hard  bylander  allemang  tanner    josephson         computing minimal cardinality
np hard  even first diagnosis  selman   levesque         work focus
hard task finding minimal cardinality diagnoses 
study model based diagnosis resulted variety computational modeling
challenges  paper focus one challenge received much attention
years  originally defined reiter        de kleer williams         problem
aims diagnose multiple faulty components so called weak fault model  ignores
mode abnormal behavior components  problem extensively researched
   years wide range papers propose different algorithms solve it  including range
papers recent years  feldman   van gemund        williams   ragno        feldman 
provan    van gemund      a  siddiqi   huang               addressing challenge 
common practice focus diagnosis combinational logic circuits  namely  boolean
circuits single output component determined logical function
current input state  independent time feedback  
basic setting diagnosis considers single observation inputs outputs
system  variations consider additional information probabilities component failure 
multiple observations inputs outputs system  observations internal positions
system  probes   paper focus basic setting  extensions variations
discussed section   
even basic setting  solving mbd problem often impractical  especially highcardinality faults  instance  system      components  find minimal cardinality
diagnosis size    diagnosis engine must verify absence diagnosis consisting   components  there      combinations   overcome complexity problem
consider novel encoding sat 
recent years  boolean sat solving techniques improved dramatically  todays sat
solvers considerably faster able manage larger instances yesterdays  moreover  encoding modeling techniques better understood increasingly innovative  sat currently
applied solve wide variety hard practical combinatorial problems  often outperforming
dedicated algorithms  survey state of the art sat solving see work biere 
heule  van maaren  walsh        draft forthcoming volume art computer programming  knuth        
general idea encode  typically  np  hard problem instance    boolean formula 
  solutions correspond satisfying assignments   given encoding 
sat solver applied solve  
sat based solutions mbd already proposed  smith et al         encode circuit 
representing component clauses add constraints cardinality  basis
sat based encodings  including one contribute paper  bauer       
introduces tailored sat solver specifically designed return many diagnoses  stein et al        
address diagnosis qualitative models physical systems multiple fault modes  recently  feldman et al         propose encoding max sat demonstrate off the shelf
solvers require calls sat solver stochastic diagnosis algorithm safari  feldman
et al       a  
   

fia n ovel sat based pproach odel based iagnosis

previous applications sat mbd appear indicate sat max sat solvers
doomed perform poorly standard benchmarks  feldman et al          paper proves
contrary  sat based approach differs previous sat encodings several key aspects 
first  sophisticated mbd preprocessing techniques applied facilitate construction
carefully designed constraint model  includes constraints exploit unique substructures
diagnosed system  second  constraint model compiled corresponding cnf using
constraint compiler called bee  metodi   codish         simplifies constraints generates
encoding cnf significantly improves subsequent runtime underlying sat
solver  lastly  structural abstraction inspired siddiqi huang        used decompose
diagnosis problem  sat solver used find top level diagnoses 
show simple poly time algorithm expand top level diagnoses find minimal
cardinality diagnoses  approach requires preprocessing diagnosed system 
complexity preprocessing low order polynomial  negligible  both theoretically
empirically  compared cost actual sat solving 
evaluated sat based approach using two standard benchmarks  iscas     brglez 
bryan    kozminski          xxx  standard benchmarks mbd literature  used extensively time made available today  feldman   van gemund 
      feldman et al       a  siddiqi   huang              stern  kalech  feldman    provan 
      nica  pill  quaritsch    wotawa         finding minimal cardinality diagnoses hard sets
observations iscas    long standing challenge mbd community
used diagnosis competitions  dxc         iscas    systems used standard
automatic benchmark generation  wang   provan        
consider three known sets observations minimal cardinalities     
first time succeed compute minimal cardinality diagnosis observations
benchmark  compare approach wide collection state of the art algorithms mbd 
including  ha   feldman   van gemund         cda   williams   ragno         safari  feldman et al       a   hdiag  siddiqi   huang        dcas  siddiqi   huang         results
unequivocal  approach outperforms others  often orders magnitude  terms
runtime  result even significant  safari stochastic algorithm  known fast 
even aim guarantee minimal cardinality  approach  hand  guarantees minimal cardinality diagnosis runs faster safari 
paper goes beyond preliminary version work  metodi  stern  kalech    codish 
    a   provide detailed description components approach  present
detailed algorithms  prove correctness  provide additional examples present elaborate
experimental evaluation  next section discuss additional related work  section   presents
required background mbd  section   present standard approach model mbd
sat  section   main part paper describe building blocks tool
find minimal cardinality diagnosis  section   describes building blocks combined
diagnosis algorithm  comprehensive evaluation approach given section    section
  discusses applicability approach general setting section   concludes 

   related work
since late   s  model based diagnosis problem weak fault model widely
researched wide range papers propose different algorithms solve  reiter        de kleer
   

fim etodi   tern   k alech   c odish

  williams        feldman   van gemund        williams   ragno        feldman et al       a 
siddiqi   huang               till today considered challenge reflected synthetic
track annual dxc diagnosis competition  dxc        
many existing diagnosis techniques propose apply combination deterministic reasoning search algorithms  one classic approach involves two stage process  first  identifies
conflict sets  includes least one fault  then  applies hitting set algorithm
compute sets multiple faults explain observation  de kleer   williams        williams
  ragno         methods guarantee sound diagnoses  even complete 
however  tend fail large systems due infeasible runtime space requirements 
alternative method directly search diagnoses trying different assumptions
components faulty  example  drum ii diagnosis engine finds minimal diagnosis performing iterative deepening search  limiting every iteration  number
components assumed faulty  frohlich   nejdl         drum ii analyzes
dependencies components prune irrelevant diagnoses  recent work presents empirical
evidence suggesting direct search diagnoses often better conflict directed diagnosis algorithms  nica et al          nica et al  compare sat based approach 
uses pre processing  work show proposed pre processing efficient
computationally results huge speedups search diagnosis  form preprocessing key ingredient enables us find large minimal cardinality diagnoses 
even sizes    
another approach considers diagnosis problem terms inductive learning  here  one
tries learn relations symptoms faults  murray  hughes    kreutz delgado 
       one disadvantage works approach learn single fault rather
multiple faults  balakrishnan   honavar         addition  inductive learning methods
guarantee sound diagnoses completeness  we  hand  propose method
addresses multiple faults guarantees sound complete minimal cardinality diagnoses 
feldman et al       a  propose stochastic diagnosis algorithm  called safari  although
method guaranteed return diagnoses minimal cardinality  presents solutions
close minimal cardinality low runtime  section    demonstrate approach
outperforms safari terms runtime  guarantees minimal cardinality diagnoses
returned 
compilation based methods proposed mbd context  torasso torta
       proposed compile system description binary decision diagrams  bdds   darwiche        proposed compile system description decomposable negation normal
form  dnnf   cases  compiled model allowed finding minimal cardinality diagnosis
time polynomial size compiled model  however  works  size
compiled model  bdd dnnf  may grow exponentially shown become bottleneck  siddiqi   huang        
siddiqi huang        suggest optimize mbd identifying components dominate
others  adopt idea apply sat based approach  another compilation based
diagnosis algorithm ha  algorithm  feldman   van gemund         ha  designed
exploit given hierarchy diagnosed system  done converting given system
hierarchy dnf hierarchy  element dnf hierarchy solved simple
best first search using heuristic function given prior probability health system
components  section    demonstrate approach substantially outperforms ha  
   

fia n ovel sat based pproach odel based iagnosis

   x    x    a    a    o   
obs    a  b  c  d  e 
comps

figure    mbd problem   faulty  full adder 
another previously proposed approach imposes tree structure given system description 
system tree structure diagnosed joining diagnoses constituent subsystems 
el fattah dechter        obtained tree structure converting diagnosed system
chordal graph decomposed tree maximal cliques  tree  algorithm another
tree decomposition algorithm  initially proposed tree structured systems  stumptner
  wotawa         tree  later generalized perform system embedding hyper
tree specific representation diagnosed system  stumptner   wotawa         follow
work generalized tree  support various forms diagnosis optimization tasks 
finding minimal cardinality diagnoses  finding subset minimal diagnoses  finding probable diagnoses  sachenbacher   williams         note complexity tree  exponential
width hyper tree embedded system description defined works 

   model based diagnosis  preliminaries
section introduces background model based diagnosis  addition basic definitions  review several concepts literature build paper 
model based diagnosis problems arise normal behavior system violated due
faulty components indicated certain observations  focus weak fault models 
ignore mode abnormal behavior components  mbd problem specified triplet
hsd  comps   obs where  sd system description  comps set components  obs
observation  system description takes account components might abnormal
 faulty   specified unary predicate h   components h c  true
component c healthy false c faulty  denoting correct behavior c propositional formula  c   sd given formally
 
sd  
h c  c
ccomps

namely  component faulty follows correct behavior  diagnosis problem
arises when  assumption none components faulty  inconsistency
system description observations  de kleer   williams        reiter        
definition    diagnosis problem   given mbd problem  hsd  comps   obs i  diagnosis problem
arises
 
sd
h c  obs  
ccomps

   

fim etodi   tern   k alech   c odish

example  diagnosis problem arises mbd figure   normal behavior would give
output e      inconsistency  diagnosis algorithm tries find subset comps
which  assumed faulty  explains observation 
definition    diagnosis  given mbd problem  hsd  comps   obs i  set components
comps diagnosis
 
 
h c  obs  
sd
h c 
c

c
 

say minimal diagnosis proper subset   diagnosis 
minimal cardinality diagnosis diagnosis   comps exists           
mbd figure        x    x         o         a    minimal diagnoses     
  minimal cardinality diagnoses  smaller diagnosis 
important concept make use paper gate domination  used
automatic test pattern generation  atpg   kirkland   mercer        fujiwara  member  shimono    member        modern sat solvers  marques silva  lynce    malik        
sometimes name unique sensitization  siddiqi huang        applied gate domination model based diagnosis  introducing notion cone  following wording
taken siddiqi huangs paper setting system boolean circuit
components gates 
definition    dominator cone  gate x fan in region gate g dominated g
conversely g dominator x path x output circuit contains g  cone
corresponding gate g set gates dominated g  maximal cone one either
contained cone contained exactly one cone entire circuit 
example  circuit depicted figure    components  a    a    o    form cone  since
path a  a  system output contains o    o  dominator a  a 
dominated gates 
although definition   stated terms boolean circuits logical gates  notions
dominators cones generalized many systems  components correspond gates 
component c  dominates component c  paths passing c  pass
c    example  system illustrated figure   components c  c  form cone 
c  dominates c   
importance cones mbd algorithms rooted two observations presented siddiqi
huang  firstly  cones single output sub systems such  minimal cardinality diagnosis always  independent observation  indicate one unhealthy component per cone 
secondly  c cone sd  without loss generality  may assume dominated
components c healthy  correct x unhealthy minimal cardinality
diagnosis dominated g  g must healthy  so  exists another minimal cardinality
diagnosis x healthy g not  example  circuit depicted figure     
minimal cardinality diagnosis signifies dominated a  unhealthy  exists another
minimal cardinality diagnosis      a  healthy o    dominates a    unhealthy 
based observations restrict search minimal cardinality diagnoses 
so called top level minimal cardinality diagnoses  notion top level diagnoses introduced siddiqi huang 
   

fia n ovel sat based pproach odel based iagnosis

definition    top level diagnosis  tld   say minimal cardinality diagnosis top level
contain dominated components 
formally justify focus top level diagnoses make explicit following propositions      left implicit previous work 
proposition   let   minimal cardinality diagnosis given mbd problem 
top level diagnosis   cardinality 
proof  straightforward  obtain   replace dominated component   corresponding dominator 

note set minimal cardinality diagnoses obtained expanding set top level minimal cardinality diagnoses following sense  given minimal
cardinality top level diagnosis     c            c    consisting   dominators corresponding
cones  c          c     denote

n


  c i ci    ci    c i   diagnosis
   
say expands set minimal cardinality diagnoses defined terms crossproduct by             example  consider system figure  
observation obs    a  b  c  d  e   cones system c     x     c     x     c   
 a    a    o     corresponding mbd problem two top level minimal cardinality diagnoses 
     x    o         x    o            x     o        x    o           
 x     a    o        x    a      x    o     
proposition     minimal cardinality diagnosis top level minimal
cardinality diagnosis expands include    
proof  proof straightforward construction 

finally  comment sets specify expansion top level diagnosis
equation     easy compute  component c i ci checking    ci    c i  
diagnosis means propagating observed inputs system  flipping outputs
propagating component    ci    c i   checking conflict
observed outputs  observation explicit previous work essential justify
focus top level diagnoses  proposition   important applies diagnosis algorithm 
such  diagnosis algorithms general focus  compared finding tlds  instead
finding minimal cardinality diagnoses 

   standard approach sat based mbd
standard encoding mbd problem hsd  comps   obs boolean satisfiability  as introduced smith et al         associates component c comps propositional formula 
c   denoting correct behavior  boolean variable  hc   signifying c healthy 
viewing observation propositional statement  encoding obtained specifying
 
  obs
hc c
   
ccomps

   

fim etodi   tern   k alech   c odish

satisfying assignment   health variables assigned value false determine  not
necessarily minimal  diagnosis  
example  consider mbd problem figure    let comp a  b  c 
comp  and  or  xor  denote propositional formula describing behavior component and     or   xor   gate inputs a  b output c  so  equation     takes
form 


b c e hx  xor a  b  z   


   
  ha  and a  b  z   
hx  xor z    c  d 
ha  and z    c  z    ho  or z    z    e 
formula satisfied assignment variables  a  c  ha    ha    ho    true variables
 b  d  e  z    z    z    hx    hx    false  assignment indicates    x    x    diagnosis 
obtain minimal cardinality diagnosis seek satisfying assignment minimal number health variables taking value false  example assignment variables
 a  c  z    z    hx    hx    ha    ha    true variables  b  d  e  z    ho    false satisfies equation     indicates one faulty component  achieved using max sat
solver  feldman et al          using sat solver done implementation underlying
paper  cardinality constraint  encoded cnf  introduced constrain number
faulty components detailed next section 
matter cardinality constraint encoded cnf  setting  comps     n
constant k  formula

n


k   sum leq  hc c comps   k 
   
satisfied k n health variables take value false  specifically  seek
minimal value k  the cnf corresponding to  k satisfiable  involves iterating
calls sat solver formulae k decreasing values k k satisfiable
k  not  approach takes advantage fact sat solvers typically incremental 
adding clauses satisfiable instance allows solve maintaining derived
information search space previous call 

   approach sat based mbd
approach encoding mbd problem hsd  comps   obs sat proceeds follows  first 
adopt finite domain constraint based representation express basic model  second  analyze
structure substructures sd introduce additional  redundant  constraints
later boost search minimal cardinality analysis  third  introduce constraints model
given observation obs additional constraint imposes bound cardinality
diagnosis  the number unhealthy components   additional constraint reduces
subsequent number iterations search minimal cardinality diagnosis  iteration
involves call underlying sat solver hence worst time exponential complexity  so 
reducing number important  given constraints  apply finite domain constraint
compiler  metodi   codish        metodi  codish    stuckey        simplify encode
corresponding cnf  finally apply sat solver seek suitable satisfying assignment
solve problem  rest section describe phases detail 
   

fia n ovel sat based pproach odel based iagnosis

figure    modeling component c composition xor
experimental evaluation illustrating impact various constraints model presented
section   
    basic model mbd
build standard approach  equation      however  observe model based
diagnosis weak fault model single observation searching minimal
diagnosis  behavior faulty component assumed produce output opposite
normal behavior  diagnosis assumes component c faulty
still produces normal output replaced smaller diagnosis contain c  thus 
minimal diagnosis  i e  subset diagnosis   means components
assumed produce opposite normal output  paper focus minimal
cardinality diagnoses  particular minimal subset  modify equation    
follows  replacing implication bi implication 
  obs

 

hc c

   

ccomps

model behavior  hc c   possibly faulty component c encapsulated together
xor gate illustrated figure    here  output encapsulated component
xor usual output c negated health variable hc   one observe hc
true composition equivalent normal behavior c  otherwise equivalent
component c negated output 
decision model relation component c health variable hc introducing additional xor gate  instead introducing cnf clauses directly encode hc c  
two motivations      improve cnf encodings provide tools reason about  simplify
system components advantage uniform representation logic
expressed system model itself      underlying sat solver apply  cryptominisat  soos         offers direct support xor clauses      mbd problem
amenable simplification      underlying sat solver optimize search
satisfying assignment  comment straightforward apply technique
sat solvers  support xor clauses  adding cnf encodings model 
finite domain constraint compiler  bee  metodi   codish         apply  configurable
work types solvers 
equation      write comp a  b  c  comp  and  or  xor  represent component and     or   xor   gate inputs a  b output c  write
comph  a  b  c  represent corresponding encapsulated component health variable h 
so 
comph  a  b  c    comp a  b  c    xor h  c    c 
   

fim etodi   tern   k alech   c odish

view
comph  a  b  c 

 constraints   

constraint boolean variables a  b  c h  given notation  system depicted
figure   modeled following constraints 
xorhx   a  b  z    andha   a  b  z    xorhx   z    c  d 
andha   z    c  z    orho   z    z    e 
finally  add constraints representing system components additional cardinality
constraint 


n

sum leq  hc c comps   k 
 constraint   
specify integer constant k number faulty components must k 
example  system depicted figure   constant k  introduce constraint
sum leq  hx    hx    ha    ha    ho     k   later require satisfy constraints
model minimize value k 
summarize presentation basic model  show complete constraint model
minimal cardinality diagnosis mbd problem figure    integer value k 
solution constraints diagnosis cardinality k 
xorhx   a  b  z    andha   a  b  z    xorhx   z    c  d 
andha   z    c  z    orho   z    z    e 
sum leq  hx    hx    ha    ha    ho     k 
a   b   c   d   e  
type constraint model solved encoding cnf formula applying
sat solver  repeatedly seeking solution decreasing values k find minimal
cardinality diagnosis  however  apply basic modeling  instead refine
described rest section 
    encoding cardinality constraints
encoding cardinality constraints cnf topic large body research papers  many
these  described een sorensson         based use batchers oddeven sorting network  batcher         sorting network boolean circuit n inputs n
outputs  given boolean values inputs  output consists values sorted  say 
zeroes ones  context apply sorting network n inputs health
variables n components given system  n outputs sorted values  now 
encode k health variables take value false assert  k     th output
sorting network one  outputs sorted implies last n k outputs
ones thus imposing k remaining outputs zero  looking backwards
sorting network implies k inputs take value false 
sorting networks  boolean circuits straightforward encode cnf formula 
batchers odd even construction results cnf o n log   n   clauses 
improvements enable encoding o n log   k   clauses constrain sum n boolean
inputs less k  asn  nieuwenhuis  oliveras    rodrguez carbonell              codish
   

fia n ovel sat based pproach odel based iagnosis

  zazon ivry         paper encode cardinality constraints cnf using bee  metodi  
codish        metodi et al         takes improved approach 
    cones sections
reasoning relations components system description sd enables infer additional constraints number unhealthy components certain subsystems sd 
constraints compiled cnf  help boost search  sat solver  minimal
cardinality diagnosis  proposition   enables diagnosis algorithm focus top level diagnoses
based partitioning system cones  cone contains one unhealthy component  without loss generality  assumed dominator cone 
restrict sat based search top level minimal cardinality diagnoses simply add
following constraints denotes set dominated components 
v

 constraint   

cd hc

introducing constraints indicate healthy components reduces number  unassigned  health
variables hence boosts search minimal cardinality diagnosis  section   show
reasoning cones restrict search top level diagnoses improves considerably search
minimal cardinality diagnosis 
motivated utility partitioning system cones  seek general partitioning 
enables apply similar cardinality constraints larger subsystems components 
end introduce notion section  denote sysout c  set system outputs
occur end path component c  example  system depicted figure  
sysout c       o    o    sysout c       o    o    
definition    section  given system description sd components comps define disjoint
partitioning comps   s  s  sn every c    c  comps   c  c 
section si sysout c      sysout c    

c 
c 
c 

c 
c 

s 

s 

c 

s 

c 

c 

c 

c  

o 
s 

s 

o 

o 

figure    partitioning system cones sections 
figure   shows partitioning system maximal cones sections  cones depicted dotted lines  sections dashed  example  components  c    c    form
cone  section s  consists three cones  observe partitioning system sections
done polynomial time demonstrated algorithm   presented below  given partitioning
   

fim etodi   tern   k alech   c odish

 s            sn   sections  introduce constraint model following constraints improve encoding hence subsequent search minimal cardinality diagnosis 
section si   constraint


n

sum leq  hc c si   bi  
 constraints   
expresses sum negated health variables si bounded constant bi
smaller following two bounds number unhealthy components section
si    a  number outputs si    b  value  sysout c   component
c si   note definition    value c si   justify statement
proposition   
illustrate utility sections  consider system given figure   partition
  sections  observe section labeled s    outputs  component c s 
  corresponding system outputs   sysout c         so  b    min       hence  
upper bound number unhealthy components s    improvement
reasoning cones bound number unhealthy components s   
 since three cones   similarly  b    min        b    min        b    min      
b    min       
reasoning constraints number faulty components per section facilitates
mbd encoding another way  constraints   already encoded number faulty
components per section  numbers partial sums context constraint  
specifies total number faulty components system reused encoding 
following justifies constraints    
proposition   let hsd  comps   obs mbd problem  sd section  c component minimal cardinality diagnosis  then   a  number outputs s 
 b  value  sysout c   bounds number unhealthy components  from   s 
proof  statement regarding number outputs follows directly assertion
de kleer        number outputs  sub   system bound number
unhealthy components  so  remains prove statement regarding  sysout c   
assume premise proposition  denote      k  s      so k   assume
contradiction    sysout c    construct diagnosis   less k unhealthy
components  first note obvious  given propagate observed system inputs
system outputs step choose component known inputs produce
normal output component healthy  opposite normal output otherwise 
diagnosis process result contradictions propagated outputs
observed outputs 
now  take       s   yet  diagnosis      propagate observed system
inputs way   now    diagnosis
flipped system outputs  those contradict observed outputs   flipped output
must due one unhealthy components marked healthy  
sysout c   consider component g outputs o  g     remove it 
g       add it  so    diagnosis k          k    sysout c     k 
algorithm   describes partition system sections  denoting components
outputs system comps    c            cn   outs    o            om    n boolean
   

fia n ovel sat based pproach odel based iagnosis

matrix b computed bij   true oj sysout ci   false otherwise  figure   shows
example matrix b system figure    so  definition    pair components ci   cj
section row row j matrix b identical  instance  section
s  includes components c  c   since system output o  identical  computational
complexity partitioning process complexity running graph search algorithm
every system output worst case o n  m   algorithm returns mapping
components bit vectors seen section identifiers  so  algorithm returns
mapping components sections 
algorithm   partitioning system sections
input  system  view graph 
output  partitioning system sections
   c            cn  
system components
outs
   o            om   system outputs
b
   bij  
n boolean matrix
 oj outs  
apply dfs reverse edges system  source   oj
 ci comps  
bij
oj  

   ci reachable
return ci   hbi            bim   n

   denote 

  
  
  
  
  

comps

example    partition sections  consider
 abstract  system depicted figure   comps    c            c    
outs    o            o     boolean matrix evaluated application algorithm   illustrated
figure   

figure    partitioning system
figure   sections
another benefit partitioning sections  identification cones may performed per section efficient  works because  component x dominated component g sysout x     sysout g  implying components cone
always section  example  figure   component c  dominated c 
sysout c      sysout c       o    o    
recursively defined algorithm   shows compute cones given partition sections 
computes set dominators component c section system  denote
succ c  set components c feeds directly  c feeds component
dominated itself  otherwise  c dominated c  c 
dominated elements succ c   instance  given section s  component c  figure  
succ c       c     next recursive call succ c    include component s 
   

fim etodi   tern   k alech   c odish

 condition line    thus c  returned  line     union calls  c    c    returned
cone  line    
straightforward implement algorithm   efficiently using memoization table avoid
recomputing dominators components already encountered  since system directed acyclic
graph  recursion algorithm   halt leaf node reached  thus complexity
calculating dominators every component c section o  s      given sets dominators per component  straightforward specify set maximal cones  component c
dominator maximal cone  dominated itself  maximal cone corresponding
c set components c dominator 
find cones system  algorithm   applied per component per section 
cost depends size largest section  contrast  without partition sections 
algorithm applied  considering components system instead
components section  practice shows partition sections benefits computation
cones 
algorithm   dominators  component c  section s  system c 
input  component c section system c
output  set dominators c



   denote  succ c    c  c output c input c 
    succ c  s   
  
return  c 
dominators c    s  c 
c  succ c 

   else
  
return  c 

    modeling observation boosting search
let obs   obs denote sets variables assigned true false obs   respectively  then 
model observation add obvious constraints 
v
v
 constraint   
xobs x
xobs   x
improve search minimal cardinality diagnosis one introduce upper bound
minimal cardinality  number outputs system upper bound minimal
cardinality  de kleer         bound  well section specific constraint given
 constraints     ignores observed inputs outputs  siddiqi huang        propose
obtain tighter upper bound minimal cardinality given observation propagating
input values system  taking upper bound number contradictions
observed propagated outputs  example  considering mbd problem
figure    k     upper bound size minimal cardinality diagnosis
system   outputs  siddiqi huangs proposal states   upper bound
propagating inputs system one contradiction observed
outputs 
siddiqi huangs        proposal intuitively appealing  correct case
observed output input another component  fact results restricted
systems case  work example figure    propagating
   

fia n ovel sat based pproach odel based iagnosis

figure    minimal cardinality diagnosis size    propagating observed inputs leads  
contradiction observed outputs 
observed inputs system assigns   outputs indicating single contradiction
observation  on o     however  smallest diagnosis example cardinality   
example contrived         observations system         xxx benchmark 
exhibit minimal cardinality diagnosis larger  erroneous  bound obtained counting
conflicts propagated observed outputs 
algorithm   computing upper bound number faulty components propagating observed inputs counting conflicts  algorithm computes diagnosis     
thus upper bound minimal cardinality diagnosis  basic idea propagate inputs
long contradict observed  already computed  outputs  components
system processed one time  line   select component c whose inputs
already determined  initially system inputs determined   c consider
already determined output  oobs   denote oobs   output yet determined 
consider propagated output oprop obtained propagating inputs c assuming c healthy  three cases  lines       c already determined output
fix output oprop mark c healthy  c already determined output
consistent oprop mark c healthy  otherwise mark c healthy 
propagate output  which already determined  
algorithm   find diagnosis  and upper bound    min  card  
input  system components  comps   observation  obs
output  diagnosis
   c comps    
    c     
  
select c c inputs c determined
  
oobs value output c  n a undefined 
  
oprop value propagating inputs c  assume c healthy 
  
 oobs   n a
  
set output c oprop mark c healthy
  
else  oobs   oprop  
  
mark c healthy
   
else
   
mark c faulty    c 
   
c c    c 
    return

algorithm   terminates marked components healthy faulty
fact determined correct diagnosis  applying algorithm   provides upper bound
minimal cardinality diagnosis number components marked faulty returned
diagnosis  note algorithm   correct given probes  observed values outputs
   

fim etodi   tern   k alech   c odish

internal components   assuming components maintained data structure
components sorted  topologic  according depth  algorithm   performed single
linear traversal data structure complexity o  comps    
example application algorithm    consider circuit figure    propagating
inputs gate a  gives output   contradiction observation o    hence  mark a 
unhealthy propagate observation o      input a  together i       results
additional contradiction observation o      mark a  unhealthy too 
report    a    a    hence value   upper bound minimal cardinality 
let kub bound found application algorithm    refine constraint   introduce
instead 

n


sum leq  hc c comps   kub  
 constraint     
appreciate impact algorithm   note that  benchmark considered
paper  algorithm   determines upper bound equal actual minimal cardinality    
       observations considered  course  even given precise upper bound  mbd
algorithm still needs validate minimality  sat based approach requires one single
iteration underlying sat solver  typically  hardest iteration involves call
unsatisfiable largest cardinality instance unsatisfiable 
    compiling constraints cnf
metodi codish        introduced compiler called bee encodes finite domain constraints
cnf  besides facilitating encoding process  compiler applies partial evaluation
optimizations simplify constraints encoding cnf  particular  applies
equi propagation  metodi  codish  lagoon    stuckey        process identifying
equalities literals  and constants  implied equations given constraint 
x l implied constraint  where x variable l literal boolean constant  
occurrences x replaced l  reducing number variables subsequent cnf
encoding  illustrate constraint simplification diagnosis circuit figure    consider
following constraints  we omitted constraints contribute
example  
   
   
   
   
   

xorhx   a  b  z    andha   a  b  z    xorhx   z    c  d 
andha   z    c  z    orho   z    z    e 
sum leq  hx    hx    ha    ha    ho     k 
a   b   c   d   e  
ha      ha     

constraints lines         comprise basic constraint model described section     
constraints line     model observation  constraints line     express without
loss generality dominated components  a    a    cone  a    a    o    healthy 
observe following equi propagation steps 
    a       b      xorhx   a  b  z        z    hx   
    a       b       ha       andha   a  b  z        z      
   

fia n ovel sat based pproach odel based iagnosis

    c       ha       andha   z    c  z        z    z   
    c       d      xorhx   z    c  d      z    hx   
    e       z       orho   z    z    e      z    ho   
 and given  equalities literals obtain substitution 
 
 
     b      c           e      z    hx    z      
 
z    hx    hx    hx    ha       ha       ho    hx 
applying specialize constraint system get 
   
   
   
   
   

xorhx         hx    and           
xorhx   hx         
and   hx       hx    or hx        hx      
sum leq  hx    hx          hx     k 
                   
       

now  constraints tautologies remove them  remains single
constraint 
    sum leq  hx    hx    hx     k 
satisfied k     hx       implied
ha       ha       hx       ho       example illustrates equi propagation partial evaluation applied simplify constraints prior encoding cnf 
summarize following observations 
   constraint model mbd polynomial size system  component
contributes constraint fresh health variable  cone contributes assignment
health variables dominated components  section contributes cardinality constraint  finally observation contributes assignment input variables
system 
   constraint simplification using bee polynomial size constraint model 
because   a  simplification step reduces number boolean variables model
least one linear number steps   b  step checks applicability
fixed number simplification patterns constraint 
   cnf encoding constraint model polynomial size  constraints
introduces polynomial number clauses cnf  all constraints supported
bee property  

   process implementation
section summarize different phases diagnosis process approach 
section     focus case seek single minimal cardinality diagnosis 
section      case seek minimal cardinality diagnoses 
   

fim etodi   tern   k alech   c odish

    single minimal cardinality diagnosis
process single minimal cardinality diagnosis consists four phases  let  
hsd  comps   obs mbd problem  first two phases construct constraint model 
first  focusing sd  introduce constraints independent observation 
per observation introduce constraints  third phase encode constraint model
cnf  k k upper bound size minimal cardinality diagnosis 
fourth phase  solving k using sat solver results diagnosis cardinality k 
detail four phases 
phase    modeling system  offline   system sd first preprocessed partition
sections  algorithm    cones  algorithm     then  introduce constraints   model sd
terms components behavior introduce constraints   bound number unhealthy
components per section  finally  using information cones  add constraint   asserts
that  without loss generality  dominated components healthy  system preprocessing performed offline  per system 
phase    modeling observation  online   constraint   added model observation
constraint    added bound total number unhealthy components upper
bound kub obtained application algorithm   
obs  

phase    encoding  constraint system simplified online  observation
encoded cnf k   applying optimizing cnf compiler  metodi et al          parameter k
reflects bound set constraint    bound number unhealthy components diagnosis 
initially  k computed algorithm   
phase    solving  compute diagnosis    seek satisfying assignment encoding  k  
applying cryptominisat solver  soos         set health variables assigned
false assignment  denoting      k     seek satisfying assignment  time
 
formula k     satisfying assignment found  indicates smaller diagnosis     
otherwise  minimal cardinality  process invoked repeatedly  time finding
 
smaller diagnosis  k   formula k   satisfiable  then  diagnosis found
previous iteration minimal cardinality 
facilitate search minimal cardinality diagnosis  apply sat solver wrapper  scryptominisat  metodi      b   scryptominisat takes input cnf formula  k  
boolean variables representing number k  provides satisfying assignment minimizes k  scryptominisat takes advantage incrementality underlying sat solver
maintains learned clauses consecutive calls add clauses 
algorithm   illustrates process finding single minimal cardinality diagnosis  identified
line      returning set minimal cardinality diagnoses  line     
    minimal cardinality diagnoses
find minimal cardinality diagnoses first apply process described section     find
single minimal cardinality diagnosis  provides us value k   indicating number
faulty components minimal cardinality diagnosis 
then  enumerate set top level minimal cardinality diagnoses  each size k    
apply additional functionality scryptominisat allows enumerate  possibly
   

fia n ovel sat based pproach odel based iagnosis

algorithm   satbd
input  system sd components comps observation obs
output    set minimal cardinality diagnoses
  
  
  
  
  
  
  
  
  
   
   
   
   
   
   
   
   
   
   
   
   
   
   

   phase    offline pre processing

sections partition sd sections
constraints
 s sections 
 c s 
add constraints   constraints
dominators dominators c  s  sd 
 dominators     
add constraint   component c constraints

   algorithm  

   describes normal behavior component c
   algorithm  
   sets dominated gates healthy

   phase    modeling observation

add constraint   constraints
find initial diagnosis
add constraint    constraints kub     

   add constraints representing obs
   algorithm  

   phase    encoding

bee constraints 

   run constraint compiler obtain cnf

   phase    solving

mc scryptominisatminimize k  

   find min  card  diagnosis  assignment minimizes k     mc  

   finding diagnoses minimal cardinality

cnf kub    m c   
  ld scryptominisatallsolutions  
  ld  
add diagnoses expanded
return

   

   restrict constraint    use kub    m c  
   find top level diagnoses
   proposition  

fim etodi   tern   k alech   c odish

name
     
     
     
c   
c   
c   
c    
c    
c    
c    
c    
c    
c    

 comp 
  
  
  
   
   
   
   
   
    
    
    
    
    

system details


offline
  
 
    
 
 
    
 
 
    
  
 
    
  
  
    
  
  
    
  
  
    
  
  
    
       
    
  
  
    
       
    
  
  
    
       
    

feldman
 obs 
   
   
   
   
   
    
   
   
    
   
    
   
    

dxc   

    

     

     

   
   
   
   
  
  
  
  
  
  
  
   
  

 
 
 
 
 
  
  
 
  
 
  
 
  

 
 
 
 
 
  
 
 
 
 
 
 
 

 obs 
  
  
  
  
   
   
  
   
   
  
   
 
   

    

     

     

   
   
   
   
  
  
  
  
  
   
  
   
  

 
 
 
 
  
  
  
  
  
 
  
 
  

 
 
 
 
 
  
 
 
 
 
  
 
  

sidd 
 obs 
   
   
   
   
   
   
  
  
  

table    benchmark suite  systems   xxx iscas     observations  feldman  dxc   
siddiqi 

specified time out  all  specified number of  satisfying assignments given cnf  apply
option enumerate satisfying assignments formula  k described section    
k   k   
finally  based proposition   expand obtained top level diagnoses provide minimal cardinality diagnoses  note observation tld expanded easily
minimal cardinality diagnoses applies diagnosis algorithm  such  diagnosis algorithms
general focus  compared finding tlds  instead finding minimal cardinality
diagnoses 

   experimental results
section presents experimental evaluation proposed sat based encoding mbd 
section      consider search single minimal cardinality diagnosis compare
performance satbd algorithms  ha   feldman   van gemund         cda   williams
  ragno        safari  feldman et al       a   section      consider search
minimal cardinality diagnoses compare satbd algorithms  hdiag  siddiqi   huang 
      dcas  siddiqi   huang         finally  section      evaluate impact
various components sat based encoding mbd  experiments run intel core
  duo  e         ghz cpu   gb memory  linux  ubuntu lucid  kernel           generic 
unless stated otherwise  entire set tools  range benchmarks  well detailed
report results found online  metodi      a  metodi  stern  kalech    codish      b  
table   provides basic details concerning systems three observation sets benchmark suite  systems   xxx  hansen  yalcin    hayes         described first   rows 
iscas     brglez et al          described following    rows  left column
table specifies system name  next four columns  from left  describe systems 
numbers components  inputs outputs systems  preprocessing time
per system sat based approach  includes actions performed per system
described section      decomposing system sections cones computing bounds
per section 
   

fia n ovel sat based pproach odel based iagnosis

rest columns divided three groups describing experiments three observation sets  first two describe observation set generated feldman et al       a 
dxc    observation set used diagnosis competition  dxc        applied
experimentation evaluate search single minimal cardinality diagnosis  minimal
cardinality diagnoses observations       columns
two groups indicate number observations distribution observations according
size minimal cardinality diagnoses  observations sets considered hard
many them  high minimal cardinality diagnoses  third group  the rightmost column
table  presents observation set generated siddiqi huang        minimal
cardinality bounded   observations distributed uniformly according size
minimal cardinality diagnoses  set used evaluation search minimal
cardinality diagnoses 
table   illustrates comprehensive experimental benchmark involving total        observations varied minimal cardinality diagnosis size  observe  offline  preprocessing
time per system negligible  instance  reprocessing largest system  c      takes less
two seconds 
    satbd vs  mbd algorithms  single minimal cardinality diagnosis
compare satbd algorithms  ha   feldman   van gemund         cda   williams
  ragno        safari  feldman et al       a  application search single minimal cardinality diagnosis  ha  cda  based complete algorithm find minimal
subset diagnoses contain diagnoses  configured
first minimal subset diagnosis guaranteed minimal cardinality configuration apply comparison satbd  safari applies algorithm based stochastic
search guarantee minimal cardinality even minimal subset diagnosis  feldman et al       a  report even single double fault cardinalities  safari always
find minimal cardinality  so  expense minimality  safari often faster  comparing
ha  cda  
name

ha 
succ 
time
rate 
sec 

     
    
     
     
     
     
c   
    
c   
    
c   
    
c    
    
c    
   
c    
    
c    
   
c    
   
c    
    
c    
   
   sec timeout
c    
   

cda 
succ 
time
rate 
sec 

succ 
rate 

safari
min diag 
card  
ratio

    
    
    
    
    
    
    
    
    
    
     
    
    

    
     
     
    
    
   
   
   
   
   
   
   
   

    
    
    
    
    
    
 

     
     
     
     
     
     
     
     
     
     
     
    
   

    
    
    
    
   
    
   
    
    
   
   
    
 

     

   

   

    

    

time
sec 

satbd
succ 
time
rate 
sec 

    
    
    
    
    
    
    
    
    
    
    
    
 

    
    
    
    
    
    
    
    
    
    
     
     
 

     
     
     
     
     
     
     
     
     
     
     
     
    

    
    
    
    
    
    
    
    
    
    
    
    
    

    

     

     

    

table    single minimal cardinality diagnosis  feldmans observations     sec  timeout  
   

fim etodi   tern   k alech   c odish

algorithm
system
     
     
     
c   
c   
c   
c    
c    
c    
c    
c    
c    
c    

min
    
    
    
    
    
    
    
    
    
    
    
    
    

ha 
max
     
    
    
     
     
     
     
     
     
     
     
     
    

st  dev 
    
    
    
    
    
    
    
    
    
    
     
    
    

min
    
    
    
    
    
    
 

cda 
max
st  dev 
     
    
    
    
     
    
     
    
    
    
     
    
 

min
    
    
    
    
    
    
    
    
    
    
     
     
     

safari
max
st  dev 
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
     
    
     
    
     
    

min
    
    
    
    
    
    
    
    
    
    
    
    
    

satbd
max
st  dev 
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
     
    

table    single minimal cardinality diagnosis  feldmans observations  additional statistics 
table   presents evaluation focusing feldmans observations imposing    second timeout  except bottom line   columns indicate algorithm  percentage observations solved within prescribed timeout  succ  rate    average search time  time
sec   average computed set observations excluding timeouts  satbd 
search time      includes actions performed per observation described section
     modeling observation  online        excludes cost actions performed per system described table   section      column offline       includes times adding
observation cardinality constraints  encoding cnf solving scryptominisat 
results table   show clearly satbd outperforms evaluated algorithms 
terms success rate well terms average runtime  satbd outperforms
safari succeeds compute diagnosis almost systems  however 
small percentage minimal cardinality indicated column min card 
shows percentage  excluding timeouts  observations diagnosis found
safari actually minimal cardinality  show  column titled diag  ratio 
ratio average cardinality diagnoses found safari average minimal
cardinality  example looking data system            diagnoses found
safari minimal  average diagnosis size found      times larger average
size minimal cardinality diagnosis  observe satbd computes verifies minimal
cardinality diagnoses even observations minimal cardinality     best
knowledge  algorithm succeeded compute minimal cardinality diagnosis hard
observations 
table   details additional statistics running times presented table    showing
minimum  maximum  standard deviation runtime solved observations 
seen  standard deviation satbd small compared algorithms 
displayed statistics cases solved within    second timeout  table entries
  mark cases corresponding algorithms could find minimal cardinality diagnosis
 within timeout  even single observation 
observe table               observations system c     solved satbd
within    second timeout  only    observations solved   observations are 
however  solved within    seconds each  indicated last row table  one may observe
satbd solves observations given    seconds  algorithms still able
   

fia n ovel sat based pproach odel based iagnosis

solve them  exception safari  given extended    seconds timeout  safari
able solve almost observations system  returns minimal cardinality
diagnoses     cases  average  size diagnosis found safari
     times larger actual minimal cardinality 
name

ha 
succ 
time
rate 
sec 

cda 
succ 
time
rate 
sec 

succ 
rate 

safari
min
card  

time
sec 

satbd
succ  time
rate 
sec 

     
     
     
c   
c   
c   
c    
c    
c    
c    
c    
c    
c    

    
     
     
    
    
    
   
   
    
    
   
   
   

    
     
     
    
   
   
   
   
   
   
   
   
   

     
     
     
     
     
     
     
     
     
     
     
     
   

  
  
  
  
 
  
 
  
  
  
 
   
 

    
    
    
    
    
    
    
    
    
    
     
     
 

     
     
     
     
     
     
     
     
     
     
     
     
     

    
    
    
    
    
    
    
    
    
    
     
    
    

    
    
    
    
    
    
 

    
    
    
    
    
    
    
    
    
    
    
   
    

table    single minimal cardinality diagnosis  dxc    observations     sec  timeout  
table   shows evaluation dxc    benchmark format table  
 except omit details regarding size diagnoses found safari   results
exhibit trend  sat based method substantially faster previous algorithms  note benchmark even contains observations minimal cardinality diagnoses
        solved satbd    seconds timeout  table   provides additional
statistics runtimes format table    too  see small standard
deviation satbd compared algorithms  note data c     system
given  single observation system dxc    observation set 
figure   details evaluation single minimal cardinality diagnosis feldmans observations four systems  from smaller larger   system plot average runtime
find single minimal cardinality diagnosis  including timeouts  function value
minimal cardinality  black diamond labeled timeout marks time limit 
algorithms halted 
typically  diagnosis problem becomes harder minimal cardinality increases  first
consider three plots figures  a   b  c  two upper curves correspond systems
ha  cda  quickly converge    seconds timeout  curves safari
less constant minority diagnoses actually minimal cardinality    
c         c       c       performance safari affected
cardinality since first finds arbitrary diagnosis proceeds stochastically minimize
diagnosis using pre defined number attempts  process involves consistency checks
affected size system cardinality diagnosis 
consider plot figure  d omit curves ha  cda  depict
constant    second timeout  performance safari less constant  around
average      seconds      diagnoses found actually minimal cardinality 
contrast  satbd considerably faster scales solve even hardest observations 
   

fim etodi   tern   k alech   c odish

algorithm
system
system
     
     
     
c   
c   
c   
c    
c    
c    
c    
c    
c    

min
min
    
    
    
    
    
    
    
    
    
    
    
    

ha 
max
max
     
    
    
     
     
     
    
     
     
    
     
    

st  dev 
st  dev 
    
    
    
    
    
    
    
    
    
    
    
    

cda 
max
st  dev 
max
st  dev 
     
    
    
    
    
    
     
    
    
    
     
    
 

min
min
    
    
    
    
    
    
 

safari
max
st  dev 
max
st  dev 
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
     
    
 

min
min
    
    
    
    
    
    
    
    
    
    
     
 

min
min
    
    
    
    
    
    
    
    
    
    
    
    

satbd
max
st  dev 
max
st  dev 
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
     
    
     
    

    timeout

   

time  sec    log scale

time  sec    log scale

table    single minimal cardinality diagnosis  dxc    observations     sec  timeout   additional
statistics 

  
cda 

ha 

safari

satbd

 
   

  
cda 

ha 

safari

satbd

 
   

    

    
 

 

 
 
 
  
minimal cardinality

  

  

 

 a  system c        sec  timeout  
   

time  sec    log scale

  
cda 

ha 

safari

 

 

 

                         
minimal cardinality

 b  system c        sec  timeout  

    timeout

time  sec    log scale

timeout

satbd

 

timeout

  

safari

satbd

 

   

   

    

    
 

 

 

 

                          
minimal cardinality

 

 c  system c         sec  timeout  

 

 

 

                       
minimal cardinality

 d  system c         sec  timeout  

figure    single minimal cardinality diagnosis  feldmans observations  average search time per
size minimal cardinality diagnosis 

results section clearly indicate sat based approach outperforms
three algorithms search single minimal cardinality diagnosis 
   

fia n ovel sat based pproach odel based iagnosis

name
c   
c   
c   
c    
c    
c    
c    
c    
c    

intelxeon x         ghz   gb ram
hdiag
dcas
succ 
time
succ 
time
rate 
sec 
rate 
sec 
     
    
     
    
     
    
     
    
    
    
    
    
    
    
    
    
    
      
    
     
    
      
     
    
   
    
     
   
    
      
   
    
      

intel core   duo e          ghz   gb ram
satbd
succ 
tld
time
tld

rate 
sec 
sec 
count
count
     
    
    
   
  
     
    
    
   
   
     
    
    
    
      
     
    
    
   
      
     
    
    
    
       
     
    
    
   
    
     
    
    
    
      
    
      
      
      
     
     
    
    
    
     

table    siddiqis observation set  search minimal cardinality diagnoses       sec  timeout  
    satbd vs  mbd algorithms  minimal cardinality diagnosis
compare satbd algorithms hdiag  siddiqi   huang        dcas  siddiqi
  huang        application search minimal cardinality diagnosis  algorithms search complete set minimal cardinality diagnoses  consider observations
generated siddiqi huang        minimal cardinality bounded   
table   presents results evaluation  results hdiag dcas quoted
siddiqi huangs work        experiments reported intelxeon x    
   ghz   gb ram  present results systems siddiqi huang reported
results  although machines differ  with advantage satbd   results show clear
advantage satbd faster orders magnitude larger systems 
three algorithms table reports on 
succ  rate  indicating percentage observations algorithm finds
minimal cardinality diagnoses within      second timeout 
time sec  indicating average computation times find minimal cardinality diagnoses
 taking average set observations time out  
satbd report
tld sec  average runtime compute top level diagnoses 
tld count number top level diagnoses 
count total number minimal cardinality diagnoses found 
table   illustrates satbd clearly outperforms hdiag dcas  succeeds compute
minimal cardinality diagnoses observations systems except c    
succeeds        observations compared       dcas  note
higher success rate  average runtimes satbd involve harder observations solved
dcas 
observe diagnosis time satbd spent find top level diagnoses indicated column tld sec  cost compute minimal cardinality diagnoses indicated
column time sec difference two columns negligible  reflects
   

fim etodi   tern   k alech   c odish

fact set minimal cardinality diagnoses derived cross product representation
set minimal cardinality diagnoses  observe number tlds  column tld
count  small comparison huge number minimal cardinality diagnoses  column
count   focus tlds essential additional solution invokes additional call
sat solver  using sat solver find minimal cardinality diagnoses directly would
hopeless due sheer number 
    impact components satbd
proceed illustrate impact various components sat based encoding mbd 
satbd designed using variety techniques distinguish simple vanilla encoding mbd problem sat problem described section      present evaluation
impact techniques based several experiments using following five configurations sat based system  configurations incremental  starting basic
model  one adds another component  ending final model applied satbd 
   vanilla  minimal basic sat encoding mbd described section     
assume naive upper bound minimal cardinality determined number
outputs given system 
   improved cardinality bound  assume vanilla setting consider
improved bound minimal cardinality diagnosis using algorithm   
   e p  setting previous applies equi propagation constraint compiler metodi codish              optimize encoding described section     
   cones  setting previous partitions system cones
adds constraints restrict search find top level diagnoses  tlds   described
section   
   sections  setting previous partitions system
sections introduces corresponding redundant cardinality constraints described section     
figure   illustrates impact five settings search single minimal
cardinality diagnosis      observations feldmans observation set system c    
horizontal axis  consider observations according size minimal cardinality
diagnosis  vertical axis  illustrate average runtime seconds  runs apply    
second timeout  choose system c    present results as   a  midsize system
observation sets contain observations minimal cardinality diagnosis larger
     b  largest system exhibits interesting behavior five configurations
without many timeouts shadow results  larger systems  c    
c     considered below  last two five configurations exhibit interesting curves 
three configurations timeout observations 
upper curve figure   describes vanilla setting one may observe cardinality increases curve converges     second timeout  second curve describes
improved bound setting illustrates impact algorithm    especially observations minimal cardinality diagnoses size       here  using improved bound reduces
   

fia n ovel sat based pproach odel based iagnosis

figure    impact different settings search single minimal cardinality diagnosis
system c    

number iterations sat solver source improvement  explain
see improvement minimal cardinality diagnosis involves larger number
faults  consider first large minimal cardinalities  results meaningless
upper curves converge timeout  medium sized minimal cardinalities  consider
techniques overwhelming part runtime spent last unsat iteration  moreover  number iterations sat solver techniques
less same  system c       outputs naive bound used
vanilla setting jumps iteration smaller bound  but using
one by one decrement   given evaluation might consider omitting constraints
improved lower bound depending parameters instance  however  cost running
algorithm   negligible always impose corresponding constraints 
third curve  e p   shows additional impact applying equi propagation
constraint compiler  results substantial speedups first two settings  example 
finding diagnosis minimal cardinality    requires average      seconds setting
comparison       seconds without it  two lower curves graph coincide 
fourth setting  cones  makes dramatic impact performance system c    
average runtime required find first minimal cardinality using setting    
seconds observations  includes finding diagnoses minimal cardinality       
   milliseconds  average  runtimes setting small cannot observe
additional added value applying fifth setting  sections   end consider
next experiment comparison using two larger systems  namely c     c     
figure   illustrates impact fifth setting involves partitioning system
sections  left graph illustrates impact sections seeking single minimal cardinality
diagnosis observations system c     right graph illustrates impact
seeking top level minimal cardinality diagnoses  tlds   lower curve  in graphs   summarizes results using sections upper curve without  example  observations
minimal cardinality     sections finding first minimal cardinality diagnosis requires
   

fim etodi   tern   k alech   c odish

figure    impact sections cones search single minimal cardinality diagnosis  left 
search tlds  right  using system c     

figure    impact sections cones search single minimal cardinality diagnosis  left 
search tlds  right  using system c     
average      seconds  without requires      seconds  observations 
sections  find tlds average   seconds  without requires    seconds 
similar trends illustrated figure   depicts information system c     
apply timeout     seconds  timeout encountered          observations searching minimal cardinality tlds  timeout observations considered
average runtimes   however  even    observations  using sections provides average
    tlds without         vs        tlds  reaching timeout 
table   details  iscas    benchmark feldmans observations  average sizes
sat encodings using full satbd algorithm  table indicates number
system
  components
  variables
  clauses

c   
   
   
   

c   
   
   
    

c   
   
   
   

c    
   
    
    

c    
    
   
    

c    
    
    
    

c    
    
    
     

c    
    
    
     

c    
    
    
     

table    average sat encoding sizes iscas    benchmark feldmans observations 
   

fia n ovel sat based pproach odel based iagnosis

components system number variables clauses resulting cnfs  taking
average observations feldman benchmark  notably  indicated table 
sat encodings extremely small  in worst case  less three cnf variables ten
cnf clauses per system component 

   discussion
paper focuses mbd problem considering possibly multiple faulty components weak
fault model  presentation restricted assume that  every component single output 
observation includes single input output  queries observations specific components  probes   information regarding probability component failures  even
restrictions  problem addressed paper computationally hard
focus many prior works model based diagnosis literature  feldman   van gemund       
williams   ragno        feldman et al       a  siddiqi   huang              
discuss briefly applicability approach general setting  deeper
analysis adapt approach general setting research topic own 
believe success applying sat solvers mbd problems simplified setting paves
way application general settings 
    boolean extensions
approach applies directly setting components described propositional
formulae mode fault ignored  i e   weak fault model setting   boolean
circuits one straightforward example obvious community
focused attention  examples similar assumptions sat based approach
expected apply directly include works by  abreu et al         authors model
software components propositional formulae apply mbd algorithm find bugs  kalech
kaminka              authors model robots multi robot system diagnose
violation coordination constraints among robots  felfernig et al         authors
model finite domain constraints diagnose inconsistent constraint sets 
note restricting components single output really restriction straightforward represent component multiple outputs conjunction single output components  way partition cones sections fully compatible multiple output
components 
    probabilities
real world applications mbd typically come information regarding probability
component faulty many mbd algorithms exploit information prioritize diagnoses
respect likelihood  interalia  see de kleer   williams        williams   ragno 
       sachenbacher williams        showed incorporate fault probabilities treedecomposition diagnosis algorithm  extending approach tonconsider
probabilities
straightfi
forward  essential difference constraint    sum leq  hc c comps   k  
specifies objective function n
aim minimize fiit replaced
constraint takes

probabilities account  sum leq  hc    pc   c comps   k  pc probabil   

fim etodi   tern   k alech   c odish

ity component c faulty  so  constraints likely faulty contribute less
objective function  note straightforward normalize constraint coefficients
integers  constraints form called pseudo boolean constraints encoding
cnf well studied  een   sorensson        
    testing probes
another extension straightforward model sat concerns testing probing  de kleer
  williams         here  diagnosis algorithm given multiple observations input output
behavior system  in testing  additional observations internal wires system  in
probing   assumption faulty components consistently faulty  invalidate
diagnoses inconsistent multiple observations  similarly  probes invalidate diagnoses consistent new internal observation  methods run iteratively
single consistent diagnosis  techniques straightforward encode sat 
testing  improve diagnosis simply take conjunction encodings respect
different observations  using health variables  probing take conjunction
internal observations  main challenge methods reduce number
probes  or tests  required find actual diagnosis  common  greedy  approach address
challenge choose probe  test  maximizes information gain described feldman
et al       b  
    strong fault model
consider extension approach setting components associated
wider range possible faulty behavior modes  called strong fault model 
instance  setting circuit component may stuck    always returns output     stuck
  always returns output     flip  always flips output   struss   dressier        de kleer
  williams         context example  naive sat model may obtained follows 
instead considering single propositional health variable hc   consider one additional varif
s 
able per fault mode  hs 
c  stuck zero   hc  stuck one   hc  flip   now  introduce clauses
f
s 
s 
 a  express fault mode fault  hc hc hc hc     b  express
s 
f
one fault component sum leq  hs 
c   hc   hc        way propositional health
variable hc   before  indicates component healthy diagnosis assignment
fault types component  however  extension requires reconsider definitions
minimal diagnosis cardinality presents new challenge identifying useful partitions
system solving problem sat  consider future work 
    diagnosis physical systems
challenging problem  physical systems typically dynamic  involve components
time dependent behavior  described terms continuous variables  one common approach apply mbd physical systems use qualitative models behavior
system modeled set constraints non numerical  discrete  descriptions  subramanian
  mooney         well known example mbd engine makes relaxations
livingstone model based diagnosis system  williams   nayak         livingstone successfully applied deep space one  first spacecraft nasas new millennium program 
   

fia n ovel sat based pproach odel based iagnosis

first important step sat based approach diagnosis physical systems
provide setting mbd strong fault model able capture probabilities  course 
many additional challenges modeling systems using sat important
feasible challenge 

   conclusion
paper addresses mbd challenge extensively researched   
years wide range papers propose different algorithms  present novel satbased solution problem determine first time  minimal cardinality diagnoses
entire standard benchmarks  present extensive experimental evaluation comparing
algorithm ha   cda   safari  hdiag dcas  results unequivocal  algorithm outperforms others  often orders magnitude  search single minimal cardinality
diagnosis well search minimal cardinality diagnoses  succeed find
verify minimal cardinality diagnosis           observations benchmark
   seconds per observation  remaining       seconds each 
best knowledge  satbd algorithm first algorithm find minimal cardinality
standard benchmarks discussed above  details regarding experimental evaluation
well prototype implementation sat based mbd tool found online  metodi 
    a  metodi et al       b  
major contribution success approach range preprocessing techniques
presented section    impact demonstrated five configurations system
section     full combination fifth configuration  even sat 
related solvers  improve conjecture careful modeling choices involving combinations
techniques invaluable success future mbd algorithms  belief
results paper pave way develop apply sat based methodologies
mbd problems  particular  extensions diagnosis probabilities components
faulty  sequential diagnosis testing probes  and  challenging  diagnosis
physical systems qualitative models  expect methodology  combines
domain dependent preprocessing  clever modeling sat  application tools optimize
cnf encodings  relevant hard problems ai sat based techniques applicable 
acknowledgments
research supported israel science foundation  grant        

references
abreu  r   zoeteweij  p   golsteijn  r     van gemund  a  j  c          practical evaluation
spectrum based fault localization  journal systems software                   
asn  r   nieuwenhuis  r   oliveras  a     rodrguez carbonell  e          cardinality networks
applications  kullmann  o   ed    sat  vol       lecture notes computer
science  pp          springer 
asn  r   nieuwenhuis  r   oliveras  a     rodrguez carbonell  e          cardinality networks 
theoretical empirical study  constraints                
   

fim etodi   tern   k alech   c odish

balakrishnan  k     honavar  v          intelligent diagnosis systems  journal intelligent systems                 
batcher  k  e          sorting networks applications  afips spring joint computing
conference  vol     afips conference proceedings  pp         
bauer  a          simplifying diagnosis using lsat  propositional approach reasoning
first principles  bartak  r     milano  m   eds    international conference integration
ai techniques constraint programming combinatorial optimization problems
 cp ai or   vol       lecture notes computer science  pp        berlin  heidelberg 
springer verlag 
biere  a   heule  m   van maaren  h     walsh  t   eds            handbook satisfiability  vol 
    frontiers artificial intelligence applications  ios press 
brglez  f   bryan  d     kozminski  k          combinatorial profiles sequential benchmark
circuits  ieee international symposium circuits systems  pp           
bylander  t   allemang  d   tanner  m  c     josephson  j  r          computational complexity abduction  artificial intelligence                
codish  m     zazon ivry  m          pairwise cardinality networks  logic programming 
artificial intelligence  reasoning  lpar   pp         
darwiche  a          decomposable negation normal form  journal acm                
de kleer  j     williams  b  c          diagnosing multiple faults  artificial intelligence        
      
de kleer  j          improved approach generating max fault min cardinality diagnoses 
international workshop principles diagnosis  dx  
de kleer  j     williams  b  c          diagnosis behavioral modes  international joint
conference artificial intelligence  ijcai   pp           
dressler  o     struss  p          occm  http   www occm de 
dxc

       
international diagnostic
https   sites google com site dxcompetition  

competition

series 

website 

een  n     sorensson  n          translating pseudo boolean constraints sat  journal
satisfiability  jsat               
el fattah  y     dechter  r          diagnosing tree decomposable circuits  international joint
conference artificial intelligence  ijcai                
feldman  a   provan  g   de kleer  j   robert  s     van gemund  a          solving model based
diagnosis problems max sat solvers vice versa  international workshop
principles diagnosis  dx   pp         
feldman  a          lydia ng  http   www general diagnostics com products 
php 
feldman  a   de castro  h  v   van gemund  a     provan  g          model based diagnostic
decision support system satellites  ieee aerospace conference  pp       ieee 
feldman  a   provan  g     van gemund  a       a   approximate model based diagnosis using
greedy stochastic search  journal artificial intelligence research  jair              
   

fia n ovel sat based pproach odel based iagnosis

feldman  a   provan  g     van gemund  a       b   model based active testing approach
sequential diagnosis  journal artificial intelligence research  jair              
feldman  a     van gemund  a  j  c          two step hierarchical algorithm model based
diagnosis  conference artificial intelligence  aaai   pp         
felfernig  a   schubert  m     zehentner  c          efficient diagnosis algorithm inconsistent constraint sets  artificial intelligence engineering design  analysis manufacturing              
frohlich  p     nejdl  w          static model based engine model based reasoning 
international joint conference artificial intelligence  ijcai   pp         
fujiwara  h   member  s   shimono  t     member  s          acceleration test generation
algorithms  ieee transactions computers               
hansen  m  c   yalcin  h     hayes  j  p          unveiling iscas    benchmarks  case
study reverse engineering  ieee des  test           
jannach  d     schmitz  t          model based diagnosis spreadsheet programs  constraintbased debugging approach  automated software engineering         
kalech  m     kaminka  g  a          towards model based diagnosis coordination failures 
conference artificial intelligence  aaai   pp         
kalech  m   kaminka  g  a   meisels  a     elmaliach  y          diagnosis multi robot coordination failures using distributed csp algorithms  conference artificial intelligence
 aaai   pp         
kirkland  t     mercer  m  r          topological search algorithm atpg  acm ieee
design automation conference  dac  pp         
knuth  d  e          art computer programming  volume  b  pre fascicle  a  section
         satisfiability  unpublished  draft available from  http   www cs faculty 
stanford edu knuth fasc a ps gz 
marques silva  j   lynce  i     malik  s          conflict driven clause learning sat solvers 
handbook satisfiability              
metodi  a       a   scryptodiagnoser  sat based mbd solver  http   amit metodi 
me research mbdsolver 
metodi  a       b   scryptominisat  http   amit metodi me research scrypto 
metodi  a     codish  m          compiling finite domain constraints sat bee  theory
practice logic programming  tplp                   
metodi  a   codish  m   lagoon  v     stuckey  p  j          boolean equi propagation optimized sat encoding  cp  pp         
metodi  a   codish  m     stuckey  p  j          boolean equi propagation concise efficient
sat encodings combinatorial problems  journal artificial intelligence research  jair  
           
metodi  a   stern  r   kalech  m     codish  m       a   compiling model based diagnosis
boolean satisfaction  conference artificial intelligence  aaai  
   

fim etodi   tern   k alech   c odish

metodi  a   stern  r   kalech  m     codish  m       b   compiling model based diagnosis
boolean satisfaction  detailed experimental results prototype implementation  http 
  www cs bgu ac il mcodish papers pages aaai      html 
murray  j   hughes  g     kreutz delgado  k          machine learning methods predicting failures hard drives  multiple instance application  journal machine learning research
 jmlr             
nica  i   pill  i   quaritsch  t     wotawa  f          route success   performance comparison diagnosis algorithms  international joint conference artificial intelligence
 ijcai   pp           
reiter  r          theory diagnosis first principles  artificial intelligence              
sachenbacher  m     williams  b          diagnosis semiring based constraint optimization 
eureopean conference artificial intelligence  ecai   pp         
selman  b     levesque  h  j          abductive default reasoning  computational core 
national conference artificial intelligence  aaai   pp         
siddiqi  s  a     huang  j          hierarchical diagnosis multiple faults  international joint
conference artificial intelligence  ijcai   pp         
siddiqi  s  a     huang  j          sequential diagnosis abstraction  journal artificial intelligence research  jair              
smith  a   veneris  a  g   ali  m  f     viglas  a          fault diagnosis logic debugging
using boolean satisfiability  ieee trans  cad integrated circuits systems         
         
soos  m          cryptominisat  v       http   www msoos org cryptominisat  
stein  b   niggemann  o     lettmann  t          speeding model based diagnosis heuristic
approach solving sat  iasted international conference artificial intelligence
applications  pp         
stern  r  t   kalech  m   feldman  a     provan  g  m          exploring duality conflictdirected model based diagnosis  aaai 
struss  p     dressier  o          physical negation  integrating fault models general
diagnostic engine  international joint conference artificial intelligence  ijcai   pp 
         
struss  p     price  c          model based systems automotive industry  ai magazine        
     
stumptner  m     wotawa  f          diagnosing tree structured systems  artificial intelligence 
            
stumptner  m     wotawa  f          coupling csp decomposition methods diagnosis algorithms tree structured systems  international joint conference artificial intelligence
 ijcai   pp         
subramanian  s     mooney  r  j          qualitative multiple fault diagnosis continuous dynamic systems using behavioral modes  national conference artificial intelligence
 aaai   pp         
   

fia n ovel sat based pproach odel based iagnosis

torasso  p     torta  g          model based diagnosis obdd compilation  complexity
analysis  reasoning  action interaction ai theories systems  pp         
wang  j     provan  g          benchmark diagnostic model generation system  part a  systems
humans  ieee transactions systems  man cybernetics                
williams  b  c     nayak  p  p          model based approach reactive self configuring systems  national conference artificial intelligence  aaai   pp         
williams  b  c     ragno  r  j          conflict directed a  role model based embedded
systems  discrete applied mathematics                    

   


