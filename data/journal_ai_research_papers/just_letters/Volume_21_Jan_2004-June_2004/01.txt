journal of artificial intelligence research               

submitted       published     

price prediction in a trading agent competition
michael p  wellman
daniel m  reeves
kevin m  lochner
yevgeniy vorobeychik

wellman   umich   edu
dreeves   umich   edu
klochner   umich   edu
yvorobey   umich   edu

university of michigan  artificial intelligence laboratory
ann arbor  mi            usa

abstract
the      trading agent competition  tac  presented a challenging market game in the domain of travel shopping  one of the pivotal issues in this domain is uncertainty about hotel prices 
which have a significant influence on the relative cost of alternative trip schedules  thus  virtually
all participants employ some method for predicting hotel prices  we survey approaches employed
in the tournament  finding that agents apply an interesting diversity of techniques  taking into account differing sources of evidence bearing on prices  based on data provided by entrants on their
agents actual predictions in the tac    finals and semifinals  we analyze the relative efficacy of
these approaches  the results show that taking into account game specific information about flight
prices is a major distinguishing factor  machine learning methods effectively induce the relationship between flight and hotel prices from game data  and a purely analytical approach based on
competitive equilibrium analysis achieves equal accuracy with no historical data  employing a new
measure of prediction quality  we relate absolute accuracy to bottom line performance in the game 

   introduction
many market decision problems involve some anticipation or forecast of future prices  price prediction is particularly important  for example  in committing to a binding offer to purchase a good
that has complements to be purchased at a later date  this sort of scenario arises whenever there are
sequential or overlapping auctions for related goods  although market forecasting techniques are in
widespread use over a broad range of applications  we are unaware of studies exploring the problem
in a context reminiscent of multi auction environments 
the annual trading agent competition  tac   wellman et al         provides a convenient
medium for studying approaches to price prediction  as an open invitation tournament  it has attracted a diverse community of researchers interested in many aspects of trading agent strategy 
price prediction has turned out to be a pivotal issue in the tac market game    and an interesting array of approaches has emerged from agent designers efforts over three years of competition  since
tac defines a controlled  regular  repeatable  and transparent environment for observing trading
agent behavior  it is also uncommonly amenable to analysis 

   we refer to the original  classic  tac game  a scenario in the domain of travel shopping  sadeh et al        
introduced a second game  tac scm   in the domain of supply chain management  and we expect that further
domains will be the subject of trading competitions in coming years 

c      ai access foundation  all rights reserved 

fiw ellman   r eeves   l ochner     vorobeychik

   tac travel shopping game
the tac market game presents a travel shopping task  where traders assemble flights  hotels  and
entertainment into trips for a set of eight probabilistically generated clients  clients are described
by their preferred arrival and departure days  pa and pd   the premium  hp  they are willing to pay
to stay at the towers  t  hotel rather than shanties  s   and their values for three different types
of entertainment events  the agents objective is to maximize the value of trips for their clients  net
of expenditures in the markets for travel goods 
flights  a feasible trip includes round trip air  which consists of an inflight day and outflight
 
  flights in and out each day are sold independently  at prices determined by
day   
a stochastic process  the initial price for each flight is      and follows a random walk
thereafter with an increasingly upward bias 
hotels  feasible trips must also include a room in one of the two hotels for each night of the
clients stay  there are    rooms available in each hotel each night  and these are sold through
ascending   th price auctions  when the auction closes  the units are allocated to the    highest
offers  with all bidders paying the price of the lowest winning offer  each minute  the hotel auctions
issue quotes  indicating the   th   ask  and   th highest  bid  prices among the currently active
unit offers  each minute  starting at       one of the hotel auctions is selected at random to close 
with the others remaining active and open for bids 
entertainment  agents receive an initial random allocation of entertainment tickets  indexed by
type and day   which they may allocate to their own clients or sell to other agents through continuous
double auctions 
a feasible client trip  is defined by an inflight day in   outflight day out   and hotel type    
which is   if t and   if s   trips also specify entertainment allocations  but for purposes of this paper
we summarize expected entertainment surplus  as a function of trip days   the paper describing
our agent  cheng et al         provides details on  as well as some other constructs glossed
here   the value of this trip for client   with preferences pa  pd  hp  is then given by
   

    pa  in  
 pd  out  
 hp   
 


   

at the end of a game instance  the tac server calculates the optimal allocation of trips to clients
for each agent  given final holdings of flights  hotels  and entertainment  the agents game score is
its total client trip utility  minus net expenditures in the tac auctions 

   price prediction
tac participants recognized early on the importance of accurate price prediction in overall performance  stone   greenwald         the prices of hotels are highly variable from game to game 
yet a hotels price is not finalized until its auction closessome minutes into the game  depending
on the random closing order  because agents tend not to submit serious hotel bids until the first
closing is imminent  no useful information is revealed by price quotes until the fourth minute of
play  complementarity among goods dictates that outcomes of early auctions significantly affect
the value an agent places on a particular hotel later in the game  and conversely  the prices of hotels
available later dictate whether an agent had bid wisely early in the game 
anticipating hotel prices is a key element in several decisions facing a tac agent  in particular 
  

fitac p rice p rediction

   selecting trip itineraries  because flight prices tend to increase  agents have a great incentive
to commit to traveling on particular days early in the game  yet the quality of day choices
depends crucially on the hotel prices of the included travel days 
   bidding policy  the likelihood of obtaining a good with a given bid depends obviously on the
resulting clearing price  moreover  the value of any particular good is in general a function of
the price of others  for example  the value of obtaining a room at hotel  s    is an increasing
function of the projected cost of the alternative hotel on that day   t     and a decreasing
function of the projected cost of complementary hotel rooms on the adjacent days   s    
and  s  
   
given the importance of price prediction  it is not surprising that tac researchers have explored
a variety of approaches  stone et al         noted a diversity of price estimation methods among
tac    agents  our particular interest in the problem is certainly connected to our own tac   
agent  walverine  which introduced a method quite distinct from those reported previously  thus 
we were highly motivated to characterize performance on this price prediction task 
indeed  if competitions such as tac are to be successful in facilitating research  it will be necessary to separately evaluate techniques developed for problem subtasks  stone         although
interesting subtasks tend not to be strictly separable in such a complex game  the price prediction
component of trading strategy may be easier to isolate than most  in particular  the problem can be
formulated in its own terms  with natural absolute accuracy measures  and in fact  as we see below 
most agent developers independently chose to define price prediction as a distinct task in their own
agent designs 
we divide price prediction into two phases  initial and interim  initial refers to the beginning
of the game  before any hotel auctions close or provide quote information  interim refers to the
method employed thereafter  since the information available for initial prediction  flight prices 
client preferencessee section      is a strict subset of that available for interim  which adds transaction and hotel price data   most agents treat initial prediction as just a  simpler  special case 
initial prediction is relevant to bidding policy for the first hotel closing  and especially salient for
trip choices as these are typically made early in the game  interim prediction supports ongoing revision of bids as the hotel auctions start to close  our analysis and report focus on initial prediction 
mainly because it is the simpler of the two tasks  involving less potential information  moreover 
agents initially have relatively comparable information sets  thus providing for a cleaner analysis 
interim prediction is also quite important and interesting  and should be the focus of further work 

   tac    agents
the nineteen agents who participated in the tac    tournament are listed in table    the table
presents raw average scores from the finals and semifinals  and weighted averages for the seeding
round  for overviews of most of these agents  see the survey edited by greenwald      a  
the seeding rounds were held during the period      july  each agent playing     games 
weights increased each day  so that later games counted more than earlier  and the lowest    scores
for each agent were dropped  the top    agents advanced to the semifinals  held on    july in
edmonton  canada  there were two semifinal heats  h  comprising agents seeded     and       
with the      seeds placed in heat h   the top four teams from each heat     games  lowest score
  

fiw ellman   r eeves   l ochner     vorobeychik

agent
attac
bigred
cuhk
harami
kavayah
livingagents
packatac
paininnec
roxybot
sics
southamptontac
thalis
tnitac
tomahack
tvad
umbctac
walverine
whitebear
zepp

affiliation
at t research  et al  
mcgill u
chinese u hong kong
bogazici u
oracle india
living systems ag
n carolina state u
nec research  et al  
brown u
swedish inst comp sci
u southampton
u essex
poli bucharest
u toronto
technion
u maryland baltimore cty
u michigan
cornell u
poli bucharest

seeding
    
   
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    

semifinals
h       

h       

h       
h       
h       
h       
h       
h       
h       
h       
h       
h       
h       
h       
h       
h       


finals


    

    
    




    
    



    
    
    


table    tac    tournament participants  and their scores by round 

dropped  proceeded to the finals  which ran for    games the same day  further details about the
tac    tournament are available at http   www sics se tac 

   price prediction survey
shortly after the tac    event  we distributed a survey to all the entrants eliciting descriptions and
data documenting their agents price prediction methods  sixteen out of    teams responded to the
survey  including    of    semifinalists  and all eight finalists  the result provides a detailed picture
of the prediction techniques employed  and enables some comparison of their efficacy with respect
to a common experiencethe tac    finals and semifinals 
thirteen out of the    respondents reported that their agents did indeed form explicit price predictions for use in their trading strategies  these thirteen are listed in table    along with some
high level descriptors of their approach to the initial prediction task    in addition  tnitac and zepp
responded that price predictions were part of their agent designs  but were not developed sufficiently
to be deployed in the tournament  tomahack reported an ambitious design  also not actually employed  based on model free policy learning  which does account for other agents bidding behavior
but without formulating explicit price predictions 
   though we address only initial prediction in this report  our survey also solicited descriptions about interim methods 

  

fitac p rice p rediction

agent
attac
cuhk
harami
kavayah
livingagents
packatac
roxybot
sics
southamptontac
thalis
umbctac
walverine
whitebear

approach
machine learning
historical
historical
machine learning
historical
historical
historical
historical
historical
historical    
historical
competitive
historical

form
prob
priceline
prob
point
point
prob
prob
priceline
point
point
point
point
point

notes
boosting
moving average
neural net

classification to reference categories
survey incomplete
equilibrium analysis

table    agents reporting prediction of hotel prices in tac    

    forms of prediction
one distinction observed in tac    was that some agents explicitly formulated predictions in terms
of probability distributions over prices  rather than point estimates  predictions in this form enable
the agent to properly account for price uncertainty in decision making  thus  we asked entrants
about the form of their predictions in our survey 
although most agents generate point predictions  there are notable exceptions  attacs boosting algorithm  stone et al         expressly learns probability distributions associated with game
features  roxybot tabulates game price statistics for a direct estimation of deciles for each hotel
auction  packatac and harami measure historical variance  combining this with historical averaging to define a parametric distribution for each hotel price  walverine predicts point prices  but its
hedging approach for some decisions amounts to forming an effective distribution around them 
given a prediction in the form of a distribution  agents may make decisions by sampling or
through other decision analytic techniques  the distribution may also facilitate the interim prediction task  enabling updates based on treating observations such as price quotes as evidence 
however  the first controlled experiment evaluating the distribution feature  in the context of attac
 stone et al          did not find an overall advantage to decision making based on distributions
compared to using mean values  the authors offered several possible explanations for the observed
performance  including     that their implementation employs insufficient samples  and     that their
use of distributions makes the unrealistic assumption that subsequent decisions can be made with
full knowledge of the actual price values  greenwald      b  also found that bidding marginal utility based on means outperformed bidding expected marginal utility based on distributions  this time
implemented in the context of roxybot  we have since performed analogous trials using walverinewhich generates and applies distributions in yet a third wayand also found bidding based
on means to be superior to the distribution based bidding the agent actually employed in tac    
although the source of this deficiency has not been conclusively established  we speculate that the
second reason adduced by the attac designers is most plausible 
  

fiw ellman   r eeves   l ochner     vorobeychik

despite this evidence  alternative ways of using the distributions may well prove beneficial  the
study by greenwald      b  demonstrated an advantage to roxybots      strategy of evaluating
candidate bid sets with respect to distributions  compared to its      strategy of evaluating them
with respect to means 
nevertheless  for agents that predict probability distributions  we take the mean of these distributions as the subject of our analysis  this may discount potential advantages  but based on
the discussion above  we suspect thatwith the possible exception of roxybotagents did not
actually benefit from predicting distributions in tac    
another variation in form is the prediction of prices as a function of quantity demanded  from
the first tac  entrants recognized that purchasing additional units may cause the price to increase 
and so introduced the concept of pricelines  which express estimated prices by unit  boyan   greenwald        stone   greenwald         agents sics and cuhk reported predicting pricelines    in
both cases  the agent started with a baseline point prediction for the first unit of each hotel  and
derived the remainder of the priceline according to some rule  for example  sics predicted the price
for the ffth unit  i e   price given it demands ff units  to be fi    where fi is the baseline prediction
and  is      for hotels on day   or    and      for hotels on day   or   
in the succeeding analysis  we evaluate predictions in terms of baseline prices only  as noted
below  our accuracy measures applied to pricelines would not reflect their actual value 
    information employed
the set of information potentially available at the beginning of the game includes all data from past
games  the initial vector of flight prices  and the agents own client preferences  for tac     all
agents except walverine reported using historical information in their predictions  only attac 
kavayah  and walverine employ flight prices  all agents that construct pricelines effectively take
account of own client preferences  walverine does not construct pricelines but does factor in its
own client preferences as part of its equilibrium calculations 
the identities of other agents participating in a game instance are not known during the tac
preliminary  qualifying and seeding  rounds  as agents are drawn randomly into a round robin tournament  however  the semifinal and final rounds fixed a set of eight agents for a series of games 
and so the identity of other agents was effectively observable  attac is the only agent to exploit the
availability of this information 

   approaches to price prediction
based on survey responses  we divide tac    prediction techniques into three categories 
    historical averaging
most agents took a relatively straightforward approach to initial price prediction  estimating the
hotel clearing prices according to observed historical averages  for example  harami calculates the
mean hotel prices for the preceding     games  and uses this as its initial prediction  the respective
agents classified as adopting the historical approach in table   differ on what set of games they
   whitebear also reported using pricelines for interim prediction  vetsikas   selman         but initial predictions
were essentially points 

  

fitac p rice p rediction

include in the average  but most used games from the seeding round  given a dataset  agents tend
to use the sample mean or distribution itself as the estimate    at least as the baseline 
the majority of averaging agents fixed a pool of prior games  and did not update the averages
during the finals  an exception was cuhk  which employed a moving average of the previous ten
games in the current round  or from previous rounds at the beginning of a new round 
umbctac reported employing mean prices as predictions with respect to decisions about trips
of two or more days  but median prices  which tended to be lower  for decisions about one day
trips  for the semifinals they based their statistics on the last     seeding games  for the finals
their dataset comprised the    games of their semifinal heat  in our analysis below  we attribute
predictions to umbctac based on the mean values from these samples 
the approach taken by southamptontac  he   jennings        was unique among tac
agents  the southamptontac designers partitioned the seeding round games into three categories  competitive  non competitive  and semi competitive  they then specified a reference
price for each type and day of hotel in each game category  the agent then chooses a category for
any game based on its monitoring of recent game history  in the actual tournament  southamptontac began the semifinals predicting the semi competitive reference prices  maintaining this stance
until switching to non competitive for the last eight games of the finals 
    machine learning
a couple of tac    agents employed machine learning techniques to derive relationships between
observable parameters and resulting hotel prices  the premise of this approach is that game specific
features provide potentially predictive information  enabling the agent to anticipate hotel price directions before they are manifest in price quotes themselves  not surprisingly  as noted in section     
the two learning agents employed more kinds of information than typical tac    agents 
attac predicts prices using a sophisticated boosting based algorithm for conditional density
estimation  stone et al          development of the technique was expressly motivated by the tac
price prediction problem  though the resulting algorithm is quite general  attac learns a predictor
for each hotel type and day category  i e   days   and   are treated symmetrically  as are   and    
the predictor applied at the beginning of the game maps the following features into a predicted
price for that hotel 





identity of agents participating in the game 
initial flight prices  and
closing time of each hotel room 

since the hotel closing times are unknown at game start  this predictor induces a distribution over
price predictions  based on the distribution of hotel closing sequences  this distribution constitutes
attacs initial price prediction 
kavayah  putchala et al         predicts initial hotel prices using neural networks trained via
backpropagation  the agent has a separate network for each hotel  the output of each network
   several of these agents complement this simple initial prediction with a relatively sophisticated approach to interim
prediction  using the evidence from price quotes to gradually override the initial estimate  all else equal  of course 
straightforwardness is an advantage  indeed  simplicity was likely a significant ingredient of livingagentss success
in tac     fritschi   dorer        wellman et al         

  

fiw ellman   r eeves   l ochner     vorobeychik

is one of a discrete set of prices  where the choice set for each hotel  type  day  was specified by
kavayahs designers based on historical prices  the inputs for each network are based on initial
flight prices  specifically thresholded differences between flights on adjacent days  for example 
hotel t  might have a binary input that indicates whether the price difference between inflights on
days   and   is greater than     hotel s  might have this input  as well as another based on the
difference in flight prices on days   and    kavayahs designers selected the most relevant inputs
based on experiments with the agent 
    competitive analysis
walverines overall approach to tac markets is to presume that they are well approximated by
a competitive economy  cheng et al          its method for predicting hotel prices is a literal
application of this assumption  specifically  it calculates the walrasian competitive equilibrium of
the tac economy  defined as the set of prices at which all markets would clear  assuming other
agents behave as price takers  katzner         taking into account the exogenously determined
flight prices  walverine finds a set of hotel prices that support such an equilibrium  and returns
these values as its prediction for the hotels final prices 
let  be a vector of hotel prices  consisting of elements fi  denoting the price of hotel type  on
day   let   denote agent  s demand for hotel  day at these prices  and write the vector of
such demands as    aggregate demand is simply the sum of agent demands        
prices  constitute a competitive equilibrium if aggregate demand equals aggregate supply for
all hotels  since there are    rooms available for each hotel on each day  we have that in competitive
equilibrium      
starting from an initial guess     walverine searches for equilibrium prices using the tatonnement protocol  an iterative price adjustment mechanism originally conceived by walras  arrow
  hahn         given a specification of aggregate demand  tatonnement iteratively computes a
revised price vector according to the following difference equation 

    
     

   

although equilibrium prices are not guaranteed to exist given the discreteness and complementarities of the tac environment  we have found that this procedure typically produces an approximate
equilibrium well within the     iterations walverine devotes to the prediction calculation 
a critical step of competitive analysis is determining the aggregate demand function  walverine estimates  as the sum of     its own demand based on the eight clients it knows about 
and     the expected demand for the other agents     clients   based on the specified tac distribution of client preferences  our calculation of expected demand for the others is exact  modulo a
summarization of entertainment effects  given an assumption that agent demands are separable by
client  cheng et al          this assumption is true at the beginning of the game  hence for initial
prediction   but is invalidated once agents accumulate holdings of flights and hotels  although the
analytic expression of this expected demand is somewhat complicated  deriving it is not conceptually or computationally difficult 
note that the larger component of walverines demand estimation is an expectation over the
defined distribution of client preferences  therefore  the prices it derives should properly be viewed
as an equilibrium over the expectation  rather than the expected equilibrium prices  the latter might
actually be a more appropriate measure for price prediction  however  since expected equilibrium
  

fitac p rice p rediction

is much more computationally expensive than equilibrium of the expectation  and we suspect the
difference would be relatively small for    i i d  clients   we employ the simpler measure 

   predictions
as part of the survey  entrants provided the predictions their agents actually employed in the tac   finals and semifinals  a total of    games  in many cases  predictions are constant  i e   the
same for every game   so it is straightforward to evaluate them with respect to the full slate of
final and semifinal games  in two of the cases where initial predictions change every game  attac
and walverine   entrants were able to construct what their agent would have predicted for each
of these games  whether or not they actually participated  in one case  kavayah   we have partial
data  kavayah reported its predictions for the    final games  and for the semifinal heat in which it
participated  h    except for one game in which its predictor crashed 
we include two versions of attac  corresponding to predictors learned from the      and
     preliminary rounds  attac   and attac    respectively  represent the prediction functions
employed in the tac    and tac    finals  in applying the attac   predictor to the tac   
finals  its use of agent identity information was disabled 
the price vectors supplied by entrants and employed in our analysis are presented in table   
prices are rounded to the nearest integer for display  though our analysis employed whatever precision was provided  agents who condition on game specific information produce distinct vectors in
each instance  so are not tabulated here 
agent
harami
livingagents
packatac
roxybot 
sics
whitebear
southamptontac s
southamptontac n
umbctac semifinals
umbctac finals
actual mean
actual median
best euc dist
best evpp
walverine const

s 
  
  
  
  
  
  
  
  
  
  
  
 
  
  
  

s 
  
   
   
   
   
   
   
  
   
  
  
  
  
  
  

s 
  
   
   
   
   
  
   
  
   
  
  
  
  
  
  

s 
  
  
  
  
  
  
  
  
  
  
  
 
  
 
  

t  t  t  t 
          
  
              
          
  
          
  
              
          
  
               
  
  
  
  
              
       
  
  
               
      
  
  
      
  
  
          
  
          
  

table    predicted price vectors  shoreline shanties  followed by tampa towers  each for days  
   the first ten rows represent predictions employed by agents in the tournament  the last
five represent various benchmarks  discussed below 

  

fiw ellman   r eeves   l ochner     vorobeychik

the first six rows of table    harami through whitebear  correspond to constant predictions
for their associated agents  as noted above  southamptontac switched between two prediction
vectors  s represents the reference prices for its semi competitive environment  and n its
non competitive prices  umbctac as well switched prediction vectors within the    gamesin
their case introducing for the finals a prediction based on average semifinal  h   prices 
the rows labeled actual mean and actual median  respectively  present the average and
median hotel prices actually resulting from the    games of interest  although clairvoyance is obviously not an admissible approach to prediction  we include them here as a benchmark  in a direct
sense  the actual central tendencies represent the best that agents taking the historical averaging
approach can hope to capture 
the price vectors labeled best euc dist  best evpp  and walverine const are discussed
in section     

   evaluating prediction quality
    accuracy measures
it remains now to assess the efficacy of the various prediction approaches  in terms of the agents
price predictions in the actual tac    final and semifinal games  in order to do so  we require some
ff given the actual prices  of a given game 
measure characterizing the accuracy of a prediction 
      e uclidean d istance
a natural measure of the closeness of two price vectors is their euclidean distance 


ff
    ff





fi



 fi


 




where   indexes the price of hotel   s t  on day     fi    clearly  lower values of 
are preferred  and for any        
calculating  is straightforward  and we have done so for all of the reported predictions for
ff is in the form of a distribution  the euclidean distance of the mean
all    games  note that if 
provides a lower bound on the average distance of the components of this distribution  thus  at
least according to this measure  our evaluation of distribution predictions in terms of their means
provides a bias in their favor 
 for a set of games
it is likewise the case that among all constant predictions  the actual mean 
minimizes the aggregate squared distance for those games  that is  if   is the actual price vector

 
for game   

 


 





   





 ff  
 












   roxybots prediction is based on statistics from the seeding rounds  expressed as cumulative price distributions
for each hotel  discretized into deciles  roxybot reportedly based its decisions on samples from this distribution 
taking each decile value to occur with probability      this tends to overestimate prices  however  as the decile values
correspond to upper limits of their respective ranges  the prediction vector presented in table    and analyzed below 
corresponds to an adjusted value  obtained by dropping the top decile and averaging the remaining nine 

  

fitac p rice p rediction

there is no closed form for the prediction minimizing aggregate   but one can derive it numerically
for a given set of games  bose et al         
      e xpected value of p erfect p rediction
euclidean distance  appears to be a reasonable measure of accuracy in an absolute sense  however 
the purpose of prediction is not accuracy for its own sake  but rather to support decisions based on
these predictions  thus  we seek a measure that relates in principle to expected tac performance 
by analogy with standard value of information measures  we introduce the concept of value of
perfect prediction  vpp  
suppose an agent could anticipate perfectly the eventual closing price of all hotels  then  among
other things  the agent would be able to purchase all flights immediately with confidence that it
had selected optimal trips for all clients    since many agents apparently commit to trips at the
beginning of the game anyway  perfect prediction would translate directly to improved quality of
these choices   we take this as the primary worth of predictions  and measure quality of a prediction
in terms of how it supports trip choice in comparison with perfect anticipation  the idea is that
vpp will be particularly high for agents that otherwise have a poor estimate of prices  if we are
already predicting well  then the value of obtaining a perfect prediction will be relatively small 
this corresponds to the use of standard value of information concepts for measuring uncertainty 
for an agent with perfect knowledge  the value of additional information is nil 
specifically  consider a client  with preferences pa pd hp  a trips surplus for client  at
prices      is defined as value minus cost 
 

      cost 

where cost  is simply the total price of flights and hotel rooms included in trip   let

       

 

denote the trip that maximizes surplus for  with respect to prices   the expression



  ff 



ff   but evaluated with respect to prices
then represents the surplus of the trip chosen based on prices 
  from this we can define value of perfect prediction 

        ff 

vpp ff

   

note that our vpp definition     is relative to client preferences  whereas we seek a measure
applicable to a pair of price vectors outside the context of a particular client  to this end we define
   modulo some residual uncertainty regarding availability of entertainment tickets  which we ignore in this analysis 
   we compiled statistics on the temporal profile of flight purchases for the eight agents in the tac    finals  four of
the agents purchased    flights  enough for round trips for all clients  within    seconds on average  all eight agents
purchased more than half their flights by that time  on average  vetsikas and selman        verified experimentally
that predicting prices benefits agents who commit to flights early to a greater extent than it does those who delay
flight purchases 

  

fiw ellman   r eeves   l ochner     vorobeychik

the expected value of perfect prediction  evpp  as the expectation of vpp with respect to tacs
distribution of client preferences 
evppff
 


 

 

 vpp ff 


  

         ff

   

note that as for   lower values of evpp are preferred  and for any   evpp     
from     we see that computing evpp reduces to computing    ff
   we can derive
this latter value as follows  for each  pa pd  pair  determine the best trip for hotel s and the best trip
ff ignoring any contribution from hotel premium  hp  from this
for hotel t  respectively  at prices 
we can determine the threshold value of hp  if any  at which the agent would switch from s to t 
we then use that boundary to split the integration of surplus  based on prices   for these trips  with
respect to the underlying distribution of hp  note that this procedure is analogous to walverines
method for calculating expected client demand  cheng et al         in its competitive equilibrium
computation 
    results
figure   plots the thirteen agents for whom we have prediction data according to our two quality
measures  with one exception  the  and evpp values shown represent averages over the    games
of tac    finals and semifinals  since kavayah predicted only    games  we normalized its average  and evpp values to account for the relative difficulty of the games it omitted compared to the
games it predicted  the normalization multiplied its raw average by the ratio of prediction qualities
for these game sets by another representative agent  attac    which was the most favorable choice
for kavayah  though other normalizations would have produced similar results  
the two dashed lines in figure   represent best achievable constant predictions with respect to
the two accuracy measures  best euc dist minimizes average euclidean distance  as indicated
by the vertical line  for evpp  we performed hill climbing search from a few promising candidate vectors to derive a local minimum on that measure  represented by the horizontal line  both
reference vectors are provided in table    note that in principle  only agents that varied their predictions across game instances  attac  kavayah  cuhk  and walverine  and to a coarser degree 
southamptontac and umbctac  have the potential to perform outside the upper right quadrant 
to assess the significance of the accuracy rankings among agents  we performed paired sample
t tests on all pairs of agents for both of our measures  the differences between walverine and
attac   do not reach a threshold of statistical significance on either measure  walverine beats
attac   for  at fi   
  while attac   beats walverine for evpp at fi   
   walverine

fi  outperforms all other agents on both measures  attac   significantly
significantly  fi

   outperforms all other agents for evpp  but for  it is not statistically distinguishable
 fi
 fi 
 
  from kavayah  harami  or cuhk  for evpp  walverine and attac   are the only
agents that beat best evpp  fi   
  and fi   
   and best evpp in turn beats all other
agents  all but cuhk significantly   for   walverine is the only agent to significantly  fi  
  
beat best euclidean distance  which in turn beats every other agent but attac   and kavayah 
no agent but walverine does significantly better than actual mean  with attac    kavayah  and
harami statistically indistinguishable 
the large discrepancy in performance between attac   and attac   is unexpected  given
that their predictors are generated from the same boosting based learning algorithm  stone et al  
  

fitac p rice p rediction

livingagents
packatac
southampton

best euc  dist 

expected value of perfect prediction

  
  

roxybot

whitebear

umbctac

attac  

  

sics

  
harami
  
  

kavayah

cuhk
best evpp

walverine

  

attac  
   

   

   
   
   
euclidean distance to actual prices

   

figure    prediction quality for eleven tac    agents  dashed lines delimit the accuracy achievable with constant predictions  best euclidean distance and best evpp for the two
respective measures  the diagonal line is a least squares fit to the points  observe that
the origin of this graph is at          

       this might be explained if the      preliminary rounds were somehow less predictive of the
tac    finals than was the case in       the relative success of another learning agent  kavayah 
is evidence against this  however  the more likely hypothesis is that the      agent suffered from a
bug emerging from a last minute change in computing environments 
to directly evaluate a prediction in the form of pricelines  we would need to know the initial
demand of this agent corresponding to the priceline  we did obtain such information from sics  but
found that the accuracy of the priceline prediction according to these measures was far worse than
that of the baseline prediction  our impression is that the pricelines may well be advantageous with
respect to the decisions the agents based on them  but do not improve basic accuracy  note that
evpp inherently is based on an interpretation of prices as linear  thus it may not provide a proper
evaluation of priceline predictions 
    the influence of flight prices
observe that the three best price predictorsattac    walverine  and kavayahare exactly
those agents that take flight prices into account  initial flight prices potentially affect hotel prices
through their influence on agents early trip choices  in theory  lower flight prices should increase
the tendency of agents to travel on those days  all else equal  thus increasing the prices of hotels on
  

fiw ellman   r eeves   l ochner     vorobeychik

the corresponding days of stay  indeed  capturing this effect of flight prices was one of the main
motivations for walverines price equilibrium approach  attac and kavayah attempt to induce
the relationship from game data  kavayahs designers  in particular  explored neural network models based on their hypotheses about which flights were likely to affect which hotel prices  putchala
et al         
to isolate and quantify the effect of flight prices  we investigated the contribution of different
factors employed by walverine in its predictions  we defined three additional versions of walverines prediction model  each of which ignores some information that walverine takes into account 





walv no cdata ignores its own client knowledge  effectively treating own demand as based
on the same underlying client preference distribution assumed for the other agents 
walv constf ignores the initial flight prices  assuming that they are set at the mean of the
initial flight distribution  i e        in every game instance 
walverine const ignores its own client knowledge and takes flight prices at their mean rather
than actual values  the result is a constant prediction vector  presented in table   

figure   plots the prediction qualities of these agents  ignoring client knowledge degraded prediction quality only slightly  increasing evpp from      to       neglecting initial flight prices 
however  significantly hurt predictions  increasing evpp to       ignoring both  walverine const
incurred an average evpp of      
  

walverine const
actual mean

expected value of perfect prediction

  

walv constf

  
best eucdist
actual median

  

best evpp

  

  
walv no cdata
  

walverine
     

   

     
   
     
   
euclidean distance to actual prices

     

   

figure    prediction quality for walverine variants and various central tendency benchmarks 
the results confirm the predictive value of flight prices  on the evpp measure  walverine does
not gain a significant advantage from considering own client data  but cannot beat best evpp
  

fitac p rice p rediction

without considering initial flight prices  for   client data does make a significant  fi   
fi  difference when also considering flight data  flight data significantly  fi  
   affects walverines
prediction quality for the  metric  regardless of client data 
    relating accuracy to performance
as indicated by the scatter plot of figure    our two accuracy measures are highly correlated
    
   given that evpp is value based  this does suggest that accuracy translates somewhat
proportionally to performance  however  evpp is a highly idealized proxy for actual scores  and so
does not definitively establish the relation of prediction accuracy to overall tac performance 
such a relation was observed in prior work by stone et al          who evaluated the predictive
accuracy and overall performance of four variations on attac   in an experimental trial  employing a different measure of prediction quality than ours above  they found that average score was
related monotonically to average predictive accuracy 
in an effort to more directly connect our accuracy measures to the bottom line  we regressed the
actual tac    game scores against the accuracy measures for all reported predictionsone data
point per agent per game  we controlled for favorability of random client preferences  employing
the same summary statistics used to construct the client preference adjustment in our analysis
of the tac    tournament  wellman et al          in two separate regressions  we found highly
significant coefficients  fi      for both  and evpp  predictive accuracy explained score

    however  as might be expected given all the other unmodeled
variance quite poorly   
variation across agents 
to reduce the variation  we undertook a series of controlled trials involving variants of walverine  cheng et al          each trial comprised a set of games with a fixed configuration of agents 
the agents were constant within trials  but varied across  as they were conducted weeks or months
apart while walverine was undergoing modifications  for each trial  we regressed the actual score
of the first agent on evpp  controlling as above for favorability of random client preferences  we
considered only one agent per game  since the data points for the other agents would be dependent
given their common game instance  the results of our linear regression are summarized in table   
trial
 
 
 



   
   
   

mean evpp
    
    
    

evpp coeff
     
      
      





    
    
    

table    regression of score on evpp in three trials 
the evpp coefficient was highly significant in all cases  fi       note that since evpp is
measured per client in the same units as scores  a direct translation would equate reducing evpp
by one with an increase of eight score points  our regressions yielded coefficients ranging from
      to         which we take as a rough confirmation of the expected relationship  if anything 
the results indicate that evpp understates the value of predictionwhich we might expect since it
addresses only initial trip choice  interestingly  the regression model seems to provide a better fit
 as measured by    for the trials involving worse price predictors  as measured by mean evpp  
this suggests that as prediction is optimized  other unmodeled factors may have relatively greater
incremental influence on score 
  

fiw ellman   r eeves   l ochner     vorobeychik

it should be noted that these games appear to be quite unrepresentative of tac tournament
games  since the agents are all versions of walverine  they tend to make trip choices on the same
basis 

   limitations
it is important to emphasize several limitations of this study  which must qualify any conclusions
drawn about the efficacy of prediction methods evaluated here 
first  we have focused exclusively on initial price prediction  whereas many agents placed
greater emphasis on the interim prediction task 
second  in many cases we have represented agents predictions by an abstraction of the actual
object produced by their prediction modules  in particular  we reduce probability distributions to
their means  and consider only the first unit of a priceline prediction  more generally  we do not
account for the very different ways that agents apply the predictions they generate  without question
even the measure we introduce  evpp  is inspired by our thinking in terms of how walverine uses
its predictions  perhaps measures tailored to the processes of other agents would  justifiably  show
their predictions in a more favorable light 
third  it should be recognized that despite the desirability of isolating focused components of an
agent for analysis  complete separation is not possible in principle  prediction evaluation is relative
not only to how the agent uses its prediction  but also how it makes other tradeoffs  e g   when it
commits to flights   and ultimately its entire strategy  in all its complexity  studies such as this
must strive to balance the benefits of decomposition with appreciation for the interconnections and
synergies among elements of a sophisticated agents behavior 

    conclusions
we have presented a comprehensive survey of approaches to initial price prediction in tac     with
quantitative analysis of their relative accuracy  our analysis introduces a new measure  expected
value of perfect prediction  which captures in an important sense the instrumental value of accurate
predictions  beyond their nominal correspondence to realized outcomes 
we draw several conclusions about price prediction in tac from this exercise  first  the results
clearly demonstrate that instance specific information can provide significant leverage over pure
background history  three agents use instance specific information to perform better on at least
one measure than any constant prediction  in particular  the initial flight prices provide substantial
predictive value  this can be induced and verified empirically  as seen through the success of the
machine learning agents  the predictive value flows from the influence of flight prices on demand
for hotels  as indicated by the success of competitive analysis in capturing this relationship 
we believe it striking that a purely analytical approach  without any empirical tuning  could
achieve accuracy comparable to the best available machine learning method  moreover  many
would surely have been skeptical that straight competitive analysis could prove so successful  given
the manifest unreality of its assumptions as applied to tac  our analysis certainly does not show
that competitive equilibrium is the best possible model for price formation in tac  but it does
demonstrate that deriving the shape of a market from an idealized economic theory can be surprisingly effective 
  

fitac p rice p rediction

there are several advantages to model based reasoning  most obviously the ability to perform
with minimal or no empirical data  even when historical information is available  it can be misleading to rely on it in a nonstationary environment  a tournament setup like tac naturally violates
stationarity  as the agent pool evolves over time  through selection as well as individual learning
and development  of course  dealing with time variance  particularly in multiagent environments 
is an active area of current research  and ultimately the best methods will combine elements of
model based and data based reasoning 
finally  we suggest that the present study represents evidence that research competitions can in
the right circumstances produce knowledge and insights beyond what might emerge from independent research efforts  we hope that additional researchers will be inspired to bring their innovative
ideas on trading strategy to the next tac  and look forward to investigating the results of such
interplay in future work 

acknowledgments
this study would not have been possible without the generous cooperation of the tac    entrants 
the research was supported in part by nsf grant iis          as well as a stiet fellowship to the
third author  under an nsf igert grant 

references
arrow  k  j     hahn  f  h          general competitive analysis  holden day  san francisco 
bose  p   maheshwari  a     morin  p          fast approximations for sums of distances  clustering
and the fermat weber problem  computational geometry  theory and applications     
       
boyan  j     greenwald  a          bid determination in simultaneous auctions  an agent architecture  in third acm conference on electronic commerce  pp          tampa  fl 
cheng  s  f   leung  e   lochner  k  m   omalley  k   reeves  d  m     wellman  m  p         
walverine  a walrasian trading agent  decision support systems  to appear 
fritschi  c     dorer  k          agent oriented software engineering for successful tac participation  in first international joint conference on autonomous agents and multi agent systems 
bologna 
greenwald  a       a   the      trading agent competition  an overview of agent strategies  ai
magazine              
greenwald  a       b   bidding under uncertainty in simultaneous auctions  in ijcai    workshop
on trading agent design and analysis  acapulco 
he  m     jennings  n  r          southamptontac  an adaptive autonomous trading agent  acm
transactions on internet technology            
katzner  d  w          the walrasian vision of the microeconomy  university of michigan press 
putchala  r  p   morris  v  n   kazhanchi  r   raman  l     shekhar  s          kavayah  a trading
agent developed for tac     tech  rep   oracle india 
sadeh  n   arunachalam  r   eriksson  j   finne  n     janson  s          tac     a supply chain
trading competition  ai magazine              
  

fiw ellman   r eeves   l ochner     vorobeychik

stone  p          multiagent competitions and research  lessons from robocup and tac  in sixth
robocup international symposium  fukuoka  japan 
stone  p     greenwald  a          the first international trading agent competition  autonomous
bidding agents  electronic commerce research  to appear 
stone  p   schapire  r  e   littman  m  l   csirik  j  a     mcallester  d          decision theoretic
bidding based on learned density models in simultaneous  interacting auctions  journal of
artificial intelligence research             
vetsikas  i  a     selman  b          a principled study of the design tradeoffs for autonomous
trading agents  in second international joint conference on autonomous agents and multiagent systems  pp          melbourne 
wellman  m  p   greenwald  a   stone  p     wurman  p  r          the      trading agent competition  electronic markets          

  

fi