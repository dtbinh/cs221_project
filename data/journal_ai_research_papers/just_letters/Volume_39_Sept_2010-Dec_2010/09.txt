journal of artificial intelligence research                  

submitted        published      

nominals  inverses  counting  and conjunctive queries
or  why infinity is your friend 
sebastian rudolph

rudolph kit edu

aifb  karlsruhe institute of technology  de

birte glimm

birte glimm comlab ox ac uk

oxford university computing laboratory  uk

abstract
description logics are knowledge representation formalisms that provide  for example 
the logical underpinning of the w c owl standards  conjunctive queries  the standard
query language in databases  have recently gained significant attention as an expressive
formalism for querying description logic knowledge bases  several different techniques for
deciding conjunctive query entailment are available for a wide range of dls  nevertheless 
the combination of nominals  inverse roles  and number restrictions in owl   and owl  
dl causes unsolvable problems for the techniques hitherto available  we tackle this problem
and present a decidability result for entailment of unions of conjunctive queries in the dl
alchoiqb that contains all three problematic constructors simultaneously  provided
that queries contain only simple roles  our result also shows decidability of entailment of
 unions of  conjunctive queries in the logic that underpins owl   dl and we believe
that the presented results will pave the way for further progress towards conjunctive query
entailment decision procedures for the description logics underlying the owl standards 

   introduction
we present a decidability result for entailment of unions of conjunctive queries in the very
expressive description logic alchoiqb  the article is an extended version of the conference paper status qio  conjunctive query entailment is decidable  proceedings of the
  th international conference on the principles of knowledge representation and reasoning  kr        may             glimm   rudolph        
description logics  dls  are a family of logic based knowledge representation formalisms
 baader  calvanese  mcguinness  nardi    patel schneider         most dls correspond
to the function free two variable fragment of first order logic  fol  often extended with
counting quantifiers  e g   xn y r x  y    and dls are also closely related to the   variable  guarded fragment since dl formulae naturally result in guarded formulae when
translated into fol  in line with the restriction to   variables  dl formulae contain only
unary and binary predicates  which are called concepts and roles in dls  the constructors
for building complex expressions are usually chosen such that the key inference problems 
such as concept satisfiability  are decidable  a dl knowledge base  kb  consists of a tbox 
which contains intensional knowledge such as concept definitions and general background
knowledge  essentially a fol theory   and an abox  which contains extensional knowledge
and is used to describe individuals  a set of ground facts   using a database metaphor  the
tbox corresponds to the schema  and the abox corresponds to the data  in contrast to
c
    
ai access foundation  all rights reserved 

firudolph   glimm

databases  however  dl knowledge bases  as fol in general  adopt an open world semantics 
i e   they represent information about the domain in an incomplete way 
standard dl reasoning services include testing concepts for satisfiability and retrieving
certain instances of a given concept  the latter retrieves  for a knowledge base consisting of an abox a and a tbox t   all  abox  individuals that are instances of the given
 possibly complex  concept expression c  i e   all those individuals a such that t and a
entail that a is an instance of c  the underlying reasoning problems are well understood 
and the computational complexity of the standard reasoning tasks given a knowledge base
as input range from ptime complete for dls with limited expresivity such as dl lite
 calvanese  de giacomo  lembo  lenzerini    rosati         el  baader         and elp
 krotzsch  rudolph    hitzler        to   nexptime complete for very expressive dls
such as sroiq  kazakov        
despite the high worst case complexity of the standard reasoning problems for very
expressive dls such as sroiq  there are highly optimized implementations available 
e g   fact    tsarkov   horrocks         pellet  sirin  parsia  cuenca grau  kalyanpur    katz         and hermit  motik  shearer    horrocks         these systems
are used in a wide range of applications  e g   biology  sidhu  dillon  chang    sidhu 
       bio informatics  wolstencroft  brass  horrocks  lord  sattler  turi    stevens        
medicine  golbreich  zhang    bodenreider         information integration  calvanese 
de giacomo  lenzerini  nardi    rosati      b   geography  goodwin         geology  jet
propulsion laboratory         defense  lacy  aviles  fraser  gerber  mulvehill    gaskill 
       and configuration  mcguinness   wright         most prominently  dls are known
for their use as a logical underpinning of ontology languages  e g   oil  daml oil  the
w c standard owl    bechhofer  van harmelen  hendler  horrocks  mcguinness  patelschneider    stein         and its successor owl    w c owl working group        
there are three species of owl    owl lite  owl dl  and owl full  owl   extends
owl   and adds three further sublanguages  called owl   profiles   owl el  owl ql 
and owl rl  owl lite corresponds to the dl shif in which the standard reasoning
tasks are exptime complete  owl   dl corresponds to the dl shoin   in which the
standard reasoning tasks are nexptime complete  and owl   dl extends this to the dl
sroiq  for owl full the standard reasoning tasks are no longer decidable  the new
ql  el  and rl profiles are more restrictive than owl dl and each of the profiles trades
off different aspects of owls expressive power in return for different computational and or
implementational benefits  owl el corresponds to the dl el     baader  brandt   
lutz        and the basic reasoning problems can be performed in time that is polynomial
with respect to the size of the input knowledge base  owl   ql is based on the dl lite
family of description logics  where the data complexity of conjunctive query entailment is
in ac    thus  conjunctive query answering can be implemented using standard relational
database technology  owl   rl enables the implementation of polynomial time reasoning
algorithms using rule extended database technologies 
in data intensive applications  querying kbs plays a central role  instance retrieval
is  in some aspects  a rather weak form of querying  although possibly complex concept
expressions are used as queries  we can only query for tree like relational structures  as
a dl concept cannot express arbitrary cyclic structures  this property is known as the
tree model property and is considered an important reason for the decidability of most
   

finominals  inverses  counting  and conjunctive queries

modal and description logics  gradel        vardi        and we also heavily exploit a
variant of this property to establish our decidability result  conjunctive queries  cqs 
and unions of conjunctive queries  ucqs  are well known in the database community and
constitute an expressive query language with capabilities that go well beyond standard
instance retrieval  in fol terms  cqs and ucqs are formulae from the positive existential
fragment  free variables in a query  not bound by an existential quantifier  are also called
answer variables or distinguished variables  whereas existentially quantified variables are
called non distinguished 
if the query contains no distinguished variables  the query answer is just true or false
and the query is called a boolean query  given a knowledge base k and a boolean ucq
q  the query entailment problem is deciding whether q is true or false w r t  k  i e   we
have to decide whether each model of k provides for a suitable assignment for the variables
in q  for a query with distinguished variables  the answers to the query are those tuples
of individual names  constants  for which the knowledge base entails the query that is
obtained by replacing the free variables with the individual names in the answer tuple 
these answers are also called certain answers  the problem of finding all answer tuples is
known as query answering  we present a decidability result for query entailment  which is
a decision problem  but this is no restriction since query answering can easily be reduced
to query entailment as we illustrate in more detail in section   
    related work
conjunctive queries have been first mentioned in the context of description logics  dls  by
levy and rousset         the first account of conjunctive queries as main topic is given by
calvanese  de giacomo  and lenzerini      a   in particular in recent years  the problem of
decidability of conjunctive query entailment and the complexity of the problem in different
logics has gained significant attention  for the dls shiq and shoq decidability and
  exptime completeness of the problem is known  glimm  horrocks  lutz    sattler 
    a  glimm  horrocks    sattler      b  lutz        eiter  lutz  ortiz    simkus 
       conjunctive query entailment is already   exptime hard in the relatively weak
dl alci  lutz         which was initially attributed to inverse roles  recently  it was
shown  however  that also transitive roles together with role hierarchies as in the dl sh
make conjunctive query entailment   exptime hard  eiter et al          the techniques by
glimm et al  for shiq and shoq  glimm et al       a      b  reduce query entailment
to the standard reasoning task of knowledge base satisfiability checking in the dl extended
with role conjunctions  an alternative technique is the so called knots technique  ortiz 
simkus    eiter      b   which is an instance of the mosaic technique originating in modal
logic  this technique also gives worst case optimal algorithms for shiq and several of its
sub logics  further  there are automata based decision procedures for positive existential
path queries  calvanese  eiter    ortiz               positive existential path queries
generalize unions of conjunctive queries and  therefore  decision procedures for this kind of
query also provides decision procedures for unions of conjunctive queries  in particular the
most recent extension  calvanese et al         is very close to a conjunctive query entailment
decision procedure for owl    which corresponds to the dl sroiq  because it covers
   

firudolph   glimm

sriq  sroq  and sroi  the use of the three problematic constructors for nominals 
inverses  and number restrictions is  however  not covered 
regarding data complexity  i e   the complexity with respect to the abox  the data 
only  cq entailment is usually conp complete for expressive logics  for example  for dls
from ale up to shiq this is the case  glimm et al       a  and this holds also for cq
entailment in the two variable guarded fragment with counting  pratt hartmann        
the latter work is quite closely related since many description logics can be translated into
the two variable guarded fragment with counting  i e   the results of pratt hartmann also
hold for shiq with only simple roles  roles that are not transitive and have no transitive
subrole  in the query  given the same restriction on the query  also shoq and shoi
were shown to have conp complete data complexity w r t  conjunctive query entailment
 ortiz  calvanese    eiter      a  
query entailment and answering have also been studied in the context of databases
with incomplete information  rosati      b  van der meyden        grahne         in this
setting  dls can be used as schema languages  but the expressivity of the considered dls is
usually much lower than the expressivity of the dl alchoiqb that we consider here and
reasoning in them is usually tractable  for example  the constructors provided by logics of
the dl lite family  calvanese  de giacomo  lembo  lenzerini    rosati        are chosen
such that the standard reasoning tasks are in ptime regarding combined complexity and
query entailment is in ac  with respect to data complexity  thus  tbox reasoning can be
done independently of the abox and the abox can be stored and accessed using a standard
database sql engine  another tractable dl is el  baader         conjunctive query
entailment in el is  however  not tractable as the complexity increases to conp complete
 rosati      b   moreover for el    baader et al          a still tractable extension of el 
query entailment is even undecidable  krotzsch  rudolph    hitzler         this is mainly
because in el     one can use unrestricted role compositions  this allows for encoding
context free languages  and conjunctive queries can then be used to check the intersection
of such languages  which is known to be an undecidable problem  since the logics used in
databases with incomplete information are considerable less expressive than alchoiqb 
the techniques developed in that area do not transfer to our setting 
given that query entailment is a  computationally  harder task than  for example 
knowledge base satisfiability  it is not very surprising that decidability of the latter task
does not necessarily transfer to the problem of cq entailment  most of the undecidability results can be transferred from fol since many dls can directly be translated into
an equivalent fol theory  for example  it is known that conjunctive query entailment
is undecidable in the two variable fragment of first order logic l   rosati      a   and
rosati identifies a relatively small set of constructors that cause the undecidability  most
notably role negation axioms  i e   axioms of the form x  y  r x  y   p  x  y   for r  p
binary predicates   pratt hartmann        recently established decidability for cq entailment in the two variable guarded fragment with counting  gc     it is worth noting that
pratt hartmann assumes that the background theory  that is the knowledge base in our
case  is constant free and formulae of the form    x p  x    which can be used to simulate constants nominals  are not considered guarded  his result covers  therefore  only
the dl alchiqb and is not applicable to the case  when the input knowledge base  the
background theory  contains nominals  individual constants  
   

finominals  inverses  counting  and conjunctive queries

most of the implemented dl reasoners  e g   kaon    pellet  and racerpro   provide
an interface for conjunctive query answering  although kaon  and racerpro consider only
named individuals in the abox for the assignments of variables  under that restriction
queries do no longer have the standard fol semantics and decidability is obviously not an
issue since conjunctive query answering with this restriction can be reduced to standard
instance retrieval by replacing the variables with individual names from the abox and then
testing entailment of each conjunct separately  pellet goes beyond that and also provides an
interface for conjunctive queries with fol semantics under the restriction that the queries
have a kind of tree shape  under this restriction decidability is known since cqs can then
be expressed as normal concepts  possibly by adding role conjunctions  
    contributions and overview
given all these results  which show a great interest in the problem of conjunctive query entailment over expressive dls  it is very interesting that for the dls shif  shoin   and
sroiq that underpin the widely adopted standards owl lite  owl   dl  and owl  
dl  respectively  decidability of conjunctive query entailment has only been established for
owl lite  the main obstacle in devising a decision procedure is the combination of inverse
roles  i   nominals  o   and number restrictions counting quantifiers  f stands for functionality  n for unqualified number restrictions  and q for qualified number restrictions  
the complications arising from the combination of these constructors caused also a major
hurdle in the development of implementable algorithms for knowledge base satisfiability in
shoin and extensions thereof  but horrocks and sattler        devised a tableau based
decision procedure that has since been extended to sroiq  meanwhile also alternative
approaches such as resolution  kazakov   motik         and hypertableau based procedures
 motik et al         are available and implemented 
the key obstacle in establishing a decision procedure is the existence of potentially
infinitely many new nominals  i e   elements that are uniquely identifiable in any model of
a kb  for an example  consider the kb k given in fig     a concept of the form  o 
has to be interpreted as a singleton set  containing only the interpretation of the constant
o  for simplicity  we assume for now that a constant is always interpreted as itself  e g  
the interpretation of o is o  an axiom of the form  o    v f s f    o    can then be
understood as follows  for the constant o    there must be two elements  say d  and d    such
that f  o    d     s d    d     and f  o    d    holds  note that o  occurs as the first element in
f  o    d    since an inverse role  f    is used  thus  an interpretation for the kb must contain
the three elements o    o    and o    which must be interconnected in the following way  paths
f

s

f

of the shape      have to lead from o  to o  as well as from o  to o  and from o  to
o    moreover  the role f is defined to be functional  meaning that every element can have
at most one f  successor  this also applies to all individuals oi   which forces the existence of
an s cycle  observe that a cyclic boolean query such as  s x  y   s y  z   s z  x   that checks
for the existence of such a cycle cannot be answered by applying standard techniques such
as replacing variables with individual names  oi   or rewriting the query into an equivalent
   http   kaon  semanticweb org
   http   www racer systems com

   

firudolph   glimm

 o    v f s f    o   
 o    v

f s f    o

 o   

  

f

f

s
s

 o    v f s f    o   

 o   

s
f

 o   

func f  

figure    example knowledge base k and a representation for a model  where the three
elements in the s cycle are so called new nominals 

tree shaped query  the elements in the cycle behave as if they were nominals  but we do
not have names for them 
we tackle the problem of conjunctive query entailment in a very expressive dl that contains all the three problematic constructors simultaneously and prove decidability of  unions
of  conjunctive queries  the most challenging part is to establish finite representability of
countermodels in case the query given as input is not entailed by the knowledge base  our
results also hold for shoiq knowledge bases  i e   with some roles declared as transitive 
provided that the queries contain only simple roles  roles that are neither transitive nor
have a transitive subrole   this is essentially the same restriction that is placed on roles
that can occur in number restrictions since otherwise the standard reasoning tasks become
undecidable  under this restriction  we can use standard techniques for eliminating transitivity  kazakov   motik         hence  we also show decidability of conjunctive query
entailment in owl dl  for queries with only simple roles 
we believe that our work is also valuable for understanding  in general  the structure of
models in dls that contain nominals  inverse roles  and number restrictions  furthermore 
we devise non trivial extensions of standard techniques such as unraveling  which we believe
will prove useful when working with such expressive dls 
the paper is organized as follows  in section    we give a birds eye view of the techniques
and ideas used to establish decidability  in section    we give the necessary definitions and
introduce standard notations  in sections       and   we present the main results that we
then use in section   to show how models that do not satisfy the query can be finitely
represented before we conclude in section   

   the big picture
before going into the technical details  we will describe our overall line of argumentation
establishing decidability of conjunctive query entailment in alchoiqb 
    decidability via finitely representable countermodels
let k be an alchoiqb knowledge base and let q be the conjunctive query in question 
i e   we aim to determine whether
k    q 
clearly  as alchoiqb is a fragment of first order predicate logic with equality  k can be
translated into a fol sentence f ol k   likewise we find a fol sentence f ol q  for
   

finominals  inverses  counting  and conjunctive queries

q being just an existentially quantified formula  hence  checking the above entailment is
equivalent to determining whether the first order theory f ol k  entails f ol q   as a
result of the completeness theorem for fol  godel         the consequences of a finite fol
theory are recursively enumerable  which provides us with a procedure that terminates if
k    q  hence  we can establish decidability by providing another algorithm that terminates
iff the entailment above does not hold  i e   if there is a so called countermodel being a
model i of k for which i     q 
we will provide such an algorithm by showing that  whenever such a countermodel i
exists at all  there is also a countermodel i that is finitely representable  more precisely 
i can be encoded into a word rep i  of finite length over a finite alphabet  whereby the
encoding rep has the property that for every such finite word it can be effectively checked
whether it represents a countermodel for a given knowledge base and query 
as a consequence thereof  we can create the desired algorithm that enumerates all words 
checks each for being a countermodel  and terminates as soon as it has found one 
    finite representability by bounding nominals and blocking
we now outline how we are going to show that there is always a finitely representable
countermodel  if there is one at all  we do this by taking an arbitrary countermodel and
cautiously transforming it into a countermodel that is finitely representable  cautiously
means that we have to make sure that the transformation does preserve the two properties
of    being a model of the underlying knowledge base k and    not entailing the considered
query q 
the result of the overall transformation is going to be a regular model  i e   a structure
where substructures are being in a certain sense periodically repeated  it is common practice
in dl theory to construct this kind of models from arbitrary ones by blocking techniques 
whereby certain element configurations occurring twice in the original model are detected
and the new model is generated by infinitely stringing together the same finite substructure
that is delimited by those two configurations 
in the case we consider  this technique cannot be applied directly to the original countermodel  this is due to an intricate interplay of nominals  inverse roles and cardinality
constraints by which an arbitrary  even an infinite  number of domain elements can be
forced to behave like nominals  this is why those elements are usually referred to as new
nominals in a dl setting  in fol  nominals are often called kings and the new nominals
are called the court  in our case  the presence of infinitely many new nominals in the model
may prevent the existence of repeated configurations needed for blocking 
we overcome this difficulty by first applying a transformation by means of which the
original countermodel is converted into a countermodel with only finitely many new nominals  this guarantees that the subsequent blocking based transformation is applicable and
will yield the desired regular  and thus finitely representable  model 
    bounding nominals by transformations of forest quasi models
for our argumentation  we introduce the notion of forest quasi models  these are structures
not satisfying the originally considered knowledge base but a weakened form of it  in
   

firudolph   glimm

return to this concession  they exhibit a proper forest structure that is easier to handle and
manipulate 
we employ two techniques to turn proper models into forest quasi models and vice
versa  a model can be unraveled yielding a forest quasi model  a forest quasi model can be
collapsed to obtain a proper model  both techniques preserve certain structural properties 
our strategy to construct a countermodel with finitely many nominals consists of the
following three steps 
 take an arbitrary countermodel and unravel it 
 transform the obtained forest quasi model by substituting critical parts by wellbehaved ones 
 collapse the obtained structure into a  proper  model 
the mentioned critical parts are those giving rise to new nominals  they have to
be  at least largely  avoided  we do not care about a finite set of those critical parts
remaining  
the central question is  where do these mysterious well behaved substitutes come from 
fortunately  the plethora of critical parts brings about its own remedy  we can use infinite
sets of critical parts to construct well behaved ones in an infinite approximation process
 this is why infinity is your friend   we thereby obtain parts which have not been present
in our structure before  but are well compatible with it and can hence be used for its
reorganization 
after having informally introduced our main line of argumentation  we now move on to
the technical details 

   preliminaries
we first define the syntax and semantics of roles  and then go on to shoiqb concepts 
individuals  and knowledge bases  we do not actually use the full expressivity of shoiqb 
but it is a convenient umbrella for all dls we are working with and we can define less
expressive dls of interest as restrictions of shoiqb 
definition    syntax of shoiqb   let nc   nr   and ni be countable  infinite  and
pairwise disjoint sets of concept names  role names  and individual names  respectively  we
call s    nc   nr   ni   a signature  the set rol s  of shoiqb roles over s  or roles for
short  is nr   r   r  nr    where roles of the form r are called inverse roles  a role
inclusion axiom is of the form r v s with r  s roles  a transitivity axiom is of the form
trans r  for r a role  a role hierarchy h is a finite set of role inclusion and transitivity
axioms 
for a role hierarchy h  we define the function inv over roles as inv r     r if r  nr and
inv r     s if r   s for a role name s  nr   further  we define vh as the smallest transitive
reflexive relation on roles such that r v s  h implies r vh s and inv r  vh inv s   we
write r h s if r vh s and s vh r  a role r is transitive w r t  h  notation r  vh r  if a
   

finominals  inverses  counting  and conjunctive queries

role s exists such that r vh s  s vh r  and trans s   h or trans inv s    h  a role s is
called simple w r t  h if there is no role r such that r is transitive w r t  h and r vh s 
for r  rol s  a simple role  a boolean role expressions u is defined as follows 
u     r   u   u u u   u t u 
we use   to denote standard boolean entailment between a set of roles r  rol s  and role
expressions  let r  rol s   and u a boolean role expression over r  we inductively define 
 r   r if r  r  and r    r otherwise 
 r   u if r    u   and r    u otherwise 
 r   u u v if r   u and r   v   and r    u u v otherwise 
 r   u t v if r   u or r   v   and r    u t v otherwise 
a boolean role expression u is safe if     u  
given a signature s    nc   nr   ni    the set of shoiqb concepts  or concepts for
short  over s is the smallest set built inductively over symbols from s using the following
grammar  where o  ni   a  nc   n  in    s is a simple role  and u is a role or a safe
boolean role expression 
c             o    a   c   c  u c    c  t c   
 
u c   u c     n s c     n s c 
alternatively  safeness can be characterized as follows  a boolean role expression u is
safe if  after transforming it into disjunctive normal form  each disjunct contains at least
one non negated role  intuitively  this implies that a safe role expression can never relate
individuals that are not in a direct role relation with each other 
definition    semantics of shoiqb concepts   an interpretation i    i   i   consists
of a non empty set i   the domain of i  and a function i   which maps every concept name
a  nc to a subset ai  i   every role name r  nr to a binary relation ri  i  i  
and every individual name a  ni to an element ai  i   for each role name r  nr  
i
the interpretation of its inverse role  r   consists of all pairs h     i  i  i for which
h     i  ri  
the semantics of shoiqb concepts over a signature s is defined as follows 
 r i
 i
 c i
 u c i
 u c i
   n s c i
   n s c i

 
 
 
 
 
 
 

i  i   ri
 r  u r   i   r i  r i
 r  t r   i   r i  r i
i
i

  
  o  i    oi  
i   c i
 c u d i   c i  di
 c t d i   c i  di
i
 
i
 
i
      if h   i  u   then   c  
   i   there is a h     i  u i with     c i  
   i     si    c    n 
   i     si    c    n 

where   m   denotes the cardinality of the set m and si    c  is defined as
     i   h     i  si and     c i   
a concept c is in negation normal form  nnf  if negation occurs only in front of concept
names and we use nnf c  to denote the negation normal form of a concept c 
 
   

firudolph   glimm

any concept can be transformed in linear time into an equivalent one in nnf by pushing
negation inwards  making use of de morgans laws and the duality between existential and
universal restrictions  and between at most and at least number restrictions of the form
  n r c and   n r c respectively  horrocks  sattler    tobies        
definition    syntax and semantics of axioms and knowledge bases   a functionality
restriction is an expression func f   for f a role  for c  d concepts  a general concept
inclusion  gci  is an expression c v d  we introduce c  d as an abbreviation for
c v d and d v c  a finite set of gcis and functionality restrictions is called a tbox  an
 
 
 abox  assertion is an expression of the form c a   r a  b   r a  b   a   b  or a  
  b  where
c is a concept  r is a role  and a  b  ni are individual names  an abox is a finite set of
assertions  a knowledge base k is a triple  t   h  a  with t a tbox  h a role hierarchy 
and a an abox 
we use con k   rol k   and nom k  to denote  respectively  the set of concept names 
roles  including inverses   and individual names occurring in k  the closure cl k  of k
is the smallest set containing nnf c t d  if c v d  t   d if d is a sub concept of c
and c  cl k   and nnf c  if c  cl k   a role f is functional in k if k contains the
functionality axiom func f   and it is inverse functional in k if k contains the functionality
axiom func inv f    
let i    i   i   be an interpretation  then i satisfies a role inclusion axiom r v s if
ri  si   i satisfies a transitivity axiom trans r  if ri is a transitive binary relation  and a role
hierarchy h if it satisfies all role inclusion and transitivity axioms in h  the interpretation
i satisfies a functionality restriction func f   if  for each   i           h     i  f i        i
satisfies a gci c v d if c i  di   and i satisfies a tbox t if it satisfies each functionality
restriction and each gci in t   the interpretation i satisfies an assertion c a  if ai  c i  
 
 
r a  b  if hai   bi i  ri   r a  b  if hai   bi i 
  ri   a   b if ai   bi   and a  
  b if ai    bi   i
satisfies an abox if it satisfies each assertion in a  we say that i satisfies k if i satisfies
t   h  and a  in this case  we say that i is a model of k and write i    k  we say that k
is consistent if k has a model 
 
if the knowledge base k is clear from the context  we simply say that a role f is  inverse 
functional instead of saying f is  inverse  functional in k 
the names of dls indicate which constructors are supported  the basic dl alc
supports boolean concept constructors and gcis  but no role hierarchies  functionality
restrictions et cetera  if transitivity axioms are added  we use s instead of alc  inverse
roles are indicated by the letter i  role inclusion axioms by h  nominals  i e   concepts of
the form  o  for o  ni   by o  functionality restrictions by f  qualified number restrictions 
i e   concepts of the form   n s c and   n s c  by q  and safe boolean role expressions by
b  if number restrictions are limited to concepts of the form   n s   and   n s    we use
the letter n  
we mostly refer to a few particular dls in this paper  the dl shoiq is obtained from
shoiqb by disallowing boolean role expressions  the dls shiq  shoq  and shoi
are obtained from shoiq by disallowing nominals  inverse roles  and number restrictions
 incl  functionality restrictions   respectively  finally  the dl alcoifb is obtained from
shoiqb by disallowing transitivity axioms  we use alc instead of s in the name of the
dl to indicate this   role inclusion axioms  and concepts of the form   n s c and   n s c 
   

finominals  inverses  counting  and conjunctive queries

    conjunctive queries and unions of conjunctive queries
we now introduce boolean conjunctive queries since they are the basic form of queries we
are concerned with  we later also define non boolean queries and show how they can be
reduced to boolean queries  finally  unions of conjunctive queries are just a disjunction of
conjunctive queries 
definition    syntax and semantics of conjunctive queries   let s    nc   nr   ni   be
a signature and nv a countably infinite set of variables disjoint from nc   nr   and ni  
a term t is an element from nv  ni   let a  nc be a concept name  r  nr a role
name  and t  t  terms  an atom is an expression a t  or r t  t    and we refer to these two
types of atoms as concept atoms and role atoms respectively  a boolean conjunctive query
q is a non empty set of atoms  we use var q  to denote the set of  existentially quantified 
variables occurring in q and term q  to denote the set of variables and individual names
occurring in q  as usual  we use   q  to denote the cardinality of q  which is simply the
number of atoms in q  and we use  q  for the size of q  i e   the number of symbols necessary
to write q 
let i    i   i   be an interpretation  a total function    term q   i is an evaluation
if  a    ai for each individual name a occurring in q  for a t   r t  t    atoms  we write
 i    a t  if  t   ai  
 i    r t  t    if   t    t      ri  
if  for an evaluation   i    at for all atoms at  q  we write i    q  we say that i
satisfies q and write i    q if there exists an evaluation  such that i    q  we call such a
 a match for q in i 
let k be a knowledge base and q a conjunctive query  if i    k implies i    q  we say
that k entails q and write k    q 
 
the query entailment problem is defined as follows  given a knowledge base k and a
query q  decide whether k    q 
definition    unions of conjunctive queries   a union of boolean conjunctive queries is
a formula q          qn   where each disjunct qi is a boolean conjunctive query 
a knowledge base k entails a union of boolean conjunctive queries q          qn   written
as k    q          qn   if  for each interpretation i such that i    k  there is some i such that
i    qi and    i  n 
 
we now clarify the connection between query entailment and query answering  for
query answering  let the variables of a conjunctive query be typed  each variable can either
be existentially quantified  also called non distinguished   or free  also called distinguished
or answer variables   let q be a query in n variables  i e     var q     n   of which v            vm
 m  n  are answer variables  the answers of k to q are those m tuples  a            am   of
individual names such that  for all models i of k  i    q for some  that satisfies  vi     aii
for all i with    i  m  recall that we use nom k  to denote the set of individual names
occurring in k  in the form of nominals or abox individuals   it is not hard to see  cf 
chandra   merlin        that the answers of k to q can be computed by testing  for each
   

firudolph   glimm

 a            am    nom k m   whether the query q v       vm  a       am   obtained from q by replacing
each occurrence of vi with ai for    i  m is entailed by k  the set of certain answers
to q is then the set of all m tuples  a            am   for which k    q v       vm  a       am     let
k     nom k   be the number of individual names occurring in k  since k is finite  clearly
k is finite  hence  deciding which tuples belong to the set of answers can be checked with
at most k m entailment tests 
the algorithm that we present in this paper decides query entailment  the reasons
for devising a decision procedure for query entailment instead of query answering are twofold  first  query answering can be reduced to query entailment as shown above  second  in
contrast to query answering  query entailment is a decision problem and can be studied in
terms of complexity theory 
    simplifying assumptions
in the following  we make several assumptions that are without loss of generality  but
simplify the presentation of the decision procedure 
      from shoiq and alchoiqb to simplified alcoifb knowledge bases
in the following  we only work with alcoifb knowledge bases  nevertheless  our results
also hold for shoiq knowledge bases and queries with only simple roles in the query and
for alchoiqb knowledge bases  i e   when the knowledge base contains safe boolean role
expressions  but no transitivity  the restriction to alcoifb is without loss of generality 
as we show now 
provided the query contains only simple roles  we can use the elimination techniques for
transitivity  kazakov   motik        to reduce a shoiq knowledge base to an alchoiq
knowledge base with extended signature  we can further eliminate qualified number restrictions and role inclusion axioms by transforming an alchoiqb knowledge base into an
alcoifb knowledge base that is equivalent to the original one up to an extension of the
signature  rudolph  krotzsch    hitzler         we do not repeat a formal proof here  but
rather give an informal argument as to how this reduction works 
we assume that the knowledge base is in negation normal form  i e   all gcis are of
the form   v c with c a concept in nnf  now  consider a concept expression of the form
  n r c with r a role and c a concept  this means that there are at least n distinct rneighbors satisfying c  however  this situation can be enforced by introducing n new roles
r            rn each of which is deemed to have r as a superrole  ri v r  and which are pairwise
disjoint    v  ri u rj      under those side conditions  the above concept expression
can be replaced by r   c u       u rn  c 
a somewhat dual argumentation is possible for concept expressions of the form   n r c
restricting the number of r neighbors satisfying c to at most n  again we extend the
signature by introducing new roles r            rn   but this time  we let them cover all outgoing
r links in the following sense  whenever an r link leads to some domain element  which
satisfies c  then one of the roles r            rn also leads there  indeed  safe boolean role
expressions allow for expressing this correspondence via the concept description  r u r  u
      u rn   c  it is now easy to see  that this concept expression can replace the above if
we additionally demand all roles r            rn to be functional 
   

finominals  inverses  counting  and conjunctive queries

 o  v r a

a v r a

a v s b

func f   

func g   

b vc td

c v f e

d v g e

e v b t  o 

r
 o 
e

a

r

s
f

b
c e

a

r

s
g

b
de

a

r

s
f

b
c e

a

r

s
g

b
de

a r



s
f

b
c e

g



figure    knowledge base for our running example and a representation of a model for the
knowledge base 

finally consider a role hierarchy statement r v s  stating that whenever two domain
elements   and   are connected by role r  they are also interconnected via s  clearly  this
statement can be reformulated as  there are no two domain elements connected by r and
by s  this  in turn  can be equivalently rephrased by saying that no domain element has
an r u s neighbor or  expressed as gci    v  r u s   
these transformations can be applied to an alchoiqb knowledge base  whereby all
cardinality constraints and role inclusion axioms are eliminated  this leaves us with an
equivalent alcoifb knowledge base up to an extension of the signature 
figure   displays an alcoifb knowledge base and an according model  which we will
refer to as a running example throughout the paper 
furthermore  we assume that the abox is internalized  e g   c a  is replaced by the
equivalent gci  a  v c  r a  b  by  a  v r  b   etc    thus  we effectively decide query
entailment with respect to a tbox only since knowledge bases in this setting have an empty
abox 
for t an alcoifb tbox  it is always possible to transform t into an equivalent tbox
t   up to signature extension such that all gcis in t   have one of the following simplified
forms 
l
g
ai v
bj   a   o    a v u b   a v u b   func f   
   
where a i  and b j  are concept names  o is andindividual name  u is a safe boolean
f role
expression  and f is a role  if i      we interpret ai as   and if j      we interpret bj as
  an alcoifb knowledge base k    t   a  is simplified if t is simplified and a is empty 
every alcoifb knowledge base  which is not in this form  can be transformed in polynomial time into the desired form by using the standard structural transformation  which
iteratively introduces definitions for compound sub concepts  kazakov   motik        
thus  we assume in the remainder that any knowledge base is rewritten into a simplified
alcoifb knowledge base 
   

firudolph   glimm

      connected and constant free queries
we assume that queries are connected  more precisely  let q be a conjunctive query  we
say that q is connected if  for all t  t   term q   there exists a sequence t            tn such that
t    t  tn   t  and  for all    i   n  there exists a role name r such that r ti   ti      q or
r ti     ti    q  a collection q            qn of queries is a partitioning of q if q   q          qn  
term qi    term qj      for    i   j  n  and each qi is connected 
lemma    let k be a knowledge base  q a conjunctive query  and q            qn a partitioning
of q  then k    q iff k    qi for each i with    i  n 
a proof is given by tessaris        and  with this lemma  it is clear that the restriction
to connected queries is indeed without loss of generality since entailment of q can be decided
by checking entailment of each qi at a time  in what follows  we therefore assume queries
to be connected without further notice 
in unions of conjunctive queries  we assume that the variable names in each disjunct are
different from the variable names in the other disjuncts  this can always be achieved by
naming variables apart  we further assume that each disjunct in a ucq is a connected conjunctive query  this is without loss of generality since a ucq which contains unconnected
disjuncts can always be transformed into conjunctive normal form  we can then decide entailment for each resulting conjunct separately and each conjunct is a union of connected
conjunctive queries  glimm et al       a   note that  due to the transformation into conjunctive normal form  the resulting number of unions of connected conjunctive queries for
which we have to test entailment can be exponential in the size of the original query 
we further assume that queries do not contain constants  individual names  to occur in
the position of variables  in the presence of nominals this is without loss of generality  for
each individual name a occurring in q  we extend the knowledge base k with the axioms
 a   na for na  nc a fresh concept name  and replace each occurrence of a in q with a
fresh variable xa  nv and add a concept atom na  xa   to q 
      general notation
throughout this paper  concept names and role expressions are written in upper case  while
roles and individual names are written in lower case  unless stated otherwise  we use a
and b for concept names  c and d for possibly complex concepts  r and s for roles  f
for functional or inverse functional roles  u and v for safe boolean role expressions  and o
for nominals that are used in tbox axioms or that occur in complex concepts  sub  and
superscripts might be appended if necessary  if not stated otherwise  we use q  possibly
with subscripts  for a connected boolean conjunctive query  k for a simplified alcoifb
knowledge base  i for an interpretation  i   i    and    for evaluations 

   model construction
in this section  we introduce interpretations and models that have a kind of forest shape 
the main notion of a forest is  however  very weak since we do also allow for arbitrary
relations between tree elements and roots  without such relations  we call the result a
strict forest  we exploit the nice properties of trees and forests in the following sections 
   

finominals  inverses  counting  and conjunctive queries

when we replace parts in interpretations that give rise to an infinite number of new nominals 
since even models of an alcoifb knowledge base that have a kind of forest shape are not
really forests  we also introduce approximations of models in which nominals are no longer
interpreted as singleton sets  we call these structures quasi interpretations or quasi models
and such interpretations can have the form of real forests  further  we provide a way of
unraveling an arbitrary model into a forest that is a quasi model for the knowledge base
and a way of collapsing such forest quasi models back into real models of the knowledge
base that still have a kind of forest shape 
definition    forest  quasi  interpretations and  quasi  models   a tree t is a nonempty  prefix closed subset of in   for w  w   t   we call w  a successor of w if w    w  c
for some c  in  where  denotes concatenation  we call w  a predecessor of w if w   w   c
for some c  in  and w  is a neighbor of w if w  is a successor of w or vice versa  the empty
word  is called the root of the tree  we use  w  to denote the length of w 
a forest f is a subset of r in   where r is a countable  possibly infinite set of elements
such that  for each   r  the set  w      w   f   is a tree  each pair       f is called
a root of f   for    w        w     f   we call      w    a successor of    w  if      and w 
is a successor of w       w    is a predecessor of    w  if      and w  is a predecessor of w 
     w    is a neighbor of    w  if      w    is a successor of    w  or vice versa  a node    w 
is an ancestor of a node      w    if      and w is a prefix of w  and it is a descendant if
     and w  is a prefix of w 
a forest interpretation of a knowledge base k is an interpretation i    i   i   that
satisfies the following conditions 
fi  i is a forest with roots r 
fi  there is a total and surjective function    nom k   r     such that  o        
iff oi        
fi  for each role r  rol k   if h   w        w   i  ri   then either
 a  w    or w      or
 b     w  is a neighbor of      w    
if i    k  we say that i is a forest model for k  if i has a single root  we call i a tree
interpretation and a tree model for k  respectively 
let k be an alcoifb knowledge base  with nomfree k   we denote the alcifb
knowledge base obtained from k by replacing each nominal concept  o  with o  nom k 
with a fresh concept name no   a forest quasi interpretation for k is an interpretation
j    j   j   of nomfree k  that satisfies the following properties 
fq  j is a forest with roots r 
fq  there is a total and surjective function    nom k   r     such that  o        
iff       noj
fq  for each role r  rol k   if h   w        w   i  ri   then either
 a  w    or w      or
   

firudolph   glimm

 b     w  is a neighbor of      w    
note that condition fq  allows for elements    w   j with w     such that    w   noj  
we call j strict if in condition fq   only fq  b  is allowed  if j    nomfree k  we say
that j is a forest quasi model for k 
the branching degree d w  of a node w in a tree t is the number of successors of w  let
i    i   i   be a forest  quasi  interpretation for k  if there is a k such that d w   k for
each    w   i   then we say that i has branching degree k 
 
in the remainder  when we use the concept name no   we mean the fresh concept name
that was introduced in nomfree k  for the nominal concept  o  with o  nom k   elements
in the extension of a concept no are called nominal placeholders  please note that  in a
forest quasi interpretations j   we can have several elements    w  with w     such that
   w   noj  
in the following  we define a notion of isomorphism between forest interpretations  note
that we demand not only structural identity w r t  concepts and roles but also w r t  the
successor relation 
definition    isomorphism between forest interpretations   let i  i   be two forest inter 
pretations of k with        i            i   the pairs h      i  h        i are isomorphic
w r t  k  written h      i 
 k h        i iff
 

   h      i  ri iff h        i  ri for each r  rol k  
 

   i  ai iff i   ai for i         and each a  con k  
 

   i   oi iff i    oi for i         and each o  nom k  
we say that i and i   are isomorphic w r t  k  written  i 
 k i     if there is a bijection
 
   i  i such that  for each        i   h      i 
 k h          i and   is a
successor of   iff      is a successor of      
 
if clear from the context  we omit the subscript k of 
 k   we extend the above definition
in the obvious way to forest quasi interpretations  i e   by omitting condition   and defining
the isomorphism with respect to k    nomfree k  
forest quasi models have  intuitively  the purpose of an intermediate step between arbitrary models of k and forest models of k  when identifying each  in the interpretation of
a concept no in the knowledge base k  with a root that is in the interpretation of no   we
obtain an interpretation that would be a model for k apart from functionality restrictions
for some nominals that might be violated  we show later how we can eliminate those relations from the forest back to the roots that violate functionality restrictions and how we
can eventually obtain a forest model from a forest quasi model 
another useful property of quasi interpretations is that  for simplified alcifb knowledge bases  it can be checked locally whether an interpretation i is actually a model of
k 
definition    local k consistency   let i    i   i   be an interpretation for a simplified
alcifb knowledge base k with   i   we define local satisfaction for  and concepts
that can occur in simplified alcifb axioms as follows 
   

finominals  inverses  counting  and conjunctive queries

   for a            an  con k  
 a  i     

d

 b  i     

f

ai if   aii for each i with    i  n  i      

d

ai otherwise 
f
ai if   aii for some i with    i  n  i       ai otherwise 

   for u a safe boolean role expression over rol k   a  con k  
 a  i      u a if there is some     i such that h     i  u i and i        a 
i       u a otherwise 
 b  i      u a if  for each     i such that h     i  u i   i        a  i       u a
otherwise 
   for f  rol k   i      func f   if        i   h     i  f i        i       func f  
otherwise 
an element   i locally satisfies a gci c v d with c  d alcifb concepts if i      c
implies i      d  it locally satisfies a functionality restriction func f   if i      func f    an
element   i is locally k consistent if it locally satisfies each axiom in k 
 

lemma     let k be a simplified alcifb knowledge base and i    i   i   an interpretation for k  then i is a model for k iff each element   i is locally k consistent 

proof  for simplified alcifb knowledge bases  only axioms of the form a v u b and
a v u b involve checking neighbors of an element  and  since b is a concept name in
simplified knowledge bases  it is immediate that satisfaction of b can be checked locally for
the neighbor of  in question 
for a knowledge base k with nominals  we can also use local k consistency  but we
need an additional global condition that ensures that nominals are interpreted as singleton
sets  the following is an immediate consequence of lemma    and the extra condition  
for nominals 
proposition     let k be a simplified alcoifb knowledge base and i    i   i   an
interpretation for k  then i is a model for k iff
   each element   i is locally k consistent and 
   for each o  nom k   there is exactly one element   i such that oi    

   

firudolph   glimm

we now show how we can obtain a forest quasi model from a model of k by using an
adapted version of unraveling 
definition     unraveling   let k be a consistent alcoifb knowledge base and i  
 i   i   a model for k  let choose be a function that returns  for a concept c   u b 
cl k  and an element    u b i an element c   i such that h  c  i  u i and
c   b i  
without loss of generality  we assume that  for all   i and concepts c    u   b    c   
u   b   cl k  such that   c i  c i   if choose c            choose c            and
h    i 
  h    i  then        
an unraveling for some element   i   denoted as  i     is an interpretation that
is obtained from i and  as follows  we define the set s   i   of sequences to be the
smallest set such that
  is a sequence 
      n  n   is a sequence  if
      n is a sequence 
 if n     and hn   n  i  f i for some functional role f   then n      n   
 n     choose c  n   for some c   u b  cl k  
now fix a set f      in and a bijection    f  s such that
 i  f is a forest 
 ii          
 iii  if    w      w  c   f with w  c a successor of w  then    w  c       w   n   for
some n    i  
such a forest f and bijection  exist because s is a prefix closed set with root   thus  we
just map from the notion of sequences to that of forests 
for each o  nom k   let no  nc be a fresh concept name  for each    w   f   set
tail   w    n if    w         n   now  we define the unraveling for  as the interpretation
j    j   j   with j   f and  for each    w   j   we define the interpretation of
concept and role names as follows 
 a  for each o  nom k   noj       w   j   tail   w   oi   
 b  for each concept name a  con k   aj       w   j   tail   w   ai   
 c  for each role name r  rol k   h   w      w   i  rj iff w  is a neighbor of w  and
htail   w   tail   w   i  ri  
let r be the subset of i that contains exactly those   i such that oi    for some
o  nom k   let u be a set containing an unraveling of i starting from each   r  the
union of all interpretations from u is called an unraveling for i  denoted as  i   where
unions of interpretations are defined in the natural way 
 
   

finominals  inverses  counting  and conjunctive queries

no e
a
a

bc
e

bd
e

f

s

bc
e

g

bc
e

a
a

s

r

bd
e

f

bd
e

f

g

bc
e

g

bc
e

s

  

 

r
s

bd
e
g

bc
e
f
  

r
s

r

r

r
s

a
a

r

bd
e
g

 

f
  

 

bd
e
g

f
  

no e
  
 
no e
  
 
no e
  
 

 

figure    unraveling of the model displayed in figure   
figure   shows the unraveling for our example knowledge base and model  the dotted
lines under the non root elements labeled no indicate that a copy of the whole tree should
be appended since we do not stop unraveling at nominal placeholders 
it might be helpful to think of the function tail as a homomorphism  up to signature
extension  from the elements in the unraveling j to elements in the original model i 
indeed  tail satisfies the following properties  for each    w         w     j  
 tail   w    oi iff    w   noj   for all o  nom k  
 tail   w   ai iff    w   aj   for all a  con k   and
 htail   w   tail      w   i  ri iff h   w         w   i  rj   for all r  rol k  
unravelings are the first step in the process of transforming an arbitrary model of k
into a forest model since the resulting model is a forest quasi model of k  as we show in the
next lemma 
lemma     let k be a consistent alcoifb knowledge base and i    i   i   a model of
k  then j    j   j      i  is a strict forest quasi model for k 
proof  let k    nomfree k   by construction  j satisfies conditions fq  and fq  of
forest quasi models and the strictness condition  since j is obtained from a model i of
k  by definition of unravelings as starting from each   i such that oi    for some
o  nom k   and by condition  a  of unravelings  there is  for each o  nom k   one root
      j such that       noj   thus  j satisfies also property fq  and j is a forest
quasi interpretation for k  we show that j is a model of k  by demonstrating that each
   w   j is locally k   consistent  since we assume all knowledge bases to be simplified 
we only have to consider axioms of form     
   

firudolph   glimm

d
f
d
let ax be an axiom of the form ai v bj and assume
that    w     ai  j   by
d
condition  b  of unravelings  we have w   tail   w     ai  i and  since i    k  we have
w  bji for some j  again by condition  b  of unravelings  we then have    w   bjj as
required 
axioms of the form a   o  in k are rewritten into a  no in k    we consider a v no
and no v a separately  let ax be of the form a v no for o  nom k  and assume that
   w   aj   by condition  b   we have that w   tail   w   ai and  since i    k 
we have w   oi    by condition  a  of unravelings  we then have that    w   noj as
required  for no v a with o  nom k   assume that    w   noj   by condition  a   we
have w   tail   w    oi   and  since i    k  we have w  ai   by condition  b  of
unravelings  we then have    w   aj as required 
let ax be an axiom of the form a v u b and assume that    w   aj   by condition  b   we have w   tail   w   ai and  since i    k  we have each w   i such
that hw   w  i  u i is such that w   b i   let       w    be such that h   w         w   i  u j
and       w    
  b j   by condition  c  of unravelings  we then have that hw   w  i  u i for
w    tail      w    and by condition  b  that w  
  b i   which is a contradiction 
let ax be an axiom of the form a v u b and assume that    w   aj   by condition  b   we have w   tail   w   ai and  since i    k  we have there is at least one
w   i such that hw   w  i  u i and w   b i   in case there is more than one such
element  let w  be such that w    choose c  w    then  by definition of sequences  there is
some neighbor    w    of    w  with tail   w      w    let    w         n   i e   n   w  
we distinguish two cases 
   the element w  is such that w    n    by definition of the bijection   w  
w   c  by definition of j from i  condition  c   and since hw   w  i  u i   we have
h   w      w   i  u j   then  since b is a concept name and w   b i   we have by
condition  b  that    w     b j   which proves the claim 
   the element w  is such that w     n    by definition of sequences and the bijection
  we have that    w           n  w    now  by definition of j from i  in particular
properties  b  and  c    we have h   w      w   i  u j and  again since b is a concept
name     w     b j   which proves the claim 
let ax be an axiom of the form func r  for r  rol k   assume  to the contrary
of what is to be shown  that    w  has two distinct neighbors    w        w    such that
h   w      w   i  h   w      w   i  rj   since the function  introduced in the unraveling is a
bijection  there are two distinct sequences s  and s  such that    w      s  and    w      s 
and tail   w          tail   w        with          since h   w      w   i  h   w      w   i 
rj we get  due to condition  c   that htail   w     i  htail   w     i  ri   which is a contradiction since i    k 
since    w  was arbitrarily chosen  we have that each element in the domain of j is
locally k   consistent as required and j    k  by lemma    
lemma     let k be a consistent alcoifb knowledge base  i    i   i   a model of k 
and j    j   j      i  an unraveling for i  then j has a branching degree bounded in
 cl k   

   

finominals  inverses  counting  and conjunctive queries

proof  let m be the number of axioms in k  each axiom of a simplified knowledge base
can contain at most one existential restriction and  due to the definition of the function
choose used in the unraveling  there are  for each sequence s  s  at most m elements
            m  i such that s  i with    i  m is a sequence in s  since the mapping 
from the forest j to sequences is a bijection  j is a forest with branching degree m 
in the following steps  we traverse a forest quasi model in an order in which elements
with smaller tree depth are always of smaller order than elements with greater tree depth 
elements with the same tree depth are ordered lexicographically  the bounded branching
degree of unravelings then guarantees that  after a finite number of steps  we go on to
the next level in the forest and process all nodes eventually  further  we can merge nodes
such that  finally  all nominal placeholders  in the extension of some no   can be interpreted
as nominals without violating functionality restrictions  in fact  we do not only have to
merge nominal placeholders  but also elements that are related to a nominal placeholder
by an inverse functional role since  by definition of the semantics  these elements have to
correspond to the same element in a model  in order to identify such elements  we define
the notion of backwards counting paths as follows 
definition     paths and bcps   let i    i   i   be an interpretation  we call           n
a path from   to n if  for each i with    i   n  hi   i   i  rii for some role ri  rol k  
the length  p  of a path p             n is n     each element   i is a path of length
u

un 

   we write              n to denote a path from   to n such that hi   i   i  uii for
each    i   n and ui a safe boolean role expression 
let k be an alcoifb knowledge base and i    i   i   a forest model  a forest quasimodel  of k  a path p          n in i is a descending path if there is some root       i
such that  for each i with    i  n  i      wi   and  for    i   n   wi      wi      the
path p is a backwards counting path  bcp  in i if n   oi  n  noi   for some nominal
o  nom k  and  for each i with    i   n  hi   i   i  fii for some inverse functional role
fi  rol k   the path p is a descending bcp if it is a bcp and a descending path  given a
f 

fn

bcp p               n   with n    oj  n    noj    we call the sequence f     fn o
a path sketch of p 
 
please note that an element  in the domain of j already counts as a  descending  bcp
if   oj  noj   for some o  nom k  
we now define the order that guarantees that in an iterative parsing process  we not only
process all nodes  but also that we can merge nodes as required so that  finally  all nominal
placeholders can be interpreted as nominals without violating functionality restrictions 
definition     ordering   for convenience and without loss of generality  we assume that
the set of individual names ni is ordered  let k be a consistent alcoifb knowledge
base and j a forest quasi interpretation for k  we extend the order to elements in j


as follows  let w    wp  c      cn    w    wp  c      cm
   in where wp  in is the longest
common prefix of w  and w    then w    w  if either n   m or both n   m and c     c     for
                j   let o   nom k  be the smallest nominal such that         noj  and
o   nom k  the smallest nominal such that         noj    now      w           w    if either
 i   w       w    or  ii   w       w    and o    o  or  ii   w       w     o    o  and w    w   
   

firudolph   glimm

in the following  we are merging elements in an unraveling and  in this process  create
new roots of the form  w    from elements of the form    w  and elements of the form
 w  w    from    ww     we extend  therefore  the order to elements of this form as follows 
   w    w          w    w     if      w  w            w  w     
 
roughly speaking  we proceed as follows in order to transform a quasi forest model
j into a forest model i  we work our way downwards the trees level by level along the
descending bcps and use the above defined order for this purpose  by definition of the
semantics  elements that start the same descending bcp or  more precisely  that start
bcps with identical path sketches  have to correspond to the same element in the forest
model i that we produce  during the traversal of the forest quasi model  we distinguish
two situations   i  we encounter an element    w  that starts a descending bcp and we
have not seen another element before that starts a descending bcp with the same path
sketch  in this case  we promote    w  to become a new root node of the form  w    and
we shift the subtree rooted in    w  with it   ii  we encounter a node    w  that starts a
descending bcp  but we have already seen a node      w    that starts a descending bcp
with that path sketch and which is now a root of the form    w       in this case  we delete
the subtree rooted in    w  and identify    w  with    w       if    w  is an f  successor of
its predecessor for some inverse functional role f   we delete all f   successors of    w      and
their subtrees in order to satisfy the functionality restriction  we use a notion of collapsing
admissibility to characterize models in which the predecessor of    w  satisfies the same
atomic concepts as the deleted successor of      w     which ensures that local consistency is
preserved  by virtue of this notion  we can characterize forest quasi models that can be
collapsed into proper models irrespective of whether they have been obtained by unraveling
of a model or not 
in order to keep the domain as a forest when promoting an element    w  to a new root 
we build the new domain with elements of the form  w    for    w  and elements of the
form  w  w    for descendants    ww    of    w  
definition     equivalence relation  and collapsings   let k be an alcoifb knowledge base  k    nomfree k   and j    j   j   a forest quasi interpretation of k  we
define  as the smallest equivalence relation on j that satisfies      if       start
descending bcps with identical path sketches 
let j be a strict forest quasi interpretation for k  j     j    j      j and      w    
j
 
 the smallest element with w      that starts a descending bcp  we call j  an initial
collapsing for j and      w    the focus of j   
let ji be a collapsing for j and  i   wi    ji the focus of ji   we obtain a collapsing
ji      ji     ji     with focus  i     wi     for j from ji according to the following two
cases 
   there is no element       ji such that      is smaller than the focus  i   wi   and
       i   wi    then ji i is obtained from ji by renaming each element  i   wi wi    
ji to  i wi   wi    
   there is an element       ji such that      is smaller than the focus  i   wi   and
       i   wi    let      be the smallest such element 
   

finominals  inverses  counting  and conjunctive queries

 a  ji     ji      i   wi wi      wi   in        w    w   c  w    c  in  w  
in    i   wi   has a predecessor  i   wi    such that h i   wi      i   wi  i  f ji for an
inverse functional role f in rol k  and h   c       i  f ji    
 b  for each concept name a  con k  and    w   ji        w   aji   iff    w  
aji  
 c  for each role name r  rol k  and      w          w     ji     h     w          w   i 
rji   iff
i  h     w          w   i  rji or
ii       w    is the predecessor of  i   wi   in ji  i e       i and wi   w   c for
some c  in        w            and h     w      i   wi  i  rji  
the focus  i     wi     in ji   is the smallest descending bcp with  i   wi      i     wi     
for a collapsing ji   let safe ji   be the restriction of ji to elements    w  such that
   w   jj for all j  i  with j we denote the non disjoint union of all interpretations
safe ji   obtained from subsequent collapsings ji for j   the interpretation obtained from
j by interpreting each o  nom k  as       noj is denoted by collapse j   and called a
purified interpretation with respect to j  if collapse j      k  we call collapse j   a purified
model of k 
 
in figures   to   we illustrate the first collapsing steps for the unraveling depicted in
figure    apart from the nominal placeholder concepts  the concept interpretations are
not shown in the figures  but are assumed to be as indicated in figure    the edges for
descending bcps are shown in red color  and the dashed lines in figure   indicate the levels
of the tree because  within a tree  the order in which the nodes are processed depends firstly
on their level  within a level  we assume that the order increases from left to right  the
numbers next to nodes in figure   indicate  which elements are used as focus element in
a collapsing step and their order  for the initial collapsing  figure    the focus is on the
first non root element that starts a bcp  which we indicate with a black border around the
node and a black triangle pointing to the focus 
in the first collapsing step we just rename elements to promote the focus from figure  
to a root  because the focus element highlighted in figure   starts a bcp with path sketch
different from the ones started by smaller elements  we again only rename elements to
obtain a new root  figure     now  the focus is on a nominal placeholder and since nominal
placeholder are bcps  we have a root with the same path sketch and use the second case
of definition     the resulting collapsing is depicted in figure   
finally  we obtain a collapsing for the unraveling shown in figure   as the one depicted
in figure   
we can now show that the collapsing of an unraveling results in a forest model for
k  our aim is  however  to show something more general  we want to collapse not only
unravelings into forest models  but also forest quasi models which have been obtained in
another way  unfortunately  it is not the case that the collapsing of any forest quasi model
results in a forest model for k since the elements that we merge in the collapsing process
do not necessarily satisfy the same atomic concepts  we define  therefore  the following
admissibility criterion that characterizes forest quasi models that can be collapsed into
forest models 
   

firudolph   glimm

no

no

r

r



h
  no

r
 

 
f

f
r s
g







no
f

r s



g

g

  no
f
g

r s

h

g


r s

r s


 
g



r s



f



r s

no
f

s

figure    an initial collapsing for the un  figure    in the first collapsing step we just
raveling depicted in figure   
rename elements to promote the
focus from figure   to a root 

r

r

no
f

r
r

r s

r s

f





h

r s



g

g



f

no
f

s

r

r s

g

s

g

g


s



n

f



g

f

s



r

no



no

figure    a collapsing obtained from the figure    a collapsing obtained by using
one depicted in figure   
the second case of definition   
on the collapsing from figure   

definition     collapsing admissibility   let j be a forest quasi interpretation for some
alcoifb knowledge base k  then j is collapsing admissible if there exists a function
ch    cl k   j    j such that
   for each concept c   u b  cl k  and each   c j   we have h  ch c   i  u j and
ch c     b j   moreover  if there is no functional role f for which h  ch c   i  f j
then ch c    is a successor of  
   for each concept c   u b  cl k  and elements       c j that start descending
bcps with identical path sketches  we have h  ch c   i 
  h     ch c      i 
 
lemma     let k be an alcoifb knowledge base  any unraveling j of a model i for
k is collapsing admissible 
   

finominals  inverses  counting  and conjunctive queries

b
b
b
b
b
 o  e f c e g d e f c e g d e f c e g



r
s

a

s

r
a

s

r
s
a
s

r
a
r
a
r
  
 

figure    result of collapsing the unraveling from fig     the infinitely many new root
elements are displayed in the top line 

proof  we define a function ch directly from the function choose used in the unraveling as follows  for each c  cl k  and    w   j with    w              n and
choose c  tail   w            we set ch c     w        w    for    w                  n      
if           n     is a sequence in s and    w                  n    otherwise  this is
well defined since the function  in unravelings is total and bijective and it is as required
for admissibility since elements that start bcps with identical path sketches are always
generated from the same element in i  the first condition of collapsing admissibility holds
since in unravelings  we always add           n     to the set of sequences unless the pair
hn   n  i is in the interpretation of some functional role  in that case  the function ch uses
the predecessor instead of the successor  which is still admissible 
lemma     let k be a consistent alcoifb knowledge base  j    j   j   a strict forest
quasi model for k with branching degree b that is collapsing admissible  then collapse j  
is a forest model for k with branching degree b 
proof  let k    nomfree k   since j is a forest quasi model of k by assumption  j    k   
we first show that each collapsing ji for j is a forest quasi model for k  i e   ji    k   
we then show that each collapsing ji   produced from an admissible collapsing ji is again
collapsing admissible  finally  we show that  for each o  nom k   there is exactly one
node in j of the form      such that       noj   which implies by proposition    that
collapse j   is a forest model for k 
we start with the first claim  for the initial collapsing this is immediate since j is a
forest quasi model for k  in particular  j  is locally k   consistent  assume that ji is a
locally k   consistent collapsing and  i   wi   is the focus in ji   we show that ji   is locally
   

firudolph   glimm

k   consistent  since k  is simplified by assumption  we only have to consider axioms of
form     
if ji   is obtained according to the first case of definition     we only rename elements
of the domain in order to create a new root node and local k   consistency is immediate 
we assume  thus  that ji  
according to the second case of definition    
d is obtained
f
axioms of the form ai v bj and a   o   rewritten into a  no in k    hold
immediately due to condition   b of collapsings 
let ax be an axiom of the form a v u b and assume that    w   aj   the only
interesting elements are the predecessor  i   wi    of the focus  i   wi   and       however 
 i   wi         and  since j is collapsing admissible   i   wi   and      satisfy the same
atomic concepts with respect to con k   further  the interpretation of atomic concepts is
not changed due to   b  which again implies local k   consistency for this kind of axioms 
let ax be an axiom of the form a v u b and assume that    w   aji     we concentrate on the three interesting cases where the direct neighborhoods of elements change 
   we start with the case where the focus  i   wi   is the corresponding u  successor of
   w   i e   i     wi   wc for some c  in  h   w    i   wi  i  u ji   and  i   wi    b ji  
since      and  i   wi   are in the same equivalence class for  by assumption      
starts a bcp with the same path sketch as  i   wi   and both      and  i   wi   satisfy
the same atomic concepts with respect to con k   then condition    c ii  ensures that
     is the required u  successor for    w  in ji    
   assume that    w          h         c i  u ji      c   b ji      c  
  ji     and
j
i  
     
   u b 
  due to   a  the focus  i   wi   has a predecessor  i   wi    such that
 
h i   wi     i   wi  i  f ji for an inverse functional role f  rol k  and h         c i 
 f   ji   since f is inverse functional and ji is  by assumption  locally k   consistent 
there is no successor  i   wi  ci   of  i   wi   such that h i   wi     i   wi  ci  i   f   ji  
similarly  there is no element      w    such that h           w   i   f   ji   then 
since ji is collapsing admissible  we have that  i   wi     ch u b   i   wi        c  
ch u b         and h i   wi     i   wi   i 
  h         c i since  i   wi   and      start
descending bcps with identical path sketches  in particular  h i   wi     i   wi   i  u ji
and  i   wi     b ji   then  by condition    c ii   h       i   wi   i  u ji     by condition   b   i   wi     b ji     and  thus         u b ji   as required 
   we assume that  i   wi   has a predecessor  i   wi    such that h i   wi      i   wi  i  f ji
for an inverse functional role f in rol k  and h   c       i  f ji   causing the deletion
of    c  and its descendants  one of which  say    v  is connected to some       such
that h         v i  u ji and    v   b ji   now  if there is no inverse functional role
g for which h         v i  g ji   then the strictness and collapsing admissibility of ji
ensure the existence of a c   in for which h         c i  u ji and    c   b ji and 
consequently  also h         c i  u ji   and    c   b ji     if h         v i  g ji
for some inverse functional role g  then strictness of the initial collapsing implies that
   v  itself started a descending bcp and  due to the defined order  it must have
been a focus before and now be a root itself  this contradicts  however  the initial
assumption that    v  is a descendant of      and we are done 
in all cases  the elements in ji   have the required successors 
   

finominals  inverses  counting  and conjunctive queries

let ax be an axiom of the form func f   for f  rol k   we concentrate on relations
between the predecessor  i   wi    of the focus and      since otherwise local k   consistency
is immediate  a predecessor exists for the focus since we process elements in ascending order starting with non root nodes  assume h i   wi      i   wi  i  f ji   in which case
h i   wi         i  f ji   due to    c ii  and assume      has a successor    c  in ji such
that h   c       i  f ji   in this case     c  
  ji   according to   a and together with
 
local k  consistency of ji   this implies that  i   wi    is the only element in ji   such that
h i   wi         i  f ji    
we now show that each ji   produced from an admissible collapsing ji is again admissible for collapsing  by assumption  the initial collapsing is admissible  so let ji be an
admissible collapsing and chi the required function  we distinguish two cases 
   let ji   be produced according to the first case of collapsings  we define a function
chi   for ji   as follows  for each c  cl k  and   ji     we set chi    c        
for       i wi   w     if chi  c       i   wi wi    for  i   wi   the focus in ji and      chi  c   
otherwise  since we just change the names of the elements and leave the interpretation
of concepts and roles as before  the function is as required for admissibility 
   let ji   be produced according to the second case of collapsings  we define a function
chi   for ji   as follows  for each c  cl k  
 a  for each   ji   
    i   wi           with  i   wi    the predecessor of the focus
 i   wi    we set chi    c         for    such that     ji   and      chi  c    
this is well defined since only successors of      and  i   wi    are deleted in ji    
 b  for         and  i   wi    the predecessor of the focus  chi    c         for
      i   wi    if chi  c         c  and    c  
  ji   and      chi  c    otherwise 
 c  for     i   wi    the predecessor of the focus  we set chi    c         for          
if chi  c       i   wi   and      chi  c    otherwise 
for elements apart from the predecessor of the focus  i   wi    and the root     
that replaces  i   wi    the interpretation of concepts and roles remains as before
by properties   b and   c and the function is as required  for  i   wi     we change
the function so that in cases where  i   wi   was returned       is returned  since
 i   wi          this is admissible  similarly  if a successor    c  of      is not contained in ji     then  i   wi    is used instead  this is admissible since  in this case 
h i   wi     i   wi   i 
  h         c i as argued above for axioms of the form a v u b 
we now show that  for each o  nom k   there is exactly one node in j of the form
     such that       noj   nominal placeholders are descending bcps by definition and 
when a nominal placeholder becomes the focus  it is merged into a root that is in the same
equivalence class of  and which is by definition of lower order  such a root exists because
of property fq  of forest quasi interpretations 
the interpretation j is obtained by building the non disjoint union of the safe parts
for all collapsings  which contain only elements which will neither be renamed nor deleted 
thus  j does not contain nominal placeholders as required  considering any one element
   w   j   we find that there is an i  in such that all successors and all root neighbors
   

firudolph   glimm

of    w  in ji are the same as in j   as we have shown  ji is locally k   consistent and
therefore    w  has a consistent neighborhood  hence j is a forest quasi model of k 
now  when interpreting each o  nom k  as        j         noj   in collapse j   
we obtain a forest model for k  where the set of roots is               j   
the bounded branching degree is an immediate consequence of the construction since
we never add successors during the construction and the starting forest quasi interpretation
j has a bounded branching degree by assumption 
since unravelings of a model i for k are strict forest quasi models of k with branching degree bounded in  cl k   by lemma     and unravelings are collapsing admissible by
lemma     it is an immediate consequence of lemma    that the collapsing of an unraveling
yields a forest model branching degree bounded in  cl k   
corollary     let k be an alcoifb knowledge base and i an interpretation such that
i    k  then the purified interpretation collapse  i   is a forest model for k with branching
degree b bounded in  cl k   
since the number of roots might still be infinite in purified models  we could  up to
now  have obtained the same result by unraveling an arbitrary model  where we take all
elements on bcps as roots instead of taking just the nominals and creating new roots
in the collapsing process  in the next sections  however  we show how we can transform
an unraveling of a counter model for the query such that it remains collapsing admissible
and such that it can in the end be collapsed into a forest model with a finite number of
roots that is still a counter model for the query  for this transformation it is much more
convenient to work with real  strict  trees and forests  which is why we use  strict  forest
quasi interpretations 
in the next sections  we also use the following alternative characterization of the result
of a collapsing  which comes in handy for the subsequent proofs 
we start by defining the so called pruning of a forest quasi interpretation  which is 
roughly speaking  the structure obtained by just deleting all the nodes  which will be erased
in the course of the collapsing process anyway 
definition     pruning   let j be a strict forest quasi model for an alcoifb knowledge
base k that is collapsing admissible and let j    j            j be as defined in definition    
the pruning of j  written prune j    is obtained by restricting j to a set   j which
is defined as follows   contains all hw    w  w  i  j for which hw  w    w  i  j or
hw  w    w  i is the focus in some ji  
 
we again use the equivalence relation  for elements that start descending bcps with
identical path sketches from definition    and construct an interpretation from a pruning
by identifying equivalent nodes  also known as factorization 
definition     factorization   let k be an alcoifb knowledge base  j a strict forest
quasi interpretation for k that is collapsing admissible  and l   prune j   
the factorization of l by   denoted by l    is now defined as the forest quasi interpretation m    m   m   with
 m           l   
   

finominals  inverses  counting  and conjunctive queries

 for each a  con k   am           al   
 for each r  rol k   rm    h           i   h     i  rl    and
 for each o  nom k   om      for   nol  
 
note that the interpretation of nominals in m is well defined as  by definition  all
no  instances are in the same  equivalence class 
now we are ready to establish the wanted correspondence  the collapsing of a forest
quasi interpretation can essentially be obtained by first pruning and then factorizing it 
lemma     let j be a strict forest quasi model for an alcoifb knowledge base k and
let j be collapsing admissible  then collapse j   
  prune j      moreover the new roots in
collapse j   correspond to those  equivalence classes that contain j  elements which start
descending bcps in j  
proof  considering the first claim  note that by definition of the collapsing procedure  for
every  w  w     collapse j   there is exactly one pair w    w  with w   w  w  such that
 w    w  w     prune j     moreover  case   of the construction assures that collapse j   contains one element from every  equivalence class from prune j      hence the mapping
   collapse j    prune j    with  w  w        w    w  w     is a bijection and  as a consequence of the construction  an isomorphism 
the second claim is also a direct consequence of the construction of the collapsing 

   quasi entailment in quasi models
in this section  we will provide a characterization for forest quasi models that mirrors query
entailment for the corresponding proper models  in our further argumentation  we will
talk about the initial part of a tree  i e   the part that is left if branches are cut down to a
fixed length  for a forest interpretation i    i   i   and an n  in  we therefore denote
with cutn  i  the interpretation obtained from i by restricting i to those pairs    w  for
which  w   n 
the following lemma ensures that in the case of purified models  we find only finitely
many unraveling trees of depth n that look different 
lemma     let k be a consistent alcoifb knowledge base  then there is a purified
interpretation i such that i    k and  for every n  in  there are only finitely many
non isomorphic trees of depth n 
proof  since k has a model by assumption  corollary    guarantees that there is some
purified model i of k  in particular  i is a forest model with the branching degree bounded
in the size of cl k  
we now compute the maximal number of non isomorphic trees of depth n over the
domain of i  we denote this bound by tn   the argumentation is close to the one used by
levy and rousset        for their definition of tree blocking 
   

firudolph   glimm

let c    cl k   and r    rol k    we first consider trees of depth n      we have  c
choices for the different subsets of concepts in cl k   for n      each concept at level  
can trigger the generation of a new successor and we can have any number of successors
between   and c  assume  for now  that we have only a single role name r  rol k  and
that each node in a level smaller than n is the root of a tree with depth n    with exactly
c   non isomorphic sub trees of
c successors for each node  in this case  there are o  c tn 
depth n  taking into account that a node does not necessarily have c successors  but we can
c   for the number of nonchoose any number between   and c  we get a bound of o  c ctn 
isomorphic sub trees of depth n  finally  since we have not only one but a choice of r roles 
c  r    we now abbreviate  c cr with x and rc with a and rewrite
we get a bound of o  c  ctn 
n 
n
the obtained bound as tn   o x tn   a    unfolding yields tn   o  x  a     a   t   a  
n
n
n
which is bounded by o  xa    c  a     o  x c  a    by expanding the abbreviated symbols 
n
we obtain a bound for tn of o   c cr   rc    
for our further considerations  we introduce the notion of anchored n components 
these are meant to be certain substructures of forest quasi interpretations  in the first
place  these substructures contain a connected set of nodes w   which are situated closely
together in the original structure  this closeness being witnessed by the fact that all elements of w   are descendants of some node  and have a distance  n to   moreover for
each of those nodes    from w     the anchored n component may  but does not need to 
contain a finite number of descending bcps starting from     
definition     anchored components   let j be a forest quasi interpretation and   j  
an interpretation c will be called anchored n component of j with witness  if c can be
created by restricting j to a set w  j obtained as follows 
 let j be the subtree of j that is started by  and let j n    cutn  j    select a
subset w    j n that is closed under predecessors 
 for every     w     let p be a finite set  possibly empty  of descending bcps p starting
from    and let w  contain all nodes from all p  p  
s
 set w   w      w   w   
 
now think of a forest quasi model j and some query q  the following definition and
lemma employ the notion of anchored n components to come up with the notion of quentailment  short for quasi entailment   a criterion that reflects query entailment in the world
of forest quasi models 
definition     quentailment   let q be a conjunctive query with   q    n and j some
forest quasi model of an alcoifb knowledge base k  we say that j quentails q  written
j   q  if  for v   var q   j contains connected anchored n components c            c  and there
c
are according functions i   v    i such that the following hold 
q  for every x  v   there is at least one ci   such that i  x     
q  for all a x   q  we have i  x   aj for all i 
   

finominals  inverses  counting  and conjunctive queries

q  for every r x  y   q there is a ci such that there are    i  x  and    i  y  such
that h      i  rj  
q  if  for some x  v   there are connected anchored n components ci and cj with  
i  x  and     j  x   then there is
 a sequence cn            cnk with n    i and nk   j and
 a sequence             k with      and k      as well as m  nm  x  for all
   m   k 
such that  for every m with    m   k  we have that
 cnm contains a descending bcp p  started by m  
 cnm   contains a descending bcp p  started by m    
 p  and p  have the same path sketch 
for a union of conjunctive queries u   q          qh   we say that j quentails u  written
j   u  if j   q for a q   q            qh   
 
note that an anchored component may contain none  one or several instantiations of a
variable x  v   intuitively  the definition ensures  that we find matches of query parts which
when fitted together by identifying bcp equal elements yield a complete query match 
lemma     let u   q          qh be a union of conjunctive queries and k an alcoifb
knowledge base  then
   for any model i of k   i    u implies i    u 
   for any strict forest quasi model j of k that is collapsing admissible  collapse j      u
implies j   u 
proof 
   let q be a disjunct of u such that   i    q  v   var q   and c            c  the
connected anchored n components witnessing the quentailment  we use the function
tail from definition    and exploit its properties as a homomorphism  note that tail
maps nodes in  i  to the same individual in i  if they start descending bcps with
the same path sketches  due to condition q  from definition     this implies  for
every x  v and every    i  x  and    j  x   that tail       tail      hence  the
total function    v  i defined by letting  x     whenever tail      for some
  i  x  and some i with    i     is well defined  we now show that  is a query
match for q in i by examining the atoms of q 
 for every unary atom a x   the definition of quentailment ensures that there
exist a ci and a   ci with   i  x  and   aj   then  by definition of tail 
it follows that  x    tail    ai  
 likewise  for every binary atom r x  y   the definition of quentailment ensures
that there exists a ci and        ci such that    i  x  and    i  y  as
well as h      i  rj   again  by definition of tail  it follows that h x    y i  
htail      tail    i  ri  
   

firudolph   glimm

   to prove this  we employ the alternative characterization of collapsings as established
 
 
 
in lemma     let i      i   i     prune j    and let    v  i be a match for
q in i     we use  to construct the anchored n components and functions needed to
show that j quentails q 
let v   v contain those variables that  maps to a singleton  equivalence class 
we now define v    v            vm   as the finest partitioning on v  such that  for any
x  y  v    x and y are in the same partition whenever r x  y   q for some r  rol k  
next  we assign to every partition v    v the set qv   of query atoms containing
variables from v     we now construct for every v   an anchored n component cv   and
a function v    initialized as yielding  for all inputs  as follows 
 for every x  v     let cv   contain the j  element  for which  x        note
 
that i consists of the  equivalence classes over elements from j   i e      is
 
one of the  equivalence classes from i   moreover  set v    x    v    x      
 for every r x  y   qv   with y   v   and  x        let cv   contain an additional element      y  for which h     i  rj  existence assured by definition
of collapsing via factorization  and all elements from some descending bcp in
prune j   starting from   existence assured since       is not a singleton class  
moreover set v    y    v    y         
 likewise  for every r x  y   qv   with x   v   and  y        let cv   contain an
additional element      x  for which h     i  rj  existence assured by definition of collapsing via factorization  and all elements from the shortest descending
bcp in prune j   starting from     existence assured since       is not a singleton
class   moreover set v    x    v    x         
we furthermore construct  for each query atom a that contains no variables from v   
its own anchored n component ca and function a  again initialized to always return
  as follows 
 if a   r x  y   let ca contain two nodes   and   for which     x  and
    y  and h      i  rj  existence assured by definition via factorization 
as well as some prune j   descending bcp starting from   and the shortest
prune j   descending bcp starting from    
 if a   a x   let ca contain a node  for which    x  and   aj  existence
assured by definition via factorization  as well as the shortest prune j   descending bcp starting from  
let c contain all cv   and ca defined so far  note that c already satisfies the conditions
q  q  of definition     we now have to add some more anchored n components in
order to satisfy condition q  as well  let c  be initially empty  for any x  v where
 x  is a non singleton equivalence class and any two c   c  c with     x  and
      x   we have that  since  and    are in the same  equivalence class  x  
there is a sequence             k of j  nodes with      and      k and every i and
i   start a descending bcp having the same path sketch  we enhance c  by one
anchored component per i which contains just i and the corresponding descending
   

finominals  inverses  counting  and conjunctive queries

 x   

r

r
a
s

 o 
e

a
s

bc
e

f

 x   

g

 x   

r

a
s

bd
e

 x    f

r

r
a
s

bc
e

bd
e

g

 x   

r
a
s

bc
e
g

f





no e
r

c 

a
   x   
r
s
a
   x   

c 

bc
e

r
a

s
bd
   x      x   
e

f

g

bc
e

bd
f
   x   
e

f

r
s
bc
   x   
e

a

no e
  
 

r
s

a

bd
e

r
a

s

bc
e

g

bc
e

g

bc
e

bd
e

f

bd
e

f

bd
e

f

r
  

 

s

g

g
  

no e
  
 

g
  

 

 

no e
  
 

  

 

figure    correspondence between entailment and quentailment 
bcps  then  by construction  the elements of cc  constitute the necessary anchored
n components to justify that j quentails q and  thus  j quentails u 

as an example for the correspondence between  query  entailment and quentailment 
consider the conjunctive query
q    r x    x     s x    x     f  x    x     s x    x     
a match  for this query into our example model from figure   is displayed in the upper
part of figure    which witnesses i    q  in the lower part  the anchored components c 
and c  and according functions   and   establish  i    q 

   limits and forest transformations
before introducing the following constructions in detail  we will try to provide some highlevel explanation to convey the intuition behind the subsequent steps  as mentioned before 
one of the major obstacles for a decision procedure for conjunctive query entailment is that
   

firudolph   glimm

for dls including inverses  nominals  and cardinality restrictions  or alternatively functionality   there are potentially infinitely many so called new nominals  domain elements
which can be identified by being linked to a proper nominal via a bcp 
however  we will show that for every model of a knowledge base that does not satisfy a
conjunctive query  i e   for every countermodel   there is a nice countermodel with only
finitely many new nominals  in the subsequent section  we will then argue that this ensures
the existence of a procedure that terminates when the query is not entailed by the knowledge
base in question   we provide a construction which transforms an arbitrary countermodel
into a nice one by first unraveling it into a quasi forest model  then substituting new
nominals by uncritical elements and finally collapsing the result back into a proper model 
for doing this  we have to find appropriate substitutes for most of the new nominals  those
substitutes have to fit in their environment without themselves introducing new nominals 
due to the global cardinality constraints that bcps impose on their elements  the existence of infinitely many new nominals implies that their witnessing bcps must get
longer and longer  such that by just looking at some finite distance neighborhood  most
of those new nominals just look like non nominal domain elements  this state of affairs
can be exploited by essentially constructing new domain elements as environment limits 
in a way  those new domain elements are characterized by the property that they can be
approximated with arbitrary precision by already present domain elements  possibly without themselves being present in the domain   we will see in the following that those new
domain elements can serve as the substitutes we are looking for 
definition     limits of a model   let i    i   i   with   i be some model of an
alcoifb knowledge base k  a tree interpretation j is said to be generated by   written 
j c    if it is isomorphic to the restriction of  i    to elements of     cw       cw  
 i     c   h  for some h  in 
the set of limits of i  written lim i  is the set of all tree interpretations j such that
for every k  in  there are infinitely many   i such that cutk  l  
  cutk  j   for some
l c  
 
figure    displays one limit element of our example model 
the following lemma gives some useful properties of limits  besides some rather obvious compatibility considerations with respect to knowledge base satisfaction  claim   of
lemma    provides us with the as pleasant as useful insight that the root node of a limit
can never be part of a bcp at all 
lemma     let k be an alcoifb knowledge base  k    nomfree k   i a purified model
of k  and n some fixed natural number  then the following hold 

   let l  be a tree interpretation such that there are infinitely many   i with l   
cutn  l  for some lc  then  there is at least one limit j  lim i such that cutn  j   
 
l   
   every j  lim i is locally k   consistent apart from its root      
   as an analogy  consider the fact that any real number can be approximated by a sequence of rational
numbers  even if it is itself irrational 

   

finominals  inverses  counting  and conjunctive queries

a
a

s

bc
e

s

bd
e

f

bd
e

s

bc
e

g

bc
e

g

bc
e

s

bd
e

f

bd
e

f

bd
e

f

bd
e

bc
e

g

bc
e

g

bc
e

g

bc
e

g

a
a
a
 

r
  

r

r

r

s

r

f

  

f
 

  

f
 

  

f
 

  

bc
e
f

 

  

 

figure     one limit for the model from fig   
   for every j  lim i it holds that its root      has no bcp to any    w   j  
   if j  lim i contains a node  starting two backwards counting paths with path sketches
s  and s    then for any element   in any unraveling holds  if the direct neighborhood
of   is isomorphic to that of  and   starts a descending bcp with path sketch s 
then it also starts a descending bcp with path sketch s   
   every j  lim i is collapsing admissible 
proof 
   let b be the branching degree of i  let dn be the  by assumption infinite  set
of all   i such that l  
  cutn  l  for some l c   and let jn contain all those l 
starting with k   n  we now iteratively increase k and construct sets jk and dk and
tree interpretations lk   on our way  we inductively prove some properties 
by induction hypothesis we know that dk is infinite and there is some lk with lk 
 
cutk  m  for all m  jk   by lemma     there are only finitely many non isomorphic
tree interpretations of depth k     with branching degree b  and we can partition
jk into finitely many sets jk             jk m such that every two m  m  from any jk i
satisfy cutk    m  
  cutk    m     likewise  we can define classes dk             dk m with
dk   dk           dk m such that   dk i if there is an l c  with l  jk i   now 
as dk is infinite  one of the dk i must be infinite as well and we can set dk     dk i
and jk     jk i   hence  we know that dk   is infinite and there is some lk   with
lk   
  cutk    m  for all m  jk    
thus  we have established an infinite sequence ln   ln           with li 
  cuti  lj   for all
j   i  without loss of generality  we can assume that isomorphic nodes are named
identically  i e   we even have li   cuti  lj   for all j   i  now we can define j as the
 non disjoint  union of all li   this way we have established the structure j for which
cutk  j     lk and we know that for every k there are infinitely many   namely all
elements from dk   such that cutk  l  
  lk for some l c   hence this j is the limit
element with the desired properties 
   let    w  with w     be a node in j   now choose a   i such that cut w     l  
 
cut w     j   for some l c   by definition  there are even infinitely many such s to
   

firudolph   glimm

choose from   then l contains a node   whose direct neighborhood is isomorphic to
that of    w   however  as l is contained in  i    and i    k by assumption  it is
locally k   consistent and hence   is  therefore    w  is locally k   consistent in j  
   assume the contrary  i e   that some j  lim i has a bcp from the root      to some
   w   j with    w   noj for some o  nom k   since we have only functionality
and by definition of bcps  a bcp uniquely identifies one domain individual  by
definition of lim i  however  there are infinitely many   i satisfying cut w   l  
 
cut w   j   for some j c  and we have an infinite number of individuals with the same
counting path to oi   this is a contradiction 
   choose k to be the maximum length of the two bcps  by definition of the limit 
i contains an element  such that cut w  k  l  
  cut w  k  j   for some l c   now 
let     l be the element that  with respect to this isomorphism  corresponds to
  j   then     is the origin of two descending bcps with path sketches s  and
s    let tail             since path sketches of descending bcps uniquely identify one
domain individual  every node   in any unraveling that starts a descending bcp
with path sketch s  must have been caused by    as well  furthermore  as their
direct neighborhoods are isomorphic and by the specific design of the choose function
from definition    which renders all successors non isomorphic   all successors of  
uniquely correspond to neighbors of    and in turn to successors of     
this in turn implies that  for every successor of     one finds a successor of    with
isomorphic direct neighbourhood  yet  this synchronicity argument can be inductively
applied and thereby iterated down the bcp  thus  we obtain that   also starts a
descending bcp with path sketch s   
   we define the function ch    cl k   j    j essentially like in the proof of
lemma     namely by referring to the function choose  for a given element   j
that starts a bcp of length   in j   choose a     i such that cut      l  
  cut      j  
for some l c      as l is contained in  i        we can now proceed and define ch c   
as demonstrated in the proof of lemma    

having defined limit elements as convenient building blocks for restructuring forest
quasi interpretations  the following definition provides the first hints on where inside such
a structure one existing node  and all its successors  can safely be exchanged by a limit
element 
definition     n secure replacement   let k be an alcoifb knowledge base  i a model
for k  j some forest quasi model for k with   j   a strict tree quasi interpretation
j    lim i is called an n secure replacement for  if
 cutn   j      is isomorphic to cutn  j     
 for every anchored n component of j   with witness      there is an isomorphic anchored
n component of j with witness  
   

finominals  inverses  counting  and conjunctive queries

no e
a
a

a
a
a

 
  

bc
e

bd
e

f

bd
e


 

s

bc
e

g

bc
e

g

bc
e

s

bd
e

f

bd
e

f

bd
e

f

bd
e

bc
e

g

bc
e

g

bc
e

g

bc
e

g

r
 

s

r

r

s

r

s

f

  

f
 

  

f
 

  

f
 

a
a

s

r

  

bc
e
f

 

  

s

bd
e
g

s

r

bc
e

bd
e

f

s

bc
e

g

bc
e

s

bd
e

f

bd
e

f

bc
e

g

bc
e

g

bc
e

r

r

r

f
  

a

r

s

a

 

a

  

a
r



r

 

bd
e
g

f
  

 

bd
e
g

f
  

no e
  
 
no e
  
 
no e
  
 

 

 

figure     forest quasi model  right  and according   secure replacement for   left  
if a   j has an n secure replacement in lim i  we call  n replaceable w r t  i  otherwise
we call  n irreplaceable w r t  i 
 
figure    displays a   secure replacement in the considered unraveling of our example
model 
after having defined which elements of a forest quasi model are eligible for being replaced
by a limit element  we have to make sure that not too many elements  actually defined in
terms of the original model  are exempt from being replaced 
lemma     every purified model i of an alcoifb knowledge base k contains only
finitely many distinct elements that start a bcp and are the cause for n irreplaceable nodes
in the unraveling of i 

proof  assume the converse  let a purified model i of k contain an infinite set d of elements
giving rise to n irreplaceable nodes in  i   then there must be an l  such that there is an
infinite set d   d such that every d   d  generates an l for which cutn  l  
  l  since by
lemma     there are only finitely many non isomorphic choices for l     this set d  can be
used to guide the construction of a specific limit element j  lim i according to lemma
      now  for an element    w  from j starting a bcp  let l  w   in be the length of
the shortest such bcp starting from    w   then  let k be the maximum over all l  w  of
individuals    w  from j that start a bcp and for which  w   n  by construction  d 
contains one element d   generating an l with cutk  l  
  cutk  j    actually infinitely many  
by the choice of k and lemma       we can conclude that j is an n secure replacement for
the irreplaceable  i  node caused by d   which contradicts the fact that d    d 
now we know  which elements of a forest quasi model can be replaced by a suitable limit
element  the following definition exactly tells us  how such a replacement is carried out 
the respective element and all its successors are deleted and the limit element  together
with its successors  is inserted at the same position 
   

firudolph   glimm

no e
a
a

bc
e

bd
e

f

s

bc
e

g

bc
e

bd
e

f

bd
e

f

s

bc
e

g

bc
e

g

bc
e

s

bd
e

f

bd
e

f

bd
e

f

bd
e

bc
e

g

bc
e

g

bc
e

g

bc
e

g

a
a
a

  

 

r

f

  

r
s

r

r
s

r

r

s

r
s

a

a

r

f

  

 

f
 

  

f
 

no e
  
 
no e
  
 

  

bc
e
f

 

  

 

figure     result of replacing the element  by the   secure replacement depicted in figure     the inserted component is highlighted 

definition     replacement step   let k be an alcoifb knowledge base  i a model
of k  and j a forest quasi model of k  i e   j    k    nomfree k   let    w   j be
n replaceable w r t  i and j   an according n replacement for    w  from lim i with root
     
we define the result of replacing    w  by j   as the interpretation r where
 

j
  
  
j
j
 
 
 r   j
red      ww        w       with red           ww      w        
 

 
 
j
 for each a  con k     ar    aj  j
red        ww        w    a  
j
 
  
 
  
 for each r  rol k     rr    rj j
red red   h   ww       ww  i   h   w       w  i 
 
rj  
 

figure    displays the result of carrying out this replacement step on our example 
the following lemma assures that during a replacement as described above  no new
anchored n components are introduced  instead all anchored n components present after an
n secure transformation were present before or completely contained in the inserted limit
element 
lemma     let k be an alcoifb knowledge base  i a model for k  j a forest quasimodel for k  i e   j    k    nomfree k   and let    w   j be n replaceable w r t  i  let
j   be an n replacement for    w  with root      and r be the result of replacing    w  by
j     then the following hold 
   cutn   j      w    is isomorphic to cutn   r     w    
   

finominals  inverses  counting  and conjunctive queries

   if n     then r is locally k   consistent 
   whenever r contains an anchored n component c  then one of j or j   contains an
anchored n component isomorphic to c 
proof 

   this is a direct consequence from definitions    and    

   we make a case distinction when element wise investigating local consistency of r
 note that k and k  are simplified and that local consistency of a node    v   r
depends only on this node and its direct neighbors  
 v   ww  for some w       then the direct neighborhood of    v  in r is isomorphic to the direct neighborhood of    w    in j    recall that      is the root of
j      by lemma       j   is locally k   consistent except possibly for       hence
also    v  is locally k   consistent in r 
 v    ww  for any w    i e      v  was not affected by the replacement  then the
direct neighborhood of    v  has not changed by the replacement and  therefore 
the neighborhoods of    v  in j and r coincide  as j is locally k   consistent
by assumption  so is    v  in r 
 v   w  in that case  the direct neighborhood of    v  has changed but remained
isomorphic  this follows from the preceding statement        
   let      w    be the witness of c  we distinguish three cases 
      and w is a prefix of w    then  clearly c is completely contained in j    
      and w  is a prefix of w  let c   be the structure obtained by restricting c
to all elements of the form    ww     and then renaming every element    ww    
to    w      where      is the root of j     then c   is an anchored n component
in j   with witness       now  by definition of replacing  j must contain an
isomorphic copy of c   with witness    w   since the other part of c  consisting
of those nodes      w    such that w is not a prefix of w    has not been altered by
the replacement  we can conclude that j must contain an isomorphic copy of c 
 neither of the above  then       w    and the subtree rooted in      w    is contained
in j as this part of j has not been affected by the replacement  then  clearly
also c is contained in j  

we are now ready for defining the whole process of restructuring a forest quasi model
essentially by substituting as many nodes as possible by appropriate limit elements 
definition     n secure transformation   let i be a model of some alcoifb knowledge
base k and j an unraveling for i  an interpretation j   is called an n secure transformation
of j if it is obtained by  possibly infinitely  repeating the following step 
choose one unvisited and w r t  tree depth minimal node    w  that is n replaceable
w r t  i  replace    w  with one of its n secure replacements from lim i and mark    w 
as visited 
 
   

firudolph   glimm

b
b
no e f c e g d e
a
a
a
a

bd
e

f

bd
e

s

bc
e

g

bc
e

g

bc
e

s

bd
e

f

bd
e

f

bd
e

f

bd
e

bc
e

g

bc
e

g

bc
e

g

bc
e

g

r

r

r
 

r

s

a

  

s

r

bc
e

r

s

s

r

s

a

a

r

f

  

f
 

  

f
 

  

f
 

  

bc
e
f

 

  

 

figure     result of collapsing the forest quasi model displayed in figure    
note that this is well defined as every node is visited at most once and no formerly
irreplaceable node ever becomes replaceable  hence for every k  in  the initial segment
cutk  j   of the current intermediate structure j is already isomorphic to the initial segment
cutk  j     of j   after a bounded number of replacement steps  due to the fact that all involved
structures have bounded branching degree 
by now  the whole effort might still look a bit contrived and pointless  however  the
following lemma establishes a bunch of properties that in the end allow us to deduce the
existence of a very well behaved countermodel whenever there is any at all 
we show that the process of unraveling  n secure transformation and collapsing preserves the property of being a model of a knowledge base and  with the right choice of n 
also preserves the property of not entailing a conjunctive query  moreover  this model conversion process ensures that the resulting model contains only finitely many new nominals
 witnessed by a bound on the length of bcps   figure    illustrates these properties for our
example model  note that only two new nominals are left whereas collapsing the original
unraveling yields infinitely many 
lemma     let i be a purified model of some alcoifb knowledge base k  j an unraveling of i  and j   an n secure transformation of j   then the following hold 
   j   is a strict forest quasi model for k 
   j   is collapsing admissible 
   collapse j     is a model of k 
   there is a natural number m such that j   does not contain any node whose shortest
descending bcp has a length greater than m 
   

finominals  inverses  counting  and conjunctive queries

   if j   contains an anchored n component c  then j contains an anchored n component
isomorphic to c 
   if  for some union of conjunctive queries u   q          qh   we have j    u and n  
maxq q       qh     q   then j      u 
   if  for some union of conjunctive queries u   q          qh   we have i     u and
n   maxq q       qh     q   then collapse j         u 
proof 
   let k    nomfree k   due to lemma     j is a strict forest quasi model
for k  by lemma       each replacement step preserves local k   consistency and results  thus  in a forest quasi model for k  since each n replacement is a strict tree
quasi interpretation also strictness is preserved  by induction it follows that every interpretation produced in the n secure transformation procedure is a strict forest quasimodel for k  for every node in j     its direct predecessor and direct successors have
not changed any more after finitely many replacement steps and local k   consistency
depends solely on those neighbors  hence j   is also locally k   consistent 
   by lemma     j is collapsing admissible  by lemma      every limit of i is  moreover  as is obvious from the proofs of both propositions  it is possible to define the
respective ch functions recurring to the original choose function on i  hence every
two elements from  even different  unravelings or limits that start descending bcps
with identical path sketches correspond to the very same element in i whence the
separate ch functions are compatible with each other  therefore  replacing an element in the unraveling yields a strict forest quasi model that is collapsing admissible 
applying the same argument inductively yields that every intermediate strict forest
quasi model during the n secure transformation is collapsing admissible  finally  as
the according ch function stabilizes after finitely many replacement steps  together
with the neighborhood of the considered elements   also j   is collapsing admissible 
   this follows from the two previous facts       and       together with lemma    
   consider the set d of all   i causing n irreplaceable nodes in j   by lemma    
d is finite  we obtain d  by removing all  from d that do not start any descending
bcps 
for   d    let dbcp   denote the set of descending bcps starting in  and choose

m    max 
d

min


 p 

pdbcp  

now assume there were a     i having a shortest descending bcp of length greater
than m  obviously  as      d    there must be a    w  generated by    that is nreplaceable  however  during the n secure transformation all n replaceable elements
have been replaced by elements that do not start any descending bcps at all due to
lemma      
   

firudolph   glimm

   we prove this by induction on the replacement steps of the n secure transformation
process by showing that this is true for every intermediate replacement result r   
the claim for j   then follows from the fact that  for every considered c  which is
always finite   only a finite part cut   j     is relevant and that for every    there is a
bounded number of replacement steps after which we have cut   r      cut   j     for
every further intermediate r   
as base case  zero replacement steps carried out   we find that for r    j   the claim
is trivially true 
now assume that the claim has been established for r and has to be shown for r 
that is created by replacing    w  in r with some j      by lemma       we then know
that one of the following is the case 
 r contains c  yet  we can apply the induction hypothesis and conclude that also
j contains c as claimed 
 j    contains c  but  since c is finite  it is already contained in cutk  j      for some
k  in and  as j    is a limit element  we find one   i with cutk   i      
cutk  j       since i is purified  we find a    w   j that corresponds to   i e  
j contains an isomorphic copy of  i    which in turn contains an isomorphic
copy of c 
   this is actually a straightforward consequence from the preceding proposition and the
definition of quentailment 
for the indirect proof  we suppose j    u and n   maxq q       qh     q  and j     u  the
latter witnessed by j     q for a q   q            qh    by definition  the latter assures the
existence of adequate anchored n components in j     then  applying the preceding
proposition         we obtain that isomorphic copies of all those anchored n components are contained in j which  by definition  just means j   q and  therefore  j   u 
hence  we have a contradiction  which proves the claim 
   we prove this indirectly  so assume i     u  n   maxq q       qh     q   and collapse j       
u  witnessed by collapse j        q for a q   q            qh   
then  from lemma       it follows that j     q  by the previous proposition        
we conclude j   q  which in turn implies i    q by lemma       this implies i    u 
a contradiction 

now we are able to establish our first milestone on the way to showing finite representability of countermodels 
theorem     for every alcoifb knowledge base k with k     u  there is a forest model
i of k with finitely many roots such that i     u  moreover  i has bounded branching degree 

   

finominals  inverses  counting  and conjunctive queries

proof  let u   q          qh   since an inconsistent knowledge base entails every query  we
can assume that k is consistent and  since k     u  there is a model i of k with i     u 
choose an n   maxq q       qh     q  and let j   be obtained by carrying out an n secure
transformation on  i  and let i     collapse j      we know that i   is a model of k  via
lemma       and that i       u  by lemma       
by lemma       we know that there is a fixed natural number m such that the shortest
descending bcp started by any node in j   is shorter than m  note that there are only
finitely many path sketches of length  m  this means that every node in j   that starts
a descending bcp at all can be assigned to one such path sketch  however  this entails
that there are only finitely many elements  i e    equivalence classes  in i   that contain
j    elements starting descending bcps in j     this implies  via lemma     that i   contains
only finitely many roots 
the fact that i   has bounded branching degree is a direct consequence from the fact
that the initial unraveling has bounded branching degree  that replacement do not change
the branching degree nor do collapsings as assured by lemma    

   finite representations of models
in this section  we show how we can construct a finite representation of a forest model
of a knowledge base that has only a finite number of roots  we then show that these
finite representations can be used to check query entailment  in order to do this  we use a
technique that is very similar to the blocking techniques used in tableau algorithms  see  e g  
horrocks   sattler         a tableau algorithm builds a so called completion graph that is
a finite representation of a model  a completion graph has essentially the same structure
as our forest quasi models  it contains root nodes for the nominals occurring in the input
knowledge base plus further root nodes for new nominals that start bcps  each  new and
old  nominal is the root of a tree  and relations only occur between direct neighbors within a
tree  between elements within a tree and a root  or between the roots  an initial completion
graph contains only nodes for the nominals occurring in the input knowledge base  concepts
are expanded according to a set of expansion rules  and new nodes are added to the graph
when expanding existential restrictions  new nominals are added by the so called nn rule
whenever an element from within a tree has a relationship with an inverse functional role
to a root node that represents a nominal from the input knowledge base  i e   when a bcp
is created  in order to obtain a finite representation  tableau algorithms usually employ
some cycle detection mechanism  called blocking  otherwise the depth of the trees and
the number of new nominals might grow infinitely  for logics as expressive as alcoifb 
blocking usually requires two pairs of elements  in our notation  a  non root  node n with
predecessor n  blocks a node m with predecessor m    if hn    ni 
  hm    mi  in order to
obtain a real model from the finite representation  the part between n and m is copied
and appended infinitely often  we use a similar technique to obtain a finite representation
for a forest model  since we want to preserve non entailment  working with just pairs of
elements is not sufficient  instead  we take the length n of the query into account and use
isomorphic trees of depth n to define blocking  this technique has first been employed for
deciding query entailment in alcn with role conjunctions  levy   rousset        and
has recently been extended to the logics alchiq  alchoq  and alchoi  ortiz       
   

firudolph   glimm

ortiz et al       a  and extends  as our result  to the dls shiq  shoq  and shoi  i e  
with transitivity  as long as the query contains only simple roles 
as for forest quasi interpretations  we use isomorphisms between forest interpretations
or parts of them 
definition     isomorphism between forest interpretations   let k be an alcoifb
 
 
knowledge base and i    i   i    i      i   i   two forest interpretations of k  without
loss of generality  we assume from now on that each root          i is in the extension
of a unique concept n that does not occur in con k   then i and i   are called isomorphic
 
w r t  k  written  i 
 k i     iff there is a bijection    i  i such that 
   is a successor of   iff      is a successor of      for all        i  
 

 h      i  ri iff h          i  ri for all        i and r  rol k  
 

   ai iff     ai for all   i and a  con k    n            i   
 

    oi iff      oi for all   i and o  nom k  
 
usually  we omit the subscript k from 
 k and assume that it is clear from the context 
definition     n blocking   let n  in be a fixed natural number and i    i   i   with
   w   i   w     a forest interpretation for some alcoifb knowledge base k  an
n blocking tree w r t     w   denoted blockni    w   is the interpretation obtained from i by
restricting i to elements in     ww       w     n                 i    an n blocking tree
blockni    w  n blocks an n blocking tree blockni    ww    if
   blockni    w  and blockni    ww    have disjoint domains except for root elements 
   there is a bijection  from elements in blockni    w  to elements in blockni    ww    that
witnesses blockni    w  
  blockni    ww     and
   for each descendant    wv  of    w   there is no inverse functional role f and root
      i such that h   wv       i  f i  
a node    v   i is n blocked  if    v  is either directly or indirectly n blocked      v  is
indirectly n blocked  if one of its ancestors is n blocked     v  is directly n blocked if none
of its ancestors is n blocked and    v  is a leaf of some n blocking tree blockni    ww    in i
that is n blocked  in this case we say that    v  is  directly  n blocked by     ww    for 
the bijection witnessing 
  
without loss of generality  we assume that the n blocking trees used above are minimal
w r t  the order of elements in i  cf  definition     
a forest interpretation i    i   i   for k is an n representation of k if
   i is finite 
   i contains no indirectly n blocked nodes 
   for each o  nom k   there is one element of the form       i such that oi  
    i  
   

finominals  inverses  counting  and conjunctive queries

   each element that is not directly n blocked is locally k consistent 
 
note that n     is more restrictive than standard pairwise blocking since two trees
of depth one need to be isomorphic before blocking occurs  whereas standard blocking
already occurs for two isomorphic pairs of nodes  for dls as expressive as alcoifb 
however  n has to be greater than    at least trees of depth    if we want to transform
n representations into models of the knowledge base  we now show that each knowledge
base has an n representation for some fixed n  in and  afterwards  that we can use an
n representation to build a model for the knowledge base 
lemma     let k be a consistent alcoifb knowledge base and u   q          qh a union
of conjunctive queries and n a fixed natural number greater than max ih  qi    if k     u 
then there is an n representation of k that does not satisfy u 
proof  by assumption  k is consistent and k     u  then  by theorem     there is a forest
model i of k with finitely many roots and branching degree bounded in  cl k    and for all
q   q            qh   holds i     q  we show that we can find an n representation r for i 
we use a similar argumentation as in lemma    to show that there are only finitely many
non isomorphic n blocking trees  we again denote this bound by tn   let c    cl k    r  
 rol k    and m the  finite  number of roots in i  each root   i is annotated with a
special concept n by assumption  for n      we again have  c choices  for n      each
element can have between   and c successors and between   and m relations with roots 
for roots we have  c m choices for the concepts  we use  cm as bound for the choice of
concepts for roots and this clearly bounds the choice for non roots as well  each non root
node in a level smaller than n is the root of a tree with depth n    and each node in the
sub tree can again have up to m relations to a root  assuming that we have only a single
cm   for the number of non isomorphic
role name r  rol k   we get a bound of o  c cmtn 
sub trees of depth n with relations to the at most m roots  since we have not only one
cm  r    we now abbreviate  c  cm r
but a choice of r roles  we get a bound of o  c  cmtn 
with x and cmr with a and rewrite the obtained bound as tn   o x tn   a    unfolding
n
n 
n
n
n
yields tn   o  x  a     a   t   a   which is bounded by o  xa    c  a     o  x c  a   
n
by expanding the abbreviated symbols  we obtain a bound for tn of o   c  cm r   cmr    
together with the fact that i is obtained from a collapsing and relations from elements
within a tree to a root in collapsings are never for inverse functional roles  this shows
that there is an n representation of i because for each tree rooted in a node       i
with depth greater than tn   there are two nodes    w  and    ww    such that blockni    w 
n blocks blockni    ww     and we can simply discard indirectly n blocked nodes from i to
obtain the desired n representation 
since i     q and the n representation is a restriction of i  non entailment of q is clearly
preserved 
please note that we would not obtain such a bound if we had not fixed a bound on the
number of new nominals  roots  beforehand and that we cannot use the standard tableau
algorithms to obtain this result  the reason for this is that the number of new nominals
 roots  in the tableau algorithms depends on the length of the longest path before blocking
   

firudolph   glimm

occurs  for our n blocking trees  however  we also have to consider relations back to the
roots  which means that blocking occurs the later the more roots we have  on the other
hand  delaying blocking may lead to the introduction of more and more new roots  due to
this cyclic argument  termination cannot be guaranteed for the tableau algorithms unless
we have fixed a bound on the number of new nominals beforehand  this is also the reason
why the tableau algorithm for entailment of conjunctive queries with only simple roles in the
query of calvanese et al         is sound  complete  and terminating on shiq  shoq 
and shoi knowledge bases  but is not guaranteed to terminate on shoiq knowledge
bases  transitivity  i e   having a dl with s instead of alc does not have any impact on
this  
we now show  how we can obtain a model for a knowledge base k from some nrepresentation of k  we use a technique that is directly inspired from tableau algorithms
and resembles the process of building a tableau from a complete and clash free completion
graph  in particular the tableau algorithm by ortiz et al   ortiz        ortiz et al       a 
is very similar as it also uses tree blocking 
definition     models for n representations   let r    r   r   be an n representation
 
 
of some alcoifb knowledge base k  let s                m
be a sequence of pairs of elements
m
r
 
from    with  s  we denote the length m of s  for such a sequence s  we set last  s    m
 

 

 

 

m  
and last  s    m   by s   m  
we denote the sequence              m
  m    
m m  
the set of r induced elements  denoted elem r   is inductively defined as follows 

 if          r   then




 elem r  

 if s  elem r         w   r    is not n blocked  and  is a successor of last  s  
then s     elem r  
 if s  elem r         w   r    is directly n blocked by some     r   and  is a
 
successor of last  s   then s     elem r  
we define the interpretation i    i   i   induced by r as follows 
 i   elem r  
 for each s  i and a  con k   s  ai iff last  s   ar  
 for each s  i and o  nom k   s   oi iff last  s    or  
 for each s  s   i and r  rol k   ri  
 hs  s  i   s    s  
 hs  s  i   s   s   
 hs  s  i   s   
 hs  s  i   s  

 

 


and hlast  s   last  s   i  rr  
and hlast  s   last  s   i  rr  



 and hlast  s   i

  
 and h  last  s  i

 rr  
 rr   
 

the interpretation of nominals is well defined since n representations are forest interpretations for k  hence  there is a unique root for each nominal  and pairs  with        
are never appended to sequences in elem r  
   

finominals  inverses  counting  and conjunctive queries

lemma     let k be a consistent alcoifb knowledge base  u   q          qh a union of
conjunctive queries  and n    a fixed natural number greater than max ih  qi    if r is
an n representation of k such that r     u  then there is a model i of k such that i     u 
the proof is essentially as the one by ortiz et al       a   but adapted to our case  where
we work completely on interpretations  our n representations correspond to completion
graphs and our models to tableaux in their case 
proof  let i be an interpretation induced by r  since n representations do not contain
relations from an element within a tree to a root for an inverse functional role by definition 
functionality restrictions are not violated in i  further  since k is simplified and r is a forest
interpretation for k such that all elements apart from  directly  n blocked ones are locally
k consistent  it is quite straightforward that each element in the induced interpretation is
locally k consistent  together with the restriction on nominals  property     this implies
that i is a model for k  this is essentially the same principle as the one used to prove that
tableaux constructed from completion graphs are proper representations of models of the
input knowledge base 
assume  to the contrary of what is to be shown  that i    u  then there is a disjunct
q   q            qh   and a match  for q such that i    q  we use  to construct a match  for
q in r by shifting the mapping for variables into parts that have no direct counterpart
in r upwards 
we define the match graph g for q in i as an undirected graph containing a node s for
each s  i such that  x    s for some x  var q  and containing an edge hs  s  i for each
s  s   i such that there is an atom r x  y   q   x    s  and  y    s    we call nodes of
g that correspond to roots in i root nodes of g  i e   nodes s such that s      and we
call all other nodes tree nodes  note that the restriction of g to tree nodes is a set of trees
that we refer to as g            gk and that each such tree has a depth smaller than n 
for each x  var q  such that  x        is a root node in g   we set  x    last      
note that  is a root node in r 
for each gi   g            gk    we distinguish two situations 
   gi contains a node s such that last  s     last  s   i e   gi contains a path from within
an n blocking tree to a copy of the path starting from the node that blocks   due
to the use of n blocking  a single tree gi can never cover more than one n blocking
tree and it can use at most nodes from two n blocking trees  leaving one and then
entering the next one in less than n steps   for each node s  in gi such that  s       s 
and x  var q  such that  x    s    we set  x     last  s      for each s  in gi with
 s      s  and x  var q  such that  x    s    we set  x    last  s    
   gi contains no node s such that last  s     last  s   i e   gi contains a path that lies
completely within an n blocking tree or from a path outside of an n blocking tree into
an n blocking tree   for each node s in gi and x  var q  such that  x    s  we set
 x    last  s  
by definition of   i as an induced model of r  and n blocking  we immediately have
that  for each a x   q   x   ar   we show that  for each r x  y   q  h x    y i  rr  
which proves r    q  we distinguish three cases 
   

firudolph   glimm

    x     for some   r   then  x             r   we distinguish three cases
for  y  
 

 a   y      is also a root  then  y                 r and  since  is a match
for q in i and by definition of i as an induced interpretation of r  we have that
h x    y i   h     i  rr  
 

 b   y  is a successor of  x  in i  i e    y    s          then s is not n blocked
and  y              c   r for c  in  again  since  is a match for q
in i and by definition of i as an induced interpretation of r  we have that
h x    y i   h     i  rr  
 

 c   y  is neither a root   y       for any     r   nor a successor of  x  in i
 
  y          for any     r    then  y  belongs to some graph match component gi and  y    last   y   or  y      last   y     since the isomorphism
between n blocking trees also takes the relations to root nodes into account and
other parts have direct counterparts in r  we have that h x    y i  rr  
 

    x    s     for any   r   the cases when  y      for some     r is as
above  we assume  therefore  that  y    s  with  s         by definition of i  this
means that either s   s      or s    s    for some       r   we assume s    s      the
opposite case is analogous  by definition of the match graph g  there is a component
gi of g that contains both s and s    we distinguish two cases 
 a  the component gi contains a node s such that last  s     last  s   the most
interesting case is when last   y      last   y    i e   s   s    then  x   
  last  s   and  y    last  s     since last  s       last  s     we have that last  s   
is the node that directly n blocks last  s    and  by definition of the bijection
  which witnesses the isomorphism  we have that  x      last  s   is the
predecessor of  y    last  s    and  by definition of i from r  that h x    y i 
rr  
 b  the component gi contains no node s such that last  s     last  s   then  x   
last   x   and  y    last   y    by definition of i from r  we immediately
have that h x    y i  rr  
in any case  we have that h x    y i  rr   which implies r    q contradicting the initial
assumption 
now lemma    guarantees that  in case k     q  there is always a finite n representation
r for k such that r     q and lemma    guarantees that r can be transformed into a
model i of k such that i     q  this suffices to show that we can enumerate all  finite 
n representations for k and check whether they entail a disjunct of the union of conjunctive
queries  together with the semi decidability result for fol  we get the following theorem 
theorem     let k be an alcoifb knowledge base and u   q          qh a union of
conjunctive queries  the question whether k    u is decidable 

   

finominals  inverses  counting  and conjunctive queries

   conclusions
we have solved the long standing open problem of deciding conjunctive query entailment in
the presence of nominals  inverse roles  and qualified number restrictions  we have shown
that the problem is decidable by providing a decision procedure and proving its correctness 
since the approach is purely a decision procedure  the computational complexity of the
problem remains open 
our result also shows decidability of entailment of unions of conjunctive queries in
shoiq and sroiq  underlying owl dl and owl    if we disallow non simple roles
as binary query predicates  we thereby have reached a first important milestone towards
tackling the problem of conjunctive queries for owl   dl and owl   dl 
entailment of unions of conjunctive queries is also closely related to the problem of
adding rules to a dl knowledge base  e g   in the form of datalog rules  augmenting a
dl kb with an arbitrary datalog program easily leads to undecidability  levy   rousset 
       in order to ensure decidability  the interaction between the datalog rules and the
dl knowledge base is usually restricted by imposing a safeness condition  the dl log
framework  rosati      a  provides the least restrictive integration proposed so far and
rosati presents an algorithm that decides the consistency of a dl log knowledge base
by reducing the problem to entailment of unions of conjunctive queries  notably  rosatis
results      a  thm      imply that the consistency of an alchoiqb knowledge base
extended with  weakly safe  datalog rules is decidable if and only if entailment of unions
of conjunctive queries in alchoiqb is decidable  which we have established 
corollary     the consistency of alchoiqb log knowledge bases  both under fol
semantics and under non monotonic semantics  is decidable 
another related reasoning problem is query containment  given a schema  or tbox  s
and two queries q and q     we have that q is contained in q   w r t  s iff every interpretation
i that satisfies s and q also satisfies q     it is well known that query containment w r t 
a tbox can be reduced to deciding entailment for unions of conjunctive queries w r t 
a knowledge base  calvanese et al       a   decidability of unions of conjunctive query
entailment in alchoiqb implies  therefore  also decidability of query containment w r t 
an alchoiqb tbox 
there are two obvious avenues for future work  we will embark on extending our
results in order to allow non simple roles as query predicates  this is a non trivial task
as our current approach heavily relies on a certain locality of query matches  which has
to be relinquished when considering non simple roles  on the other hand  we are eager to
determine the associated computational complexities and provide techniques that can form
the basis for implementable algorithms 

acknowledgments
during his stay in oxford where our collaboration started  sebastian rudolph was supported
by a scholarschip of the german academic exchange service  daad   continuative work on
the subject was enabled by funding through the expresst project of the german research
foundation  dfg  
   

firudolph   glimm

birte glimm was supported by epsrc in the project hermit  reasoning with large
ontologies 
we thank the three anonymous reviewers for their numerous helpful comments 
we thank ian pratt hartmann for  unknowingly  smashing our graphomata  maria magdalena ortiz de la fuente for establishing the competitive atmosphere  yevgeny kazakov
for breath taking discussions on black holes  boris motik for his motivating considerations
on the value of the academic life  and last not least god for providing us with extraordinary
weather and  most notably  infinity 

references
baader  f          terminological cycles in a description logic with existential restrictions 
in proceedings of the   th international joint conference on artificial intelligence
 ijcai        pp         
baader  f   brandt  s     lutz  c          pushing the el envelope  in proceedings of the
  th international joint conference on artificial intelligence  ijcai        morgan
kaufmann  los altos 
baader  f   calvanese  d   mcguinness  d  l   nardi  d     patel schneider  p  f         
the description logic handbook  cambridge university press 
bechhofer  s   van harmelen  f   hendler  j   horrocks  i   mcguinness  d  l   patelschneider  p  f     stein  l  a          owl web ontology language reference  tech 
rep   world wide web consortium  http   www w  org tr      rec owl ref           
calvanese  d   de giacomo  g   lembo  d   lenzerini  m     rosati  r          dl lite 
tractable description logics for ontologies  in veloso  m  m     kambhampati  s 
 eds    proceedings of the   th national conference on artificial intelligence  aaai
       pp          aaai press the mit press 
calvanese  d   de giacomo  g   lembo  d   lenzerini  m     rosati  r          tractable
reasoning and efficient query answering in description logics  the dl lite family 
journal of automated reasoning                 
calvanese  d   de giacomo  g     lenzerini  m       a   on the decidability of query
containment under constraints  in proceedings of the   th acm sigact sigmod
symposium on principles of database systems  pods        pp          acm press
and addison wesley 
calvanese  d   de giacomo  g   lenzerini  m   nardi  d     rosati  r       b   description
logic framework for information integration  in proceedings of the  th international
conference on the principles of knowledge representation and reasoning  kr       
calvanese  d   eiter  t     ortiz  m          answering regular path queries in expressive description logics  an automata theoretic approach  in proceedings of the   th
national conference on artificial intelligence  aaai       
calvanese  d   eiter  t     ortiz  m          regular path queries in expressive description
logics with nominals  in proceedings of the   st international joint conference on
artificial intelligence  ijcai        pp          aaai press the mit press 
   

finominals  inverses  counting  and conjunctive queries

chandra  a  k     merlin  p  m          optimal implementation of conjunctive queries
in relational data bases  in proceedings of the  th acm symposium on theory of
computing  stoc        pp        acm press and addison wesley 
eiter  t   lutz  c   ortiz  m     simkus  m          query answering in description logics
with transitive roles  in proceedings of the   st international joint conference on
artificial intelligence  ijcai        pp          aaai press the mit press 
glimm  b   horrocks  i   lutz  c     sattler  u       a   conjunctive query answering for
the description logic shiq  journal of artificial intelligence research             
glimm  b   horrocks  i     sattler  u       b   unions of conjunctive queries in shoq 
in proceedings of the   th international conference on the principles of knowledge
representation and reasoning  kr        aaai press the mit press 
glimm  b     rudolph  s          status qio  conjunctive query entailment is decidable 
in proceedings of the   th international conference on the principles of knowledge
representation and reasoning  kr        pp          aaai press the mit press 
godel  k          uber die vollstandigkeit des logikkalkuls  ph d  thesis  universitat wien 
golbreich  c   zhang  s     bodenreider  o          the foundational model of anatomy in
owl  experience and perspectives  journal of web semantics        
goodwin  j          experiences of using owl at the ordnance survey  in proceedings
of the  st owl experiences and directions workshop  owled        vol      of
ceur workshop proceedings  ceur  http   ceur ws org   
gradel  e          why are modal logics so robustly decidable   in paun  g   rozenberg 
g     salomaa  a   eds    current trends in theoretical computer science  entering
the   th century  vol     pp          world scientific 
grahne  g          problem of incomplete information in relational databases  lecture
notes in computer science  springer verlag 
horrocks  i     sattler  u          a tableaux decision procedure for shoiq  in proceedings
of the   th international joint conference on artificial intelligence  ijcai       
horrocks  i     sattler  u          a tableau decision procedure for shoiq  journal of
automated reasoning                 
horrocks  i   sattler  u     tobies  s          reasoning with individuals for the description
logic shiq  in mcallester  d   ed    proceedings of the   th conference on automated deduction  cade        no       in lecture notes in artificial intelligence 
pp          springer verlag 
jet propulsion laboratory  c  i  o  t          semantic web for earth and environmental
terminology  sweet    http   sweet jpl nasa gov  
kazakov  y          riq and sroiq are harder than shoiq  in proceedings of the
  th international conference on the principles of knowledge representation and
reasoning  kr        aaai press the mit press 
kazakov  y     motik  b          a resolution based decision procedure for shoiq 
journal of automated reasoning                 
   

firudolph   glimm

krotzsch  m   rudolph  s     hitzler  p          conjunctive queries for a tractable fragment
of owl      in proceedings of the  th international semantic web conference  iswc
       vol       of lecture notes in computer science  pp          springer verlag 
krotzsch  m   rudolph  s     hitzler  p          elp  tractable rules for owl    in
proceedings of the  th international semantic web conference  iswc        vol 
     of lecture notes in computer science  pp          springer verlag 
lacy  l   aviles  g   fraser  k   gerber  w   mulvehill  a     gaskill  r          experiences
using owl in military applications  in proceedings of the  st owl experiences and
directions workshop  owled        ceur  http   ceur ws org   
levy  a  y     rousset  m  c          carin  a representation language combining horn
rules and description logics  in proceedings of the   th european conference on artificial intelligence  ecai        pp         
levy  a  y     rousset  m  c          combining horn rules and description logics in
carin  artificial intelligence                   
lutz  c          the complexity of conjunctive query answering in expressive description
logics  in proceedings of the international joint conference on automated reasoning
 ijcar        pp          lecture notes in computer science 
mcguinness  d  l     wright  j  r          an industrial strength description logic based
configuration platform  ieee intelligent systems         
motik  b   shearer  r     horrocks  i          hypertableau reasoning for description logics  submitted to a journal  http   www hermit reasoner com publications 
msh  hypertableau journal pdf 
ortiz  m          extending carin to the description logics of the sh family  in proceedings of logics in artificial intelligence  european workshop  jelia        pp 
        lecture notes in artificial intelligence 
ortiz  m   calvanese  d     eiter  t       a   data complexity of query answering in
expressive description logics via tableaux  journal of automated reasoning         
     
ortiz  m   simkus  m     eiter  t       b   conjunctive query answering in sh using
knots  in proceedings of the      description logic workshop  dl        ceur
 http   ceur ws org   
pratt hartmann  i          data complexity of the two variable fragment with counting
quantifiers  forthcoming in information and computation  http   arxiv org abs      
     
rosati  r       a   dl log  tight integration of description logics and disjunctive datalog 
in proceedings of the   th international conference on the principles of knowledge
representation and reasoning  kr        pp       
rosati  r       b   on the decidability and finite controllability of query processing in
databases with incomplete information  in proceedings of the   th acm sigact
sigmod symposium on principles of database systems  pods        pp         
acm press and addison wesley 
   

finominals  inverses  counting  and conjunctive queries

rosati  r       a   the limits of querying ontologies  in proceedings of the   th international conference on database theory  icdt        vol       of lecture notes in
computer science  pp          springer verlag 
rosati  r       b   on conjunctive query answering in el  in proceedings of the     
description logic workshop  dl        ceur workshop proceedings 
rudolph  s   krotzsch  m     hitzler  p          terminological reasoning in shiq with
ordered binary decision diagrams  in proc    rd national conference on artificial
intelligence  aaai        pp          aaai press the mit press 
sidhu  a   dillon  t   chang  e     sidhu  b  s          protein ontology development using
owl  in proceedings of the  st owl experiences and directions workshop  owled
       vol      of ceur workshop proceedings  ceur  http   ceur ws org   
sirin  e   parsia  b   cuenca grau  b   kalyanpur  a     katz  y          pellet  a practical
owl dl reasoner  journal of web semantics        
tessaris  s          questions and answers  reasoning and querying in description logic 
phd thesis  university of manchester 
tsarkov  d     horrocks  i          fact   description logic reasoner  system description 
in proceedings of the international joint conference on automated reasoning  ijcar
       vol       of lecture notes in computer science  pp            springer verlag 
van der meyden  r          logical approaches to incomplete information  a survey  in
logics for databases and information systems  pp          kluwer academic publishers 
vardi  m  y          why is modal logic so robustly decidable   in descriptive complexity
and finite models  proceedings of a dimacs workshop  vol     of dimacs  series
in discrete mathematics and theoretical computer science  pp          american
mathematical society 
w c owl working group        
owl   web ontology language document
overview  tech  rep   world wide web consortium  http   www w  org tr      
rec owl  overview           
wolstencroft  k   brass  a   horrocks  i   lord  p   sattler  u   turi  d     stevens  r 
        a little semantic web goes a long way in biology  in proceedings of the
 th international semantic web conference  iswc       

   

fi