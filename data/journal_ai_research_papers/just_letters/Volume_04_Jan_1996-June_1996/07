journal artificial intelligence research                 

submitted       published     

planning contingencies  decision based approach
louise pryor

louisep aisb ed ac uk

gregg collins

collins ils nwu edu

department artificial intelligence  university edinburgh
   south bridge
edinburgh eh   hn  scotland
institute learning sciences  northwestern university
     maple avenue
evanston  il        usa

abstract

fundamental assumption made classical ai planners uncertainty
world  planner full knowledge conditions plan
executed outcome every action fully predictable  planners cannot
therefore construct contingency plans  i e   plans different actions performed
different circumstances  paper discuss issues arise representation
construction contingency plans describe cassandra  partial order contingency
planner  cassandra uses explicit decision steps enable agent executing plan
decide plan branch follow  decision steps plan result subgoals acquire
knowledge  planned way subgoals  cassandra thus
distinguishes process gathering information process making decisions 
explicit representation decisions cassandra allows coherent approach
problems contingent planning  provides solid base extensions use
different decision making procedures 

   introduction
many plans use everyday lives specify ways coping various problems
might arise execution  words  incorporate contingency plans  
contingencies involved plan often made explicit plan communicated
another agent  e g    try taking western avenue  it s blocked use ashland  
 crank lawnmower twice  still doesn t start jiggle spark plug   socalled classical planners   cannot construct plans sort  due primarily reliance
three perfect knowledge assumptions 
   planner full knowledge initial conditions plan
executed  e g   whether western avenue blocked 
   actions fully predictable outcomes  e g   cranking lawnmower definitely either work work 
   category includes systems strips  fikes   nilsson         hacker  sussman         noah
 sacerdoti        molgen  stefik      a      b   recent classical planners include tweak  chapman         snlp  mcallester   rosenblitt        ucpop  penberthy   weld         term
due wilkins        

c      ai access foundation morgan kaufmann publishers  rights reserved 

fipryor   collins
   change world occurs actions performed planner  e g   nobody
else use car empty gas tank 
assumptions world totally predictable   need contingency
plans 
perfect knowledge assumptions idealization planning context intended simplify planning process  allow development planning algorithms
provable properties completeness correctness  unfortunately 
domains realistic  mostly  world extent unpredictable  relying perfect knowledge assumptions unpredictable world may prove
cost effective planner s uncertainty domain small  cost recovering failure low  general  however  may lead planner forgo options
would available potential problems anticipated advance 
example  assumption weather sunny  forecast  may neglect
take along umbrella  forecast later turns erroneous  impossible
use umbrella stay dry  cost recovering failure high  failing
prepare possible problems advance expensive mistake  order avoid
mistakes sort  autonomous agent complex domain must able make
execute contingency plans 
recently  number researchers begun investigating possibility
relaxing perfect knowledge assumptions staying close framework
classical planning  etzioni  hanks  weld  draper  lesh    williamson        peot   smith 
      pryor   collins        draper  hanks    weld      a  goldman   boddy      a  
work embodied cassandra   contingency planner whose plans following
features 
include specific decision steps determine possible courses
action pursue 
information gathering steps distinct decision steps 
circumstances possible perform action distinguished
necessary perform it 

    issues contingency planner

contingency planner must able construct plans expected succeed
despite unknown initial conditions uncertain outcomes nondeterministic actions 
effective contingency planner must possess following capabilities 
must able anticipate outcomes nondeterministic actions 
must able recognize uncertain outcome threatens achievement
goal 
must able make contingency plans possible outcomes various
sources uncertainty affect given plan 
   cassandra trojan prophet fated believed accurately predicted future
disasters  earlier version cassandra described  pryor   collins        

   

fiplanning contingencies  decision based approach


must able schedule sensing actions detect occurrence particular
contingency 



must produce plans executed correctly regardless contingency
arises 

design cassandra addresses issues  however  several issues
addressed 


considered problem determining whether worth planning
particular outcome 



cassandra probabilistic planner  cannot make use information
likelihood otherwise events 



ignored possibility interleaving planning execution  but see section      



cassandra handle exogenous events 



version cassandra described cannot solve moore s bomb toilet
problem  mcdermott         find plans involve deciding
courses action succeed different contingencies  but see section        

cassandra assumes sources uncertainty possible outcomes known 
plans affect achievement goals  firmly classical
planning mold  job construct plans guaranteed achieve goals 
decide plan  plan for  moreover  although believe cassandra
sound complete  systematic  addition  current implementation
slow practical use 

    note terminology

word conditional used variety senses literature  avoid use
altogether  except describing work authors use specialized
senses  example  conditional actions conditioning peot smith        
use term contingency plan refer plan contains actions may may
actually executed  depending circumstances hold time  use
term context dependent refer action effects depend context
action performed 

    outline

paper present cassandra  describe algorithm detail  discuss
approach takes important issues contingency planning  show handles
variety example problems 
start describing structure cassandra s plans  section   describes
cassandra represents actions  including uncertain outcomes  explains system
   

fipryor   collins
labels allows determination alternative courses action
contingency plan pursued  introduces notion explicit decision steps 
section   brie describes basic planning algorithm absence uncertainty 
section   explains algorithm extended handle uncertain outcomes actions 
particular  structure cassandra s decisions considered  problems
ensuring soundness plan constructed  resulting algorithm described
detail properties discussed section   
section   consider issues arise contingency planning  section  
describes related work planning uncertainty  finally  section   summarizes
contributions work discusses limitations 

   cassandra s plan representation

cassandra s representation contingency plans three major components 
action representation supports uncertain outcomes 
plan schema 
system labels keeping track elements plan relevant
contingencies 
components described remainder section 

    action representation

cassandra s action representation modified form strips operator  fikes   nilsson         consists preconditions executing action effects may
become true result executing it  standard strips operator  syntax
used ucpop  penberthy   weld         ucpop  action effects
complex standard strips effects  may associated set secondary preconditions   govern occurrence effect  pednault              
secondary preconditions allow representation context dependent effects actions 
i e   effects depend upon context action executed  use secondary preconditions critical cassandra s ability represent uncertain effects 
hence nondeterministic actions  discuss section       
figure   shows simplified operator schema action making selection
soft drink machine  the effects describing  make another selection  indicator light
turned omitted   operator describes two possible effects carrying
action  effect acquiring soda  depends secondary precondition
soda selected type available  effect  make another selection 
indicator light come on  depends secondary precondition soda
selected type available  effects depend upon preconditions money
entered machine machine plugged in 
      representing uncertain effects

uncertain effect cassandra context dependent effect unknown precondition   i e   precondition planner neither knowingly perceive deliberately affect 
   

fiplanning contingencies  decision based approach

action 

 make selection  machine  selection 

preconditions 
effects 

  and  money entered  machine 
 plugged in  machine  
  when
 available  machine  selection 
 effect   and  dispensed  selection 
  not  money entered  machine    
  when
  not  available  machine  selection  
 effect  another selection indicator on  machine  

secondary precondition
secondary precondition

figure    simplified representation operating vending machine
example  malfunctioning soft drink machine may operate intermittently  planner aware intermittent functioning  unaware conditions govern
behavior  correct functioning device depends upon unknown precondition  point view planner  uncertain effect nondeterministic 
planner cannot tell advance whether occur  clearly  definition fundamentally subjective  another planner better information might able specify
precisely conditions device functions properly  example knew
internal mechanism machine worked  another example  consider
happens coin tossed  principle  given perfect knowledge forces
distances involved  would possible predict outcome  practice  knowledge
unavailable effect action uncertain  principle  would possible
specify conditions would lead coin landing tails up  practice 
conditions unknown 
interesting note circumstances might possible planner
learn predict outcomes hitherto regarded uncertain  example 
learned soda machine worked   unknown  refers current situation 
representation would facilitate learning  would simply involve learning new
secondary preconditions rather whole new action representation 
unknown preconditions play syntactic role normal preconditions within
operator schema  represented expressions formed using pseudo predicate
 unknown  effect secondary precondition type occur
certain contexts cannot distinguished planner contexts
occur 
figure   depicts simplified example operator uncertain effect it represents action operating soft drink machine intermittently fails dispense
soda despite operated correctly  operator two uncertain effects  one
soda dispensed  soda dispensed 
clearly  uncertainty respect effects stems single underlying source  namely uncertainty whether machine malfunction 
effect  two unknown preconditions operator represent alternative results
underlying source uncertainty  relationship ected two arguments
   

fipryor   collins

action 
preconditions 
effects 

 enter selection  machine 
  and  money entered  machine 
 plugged in  machine  
  when   and  available  machine  selection 
  unknown  ok t  
 effect  dispensed  selection  
  when   and  available  machine  selection 
  unknown  ok f  
 effect   not  dispensed  selection   
  when  available  machine  selection 
 effect   not  money entered  machine   
  when   not  available  machine  selection  
 effect  another selection indicator on  machine  

uncertain effect
uncertain effect

figure    operating faulty soft drink machine
 unknown pseudo predicate  first designates source uncertainty
associated  second designates particular outcome
uncertainty represents  possible contexts effectively partitioned set
equivalence classes  context class producing outcome
uncertainty  outcome used label equivalence class  condition
form   unknown  class outcome  true actual context class
designated outcome 
notice instantiation operator introduce new source uncertainty 
means first argument unknown precondition must represented
variable operator schema  cassandra binds variable unique identifier  i e  
skolem constant  operator instantiated 
cassandra s representation assumed different sources uncertainty
independent other  source uncertainty linked uncertain outcomes
one operator  single operator may introduce number sources
uncertainty  may number outcomes  source uncertainty
exhaustive set mutually exclusive outcomes  unique name 
      representing sources uncertainty

key element cassandra s design use single format represent sources
uncertainty affect planning  particular  uncertainty assumed manifest
uncertain effects planning operators  outlined above  uncertainty initial
conditions handled within format treating initial conditions though
effects phantom  start step  action  treatment initial conditions 
initially developed reasons unrelated problem representing uncertain
outcomes  common snlp family planners cassandra belongs 
cassandra s formulation ignores uncertainty might stem outside interference
execution agent s plans  except inasmuch represented
   

fiplanning contingencies  decision based approach
incomplete knowledge initial conditions  is  course  limitation classical
planners general  change world assumed caused directly actions
agent 

    basic plan representation

cassandra s plan representation extension used ucpop  penberthy   weld 
      snlp  mcallester   rosenblitt        barrett  soderland    weld        
turn derived representation used nonlin  tate         plan represented
schema following components 
set steps  
set anticipated effects steps 
set links relating effects steps produce consume  a step
consumes effect requires effect achieve one preconditions  
note links effect denote protection intervals   i e   intervals particular
conditions must remain true order plan work properly 
set variable bindings instantiating operator schema 
partial ordering steps 
set open conditions   i e   unestablished goals 
set unsafe links   i e   links conditions could falsified
effects plan 
plan complete contains open conditions unsafe links 

    representing contingencies

contingency plan intended achieve goal regardless foreseeable
contingencies associated actually arise execution  construct valid contingency plan  planner must able enumerate contingencies  set
foreseeable contingencies computed sources uncertainty associated plan  effect  contingency one possible set outcomes relevant
sources uncertainty 
      contingency labels

keeping track whether plan achieves goal every contingency somewhat
complex process  cassandra  cnlp  uses system labels accomplish necessary
bookkeeping  peot   smith         goal  step  effect cassandra s plan labeled
indicate contingencies element participates 
goals labeled indicate contingencies must achieved 
effects labeled indicate contingencies expected occur 
i e   contingencies goals satisfy arise 
   

fipryor   collins


steps labeled indicate contingencies must performed  i e  
union contingencies effects expected occur 

preconditions effect become new goals  labels correspond
labels effect give rise them 
general  assumed particular step could executed contingency 
albeit possibly purpose  however  sometimes necessary rule particular step
particular contingency means preventing interference plan
contingency  example  consider plan achieve goal coin heads
up  first action toss coin  see section       detailed discussion
plan   one contingency coin lands heads up  actions required 
another contingency  coin lands tails must turned order goal
achieved  clear  however  turning action must performed
first contingency  would mean goal coin heads
achieved  cassandra  ruling steps accomplished associating negative labels
plan steps indicate contingencies steps executed 
peot smith        call process conditioning  
addition  every step depends  directly indirectly  particular outcome
given source uncertainty ruled every contingency involves alternative
outcome source uncertainty  discuss reason restriction
detail below 
cassandra s labeling system thus provides clear guidance agent executing
plan  simply performs steps whose positive labels ect actual circumstances hold execution  steps neither positive negative labels involving
current contingency affect goals  guaranteed executable 
contrast  agent executing plan produced cnlp guided reason labels attached steps  cnlp s plans  action need executed least one goals
represented reason labels feasible  agent must therefore method
deciding top level goals feasible  assume done comparing
context labels top level goal  which labeled represented
dummy actions  circumstances actually hold  cassandra s method thus
simpler  agent simply uses positive labels plan steps instead using
labels attached step indicate goals whose context labels must analyzed 
general principles label propagation cassandra are 


positive labels  denote plan element concerned contributes goal
achievement contingency  propagate along causal links subgoals
plan elements establish them 



negative labels  denote plan element concerned would prevent goal
achievement contingency  propagate along causal links effects plan
elements establish 

details given section       
   

fiplanning contingencies  decision based approach

key
link

western
drive
western
belmont

western check
traffic
western

take western
evanston
know
traffic
status

condition

alternative
control flow

decide
take belmont
ashland

belmont

ashland

take ashland
evanston

figure    plan includes decision step
      representing decisions

planning seen process deciding advance done
 collins         need contingency plans arises necessary decisions cannot
made advance missing information  see section       decisions cannot
made advance  must made plan executed  agent executing
contingency plan must point decide possible courses action
pursue  words branch take 
previous work effect assumed agent execute steps
consistent contingency actually holds  warren        peot   smith        
however  determination steps consistent cannot  by definition  made
advance  order know contingency holds execution  agent executing
plan must general gather information decision based  ensure
viable plan  planner must able guarantee steps required gather
information con ict required carry rest plan  therefore 
planner must general able include information gathering steps  well
steps support decision making  plan constructing  cassandra achieves
representing decisions explicitly plan steps  preconditions decisionsteps include goals possession information relevant making decision 
scheduling actions obtain information thus handled normal planning process 
instance  consider contingency plan alluded above   try taking western avenue  it s blocked use ashland    execution plan  agent must
point decide branch plan execute  decision step case
would precondition knowing whether western avenue blocked not 
would cause planner schedule information gathering action check trac
status western  operation might turn precondition western  achieved traveling junction western belmont 
decision taken  agent either take western evanston continue along
belmont ashland 
assuming goal plan evanston  final plan might depicted
figure    note control ow decision represented heavy lines  solid lines
diagram represent links  action tail link achieving precondition
   

fipryor   collins
action head link  plan  agent take western evanston
one contingency  take belmont ashland ashland evanston
other  
notice order determine appropriate precondition given decision step 
planner must way determining exactly need know order
make decision execution time  somewhat complex determination depends
part decision making process carried out  cassandra  decisions
modeled evaluation set condition action rules form 
condition   contingency  
condition   contingency  
   
condition n contingency n
possible outcome given uncertainty gives rise decision rule  condition
decision rule specifies set effects agent test order determine
whether execute contingency plan outcome  example  decision rules
driving plan example would look this 
western avenue blocked
execute contingency using ashland
western avenue blocked execute contingency using western
cassandra s derivation inference rules decisions explained detail section   
preconditions decision step goals know truth values conditions
decision rules  thus knowledge goals  mccarthy   hayes        pryor       
 see section       goals treated way preconditions
step  cassandra thus requires special provisions allow construction
information gathering plans 
explicit representation decision steps provides basis supporting alternative
decision procedures  cassandra s basic model decision procedure quite
simple  complex decision procedures supported within framework  one
procedure described section         example  model could changed
differential diagnosis procedure  representation decision procedures templates
way actions represented templates would allow planner choose
alternative methods making decision way choose
alternative methods achieving subgoal  even better approach might formulate
explicit goal make correct decision  allow system construct plan
achieve goal using inferential operators  however  would effect require
goals operators stated meta language describing preconditions
results operators  yet addressed possibility detail 
cassandra s separation gathering information making decisions
allows one information gathering step serve several decisions  allows exible use
information gathering actions  effective difference actions
action may appear plan 
   appendix shows plans cassandra constructs examples described paper 
plan section a   

   

fiplanning contingencies  decision based approach
new step add plan new step effect establish open condition  add
step preconditions secondary preconditions effect open conditions  open condition
becomes completed link 
reuse step make open condition complete link effect existing plan step  add
secondary preconditions effect open conditions 

figure    resolving open conditions

   planning without contingencies
section brie review basic planning algorithm cassandra based 
follows closely used ucpop  penberthy   weld         turn based
snlp  mcallester   rosenblitt         principal difference ucpop snlp
use secondary preconditions  see collins   pryor        
cassandra attempt construct contingency plan encounters
uncertainty  point  constructs plan much manner
planners snlp family  fact  uncertainty ever introduced plan 
cassandra effectively function ucpop would circumstances 
planning proceeds alternation two processes  resolving open conditions
protecting unsafe links   processes involves choice methods  may
therefore give rise several alternative ways extend current plan  possible
extensions constructed  best first search algorithm guides planner s exploration
space partial plans 
initial plan consists two steps  start step  preconditions
initial conditions effects  goal step  goal conditions preconditions
effects  planner attempts modify initial plan complete  
i e   open conditions unsafe links 

    resolving open conditions
planning process driven need satisfy open conditions  initially
simply input goals  course planning satisfy open condition  new subgoals
may generated  added set open conditions  planner
establish open condition one two ways  introducing new step plan 
reusing existing step making use one effects  see figure     secondary
preconditions effect establishes condition become open conditions  new
step added  preconditions step become open conditions well  finally 
time open condition established  link added plan protect newly
established condition 
one way establishing condition simply notice condition true
initial state  initial conditions treated results start operator 
always part plan  method treated establishment reusing
existing step  indeed  simplification motivation representing initial
conditions way 
   

fipryor   collins
link establishing condition cond unsafe effect eff plan  other effect
sourceeff establishes cond  possible  effect goaleff either established disabled
link  following properties 
unification one postconditions eff possibly unify either cond negation 
ordering step produces eff can  according partial order  occur step
produces goaleff step produces sourceeff 
unsafe link may resolved one three ways 
ordering modify ordering steps plan ensure step producing eff occurs either
step produces sourceeff step produces goaleff 
separation modify variable bindings plan ensure threatening effect eff cannot fact
unify threatened condition cond 
preservation introduce new open condition plan disable eff  new open condition
negation one eff s secondary preconditions 

figure    unsafe links

    protecting unsafe links
whenever open condition established  links plan may jeopardized either
new step threatens existing link  new link threatened
existing step  situations link unsafe shown figure    general 
link considered unsafe effect plan could possibly interfere
condition established link 
three general methods protecting threatened link  see figure     first 
ordering used constrain threatening action occur either beginning
end threatened link  second  threatening effect threatened
link separated imposing constraints variables involved effect
cannot unified established condition  third  link preserved
generating new subgoal disable effect threatens link 

   contingency planning
cassandra proceeds described previous section either plan completed
uncertainty introduced  section describes uncertainties introduced
handled 
example plan involving uncertainty  let us consider version moore s
classic  bomb toilet  problem  mcdermott         goal bomb
disarmed   initial conditions bomb package  bomb package   
uncertainty case lies initial conditions  depending outcome
uncertainty  start operator either effect bomb package 
effect bomb package   

    contingencies
uncertainty introduced plan open condition plan achieved
uncertain effect  i e   effect unknown precondition  bomb in the toilet
   

fiplanning contingencies  decision based approach

key
move
package 
pa
cka
toi ge
let

start

link

condition

link
uncertain
effect

condition

dunk
package 

bomb
package 

bomb
disarmed

end

figure    introduction uncertainty plan
example  instance  cassandra may achieve condition bomb disarmed selecting
dunk operator  preconditions package toilet   bomb
package   condition bomb package established identifying
bomb package    effect start operator  however 
condition uncertain  determined noting unknown precondition 
cassandra attempt deal uncertainty introducing new contingency  or
new contingencies  plan  state plan introduction
uncertainty illustrated figure   
      introducing contingencies

cassandra notices uncertainty current plan becomes dependent upon particular outcome uncertainty use uncertain effect  i e   effect
unknown precondition specifies outcome uncertainty  plan
cassandra built point effect plan branch outcome 
since branches must constructed possible outcomes uncertainty 
cassandra makes copy overall goal possible outcome uncertainty 
copy carrying label indicating outcome uncertainty must
achieved  thus effectively splits plan set branches  one possible
outcome uncertainty  
planning otherwise identical goals  cassandra must make certain
element branch goal one outcome relies different outcome
uncertainty  words  goal  subgoals  may achieved effect
depends  directly indirectly  outcome uncertainty one
goal s label  described above  cassandra achieves using system negative
labels indicating contingencies particular plan elements must excluded 
   alternative method would split plan two branches  regardless number outcomes 
case  one branch would associated given outcome uncertainty 
would associated possible outcomes uncertainty  effectively sensp
operates  etzioni et al         

   

fipryor   collins

move
package 


bomb  
package

start

key

pa
ckag
toil e 
et

bomb
packagin
e 
 
age
ack ilet
p
move

package 

ii
dunk
package 

bomb
disarm
e

link

condition

link
uncertain
effect

condition



end
dunk
package 

bomb ed
disarm

iii
iv

element label classes


package  contingency

ii

package  contingency
package  contingency

iii

package  contingency
package  contingency

iv

package  contingency

figure    contingency plan disarm bomb
bomb in the toilet example  plan made dependent upon uncertain
outcome bomb package    new copy top level goal bomb disarmed added
set open conditions  new copy given label indicating belongs
contingency bomb package     existing top level goal
subgoals labeled indicate belong contingency bomb
package    effect bomb package    action dunk package    effects
action dunk package  labeled indicate cannot play role
contingency bomb package   
notice action move package    although plays role plan contingency bomb package    fact depend upon bomb
package    could principle made part plan disarming bomb
contingency bomb package    prove useful anything 
indicated fact negative label package  contingency 
cassandra attempts achieve new open condition bomb disarmed   may
choose dunk operator  notice prohibited using effects
existing dunk operator   new instance dunk operator turn gives rise
subgoal bomb package dunked  achieved
identification effect bomb package    plan thus constructed depicted
figure    the decision step omitted clarity  listed section a   
      uncertainties multiple outcomes

although algorithm described deal uncertainties number
possible outcomes  far discussed examples two possible outcomes 
fact  two outcome uncertainties suce describe majority problems
   note describing contingency way clarity exposition  actual label
constructed described section       

   

fiplanning contingencies  decision based approach

package location 
pickup
package

drive  car
location 
start


ot
rob tion 
loca

key



link
link
uncertain
effect

decide

condition

condition

alternative
control flow

b

incomplete
portion
plan

figure    partial plan pick package
considered  indeed  technically  situation could described terms number
two outcome uncertainties  however  hard think situations might
naturally represented terms source uncertainty two outcomes 
example  suppose planner interested getting hold particular object
situation object known one three places  case 
start pseudo operator would naturally represented three uncertain effects
 one possible location object  associated alternative outcomes
single source uncertainty  cassandra s plan acquiring object would involve
three contingencies  one possible location 
      multiple sources uncertainty

plan may involve two sources uncertainty  case plan
one set branches  example  suppose cassandra given goal picking
package one two locations  one two cars available
use  uncertainty regarding location package encountered first
construction plan  cassandra respond building plan involving
two contingencies  one location  call contingencies b  see figure  
section a    
point construction plan contingency a  cassandra
encounter uncertainty concerning car available make current
plan dependent upon one particular outcome uncertainty  since new source
uncertainty arises context planning contingency a  contingency effect
bifurcated two contingencies  a    package location   car  
   

fipryor   collins

package location 
car  available

drive car 
location 

robot
location 

package location 

start

car  available

drive car 
location 

 
decide


robot n 
io

loca

 

link
uncertain
effect

decide

pickup
package

key
link



pickup
package

condition

condition

alternative
control flow

b

incomplete
portion
plan

figure    plan two sources uncertainty
available  a    package location   car   available   cassandra
must replace existing contingency labels contingency a  labels  must
introduce new copy top level goal labeled contingency a   
note cassandra must plan scratch achieve top level goal contingency
a    spite fact already viable plan goal contingency a   
necessary situations may encountered successful plans
involve using different methods achieve goal two contingencies  example 
extreme differences two cars might necessitate different plans driving
 e g   detailed representation situation presented here 
differences might affect routes cars could driven places
could parked   cassandra must therefore consider possible ways achieve
goal contingency a  search completion plan  particular car used
fact affect driving plan  one path search space result
isomorphic contingency plans a  a   see figure   section a    
reasoning applies extension plan deal contingency b  
cannot assumed priori plan contingency b way resemble
plan constructed contingency a  interesting consequence
   

fiplanning contingencies  decision based approach
uncertainty concerning availability cars necessarily arise given plan
contingency b   example  location package contingency b close
enough agent could get without using car  final plan might
three contingencies  a   location   car     a   location   car     b  location
   foot  
cassandra may  course  produce extension plan car used
contingency b well  case encounter uncertainty associated
location car  proceed bifurcate contingency b done
previously contingency a  limit  plan involve one contingency every
member cross product possible outcomes relevant uncertainties  however 
important note every member cross product set must appear
contingency  since  shown  uncertainties may arise given particular
outcomes uncertainties 

    decision steps

cassandra encounters new source uncertainty adds decision step plan
represent act determining path plan followed
execution  following ordering constraints added plan time 


decision step must occur step uncertainty associated 



decision step must occur step precondition whose achievement
depends particular outcome uncertainty 

      formulating decision rules

decision step operational  must effective procedure
agent executing plan determine decision make  cassandra  action
deciding contingency execute modeled evaluation set conditionaction rules form 
condition   contingency  
condition   contingency  
condition   contingency  
   
cassandra annotates decision step plan set rules used
make decision  executing agent make decision evaluating
rules comes decision step course executing plan  order
evaluate decision rule  executing agent must able determine whether rule s
antecedent holds  preconditions decision step must thus include goals know
current status condition appears antecedent rule condition 
preconditions decision step become open conditions plan way
preconditions step 
intended effect evaluating decision rules choose appropriate contingency given outcome particular uncertainty  conditions diagnostic
particular outcomes uncertainty  executing agent cannot  course  directly
   

fipryor   collins
determine outcome uncertainty  must infer presence absence
effects depend upon outcome 
straightforward approach constructing antecedent conditions
decision rule would analyze plan operators identify effects could
expected result given outcome uncertainty  make condition
conjunction effects  however  turns overkill  fact 
necessary check effects given outcome uncertainty actually
used establish preconditions contingency associated outcome  
words  necessary verify contingency plan can  fact  succeed 
interesting consequence executing agent might  principle  end selecting
contingency plan even though outcome uncertainty one
plan associated  notice would cause problem execution
plan  since would occur conditions plan s success met 
fact  shall see  cassandra depends effect certain circumstances 
antecedent condition decision rule thus conjunction direct effects
particular outcome used establish preconditions contingency plan
outcome  decision rules constructed incrementally plan elaborated 
discuss cassandra s construction rules detail section       below 
approach used formulating cassandra s decision rules consistent
morgenstern s observation agent execute plan  make sure 
events plan executable  morgenstern        
      adding decision rule example

bomb in the toilet example  cassandra introduce decision step determine
whether bomb package    uncertainty initial conditions 
decision constrained occur start step  must occur
either dunk actions  since depend upon particular outcomes uncertainty 
decide step precondition know whether bomb package   
actions available would allow determine this x raying box 
example cassandra achieve precondition one actions  decide
basis branch plan execute 
      cassandra constructs decision rules

point planning process cassandra constructs decision rule 
one precondition plan known depend upon particular outcome uncertainty gave rise decision  namely  one led cassandra discovering
uncertainty first place  decision rule set cassandra initially builds thus
looks this 
effect   contingency  

contingency  

contingency  
   
construction plan  cassandra must modify initial rule set time
effect depending directly source uncertainty used establish open condition
   

fiplanning contingencies  decision based approach

action 

 toss coin  coin 

preconditions 

 holding  agent  coin 

effects 

  when   unknown  u h 
 effect   and  flat  coin 
 heads  coin   
  when   unknown  u t 
 effect   and  flat  coin 
 tails  coin   
  when   unknown  u e 
 effect  on edge  coin   

uncertain effect
uncertain effect
uncertain effect

figure     representing action tossing coin
plan  particular  cassandra must determine contingency open
condition resides  conjoin effect existing antecedent decision rule
contingency 
consider  example  happens coin tossed  might say theory
three possible outcomes action  coin land heads up 
tails up  edge  figure      suppose cassandra given goal
coin at  established using at heads effect tossing it  since
uncertain effect  cassandra introduces two new contingencies plan  one
outcome coin lands tails up  another outcome lands
edge 
introduction contingencies mandates introduction decision step
whose initial rule set looks this  
 flat coin   u   h  rule heads

 u   t  rule tails

 u   e  rule edge
time  new open condition  know if  flat coin   introduced precondition decision step  new goal conditions introduced must achieved
contingencies  u   t   u   e   cassandra next establishes goal condition contingency  u   t  using at tails effect toss step  decision rules associated
tails contingency thus modified follows 
 flat coin   u   h  rule heads
 flat coin   u   t  rule tails

 u   e  rule edge
finally  goal condition established contingency  u  e  introducing new
step  tip  plan  precondition tip step coin edge 
established on edge effect toss action  since effect depends directly
   assuming  u  variable representing source uncertainty  instantiated u  

   

fipryor   collins
upon uncertainty u   decision rule edge contingency modified include
condition 
 flat coin 
 u   h  rule heads
 flat coin 
 u   t  rule tails
 on edge coin   u   e  rule edge
since plan complete  final set decision rules  see section a     notice
rules discriminate heads up outcome tails up outcome 
fact  either outcome do  reason make discrimination  plan
executed either conditions depends solely upon order agent
executing plan chooses evaluate decision rules  
somewhat complex problem arises give cassandra goal
coin flat heads up  case effects established using toss
action  lead introduction two new contingencies plan  one
coin lands tails up  one lands edge  although cassandra
could establish  flat coin  tails up case  would fail complete plan 
coin would heads up  however  turn over action used 
leaving coin flat heads up given flat tails up begin with 
point decision rules follows 
 and  flat coin   heads up coin    u   h  rule heads
 and  flat coin   tails up coin    u   t  rule tails

 u   e  rule edge
cassandra must plan goal outcome coin lands
edge  effects established result tip action  however 
result heads up uncertain effect tip action  since coin might easily
land tails up  cassandra must therefore add another new contingency coin
lands tails tipped  instance  goal established using
turn over action  tails up precondition action established
uncertain result tip action  final decision rule set first decision
follows 
 and  flat coin   heads up coin    u   h  rule heads
 and  flat coin   tails up coin    u   t  rule tails
 on edge coin 
 u   e  rule edge
on edge contingency pursued  another decision  stemming uncertain
result tip  must added plan  name second source uncertainty u  
rules decision are 
 heads up coin   u   h 
 tails up coin   u   t 
plan depicted figure    shown section a   
   obvious extension cassandra would construction post processor spots decision rules
discriminate particular sets outcomes  prunes plan remove super uous
contingencies  note cannot determined plan complete whether condition
pertains 

   

fiplanning contingencies  decision based approach

flat
heads
flat
tails

heads

decide

flat



tip
coin

decide

key

tails

condition

link uncertain effect

ad

edge

link

end

heads



toss
coin

turn coin


turn coin


condition

flat

alternative control flow
incomplete portion plan

figure     plan two decisions
kick door

lock broken

open
door





op

link

decide

condition

end

start

lock

key

en

inta

ct



pick
lock

n
pe

alternative
control flow





door
unlocked

open
door

figure     opening door
      decision rules unsafe links

fact cassandra allows decision rules fully differentiate outcomes uncertainty raises somewhat subtle issue  consider partial plan
opening locked door shown figure     action kicking door has  let us say 
two possible outcomes  one lock broken one agent s foot
broken  plan contingency lock broken simply open door 
plan alternative contingency pick lock open door 
since second plan depend causally outcome uncertainty  the
agent s foot broken order pick lock open door  
decision rules based discussion would be 
   

fipryor   collins



 lock broken 





 o  l 
 o  f 

rule lock broken
rule foot broken

notice case pick action depends lock intact 
action may effect lock longer intact  words  kick
action potentially clobbers precondition pick  however  planner arguably
ignore clobbering  two actions belong different contingencies 
valid  though  structure decision rules guarantees agent
choose execute contingency involving pick outcome kick
lock broken  decision rules clearly enforce this  solution
case augment decision rule contingency lock broken
test whether lock fact intact  results following decision rules  the plan
shown section a    
kick




 lock broken 
 not  lock broken  




 o  l 
 o  f 

rule lock broken
rule foot broken

cassandra augments decision rules way whenever direct effect uncertainty
could clobber link different contingency 

   contingency planning algorithm
section give details cassandra s algorithm  properties considered
section   

    plan elements

plan consists steps  effects  links  some may unsafe   open conditions 
variable bindings  partial ordering  contingency labels  plan complete
open conditions unsafe links 
      steps effects

plan step step represents action  may enabling preconditions  least
one effect eff  instantiation operator 
plan step may decision step decide  decision step enabling preconditions
form  know if cond  condition cond  decide set decision rules 
effect eff represents results action  attached step step  representing action  may secondary preconditions  least one postcondition
cond  condition becomes true result executing step secondary
preconditions hold 
      links open conditions

link represents causal dependency plan  specifying condition cond established effect eff  cond postcondition  eff secondary preconditions
secpre result step step  link supports step supstep effect supeff
condition cond one of 
   

fiplanning contingencies  decision based approach
enabling precondition supstep 
secondary precondition effect supeff result supstep 
negation secondary precondition effect result supstep  thus
preserving link 
link unsafe contingency conting required effect
clobbereff postcondition clobbercond  the clobbering condition  resulting step
clobberstep that 
either clobbercond unify cond 
cond form  know if knowcond  clobbercond unify knowcond 
step clobberstep occur steps step supstep 
effect clobbereff occur contingency conting 
open condition  an unachieved subgoal  represented cassandra incomplete
link  i e   link missing information effect establishes it 


      bindings orderings

plan bindings  codesignation constraints  specify relationships variables
constants  following relationships possible 
two variables may codesignate 
variable may designate constant 
variable may constrained designate constant 
two variables may constrained codesignate 
ordering constrains order two steps respect other  step
s  must precede step s   s    s   
      contingency labels

every step  effect open condition partial plan two sets contingency labels
attached it  interests brevity  refer labels link  case 
mean labels step effect link establishes 
contingency label two parts  symbol representing source uncertainty 
symbol representing possible outcome source uncertainty  positive contingency labels denote circumstances plan element must necessarily
occur  negative contingency labels denote circumstances plan element cannot
must occur 
contingency labels must propagated plan  general  positive contingency labels propagated goals effects establish them  negative
contingency labels propagated steps effects result them 
details follows 
   

fipryor   collins
plan  partlist 

   choose partial plan plan partlist 
   plan complete  finish 
   unsafe link unsafe 
resolve  plan  unsafe  add resulting plans partlist 
return step   
   open condition open 
establish  plan  open  add resulting plans partlist 
return step   

figure     top level planning algorithm


step inherits positive labels effects result it 



step inherits negative labels effects establish enabling preconditions 



effect inherits positive labels steps whose enabling preconditions
establishes 



effect inherits positive labels effects whose secondary preconditions
establishes 



effect inherits negative labels step results 



effect inherits negative labels effects establish secondary preconditions 



open condition inherits positive labels step effect required
establish 

cassandra s system label propagation based cnlp complex 
indeed  rather complex would like  complexity mandated
need deal operators involve multiple context dependent effects 
result step effects necessarily share labels 

    algorithm

planning process starts constructing partial plan consisting two steps 


initial step preconditions initial conditions effects 



goal step effects goal conditions enabling preconditions 

plan added  initially empty  list partial plans partlist  planning
proceeds shown figure    
remains describe threats unsafe links resolved open
conditions established 
   

fiplanning contingencies  decision based approach
resolve  plan  unsafe 

   initialize list newplans 
   unification clobbering condition clobbercond condition cond established link
unsafe involves adding codesignation constraints bindings plan 
make possible modification bindings plan ensures clobbercond cannot
unify cond 
add resulting partial plan newplans 
   clobbering step clobberstep precede step step establishes unsafe 
add ordering ensure clobberstep precedes step 
add resulting partial plan newplans 
   step supstep supported unsafe precede clobberstep 
add ordering ensure supstep precedes clobberstep 
add resulting partial plan newplans 
   prevent clobbering effect clobbereff occurring contingency conting link
unsafe unsafe 
one of 
 a  add negation secondary preconditions clobbereff open condition
positive contingency label conting 
 b  add conting negative contingency labels clobberstep 
 c  add conting negative contingency labels effect supeff step supstep
unsafe supports 
appropriate modify relevant decision rule discussed section       
add orderings ensure step clobberstep occurs steps step supstep 
propagate labels appropriate 
add resulting partial plan newplans 
   return newplans 

figure     resolving threats
      resolving threats unsafe links

figure    shows threats resolved  methods shown steps        
standard methods found snlp ucpop  often termed separation  demotion 
promotion respectively  say methods step   disable threat 
methods steps  a  b ensure threatening effect occur given
contingency  method step  a modification standard method found ucpop
planners use secondary preconditions  essentially  idea prevent
effect occurring ensuring context occurs cannot hold 
method  b prevents effect occurring contingency forbidding execution
step produces it  method step  c notes established step effect
cannot occur given contingency  techniques result inconsistent labeling
plan element  so that  example  cannot occur every contingency
required  resulting partial plan abandoned  represents dead end
search space 
   

fipryor   collins
      establishing open conditions

figure    shows procedure used  procedure establishpre shows methods adding
new step reusing existing step  essentially methods used ucpop
extended ect need check propagate contingency labels 
procedure establishunk shows methods adding new decision reusing existing
decision specific cassandra  issues involved discussed section     

   issues contingency planning

cassandra partial order planner directly descended ucpop  sound  complete  systematic all plans produced ucpop guaranteed achieve goals 
plan ucpop find it  ucpop never revisits partial plan 
section discuss properties related issues context contingency planning 

    soundness

ucpop s soundness depends perfect knowledge assumptions discussed section   
particular  ucpop s plans sound initial conditions fully specified 

possible effects actions specified operators represent them 
uncertainties involved plan  cassandra equivalent ucpop therefore
constructs sound plans 
uncertainties involved plan  longer assumed initial
conditions effects actions fully specified  indeed  uncertainties arise
assumptions violated  however  assumptions adapted account
presence uncertainty  would possible  example  insist possible
initial conditions action effects specified  cassandra s representation  means
every source uncertainty must specified use unknown secondary
preconditions  every possible outcome source uncertainty must specified 
conjecture cassandra sound conditions  proof would follow
procedure adding new goals whenever new source uncertainty
encountered ensures every goal achieved every possible outcome uncertainty 

    completeness

conjecture cassandra complete limited sense that  sound plan
form construct  cassandra find it  believe simple
extension ucpop s completeness  uncertainties involved  cassandra
always find plan way ucpop  introduction source uncertainty
plan leads addition new contingent goals  cassandra find plan
new goals appropriate contingency  thus  goal indeed
achieved every contingency  cassandra find plan achieves it  long
way determining contingency holds 
example  plan disarm bomb described section     relies
method determining package bomb in  mcdermott s presentation
example  two packages indistinguishable  point example
illustrate nonetheless plan succeed disarming bomb  namely 
   

fiplanning contingencies  decision based approach
establish  plan  open 

   open condition type  unknown establishpre  plan  open  return resulting list
plans 
   open condition type  unknown source uncertainty uncertainty outcome outcome
establishunk  plan  open  uncertainty  outcome  return resulting list plans 

establishpre  plan  open 

   initialize list newplans 
   effect eff resulting step step plan
eff occur every contingency open must established
eff precede step supstep open required support
postcondition effcond eff unify condition cond open required
establish 
complete link open using eff establishing effect 
add resulting partial plan newplans 
   operator effect eff postcondition effcond unify cond 
instantiate new step step 
complete link open using eff establishing effect 
add enabling preconditions step open conditions 
add resulting partial plan newplans 
   plan newplans 
add ordering ensure step precedes supstep 
add bindings necessary ensure effcond unifies cond 
add secondary preconditions secpre eff open conditions 
propagate labels appropriate 
   return newplans 

establishunk  plan  open  uncertainty 

outcome 
   initialize list newcplans 
   uncertainty new source uncertainty plan 
add new decision step decstep uncertainty uncertainty 
add new top level goals open conditions appropriate labels 
add resulting partial plan newcplans 
   uncertainty existing source uncertainty plan 
find existing decision step decstep uncertainty uncertainty 
add resulting partial plan newcplans 
   plan newcplans 
modify decision rule decstep outcome include cond antecedent 
add  know if cond  open condition required establish decstep 
add orderings ensure decstep precedes supstep 
propagate labels appropriate 
   return newcplans 

figure     establishing open conditions
   

fipryor   collins
dunking packages  mcdermott         algorithm described previous section
cannot find plan situation impossible achieve preconditions
decision step determines package dunk  section       discuss
example detail describe simple extension cassandra allows correct
plan  to dunk packages  found 
ucpop s completeness  soundness  depends perfect knowledge assumptions discussed section    cassandra s completeness depends three extensions
assumptions 


sources uncertainty specified 



specified outcomes exhaustive 



actions available allow determination outcome uncertainty  even indirectly 

unfortunately  conditions necessary sucient  cassandra
find plans actions uses determine contingency interfere
achievement goal  instance  might dropping action available
would detonate bomb inside package dropped  certainly action
allows determination outcome uncertainty  sound plan
makes use it 
order useful notion cassandra s completeness  must therefore specify form plans construct  problem common proving
completeness planner  example  claim snlp  say  incomplete
cannot find plan bomb in the toilet problem  say instead
valid plan form construct  fairly simple specify form
plans snlp construct  consist partially ordered sequences steps 
executed  introduction contingencies makes description
cassandra s plans rather complex  yet formalize description 
actively working direction  informally  cassandra construct plans
every source uncertainty include step decide one relevant plan branches 
extension cassandra solves bomb in the toilet problem
construct plans meet criterion 

    systematicity

ucpop systematic  never visit partial plan twice searching  cas 

sandra  described paper  systematic  may visit partial plans
search space once  consider plan disarm bomb discussed
section      plan  two different ways establishing goal disarm
bomb  dunking package    dunking package    cassandra initially choose
either way establishing goal  leading case introduction contingency
necessity replanning achieve goal contingency  search
paths arrive final plan  search systematic 
cassandra could made systematic insisting handling contingencies
certain order  search path uses order treated dead end 
   

fiplanning contingencies  decision based approach
however  extension added currently debate
desirability systematicity  example  langley        argues non systematic
search method  iterative sampling  often better systematic method  depth first
search  problems multiple solutions deep solution paths  peot
smith        observe performance non systematic version snlp better
original systematic version  ascribed behavior fact
exploring duplicate plans consumed less overhead ensuring systematicity 

    knowledge goals
agent executing contingency plans must able acquire information actual
state world determine possible courses action pursue 
system constructs contingency plans must able plan information
acquisition  general  acquisition process may arbitrarily complex  pryor   collins 
      
early uential discussion goals possess knowledge world
mccarthy hayes         since then  various theories developed
account  e g   moore        haas        morgenstern        steel        
common thread work knowledge goals arise need specify
actions performed  words  need make actions operational   work area whole concentrated able describe
represent knowledge goals  largely ignored issues involved building planners
construct plans containing them 
structure cassandra based notion knowledge goals arise
need make decisions actions performed  pryor         view 
planning process deciding advance done  collins 
       world conforming perfect knowledge assumptions classical planning
always possible world totally predictable  plans therefore need
contain knowledge goals  however  assumptions relaxed may
possible make decisions advance information necessary make
available planner  information may unavailable either planner s
limited knowledge world events nondeterministically cause
conditions affect decisions yet occurred  cases may
possible planner determine decision must made even though cannot
time actually make it  case planner defer decision  plan make
future  necessary information available  part plan
acquire information  plan thus contains knowledge goals 
cassandra s use  unknown  preconditions indicate nondeterminism thus crucial
part mechanism  cassandra  knowledge goals arise result deferring decisions  deferred decisions represented explicitly plans  arise
directly incompleteness cassandra s knowledge world  whether
effects nondeterministic actions incompletely specified initial conditions 
forms uncertainty handled way  cassandra recognized need defer decision  reason deferral important except
inasmuch results incomplete knowledge world 
   

fipryor   collins
view knowledge goals arising deferred decisions basically consistent
view needed order make actions operational  differs
traditional view knowledge goals directly preconditions physical actions 
instead preconditions actions make decisions  example  mccarthy
hayes consider problem combination safe  commonly held action
opening safe precondition know combination  cassandra  however 
goal knowing combination would arise subgoal deciding plan branch
follow  would branch possible combination   branches would
arise cassandra s incomplete knowledge world  initial conditions
plan executed fully specified 
cassandra uses variant syntactic approach proposed haas        represent
knowledge goals  limiting knowledge goals form know if fact   turns
adequate if  assume  possible outcomes given uncertainty known 
general  representation used cassandra  based strips representation add
delete lists  less powerful logics proposed either morgenstern haas 

    miscellaneous issues contingency planning
cassandra s approach raises number questions concerning desired behavior
contingency planner  many obvious answers  section brie
consider issues raised 
      dependence outcomes superfluous contingencies

fact contingency plan assumes particular outcome uncertainty means
cannot depend upon different outcome uncertainty  cassandra
enforce constraint plan must causally depend upon outcome assumes 
instance  example described section        plan take ashland
actually depend western blocked  could executed successfully regardless
level trac western 
observation raises interesting question  plan contingency turns
depend outcome uncertainty gave rise it  would
obviate need plans alternative contingencies  instance  example 
might seem sensible execute plan use ashland regardless whether western
blocked  might thus seem planner edit plan way
eliminate apparently super uous contingencies  however  easily shown
version plan involve dependence outcome uncertainty
generated elsewhere search space  example  would mean
planner would fact consider plan simply involved taking ashland  search
heuristics penalize plans involving contingencies appropriately plan
preferred contingency plan  things equal 
   raises obvious question whether planning advance every possibility sensible
thing do  see section     discussion issue 

   

fiplanning contingencies  decision based approach
      one sided contingencies

preceding discussion notwithstanding  plan involving contingencies always
superior plan involving contingency  planner might fact construct
plan western ashland one  take clear cut example  suppose pat needs
    bet horse  might try borrow     chris  outcome
action uncertain chris might refuse  alternatively  could rob convenience store 
robbery plan would  we shall stipulate  involve uncertainties  bad plan
reasons  would better first try borrow     chris  then 
fails  rob convenience store  cassandra could generate plan  order make
prefer plan contingency free alternative  however  search metric would
take account estimated costs various actions  perform something akin
expected value computation   see  example  feldman   sproull        haddawy  
hanks        discussions decision theoretic measures applied planning   order
execute plan properly  would necessary way knowing
borrowing plan preferred robbery plan possible execute
either them 
      identical branches

possible single plan could work well several different outcomes
uncertainty  instance  suppose action asking chris     three possible
outcomes  either pat gets money chris happy  at opportunity
favor   pat gets money chris unhappy  at obliged
favor   pat get money all  pat constructs plan tries
borrow     chris bet horse  then  assuming plan depend
upon chris s happiness  which might  example  pat needed get ride track
chris   plan work either  get money   chris happy  outcome
 get money   chris unhappy  outcome 
cassandra could find plan  would effect find twice once
outcome uncertainty and would still require decision step discriminate
outcomes  inecient two ways  extra search time required
find essentially plan twice wasted  effort put making
unnecessary decision  looking ways avoid former problem  latter
could solved post processor would  merge  identical contingency plans 
implemented technique 
      branch merging

possible construct plan branches split reunite  instance 
consider western ashland plan again  context goal get
evanston arises might obligation deliver toast dinner held
evanston restaurant  contingency due uncertainty trac western avenue
would case seem affect portion plan concerned getting
evanston  probably little bearing wording toast  choice wine 
on  natural way frame plan might thus assume regardless
   

fipryor   collins
contingency carried out  planner eventually arrive certain location
evanston  point single plan developed achieve final goal 
constructing plan way would result compact plan description 
might thus reduce effort needed construct plan avoiding  example 
construction multiple copies subplan  considering methods
branch re merging might achieved  methods considered far seem
complicate planning process considerably 
      fail safe planning

discussed section      cassandra s operation relies able determine 
even indirectly  outcome uncertainty  however  may always
possible  necessary precondition existence viable plan 
bomb in the toilet problem  example  valid plan cassandra cannot find 
dunk packages 
suggests method constructing plans face uncertainty
outcome uncertainty cannot determined what one might call fail safe plans 
whenever uncertainty arises principle possible might non contingent
plan would achieve goal whatever outcome uncertainty  find
plan  planner must construct version contingency plan actions
contingency branches arising uncertainty executed unconditionally 
cassandra extended way  adding new type decision  one
execute branches parallel  collins   pryor         plan containing
decision sound none actions must performed achieve goal
one contingency interfere actions must performed
contingency  ability perform actions independent outcome
uncertainty  conditions clearly hold bomb in the toilet problem 
cassandra reason possibility labeling scheme distinguishes
actions must performed given contingency need
performed  possible execute branches actions branch may
performed  but need not  branches 
parallel decision added plan extended version cassandra  new
goals added usual way labeling handled differently  branches
separated  cassandra longer reason causal links one branch
affected actions another branch 
      contingent failure

cassandra produce plan possible achieve goal plan
possible contingencies  often  however  goal cannot fact achieved outcome
underlying uncertainty  consider  instance  peot smith s example trying
get ski resort car  road leading resort either clear blocked
snowdrifts  peot   smith         road clear  goal achieved 
blocked  plans doomed failure 
planner expected recognize impossibility achieving goal
general case  chapman         however  possible approach suggested peot
   

fiplanning contingencies  decision based approach
smith  could introduce alternative method resolving open goal conditions  simply
assume goal question fails 
undesirable method resolving open goal conditions subgoal fact
achievable  theory plans involving contingent failure considered
planner failed find plan goals achieved  sometimes
possible  general problem determining whether successful plan
undecidable  may always partial plans involve goal failure
cannot completed  example  partial plan modified may become
complex  resolution open condition involving introduction
unachieved subgoals  case  plans involving contingent failure never considered
unless ranked plans involve contingent failure  order
generally useful  approach must weakened  instead considering goal failure
avenues attack failed  apply high fixed penalty plans involving
failed goals  aim would fix penalty high enough contingent failure would
apply genuine cases goals unachievable  however  would necessity
heuristic approach completeness would lost 

   related work
cassandra constructed using ucpop  penberthy   weld        platform  ucpop
partial order planner handles actions context dependent effects universally quantified preconditions effects  ucpop extension snlp  barrett et al  
      mcallester   rosenblitt        uses subset pednault s adl representation
 pednault        
early contingency planner warren s warplan c         contingency planning
less abandoned mid seventies early nineties   sensp
 etzioni et al         cnlp  peot   smith         sensp cnlp members
snlp family  sensp is  cassandra  based ucpop  cnlp based directly
snlp  c buridan  draper et al       a  draper  hanks    weld      b   probabilistic
contingency planner  based probabilistic planner buridan  kushmerick  hanks 
  weld         which based snlp  cnlp  plinth  goldman   boddy 
    a      b  total order planner based mcdermott s pedestal        
strongly uenced cnlp treatment contingency plans 
warplan c  unlike planners considered here  use strips based
action representation  based predicate calculus  could handle actions
two possible outcomes  merge resulting plan branches 
sensp differs planners considered here  represents uncertainty
use run time variables  distinguished ordinary variables treated
constants whose values yet known  sensp plan branches arise
introduction information gathering steps bind run time variables  sensp handles
plan branching constructing separate plans achieve goal particular
contingency  combines separate plans later stage  keeping branches
totally separate  sensp thus considers contingency branches separately  rather
   neither noah  sacerdoti        interplan  tate        explicitly addressed issues uncertainty 
although tackled problems involving  collins   pryor        

   

fipryor   collins
parallel  actions achieve knowledge goals may preconditions sensp 
restriction required order maintain completeness 
surprisingly  cassandra  cnlp  c buridan  lesser extent plinth 
many respects similar  except plinth use basic snlp algorithm  use
extended strips representations  cassandra differs cnlp plinth principally
way uncertainty represented  section       difference important implications handling knowledge goals  section       principal difference
cassandra c buridan lies latter s use probabilities  section      
contingency planning one approach problem planning uncertainty  aim contingency planning construct single plan succeed
circumstances  essentially extension classical planning 
approaches planning uncertainty share aim  probabilistic planners
aim construct plans high probability succeeding  section       systems
interleave planning execution attempt plan fully advance  section      
approaches possible address problem determining contingencies planned for  currently possible cassandra  third
approach reactive planning  behavior controlled set reaction
rules  section      

    representation uncertainty
cnlp plinth  uncertainty represented combination uncertain outcomes nondeterministic actions effects observing outcomes  threevalued logic used  postcondition action may true   false   unknown  
example  action tossing coin might postcondition unk side up  x   special conditional actions   unknown precondition several mutually
exclusive sets postconditions  used observe results nondeterministic actions  example  operator observe results tossing coin might
precondition unk side up  x  three possible outcomes   side up heads  
 side up tails    side up edge  
cnlp thus spreads representation uncertainty action whose execution produces uncertainty action observes result  consequence
cnlp cannot use observation action observe results different
actions  example  would require different actions observe results tossing
coin  which three possible outcomes  tipping coin landed edge
 which two possible outcomes  
plinth  notion conditional action extended cover action  not
observation actions  nondeterministic effects planner s world model  
example  image processing domain operator remove noise image may
may succeed  however  outcome evident soon applied 
special observation action required 
cnlp plinth  information gathering actions included plan whenever
action uncertain effects occurs  necessary uncertainty actually
represented information gathering action rather action actually
   

fiplanning contingencies  decision based approach
produces uncertainty  knowledge goals thus represented explicitly two
systems 
representation used cnlp plinth arises desire use  single
model world  representing planner s state knowledge  rather
complex formalization including epistemic ground formulas   goldman   boddy 
    b   operator therefore represents effects execution underlying action planner s knowledge world  effects
actual state world  is  course  important represent actions affect
planner s world model  believe important represent affect
world  all  purpose reasoning actions achieve goals world 
planner s world model  particular  execution nondeterministic action actual effects  although may indeed unknown planner 
occurred cannot altered  cassandra s representation ects this  indeed  cassandra reason possible effects without scheduling observation actions 
means extension cassandra can  example  solve original bomb in thetoilet problem  possible actions resolve uncertainty
package contains bomb  bomb s state represented planner s
world model stage beginning  known armed 
end  packages dunked known safe 
implication method representing uncertainty diculty
representing actions whose uncertain effects cannot determined execution
single action  consider  example  malfunctioning soda machine one
indicator lights cannot make change  another lights run
product requested  suppoe that  functioning correctly  two
indicators light simultaneously  malfunctions  must kicked make
work  observing either light enough determine uncertain effect
 working properly malfunctioning  occurred 

    knowledge goals
method representing uncertainty cnlp plinth important implications
knowledge goals handled plans 
acquisition information planning task  pryor   collins       
      pryor         general  sequence actions required achieve given knowledge
goal may arbitrarily complex  example  action observe tossed coin might
require observer appropriate location  cases  might
several different possible methods information gathering  involving perception 
involving reasoning  combination  contingency planner  whose plans
necessarily involve achievement knowledge goals  must therefore able plan
fully generally information gathering 
confusion source uncertainty observation uncertain results
limits ways knowledge goals achieved cnlp plinth  must
achieved special observation actions specify uncertain outcomes 
result representation terms planner s world model  means
represent effects actions  except ag unknown 
   

fipryor   collins
planner observed  or otherwise incorporated world model  
discussion issue goldman boddy      b  explicitly exclude knowledge
goals consideration  point out  planning uncertainty requires
distinction made actual state world planner s knowledge
it  order plan effectively knowledge goals  must represented 
done cassandra separating representation uncertainty representation
information gathering  effect results deterministically action  cassandra
reasons need observe it  forms part world model 
uncertain effect  hand  incorporated unconditionally cassandra s
world model  noted possibly true   if necessary  cassandra sets
subgoal determine whether indeed true 
sensp  uses uwl representation goals actions  three different
kinds precondition used represent information goals either alone
combination  etzioni et al          well satisfy preconditions  may achieved
actions observation  uwl hands off preconditions indicating
value propositions must changed order achieve subgoal  find out
preconditions  latter ways similar preconditions know if propositions
cassandra  precondition  find out  p   v   tells planner ascertain
whether p truth value v  certain circumstances type precondition
may achieved action changes value p  knowledge goals may thus
represented find out preconditions satisfy preconditions  often used conjunction
hands off preconditions   etzioni et al  argue knowledge goals
achieved actions change value proposition question
change required another purpose plan  believe unnecessary
limitation  circumstances enforcement actions may best way
achieving knowledge goals 

    probabilistic decision theoretic planning
constructing plans  cassandra recognizes presence uncertainty
extent  planners specifically address issues probability  example  buridan
constructs plans whose probability achieving goal given threshold  kushmerick et al          drips uses utility different possible outcome various
plans choose one highest expected utility  haddawy   suwandi        
neither buridan drips constructs contingency plans  i e   plans involve alternative courses action performed different circumstances  c buridan  based
buridan  constructs contingency plans likely succeed  draper et al       b 
    a   represents extension cnlp direction decision theoretic planning 
probabilistic planners use information probabilities possible uncertain
outcomes construct plans likely succeed  cassandra  hand  cannot
use information constructs plans guaranteed succeed  probabilistic
planning  relies explicit probabilities  less powerful
deterministic contingency planning performed cassandra  cassandra cannot use
information probabilities construct plans circumstances
information available  example  order solve bomb in the toilet problem 
   

fiplanning contingencies  decision based approach
c buridan would information  least make assumption 

probabilities bomb package  whatever assumptions made might
turn wrong  thus invalidating basis plan 
believe would possible build probabilistic planner using ideas
c buridan cassandra  explicit representation decisions cassandra 
planner would provide excellent opportunity investigating use different
decision procedures  c buridan relies full knowledge probabilities
time constructs plans  knowledge  other  may available
plan executed  would relatively simple add decision procedures
cassandra s decision representation depend information probabilities  e g  
follow particular course action probability given outcome exceeds
certain value  introduction decision procedures might  course  result
introduction knowledge goals determine probabilities  possibly leading eventually
system would construct plans perform empirical studies determine probabilities 
problem associated contingency planning branch merging  i e  
determination whether two steps separate branches treated step 
c buridan performs full merging  effect probabilistic algorithm
based  adding capability cassandra area future work  major
problem encountered considering branch merging identify variables
different branches other  c buridan s representations include variables 
problem arise  may cause diculties adaptation c buridan s
merging mechanism cassandra s use 
advantage combining probabilistic planning contingency planning resulting ability judge whether worth planning given contingency  one
limitations cassandra present form requirement every possible contingency planned for  complex situations makes resulting plans cumbersome 
moreover  cassandra s performance deteriorates number distinct branches
plan  cost determining presence particular branch would significantly change probability plan s success might well much less cost
constructing branch  interesting issue considered future 

    interleaving planning execution

although cassandra s plans may include sensing actions  course action
actually executed depending results actions  cassandra
interleave planning execution  plans fully specified executed 
circumstances clearly inecient  consider  example  cassandra
constructs plan open combination safe  see section       requires prior knowledge
possible combinations  constructs plan branch combination 
obvious alternative would construct plan fully specified
information gathering step  execute plan stage and  information
gathered  construct rest plan    could done cassandra
introducing another type decision procedure  planning achieve goal 
assuming would always possible find plan achieve goal  strong
    see section     discussion issue alternative approach 

   

fipryor   collins
assumption  would certainly valid cases problem opening safe 
area future work  interleaving planning execution way would
advantage would necessary plan contingencies actually
arise  would however lose advantages planning advance  example 
possible interference actions performed information gathering
might missed  leading planner find suboptimal plans  indeed  sensing actions
may general change world  executing full construction viable plan
might unfortunate result making achievement goal impossible 
planners interleave planning execution include ipem  ambros ingerson   steel 
       xii  golden  etzioni    weld        sage  knoblock         three use
basic interleaving technique  planning possible steps
executed  thus set decide advance exactly planning
necessary  plans include explicit provision planning 
effects different interleaving strategies investigated design bump  olawsky
  gini         continue elsewhere strategy much preplanning possible
performed  stop execute strategy  goals defined terms sensor readings
executed soon encountered  found neither strategy
clear advantage other  strategies sometimes produced plans
suboptimal might fail 

    reactive planning

different approach problem planning uncertainty taken reactive
planning paradigm  approach  specific sequence actions planned advance 
contingency planning  planner given set initial conditions goal 
however  instead producing plan branches  produces set condition action
rules  example  universal plans  schoppers        situated control rules  scrs 
 drummond        
theory  reactive planning system handle exogenous events well uncertain
effects unknown initial conditions  possible provide reaction rule every
possible situation may encountered  whether circumstances would
lead envisaged  contrast  contingency planner cassandra cannot
handle exogenous events cannot predict them  cassandra contingency planners focus planning effort circumstances predicted possible  or likely 
case probabilistic contingency planner c buridan  
would possible represent cassandra s contingency plans sets conditionaction rules  using causal links preconditions specify conditions
action performed  however  reasoning required execution time
use reaction rules required execute contingency plan  instead simply
executing next step plan  reasoning branch points  use reaction
rules requires evaluation conditions every cycle order select relevant rule 

   discussion

described cassandra  partial order contingency planner represent uncertain outcomes construct contingency plans outcomes  design cassandra
   

fiplanning contingencies  decision based approach
based coherent view issues arising planning uncertainty  recognizes
that  uncertain world  distinction must drawn actual state
world planner s model it  instantiates intuitively natural account
knowledge goals exist arise  bases treatment plan branching
requirements agent execute plan  result  cassandra explicitly
plans gather information allows information gathering actions fully general 
coherence design provides solid base advanced capabilities
use varying decision making procedures 

    contributions
principal contribution work lies explicit representation decision steps
implications handling knowledge goals  cassandra is  believe 
first planner decisions represented explicit actions plans
constructs  cassandra s knowledge goals arise specifically need decide
alternative courses action  preconditions decision actions  cassandra thus
consistent view planning process making decisions advance 
view  contingency plans plans defer decisions information
based available  pryor         different plan branches correspond
different decision outcomes 
use explicit decision steps  cassandra distinguishes sensing
information gathering actions one hand  decision making other  one
important reason making distinction decision may depend
one piece information  available performing different actions  addition 
separating information gathering decision making provides basis introducing alternative methods making decisions  example  extension cassandra described
section       introduces type decision directs executing agent perform
branches resulting given source uncertainty  allows construction
plans succeed situations way telling actual outcome  e g   bomb in the toilet problem   believe explicit representation
different methods making decisions important direction future research 
knowledge goals arise preconditions decisions cassandra  need
know whether particular plan branch work distinguished need know
actual outcome uncertainty  cassandra plan determine outcomes unless
relevant achievement otherwise goals  moreover  cassandra
treat knowledge goals special cases  plans achieve may complex plans
achieve goals  well planning achieve knowledge goals arise
preconditions decisions  cassandra produce plans top level knowledge goals 
two features cassandra worth noting  exibility afforded labeling
scheme  potential learning adaptation afforded representation
uncertainty 
cassandra s labeling scheme  although complex  allows agent executing plan
distinguish three classes action  must executed given
contingency  must not  whose execution affect achievement
   

fipryor   collins
goal contingency    feature paves way extension described
allows cassandra build plans requiring execution branches resulting
source uncertainty 
cassandra s representation makes assumptions intrinsic nature uncertainty  unknown precondition simply denotes information context
produce particular effect action available planner  may
information principle unknowable  in domains involving quantum effects 
example   much likely uncertainty results limitations
planner information available it  general  agent operating real world
domain much effective learn improve performance adapt
changing conditions  use unknown preconditions represent uncertainty means
circumstances would relatively simple incorporate results learning adaptation planner s domain knowledge  example  planner might
discover predict certain outcomes  could change unknown preconditions
ones ecting new knowledge  if  hand  discovered predicted
effects consistently failing occur  could change relevant preconditions
unknown ones 

    limitations

cassandra one increasing number planners aim extend techniques
classical planning realistic domains  cassandra designed operate domains
two three principal constraints observed classical planners relaxed 
namely  allow non deterministic actions incomplete knowledge initial conditions  cassandra is  however  subject third constraint  changes take place
except result actions specified plan  clearly limits effectiveness
many real world domains  moreover  limits extent nondeterminism
incompleteness knowledge handled  cassandra s plans necessarily
achieve goals sources uncertainty ignored  possible outcomes
specified 
cassandra cannot make use information likely particular outcomes are 
unlike probabilistic decision theoretic planners  cannot plan interleave planning
execution  provide reaction rules possible circumstances 
solve problems valid plans involving ways discriminating
possible outcomes  algorithm given cannot solve original version bombin the toilet problem  although extension described section        collins
  pryor        
algorithm described paper two major practical limitations  first 
plans produces often complex necessary  second  time taken
produce plans precludes use except simple problems 
complexity cassandra s plans results necessity planning every
contingency lack branch merging  example  suppose open
combination safe could obtain money pay evening out  cassandra s
    agents make use information  guarantee third type step
actually executable 

   

fiplanning contingencies  decision based approach
plan goal enjoying evening would one branch possible safe
combination  branch would start actions open safe 
different combination  would continue actions going restaurant
movies  say  would identical branch  simpler plan would
merge separate branches safe opened  consideration methods
branch merging area future work  see sections            
circumstances  example  plan complexity could reduced
use run time variables  introduced ipem  ambros ingerson
  steel        used sensp  etzioni et al          see section    
uncertainty value action parameter takes  which case opening
combination safe  would possible use run time variable represent parameter  obviating need separate plan branches  implementing strategy would
require effective methods determining effects uncertainty limited
parameter values  general  notion indicates possible approach problem
branch merging  taking least commitment approach variable binding 
way least commitment approach taken step ordering partial order
planner  would allow concept  conditional  variable binding  variable
binding could labeled required forbidden given contingency 
analyzed complexity cassandra s algorithm  believe
exponential  effect multiple plan branches  whose presence
increases number steps plan increases number potential
interactions number ways resolving them  certainly  subjective impression
cassandra runs even slowly planners snlp family  effective
domain independent search control heuristics dicult find  many  toy 
domains used cassandra even problem specific heuristics hard come
by 

    conclusion
cassandra planning system based firmly classical planning paradigm  many
strengths weaknesses classical planning systems  example 
believe certain circumstances plans valid guaranteed
find valid plan one exists  however  techniques uses valid limited
circumstances  computational complexity make direct scaling unlikely
feasible 
view  principal strengths cassandra arise explicit representation
decisions plans  shown use decisions provides natural account
knowledge goals arise planning process  sketched
decisions used basis extensions provide added functionality  new
type decision allows fail safe plans  provide method solving problems
bomb in the toilet problem  section         another type decision may provide
effective method interleaving planning execution  section      
believe use explicit decision procedures enable extension
range applicability techniques classical planning  general  idea constructing
single plan succeed circumstances is  feel  unlikely productive 
   

fipryor   collins
real world complex uncertain enough trying predict behavior detail
simply impossible  however  use decision procedures that  example  involve
probabilistic techniques interleave planning execution  appears likely provide
exible framework that  although inevitably sacrificing completeness correctness 
provide basis effective  practical planning real world 

appendix a  cassandra s plans
appendix shows plans constructed cassandra examples body
paper  plan consists initial conditions  plan steps goals  initial conditions
shown top plan  unknown shown depending
particular contingency  plan steps shown next  shown number
denoting order plan  numbers parentheses show order
steps added plan  right step contingency labels 
brevity  individual effects step always omitted links establish
step s enabling secondary preconditions often omitted 
finally  bottom plan come goal conditions  goal stated first 
contingency goal shown links establish it  usual  contingency
labels right 

a   plan get evanston
plan shown figure   discussed section        note decision step
single active decision rule  situation discussed comments onesided contingencies section      route using western quicker clear 
ashland route slower always possible 
initial 

 traffic s  good   not  traffic bad  
 traffic s  bad   traffic bad 
 and  at start   road western   road belmont   road ashland  

step

        go to western at belmont 
yes   traffic s  good bad 
 and  not  at start    on western   on belmont  
      at start 

step

        check traffic on western 
 know if  traffic bad  
      on western 

step

        decide traffic s 
 and  not  traffic bad  

      traffic s  good 
 and
      traffic s  bad 
      know if  traffic bad  

step

        take belmont 

yes   traffic s  bad 
   traffic s  good 
 and  not  on western    on ashland  
      on belmont 

   

fiplanning contingencies  decision based approach
step

        take ashland 

yes   traffic s  bad 
   traffic s  good 

 at evanston 
      on ashland 
step

   traffic s  good 

        take western 

yes   traffic s  good 
   traffic s  bad 

 at evanston 
      on western 
      not  traffic bad  
goal 

   traffic s  bad 
   traffic s  bad 

 at evanston 
goal
      at evanston 

yes   traffic s  bad 
   traffic s  good 

      at evanston 

yes   traffic s  good 
   traffic s  bad 

goal

complete 

a   disarming bomb

plan shown figures     discussed section        note
moving steps dunking steps always possible  necessary one
outcome uncertainty  fail safe plan  see section      therefore possible 
initial 

 unk s  o    contains package   bomb 
 unk s  o    contains package   bomb 
 and  at package   rug   at package   rug  

step

        x ray package   
 know if  contains package   bomb  

step

        x ray package   
 know if  contains package   bomb  

step

        decide unk s 
 and  contains package   bomb 

      unk s  o  
 and  contains package   bomb 

      unk s  o  
      know if  contains package   bomb  
      know if  contains package   bomb  

step

        move rug toilet package   
yes   unk s  o  
 and  not  at package   rug    at package   toilet  
      at package   rug 

step

        move rug toilet package   
yes   unk s  o  
 and  not  at package   rug    at package   toilet  
      at package   rug 

step

        dunk package   
 wet package   

yes   unk s  o  

   

fipryor   collins
      at package   toilet 
 disarmed bomb 
      contains package   bomb 
step

        dunk package   
 wet package   
      at package   toilet 
 disarmed bomb 
      contains package   bomb 

goal 

   unk s  o  
yes   unk s  o  

   unk s  o  

 disarmed bomb 
goal
      disarmed bomb 

yes   unk s  o  
   unk s  o  

      disarmed bomb 

yes   unk s  o  
   unk s  o  

goal

complete 

a   fetching package

plan figure    discussed section        involves one source uncertainty
hence contains one decision step  two possible ways achieving goal 
one outcome uncertainty 
initial 

 available car   
 loc s  b   package at location   
 loc s  a   package at location   
 and  is car car     is car car     location location   
 location location    

step

        ask about package 
 know if  package at location    
      location location   
 know if  package at location    
      location location   

step

        decide loc s 
 and  package at

 and  package at

      know if
      know if

location   
      loc s  b 
location   
      loc s  a 
 package at location    
 package at location    

step

        drive car   location   
 at location   
      available car   

yes   loc s  a 

step

        drive car   location   
 at location   
      available car   

yes   loc s  b 

goal 

 and  at  loc   package at  loc  

   

fiplanning contingencies  decision based approach

goal

yes   loc s  b 
      at location   
      package at location   

goal

   loc s  a 
yes   loc s  a 

      at location   
      package at location   

   loc s  b 

complete 

a   fetching another package

plan figure    discussed section        two sources uncertainty two
decision steps  four possible ways achieving goal  one combination
outcomes two sources uncertainty 
initial 

step





 and

 car s  c    available
 car s  c    available
 loc s  b   package at
 loc s  a   package at
 is car car     is car
 location location    

car   
car   
location   
location   
car     location location   

        ask about car 

yes   loc s  b 

 know if  available car    
      is car car   
 know if  available car    
      is car car   
step

        decide car s 
yes   loc s  b 
 and  available car   

      car s  c  
 and  available car   

      car s  c  
      know if  available car    
      know if  available car    

step

        ask about package 

yes   car s  c  c  

 know if  package at location    
      location location   
 know if  package at location    
      location location   
step

        decide loc s 
 and  package at

 and  package at

      know if
      know if

yes   car s  c  c  
location   
      loc s  b 
location   
      loc s  a 
 package at location    
 package at location    

step

        drive car   location   

yes   loc s  a  car s  c  

   

fipryor   collins
   car s  c  
 at location   
      available car   
step

   car s  c  

        drive car   location   

yes   loc s  b  car s  c  
   car s  c  

 at location   
      available car   
step

   car s  c  

        drive car   location   

yes   loc s  a  car s  c  
   car s  c  

 at location   
      available car   
step

   car s  c  

        drive car   location   

yes   loc s  b  car s  c  
   car s  c  

 at location   
      available car   
goal 

   car s  c  

 and  at  loc   package at  loc  
goal
      at location   
      package at location   

yes   loc s  a  car s  c  
   car s  c  
   loc s  b 

      at location   
      package at location   

yes   loc s  b  car s  c  
   car s  c  
   loc s  a 

      at location   
      package at location   

yes   loc s  b  car s  c  
   car s  c  
   loc s  a 

      at location   
      package at location   

yes   loc s  a  car s  c  
   car s  c  
   loc s  b 

goal

goal

goal

complete 

a   tossing coin

section       described plan ending coin  decision plan
distinguish coin landing heads up tails up the decision rules
ambiguous 
initial 

 holding coin 

step

        toss coin 
 and  not  holding coin    on table  
      holding coin 

step

        inspect coin 
 and  know if  flat coin    know if  heads up  
 know if  tails up    know if  on edge   

   

fiplanning contingencies  decision based approach
step

        decide unk s 
 and  flat coin 

      unk s  h 
 and  flat coin 

      unk s  t 
 and  on edge 

      unk s  e 
      know if  flat coin  
      know if  on edge  

step

        tip coin 

yes   unk s  e 
   unk s  h t 

 flat coin 
      on edge 
goal 

   unk s  h t 

 flat coin 
goal
      flat coin 

yes   unk s  t 
   unk s  h e 

      flat coin 

yes   unk s  h 
   unk s  e 

      flat coin 

yes   unk s  e 
   unk s  h t 

goal

goal

complete 

a   tossing another coin
plan figure    two decisions unambiguous decision rules  four
ways achieving goal plan  two sources uncertainty 
initial 

 holding coin 

step

        toss coin 
 and  not  holding coin    on table   know if  flat coin  
 know if  heads up    know if  tails up    know if  on edge   
      holding coin 

step

        decide toss s 
 and  flat coin 
 heads up 

 and  on edge 

 and  flat coin 
 tails up 

      know if
      know if
      know if
      know if

step

      toss s  h 
      toss s  e 

      toss s  t 
 on edge  
 flat coin  
 tails up  
 heads up  

        tip coin 

yes   toss s  e 

   

fipryor   collins
   toss s  h 
 and  flat coin   know if  heads up    know if  tails up   
      on edge 
   toss s  h t 
step

        decide tip s 

yes   toss s  e 
   toss s  h 

 and  tails up 

      tip s 
 and  heads up 

      tip s 
      know if  tails up  
      know if  heads up  
step

        turn over 

 heads up 
      tails up 

   toss s  h e 

        turn over 

yes   toss s  e  tip s  t 
   toss s  h  tip s  h 
   toss s  h 

      flat coin 
 heads up 
      tails up 
goal 

h 
   toss s  h 
   toss s  h 
yes   toss s  t 
   toss s  e h 
   toss s  h e 

      flat coin 

step

t 

   toss s  h  tip s  h 

 and  flat coin   heads up  
goal
      flat coin 
      heads up 

yes   toss s  e  tip s  t 
   toss s  h 
   toss s  h  tip s  h 

      flat coin 
      heads up 

yes   toss s  e  tip s  h 
   toss s  h 
   toss s  h t  tip s  t 

      flat coin 
      heads up 

yes   toss s  t 
   toss s  h e 
   toss s  e h 

      flat coin 
      heads up 

yes   toss s  h 
   toss s  e 
   toss s  e 

goal

goal

goal

complete 

a   opening door
section       described plan opening locked door without key  depicted
figure     plan cassandra produces situation shown here  even
though preconditions pick step depend effect kick step  former
cannot performed lock broken result kicking door  decision rules
ect dependence 
   

fiplanning contingencies  decision based approach
initial 

 lock intact 

step

        kick 

step

        look 
 and  know if  locked    know if  lock intact  
 know if  foot broken   

step

        decide kick s 
 and   lock intact  

      kick s  f 
 and  not  locked  

      kick s  l 
      know if  locked  

step

        pick 

yes   kick s  f 
   kick s  l 

 not  locked  
      lock intact 
step

   kick s  l 

        open door 

yes   kick s  f 
   kick s  l 

 open 
      not  locked  
step

   kick s  l 

        open door 

yes   kick s  l 
   kick s  f 

 open 
      not  locked  
goal 

   kick s  f 

 open 
goal
      open 

yes   kick s  f 
   kick s  l 

      open 

yes   kick s  l 
   kick s  f 

goal

complete 

acknowledgements
thanks dan weld tony barrett supplying ucpop code  mark peot robert
goldman comments earlier drafts  fitzgerald many useful discussions 
anonymous reviewers constructive helpful criticism  much
work performed first author student institute learning
sciences  northwestern university  work supported part afosr
grant number afosr         def  institute learning sciences established
     support andersen consulting  part arthur andersen worldwide
organization  institute receives additional support ameritech north west
water  institute partners  ibm 
   

fipryor   collins

references

allen  j   hendler  j     tate  a   eds            readings planning  morgan kaufmann 
san mateo  ca 
ambros ingerson  j     steel  s          integrating planning  execution  monitoring 
proceedings seventh national conference artificial intelligence  pp       
st paul  mn  aaai   allen  hendler    tate        
barrett  a   soderland  s     weld  d  s          effect step order representations
planning  technical report           department computer science engineering  university washington  seattle 
chapman  d          planning conjunctive goals  artificial intelligence              
 allen et al         
collins  g  c          plan creation  using strategies blueprints  technical report
yaleu csd rr      department computer science  yale university 
collins  g     pryor  l          achieving functionality filter conditions partial
order planner  proceedings tenth national conference artificial intelligence  pp          san jose  ca  aaai 
collins  g     pryor  l          planning uncertainty  key issues  proceedings
fourteenth international joint conference artificial intelligence  pp       
     montreal  canada  ijcai 
draper  d   hanks  s     weld  d       a   probabilistic model action leastcommitment planning information gathering  proceedings tenth conference uncertainty artificial intelligence  pp          seattle  wa  morgan
kaufmann 
draper  d   hanks  s     weld  d       b   probabilistic planning information gathering contingent execution  proceedings second international conference
artificial intelligence planning systems  pp        chicago  il  aaai press 
drummond  m          situated control rules  proceedings first international
conference principles knowledge representation reasoning  pp         
toronto  morgan kaufmann 
etzioni  o   hanks  s   weld  d   draper  d   lesh  n     williamson  m          approach planning incomplete information  proceedings third international conference knowledge representation reasoning  pp          boston 
ma  morgan kaufmann 
feldman  j  a     sproull  r  f          decision theory artificial intelligence ii 
hungry monkey  cognitive science               allen et al         
fikes  r  e     nilsson  n  j          strips  new approach application
theorem proving problem solving  artificial intelligence               allen
et al         
   

fiplanning contingencies  decision based approach
golden  k   etzioni  o     weld  d          omnipotence without omniscience  ecient
sensor management planning  proceedings twelfth national conference
artificial intelligence  pp             aaai press 
goldman  r  p     boddy  m  s       a   conditional linear planning  proceedings
second international conference artificial intelligence planning systems  pp 
      chicago  il  aaai press 
goldman  r  p     boddy  m  s       b   representing uncertainty simple planners 
proceedings fourth international conference principles knowledge
representation reasoning  pp          bonn  morgan kaufmann 
haas  a  r          syntactic theory belief action  artificial intelligence     
        
haddawy  p     hanks  s          representations decision theoretic planning  utility
functions deadline goals  proceedings third international conference
principles knowledge representation reasoning  pp        boston  ma 
morgan kaufmann 
haddawy  p     suwandi  m          decision theoretic refinement planning using inheritance abstraction  proceedings second internatinal conference artificial
planning systems  pp          chicago  aaai press 
knoblock  c          planning  executing  sensing  replanning information gathering  proceedings fourteenth international joint conference artificial
intelligence  pp            montreal  ijcai 
kushmerick  n   hanks  s     weld  d          algorithm probabilistic planning 
artificial intelligence              
langley  p          systematic nonsystematic search strategies  proceedings
first international conference artificial intelligence planning systems  pp      
    college park  maryland  morgan kaufmann 
mcallester  d     rosenblitt  d          systematic nonlinear planning  proceedings
ninth national conference artificial intelligence  pp          anaheim  ca 
aaai 
mccarthy  j     hayes  p  j          philosophical problems standpoint
artificial intelligence  meltzer  b     michie  d   eds    machine intelligence    pp 
         edinburgh university press   allen et al         
mcdermott  d          critique pure reason  computational intelligence             
mcdermott  d          regression planning  international journal intelligent systems 
                available yale tr yaleu csd rr     
moore  r  c          formal theory knowledge action  hobbs  j  r     moore 
r  c   eds    formal theories commonsense world  ablex  norwood  nj 
 allen et al         
   

fipryor   collins
morgenstern  l          knowledge preconditions actions plans  proceedings
tenth international joint conference artificial intelligence  pp         
milan  ijcai 
olawsky  d     gini  m          deferred planning sensor use  proceedings
workshop innovative approaches planning  scheduling control  pp      
    san diego  ca  darpa 
pednault  e  p  d          extending conventional planning techniques handle actions
context dependent effects  proceedings seventh national conference
artificial intelligence  pp        st paul  mn  aaai 
pednault  e  p  d          adl  exploring middle ground strips
situation calculus  proceedings first international conference principles
knowledge representation reasoning  pp           morgan kaufmann 
pednault  e  p  d          generalizing nonlinear planning handle complex goals
actions context dependent effects  proceedings twelfth international
joint conference artificial intelligence  pp          sydney  australia  ijcai 
penberthy  j  s     weld  d  s          ucpop  sound  complete  partial order planner adl  proceedings third international conference knowledge
representation reasoning  pp          boston  ma  morgan kaufmann 
peot  m  a     smith  d  e          conditional nonlinear planning  proceedings
first international conference artificial intelligence planning systems  pp 
        college park  maryland  morgan kaufmann 
pryor  l          opportunities planning unpredictable world  technical report    
institute learning sciences  northwestern university 
pryor  l          decisions  decisions  knowledge goals planning  hallam  j   ed   
hybrid problems  hybrid solutions  proceedings aisb      frontiers artificial
intelligence applications  pp           ios press  amsterdam 
pryor  l     collins  g          information gathering planning task  position paper 
notes aaai workshop knowledge based construction probabilistic
decision models  pp          anaheim  ca  aaai 
pryor  l     collins  g          planning perceive  utilitarian approach  working
notes aaai spring symposium  control selective perception  pp         
stanford  ca  aaai 
pryor  l     collins  g          cassandra  planning contingencies  technical report     institute learning sciences  northwestern university 
sacerdoti  e          structure plans behavior  american elsevier  new york 
schoppers  m  j          universal plans reactive robots unpredictable environments 
proceedings tenth international joint conference artificial intelligence 
pp            milan  ijcai 
   

fiplanning contingencies  decision based approach
steel  s          knowing how  semantic approach  hallam  j   ed    hybrid problems 
hybrid solutions  proceedings aisb      frontiers artificial intelligence
applications  pp           ios press  amsterdam 
stefik  m       a   planning constraints  molgen  part     artificial intelligence 
              allen et al         
stefik  m       b   planning constraints  molgen  part     artificial intelligence 
            
sussman  g  j          computer model skill acquisition  american elsevier  new
york 
tate  a          using goal structure direct search problem solver  ph d  thesis 
university edinburgh 
tate  a          generating project networks  proceedings fifth international
joint conference artificial intelligence  pp          cambridge  ma  ijcai 
 allen et al         
warren  d          generating conditional plans programs  proceedings
summer conference artificial intelligence simulation behaviour  pp 
        edinburgh  aisb 
wilkins  d  e          practical planning  extending classical ai planning paradigm 
morgan kaufmann  san mateo  ca 

   


