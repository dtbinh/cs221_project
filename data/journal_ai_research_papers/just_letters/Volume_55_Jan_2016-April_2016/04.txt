journal of artificial intelligence research                  

submitted        published      

knowledge representation in probabilistic
spatio temporal knowledge bases
francesco parisi

fparisi   dimes   unical   it

department of informatics  modeling 
electronics and system engineering
university of calabria  rende  italy

john grant

grant   cs   umd   edu

department of computer science and umiacs
university of maryland  college park  usa

abstract
we represent knowledge as integrity constraints in a formalization of probabilistic spatiotemporal knowledge bases  we start by defining the syntax and semantics of a formalization called
pst knowledge bases  this definition generalizes an earlier version  called spot  which is a
declarative framework for the representation and processing of probabilistic spatio temporal data
where probability is represented as an interval because the exact value is unknown  we augment
the previous definition by adding a type of non atomic formula that expresses integrity constraints 
the result is a highly expressive formalism for knowledge representation dealing with probabilistic spatio temporal data  we obtain complexity results both for checking the consistency of pst
knowledge bases and for answering queries in pst knowledge bases  and also specify tractable
cases  all the domains in the pst framework are finite  but we extend our results also to arbitrarily
large finite domains 

   introduction
recent years have seen a great deal of interest in tracking moving objects  this is a fundamental
issue for many applications providing location based and context aware services  such as emergency call out assistance  live traffic reports  food and drink finder  location based advertising  mobile tourist guidance  pervasive healthcare  and analysis of animal behavior  ahson   ilyas       
petrova   wang        karimi         such innovative services are becoming so widely diffused
that marketsandmarkets forecasts that the location based services market will grow from      
billion in      to        billion in       marketsandmarkets        
an important aspect of the systems providing location based and context aware services is that
they need to manage spatial and temporal data together  for this reason  researchers have investigated in detail the representation and processing of spatio temporal data  both in ai  cohn  
hazarika        gabelaia  kontchakov  kurucz  wolter    zakharyaschev        yaman  nau 
  subrahmanian            a  knapp  merz  wirsing    zappe        and databases  agarwal 
arge    erickson        pelanis  saltenis    jensen         however  in many cases the location
of objects is uncertain  such cases can be handled by using probabilities  parker  yaman  nau   
subrahmanian      b  tao  cheng  xiao  ngai  kao    prabhakar         sometimes the probabilities themselves are not known exactly  indeed  the position of an object at a given time is estimated
by means of a location estimation method such as proximity  where the location of an object is
derived from its vicinity to one or more antennas   fingerprinting  where radio signal strength meac
    
ai access foundation  all rights reserved 

fiparisi   g rant

surements produced by a moving object are matched against a radio map that is built before the
system is working   and dead reckoning  where the position of an object is derived from the last
known position  assuming that the direction of motion and either the speed or the travelled distance
are known   ahson   ilyas        karimi         however  since location estimation methods have
limited accuracy and precision  what can be asserted is that an object is at a given position at a
given time with a probability whose value belongs to an interval  the spot  spatial probabilistic temporal  framework was introduced by parker  subrahmanian  and grant      a  to provide
a declarative framework for the representation and processing of probabilistic spatio temporal data
with probabilities that are not known exactly 
the spot framework is able to represent atomic statements of the form object id is was will
be inside region r at time t with probability in the interval     u   this allows the representation
of information concerning moving objects in several application domains  a cell phone provider
is interested in knowing which cell phones will be in the range of some towers at a given time and
with what probability  bayir  demirbas    eagle         a transportation company is interested
in predicting the vehicles that will be on a given road at a given time  and with what probability 
in order avoid congestion  karbassi   barth         finally  a retailer is interested in knowing the
positions of the shoppers moving in a shopping mall in order to offer suitable customized coupons
on discounts  kurkovsky   harihar        
the framework introduced by parker et al       a  was then extended by parker  infantes  subrahmanian  and grant        and grant  parisi  parker  and subrahmanian        to include the
specific integrity constraint that  for a given moving object  only some points are reachable from a
given starting point in one time unit  this captures the scenario where objects have speed limits and
only some points are reachable by objects depending on the distance between the points  however 
even such an extended spot framework is not yet general enough to represent additional knowledge concerning the movements of objects  examples of knowledge we may be aware of but cannot
represent in the spot framework are  for instance  the fact that
 i  there cannot be two distinct objects in a given region in a given time interval  as it happens
during airport passenger screening  
 ii  some object cannot reach a given region starting from a given location in less than a given
amount of time  as happens for the vehicles whose route options as well as their speed are
limited  
 iii  an object can go away from a given region only if it stayed there for at least a given amount of
time  as happens in production lines where assembling several parts requires a given amount
of time  
to overcome such limitation and allow this kind of knowledge to be represented  we define probabilistic spatio temporal  pst  knowledge bases  kbs  consisting of atomic statements  such as
those representable in the spot framework and spatio temporal denial  abbreviated to std  formulas  a general class of formulas that account for all the three cases above  and many more  including
the reachability constraint of parker et al         grant et al         
the focus of this paper is the systematic study of knowledge representation in probabilistic
spatio temporal data  we start by defining the concept of a pst kb and provide its formal semantics  which is given in terms of worlds  interpretations  and models  section     we define the
concept of a consistent pst kb  and characterize the complexity of checking consistency  showing
   

fik nowledge r epresentation in p robabilistic s patio  t emporal k nowledge bases

that it is np complete in general  and even in the presence of binary std formulas only  section    
then we present a sufficient condition for checking consistency that relies on the feasibility of a
set of mixed binary linear inequalities  section       and a necessary condition using instead a set
of linear inequalities  section       after showing that the special case of unary std formulas is
tractable  section       we deal with the restricted but expressive class of binary std formulas and
identify cases where the consistency checking problem is tractable  section       we then address
the problem of answering selection queries in pst kbs under both the optimistic and the cautious
semantics  section     we show that checking consistency can be exploited to answer such kinds of
queries in pst kbs  and characterize the complexity of the query answering problem  section      
after that  we derive several sets of linear inequalities for answering queries  section       finally 
we extend the framework to the case where time  space  and the number of objects are increased to
arbitrarily large finite domains  and show that each pst kb is either eventually consistent or eventually inconsistent  section     we then discuss related work  section     section   summarizes the
paper  we also suggest research projects in section   

   the pst framework
this section introduces the syntax and semantics of pst kbs generalizing the spot framework introduced by parker et al       a  and further extended by parker et al         and grant et al         
basically  we define a pst kb by augmenting the previous framework with non atomic formulas
 i e   spatio temporal denial formulas  that represent integrity constraints  this way we can make
statements whose meaning is that certain object trajectories cannot occur 
    syntax
we assume the existence of three types of constant symbols  object symbols  time value symbols 
and spatial region symbols  the constants are in id    id            idm    t                  tmax 
 where tmax is an integer   and the set of r  space    p            pn    each r is a region of space 
we apply the unique name assumption  so  for instance idi and idj for i    j are different objects 
similarly  pi and pj for i    j are different points  we also use variables for each type  object
variables  time variables  and spatial variables 
a spatio temporal atom  st atom  for short  is an expression of the form loc x  y  z   where 
 i  x is an object variable or a constant id  id 
 ii  y is a space   variable or a constant r  space 
 iii  z is a time variable or a constant t in t  
we say that st atom loc x  y  z  is ground if all of its arguments x  y  z are constants  for instance  loc id  r  t   where id  id  r  space  and t  t is a ground st atom  the intuitive
meaning of loc id  r  t  is that object id is was will be inside region r at time t 
definition    pst atom   a pst atom is a ground st atom loc id  r  t  annotated with a probability
interval     u           with both   and u rational numbers   and denoted as loc id  r  t     u  
   we write space to refer to the set of points used in a pst kb  we write space to refer to the spatial aspect of
probabilistic spatio temporal knowledge 

   

fiparisi   g rant

 

loc id    c           
loc id    a            
loc id    b            
loc id    d            
loc id    e            
loc id    b            
loc id    c            
loc id    d             
loc id    d             

 
 

e
c

 

d

 
 

b

 

a

 
 

 

 

 

 

 

 

 

 a 

 b 

figure     a  a map of an airport area  names of regions are on their bottom right corner  
pst atoms 

 b 

intuitively  the pst atom loc id  r  t     u  says that object id is was will be inside region r at
time t with probability in the interval     u   hence  pst atoms can represent information about the
past and the present  but also information about the future  such as from methods for predicting the
destination of moving objects  mittu   ross        hammel  rogers    yetso        southey  loh 
  wilkinson         or from querying predictive databases  akdere  cetintemel  riondato  upfal 
  zdonik        parisi  sliva    subrahmanian        
in the original spot definition  for ease of implementation  space was a grid within which
only rectangular regions were considered  however  in our general framework  space is arbitrary
and a region is any nonempty subset of space  still  for convenience we use such rectangular
regions in our running example 
example    consider an airport security system which collects data from biometric sensors as
well as from bluetooth or wifi enabled devices  biometric data such as faces recognized by sensors  li   jain        are matched against given profiles  such as those of checked in passports 
or of wanted criminals   similarly  device identifiers  e g   mac addresses  recognized in the areas
covered by network antennas are matched against profiles collected by the airport hotspots  such as
logins  possibly associated with passport numbers   a simplified plan of an airport area is reported
in figure   a   where regions a  b  c  d  e covered by sensors and or antennas are highlighted  once
entered in this area  passengers typically move through the path delimited by queue dividers  represented by dotted lines in the figure  and overlapping with regions a and b   and reach the room on
the upper half right side where security checks are performed  region c is included in this room  
next  passengers can spend some time in the hall room  overlapping with region d   and finally go
towards the exit  near region e  
suppose that the security system uses the spot framework to represent the information where
every pst atom consists of the profile id resulting from the matching phase  the region where the
sensor antenna recognizing the profile is operating  the time point at which the profile is recognized 
and the lower and upper probability bounds of the recognizing process  for instance  pst atom
loc id    c            says that a profile having id id  was in region c at time   with probability in the
   

fik nowledge r epresentation in p robabilistic s patio  t emporal k nowledge bases

interval          the high accuracy sensors used at security check points located in region c entail
a narrow probability interval with upper bound equal to     atom loc id    a             says that
id  was recognized in region a at the earlier time   with probability in           assume that the
information is represented as the set of atoms in figure   b   which includes the two atoms above 
 
pst atoms can be used to represent the output of a process aimed at tracking objects on the basis
of sensor measurements  generally  sensors are characterized by a likelihood function providing the
conditional probability of obtaining a measurement given the value of a parameter   such as the
distance between the tracked object and the sensor  for instance  the likelihood function l   can
represent the probability of detecting an object that has a distance of  meters from the sensor
position  however  a likelihood function is generally not a probability distribution when viewed as
a function of   we may have l           l           l           and l            with distances
            this information can be encoded by using pst atoms loc id  ri   t  l i    l i    for
each region ri determined by the distance i  more general probability intervals can be used if the
likelihood values are not know exactly    however  several object tracking techniques combine the
information of the likelihood function with the prior position distribution to obtain a probability
distribution over space  pst atoms can represent this kind of information by defining a pst atom
with a single probability for each point in space    we refer the reader to the related work section
for a detailed discussion on object tracking techniques and the relationship with our framework 
although pst atoms express much useful information  they cannot express additional knowledge that integrity constraints can provide  in this paper we add integrity constraints to the original
pst framework to form pst kbs  the integrity constraints have the form of spatio temporal denial formulas  std formulas for short   we will soon see that such formulas are expressive enough
to capture a large set of conditions  basically  an std formula is a universally quantified negation of
conjunctions of st atoms and built in predicates  we note that std formulas are related to a subclass
of the first order formulas introduced by doder  grant  and ognjanovic         except that they
 the std formulas  allow built in predicates as well  in any case  the focus of doder et al  is the
axiomatization of various probabilistic spatio temporal logics 
definition    std formula   an std formula is an expression of the form
k


  
loc xi   yi   zi     x    y    z 
 x  y  z 
i  

where 
 x is a set of object variables  y is a set of space variables  and z is a set of time variables 
 loc xi   yi   zi    with i      k   are st atoms  where the xi   yi   zi may be variables or constants of the appropriate type  such that  if xi  resp   yi   zi   is a variable  then it occurs
in x  resp  y  z   moreover  each variable in x  y  and z occurs in at least one st atom
loc xi   yi   zi    with i      k  
   we note that pst kbs resulting from pst atoms encoding information provided by the likelihood function may be
inconsistent because of the fact that the likelihood function need not be a probability distribution  this will turn out
to be clearer after introducing the formal semantics of pst kbs in section     
   pst kbs resulting from pst atoms encoding the output of tracking turn out to be consistent 

   

fiparisi   g rant

  x  is a conjunction of built in predicates of the form xi  xj   where xi and xj are either
variables occurring in x or ids in id  and  is an operator in         
  y  is a conjunction of built in predicates of the form yi  yj   where yi and yj are either
variables occurring in y or regions  i e   non empty subsets of space   and  is a comparison
operator in         ov  nov   where ov stands for overlaps and nov stands for does not
overlap  
  z  is a conjunction of built in predicates of the form zi  zj where each zi and zj is either
a time value in t or a variable in z that may be followed by  n where n is a positive integer
and  is an operator in              
example    in our running example  in region c security checks on one individual at a time are
performed  the constraint there cannot be two distinct objects in region c at any time between  
and    can be expressed by the following std formula 
f    x    x    z   loc x    c  z     loc x    c  z     x     x   z          z    
due to the distance and the several obstacles between the entrance and the exit  we also have
the constraint no object can reach region e starting from region a in less than    time units  that
can be expressed as 
f    x    z    z   loc x    a  z     loc x    e  z     z    z   z    z        
moreover  as the security check on each individual takes at least   time units  we know that
object id can go away from region c only if it stayed there for at least   time units  that can be
expressed as 
f    y    y    z    z    z   loc id  y    z     loc id  c  z     loc id  y    z     y  nov c  y  nov c 
z    z       z    z   z       z    
 
in our work later it will be useful to distinguish std formulas based on the number  k  of statoms in them  in particular  unary std formulas have k     and binary std formulas have k     
in example   above f  and f  are binary std formulas while f  is a ternary std formula 
in the initial spot framework  parker et al       a  only pst atoms were considered  moreover  it was assumed that all points in space are reachable from all other points by all objects  to
overcome this limitation  grant et al         extended the spot framework by introducing reachability definitions  a reachability atom is written as reachableid  p  q  where id  id is an object
id  and p  q  space  intuitively  the reachability atom says that it is possible for the object id
to reach location q from location p in one unit of time  hence  what is reachable in one time unit
depends not only on the locations p and q  but also the object id  as we now show  reachability can
be expressed in our formalism as an integrity constraint  however  in order to formulate reachability
in our framework of denial formulas  we need to deal with what is not reachable  rather than what
is reachable 
example    let r be the region consisting of all points q that are not reachable from p in one time
unit  the corresponding std formula is 
x    z    z   loc x     p   z     loc x    r  z     z    z       
 
this integrity constraint is used only if not all points are reachable from p in one time unit  we
can also express which points can not be reached from p in any number of time units  not just    by
changing z      to z    i 
   

fik nowledge r epresentation in p robabilistic s patio  t emporal k nowledge bases

example    in our running example  the following std formula states that the points in region
r     x  y     x     y       i e   those close to the upper side of the wall dividing the hall
room and the one where there are queue dividers  are not reachable in less than   time units from
any point in r      x  y     x     y       i e   the points close to the other side of that wall  
f    x    z    z   loc x    r    z     loc x    r  z     z    z   z    z       
 
we are now ready to formally define pst kbs 
definition    pst kb   given the sets id  t   and space  a pst kb k is a pair ha  fi  where
a is a finite set of pst atoms and f is finite set of std formulas using object symbols in id  time
values in t   and spatial regions consisting of sets of points in space 
example    in our running example  id    id    id     t            space is the set of points  x  y 
such that    x    and    y     and pst kb kex is the pair haex   fex i  where aex is the
set consisting of the pst atoms in figure   b   and fex is the set  f    f    f    f    of std formulas
defined in examples   and   
 
    semantics
the semantics of a pst kb is defined through the concept of worlds  before introducing this
concept  we define ground std formulas 
given an std formula f having the form in definition    we denote by f the set of all substitutions of variables in x  y  and z with constants in id  s  and t   respectively  where s
is the set of all subsets of space that contain a single point    moreover  given substitution
  f   we denote as  f   the ground std formula resulting from applying  to f    f    


 vk

i   loc  xi     yi     zi       x      y      z     the ground conjunction
of built in predicates   x      y      z   evaluates to either true or false  when it is true
we omit it  so  f   is either the negation of a conjunction of ground st atoms or the truth value true
 when the conjunction of built in predicates evaluates to false  
example    consider the formula f    x    x    z   loc x    c  z   loc x    c  z   x     x  
z          z    introduced in example    and the substitution     x   id    x   id    z      
where id    id   id and    tmax  thus   f       loc id    c      loc id    c       where the
conjunction of ground built in predicates id     id                evaluating to true  is not
reported in  f    
 
definition    world   a world w is a function  w   id  t  space 
basically  a world w specifies a trajectory for each id  id  that is  for each id  id  w says
where in space object id was is will be at each time t  t   in particular  this means that an object
can be in only one location at a time   however  a location may contain multiple objects  it is easy
to see that world w can be represented by the set  loc id   p   t   w id  t    p  of ground st atoms 
   we use only such singleton subsets of space in order to reduce the number of possible instantiations of variables y
from exponential to linear in the size of space  without serious effect on the meanings of the std formulas 
   in some examples it may be useful to allow objects to enter or leave the space under consideration  this can be
accomplished  for instance  by having one or more external points outside of the space where objects may be located 
to simplify matters we assume that space contains all these points 

   

fiparisi   g rant

example    world w  describing the trajectories of id  and id  for time units in         is such
that w   id    t           for t          w   id    t           for t          w   id    t           for
t           w   id    t           for t            w   id    t           for t            w   id    t   
       for t           w   id    t           for t            w   id    t           for t           
w   id    t           for t           
 
definition    satisfaction   given a world w and a ground st atom a   loc id  r  t   we say that w
satisfies a  denoted
 r  moreover  we say that w satisfies a conjunction of
vk as w    a  iff w id  t  v
ground st atoms i   ai  denoted as w    ki   ai   iff w    ai i      k   finally  world w satisfies
std formula f  denoted as w    f   iff for each substitution   f   w     f   
note that  as there is a negation in front of f   w     f   iff w does not satisfy a ground st atom
in  f   or the conjunction of ground built in predicates in  f   evaluates to false 
example    world w  of example   satisfies the st atom loc id    b      as w   id               
belongs to region b  see figure   a    moreover  w      loc id    b      loc id    e       as w     
loc id    e       since w   id                   e 
 
in the following  we will denote as w k  the set of all worlds of the pst kb k  moreover  in
order to simplify formulas  we will assume that w ranges over w k  
an interpretation i for a pst kb k is a probability distribution function  pdf  over w k  
that is  a function assigning a probability value to each world in w k   i w  is the probability that
w describes the actual trajectories of all the objects   some interpretations are models of k in which
case we write m instead of i 
definition    model   a model m for a pst kb k   ha  fi is an interpretation for k such that 
p
m  w       u  
  loc id  r  t     u   a 
w   w  loc id r t 

  f  f 

p

m  w      

w   w   f

the first condition in the definition above means that  for each atom a   loc id  r  t     u   a 
the sum of the probabilities assigned by m to the worlds satisfying the st atom loc id  r  t  have to
belong to the probability interval     u  specified by a  the second condition means that every world
not satisfying a formula f  f must be assigned by m probability equal to   
example    let w  be the world introduced in example    let w  be as w  except that w   id        
        and let w  be as w  except that w   id                 w   id    t           for t            let
m be such that m  w         m  w         m  w          and m  w      for all the other worlds in
w kex    it can be checked that m satisfies both conditions of definitionp  for the pst kb kex of
our running example  for instance  for atom loc id    a              aex   w w  loc id   a    m  w   
m  w                    note that  at time    w   id         w   id                that is not in region a  
moreover  it is easy to check that w    w    w  satisfy every std formula in fex   thus  m is a model
for kex  
 
we say that pst kb k is consistent iff if there is a model for it  the set of models for k will
be denoted as m k  
   as a pdf  i w  is non negative and sums to   over worlds 

   

fik nowledge r epresentation in p robabilistic s patio  t emporal k nowledge bases

definition    consistency   pst kb k is consistent iff m k      
example     pst kb kex of our running example is consistent  as there exists the model m of
example   for it 
 

   checking the consistency of pst kbs
in this section  we address the fundamental problem of checking the consistency of pst kbs 
given a pst kb k   ha  fi  the consistency checking problem is deciding whether m k      
that is  whether there is a model for k 
in section     we show that the consistency checking problem is np complete  our goal in the
rest of this section is to find more efficient ways to determine consistency  in section     we find a
sufficient condition using a set of mixed binary linear inequalities  then  in section     we find a
necessary condition using a different set of linear inequalities  we deal with the special case where
all the std formulas are unary in section      finally we investigate in detail the case where the
std formulas are either unary or binary in section     
for our complexity analysis we take the size of a pst kb k   ha  fi  whose pst atoms and
std formulas are built from the constants in id  t   and space  as the number of pst atoms and
std formulas in k plus the number of items in id  t   and space  that is   k     a     f     id   
 t      space  
    checking consistency is np complete
before considering the case of general pst kbs  we first note that the consistency checking problem was addressed in the initial spot framework of parker et al       a  where only pst atoms
were considered  this is the special case of our pst kb concept where f     it was shown there
that the consistency of a pst kb k   ha  i  using our notation  can be checked in polynomial
time w r t  the size of k by solving a set of linear inequalities whose variables vid t p represent the
probability that object id is at point p at time t 
the reason for presenting the result of parker et al  is twofold  first  we compare the complexity
of the consistency checking problem for general pst kbs with that of the initial spot framework 
second  we use it to prove some tractability results for pst kbs 
fact    parker et al    let k   ha  i be a pst kb  where the set of std formulas is empty   then
k is consistent iff there is a feasible solution of cc k   where cc k  consists of the following
 in equalities 
p
     loc id  r  t     u   a    
vid t p  u 
pr

     id  id  t  t  

p

vid t p     

pspace

     id  id  t  t  p  space  vid t p    
basically  inequalities     ensure that a solution of cc k  places the object in r with a probability between   and u  as required by the atom  id  r  t      u    inequalities     and     ensure that
for each id and t  the vid t p variables jointly represent a probability distribution  fact   is correct
because every model m for k corresponds to a solution  for cc k  such that the sum of the
   

fiparisi   g rant

probabilities assigned by m to the worlds for k satisfying an st atom loc id   p   t  is equal to the
value assigned to variable vid t p by  
now we state our first result  the consistency checking problem is np complete 
theorem    given a pst kb k   ha  fi  deciding whether k is consistent is np complete 
proof   membership   we show that checking the consistency of k can be reduced to deciding an
instance k of  an extension to  the probabilistic satisfiability  psat  problem  hailperin       
nilsson         which is in np  georgakopoulos  kavvadias    papadimitriou         given a set of
m clauses c            cm   each of them consisting of a disjunction of one or more literals constructed
from the propositional variables x            xn   and probability values pr c             pr cm   for each
clause  psat is the problem of deciding whether there is a probability distribution  over the set of
the  n truth assignments for the propositional variables x            xn such that for each clause ci   the
sum of the probabilities assigned by  to the truth assignments satisfying ci is equal to pr ci    with
i      m   psat is a generalization of sat  which is obtained from psat by assigning probability
equal to one to each clause  georgakopoulos et al  formulated psat in terms of the feasibility of
a system of m     linear equations using  n variables corresponding to the probabilities assigned
by  to truth assignments  to show the existence of polynomial size witness  the following result
from linear programming theory was exploited by georgakopoulos et al   if a system of  linear
equalities has a feasible solution  then it admits at least one feasible solution with at most  nonzero variables  papadimitriou   steiglitz         in what follows we consider an extension to
psat where each clause ci is associated with a probability interval  pr   ci    pru  ci     instead
of a single value  the membership in np for this extension straightforwardly follows from the
membership proof provided by georgakopoulos et al  for psat  as using probability intervals can
be still formulated as the linear system introduced by georgakopoulos et al  after reducing doublesided inequalities to equalities with single bounded slack variables  jaumard  hansen    de aragao 
      
given a pst kb k   ha  fi  we define an instance k of psat where each clause is associated with a probability interval  let u be the set of all propositional variables xid p t such that
id  id  p  space  and t  t  i e   each st atom loc id   p   t  corresponds to propositional
variable xid p t  u    the conjunction k of clauses associated with probability intervals is defined
as follows 
w
 for each pst atom a   loc id  r  t     u   a  k consists of the clause ca  
xid p t  
pr

the probability interval  pr   ca    pru  ca    is equal to     u  
 for each f  f and   f such that  f      

k
v

loc  xi     yi     zi      k consists of

i  

clause c f    

k
w
i  

x xi    yi    zi     whose probability interval is        

 for each id  id and t  t   k consists of the clause cid t  

w

xid p t   whose

pspace

probability interval is        
 for each id  id  t  t   and pi   pj  space  with pi    pj   k consists of the clause
cid t pi  pj   xid pi  t  xid pj  t whose probability interval is        
   

fik nowledge r epresentation in p robabilistic s patio  t emporal k nowledge bases

it is easy to see that for each world w  w k   there is a truth assignment w for the variables
in u such that w  xid p t   is true iff w id  t    p  however  there are truth assignments which do
not correspond to any world in w k   for instance  those where both   xid pi  t   and   xid pj  t   
with pi    pj   are true   we now show that k is consistent iff k is satisfiable 
   given a model m for k  we show that there is a pdf  over the set of truth assignments such
that for each clause c of k   the sum of the probabilities assigned by  to the truth assignments
satisfying c belongs to  pr   c   pru  c    let  be such that for each truth assignment w corresponding to a world w  w k    w     m  w  and         for all other truth assignments  not
corresponding to a world  it is easy to check that the conditions of definition   entail that clauses
of the form ca and c f   are satisfied by   and clauses of the form cid t and cid t pi  pj are satisfied
as well since only w          w w k   may have been assigned by  a probability different from   and
every world w  w k  by definition assigns exactly one point in space to each id  t pair 
   let  be a pdf over the set of truth assignments such that for each clause c of k   the sum
of probabilities assigned by  to the truth assignments satisfying c belongs to  pr   c   pru  c   
a model m for k can be defined as m  w     w   where  is the truth assignment corresponding to world w  w k   since the clauses of the form cid t  resp   cid t pi  pj   are satisfied by
  all truth assignments  such that   xid p t   false for all p  space  resp     xid pi  t   true and
  xid pj  t   true  with pi   pj  space  pi    pj   are assigned by  probability    hence  all other
truth assignments correspond to a world  and the fact that the clauses of the form ca and c f   are
satisfied by  entails that the conditions of definition   hold 
 hardness   we show a reduction to our problem from the np hard hamiltonian path problem  papadimitriou         that is  the problem of checking whether there is a path  in a directed graph g
such that  visits each vertex of g exactly once 
given a directed graph g   hv  ei  where v    v            vk   is the set of its vertices  and e
is a set of pairs  vi   vj   with vi   vj  v   we construct an instance of our problem as follows  let
id    id   space   v   and t               k   k is the pair ha  fi such that a consists of the pst
atom loc id   v              and f consists of std formulas f i  with i      k   and f  such that 
 f i   z    z   loc id   vi    z     loc id  space v     z     z    z       where v   is the
set of vertices vj s t   vi   vj    e  this formula says that the only points id can reach starting
from vi in one time step are those in v      f i does not exist if v     space  
 f    y    z    z   loc id  y    z     loc id  y    z     z     z     saying that id can not be at
the same location for distinct time values 
we show that k is consistent iff there is a hamiltonian path in g 
   as there is only one id in a  every world w  w k  is such that w places id on a vertex
in v at each time value t  t   as k is consistent  there is a model m  m k  such that m
assigns probability greater than zero only to worlds w such that f  f  w    f   in particular 
let w be one such world  the fact that w    f i entails that t      k      w id  t    vi and
w id  t        vj iff  vi   vj    e  moreover  the fact that w    f  entails that t  t       k   t    t   
w id  t     w id  t     meaning that id is never placed by w on the same vertex at different time
units  since loc id  v              a  every world which is assigned probability greater than zero
by m is such that w id       v    it follows that every world w  w k  which is assigned by
m  m k  a probability greater than zero encodes a hamiltonian path of g whose first vertex is
v    in fact  w  w k  such that m  w      the following properties hold   i  w id       v   
   

fiparisi   g rant

 ii  t      k      w id  t    vi   w id  t        vj iff  vi   vj    e   iii  t  t       k   t    t   
w id  t     w id  t     conditions  i  and  ii  entail that    w id      w id              w id  k  is a
path on g starting from vertex v    while condition  iii  entails that each vertex v  v occurs exactly
once in  
   let  be a hamiltonian path of g  we denote by  i   with i      k   the i th vertex of  
w l o g  we assume that the first vertex of  is v    that is        v    we now show that k is
consistent by finding a model for it  let m be a function over w such that for all worlds w  w 
m  w       except for the world w which is such that  w  id             v    t      k  
w  id  t     t   it is easy to see that w    f  in fact  for each i      k   f i is satisfied by w   since
the fact that  is a path on g entails that t      k     w  id  t    vi and w  id  t      vj only if
edge  vi   vj   is an edge of g  moreover  f  is satisfied by w   since the fact that  is a hamiltonian
path entails that w places id on different locations  i e   vertices of g  at different times  since

w
ap
probability different from    let m  w        therefore  as
p    f  it can be assigned by m

w w  loc id v      m  w    m  w    w w  w w  loc id v      m  w       the condition required by
atom loc id  v              a holds too  thus  m is a model for k 
we note that np hardness holds already for binary std formulas  in section     we will find
conditions that make the consistency checking problem tractable for binary std formulas  the reduction shown in the membership proof  from the consistency checking problem to psat  would
allow us to define additional tractable cases if the psat instances resulting from such a reduction
were tractable  however  as will be discussed in section    the tractable cases that have been identified for psat  georgakopoulos et al         andersen   pretolani        do not carry over to our
framework 
    sufficient condition for checking consistency
we present a set of mixed binary linear inequalities whose feasibility entails the consistency of pst
kb k   ha  fi  as explained in section      parker et al       a  showed that the consistency
of a pst kb k   ha  i  using our notation  can be checked in polynomial time w r t  the size of
k by solving a set of linear inequalities whose variables vid t p represent the probability that object
id is at point p at time t  here  we start from this set of linear inequalities and augment it with
some inequalities ensuring that if the so obtained set of linear inequalities has a feasible solution
then every ground std formula derived from f is satisfied  to achieve this  we need to introduce the
binary variables i   thus obtaining a set of mixed binary linear inequalities 
definition    mbl k    let k   ha  fi  mbl k  consists of the following  in equalities 
p
     loc id  r  t     u   a    
vid t p  u 
pr

     id  id  t  t  

p

vid t p     

pspace

     id  id  t  t  p  space  vid t p    
    for each f  f and   f such that  f      

k
v
i  

number of st atoms in f   the  in equalities 
   

loc  xi     yi     zi      where k is the

fik nowledge r epresentation in p robabilistic s patio  t emporal k nowledge bases

p
 a  i      k   
p yi   v xi    zi   p  i  
pk
 b 
i   i   k    
 c  i      k    i         
basically  inequalities     ensure that a solution of mbl k  places the object in r with a probability between   and u  as required by the atom  id  r  t      u    inequalities     and     ensure
that for each id and t  the vid t p variables jointly represent a probability distribution  moreover  for
each ground st atom loc  xi     yi     zi    of the ground std formula  f    inequalities     a 
and     c  entail that the probability v xi    zi   p that object  xi   is in any point p in region  yi  
at time  zi   is either constrained to be   or free to take any value not greater than    intuitively
enough  if v xi    zi   p is enforced to be zero  i e   i       then object  xi   can not be in region
 yi   at time  zi    on the other hand  if v xi    zi   p is left free to take any value less than or
equal to one  i e   i       then  xi   may or may not be in region  yi   at time  zi    finally 
equality     b  entails that there is at least one of the k ground st atoms loc  xi     yi     zi    of
 f   such that  xi   is not placed in a point in  yi   at time  zi   
example     consider the ground std formula  f       loc id    c      loc id    c      of example    then  the inequalities in mbl k  corresponding to  f    are 
p
p
  b            
  c                
 
  a  pc vid     p     
pc vid     p     
the following theorem states that mbl k  can be used to check if k is consistent 
theorem    if there is a feasible solution of mbl k  then k is consistent 
proof  let  be a solution of mbl k   and  vid t p   the value assigned to variable vid t p by
 
q we define the function m over w k  such that  for each world w  w k   m  w   
idid tt w id t  p  vid t p    that is m  w  is the product of the values assigned by solution
 to variables vid t p such that w id  t    p  it can be shown that   in equalities     and    
of the definition
of mbl k  entail that m is a pdf over w k   moreover 
since  vid t p   is
p
p
m
 w  
for
each
atom
loc id 
r 
t    
u 

a 
equal
to
w w  loc id r t  m  w   
p p w w  loc id t p 
p
pr
w w  loc id t p  m  w   
pr  vid t p        u   given f  f and   f such that  f  
vk
is logically equivalent to the negation of the conjunction of the st atoms
i   loc  xi     yi   
p
 zi     the inequalities     a c  entail that there is i      k  such that p yi    v xi    zi   p    
   thus p   yi     v xi    zi   p        hence  for each world w  w k  such that w  xi   
 zi      p  m  w      due to the presence of the factor
p  v xi    zi   p       in the product defining m  w   therefore  for each std formula f  f  w   w   f m  w       hence m is a model for
k and so k is consistent 
a consequence of theorem   is that well known techniques for solving linear optimization
problems can be adopted to address the consistency checking problem  thus taking advantage of
results from more than    years of research on integer linear programming  junger et al         
the following example shows that the converse of theorem   does not hold  k may be consistent even if there is no feasible solution of mbl k   
example     let id    id   t           space    p    p     and k   ha  fi where 
a    loc id   p                   loc id   p                   and
f     loc id   p         loc id   p         
   

fiparisi   g rant

thus  w    w    w    w    w    where  w   id       p    w   id       p    w   id       p    w   id      
p    w   id       p    w   id       p    w   id       p    w   id       p   
it is easy to check that the m for which m  w           m  w         m  w         m  w          is
a model for k  then mbl k  includes the following inequalities 
     vid   p             vid   p        vid   p    vid   p       vid   p    vid   p      
vid   p       vid   p                                
vid   p      vid   p      vid   p      vid   p     
the first two inequalities force both vid   p  and vid   p  to be      so in the second line both   and
  must equal    but this contradicts            hence mbl k  has no feasible solution 
 
    necessary condition for checking consistency
in the following  given a pst kb k  we introduce a set nc k  of linear inequalities such that if k
is consistent then there is a feasible solution of nc k   that is  the existence of a feasible solution
of nc k  turns out to be a necessary condition for the consistency of k 
as mbl k   see definition     nc k  uses rational variables vid t p representing the probability
that object id is at point p at time t  as no other kinds of variables are used in the definition of
nc k   in this case we obtain a pure system of linear inequalities 
definition    nc k    let k   ha  fi be a pst kb  nc k  consists of the following  in equalities 
p
vid t p  u 
     loc id  r  t     u   a    
pr

     id  id  t  t  

p

vid t p     

pspace

     id  id  t  t  p  space  vid t p    
v
    for each f  f  with k conjuncts  and   f s t   f       ki   loc  xi     yi     zi     
the inequalities 
pk
p    y     p    y             pk   yk   
i   v xi    zi   pi  k    
herein   in equalities         are the same as those of mbl k  of definition    and have the
same meaning  in addition 
v nc k  contains inequalities     which impose that  for each ground stdformula of the form  ki   loc idi   ri   ti   and for each k tuple of points hp    p            pk i belonging
respectively to the regions hr    r            rk i  the sum of the probabilities vidi  pi  ti that object idi is at
point pi at time ti   with i      k   is not greater than k     as stated in the following theorem  the
set consisting of inequalities     along with inequalities         turns out to have no feasible solution
only if the corresponding pst kb is inconsistent 
theorem    if there is no feasible solution of nc k   then k is not consistent 
proof  suppose that nc k  has no feasible solution  if this is due to the fact there is no feasible
solution of cc ha  i  introduced in fact     then pst kb ha  i is not consistent  and thus k  
ha  fi is not consistent as well  since the set m ha  fi  of the models for k   ha  fi is a subset
of the set m ha  i  of the models for k    ha  i  
otherwise  there is a feasible solution of cc ha  i  and thus nc k  has no feasible solution
due to the fact that at least one of the inequalities in item     of definition   is not satisfied by every
   

fik nowledge r epresentation in p robabilistic s patio  t emporal k nowledge bases

solution  for
v cc ha  i   that is  for each solution  for cc ha  i   there is a ground std  formula
 f      ki   loc  xi     yi     zi    such that there exist p    y     p    y             pk 
p
 yk    for which ki    v xi    zi   pi     k    
since every model m   for k    ha  i corresponds to a solution  for cc ha  i  such that the
sum of the probabilities assigned
by m   to the worlds satisfying an st atom loc id   p   t  is equal
pk
to  vid t p    the fact that i    v xi    zi   pi     k    holds entails that  for each model m   for
k    the sum of the probabilities assigned by m   to the worlds satisfying at least one of the st atoms
in  f   is greater than k     that is 
m    m k    

k
x

x

m    w    k   

   

i   w  loc  xi    yi    zi   

we now recall and use the following well known result on the minimum probability of a conjunction of probabilistic events among which no correlation is known  given n probabilistic events
e            en whose  marginal 
probabilities are pr e             pr en   respectively  pr e       en   
p
max        n   ni   pr ei     this is one of the frechet inequalities  the other one provides an
upper bound on the maximum probability  and is implicitly reported already in booles work        
in our setting  viewing st atoms as probabilistic events  the frechet inequality entails that for
each model m   for k    the probability that a set s of st atoms together satisfy a world is greater
than or equal to the maximum between zero and     s  plus the sum of the probabilities of each
st atom a  s according to m     that is 


x
w k   

w
a  s  w    a


x

m    w   max        s   


x
w k    

as w 
w    a



m    w 


   

equation     entails that for each model m   for k    the term on the right hand side of equation     evaluates to a value greater than zero when the set s of st atoms of  f   is considered 
therefore  for each model m   for k    the sum of the probabilities of the worlds satisfying all the
st atoms in  f   is greater than zero  since the set m ha  fi  of the models for k   ha  fi is a
subset of the set m ha  i  of the models for k    ha  i  this property also holds for any model
for k    thus  no such m   can be a model of k  hence k is inconsistent 
an example of the usage of theorem   is given below  where by checking that nc k  has no
feasible solution we conclude that the pst kb k is not consistent 
example     let id    id   t              and space    p    p    p     let k   ha  fi such that
 a consists of the pst atoms loc id   p                 loc id   p                 loc id   p       
          loc id   p                  meaning that  id is at p  and at p  at time   with probability greater than or equal to     and      respectively  and it is at p  at times   and   with
probability greater than or equal to     
 f consists of the std formula   loc id   p    p         loc id   p         loc id   p         
saying that id cannot be at p  at both times   and   if it was in the region consisting of the
points p  and p  at time point   
   

fiparisi   g rant

it is easy to see that nc k  contains  among others  the following inequalities 
     vid   p    
     vid   p    
     vid   p    
     vid   p    
vid   p    vid   p    vid   p    
vid   p    vid   p    vid   p    
where the last two inequalities derive from item     of definition    clearly  these inequalities
cannot be satisfied given that      vid   p         vid   p    and      vid   p    thus  since nc k 
has no feasible solution  we can conclude that k is inconsistent 
 
however  we cannot say anything about the consistency of k if there is a feasible solution
of nc k   the following examples show a case where nc k  has a feasible solution and k is
consistent  and a case where nc k  has a feasible solution but k is inconsistent 
example     consider the pst kb of example    where a is modified such that the probability
that id is at p  at times   and   is greater than or equal to      instead of      it is easy to see that
there is a feasible solution of nc k  in this case  theorem   cannot be used to decide whether k is
consistent or not  as a matter of fact  k is consistent as shown in what follows  let w    w  and w 
be worlds for k such that
w   id       p    w   id       p    w   id       p   
w   id       p    w   id       p    w   id       p   
w   id       p    w   id       p    w   id       p   
and let m be the pdf over w k  such that m  w           m  w           m  w           and
m  w      for any other world w  w k   it is straightforward to check that m is a model for
k 
 
example     again  let id    id   t              and space    p    p    p     let k   ha  fi
be such that a    loc id   p                 loc id   p                 loc id   p                  i e   id
is at p  at any time in t with a probability greater than      and f consists of the std formulas 
 loc id   p         loc id   p         
 loc id   p         loc id   p          and
 loc id   p         loc id   p         
saying that id cannot be at p  at time   or   if it was already there at any previous time value 
a solution for nc k  is obtained by assigning the variables vid t p  and vid t p  the value    
 where t           and the other variables the value    as nc k  has a feasible solution  theorem  
says nothing about the fact that k is consistent or not  however  it can be checked that k is not
consistent  let pt be the set of worlds in w k  placing id at p  at time t  with t  t   the
std formulas in f entail that every world belonging to two of these three sets must be assigned
probability equal to   by any model for k  that is  f entails that p    p    p  are pairwise disjoint
sets if we consider only the worlds that can be assigned a probability greater than zero by any model 
now observe that the pst atoms in a require that the sum of the probabilities of the worlds in each
of these three sets is at least equal to      therefore  the overall sum of the probabilities assigned to
the worlds in all of these three sets would be greater than or equal to      which entails that there is
no model for k 
 
theorem   shows that the consistency of k implies the the existence of a feasible solution
of nc k  and the previous examples show that this is the only relationship between these two
   

fik nowledge r epresentation in p robabilistic s patio  t emporal k nowledge bases

concepts  however  we can make a stronger statement in a special case  for pst kbs where f
consists of a single ground std formula  of any arity  constructed from st atoms referring to singlepoint regions  nc k  has a feasible solution iff the kb is consistent 

theorem    let k   ha  fi where f     loc id     p     t         loc idn    pn    tn      then 
k is consistent iff there is a feasible solution of nc k  
proof  using theorem   we need to prove that if there is a feasible solution of nc k  then k is
consistent 
let f be the std formula in f  we first observe that if f contains a pair of st atoms referring to
the same id and time value but different points in space  then k is consistent  indeed  in this case 
f is satisfied by every world  and thus it does not impose any restriction on the interpretations for
k  see definition     given this  in the following w l o g  we assume that for every distinct pair of
st atoms loc idi    pi    ti    loc idj    pj    tj   in f   if idi   idj then ti    tj  
let  be a solution for nc k   and k    ha  i  then   is a solution for cc k     from fact
   and corresponds to a model m   for k  such that  i  the sum of the probabilities assigned by m  
to the worlds satisfying an st atom
loc id   p   t   i e   the marginal probability of loc id   p   t   is
p
equal to  vid t p    and  ii  ki    vidi  ti  pi    k     viewing each st atom loc idi    pi    ti   in f
as a probabilistic event whose  marginal  probability is  vidi  ti  pi    the frechet inequality  recalled
in the proof of theorem    entails thatpthe minimum probability that the st atoms in f occur all
together is equal to max       k   ki    vidi  ti  pi     this is equal to zero since the second
argument of function max is not greater than zero due to the fact that  ii  holds  the fact that the
minimum probability that the st atoms in f simultaneously occur is equal to zero suffices to ensure
that there is at least one model m    for k  such that m    assigns probability equal to zero to all the
worlds for k  that do not satisfy f   as f is the only std formula in f  and every world not satisfying
f is assigned a probability equal to zero by m      it follows that m    is a model for k too 
the following example shows that considering even a binary std formula containing an st atom
referring to a region consisting of two points  it may happen that there is a feasible solution of
nc k  even if k is not consistent 
example     let id    id   t           and space    p    p    p     let k   ha  fi be such that
a    loc id   p                 loc id   p                 loc id   p                    and f is the stdformula  loc id   p    p         loc id   p         saying that id cannot move to point p  at time   if
it was in either p  or p  at time    it is easy to see that nc k  is feasible but k is not consistent   
in section      we will present a method for deciding in polynomial time the consistency of
pst kbs where binary std formulas satisfying some acyclicity conditions are used  it turns out
that the consistency of the pst kbs of both examples    and    can be decided in polynomial
time using our approach 
    unary std formulas are tractable
we start by identifying a tractable case of the consistency checking problem  when all std formulas
are unary  that is  each formula in f consists of only one st atom and possibly a conjunction of
built in predicates  i e   in definition    k      
   

fiparisi   g rant

example     the constraint there is no object in region r at any time between   and    can be
expressed by the following unary std formula  x    z   loc x    r  z     z          z    
the constraint object id is always in region r can be expressed as 
y    z   loc id  y    z     y  nov r    
 
the following theorem states that checking consistency is tractable if only unary std formulas
are considered 
theorem    let k   ha  fi be a pst kb such that f consists of unary std formulas only  then 
deciding whether k is consistent is in p t im e 
proof  the statement follows from the fact that if f consists of unary std formulas only  k  
ha  fi is equivalent to  i e   it has exactly the same set of models as  k    ha    i  where a 
consists of the atoms in a plus the atom loc  xi     yi     zi          for each
s ground std formula
 f      loc  xi     yi     zi      where f  f and   f   since  f f f is polynomial
w r t  the size of k  the size of a   and thus of k    increases by a polynomial number of atoms 
hence  we can apply fact    which entails that the consistency of pst kbs with f    can be
decided in p t im e 
    tractable binary std formulas
in the following we focus on pst kbs where all std formulas are binary  this is a restricted
but expressive class of std formulas that allow us to impose several practical constraints in many
application contexts  as a matter of fact  both f  and f  of example   as well as f  of example  
are binary std formulas  furthermore  using the approach suggested in the proof of theorem    we
can assume that unary std formulas are encoded as pst atoms  thus  all the results stated in this
section straightforwardly apply to the case where both unary and binary std formulas are in the pst
kb 
we start by noting that consistency checking was proved to be feasible by grant et al        
for the case where reachability definitions  but no other integrity constraints  were allowed  as we
showed in example   a reachability definition can be expressed by a binary std formula  hence 
in the special case where all the binary std formulas represent reachability definitions  consistency
checking is tractable 
in the general case of a pst kb k   ha  fi such that f consists of binary std formulas  we
define an undirected graph  called the std graph  where each maximal independent set represents a
world for k satisfying all the std formulas in f    we will later use this graph to characterize binary
std formulas for which the consistency checking problem turns out to be tractable 
definition     std graph   given a pst kb k   ha  fi such that f consists of binary stdformulas  the std graph g k  is an undirected graph hv  ei whose sets of vertices v and edges
e are such that 
   v consists of the set of all ground st atoms of the form loc id   p   t  where id  id  p 
space  and t  t  
   recall that every substitution for y  must be a region containing a single point 
   a maximal independent set in the std graph is a maximal independent set in an undirected graph whose vertices are
st atoms  the formal relationship between maximal independent sets in the std graph and worlds of a pst kb is
given in proposition   

   

fik nowledge r epresentation in p robabilistic s patio  t emporal k nowledge bases

   e consists of
i  an edge between every pair of ground st atoms in v referring to the same object and
time value  that is  for each p    p   space  p     p    id  id  t  t   hloc id   p     t  
loc id   p     t i  e 
ii  an edge hloc id     p     t     loc id     p     t   i between every pair of ground st atoms in
v such that  loc id    r    t     loc id    r    t     with p   r  and p   r  belongs to
the set of ground std formulas that can be derived from f 
we will just write g instead of g k  where k is known 
basically  each edge of g connects a pair of st atoms that cannot belong together in any world
satisfying the std formulas in f  in particular  an edge of type i  connects two st atoms representing
the fact that an object is in two places at the same time  this is not admitted according to the
definition of world  see definition     an edge of type ii  connects two st atoms representing a fact
 i e   object id  is at point p  at time t  and object id  is at point p  at time t    not consistent with a
ground std formula entailed by f 
the structure of g is as follows  for each hid  ti pair  g contains a clique   of size  space 
which consists of a vertex loc id   p   t  for each point in space and edges of type i   in the
following  we refer to
 this clique as the clique for hid  ti pair or the hid  ti clique  for each ground
std formula f    loc id    r    t     loc id    r    t     that can be derived from f  g contains a
clique of size  r       r    which consists of a vertex loc id     p     t    for each point in r    a vertex
loc id     p     t    for each point in r    and edges of both types i  and ii   we refer to this clique as
the clique for std formula f  
example     let id    id    id     t              and space    p    p    p    p     assume that f
consists of the following std formulas 
 f    x    x    z   loc x     p    p     z     loc x     p    p     z     x     x      z  
z       saying that there cannot be two distinct objects in the region consisting of points
 p    p    at times   and   
 f    z   loc id     p    p         loc id     p     z        z   z       saying that object
id  cannot reach point p  starting from region  p    p    at time   in   or   time units 
the std graph g is shown in figure   a   where  for the sake of readability  vertices are labelled
with the names of the points in space to which they refer  while the id and time value of each vertex
is reported on the column and the row to which it belongs  for instance  vertex loc id     p        is
represented by the circle in the upper left corner   observe that g consists of     maximal  cliques 
one for each of the   hid  ti pairs  and one for each of the   ground std formulas derived from f 
specifically  each hid  ti clique  with id   id    id    and t          consists of the four vertices
loc id   pk    t  with k          while the cliques for the ground std formulas are the following sets 
 loc id     p         loc id     p         loc id     p         loc id     p         
 loc id     p         loc id     p         loc id     p         loc id     p         
 loc id     p         loc id     p         loc id     p          and
 loc id     p         loc id     p         loc id     p         
 
   

fiparisi   g rant

id 

id 

p 

p 

p 

p 

p 

p 

p 

p 

p 

p 

p 

p 

p 

p 

p 

p 

id   

id   

p 

p 

p 

p 

id   

id   

p 

p 

p 

p 

id   

id   

t  

t  

t  

 a 

 b 

figure     a  std graph g   b  auxiliary graph ag 
it is worth noting that the cliques for the hid  ti pairs as well as those for the std formulas are
not maximal cliques in general  as shown in the following 
example     continuing example     assume that f is augmented with the following  ground 
std formulas 
 f     loc id     p         loc id     p        
 f     loc id     p         loc id     p        
thus  the clique for std formula f  consists of the set  loc id     p         loc id     p          while
that for f  consists of the set  loc id     p         loc id     p          both these cliques are not maximal ones  as they are included in the clique consisting of the set of vertices
 loc id     p         loc id     p         loc id     p          this is basically due to the fact that the
constraint imposed by f  and f  can be expressed more succinctly  as  loc id     p    p        
loc id     p         whose associated clique is maximal 
 
the following proposition follows from the definition of std graph and the fact that every object
must be at a unique point for each time value 
proposition    let k   ha  fi be a pst kb where f consists of binary std formulas only  every
maximal independent set of g consisting of a vertex from each hid  ti clique is in a one to one
correspondence with a world w  w such that w    f 
   note that we use the terminology clique for a complete subgraph of g  and maximal clique for a clique not contained
in any other clique  we point this out since maximal cliques are often called simply cliques 

   

fik nowledge r epresentation in p robabilistic s patio  t emporal k nowledge bases

observe that if there is no maximal independent set of g having the property stated in proposition    then g must contain a maximal clique including at least two hid  ti cliques  this happens for
instance if f contains an std formula  loc id  space  t     loc id  space  t       in this case  no
world satisfies f and the pst kb is trivially inconsistent  in the general case  there may be an exponential number of maximal independent sets of g having the property stated in proposition    and
the fact that the pst kb is consistent or not can be decided using g as explained in what follows 
      c lique  acyclic s td  g raphs
our characterization of tractable cases of the consistency checking problem focuses on kbs with
binary std formulas such that their std graphs have a property  that we call clique acyclic  we start
with some preliminary definitions 
definition     binary maximal clique   for std graph g we call a clique binary maximal iff it
contains vertices from two hid  ti pairs and is not properly included in any clique that contains
vertices from the same hid  ti pairs 
in particular  the std graph g of figure   a  has   binary maximal cliques all involving id   
definition     clique subgraph   we call a subgraph of std graph g a clique subgraph iff it contains
all the vertices of g  one edge from each hid  ti clique as well as one new distinct edge from each
binary maximal clique 
so any clique subgraph of the std graph of the graph g of figure   a  has    edges  one from
each of the   hid  ti pairs and one from each binary maximal clique 
definition     clique acyclic std graph   std graph g is said to be clique acyclic iff all of its cliquesubgraphs are acyclic graphs  that is  forests   g is called clique cyclic if it is not clique acyclic 
basically  clique acyclicity means that no cycle can be found in the std graph after compressing
all binary maximal cliques into single edges and using just one edge of each hid  ti clique  it is easy
to see that the std graph shown in figure   a  is clique acyclic  as stated in the next proposition 
clique acyclicity can be checked using the following auxiliary graph which basically compresses a
clique subgraph to its essential structure  it will be clear from the definition that the same auxiliary
graph is obtained from all clique subgraphs of a graph g 
definition     auxiliary graph   the auxiliary graph for g is the undirected graph ag   hv     e   i
such that 
 v   consists of a vertex for each hid  ti pair  with id  id and t  t  
 e   consists of all the edges for binary maximal cliques in a clique subgraph where each
previous vertex loc id   p   t  is replaced by the corresponding hid  ti pair  we will denote as
c e  the binary maximal clique c from which the edge e originated 
the auxiliary graph for the std graph of figure   a  is shown in figure   b   as an example 
c e  for edge e   h id         id      i consists of the following set of vertices
 loc id     p         loc id     p         loc id     p         
the following proposition follows from definitions    and    
   

fiparisi   g rant

proposition    std graph g is clique acyclic iff the auxiliary graph ag is acyclic  that is  ag is a
forest  
in the following  we introduce a set of linear inequalities that can be used to check the consistency of pst kbs where the std formulas are binary and the auxiliary graph is acyclic  then in
the next subsection we will do the same for a special case of a cyclic auxiliary graph  in both cases
we will be working with a single connected component of the auxiliary graph  suppose that ag
has n connected components c            cn and let ki be the pst kb corresponding to ci for each
i  if k has a model m we show how to obtain a model mi for ki   let wi be a world appropriate
to the hid  ti pairs for ki  plet wi be all the worlds of k that extend wi to the hid  ti values not
in ki   define mi  wi     wwi m  w   going in the other direction  suppose that m            mn
are models for the pst kbs corresponding to ci           cn respectively  for any world w for k  let
w            wn be the restrictions of w to c            cn respectively  defining m  w    ni   m  wi   is
then a model of k  we have shown the following result 
proposition    k is consistent iff all of the pst kbs corresponding to the connected components
of g  and hence of ag  are consistent 
hence in our proofs it suffices to assume that ag has a single connected component   
definition     bc k    let k   ha  fi be a pst kb such that f consists of binary std formulas
only  bc k  consists of the following  in equalities 
p
vid t p  u 
     loc id  r  t     u   a    
pr

     id  id  t  t  

p

vid t p     

pspace

     id  id  t  t  p  space  vid t p    
p
vid t p    
    for each edge e of ag 
loc id  p  t c e 

the following theorem states that checking whether bc k  has a feasible solution is equivalent
to deciding the consistency of pst kbs k where std formulas are binary and generate an acyclic
auxiliary graph  the intuition behind this result is as follows  if there is a feasible solution of
bc k   then inequalities         entail that for each hid  ti pair  the events that object id at time t is
at point p  space can be arranged to fit the whole probability space without overlapping  roughly
speaking this would suffice to define a model for a pst kb without std formulas by combining
the distributions obtained for each hid  ti pair  considering std formulas means that some events
cannot occur together  that is  they cannot coexist in the same portion of the probability space 
intuitively  the fact that inequality     of bc k  is satisfied for an edge e entails that the events
corresponding to the st atoms in c e  can be arranged in distinct portions of the probability space
 avoiding overlaps   if the auxiliary graph ag is acyclic  this reasoning can be inductively repeated
for each edge of ag without ever reconsidering the arrangement of events corresponding to the
st atoms considered previously  the satisfiability of inequality     of bc k  is also a necessary
    we do not indicate this in the statement of the following theorem because if ag has several connected components 
the proof works for each one and then proposition   is applied 

   

fik nowledge r epresentation in p robabilistic s patio  t emporal k nowledge bases

condition for the consistency of k as the fact that it is not satisfied for an edge e of ag intuitively
means that the events corresponding to the st atoms in c e   even taken alone  cannot be arranged
in the probability space without overlapping 
theorem    let k   ha  fi be a pst kb where f consists of binary std formulas only  if ag is
acyclic  then k is consistent iff there is a feasible solution of bc k  
proof  we will use the notation k  for k with f removed  that is  k    ha  i  then  m k  is a
subset of m k    
   we prove the contrapositive  if there is no feasible solution of bc k   then k is inconsistent  the simplest case is where bc k  has no feasible solution due to the fact that bc k    has no
feasible solution  then there are no inequalities      hence k  is not consistent  and thus k is not
consistent as well 
otherwise  there is a feasible solution of bc k    and thus bc k  has no feasible solution due
to the fact that at least one of the inequalities
of item     of definition    is not satisfied  therefore 
p
there is an edge e of ag such that loc id  p  t c e  vid t p      to show that k is inconsistent we
show that no interpretation can be a model of k  so suppose that m is an interpretation that is a
model for k  since a pair a    a  of st atoms belong to c e  iff  a   a   a    belongs to the set of
ground formulas that can be derived by f  or  b  a    loc id   p     t  and a    loc id   p     t 
where p     p    there is no world w  w k  such that m  w       w    a    and w    a   in
particular  in case  b  there is no world w  w k  such that w    a    and w    a    whether or
not m  w        that is  every world w for k which is assigned a non zero probability by m is
such that it satisfies at most one st atom in c e   hence  w k  can be partitioned into  c e      
pairwise disjoint sets as follows 
 i  the set of worlds w  w k  such that m  w       this set includes all the worlds satisfying
at least two st atoms in c e  
 ii  the set of worlds w  w k  such that m  w      and w does not satisfy any st atom in c e  
 iii  for each st atom ai  c e   the set of worlds w  w k  such that m  w       w    ai   and
w     aj where aj  c e   and is different from ai   
therefore  the sum of the probabilities of the worlds satisfying at least one st atom in c e  is equal
to the sum  for each st atom a in c e   of the sum of the probabilities of the worlds satisfying atom
a  c e  but no other st atoms in c e   that is
x
w  w k 
w    loc id   p   t 
loc id   p   t   c e 

m  w   

x

x

loc id  p  t c e 

w  w k 
w    loc id   p   t 
w     loc id     p     t   
loc id     p     t     c e 

m  w  

now recall that any model for k is also a model for k    the above mentioned partitioning of
w k  also holds for w k     therefore  there is a solution  for bc k     one to one corresponding
to a model m for k    such that the sum of the probabilities assigned by m to the worlds for k  satisfying an st atom loc id   p   t  is equal to the value assigned to variable vid t p by   in particular 
   

fiparisi   g rant

for a given st atom loc id   p   t   c e   we have that
x
x
m  w   
w k   

m  w    vid t p  

w k   

w
w    loc id   p   t 

w
w    loc id   p   t 
loc id   p   t   c e 
w     loc id     p     t   
loc id     p     t     c e 

considering all the st atoms in c e  we obtain that
x
x
m  w   
w k   

x

loc id  p  t c e 

w
w    loc id   p   t 
loc id   p   t   c e 

 

x

m  w   

w k   

w
w    loc id   p   t 
w     loc id     p     t   
loc id     p     t     c e 

vid t p     

loc id  p  t c e 

the inequality above holds since the inequality     of definition    is not satisfied for edge e 
finally  since the following inequality holds due to the definition of model
x
x
m  w  
m  w  
ww k   

w  w k   
w    loc id   p   t 

and the latter is strictly greater than one  it follows that m is not a pdf over w k     meaning that
m is a not model for k    hence no interpretation can be a model for k and so k is inconsistent 
   we now prove that if the auxiliary graph ag is acyclic and bc k  has a feasible solution 
then k is consistent  we prove this by mathematical induction on the number of edges of ag 
base case  the number of edges is    so ag consists of a set of isolated vertices  the fact
that ag contains no edges means that the set of ground std formulas that can be derived from f is
empty  thus there is a feasible solution of bc k  iff there is a feasible solution of cc k     using
fact    we obtain that k is consistent 
inductive step  we prove that if the statement holds for  edges of ag  then it holds for     
edges  so we are given an acyclic graph ag with      edges  that we write as ag      by
acyclicity we can choose a subgraph  ag  with  edges such that the new edge connects a vertex
to an isolated vertex of ag  and ag  is clearly acyclic  let k   ha  f  i be the pst kb where
f  consists of the subset of ground std formulas derived from f so that the std graph g  has the
auxiliary graph ag    the induction hypothesis is that if there is a feasible solution of bc k   
then k is consistent 
we write k     ha  f    i where f    consists of the ground std formulas in f  plus those
corresponding to the new edge e  so that ag    turns out to be the auxiliary graph for g k     
assuming the induction hypothesis  we now show that if there is a feasible solution of bc k     
then k   is consistent 
let  be a solution for bc k      obviously   is also a solution for bc k    as it consists
of a subset of the  in equalities in bc k      the fact that  is a solution for bc k   means that
there is a model m  for k such that the sum of the probabilities assigned by m  to the worlds for
   

fik nowledge r epresentation in p robabilistic s patio  t emporal k nowledge bases

k satisfying an st atom loc id   p   t  is equal to the value  vid t p   assigned to variable vid t p by
  since  is a solution also for bc k      and thus inequality     of definition    holds  it follows
that
x
x
x
 vid t p      
m   w   
loc id  p  t c e 

w  w k   
w    loc id   p   t 

loc id  p  t c e 

that is  m  is a model for k with the property that the sum of the probabilities of the worlds
satisfying at least one st atom in c e  is less than or equal to one 
if m  is such that it assigns probability equal to zero to every world in w k   containing at
least two st atoms in c e   then we are done  since m  turns out to be a model for k   too 
otherwise  starting from m    we show that a model m    for k   can be constructed by
reasoning as follows 
we recall that the new edge e being added to ag  to obtain ag    is of the form h id    t    
 id    t   i  let c   e  and c   e  be the sets of st atoms in c e  of the form loc id     p   t    and
loc id     p   t     respectively  hence  c e    c   e   c   e  and c   e   c   e      let
   hw    w            wn i be a permutation of the worlds w  w k   which are assigned by m 
a probability greater than zero  i e   m   w       and such that the first k worlds in  satisfy an statom in c   e   note that  w k     w k      and that a world in w k   consists of at most one
atom in c   e   as it is a function whose domain is id  t  see definition    and all of the st atoms
in c   e  refer to the same id andp
time value  let us denote by i the sum of the probabilities of the
first i worlds in   that is  i   ij   m   wj    where wj is in   thus  k is equal to the sum of
the probabilities assigned by m  to the worlds satisfying an st atom in c   e   i e  
x

k  

x

m   w   

w  w k   
w    loc id   p   t  
loc id   p   t   c   e 

 vid t p   

loc id  p  t c   e 

let s be the subset of space consisting of points p such that variables vid   t   p are assigned a
value greater than zero by   that is  s    p   p  space   vid   t   p         observe that these
variables correspond to st atoms referring to endpoint  id    t    of edge e  let    hp    p            pm i
be a permutation of the points in s such that the first h points p correspond to the variables vid   t   p
such that loc id     p   t      c   e   and the subsequent points in   with index in  h          m  
correspond to the variables vid   t   p such that loc id     p   t     c   e   let i be the sum of the
pi
values assigned by  to the first i points in   that is  i  
j    vid   t   pj   where pi   
observe thatpm     since equality     of definition    holds for bc k      and that h  
 
 vid t p    the fact that inequality     of definition    holds for bc k    
loc id    p  t   c   e 

entails that 
   h   k  

x

 vid t p    

loc id  p  t c   e 

x

 vid t p      

loc id  p  t c   e 

therefore  we obtain that k  h   intuitively  this means that it is possible to define a pdf over
the worlds for k   so that no world satisfies two st atoms in c e   while keeping satisfied all the
pst atoms and std formulas satisfied by m    this is formally described below 
   

fiparisi   g rant

we define a model m    for k   as follows  let u   hu    u            uz i be the sequence
consisting of the values in              n                 m   ordered in ascending order  we define the
following z non zero probability worlds for k     for each ui  u   let wi be a world such that 
 id  id    id     t  t    t     wi  id  t    wj  id  t   where wj  w k   and j is the
smallest subscript such that j  ui  
 wi  id    t      pj   where pj  s and j is the smallest subscript such that j  ui  
we define m    as the pdf over w k     such that  i  m     w      v     ii  m     wi    
vi  vi  for each i      z   and  iii  for all the other worlds w  w k      m     w      
we now show that m    is a model for k     first  observe that m    is a model for k  
in fact  for each id  id    id     id  t    t     and p in space  the probability that object id is
at time value t at point p according to m    is equal to the probability that id is at time value t at
point p according to m    that is
x
x
id  id    id     t  t    t     p  space 
m     w   
m   w  
w  w k   
w id  t    p

w  w k     
w id  t    p

moreover  for the hid    t  i pair 
x
p  space 

m     w     vid   t   p    

x

m   w  

w  w k   
w id  t    p

w  w k     
w id  t    p

this ensures that  for each pst atom a   loc id  r  t     u   a  the sum of the probabilities
assigned by m    to the worlds satisfying the st atom loc id  r  t  belong to the probability interval
    u  specified by a  since the same hold for m    moreover  none of the worlds which is assigned
a probability equal to zero by m  is assigned a probability greater than zero by m      as  only
consists of worlds which are assigned a non zero probability by m    therefore  m    is a model
for k  
finally  to show that m    is a model for k     it suffices to observe that k  h entails that
there is no world wi for k    with i      z   which is assigned a probability greater than zero
and which satisfies two atoms in c e   this completes the proof 
the following example shows the usage of the result of theorem   to check the consistency of
a pst kb 
example     continuing example     assume that k is a pst kb where f is the set of stdformulas given in example    and a consist of the following set pst atoms 
loc id     p    p                loc id     p                 loc id     p                 loc id     p     t        
for t          it can be checked that for this pst kb the corresponding set of linear inequalities bc k  has a feasible solution  thus  since the auxiliary graph ag k  shown in figure   b  is
acyclic  it follows that k is consistent 
consider now the pst kb k  obtained from k by replacing the atom loc id     p               
with loc id     p                 where the lower probability is    instead of     in this case  bc k   
includes the inequalities      vid     p    vid     p     and      vid     p        due to pst
atoms   and vid     p    vid     p    vid     p      due to the edge h id         id      i of ag k   
clearly  there is no feasible solution of bc k     and thus k  is not consistent 
 
   

fik nowledge r epresentation in p robabilistic s patio  t emporal k nowledge bases

we note the fact that the acyclicity of ag is not used in the left to right proof of theorem   
therefore  whether or not ag f  is acyclic  for pst kbs where the std formulas are binary  the
necessary condition stated in the following theorem can be used for checking consistency 
theorem    let k   ha  fi be a pst kb where f consists of binary std formulas only  if there
is no feasible solution of bc k   then k is not consistent 
the condition that bc k  has no feasible solution is stronger than that nc k  has no feasible
solution  used in theorem   for general std formulas  since it can be easily checked that every
solution of bc k  is a solution of nc k   but the converse does not hold in general  thus  there
are pst kbs k  such that using theorem   we cannot conclude anything about the consistency of
k  as nc k  has a feasible solution  but we can show that k is inconsistent by using the result of
theorem   
example     we have already observed that the fact that the pst kb k of example    is not
consistent cannot be concluded by checking whether there is a feasible solution of nc k   however 
it is easy to see that bc k  has no feasible solution in this case  and thus we can conclude that the
pst kb of example    is not consistent by applying the result of theorem   
 
although the necessary condition in theorem   can be still used to check the consistency when
the auxiliary graph is cyclic  see theorem     the sufficient condition of theorem   entails that a
pst kb k is consistent only if the corresponding set bc k  of linear inequalities has a feasible
solution and the auxiliary graph is acyclic  in the following  we identify a class of std graphs for
which the consistency checking problem remains tractable even if the std graph is clique cyclic  and
thus the auxiliary graph is cyclic  
      s imple c lique  c yclic s td  g raphs
in this section we provide a set of linear inequalities for checking the consistency of a pst kb
whose std graph satisfies the following property 
definition     simple clique cyclic std graph   std graph g is said to be simple clique cyclic iff
its auxiliary graph ag is a simple graph    and each cyclic connected component of g contains a
single maximal clique that is not an hid  ti clique 
the following is an example of a simple clique cyclic std graph  we provide both the std graph
and its auxiliary graph 
example     for the pst kb k   ha  fi of example     we obtain the std graph g shown
in figure   a   the auxiliary graph ag is shown in figure   b   g consists of a single connected component where there is one maximal clique cl that is not an hid  ti clique  namely
cl    loc id   p         loc id   p         loc id   p          it is easy to see that g is simple cliquecyclic 
 
the following theorem states that checking the consistency of a pst kb whose std graph is
simple clique cyclic can be accomplished by checking whether there is a feasible solution of a set
of linear inequalities 
we start by defining this new linear system  cl k  
    there are no loops and no multiple edges between vertices 

   

fiparisi   g rant

id
p 

t  
p 

p 

p 

id   

t  
p 

p 

id   
p 

id

t  

id   

p 

p 

 a 

 b 

figure     a  std graph and  b  auxiliary graph for the pst kb of example    
definition     cl k    let k   ha  fi be a pst kb such that f consists of binary std formulas
only  cl k  consists of the following  in equalities 
    loc id  r  t     u   a    

p

vid t p  u 

pr

    id  id  t  t  

p

vid t p     

pspace

    p  space  id  id  t  t   vid t p    
     a  for each
p acyclic connected component of g  and hence ag   for each edge e of ag 
vid t p    
loc id  p  t c e 

 b  for each cyclic connected component
of g  and hence ag   for the maximal clique cl
p
that is not an hid  ti clique 
vid t p    
loc id  p  t cl

the intuition behind the result stated in the following theorem is similar to that given for the
tractable case of theorem    indeed  if g is simple clique cyclic and cl k  has a feasible solution 
then the events corresponding to the st atoms in each edge e of an acyclic connected component ag 
as well as the events corresponding to the st atoms in each maximal clique of a connected component of ag  can be arranged in the probability space avoiding overlaps  this basically suffices to
define a model for k 
theorem    let k   ha  fi be a pst kb where f consists of binary std formulas only  if g is
simple clique cyclic  then k is consistent iff there is a feasible solution of cl k  
   

fik nowledge r epresentation in p robabilistic s patio  t emporal k nowledge bases

proof  as explained earlier we will deal only with a single cyclic connected component of g 
   the proof follows by reasoning as in the left to right proof of theorem   
   let  be a solution for cl k   obviously   is alsop
a solution for cc k    where k   
 
 
 
ha 
p i  and there is a model m for k such that  vid t p     ww k    w  loc id  p  t  m  w  and
loc id  p  t cl  vid t p       given this  we show that starting from  we can define a new model
m for k  which is also a model for k 
for each hid  ti pair  we define s id  t  as the subset of space consisting of points p such that
vid t p is assigned a value greater than zero by   i e   s id  t     p   p  space   vid t p        
we distinguish between the following two sets of hid  ti pairs  idt   resp  idt    is the set of
hid  ti pairs for which there is not  resp  there is  a point p in s id  t  such that loc id   p   t   cl 
we separately consider the pairs in idt  and idt    and for each hid  ti pair belonging to one of
these sets  define a sequence of points in s id  t  along with a sequence of cumulative probability
values that will be used to build the model m  
we start with the set idt    let hidi   ti i  with i       idt     be the i th pair of idt   after
i
ordering the pairs in idt  according to any fixed order   let i   hp i           pm
i i be a permutation
of the points in s idi   tp
i    and let i  k  be the sum of the values assigned by  to the first k points
in i   that is  i  k    kj    vidi  ti  pj    thus  hi              i  mi  i is a sequence of  cumulative 
i

i
probability values associated with the sequence of points hp i           pm
i i from the i th pair of idt   
now consider the pairs in idt    i e  those occurring in some st atom in cl  denote with
hidi   ti i  with i       idt      the i th pair of idt   according to any fixed order   for the first
 
pair in idt    let     hp             ph      ph                 pm
  i be a permutation of the points in s id    t   
such that the first h  points p correspond to the variables vid   t   p such that loc id     p   t     cl
 
 consequently  the other points p   ph                 pm
    correspond to variables vid   t   p such that
loc id     p   t      cl  
i
for each hidi   ti i with i       idt      let i   hp i           pgi i   pigi              pigi  hi   pigi  hi              pm
i i
g
 h
  
g
m
be a sequence of the points in s idi   ti   such that  i  each point p in  p i           pi i   pi i i           pi i  
 resp  p in  pgi i              pgi i  hi    corresponds to a variable vidi  ti  p such that loc idi    p   ti     cl
 resp  loc idi    p   ti    cl   and  ii  all the points in the sequence are distinct except for pgi i and
pgi i  hi    that may refer to the same point in s idi   ti    denoting as i  k  the sum of the values
p
assigned by  to the first k points in i  i e   i  k    kj    vidi  ti  pj     we choose the sequences
i
             idt    such that  for each i       idt      i  gi     i   gi   hi     assume that g       
note that we can make such a choice since the following holds 

 idt    hi
x x

 idt   

 vidi  ti  pk    

x

i

i   k  

 idt   

i  gi   hi    i  gi    

i  

x

x

 vidi  ti  p      

i   loc idi   p  ti  cl

the way the sequences h             idt    i and hi              i  mi  i are defined will allow us to build
a model m for k  such that no world which is assigned a probability greater than zero satisfies two
distinct st atoms in cl  this will ensure that m is a model for k too 
we now
s define such a model m   letsv   hv    v            vz i be the sequence consisting of the
values in iidt   i              i  mi     iidt   i              i  mi    ordered in ascending order 
we define the following z non zero probability worlds for k   note that a world for k  is also a
world for k   for each vj  v   let wj be a world such that 
   

fiparisi   g rant

 for each hidi   ti i  idt    we define wj  idi   ti     pki   where pki is the left most value in
hi              i  mi  i such that i  k   vj  
 for each hidi   ti i  idt    we define wj  idi   ti     pki   where pki is the left most value in
hi              i  mi  i such that i  k   vj  
finally  we define m as the pdf over w k    such that  i  m  w      v     ii  m  wj     vj  vj 
for each j      z   and  iii  m  w      for all the other worlds w  w k     it is easy to check
 
 
that m is a model
p for k that corresponds to the same solution  for cc k    that is  m is such that
 vid t p     ww k    w  loc id  p  t  m  w   moreover  as the construction shown above ensures
that no non zero probability world for k  satisfies two distinct st atoms in cl  it follows that m is a
model for k 
theorem   can be used  for instance  to decide if the pst kb of example    is consistent 
example     for the pst kb k   ha  fi of example     cl k  is the linear system obtained
from cc ha  i  by augmenting it with the inequality vid   p    vid   p    vid   p      since cl k 
also contains the inequality      vid t p  for each t          due to the presence of the pst atom
loc id   p     t          in a   it follows that cl k  has no feasible solution  from which we conclude
that k is not consistent  here g is the clique cyclic std graph shown in figure   a   
 
we conclude the section with the following theorem stating that checking consistency for the
pst kbs identified in section     is tractable 
theorem    let k   ha  fi be a pst kb where f consists of binary std formulas only  if g is
clique acyclic or simple clique cyclic  then checking the consistency of k is in p t im e 
proof  if g consists of one connected component  the statement follows from the facts that building
g  as well as checking whether g is acyclic  resp  simple clique cyclic   can be accomplished in
polynomial time w r t  the size of k and checking whether there is a feasible solution of bc k 
 resp   cl k   is polynomial too  if g consists of more than one connected component  the statement follows from the facts that finding all connected components of g can be done in polynomial
time  and  using proposition    we only need to check the consistency of the pst kbs corresponding to each of the connected components in order to decide the consistency of the whole pst
kb 

   querying pst knowledge bases
this section investigates the complexity of checking answer to queries  section     contains the
basic definitions  section     contains the major result about the complexity of checking answers
to queries  finally  section     gives sufficient and necessary conditions for answering queries and
tractable cases 
    optimistic and cautious answers
the problem of querying spot data has been investigated by parker et al       a         parisi 
parker  grant  and subrahmanian         and grant  molinaro  and parisi        in more specific
   

fik nowledge r epresentation in p robabilistic s patio  t emporal k nowledge bases

frameworks corresponding to pst kbs  of the form ha  i   where only pst atoms were considered  in this section  we address the problem of answering selection queries in general  consistent  pst kbs  these kinds of queries were considered by parker et al       a         and parisi
et al          while grant et al         focused on count queries 
a selection query is an expression of the form   id  q   t      u    where q is a region and     u  is
a probability interval  intuitively  a selection query says  given a region q and a probability interval
    u   find all objects id and times t such that id is inside q at time t with a probability in the interval
    u   there are two semantics for interpreting this statement  leading to two types of answers to
selection queries  optimistic answers are objects and time values that may be in the query region
with probability in the specified interval  whereas cautious answers consist only of those objects
and time values that are guaranteed to be in that region with probability in the given interval  thus 
the cautious answers are a subset of the optimistic ones 
the following definition extends the original definition of optimistic and cautious selection
query answers to the general case of consistent pst knowledge bases 
definition     optimistic cautious query answers   let k be a consistent pst kb  and q  
  id  q   t      u   a selection query  then 
 hid  ti
pis an optimistic answer to q w r t  k iff there exists a model m  m k  s t 
m  w       u  
w  loc id q t 

 hid  ti
pis a cautious answer to q w r t  k iff for every model m  m k  
m  w       u  
w  loc id q t 

example     let q                      q  overlaps with region c  see figure     model m of
example   entails that hid     i is an optimistic answer to q     id  q     t            as w   id        
w   id         w   id                 q  and m  w      m  w      m  w                 
let q  be any region including region c  hid     i is a cautious answer to q      id  q     t            as
according to any model for kex   id  must be in region c  and thus in q    at time   with probability
in          due to loc id    c             aex    clearly  hid     i is also an optimistic answer to q     
    complexity of query answering
the following theorem shows how consistency checking can be used to answer selection queries
under both the optimistic and the cautious semantics 
theorem     let k   ha  fi be a consistent pst kb  and q     id  q   t      u    then 
   hid  ti is an optimistic answer to q w r t  k iff ha   loc id  q  t     u    fi is consistent 
   hid  ti is a cautious answer to q w r t  k iff both ha   loc id  q  t           fi and ha 
 loc id  q  t  u          fi are not consistent  where  is the smallest rational number with
precision m    where m    a     f    id    t     space     id    t      id    t     space  
proof  statement    easily follows from definitions   and    
statement    follows from the fact that hid  ti is a cautious answer to q w r t  k iff i  hid  ti is
not an optimistic answer to q      id  q   t           w r t  k  and ii  hid  ti is not an optimistic
   

fiparisi   g rant

answer to q       id  q   t   u         w r t  k  where  is a small non zero constant whose size
is polynomial w r t  the size of k  to show the existence of   we observe that  i  checking the
consistency of k can be reduced to deciding the psat instance k consisting of m clauses  where
m    a     f    id    t     space     id    t      id    t     space   as shown in the membership
proof of theorem    and  ii  if a satisfying probability distribution for an instance of psat with
m clauses exists  then there is one with at most m     non zero probabilities  and with entries
consisting of rational numbers with precision o m     georgakopoulos et al         papadimitriou
  steiglitz         then  choosing  equal to the smallest rational number with precision m  suffices
to obtain a sufficiently small non zero constant  whose size is polynomial w r t  the size of k 
such that ha   loc id  q  t           fi  resp   ha   loc id  q  t  u          fi  is consistent iff
ha   loc id  q  t           fi  resp   ha   loc id  q  t  u          fi  is consistent  where  is
an infinitely small value greater than zero 
the following corollary follows from theorems   and    
corollary    let k   ha  fi be a consistent pst kb  given a query q     id  q   t      u    then
   deciding whether hid  ti is an optimistic answer to q w r t  k is in np 
   deciding whether hid  ti is a cautious answer to q w r t  k is conp 
the problem of deciding whether a pair hid  ti is an optimistic cautious answer to a selection
query q can be solved in polynomial time for pst kbs whose f component is empty  parker et al  
    a        parisi et al          however  in the presence of integrity constraints this problem
becomes hard 
theorem     let k   ha  fi be a consistent pst kb  given a query q     id  q   t      u    then
   deciding whether hid  ti is an optimistic answer to q w r t  k is np hard 
   deciding whether hid  ti is a cautious answer to q w r t  k is conp hard 
proof  we first prove item     we show a reduction to our problem from the np hard hamiltonian
path problem  papadimitriou         given a directed graph g   hv  ei  where v    v            vk  
is the set of k    vertexes of g and e is the set of its edges  we construct an instance of our problem
as follows  let id    id   space   v   p            pk      pt   pf    and t                k      
k is the pair ha  fi such that a consist of the pst atom loc id  v             and f consists of the
following formulas 
 i      k      f i   z    z   loc id   vi    z     loc id  space   v     z     z    z      
where v      vj   vi   vj    e  pi   pt   pf    that is  the locations id can reach starting from
vi in one time step are only the locations vj s t   vi   vj    e or any point in  pi   pt   pf   
 f k   z    z   loc id   vk    z     loc id  space   v      z     z    z       where v     
 vj   vk   vj    e    pt   pf    this formula says that the locations id can reach starting from
vk in one time step are only locations vj such that  vk   vj    e or those in  pt   pf   
 i      k    f i   z    z   loc id   pi    z   loc id  space  vi      z   z    z      
saying that the only location id can reach starting from pi in one time step is vi    
   

fik nowledge r epresentation in p robabilistic s patio  t emporal k nowledge bases

 f    y    z    z   loc id  y    z     loc id  y    z     z     z   y      pt    y      pf    
saying that id can not be on the same location at distinct time values  if the location is different
from both pt and pf  
 f    z    z   loc id   p            pk     z     loc id   pt    z      saying that id can not be at
pt if is was is will be at a location in  p            pk    
 f    y    z    z   loc id   pt    z     loc id  y    z     y      pt    z    z     saying that
id can not go away from pt after reaching this location 
 f    y    z    z   loc id   pf    z     loc id  y    z     y      pf    z    z     saying that
id can not go away from pf after reaching this location 
finally  let q     id   pt     t           and let the pair to be checked as an the optimistic answer of
q be hid   k    i 
first of all  observe that m k       in fact  consider the world w  w k  such that w id      
v    w id       p    w id       v    w id       p            w id  t    vt     w id  t        pt        in
both cases t is even          w id   k     vk    w id   k     pk   w id   k    vk   w id   k     
pf   it is easy to see that w    f  in fact  for each t       k   id moves towards reachable locations
in one time point  if id is at vi   with i      k      it moves to pi  that is  f i is satisfied by w   if
id is at pi   with i      k      it moves to vi    that is  f i is satisfied by w   and when is at vk it
moves to pf  that is  f k is satisfied by w   moreover  id is not placed by w on the same location at
different times  that is  f  is satisfied   neither at both a location in  p            pk    and at pt  that
is  f  is satisfied too   moreover  id does not move from pf after reaching this location  that is  f 
is satisfied   and does not reach location pt  thus  also f  is satisfied by w   now  consider the pdf
i over w k  assigning probability equal to   to w  and probability equal to   to every other world
in w k   clearly  i is a model for k  it assigns non zero probability only to worlds satisfying f 
and it ensures that atom loc id  v             is satisfied by w which is assigned probability equal to
  
we now show that hid   k    i is an optimistic answer to q w r t  k iff there is a hamiltonian
path in g 
  
p as hid   k    i is an optimistic answer to q w r t  k  there is a model m  m k  s t 
 w       let w  w k  be the set of worldsp
w such that w id   k       
w w  loc id pt   k    m p
pt and m  w       as ww m  w      and m is a model  thus  w w  loc id v      m  w     
due to loc id  v               a   it follows that every world w  w is such that w id       v   
moreover  since m is a model  and thus f  is satisfied by every world w  w   it holds that
t       k       w id  t     p            pk      meaning that id is never placed at a location in
 p            pk    by w  moreover  since for each w  w   w id       v    and since f i and f i
 with i      k    and f  are satisfied by every world in w   it follows that  i  for each t      k  
w id  t   v  i e   id is placed on a vertex of g at each time point in     k    and  ii  for each
t  t       k   w id  t     w id  t     id is not placed on the same vertex of g at different times in
    k    given this  at time t   k      f k and f  entail that id is placed by any world in w at location
pt or pf   as f   resp   f    entails that id can not go away from pt  resp   pf   after reaching this
location  and since w id   k        pt   it follows that every world w  w is such that for each
t   k       k       w id  t    pt   hence  each w  w is such that m  w       w id       v   
t      k   w id  t   v   t  t       k   w id  t     w id  t     t   k       k       w id  t    pt  
therefore  w id      w id              w id  k  is a hamiltonian path of g 
   

fiparisi   g rant

   let  be a hamiltonian path of g  we denote as  i   with i      k   the i th vertex of
  w l o g  we assume that the first
pvertex of  is v    that is        v    we show that there
is a model m  m k  such that w w  loc id pt   k    m  w       that is  hid   k    i is an
optimistic answer to q w r t  k  let m be a function over w such that for all worlds w  w 
m  w      except for the world w which is such that  w  id             v    t      k  
w  id  t     t   t   k       k       w  id  t    pt   it is easy to see that w    f  in fact  for
each i      k   f i as well as f i are satisfied by w   since the fact that  is a path on g entails that
t      k      w  id  t    vi and w  id  t        vj only if edge  vi   vj   is an edge of g and
w  id  k        pt which is reachable from any location in v   moreover  f  is satisfied by w  
since the fact that  is a hamiltonian path entails that w places id on different locations at different
times  except for location pt   formula f  is satisfied by w   since w does not place id at any
location in  p            pk     formula f  is satisfied by w   since w does not place id on a location
different from pt after time point k      when id reaches pt   finally  f  is satisfied by w as well 
since w does not place id on location pf   since wp   f  it can be assigned by m a probability
different from    let m  w        moreover  as w w  loc id v      m  w    m  w        the
condition required by loc id  v              a holds too  proving that m is model for k 
we now prove item     we show a reduction to our problem from the complement of the
hamiltonian path problem  given a directed graph g  we construct an instance of our problem
as in the proof of     except that q     id   pt     t             where      is as stated in
theorem     as shown in the proof of     k is consistent  moreover  there is no hamiltonian
path in g iff the pair hid   k    i is not an the optimistic answer to q      id   pt     t          
now observe that hid   k    i is not an the optimistic answer to q  iff hid   k    i is a cautious
answer to q     id   pt     t            for      sufficiently small  by reasoning as in the
proof of theorem     we can choose
p     which ensures that if there is an m  m k  such that
p
m
 w 
 
  
then
w w  loc id pt  t  m  w       
w w  loc id pt  t 

our query answering problem is related to the decision version of the entailment problem in
probabilistic logic  nilsson        georgakopoulos et al          which is as follows  given a conjunction  of clauses  each of them associated with a probability  and an additional clause c with
given lower and upper bounds on the admissible values for its probability  decide whether there is
a probability distribution satisfying the probability of all the clauses in  and the lower and upper
bounds for c  as in probabilistic logic  where the entailment problem can be reduced to psat  nilsson        georgakopoulos et al          we have shown that the query answering problem in pst
kbs can be reduced to the consistency checking problem  however  there is an important difference
between the query answering problem and the probabilistic entailment problem  we assume that the
input pst kbs is consistent  while the entailment problem is defined for any   even if  is not
satisfiable   as a consequence  the conp hardness of the probabilistic entailment problem straightforwardly follows from the np hardness of psat   is unsatisfiable iff any contradiction c with
any lower and upper bounds is entailed by    that is  satisfiability is a source of complexity for the
probabilistic entailment problem  however  in our setting  we are given a consistent pst kb and
thus checking the consistency cannot be a source of complexity for the query answering problem  in
fact  theorem    can be viewed as strengthening the conp hardness of the probabilistic entailment
problem  as it is proved in a more specific setting corresponding to the case where the input formula
 is known to be satisfiable 
   

fik nowledge r epresentation in p robabilistic s patio  t emporal k nowledge bases

    sets of linear inequalities for answering queries
the following corollary of theorems   and    states that the set of mixed binary linear inequalities
mbl   introduced in definition   can be also exploited for answering queries 
corollary    let k   ha  fi be a consistent pst kb  and q     id  q   t      u   a query  then 
   if there is a feasible solution of mbl ha loc id  q  t     u    fi   then hid  ti is an optimistic
answer to q w r t  k 
   if mbl ha   loc id  q  t            fi  or mbl ha   loc id  q  t  u          fi  has a
feasible solution  then hid  ti is not a cautious answer to q w r t  k  where  is as given in
theorem     
similarly  from theorems   and    the following corollary follows  stating that the linear system
nc   introduced in definition   can be also used for answering queries 
corollary    let k   ha  fi be a consistent pst kb  and q     id  q   t      u   a query  then 
   if there is no feasible solution of nc ha   loc id  q  t     u    fi   then hid  ti is not an
optimistic answer to q w r t  k 
   if both nc ha   loc id  q  t           fi  and nc ha   loc id  q  t  u          fi  have
no feasible solution  then hid  ti is a cautious answer to q w r t  k  where  is as given in
theorem     
moreover  we obtain the following corollary of theorems   and    

corollary    let k   ha  fi be a consistent pst kb where f     loc id     p     t    
loc id     p     t         loc idn    pn    tn      and q     id  q   t      u   be a query  then 
   hid  ti is an optimistic answer to q w r t  k iff there is a feasible solution of nc ha 
 loc id  q  t     u    fi  
   hid  ti is a cautious answer to q w r t  k iff both nc ha   loc id  q  t           fi  and
nc ha   loc id  q  t  u          fi  have no feasible solution  where  is as given in theorem    
from theorems   and    we obtain the following result 
corollary    let k   ha  fi be a consistent pst kb where f consists of binary std formulas
only  and q     id  q   t      u   be a query  if ag is acyclic  then
   hid  ti is an optimistic answer to q w r t  k iff there is a feasible solution of bc ha 
 loc id  q  t     u    fi  
   hid  ti is a cautious answer to q w r t  k iff both bc ha   loc id  q  t           fi  and
bc ha   loc id  q  t  u          fi  have no feasible solution  where  is as given in theorem    
moreover  the results of theorem    where the shape of the auxiliary graph is not considered 
and theorem    entail the following 
   

fiparisi   g rant

corollary    let k   ha  fi be a consistent pst kb where f consists of binary std formulas
only  and q     id  q   t      u   be a query  then
   if there is no feasible solution of bc ha   loc id  q  t     u    fi   then hid  ti is not an
optimistic answer to q w r t  k
   if both bc ha   loc id  q  t           fi  and bc ha   loc id  q  t  u          fi  have
no feasible solution  then hid  ti is a cautious answer to q w r t  k  where  is as given in
theorem     
still  from theorems   and    we obtain the following corollary 
corollary    let k   ha  fi be a consistent pst kb where f consists of binary std formulas
only  and q     id  q   t      u   be a query  if ag is simple clique cyclic  then
   hid  ti is an optimistic answer to q w r t  k iff there is a feasible solution of cl ha 
 loc id  q  t     u    fi  
   hid  ti is a cautious answer to q w r t  k iff both cl ha   loc id  q  t           fi  and
cl ha   loc id  q  t  u          fi  have no feasible solution  where  is as given in theorem    
finally  we state the following corollary of theorems   and    concerning cases where computing selection queries is tractable  although the result is stated assuming that only binary stdformulas are in the pst kb  it holds for the more general case where both unary and binary stdformulas are in the pst kb since  using the approach suggested in the proof of theorem    we can
assume that unary std formulas are encoded as pst atoms 
corollary    let k   ha  fi be a pst kb where f consists of binary std formulas only  if
g is clique acyclic or simple clique cyclic  then deciding whether hid  ti is an optimistic cautious
answer to selection query q     id  q   t      u   is in ptime 

   domain enlargement
up to this point we have assumed that the three domains id    id            idm    t                 
tmax   and space    p            pn   are fixed  in this context we have investigated the consistency
of a pst kb  in this section we investigate what happens to a pst kb if one or more domains
are modified  the modification consists of possibly adding new time values  or spatial points  or
objects  in fact  we are interested in what happens as we add arbitrarily many  but a finite number
of  entities  in section     we consider the case where we deal with a longer time period and add
additional time values beyond tmax  in section     we again deal with time but in this case we
allow for a finer division of time values  section     deals with the case where space is enlarged 
that is  new points are added  finally  in section     we deal both with additional objects as well as
combinations of domain enlargement 
    extending time beyond tmax
we start with a pst kb k using id  t   and space  suppose now that we extend t beyond tmax 
we write t                    tmax          t     this means that the syntax must also be extended with the
   

fik nowledge r epresentation in p robabilistic s patio  t emporal k nowledge bases

constants tmax              t    however  k does not use any of the new constants  but the semantics is
different now because each world w  must be a function w    id  t    space  we write w for
the set of worlds using t and w   for the set of worlds using t     the connection between w and
w   is that every w  w can be extended to many worlds in w   by choosing a point in space for
each new time value for each object  but from any one world w   w   there is a unique restriction
to a world in w   satisfaction for the worlds in w   is defined in the same way as satisfaction for the
worlds in w  with w   substituted for w   
our interest in the semantics is due to the concept of interpretation where an interpretation
assigns each world a probability  let w    w            wz   where z   nm tmax    and let w    
 
 w             wy    where y   nm t       for every wi  w   we define the set of worlds wi   
 wj   wj   w   and wj  is an extension of wi    this means that the restriction of every wj   wi  is
wi   next  letpi  be an interpretation on w   we call an interpretation i   an extension of i  if for all i 
   i  z  w  w   i    w      i   wi    that is  the probability value of i   wi   is distributed among
i
the extensions of wi for each i  we can also go in the other direction  if i   is an interpretation
on
p
 
 
w   we define its restriction to w   i    by using the same formula  that is  i   wi     w  w   i   w   
i
for all i     i  z 
this framework allows us to investigate what happens to the consistency and inconsistency of
k as we go from t to t     we start with inconsistency  we state the next theorem in two different
forms because both are useful in various contexts 
theorem     let k contain only time values in t  
a  if k is inconsistent with time t   then k remains inconsistent if t is expanded to t    
b  if t   is an expansion of t and k is consistent with t   then it is consistent with t  
proof  as the second part is the contrapositive of the first  it suffices to prove just one part  we
prove the second one  so assume that k  which uses only time values in t   is consistent when t
is expanded to t     this means that there is an interpretation m   for k  using w     that is a model
of k  wep
obtain an interpretation m  for w   from m   using the formula given above  that is 
m  wi     w  w   m    w    for all i     i  z  we need to show that m is a model of k 
i
consider first the atomic formulas in
wi   wi    loc id  r  t  iff w    
pa  clearly  for any worldp
 
 
 
 
loc id  r  t  for all w  wi   hence  w w  loc id r t  m  w   
w   w    loc id r t  m  w    this
takes care of a 
p
p
next  let f  f  then w   w     f m    w         we need to show that also w w   f m  w      
let wi  w be a world such that wi     f   this means that there is a substitution  using only time
values in t such that wi      f    but  remains a substitutionpwhen t   is used for time  so for all
wj   wi    wj       f    as m   is a model of k and hence f  w   w     f m    w        and the result
follows from the definition of m  
next we consider the case where a pst kb defined using t is consistent  it turns out that
consistency need not be preserved when t is expanded to t     consider the case of the following
single integrity constraint 
x  x  y  z   loc x    y    z     loc x    y    z     x     x   tmax   z    and suppose that
 id     space   the std formula states that two different objects cannot be in the same location
after time tmax  the condition tmax   z  is false for all substitutions for z    hence the integrity
constraint is automatically true  but once t is enlarged to any t      t    say t    tmax      there is
   

fiparisi   g rant

an inconsistency because there are not enough points in space for all the objects to occupy distinct
points  we now show that for a given consistent k we can always extend t               tmax  to
t big               tmax          tbig  such that if k is consistent with t big then k remains consistent for
any t   with t                 tmax          t     essentially  we must make sure that for every time variable
there is a substitution that makes each conjunct true in each f   for example  if the previous example
is modified to
x  x  y  z  z   loc x    y    z     loc x    y    z     x     x   tmax   z   z    z       then
we must have enough time values to include tmax      we show how to do this systematically in
the proof of the next theorem 
theorem     for a consistent pst kb k defined with time values t               tmax   there is always a finite time value tbig  tmax that can be computed in linear time  such that if k is consistent
using t big               tmax          tbig  then k is consistent for all t                 tmax          t    
proof  we obtain a time value tf for each integrity constraint f  f  for each f we initialize
tf   tmax      if f contains at most one time variable z then we are done for f   so suppose that f
has at least one conjunct with two distinct time variables  that must have one of the following four
forms  where any    is omitted      zi   m   zj   n     zi   m    zj   n     zi   m   zj   n 
or    zi   m  zj   n  the process involves adding a certain number to tf for each such conjunct 
for type    add  m  n   for type    add    for type    add max    m  n       and for type    add
max    n  m   then  by adding all the numbers for such conjuncts we obtain a tf value for each
f  f  let tbig   maxf f  tf    this process is linear in the size of f 
we must show that if k is consistent for t big then it is consistent for any t                 tmax 
        t     if t   tbig then consistency follows from theorem   b   so assume that tbig  t  and
k is consistent for t big   this means that there is an interpretation m big that is a model for k 
just as in the proof of theorem     the issue concerns only the constraints in f  we write w big
for
all worlds using t big and write wb for an arbitrary world in w big   for any f  f 
p the set of big
m  wb        we obtain m   from m big in an arbitrary way as long as the formula
b
b
pw  w    f    
 w     m big  wib   is satisfied  to show that m   is a model for k with t     we need to
w  wi  m
p
show that w   w     f m  w         so let wi   w   be such that wi      f   then there is a substitution
  such that wi         f    this   may include any time values in t     but our construction assures
that there is already a substitution b using only values in t big so that the world wib which is the
restriction of wi  to t big is such that wib     b  f    hence m   is a model for k with t    
these results allow us to consider the case of arbitrarily large  finite  time 
definition     we call k eventually consistent  resp  inconsistent  for time if there is an integer
l such that k is consistent  resp  inconsistent  for all t                l            
corollary    every k is either eventually consistent for time or eventually inconsistent for time 
proof  if k is inconsistent with time t then by theorem   a  it is eventually inconsistent for time 
if k is consistent with time t then there are two cases  if k is still consistent with time t big
as computed in the proof of theorem    then it is eventually consistent for time  otherwise we
conclude from theorem   a  that it is eventually inconsistent for time 
consider now how our results can be used for query answering when we expand time from
t               tmax  to t                 tmax          t     in order to avoid confusion we write k where
   

fik nowledge r epresentation in p robabilistic s patio  t emporal k nowledge bases

the time is t and k  when the time is t     first  if k is inconsistent  according to theorem   a  
k  is also inconsistent  so consider the case where k is consistent  recall that queries are evaluated
on consistent pst kbs   note that when we check if the pair hid  ti is an answer to q with the
expansion of t to t     this considers also time values t where tmax   t  t    using theorem   
we obtain 
 hid  ti is an optimistic answer to q w r t  k  iff ha   loc id  q  t     u    fi is consistent
using t     we do not need to check separately that k  is consistent because k   ha 
 loc id  q  t     u    fi 
 but to check for a cautious answer  we first check that k  is consistent  and if so  then
hid  ti is a cautious answer to q w r t  k  iff ha   loc id  q  t            fi and ha 
 loc id  q  t  u          fi are not consistent using t     where  is as given in theorem    
in a similar vein  theorem    carries over also to the case of extended time 
    extending time by more frequent time values
in the second type of time extension we consider more frequent time values  so that there are more
than tmax     time values between   and tmax  for illustration  we will use t                     
        tmax   again  the syntax must be changed as well to include the new constants           and
so on  however  the original k is defined using t                  tmax  and does not contain any new
constant  the situation for worlds is similar to what happened in the previous subsection  every
w   id  t  space is a unique restriction of many worlds  ws  w    id  t    space  also 
satisfaction for the worlds in w   using t   is defined the same way as for the worlds in w using t  
our first result is the same for this type of time extension as for the previous one 
theorem     let k contain only time values in t  
a  if k is inconsistent with time t   then k remains inconsistent if t is expanded to t    
b  if t   is an expansion of t and k is consistent with t   then it is consistent with t  
proof  analogous to the proof of theorem    
next we consider the case where k is consistent  using t    again  consistency need not be
preserved in going from t to t     consider the case of the following std formula 
y  z   loc id    y    z     z       z       
this formula states that id  cannot be at any location between   and    the condition     z  z   
  is false for all substitutions in t   hence the integrity constraint is true  but if we expand to t   then
the substitution of     for z  makes the formula state that id  cannot be at any location at time     
making it inconsistent  however  we can extend t to more frequent time values t f r such that if k
is consistent for t f r then it will be consistent for any subdivision of the original time values 
theorem     for a consistent pst kb k defined with time values t               tmax   there is
always an integer value  that can be computed in linear time  such that if k is consistent using
t f r                            
           tmax  then k remains consistent for every subdivision of t  
   

fiparisi   g rant

proof  the proof is analogous to the proof of theorem     we calculate an integer f for each
integrity constraint f  f and let    maxf f  f    the idea is to make sure that there are
enough time values to allow any  z  that can become true by some subdivision of time intervals
to become true by substitution  in the worst case every time variable may require a new subdivision
of the time values  hence we can choose f    k where k is the number of time variables in f  
the rest of the proof is analogous to the proof of theorem    
as in the previous section where we wanted to consider arbitrarily large time values  now we
consider dividing time intervals arbitrarily many times 
definition     we call k divisionally consistent  resp  inconsistent  for time if there is an integer
l such that k is consistent  resp  inconsistent  for all t                       tmax  where    l 
corollary     every k is either divisionally consistent for time or divisionally inconsistent for time 
proof  analogous to the proof of corollary   
results analogous to the time expansion done in section     hold here also for query answering
and complexity 
    space enlargement
in this subsection we consider what happens to the consistency or inconsistency of k if space
is enlarged  say from space    p            pn   to space     p            pn           pv    the change in
semantics is different in this case than when we expanded t   if w   id  t  space is a world
 for space   it remains a world for space    so writing w for the set of worlds using space and
w   for the set of worlds using space    we obtain w  w     there is no change in the definition of
satisfaction  but the number of interpretations becomes greatly enlarged  still  every interpretation
i using space can be extended to a unique i   using space  by assigning i    w        for all w  
w    w 
as in the case of time  we start with the case where k is inconsistent  but unlike for time  when
space is enlarged k may become consistent  consider the simple example where k consists of a
single atom  a   loc id     p            pn                k is inconsistent  but if we add just a single point
to space so space     p            pn   pn     then k becomes consistent  for instance if w   is the world
where w    id         p  and the other values are arbitrary  and w   is the world where w    id        
pn   and the other values are arbitrary  then assigning i    w           and i    w           with i    w     
  for all other worlds makes i   a model  a similar situation may occur with integrity constraints 
consider k that contains a single std formula  f   x  y  z   loc x    y    z   y  ov  p            pn   
since every region overlaps with space  f   by itself  is inconsistent  but again  if we enlarge space
by one point pn   to space  we can find a model i   as follows  let i    w        for every world
 
w  where w   id  t  
pspace for  some hid  ti pair  and i  w        where w   id  t    pn   for all
hid  ti pairs  then w   w     f i  w       hence the inconsistency is removed  however  suppose
that in addition to f   k also contains the atom a   loc id     p              in a  that is  now a    a 
and f    f    the pst atom a states that id  must be at p  at time    in that case we cannot make
k consistent by adding any number of points to space because a and f are in conflict  hence there
is no general statement about what happens to an inconsistent pst kb when space is extended to
space   
   

fik nowledge r epresentation in p robabilistic s patio  t emporal k nowledge bases

next we consider the case where k is consistent  using space   in this case we can show that it
remains consistent when space is expanded to space   
theorem     if k is consistent with space  then k remains consistent when space is enlarged to
space   
proof  let m be a model for k  using space   m assigns a probability m  w  to each world w 
when space is extended to space    many new worlds are added  we define m    w    m  w  if w
is a world where only space is used and m    w      otherwise  thus by basically excluding the
worlds using points other than space in the sense that they are given probability    m   is a model
of k using space    hence consistency is preserved 
again  just as in the case of time  we are interested in what happens for arbitrarily large finite
spaces 
definition     we call k eventually consistent  resp  inconsistent  for space if there is an integer
l such that k is consistent  resp  inconsistent  for all space    p            pn           pl           p   
corollary     every k is either eventually consistent for space or eventually inconsistent for space 
proof  there are two cases  we start with the first case where k is consistent with space  then 
by theorem    it remains consistent for any larger space    hence it is eventually consistent for
space  consider now the second case where k is inconsistent with space  there are two subcases 
first  suppose that k becomes consistent with some larger space    then  just as in the first case  by
theorem    k is eventually consistent for space  the second subcase is where k never becomes
consistent no matter how space is extended to space    this means that k is eventually inconsistent
for space 
we showed earlier by examples that an inconsistent k  with space  may become consistent if
space is enlarged  we can calculate a bound for the size of the needed space such that after that
bound is reached the consistency or inconsistency does not change with further spatial enlargement 
theorem     for every inconsistent k using space    p            pn    there is an explicit bound l
that is tractable to compute such that if k using space     p            pl   is inconsistent  it remains
inconsistent for any enlargement of space   
proof  we already know from the above corollary that such an l exists  we now show how to
compute it  first of all  if no enlargement of space resolves the inconsistency of k then k is
eventually inconsistent for space and we can choose l   n  thus we need to deal in more detail
only with the case where an enlargement of space resolves the inconsistency of k  that is  k is
eventually consistent for space  so we consider how adding points to space can make k consistent 
there are three cases 
   the inconsistency is due to a alone 
   the inconsistency is due to a combination of elements from both a and f  and
   the inconsistency is due to f only 
   

fiparisi   g rant

consider first that in case   an inconsistency must be due to atoms with some fixed id and t
values  so we assume that we are dealing only with atoms using a specific pair of values  id and
t  adding a point or points to space can resolve an inconsistency only if the atoms using id and t
give space a probability less than    for instance  let a    loc id  r    t             loc id  r    t       
       where r   r    space  then  enlarging space to space    space   pn     resolves
the inconsistency  this is true in general  not just for this example  because once pn   is added
to space   p            pn   becomes a proper subset of the relevant space  and may consistently have
probability less than    now  consider that a may have inconsistencies involving multiple pairs of
id and t values  but that does not matter because the addition of the single point pn   to space
resolves all such inconsistencies  so in case   we can choose l   n     
in case   an inconsistency of k is due to a combination of elements from a and f  as every
atom a in a refers to a specific region r for a specific object id and time value t  for an inconsistency
to occur with some f  f  some substitution of f must act as an atom  with probability interval
         for instance  let a   loc id  r    t            and f   x   loc x    r    t   where r   r   
space  the instance of f that causes the inconsistency is  loc id  r    t   which has the same effect
by the semantics as the atom loc id  r    t           this is true in general  not just for this example 
in this way case   reduces to case   and we can choose l   n     
the last case  case    is where an inconsistency is due just to f  the problem in this case is
due to the fact that f requires more points than are in space  so we need to consider what can be
expressed about the number of spatial points by std formulas  this cannot be done by writing many
spatial variables because if formula f has m spatial variables  say y            ym   there is no way to
express that they must all refer to different points  however  we can express that space does not
have enough points by writing f    x  y  z   loc x    y    z     y  ov space   again  adding a
single point to space resolves the inconsistency  we can also write std formulas that require at least
a certain number of points  we can express the constraint that a point can be occupied by at most
one object at one time by using the following   std formulas 
f    x  y  z  z   loc x    y    z     loc x    y    z     z     z   
f    x  x  y  z   loc x    y    z     loc x    y    z     x     x   
f    x  x  y  z  z   loc x    y    z     loc x    y    z     x     x   z     z   
f  states that no object can be at the same point at two different times  f  states that at no time can
two objects be at the same point  f  states that two different objects cannot be at the same point
at two different times  hence using std formulas we can reference the number of objects times the
number of time points  let l   n    id    tmax       thus space     p            pl   consists
of a point for each object and time point in addition to the original n points in space  so that we
can place objects in space  even when none of the points in space can be used and each object
needs a new point at each time point  clearly  l   n      so this l works for cases   and   as
well  so this is the value of l that we choose for the tractable explicit bound  thus if k using
space     p            pl   is still inconsistent  no points added to space  can make it consistent 
    extending the number of objects or several entities
the last case where the number of constants may be increased is for id  since a world w is a
function w   id  t  space  the expansion of objects is similar to the expansion of time  not
   

fik nowledge r epresentation in p robabilistic s patio  t emporal k nowledge bases

to the expansion of space  so the extension and restriction of interpretations going from an id to a
larger id  is analogous to the addition of time values to t   without getting into the details which are
analogous to the cases for time given earlier  we can state that if k is inconsistent with id  it remains
inconsistent if id is expanded to id    to show that consistency need not be preserved  consider f  
x  x        xm    loc x    y    z   loc x    y    z        loc xm     ym     zm    x     x  
x     x          xi    xj         xm    xm     for i    j  recalling that id    id            idm   we
find that k    f   is consistent with id because it states that there cannot be more than m distinct
objects  but it becomes inconsistent if id is enlarged to id     id            idm   idm      but we can
always find a q  m in linear time such that if k is consistent for id     id            idm           idq  
then k is consistent for any enlargement of id    obtaining the value q is easier than obtaining
tbig for time  it is just a matter of counting up the number of x variables in each f  f and
taking the maximum such value  if bigger than m  hence if we define eventually consistent  resp 
inconsistent  for objects in the same way as for time  we obtain the result that every k is either
eventually consistent for objects or eventually inconsistent for objects 
so far we have only considered individual enlargements of either time values or points in space
or objects  but we may be interested also in combining several types of extensions  as the expansion
of time and objects are similar  we start by combining them 
definition     we call k using id  t   and space eventually consistent  resp  inconsistent  for
objects and general time if there are integers l    l    and l  such that k is consistent  resp 
inconsistent  for all id    id            idm           idl            id    space    p            pn    and t  
tmax  
                         
                    where    l  and    l   
         tmax 

the combination of the expansion of objects and time both in magnitude and divisionally works
essentially in the same way as the expansion of only one of these items  that is  if the set of all
worlds for the original k is w and the set for all worlds with the expansion to id and t is w    
then for every world in w there is a set of extensions in w   and for every world in w   there is a
unique world in w that is its restriction  the key issue is that space remains unchanged 
now let k contain time values in t   regions in space and objects in id  suppose that t is
expanded to t   where the expansion may be both in magnitude and division and id is expanded to
id  and find that k  in the context of t   and id  with space unchanged  is consistent  just as in the
proof of theorem    we start with a model m   for k using t   and id  and obtain the corresponding
model m for k using the starting t and id  thus  by the contrapositive  if k is inconsistent with
t   space and id  it remains inconsistent with t     space and id    this shows that any inconsistent
k is eventually inconsistent for objects and general time  in case k is consistent with t   space and
id and becomes inconsistent with the expansion to t     space and id    then again it is eventually
inconsistent for objects and general time  the only alternative is for k to remain consistent no
matter how t and id are expanded  hence our earlier results can be put together as the following
result 
theorem     every pst kb k is either eventually consistent for objects and general time or it is
eventually inconsistent for objects and general time 
however  the situation is different in the cases where we combine space with time or with objects
as we show using an example   
    this example was suggested by one of the reviewers 

   

fiparisi   g rant

example     consider the pst kb k   h   f  i defined using id    id            idm    t  
               tmax   and space    p            pn   with m  n where f is the std formula f  used
in the proof of theorem    which states that two different objects cannot be at the same point
at the same time  because of the condition m  n  k is consistent  expand id to id   
 id            idm           idn     leaving t and space unchanged and call the new kb k    now there
are too many objects for the number of points  hence k  is inconsistent  next  expand space to
space      p            pn   pn     while leaving id  and t unchanged and call the new kb k     k   is
consistent 
 
this example shows that we cannot claim eventual  in consistency if both the number of objects
and the number of points may increase as we can just continue the process indefinitely  an analogous result holds in case both the number of time values and the number of points may increase 

   related work
we first discuss related works on classical probabilistic logic that does not have explicit spatial and
temporal components  then we discuss the relationship between our work and other spatio temporal
approaches  finally  we relate our framework to object tracking 
    probabilistic logic
as discussed in section    a pst kb can be expressed in classical propositional logic  hailperin 
      nilsson        paris         and in particular the consistency checking problem can be
formulated in terms of probabilistic satisfiability  psat   whose first formulation is attributed to
boole         after its presentation to the ai community by nilsson         the study of psat
from the point of view of efficient algorithms and computational complexity was first addressed
by georgakopoulos et al          who showed that psat is in np and np hard even for binary
clauses  the tractable results identified by georgakopoulos et al  concern the special case where
each clause involves at most two literals   psat  and the graph of clauses is outerplanar    where
the graph of clauses contains a vertex for each literal and two kinds of edges  i  an edge between
each pair of literals built from the same propositional variable  and  ii  an edge for each pair of
literals appearing in the same clause  we note that the psat formula k encoding pst kb k
 see the proof of theorem    contains more than two literals per clause even if we focus on binary
std formulas  k becomes a  psat formula only if we assume that space consists of just two
points  
the result provided by georgakopoulos et al  relies on reducing  psat to a tractable instance
of  maxsat  weighted maximum satisfiability problem with at most two literals per clause   using this reduction and the result of conforti and cornuejols        on the tractability of problems
that can be formulated as an integer program whose matrix is balanced  the following general result
was provided by conforti and cornuejols  psat is tractable for a balanced set of clauses  that is 
for a set of clauses whose corresponding        clause variable matrix is balanced  however  this
result also doesnt help in finding tractable cases for pst kbs k through reduction to psat k   as
considering three points is space suffices to make the matrix corresponding to k not balanced  it
entails the presence of an odd cycle in the graph of clauses that  as observed by andersen   pre    a graph is said to be outerplanar if it can be embedded in the plane so that all of its vertices lie on the same face 
that is  it can be drawn in the plane without crossings in such a way that no vertex is totally surrounded by edges 

   

fik nowledge r epresentation in p robabilistic s patio  t emporal k nowledge bases

tolani        characterizes non balanced matrices   motivated by the fact that the tractable cases for
psat identified by georgakopoulos et al  and conforti and cornuejols rely on using a polynomial
time algorithm whose complexity is characterized by a high polynomial degree  specifically  the
complexity is o n  log n  where n is the number of propositional variables   andersen and pretolani identified more efficient algorithms for the classes of balanced sets of clauses that can be
represented by either hypertrees  where each hyperarc corresponds to the set of literals in a clause 
or such that the co occurrence graph is a partial k tree  bodlaender        
it is worth noting that none of the tractable cases identified in this paper can be derived from
the results for psat described above by reducing k to the psat formula k   in fact  our tractable
cases derive from the specific structure of pst kbs  on the other hand  our tractability results
entail the tractability of psat instances that can be reduced to a tractable instance of the consistency
checking problem  in particular  we can decide in polynomial time psat instances k having the
structure specified in our reduction from the consistency checking problem to psat  and such that
the consistency checking problem for the corresponding pst kb k turns out to be tractable 
in principle  the fact that there is a reduction from the consistency checking problem to psat
enables well known techniques for solving  general  instances of psat based on column generation  kavvadias   papadimitriou        jaumard et al         to be used for addressing the consistency of pst kbs  the same holds for the problem of answering selection queries in pst
kbs that  as shown in section    can be addressed by solving suitable instances of the consistency
checking problem  recent approaches to solve psat using sat  finger   bona        or integer
linear programming  cozman   di ianni        for column selection report experiments showing
a phase transition behaviour  first observed by finger and bona for psat  depending on the fraction between the number of clauses and propositional variables as well as the number of probability
assignments  using these techniques psat instances with hundreds of propositional variables and
clauses can be solved in reasonable time  however  we believe that reducing the consistency checking  or query answering  problem to psat and then applying these techniques as they are would
not be a successful approach  as the number of propositional variables and clauses that would be
generated would be huge even for small size pst kbs  to avoid this problem  we conjecture that
the specific structure of  psat formulas encoding  pst kbs could be exploited to devise more
efficient techniques for solving the consistency checking and the query answering problems  in this
regard  it would be interesting to investigate the connection between our framework and the emerging field of lifted probabilistic inference  kersting         where the structure of fol constructs
 such as indistinguishable individuals  is exploited to speed up the reasoning process  and see if
some results can carry over into pst kbs 
the use of integrity constraints to encode domain knowledge has been studied by lukasiewicz
             and flesca  furfaro  and parisi         for probabilistic frameworks which however
do not explicitly deal with space and time  the problem of probabilistic deduction in the presence
of conditional constraints over basic events was addressed by lukasiewicz         who identified
tractable instances of probabilistic kbs  whose conditional constraints define conditional constraint
trees  to support deduction over paths of premise conclusions basic events  the problem of checking
the consistency of relational probabilistic databases  where tuples can be viewed as basic events 
in the presence of denial constraints was addressed by flesca et al   who provided tractability results for constraints whose conflict hypergraph  chomicki  marcinkowski    staworko        is acyclic  fagin        as well as for a special kind of cyclic hypergraphs  which can encode neither
clique acyclic std graphs nor simple clique cyclic std graphs  an important probabilistic logic pro   

fiparisi   g rant

gramming approach with conditional constraints was proposed by lukasiewicz         who studied
the complexity of the satisfiability and the entailment problems for several types of formulas but
without identifying tractable cases  differently from the above cited papers  the atomic information
in our framework has a structure involving objects  space  and time  and thus atoms may also be
intrinsically related because they are about the same object  or space  or time value 
    spatio temporal approaches
substantial work has been done on spatio temporal logics  gabelaia et al         knapp et al  
      which combine spatial and temporal formalisms  this includes important contributions on
qualitative spatio temporal representation and reasoning  muller        wolter   zakharyaschev 
      cohn   hazarika         which focus on describing entities and qualitative relationships
between them while dealing with discrete time  cohn  li  liu  and renz        provided an upto date overview of the work done in the field of qualitative spatial reasoning  where recently the
important problem of combining topological and directional information for extended spatial objects
has been addressed  however  these works are not intended for reasoning about moving objects
whose location at a given time is uncertain  they do not put probabilities into the mix   yaman
et al             a      b  focused on spatio temporal logical theories that describe known plans
of moving objects by sets of go atoms  each of them stating that an object can go from location
l  to l    leaving l  and reaching l  at some time in some intervals  and travelling with a speed
in a given interval  later  parker et al       b  extended this logic to include some probabilistic
information about such plans  the spot framework of parker et al       a  further extended that
work to uncertainty about where objects might be at a given time 
past work on the spot framework investigated efficient algorithms for computing optimistic
and cautious answers to selection queries  parker et al         parisi et al          the initial spot
framework on which we build by adding integrity constraints has been implemented and tested on
real us navy databases containing ship location data  parker et al         parisi et al          aggregate queries have been recently investigated by grant et al          who proposed three semantics
along with computational methods for evaluating them  as spot databases provide information
on moving objects  one important aspect addressed by parker et al         and then further investigated by grant et al         is that of revising spot data so that information on these objects may
be changed as objects move  grant et al         proposed several strategies for revising spot data
such as finding maximal consistent subsets  minimally modifying the spatial  temporal  object  or
probability components of pst atoms  a full logic including negation  disjunction and quantifiers
for managing spot data was recently proposed by doder et al          who focused on finding
sound and complete sets of axioms for several fragments of the logic  grant  parisi  and subrahmanian        provided a comprehensive survey on the spot framework where other related research
is also reviewed 
while there is much work on spatio temporal databases  agarwal et al         pelanis et al  
      and probabilistic spatio temporal databases  tao et al         zhang  chen  jensen  ooi   
zhang        zheng  trajcevski  zhou    scheuermann         these works mainly focus on devising indexing mechanisms and scaling query computation  instead of representing knowledge in
a declarative fashion  in particular  chung  lee  and chen        use indexing to speed the computation of range queries and derive a pdf for the location of an object moving in a one dimensional
space by using its past moving behavior or the moving velocity distribution  zhang et al        
   

fik nowledge r epresentation in p robabilistic s patio  t emporal k nowledge bases

provide a b x  tree index which is a variant of a b    tree applicable to moving objects whose location
and velocity are uncertain  two types of pruning are introduced by yang  lu  and jensen       
to efficiently solve queries asking for all sets of k objects that have at least a threshold probability
of containing the k nearest objects to a given object  dealing with a similar problem  chen  qin 
and liu        propose a tpr tree for indexing  finally  zheng et al         deal primarily with
objects moving along road networks  and introduce an indexing mechanism for efficiently processing probabilistic range queries  however  none of these works systematically addresses the issue of
considering integrity constraints over probabilistic spatio temporal data 
    object tracking
object tracking is one of the most important problems in computer vision  szeliski        where
the consecutive positions of a tracked object are estimated as it moves in different frames of a
video  numerous approaches for object tracking have been proposed  mainly differing from each
other on the type of object representation used  e g   centroid  primitive geometric shapes   image
features selected  e g   colour  optical flow   and object detection method adopted  e g   background
subtraction  segmentation   however  the tracking algorithm to be chosen in a given application
strongly depends on the application domain  yilmaz  javed    shah         moreover  as object
tracking algorithms may incur errors  due for instance to loss of information caused by projection
of the  d world on a  d image  noise in images  partial and full object occlusions  the estimation of
the position of tracked moving objects is inherently uncertain  even if a camera focuses on a fixed 
specific area   several important statistical methods for object tracking in computer vision  e g   see
broida   chellappa        beymer   konolige        rosales   sclaroff        are based on the
well known kalman filter        and its extensions to deal with the non linear case  as well as on
particle filtering  kitagawa        
filtering techniques have been extensively used for object tracking in the presence of sensors 
not only cameras  as a matter of fact  object tracking has been extensively addressed in the more
general setting where the position  i e   the state  of one or more objects is estimated by a recursive
bayesian filter given the measurements up to that time coming from different kinds of sensors
 including  for instance  radar  sonar  infrared  and other types of sensors possibly along with visual
sensors   stone  corwin    barlow         basically  at each observed time point t  the output
of the filter is a probability distribution  i e   the posterior  on the position of the target object 
which is computed by combining the motion updated at a time prior to t with the likelihood for
the observation received at time t  where the likelihood represents the probability of each sensor
measurement conditioned on the object position  bar shalom  kirubarajan    li        
the kalman filter has been used for discrete time estimation of continuous spatial positions of
objects whose movement equations can be assumed to be linear with gaussian noise  it has also
been used successfully in non linear systems by applying linearization and unscented transformation  julier  jeffrey    uhlmann         for discrete space and non linear systems  particle filtering
has been successfully used  providing a solution that can be applied to any state space model and
which generalizes the traditional kalman filtering methods  arulampalam  maskell  gordon   
clapp         a general framework for particle filtering based on sequential importance sampling with resampling was proposed by liu and chen         though a number of different types
of particle filters exist and some have been shown to outperform others when used for particular
applications  arulampalam et al         
   

fiparisi   g rant

differently from kalman filtering  where the estimated position of an object at each observed
time point is represented as a continuous distribution  particle filters are based on a histogram representation of the probability density  which is approximated by a finite number of particles  i e  
samples   each particle represents a position of space  and weights associated with particles  or the
proportion of the number of particles  define a histogram of the probability distribution over space 
this fits with the representation paradigm of pst kbs  as pst kbs allow us to represent  for each
object and time point  a pdf over space by defining a pst atom with a single valued probability
interval  that is      u  for each point in space  it can be used easily to represent the output of object tracking techniques based on particle filtering  for filtering techniques returning a continuous
distribution over space  a discretization step should be applied 
while the output of object tracking techniques can be represented using pst kbs  there are
important aspects that these techniques can deal with that pst kbs cannot do  in particular  filtering techniques use conditional independence to represent a pdf of an objects positions conditional
on its positions at the previous time  pst kbs can encode the output of this inference process 
but lack the expressive power to do that kind of inference  for instance  tracking techniques can
represent the knowledge that if an object is in a region r  at time t  then it is probably in region
r  at time t  with a probability depending on the time elapsed between t  and t    indeed trackers
can rely on a motion model according to which the distribution for an objects location spreads out
with the elapsed time since the last measurement  the distribution for the objects locations will be
narrowly focused on locations near the measured position at t  if t  is close to t    but it will diffuse
if t  is faraway t    while tracking techniques can do this sort of things quite naturally  pst kbs
can only capture some aspects of this behavior  for instance  we can express the fact that the object
is probably in region r  at t    and use an integrity constraint imposing that it can travel no more
than d distance units in   time point  this would increase the probability of finding the object at
time t  in a region less than d units away from r    and it would decrease the probability of finding
the object in a region farther away than d units  however  this is different from what can be inferred
by tracking techniques using conditional independence 
on the other hand  tracking techniques do not combine very well with interval probabilities 
in fact they typically return the pdf of an objects position at each observed time point  in contrast  using general pst atoms  with probability intervals   for each object and time point  all the
 possibly infinite in number  pdfs that are compatible with the probability intervals specified by
the atoms are succinctly represented  for instance  assuming space    p    p    and the pst atom
loc id   p     t           all the pdfs f over space assigning a probability f  p    in          and
f  p         f  p    are represented  however  the set of pdfs represented can be restricted by using
single valued probability intervals or by adding integrity constraints using std formulas 
we note that the pst formalism allows us to impose integrity constraints over kbs that can
be obtained by integrating position data coming from different sources  consider for instance the
integration of several pst kbs  each of them consisting of pst atoms encoding the output of
an autonomous tracking system  the so obtained integrated kb is still a pst kb  and integrity
constraints can be used to express knowledge on the overall system  that could not be expressed
considering the tracking systems separately  for instance  suppose we have an integrated pst kb
consisting of the position data of monitored cars that are collected using black box tracking systems
installed over cars by insurance companies  then std formulas can be used to express correlations
among monitored cars  for instance  knowing that in region r there is a licensed inspection station
able to inspect at most k cars at the same time  we can impose the constraint that there cannot be
   

fik nowledge r epresentation in p robabilistic s patio  t emporal k nowledge bases

more than k cars in r at any time  this constraint would be meaningless if we considered the kb of
each car tracking system separately  but it is useful for restricting the set of consistent interpretations
of the pst kb obtained by integrating the several sources 

   summary
we believe that this is the first comprehensive paper that focuses systematically on knowledge representation in the form of integrity constraints for probabilistic spatio temporal data    the knowledge
is represented both in the form of spatio temporal atoms describing the location of objects in time
with a probability interval as well as spatio temporal denial formulas describing the integrity constraints the system must satisfy  within this framework we investigated the consistency checking
problem as well as the problem of answering selection queries in consistent pst kbs  although
both these problems turned out to be hard in the general case  we devised several sets of linear
inequalities which allow us to decide consistency as well as answer queries by checking their feasibility  in addition  we identified different classes of spatio temporal denial formulas for which
both checking consistency and answering queries are tractable  finally  we discussed an extension
of the framework to arbitrarily large finite numbers of objects  time values  and points in space and
showed that the behavior of consistency and inconsistency is uniform 

   future work and conclusion
there are further issues that can be investigated  following parisi and grant      b   where we
studied the problem of restoring the consistency of pst kbs of the form kha  i  where the set of
std formulas is empty   we will consider the problem of repairing an inconsistent pst kb where
inconsistency is due to the presence of std formulas that are not satisfied  in this regard it would be
interesting to devise methods for answering queries in inconsistent pst kbs  recently there has
been some research on probabilistic reasoning under inconsistency  picado muino        thimm 
      potyka   thimm        that can help in this regard  it would also be interesting to look
into the possibility of semantic query optimization for pst kbs  and to study the use of previous
knowledge to efficiently check for consistency and process queries after updates 
another direction for future work is the investigation of probabilistic std formulas for expressing
constraints that hold with a probability in a given interval  intuitively  this would allow us to state
for instance that two objects are not in the same region at the same time with probability greater
then a given threshold  instead of stating that they cannot be in such a situation  this kind of
probabilistic constraint could be expressed using pstd formulas of the form f        where f is an
std formula  i e   f        captures the meaning of an std formula   then the change in semantics
means changing
the definition of model  only the second part of definition   has to be modified to
p
f  f  w w  f m  w           clearly  lower bounds on the complexity of consistency checking
and query answering problems still hold for this extension  it is easy to check that the upper bound
provided by theorem   holds since a reduction to psat can still be provided by mapping pstdformulas to clauses associated with a probability interval  as regards tractable cases  we conjecture
that the results of theorems   and   still hold for pstd formulas of the form f        if the right hand
side of inequality     of definitions    and     respectively  is replaced with the lower probability
bound   of the ground pstd formula f        generating the inequality  however  allowing general
    this is a substantially revised and expanded version of the work by parisi and grant      a  

   

fiparisi   g rant

probability intervals associated with std formulas introduces new issues in the semantics  f     u 
would entail that f     u        holds  providing a clear and intuitive semantics for this kind of
std formula  as well as for probabilistic std formulas allowing probability intervals to be associated
with each conjunct  instead of the whole formula   is deferred to future work 
the pst formalism is propositional even though the atoms have substantial content  we have
added std formulas for integrity constraints  these are a special class of first order logic formulas  it would be interesting to consider other works on more general first order probabilistic logics  halpern        lukasiewicz   kern isberner        kern isberner   thimm         these
logics were developed for a different purpose but an attempt could be made to represent spatiotemporal information in them  there are other works as well that could be enhanced with spatiotemporal information  such as markov logic  richardson   domingos         or bayesian logic
programs  kersting   raedt         in particular  milch et al         introduces a first order language called blog  bayesian logic  for defining probability models over worlds with unknown
objects and identity uncertainty  which finds a natural application in object tracking for unknown
objects  it may be possible to find a generalization of the pst formalism that includes some of
these concepts  in doing so  an aspect that we need to take care of is the fact that markov logic
and bayesian logic programs deal with a unique probability distribution  while we deal with all the
probability distributions compatible with the pst atoms and std formulas 
researchers in ai have been studying spatial and temporal reasoning for many years  allen 
      randell  cui    cohn        galton         an interesting project will be the incorporation
of these concepts into the pst framework  the new syntax and semantics will include adding rules
to the language  these additions will allow both for adding other types of information as well as new
integrity constraints  for instance  using the concepts of qualitative direction and orientation proposed for spatial reasoning  galton        would allow us to explicitly represent knowledge about
the region toward which an object is moving  another important concept needed in many applications is the explicit representation of qualitative and quantitative distance between objects as well as
of information about the speed  i e   maximum or average  of objects  additional structured information about objects such as the type  e g   vessel  vehicle  person  etc   would be in general useful
to exhaustively reason about moving objects  however  depending on the addition made to increase
the expressive power of the extended framework  important consequences on the complexity of the
consistency checking problem may arise  spatial and temporal aspects of formalisms for qualitative
spatial and temporal reasoning are more expressive than what we have in our framework  gabelaia
et al         knapp et al          the trade off between expressiveness and complexity within the
hierarchy of formalisms obtained by combining well known spatial and temporal logics is analyzed
by gabelaia et al          where it is shown that the complexity of the satisfiability problem for
spatio temporal logics  not dealing with probabilities  can vary from np complete to undecidable 
using these formalisms in the pst framework may drastically increase the computational complexity of the problems studied in this paper  nevertheless  we believe that some attempt should
later be made to include even simpler concepts of qualitative spatio temporal reasoning to the pst
framework  particularly trying to exploit restrictions recently studied by huang  li  and renz       
to identify tractable fragments 
in this paper  we proposed a framework where four features of moving objects are taken into
account  the spatial component  the temporal component  the inherent uncertainty of acquired data 
and integrity constraints from the application domain  the expressiveness of these features could be
improved to represent additional knowledge that may be of interest in practical applications  partic   

fik nowledge r epresentation in p robabilistic s patio  t emporal k nowledge bases

ularly using ideas from papers dealing with spatio temporal reasoning  in the endeavor of a concrete
implementation of our framework  ideas from the postgis spatial database system which extends
postgresql would be useful  we believe it will be worthwhile later to incorporate more concepts
in the pst framework  we took a first step in extending the pst framework by the addition of
integrity constraints  and hope that researchers will use our work as a starting point in investigations
of the important role of integrity constraints in probabilistic spatio temporal knowledge bases 

acknowledgments
we wish to thank the referees for numerous helpful comments that helped us in substantially improving this paper 

references
agarwal  p  k   arge  l     erickson  j          indexing moving points  j  comput  syst  sci  
              
ahson  s  a     ilyas  m          location based services handbook  applications  technologies 
and security  crc press  hoboken  nj 
akdere  m   cetintemel  u   riondato  m   upfal  e     zdonik  s  b          the case for predictive database systems  opportunities and challenges  in proceedings of the  th biennial
conference on innovative data systems research  cidr   pp         
allen  j  f          towards a general theory of action and time  artif  intell                 
andersen  k  a     pretolani  d          easy cases of probabilistic satisfiability  ann  math  artif 
intell               
arulampalam  m  s   maskell  s   gordon  n  j     clapp  t          a tutorial on particle filters for
online nonlinear non gaussian bayesian tracking  ieee transactions on signal processing 
              
bar shalom  y   kirubarajan  t     li  x  r          estimation with applications to tracking and
navigation  john wiley   sons  inc   new york  ny  usa 
bayir  m  a   demirbas  m     eagle  n          mobility profiler  a framework for discovering
mobility profiles of cell phone users  pervasive and mobile computing                 
beymer  d     konolige  k          real time tracking of multiple people using continuous detection  in proceedings of the workshop on frame rate applications  methods and experiences
with regularly available technology and equipment  frame rate   in conjunction with
the  th ieee international conference on computer vision  iccv  
bodlaender  h  l          a partial k arboretum of graphs with bounded treewidth  theor  comput 
sci                 
boole  g          an investigation of the laws of thought on which are founded the mathematical
theories of logic and probabilities  macmillan  london 
broida  t  j     chellappa  r          estimation of object motion parameters from noisy images 
ieee trans  pattern anal  mach  intell              
   

fiparisi   g rant

chen  y  f   qin  x  l     liu  l          uncertain distance based range queries over uncertain
moving objects  j  comput  sci  technol                 
chomicki  j   marcinkowski  j     staworko  s          computing consistent query answers using
conflict hypergraphs  in proceedings of the      acm cikm international conference on
information and knowledge management  cikm   pp         
chung  b  s  e   lee  w  c     chen  a  l  p          processing probabilistic spatio temporal
range queries over moving objects with uncertainty  in proceedings of the   th international
conference on extending database technology  edbt   pp       
cohn  a  g     hazarika  s  m          qualitative spatial representation and reasoning  an
overview  fundam  inform                
cohn  a  g   li  s   liu  w     renz  j          reasoning about topological and cardinal direction
relations between   dimensional spatial objects  j  artif  intell  res   jair              
conforti  m     cornuejols  g          a class of logic problems solvable by linear programming 
in proceedings of the   rd annual symposium on foundations of computer science  focs  
pp         
cozman  f  g     di ianni  l  f          probabilistic satisfiability and coherence checking through
integer programming  int  j  approx  reasoning           
doder  d   grant  j     ognjanovic  z          probabilistic logics for objects located in space and
time  j  of logic and computation                
fagin  r          degrees of acyclicity for hypergraphs and relational database schemes  journal
of the acm        
finger  m     bona  g  d          probabilistic satisfiability  logic based algorithms and phase
transition  in proceedings of the   nd international joint conference on artificial intelligence
 ijcai   pp         
flesca  s   furfaro  f     parisi  f          consistency checking and querying in probabilistic
databases under integrity constraints  j  comput  syst  sci                   
gabelaia  d   kontchakov  r   kurucz  a   wolter  f     zakharyaschev  m          combining
spatial and temporal logics  expressiveness vs  complexity  j  artif  intell  res              
galton  a          spatial and temporal knowledge representation  earth science informatics       
       
georgakopoulos  g  f   kavvadias  d  j     papadimitriou  c  h          probabilistic satisfiability 
j  complexity            
grant  j   molinaro  c     parisi  f          aggregate count queries in probabilistic spatio temporal
databases  in proceedings of the  th international conference on scalable uncertainty management  sum   pp         
grant  j   parisi  f   parker  a     subrahmanian  v  s          an agm style belief revision mechanism for probabilistic spatio temporal logics  artif  intell                 
grant  j   parisi  f     subrahmanian  v  s          research in probabilistic spatiotemporal
databases  the spot framework  in advances in probabilistic databases for uncertain
information management  vol      of studies in fuzziness and soft computing  pp      
springer 
   

fik nowledge r epresentation in p robabilistic s patio  t emporal k nowledge bases

hailperin  t          probability logic  notre dame journal of formal logic                
halpern  j  y          an analysis of first order logics of probability  artif  intell                 
hammel  t   rogers  t  j     yetso  b          fusing live sensor data into situational multimedia
views  in proceedings of the  th international workshop on multimedia information systems
 mis   pp         
huang  j   li  j  j     renz  j          decomposition and tractability in qualitative spatial and
temporal reasoning  artif  intell               
jaumard  b   hansen  p     de aragao  m  p          column generation methods for probabilistic
logic  orsa journal on computing               
julier  s  j   jeffrey    uhlmann  k          unscented filtering and nonlinear estimation  proceedings of the ieee             
junger  m   liebling  t   naddef  d   nemhauser  g   pulleyblank  w   reinelt  g   rinaldi  g    
wolsey  l   eds               years of integer programming            from the early years
to the state of the art  springer  heidelberg 
kalman  r  e          a new approach to linear filtering and prediction problems  transactions of
the asmejournal of basic engineering     series d        
karbassi  a     barth  m          vehicle route prediction and time of arrival estimation techniques
for improved transportation system management  in proceedings of the      ieee intelligent
vehicles symposium  pp         
karimi  h  a          advanced location based technologies and services  crc press  hoboken 
nj 
kavvadias  d  j     papadimitriou  c  h          a linear programming approach to reasoning
about probabilities  ann  math  artif  intell             
kern isberner  g     thimm  m          novel semantical approaches to relational probabilistic
conditionals  in proceedings of the   th international conference on principles of knowledge
representation and reasoning  kr  
kersting  k     raedt  l  d          bayesian logic programming  theory and tool  in getoor  l  
  taskar  b   eds    an introduction to statistical relational learning  mit press 
kersting  k          lifted probabilistic inference  in proceedings of the   th european conference
on artificial intelligence  ecai   pp       
kitagawa  g          non gaussian state space modeling of nonstationary time series  journal of
the american statistical association                    
knapp  a   merz  s   wirsing  m     zappe  j          specification and refinement of mobile
systems in mtla and mobile uml  theor  comput  sci                  
kurkovsky  s     harihar  k          using ubiquitous computing in interactive mobile marketing 
personal ubiquitous comput                 
li  s  z     jain  a  k   eds            handbook of face recognition   nd edition  springer 
liu  j  s     chen  r          sequential monte carlo methods for dynamic systems  journal of the
american statistical association               
   

fiparisi   g rant

lukasiewicz  t          probabilistic logic programming with conditional constraints  acm trans 
on computational logic               
lukasiewicz  t          probabilistic deduction with conditional constraints over basic events  j 
artif  intell  res   jair              
lukasiewicz  t     kern isberner  g          probalilistic logic programming under maximum
entropy  in proceedings of the  th european conference on symbolic and quantitative approaches to reasoning and uncertainty  ecsqaru   pp         
marketsandmarkets         location based services  lbs  market  mapping  discovery and
infotainment  location analytics  leisure and social networking  location based advertising  augmented reality and gaming  tracking    worldwide forecasts and analysis                http   www marketsandmarkets com market reports 
location based service market          html 
milch  b   marthi  b   russell  s  j   sontag  d   ong  d  l     kolobov  a          blog  probabilistic models with unknown objects  in proceedings of the   th international joint conference on artificial intelligence  ijcai   pp           
mittu  r     ross  r          building upon the coalitions agent experiment  coax    integration
of multimedia information in gccs m using impact  in proceedings of the  th international
workshop on multimedia information systems  mis   pp       
muller  p          a qualitative theory of motion based on spatio temporal primitives  in proceedings of the  th international conference on principles of knowledge representation and
reasoning  kr   pp         
nilsson  n  j          probabilistic logic  artif  intell               
papadimitriou  c  h     steiglitz  k          combinatorial optimization  algorithms and complexity  prentice hall  inc   upper saddle river  nj  usa 
papadimitriou  c  m          computational complexity  addison wesley  reading  massachusetts 
paris  j          the uncertain reasoners companion  a mathematical perspective  cambridge
university press 
parisi  f     grant  j       a   integrity constraints for probabilistic spatio temporal knowledgebases  in proceedings of the  th international conference on scalable uncertainty management  sum   pp         
parisi  f     grant  j       b   repairs and consistent answers for inconsistent probabilistic spatiotemporal databases  in proceedings of the  th international conference on scalable uncertainty management  sum   pp         
parisi  f   parker  a   grant  j     subrahmanian  v  s          scaling cautious selection in spatial
probabilistic temporal databases  in methods for handling imperfect spatial information 
vol      of studies in fuzziness and soft computing  pp          springer 
parisi  f   sliva  a     subrahmanian  v  s          a temporal database forecasting algebra  int  j 
of approximate reasoning                
parker  a   infantes  g   grant  j     subrahmanian  v  s          spot databases  efficient consistency checking and optimistic selection in probabilistic spatial databases  ieee transactions
on knowledge and data engineering  tkde                
   

fik nowledge r epresentation in p robabilistic s patio  t emporal k nowledge bases

parker  a   infantes  g   subrahmanian  v  s     grant  j          an agm based belief revision
mechanism for probabilistic spatio temporal logics  in proceedings of the   rd aaai conference on artificial intelligence  aaai   pp         
parker  a   subrahmanian  v  s     grant  j       a   a logical formulation of probabilistic spatial
databases  ieee transactions on knowledge and data engineering  tkde               
     
parker  a   yaman  f   nau  d  s     subrahmanian  v  s       b   probabilistic go theories  in
proceedings of the   th international joint conference on artificial intelligence  ijcai   pp 
       
pelanis  m   saltenis  s     jensen  c  s          indexing the past  present  and anticipated future
positions of moving objects  acm trans  database syst                 
petrova  k     wang  b          location based services deployment and demand  aroadmap
model  electronic commerce research             
picado muino  d          measuring and repairing inconsistency in probabilistic knowledge bases 
int  j  approx  reasoning                
potyka  n     thimm  m          consolidation of probabilistic knowledge bases by inconsistency
minimization  in proceedings of the   st european conference on artificial intelligence
 ecai   pp         
randell  d  a   cui  z     cohn  a  g          a spatial logic based on regions and connection  in
proceedings of the  rd international conference on principles of knowledge representation
and reasoning  kr   pp         
richardson  m     domingos  p          markov logic networks  mach  learn                   
rosales  r     sclaroff  s           d trajectory recovery for tracking multiple objects and trajectory
guided recognition of actions  in proceedings of the  th conference on computer vision and
pattern recognition  cvpr  pp           
southey  f   loh  w     wilkinson  d  f          inferring complex agent motions from partial trajectory observations  in proceedings of the   th international joint conference on artificial
intelligence  ijcai   pp           
stone  l  d   corwin  t  l     barlow  c  a          bayesian multiple target tracking   st edition  
artech house  inc   norwood  ma  usa 
szeliski  r          computer vision  algorithms and applications  springer verlag new york 
inc   new york  ny  usa 
tao  y   cheng  r   xiao  x   ngai  w  k   kao  b     prabhakar  s          indexing multidimensional uncertain data with arbitrary probability density functions  in proceedings of
the   st international conference on very large data bases  vldb   pp         
thimm  m          inconsistency measures for probabilistic logics  artif  intell            
wolter  f     zakharyaschev  m          spatio temporal representation and reasoning based on
rcc    in proceedings of the  th international conference on principles of knowledge representation and reasoning  kr   pp      
   

fiparisi   g rant

yaman  f   nau  d  s     subrahmanian  v  s          a logic of motion  in proceedings of the  th
international conference on principles of knowledge representation and reasoning  kr  
pp       
yaman  f   nau  d  s     subrahmanian  v  s       a   going far  logically  in proceedings of the
  th international joint conference on artificial intelligence  ijcai   pp         
yaman  f   nau  d  s     subrahmanian  v       b   a motion closed world assumption  in proceedings of the   th international joint conference on artificial intelligence  ijcai   pp 
       
yang  b   lu  h     jensen  c  s          probabilistic threshold k nearest neighbor queries over
moving objects in symbolic indoor space  in proceedings of the   th international conference on extending database technology  edbt   pp         
yilmaz  a   javed  o     shah  m          object tracking  a survey  acm comput  surv         
zhang  m   chen  s   jensen  c  s   ooi  b  c     zhang  z          effectively indexing uncertain
moving objects for predictive queries  proceedings of the vldb endowment  pvldb        
         
zheng  k   trajcevski  g   zhou  x     scheuermann  p          probabilistic range queries for
uncertain trajectories on road networks  in proceedings of the   th international conference
on extending database technology  edbt   pp         

   

fi