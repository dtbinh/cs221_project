journal artificial intelligence research                 

submitted        published     

research note

complete classification tractability rcc  

peter jonsson
thomas drakengren

department computer information science  linkoping university
s        linkoping  sweden

petej ida liu se
thodr ida liu se

abstract

investigate computational properties spatial algebra rcc   restricted
version rcc framework spatial reasoning  satisfiability problem rcc   known
np complete much known approximately four billion subclasses 
provide complete classification satisfiability subclasses polynomial npcomplete respectively  process  identify maximal tractable subalgebras four
total 

   introduction

qualitative spatial reasoning received constantly increasing amount interest literature 
main reason is  probably  spatial reasoning proved applicable realworld problems in  example  geographical database systems  egenhofer        grigni  papadias 
  papadimitriou        molecular biology  cui         applications  size
problem instances huge  complexity problems algorithms highly relevant
area study  however  questions computational complexity received much attention
literature  two notable exceptions results reported nebel        renz
nebel         article take small step towards better understanding complexity
issues qualitative spatial reasoning 
well known framework qualitative spatial reasoning so called rcc approach  randell
  cohn        randell  cui    cohn         approach based modelling qualitative spatial
relations regions using first order logic  special interest  complexity theoretic
standpoint  two subclasses rcc   rcc    well known rcc  
rcc   quite weak expressive power  although used describe spatial situations 
general perhaps better described topological algebras  however 
denote algebras spatial algebras order avoid terminological confusion  term
topological algebra well established completely different meaning mathematics  mallios 
      
bennett        shown suciency using propositional logics reasoning rcc  rcc    hence  reasoning becomes ecient compared reasoning full
first order logic  bennett s approach uses classical propositional logic rcc   intuitionistic
propositional logic rcc    unfortunately  logics known computationally hard 
satisfiability problem classical propositional logic intuitionistic propositional logic npcomplete  cook        pspace complete  statman        respectively  however  complexity
underlying logic carry cases  renz nebel        shown
satisfiability problem rcc   rcc   np complete  full proofs found
 renz        
findings motivate search tractable subclasses rcc   rcc    nebel       
showed reasoning basic relations rcc   polynomial time problem  renz
nebel        improved result substantially showing following results 

c      ai access foundation morgan kaufmann publishers  rights reserved 

fijonsson   drakengren

exists large  maximal subclass rcc    denoted hb   contains basic relations
polynomial  hb  contains     elements           
exists large  maximal subclass rcc    denoted hb   contains basic relations
polynomial  hb  contains    elements           furthermore  unique 
maximal subclass rcc   containing basic relations 

concentrate rcc   article  main result complete classification
subclasses rcc   respect tractability  classification makes possible determine
whether given subclass tractable simple test carried hand
automatically  thus gained clear picture tractability borderline rcc   
less necessary showing results kind  main proof relies case analysis
performed computer  number cases considered roughly         analysis cannot 
course  reproduced research paper verified manually  hence  include description
programs used  programs available on line appendix article 
structure article follows  section   defines rcc   auxiliary concepts 
section   contains tractability proofs three subclasses rcc    section   show
subclasses together hb  maximal tractable subclasses rcc    article
concludes brief discussion results 

   rcc   algebra

follow bennett        definition rcc    rcc   based notions regions
binary relations them  region p variable interpreted non empty subsets
fixed set  noted require sets open sets topological
space  limitation since impossible distinguish interior points boundary points
rcc    thus take set x use discrete topology   hx    x i  every
subset x open set  
assume fixed universe variable names regions  then  r interpretation
function maps region variables non empty subsets set 
given two interpreted regions  relation described exactly one elements
set b five basic rcc   relations  definition relations found table   
figure   shows   dimensional examples relations rcc    formula form xby
x regions b   b  said satisfied r interpretation iff interpretation
regions satisfies relations specified table   
express indefinite information  unions basic relations used  written sets basic
relations  leading    binary rcc   relations  naturally  set basic relations interpreted
disjunction basic relations  set rcc   relations  b denoted r   relations
special interest null relation    also denoted    universal relation b  also
denoted    
formula form x fb           b gy called rcc   formula  formula satisfied
r interpretation   iff xb satisfied   i    n  finite set rcc  
formulae said r satisfiable iff exists r interpretation   satisfies every formula
  satisfying r interpretation called r model   given r interpretation  
variable v  write   v  denote value v interpretation   
reasoning problem study following 
n



  finite set rcc   formulae 
  exist r model  

instance
question

   

fia complete classification tractability rcc  

x fdrgy
x fpogy
x fppgy
x fppigy
x feqgy

iff x      
iff  a  b  c     x     y  b   x  b   y  c    x  c  
iff x
iff x
iff x  
table    five basic relations rcc   

x

x





 x   

dr

 x   

po

x

pp

 x   

x

ppi

 x   

x
 x   

eq

figure    pictorial example relations rcc   
denote problem rsat  following  often consider restricted versions rsat
relations used formulae subset r   case say
set formulae use parameter problem description denote subclass
consideration  e g   rsat s    note rsat problem instance represented
labelled directed graph  nodes region variables arcs labelled relations
variables  given instance rsat  say graph graph representation
 
continue defining algebra rcc   relations 

definition     let b   fdr  po  pp  ppi  eqg  rcc   algebra consists set r     b
operations unary converse  denoted    binary intersection  denoted    binary
composition  denoted    defined follows 
 x   
xr iff rx
 x    x  r    y iff xry   xsy
 x    x  r  y iff  z    xrz   zsy  
subset r    said subalgebra rcc  
iff closed converse  intersection
composition  easily verified r   fb b   jb   r  b     g  i e   composition
 

 

union component wise composition basic relations 
next  introduce closure operation  closure operation transforms given subclass
r  one polynomially equivalent original subclass respect satisfiability 
operation similar closure operation rcc   introduced renz       
pose restrictions given subclass   renz s operation requires feqg member
subclass closed  

definition     let r   denote closure   defined least subalgebra
containing closed converse  intersection composition 
observe subset r  subalgebra iff    

next lemma given without proof  proof analogous result allen s algebra
found nebel burckert        
   

fijonsson   drakengren

lemma     let r   rsat s   polynomially transformed rsat s   vice
versa 

corollary     let r   rsat s   polynomial iff rsat s   polynomial  rsat s  
np complete iff rsat s   np complete 

   tractable subclasses rcc  

begin section defining four tractable subalgebras rcc    found table   
later on  show algebras maximal tractable subalgebras rcc   
  
tractability first algebra  r  
    established renz nebel         name r 
ects fact algebra contains    elements 

theorem     rsat r  
    polynomial 
tractability second algebra  r  
    settled quite easily  algorithm found
figure   
  
lemma     let instance rsat r  
     algorithm accepts input iff

r model 

proof  if  show contrapositive  i e   a   rejects r model  clearly 
satisfiability preserved transformations made lines       note xrx  
eq   r satisfiable  thus satisfiable algorithm rejects line    similarly 
satisfiable algorithm rejects line   

only if  consider set completion line     denote set     obviously   

satisfiable initial satisfiable  observe line   ensures   relate
variables eq  furthermore  line   guarantees one relation relates
two variables 
now  construct r model   follows  let v set variables     let
assign non empty sets pairwise disjoint members v   let u      x   
introduce set values u     fff j x    v g satisfying following 
x

v

x y

     iff x   z   w  
   arbitrary x    v      u  
x y

z w

x y

relation type x fpogy x fpo  eqgy   extend sets  x    y  
element  
clearly  two sets x  disjoint  and thus related dr  unless x fpogy
x fpo  eqgy   cases  x must disjoint  fact  introducing
  forced x fpogy hold satisfies formulae type x fpogy well
formulae type x fpo  eqgy   hence  r model   implies r satisfiability
 
 
x y

x y

theorem     rsat r  
    polynomial 
proof  algorithm a   correctly solves rsat r  
    problem previous lemma  further 

more  number iterations bounded number variables number
formulae given instance tests easily performed polynomial time 
 
next show tractability rsat r  
    
   

fia complete classification tractability rcc  

   r   r  
r  
  r 
 
 
 


fdrg

fpog

fdr  pog

fppg


fdr  ppg

fpo  ppg

fdr  po  ppg

fppig


fdr  ppig

fpo  ppig

fdr  po  ppig

fpp  ppig

fdr  pp  ppig


fpo  pp  ppig


fdr  po  pp  ppig

feqg


fdr  eqg

fpo  eqg

fdr  po  eqg

fpp  eqg



fdr  pp  eqg

fpo  pp  eqg


fdr  po  pp  eqg
fppi  eqg



fdr  ppi  eqg

fpo  ppi  eqg


fdr  po  ppi  eqg
fpp  ppi  eqg


fdr  pp  ppi  eqg


fpo  pp  ppi  eqg


 


table    maximal tractable subalgebras rcc   

theorem     rsat r  
    polynomial 
proof  consider algorithm a   figure    exist x  x  y  

satisfiable  otherwise  let variables value  since eq member
every relation occurs   interpretation r model  
 

continue proving rsat r  
    tractable problem  let
 
r    ffpp  eqgg   fr   fpp  ppig j r   r g 
 
using machine assisted proof  shown r  
    r  sucient prove
 
tractability rsat r   corollary      program used showing available
on line appendix article 
on  let arbitrary instance rsat r    g   hv  e graph representation  following proofs similar spirit proofs appearing drakengren
   

fijonsson   drakengren

 
 
 
 
 
 
 
 
 
  
  
  

algorithm a  
input  instance rsat r  
    
repeat
 
 x  r   xrx   eq    r reject
 x    x  y   reject
 x    x    x feqgy   substitute x
 x  y  r    xry   xsy  
    fxry  xsy g    fx  r    y g
 x  r   xrx   eq   r   fxrx g
   
accept

 
 
 
 

algorithm a  
input  instance rsat r  
    
 x  x  y   reject
else accept

 
 
 
 
 
 
 

algorithm a 
input  instance rsat r    graph representation g 
let g  graph obtained g removing arcs labelled fpp  eqg 
find strongly connected components c g 
every arc e g whose relation contain eq
e connects two nodes c reject
accept
  
 
figure    algorithms rsat r  
     rsat r    rsat r   

jonsson         algorithm reminiscent algorithm van beek        deciding
satisfiability point algebra 
definition     rcc   relation r said acyclic relation iff cycle g r
every arc never satisfiable 
relation pp example acyclic relation fpp  eqg acyclic  continue
showing properties acyclic relations 
proposition     let r acyclic relation  every relation r  r acyclic 
proof  since taking subsets r constrains satisfiability further  result follows 
 
proposition     let r acyclic relation  choose fr  j r  rg  then 
cycle g every arc labelled relation unsatisfiable 
proof  argument previous proposition 
 
following definition needed following proofs 
definition     let instance r satisfiability problem  model   r   r 
relation two region variables x   r said satisfied r 
relation r  r  xr  satisfied  
   

fia complete classification tractability rcc  

definition may seem bit cumbersome essence clear  example  let x
region variables related x fpo  ppgy   model x interpreted f    g
f       g    fpo  ppg satisfied fppg  fpo  ppg 
lemma     let r acyclic relation  a  a  sets fr  j r  rg a 
fa   feqg j   ag  then  every cycle c labelled relations   a  satisfiable iff contains
relations a    furthermore  relations cycle satisfied eq 
proof  only if  suppose cycle c satisfiable contains relation
a  apply induction number n arcs cycle  n      get contradiction
proposition      so  suppose induction c contains n     arcs  let r model
relations c   cannot case every relation c satisfied
relation a  proposition      thus  relation r  c satisfied eq 
collapse two variables connected r  one variable  cycle n nodes
containing relation a  contradicts induction hypothesis 
if  suppose cycle c contains relations a    c satisfied choosing eq
every arc  notice only if part implies c must satisfied choosing eq every arc 

 

hence  variables forced equal 

studied acyclic relations  turn attention dag satisfying relations 
formal definition follows 
definition      basic relation b said dag satisfying iff dag  directed acyclic
graph  labelled relations containing b satisfiable  i e   corresponding rsat problem
model 
typical example dag satisfying relation eq  given dag labelled relations containing eq  always satisfy relations assigning non empty set variables 
show pp dag satisfying relation 
definition      let g arbitrary dag  node v g said terminal node iff
arcs start v 
lemma      basic relation pp dag satisfying 
proof  let g dag labelled relations containing pp  show g satisfied
r model   induction n number nodes g  case n    
trivial  suppose g n    nodes remove terminal node g  induction  remaining
graph g    hv     e  i satisfiable model   swe shall construct model g 
agrees   every variable g   let   fm   v  j v   v   g let element
  let  g      fffg  obviously  model g 
 
state simple result drakengren jonsson        
lemma      let g irre exive  acyclic subgraph d  arcs g
reoriented resulting graph acyclic 
specializing result  get next lemma 
lemma      let g irre exive acyclic subgraph let arcs labelled
relations containing pp  arcs labelled relations containing pp ppi 
g r satisfiable 
   graph irre exive iff arcs node v node v 

   

fijonsson   drakengren

proof  reorient arcs g resulting graph acyclic  always possible
previous lemma  furthermore  whenever arc reoriented  invert relation
arc  g  satisfiable iff g is  construction  arcs containing pp ppi
reoriented  every arc dag g  contains pp and  thus  since pp dag satisfying
lemma       g  satisfiable  consequently  g satisfiable 
 
lemma      algorithm a  correctly solves rsat r    
proof  assume algorithm finds strongly connected component g   which contains
relation fpp  eqg   containing two nodes g connected arc e labelled
relation r  contain eq  exists cycle c relation
every arc contains eq  e connects two nodes c e part cycle 
lemma      c satisfied choosing relation eq every arc c   since r 

admit eq  c unsatisfiable 
otherwise  every strongly connected component collapsed single node  removing
arcs start end collapsed node  transformation retains satisfiability using
argument above  collapsing  subgraph obtained considering arcs labelled
fpp  eqg acyclic  since remaining arcs labelled relations containing pp
ppi  graph r satisfiable lemma        note graph irre exive since every
node contained strongly connected component  
 
lemma      given graph g   hv  ei  algorithm a  runs o jv j   jej  time 
proof  strongly connected components found o jv j   jej  time  baase       
remaining test made o jv j   je j  time 
 
theorem      rsat r  
    solved polynomial time 
  
 
proof  rsat r    polynomial previous two lemmata  since r  
    r   rsat r   
solved polynomial time corollary     
 

   classification rcc  

give classification rcc   need two np completeness results 
theorem     rsat s   np complete
    renz   nebel        c    ffpog  fpp  ppigg  
   c    ffdr  pog  fpp  ppigg  
proof  proof c  polynomial time reduction rsat c    let arbitrary
instance rsat c    construct following set 
    fx fpp  ppigy j x fpp  ppigy   g   fx fdr  pogy j x fpogy   g 
clearly    obtained polynomial time   instance rsat c    show
satisfiable iff   satisfiable 
only if  assume exists r model   hard see r model

  since x fpogy x fdr  pogy   thus   r satisfiable r satisfiable 

if  assume existence r model   assigns subsets set u region variables

    let element    u   construct new interpretation follows 
 x       x    fffg every variable x     easily seen following holds  
   

fia complete classification tractability rcc  

  
  
  
  

xfdrgy   xfpogy  
xfpogy   xfpogy  
xfppgy   xfppgy  
xfppigy   xfppigy  

easy see xfpp  ppigy   xfpp  ppigy   similarly  xfdr  pogy
  xfpogy   follows model r satisfiable   r satisfiable 
 
main theorem stated proved 

theorem     r   rsat s   polynomial iff subset member r  
        
fr  
    r    r    r  g  np complete otherwise 
proof  if  r   r   rsat r  polynomial shown previous section 
only if  choose r  subset algebra r   subalgebra
r   r   choose relation x x   x    r  always done since   r  let
x set relations note x subset algebra r   set r
contains four algebras construction x   jx j    observe rsat s   np complete
rsat x   np complete 
show rsat s   np complete  machine assisted case analysis following
p

p

p

p

p

p

form performed 


 
x
  
   generate subsets r  size   
        subsets 
  


   let set  test  subset subalgebra r c
  f    g 
p

test succeeds   hence  rsat s   np complete corollary     



 

program used showing previous theorem appears on line appendix article 

   discussion

main problem reporting tractability results restricted classes problems diculty
isolating interesting relevant subclasses  systematic approach building complete classifications way partially overcoming problem  problem class consideration
regarded relevant  tractable subclasses regarded relevant computational
problem interest  especially true spatial reasoning size problem instances extremely large  one good example spatial reasoning connection human
genome project  cui        
another advantage complete classifications satisfactory scientific
point view  gain clear picture borderline tractability intractability
intrinsic scientific value  common critique complete classifications tend generate
certain classes totally useless  instance  subalgebra r  
  certainly use 
must made clear critique unjustified since researcher makes complete
classification deliberately invent useless classes  instead  useless classes appear
complete classification  unavoidable parts classification 
   

fijonsson   drakengren

work reported article extended many different ways  one obvious extension
study computational problems rsat problem  renz        studied two
problems  rmin rent  certain subclasses rcc   rcc    rmin problem
decide set spatial formulae minimal  i e   whether basic relations every formula
satisfied not  rent problem decide whether formula xry entailed
set spatial formulae  grigni et al         study stronger form satisfiability refer
realizability  finite set rcc   formulae said realizable iff exist regions
plane bounded jordan curves satisfy relations   grigni et al        
shown realizability problem much harder satisfiability problem  instance 
deciding realizability formulae constructed two relations dr po np complete
satisfiability problem polynomial  certainly  studies realizability problem would
worthwhile 
another obvious research direction completely classify spatial algebras  rcc   rcc   contains           relations question whether feasible remains
answered 

   conclusions

studied computational properties rcc        possible subclasses classified respect whether corresponding satisfiability problem tractable not 
classification reveals four maximal tractable subclasses algebra 

references

baase  s          computer algorithms  introduction analysis   nd edition   addison wesley 
reading  ma 
bennett  b          spatial reasoning propositional logics  doyle  j   sandewall  e    
torasso  p   eds    proceedings  th international conference principles knowledge
representation reasoning  kr      pp          bonn  germany  morgan kaufmann 
cook  s  a          complexity theorem proving procedures  proceedings  rd acm
symposium theory computing  pp          
cui  z          using interval logic order assembly  proceedings second international
conference intelligent systems molecular biology  pp           aaai press 
drakengren  t     jonsson  p          maximal tractable subclasses allen s interval algebra  preliminary report  proceedings   th  us  national conference artificial intelligence
 aaai      pp          portland  or  usa  american association artificial intelligence 
egenhofer  m  j          reasoning binary topological relations  gunther  o     schek 
h  j   eds    advances spatial databases  pp           springer verlag 
grigni  m   papadias  d     papadimitriou  c          topological inference  mellish  c   ed   
proceedings   th international joint conference artificial intelligence  ijcai     
pp          montreal  pq  canada  morgan kaufmann 
mallios  a          topological algebras  selected topics  north holland  amsterdam 
nebel  b          computational properties qualitative spatial reasoning  first results 
wachsmuth  i   rollinger  c  r     brauer  w   eds    ki     advances artificial intelligence  pp          bielefeld  germany  springer verlag 
   

fia complete classification tractability rcc  

nebel  b     burckert  h  j          reasoning temporal relations  maximal tractable
subclass allen s interval algebra  journal acm                
randell  d  a     cohn  a  g          modelling topological metrical properties physical
processes  brachman  r  j   levesque  h  j     reiter  r   eds    proceedings  st
international conference principles knowledge representation reasoning  kr     
pp        toronto  on  canada  morgan kaufmann 
randell  d  a   cui  z     cohn  a  g          spatial logic based regions connection 
swartout  b     nebel  b   eds    proceedings  rd international conference principles
knowledge representation reasoning  kr      pp          cambridge  ma  usa 
morgan kaufmann 
renz  j          qualitatives raumliches schlieen  berechnungseigenschaften und eziente algorithmen  master thesis report  fakultat fur informatik  universitat ulm  available
http   www informatik uni freiburg de sppraum 
renz  j     nebel  b          complexity qualitative spatial reasoning  maximal
tractable fragment region connected calculus  proceedings   th international
joint conference artificial intelligence  ijcai     nagoya  japan  morgan kaufmann 
appear 
statman  r          intuitionistic logic polynomial space complete  theoretical computer science 
             
van beek  p          reasoning qualitative temporal information  artificial intelligence     
        

   


