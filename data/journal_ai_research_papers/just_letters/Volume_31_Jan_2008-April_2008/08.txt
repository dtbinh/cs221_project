journal of artificial intelligence research                  

submitted        published      

modular reuse of ontologies  theory and practice
bernardo cuenca grau
ian horrocks
yevgeny kazakov

berg comlab ox ac uk
ian horrocks comlab ox ac uk
yevgeny kazakov comlab ox ac uk

oxford university computing laboratory
oxford  ox   qd  uk

ulrike sattler

sattler cs man ac uk

school of computer science
the university of manchester
manchester  m    pl  uk

abstract
in this paper  we propose a set of tasks that are relevant for the modular reuse of ontologies  in order to formalize these tasks as reasoning problems  we introduce the notions
of conservative extension  safety and module for a very general class of logic based ontology
languages  we investigate the general properties of and relationships between these notions
and study the relationships between the relevant reasoning problems we have previously
identified  to study the computability of these problems  we consider  in particular  description logics  dls   which provide the formal underpinning of the w c web ontology
language  owl   and show that all the problems we consider are undecidable or algorithmically unsolvable for the description logic underlying owl dl  in order to achieve a
practical solution  we identify conditions sufficient for an ontology to reuse a set of symbols safelythat is  without changing their meaning  we provide the notion of a safety
class  which characterizes any sufficient condition for safety  and identify a family of safety
classescalled localitywhich enjoys a collection of desirable properties  we use the notion
of a safety class to extract modules from ontologies  and we provide various modularization algorithms that are appropriate to the properties of the particular safety class in use 
finally  we show practical benefits of our safety checking and module extraction algorithms 

   motivation
ontologiesconceptualizations of a domain shared by a community of usersplay a major role in the semantic web  and are increasingly being used in knowledge management
systems  e science  bio informatics  and grid applications  staab   studer        
the design  maintenance  reuse  and integration of ontologies are complex tasks  like
software engineers  ontology engineers need to be supported by tools and methodologies
that help them to minimize the introduction of errors  i e   to ensure that ontologies are
consistent and do not have unexpected consequences  in order to develop this support  important notions from software engineering  such as module  black box behavior  and controlled
interaction  need to be adapted 
recently  there has been growing interest in the topic of modularity in ontology engineering  seidenberg   rector        noy      a  lutz  walther    wolter        cuenca
grau  parsia  sirin    kalyanpur      b  cuenca grau  horrocks  kazakov    sattler 
c
    
ai access foundation  all rights reserved 

ficuenca grau  horrocks  kazakov    sattler

       which has been motivated by the above mentioned application needs  in this paper 
we focus on the use of modularity to support the partial reuse of ontologies  in particular 
we consider the scenario in which we are developing an ontology p and want to reuse a set
s of symbols from a foreign ontology q without changing their meaning 
for example  suppose that an ontology engineer is building an ontology about research
projects  which specifies different types of projects according to the research topic they
focus on  the ontology engineer in charge of the projects ontology p may use terms such
as cystic fibrosis and genetic disorder in his descriptions of medical research projects  the
ontology engineer is an expert on research projects  he may be unfamiliar  however  with
most of the topics the projects cover and  in particular  with the terms cystic fibrosis and
genetic disorder  in order to complete the projects ontology with suitable definitions for
these medical terms  he decides to reuse the knowledge about these subjects from a wellestablished medical ontology q 
the most straightforward way to reuse these concepts is to construct the logical union
p  q of the axioms in p and q  it is reasonable to assume that the additional knowledge
about the medical terms used in both p and q will have implications on the meaning of the
projects defined in p  indeed  the additional knowledge about the reused terms provides new
information about medical research projects which are defined using these medical terms 
less intuitive is the fact that importing q may also result in new entailments concerning
the reused symbols  namely cystic fibrosis and genetic disorder  since the ontology engineer
of the projects ontology is not an expert in medicine and relies on the designers of q  it is
to be expected that the meaning of the reused symbols is completely specified in q  that
is  the fact that these symbols are used in the projects ontology p should not imply that
their original meaning in q changes  if p does not change the meaning of these symbols
in q  we say that p  q is a conservative extension of q
in realistic application scenarios  it is often unreasonable to assume the foreign ontology
q to be fixed  that is  q may evolve beyond the control of the modelers of p  the ontology
engineers in charge of p may not be authorized to access all the information in q or 
most importantly  they may decide at a later time to reuse the symbols cystic fibrosis and
genetic disorder from a medical ontology other than q  for application scenarios in which
the external ontology q may change  it is reasonable to abstract from the particular q
under consideration  in particular  given a set s of external symbols  the fact that the
axioms in p do not change the meaning of any symbol in s should be independent of the
particular meaning ascribed to these symbols by q  in that case  we will say that p is safe
for s 
moreover  even if p safely reuses a set of symbols from an ontology q  it may still
be the case that q is a large ontology  in particular  in our example  the foreign medical
ontology may be huge  and importing the whole ontology would make the consequences
of the additional information costly to compute and difficult for our ontology engineers in
charge of the projects ontology  who are not medical experts  to understand  in practice 
therefore  one may need to extract a module q  of q that includes only the relevant information  ideally  this module should be as small as possible while still guarantee to capture
the meaning of the terms used  that is  when answering queries against the research projects
ontology  importing the module q  would give exactly the same answers as if the whole
medical ontology q had been imported  in this case  importing the module will have the
   

fimodular reuse of ontologies  theory and practice

same observable effect on the projects ontology as importing the entire ontology  furthermore  the fact that q  is a module in q should be independent of the particular p under
consideration 
the contributions of this paper are as follows 
   we propose a set of tasks that are relevant to ontology reuse and formalize them as
reasoning problems  to this end  we introduce the notions of conservative extension 
safety and module for a very general class of logic based ontology languages 
   we investigate the general properties of and relationships between the notions of
conservative extension  safety  and module and use these properties to study the relationships between the relevant reasoning problems we have previously identified 
   we consider description logics  dls   which provide the formal underpinning of the
w c web ontology language  owl   and study the computability of our tasks  we
show that all the tasks we consider are undecidable or algorithmically unsolvable for
the description logic underlying owl dlthe most expressive dialect of owl that
has a direct correspondence to description logics 
   we consider the problem of deciding safety of an ontology for a signature  given that
this problem is undecidable for owl dl  we identify sufficient conditions for safety 
which are decidable for owl dlthat is  if an ontology satisfies our conditions
then it is safe  the converse  however  does not necessarily hold  we propose the
notion of a safety class  which characterizes any sufficiency condition for safety  and
identify a family of safety classescalled localitywhich enjoys a collection of desirable
properties 
   we next apply the notion of a safety class to the task of extracting modules from
ontologies  we provide various modularization algorithms that are appropriate to the
properties of the particular safety class in use 
   we present empirical evidence of the practical benefits of our techniques for safety
checking and module extraction 
this paper extends the results in our previous work  cuenca grau  horrocks  kutz   
sattler        cuenca grau et al         cuenca grau  horrocks  kazakov    sattler        

   preliminaries
in this section we introduce description logics  dls   baader  calvanese  mcguinness 
nardi    patel schneider         a family of knowledge representation formalisms which
underlie modern ontology languages  such as owl dl  patel schneider  hayes    horrocks         a hierarchy of commonly used description logics is summarized in table   
the syntax of a description logic l is given by a signature and a set of constructors  a
signature  or vocabulary  sg of a dl is the  disjoint  union of countably infinite sets ac
of atomic concepts  a  b          representing sets of elements  ar of atomic roles  r  s         
representing binary relations between elements  and ind of individuals  a  b  c          representing constants  we assume the signature to be fixed for every dl 
   

ficuenca grau  horrocks  kazakov    sattler

dls

constructors
con
   a  c  u c    r c
pp  c
pp

axioms   ax  
tbox
abox
a  c  c  v c  a   c  r a  b 
pp
pp
pp
pp

rol
rbox
el
r
alc pp
s pp
trans r 
  i
r
  h
r   v r 
  f
funct r 
  n
   n s 
  q
   n s c 
  o
 i 
here r  ar  a  ac  a  b  ind  r i   rol  c i   con  n    and s  rol is a simple
role  see  horrocks   sattler         
table    the hierarchy of standard description logics

every dl provides constructors for defining the set rol of  general  roles  r  s          
the set con of  general  concepts  c  d           and the set ax of axioms              which is
a union of role axioms  rbox   terminological axioms  tbox  and assertions  abox  
el  baader  brandt    lutz        is a simple description logic which allows one to
construct complex concepts using conjunction c  u c  and existential restriction r c
starting from atomic concepts a  roles r and the top concept    el provides no role
constructors and no role axioms  thus  every role r in el is atomic  the tbox axioms of
el can be either concept definitions a  c or general concept inclusion axioms  gcis 
c  v c    el assertions are either concept assertions a   c or role assertions r a  b   in this
paper we assume the concept definition a  c is an abbreviation for two gcis a v c and
c v a 
the basic description logic alc  schmidt schau   smolka        is obtained from el
by adding the concept negation constructor c  we introduce some additional constructors
as abbreviations  the bottom concept  is a shortcut for    the concept disjunction c  t c 
stands for  c  u c     and the value restriction r c stands for  r c   in contrast
to el  alc can express contradiction axioms like   v   the logic s is an extension of
alc where  additionally  some atomic roles can be declared to be transitive using a role
axiom trans r  
further extensions of description logics add features such as inverse roles r  indicated
by appending a letter i to the name of the logic   role inclusion axioms  ris  r  v r    h  
functional roles funct r    f   number restrictions    n s   with n       n    qualified
number restrictions    n s c   with n       q     and nominals  a    o   nominals make
it possible to construct a concept representing a singleton set  a   a nominal concept  from
an individual a  these extensions can be used in different combinations  for example alco
is an extension of alc with nominals  shiq is an extension of s with role hierarchies 
   the dual constructors    n s  and    n s c  are abbreviations for    n     s  and    n     s c  
respectively

   

fimodular reuse of ontologies  theory and practice

inverse roles and qualified number restrictions  and shoiq is the dl that uses all the
constructors and axiom types we have presented 
modern ontology languages  such as owl  are based on description logics and  to a certain extent  are syntactic variants thereof  in particular  owl dl corresponds to shoin
 horrocks  patel schneider    van harmelen         in this paper  we assume an ontology
o based on a description logic l to be a finite set of axioms in l  the signature of an
ontology o  of an axiom   is the set sig o   sig    of atomic concepts  atomic roles and
individuals that occur in o  respectively in   
the main reasoning task for ontologies is entailment  given an ontology o and an axiom
  check if o implies   the logical entailment    is defined using the usual tarski style
set theoretic semantics for description logics as follows  an interpretation i is a pair i  
 i   i    where i is a non empty set  called the domain of the interpretation  and i is the
interpretation function that assigns  to every a  ac a subset ai  i   to every r  ar
a binary relation ri  i  i   and to every a  ind an element ai  i   note that the
sets ac  ar and ind are not defined by the interpretation i but assumed to be fixed for
the ontology language  dl  
the interpretation function i is extended to complex roles and concepts via dlconstructors as follows 
   i
 c u d i
 r c i
 c i
 r  i

 
 
 
 
 


c i  di
 x  i   y hx  yi  ri  y  c i  
i   c i
 hx  yi   hy  xi  ri  

   n r i     x  i     y  i   hx  yi  ri    n  
   n r c i     x  i     y  i   hx  yi  ri  y  c i    n  
 a i    ai  
the satisfaction relation i     between an interpretation i and a dl axiom   read as i
satisfies   or i is a model of   is defined as follows 
i    c  v c  iff c i  c i  
i    r  v r  iff r i  r i  

i    a   c iff ai  c i  
i    r a  b  iff hai   bi i  ri  

i    trans r  iff x  y  z  i   hx  yi  ri  hy  zi  ri  hx  zi  ri   
i    funct r  iff x  y  z  i   hx  yi  ri  hx  zi  ri  y   z   
an interpretation i is a model of an ontology o if i satisfies all axioms in o  an
ontology o implies an axiom   written o      if i     for every model i of o  given
a set i of interpretations  we say that an axiom   an ontology o  is valid in i if every
interpretation i  i is a model of   respectively o   an axiom  is a tautology if it is valid
in the set of all interpretations  or  equivalently  is implied by the empty ontology  
we say that two interpretations i    i   i   and j    j   j   coincide on the subset
s of the signature  notation  i s   j  s   if i   j and x i   x j for every x  s  we
say that two sets of interpretations i and j are equal modulo s  notation  i s   j s   if for
every i  i there exits j  j such that j  s   i s and for every j  j there exists i  i
such that i s   j  s  
   

ficuenca grau  horrocks  kazakov    sattler

ontology of medical research projects p 
p 

genetic disorder project  project u has focus genetic disorder

p 

cystic fibrosis euproject  euproject u has focus cystic fibrosis

p 

euproject v project

p 

has focus   v project

e 

project u  genetic disorder   
u cystic fibrosis  v 

e 

 has focus cystic fibrosis v has focus genetic disorder

  

ontology of medical terms q 
m  cystic fibrosis  fibrosis u located in pancreas u has origin genetic origin
m  genetic fibrosis  fibrosis u has origin genetic origin
m  fibrosis u located in pancreas v genetic fibrosis
m  genetic fibrosis v genetic disorder
m  defbi gene v immuno protein gene u associated with cystic fibrosis
figure    reusing medical terminology in an ontology on research projects

   ontology integration and knowledge reuse
in this section  we elaborate on the ontology reuse scenario sketched in section    based on
this application scenario  we motivate and define the reasoning tasks to be investigated in
the remainder of the paper  in particular  our tasks are based on the notions of a conservative
extension  section       safety  sections     and      and module  section       these notions
are defined relative to a language l  within this section  we assume that l is an ontology
language based on a description logic  in section      we will define formally the class of
ontology languages for which the given definitions of conservative extensions  safety and
modules apply  for the convenience of the reader  all the tasks we consider in this paper
are summarized in table   
    a motivating example
suppose that an ontology engineer is in charge of a shoiq ontology on research projects 
which specifies different types of projects according to the research topic they are concerned
with  assume that the ontology engineer defines two conceptsgenetic disorder project and
cystic fibrosis euprojectin his ontology p  the first one describes projects about genetic
disorders  the second one describes european projects about cystic fibrosis  as given by the
axioms p  and p  in figure    the ontology engineer is an expert on research projects  he
knows  for example  that every instance of euproject must be an instance of project  the
concept inclusion axiom p   and that the role has focus can be applied only to instances
of project  the domain axiom p    he may be unfamiliar  however  with most of the topics
the projects cover and  in particular  with the terms cystic fibrosis and genetic disorder
mentioned in p  and p   in order to complete the projects ontology with suitable definitions
   

fimodular reuse of ontologies  theory and practice

for these medical terms  he decides to reuse the knowledge about these subjects from a wellestablished and widely used medical ontology 
suppose that cystic fibrosis and genetic disorder are described in an ontology q containing the axioms m  m  in figure    the most straightforward way to reuse these concepts
is to import in p the ontology qthat is  to add the axioms from q to the axioms in p
and work with the extended ontology p  q  importing additional axioms into an ontology
may result in new logical consequences  for example  it is easy to see that axioms m m 
in q imply that every instance of cystic fibrosis is an instance of genetic disorder 
q         cystic fibrosis v genetic disorder 

   

indeed  the concept inclusion       cystic fibrosis v genetic fibrosis  follows from axioms
m  and m  as well as from axioms m  and m    follows from axioms   and m  
using inclusion  from     and axioms p p  from ontology p we can now prove that
every instance of cystic fibrosis euproject is also an instance of genetic disorder project 
p  q         cystic fibrosis euproject v genetic disorder project 

   

this inclusion   however  does not follow from p alonethat is  p       the ontology
engineer might be not aware of entailment      even though it concerns the terms of primary
scope in his projects ontology p 
it is natural to expect that entailments like  in     from an imported ontology q result
in new logical consequences  like   in      over the terms defined in the main ontology p 
one would not expect  however  that the meaning of the terms defined in q changes as a
consequence of the import since these terms are supposed to be completely specified within
q  such a side effect would be highly undesirable for the modeling of ontology p since the
ontology engineer of p might not be an expert on the subject of q and is not supposed to
alter the meaning of the terms defined in q not even implicitly 
the meaning of the reused terms  however  might change during the import  perhaps due
to modeling errors  in order to illustrate such a situation  suppose that the ontology engineer
has learned about the concepts genetic disorder and cystic fibrosis from the ontology q
 including the inclusion      and has decided to introduce additional axioms formalizing
the following statements 
every instance of project is different from every instance of genetic disorder
and
every instance of cystic fibrosis 
   

   

      
every        
project that has focus on cystic fibrosis  also has focus on genetic disorder

   

note that the statements     and     can be thought of as adding new information about
projects and  intuitively  they should not change or constrain the meaning of the medical
terms 
suppose the ontology engineer has formalized the statements     and     in ontology
p using axioms e  and e  respectively  at this point  the ontology engineer has introduced modeling errors and  as a consequence  axioms e  and e  do not correspond to    
and      e  actually formalizes the following statement  every instance of project is different from every common instance of genetic disorder and cystic fibrosis  and e  expresses
   

ficuenca grau  horrocks  kazakov    sattler

that every object that either has focus on nothing  or has focus only on cystic fibrosis 
also has focus on genetic disorder  these kinds of modeling errors are difficult to detect 
especially when they do not cause inconsistencies in the ontology 
note that  although axiom e  does not correspond to fact      it is still a consequence
of     which means that it should not constrain the meaning of the medical terms  on the
other hand  e  is not a consequence of     and  in fact  it constrains the meaning of medical
terms  indeed  the axioms e  and e  together with axioms p  p  from p imply new axioms
about the concepts cystic fibrosis and genetic disorder  namely their disjointness 
p         genetic disorder u cystic fibrosis v  

   

the entailment     can be proved using axiom e  which is equivalent to 
  v has focus  genetic disorder t cystic fibrosis 

   

the inclusion     and p  imply that every element in the domain must be a projectthat
is  p       v project   now  together with axiom e   this implies     
the axioms e  and e  not only imply new statements about the medical terms  but also
cause inconsistencies when used together with the imported axioms from q  indeed  from
    and     we obtain p  q         cystic fibrosis v    which expresses the inconsistency
of the concept cystic fibrosis 
to summarize  we have seen that importing an external ontology can lead to undesirable
side effects in our knowledge reuse scenario  like the entailment of new axioms or even inconsistencies involving the reused vocabulary  in the next section we discuss how to formalize
the effects we consider undesirable 
    conservative extensions and safety for an ontology
as argued in the previous section  an important requirement for the reuse of an ontology q
within an ontology p should be that p  q produces exactly the same logical consequences
over the vocabulary of q as q alone does  this requirement can be naturally formulated
using the well known notion of a conservative extension  which has recently been investigated in the context of ontologies  ghilardi  lutz    wolter        lutz et al         
definition    deductive conservative extension   let o and o   o be two lontologies  and s a signature over l  we say that o is a deductive s conservative extension
of o  w r t  l  if for every axiom  over l with sig    s  we have o     iff o      
we say that o is a deductive conservative extension of o  w r t  l if o is a deductive
s conservative extension of o  w r t  l for s   sig o    

in other words  an ontology o is a deductive s conservative extension of o  for a
signature s and language l if and only if every logical consequence  of o constructed
using the language l and symbols only from s  is already a logical consequence of o    that
is  the additional axioms in o   o  do not result into new logical consequences over the
vocabulary s  note that if o is a deductive s conservative extension of o  w r t  l  then
o is a deductive s   conservative extension of o  w r t  l for every s   s 
the notion of a deductive conservative extension can be directly applied to our ontology
reuse scenario 
   

fimodular reuse of ontologies  theory and practice

definition    safety for an ontology   given l ontologies o and o    we say that o
is safe for o   or o imports o  in a safe way  w r t  l if o  o  is a deductive conservative
extension of o  w r t  l 

hence  the first reasoning task relevant for our ontology reuse scenario can be formulated
as follows 
t  

given l ontologies o and o    determine if o is safe for o  w r t  l 

we have shown in section     that  given p consisting of axioms p p   e   e   and q
consisting of axioms m m  from figure    there exists an axiom     cystic fibrosis v  
that uses only symbols in sig q  such that q      but p  q      according to definition   
this means that p  q is not a deductive conservative extension of q w r t  any language
l in which  can be expressed  e g  l   alc   it is possible  however  to show that if the
axiom e  is removed from p then for the resulting ontology p    p    e    p   q is a
deductive conservative extension of q  the following notion is useful for proving deductive
conservative extensions 
definition    model conservative extension  lutz et al         
let o and o   o be two l ontologies and s a signature over l  we say that o is a model
s conservative extension of o    if for every model i of o    there exists a model j of o
such that i s   j  s   we say that o is a model conservative extension of o  if o is a model
s conservative extension of o  for s   sig o    

the notion of model conservative extension in definition   can be seen as a semantic
counterpart for the notion of deductive conservative extension in definition    the latter is
defined in terms of logical entailment  whereas the former is defined in terms of models 
intuitively  an ontology o is a model s conservative extension of o  if for every model of
o  one can find a model of o over the same domain which interprets the symbols from s
in the same way  the notion of model conservative extension  however  does not provide
a complete characterization of deductive conservative extensions  as given in definition   
that is  this notion can be used for proving that an ontology is a deductive conservative
extension of another  but not vice versa 
proposition    model vs  deductive conservative extensions  lutz et al        
   for every two l ontologies o  o   o  and a signature s over l  if o is a model
s conservative extension of o  then o is a deductive s conservative extension of o 
w r t  l 
   there exist two alc ontologies o and o   o such that o is a deductive conservative
extension of o  w r t  alc  but o is not a model conservative extension of o   
example   consider an ontology p  consisting of axioms p p   and e  and an ontology
q consisting of axioms m m  from figure    we demonstrate that p   q is a deductive
conservative extension of q  according to proposition    it is sufficient to show that p   q
is a model conservative extension of q  that is  for every model i of q there exists a model
j of p   q such that i s   j  s for s   sig q  
   

ficuenca grau  horrocks  kazakov    sattler

the required model j can be constructed from i as follows  take j to be identical to i except for the interpretations of the atomic concepts genetic disorder project 
cystic fibrosis euproject  project  euproject and the atomic role has focus  all of which
we interpret in j as the empty set  it is easy to check that all the axioms p p   e  are
satisfied in j and hence j    p    moreover  since the interpretation of the symbols in q
remains unchanged  we have i sig q    j  sig q  and j    q  hence  p   q is a model
conservative extension of q 
for an example of statement   of the proposition  we refer the interested reader to the
literature  lutz et al         p       

    safety of an ontology for a signature
so far  in our ontology reuse scenario we have assumed that the reused ontology q is fixed
and the axioms of q are just copied into p during the import  in practice  however  it
is often convenient to keep q separate from p and make its axioms available on demand
via a reference  this makes it possible to continue developing p and q independently  for
example  the ontology engineers of the project ontology p may not be willing to depend
on a particular version of q  or may even decide at a later time to reuse the medical terms
 cystic fibrosis and genetic disorder  from another medical ontology instead  therefore  for
many application scenarios it is important to develop a stronger safety condition for p
which depends as little as possible on the particular ontology q to be reused  in order to
formulate such condition  we abstract from the particular ontology q to be imported and
focus instead on the symbols from q that are to be reused 
definition    safety for a signature   let o be a l ontology and s a signature over l 
we say that o is safe for s w r t  l  if for every l ontology o  with sig o   sig o     s 
we have that o is safe for o  w r t  l  that is  o  o  is a deductive conservative extension
of o  w r t  l 

intuitively  in our knowledge reuse scenario  an ontology o is safe for a signature s w r t 
a language l if and only if it imports in a safe way any ontology o  written in l that shares
only symbols from s with o  the associated reasoning problem is then formulated in the
following way 
t  

given an l ontology o and a signature s over l 
determine if o is safe for s w r t  l 

as seen in section      the ontology p consisting of axioms p p   e   e  from figure   
does not import q consisting of axioms m m  from figure   in a safe way for l   alc 
according to definition    since sig p   sig q   s    cystic fibrosis  genetic disorder  
the ontology p is not safe for s w r t  l 
in fact  it is possible to show a stronger result  namely  that any ontology o containing
axiom e  is not safe for s    cystic fibrosis  genetic disorder  w r t  l   alc  consider an
ontology o              where        v cystic fibrosis  and      genetic disorder v   
since e  is equivalent to axiom      it is easy to see that o  o  is inconsistent  indeed e  
  and   imply the contradiction       v    which is not entailed by o    hence  o  o 
is not a deductive conservative extension of o    by definition    since sig o   sig o     s 
this means that o is not safe for s 
   

fimodular reuse of ontologies  theory and practice

it is clear how one could prove that an ontology o is not safe for a signature s  simply find
an ontology o  with sig o   sig o     s  such that o  o  is not a deductive conservative
extension of o    it is not so clear  however  how one could prove that o is safe for s  it
turns out that the notion of model conservative extensions can also be used for this purpose 
the following lemma introduces a property which relates the notion of model conservative
extension with the notion of safety for a signature  intuitively  it says that the notion of
model conservative extension is stable under expansion with new axioms provided they
share only symbols from s with the original ontologies 
lemma   let o  o   o  and o  be l ontologies and s a signature over l such that
o is a model s conservative extension of o  and sig o   sig o     s  then o  o  is a
model s   conservative extension of o   o  for s    s  sig o    
proof  in order to show that oo  is a model s   conservative extension of o  o  according
to definition    let i be a model of o   o    we just construct a model j of o  o  such
that i s    j  s   
   
since o is a model s conservative extension of o    and i is a model of o    by definition  
there exists a model j  of o such that i s   j   s   let j be an interpretation such
that j  sig o    j   sig o  and j  s    i s    since sig o   s    sig o    s  sig o     
s   sig o   sig o      s and i s   j   s   such interpretation j always exists  since
j  sig o    j   sig o  and j     o  we have j    o  since j  s    i s    sig o     s    and
i    o    we have j    o    hence j    o  o  and i s    j  s    which proves     
lemma   allows us to identify a condition sufficient to ensure the safety of an ontology
for a signature 
proposition    safety for a signature vs  model conservative extensions 
let o be an l ontology and s a signature over l such that o is a model s conservative
extension of the empty ontology o      that is  for every interpretation i there exists a
model j of o such that j  s   i s   then o is safe for s w r t  l 
proof  in order to prove that o is safe for s w r t  l according to definition    take any
shoiq ontology o  such that sig o   sig o     s  we need to demonstrate that o  o 
is a deductive conservative extension of o  w r t  l 
   
indeed  by lemma    since o is a model s conservative extension of o      and
sig o sig o     s  we have that oo  is a model s   conservative extension of o  o    o 
for s    s  sig o     in particular  since sig o     s    we have that o  o  is a deductive
conservative extension of o    as was required to prove     
example   let p  be the ontology consisting of axioms p p   and e  from figure   
we show that p  is safe for s    cystic fibrosis  genetic disorder  w r t  l   shoiq  by
proposition    in order to prove safety for p  it is sufficient to demonstrate that p  is a
model s conservative extension of the empty ontology  that is  for every s interpretation i
there exists a model j of p  such that i s   j  s  
consider the model j obtained from i as in example    as shown in example    j is
a model of p  and i sig q    j  sig q  where q consists of axioms m m  from figure   
in particular  since s  sig q   we have i s   j  s  

   

ficuenca grau  horrocks  kazakov    sattler

    extraction of modules from ontologies
in our example from figure   the medical ontology q is very small  well established medical
ontologies  however  can be very large and may describe subject matters in which the designer of p is not interested  for example  the medical ontology q could contain information
about genes  anatomy  surgical techniques  etc 
even if p imports q without changing the meaning of the reused symbols  processing
that is  browsing  reasoning over  etcthe resulting ontology p  q may be considerably
harder than processing p alone  ideally  one would like to extract a  hopefully small  fragment q  of the external medical ontologya modulethat describes just the concepts that
are reused in p 
intuitively  when answering an arbitrary query over the signature of p  importing the
module q  should give exactly the same answers as if the whole ontology q had been
imported 
definition     module for an ontology   let o  o  and o    o  be l ontologies 
we say that o   is a module for o in o  w r t  l  if o  o  is a deductive s conservative
extension of o  o   for s   sig o  w r t  l 

the task of extracting modules from imported ontologies in our ontology reuse scenario
can be thus formulated as follows 
t  

given l ontologies o  o   
compute a module o   for o in o  w r t  l 

example    consider the ontology p  consisting of axioms p p   e  and the ontology q
consisting of axioms m m  from figure    recall that the axiom  from     is a consequence of axioms m   m  and m  as well as of axioms m   m  and m  from ontology q 
in fact  these sets of axioms are actually minimal subsets of q that imply   in particular 
for the subset q  of q consisting of axioms m   m   m  and m   we have q        it can
be demonstrated that p   q  is a deductive conservative extension of q    in particular
p   q        but then  according to definition     q  is not a module for p  in q w r t 
l   alc or its extensions  since p   q is not an deductive s conservative extension of
p   q  w r t  l   alc for s   sig p     indeed  p   q      sig    s but p   q       
similarly  one can show that any subset of q that does not imply  is not a module in q
w r t  p   
on the other hand  it is possible to show that both subsets q     m   m   m   and
q     m   m   m   of q are modules for p  in q w r t  l   shoiq  to do so  definition     we need to demonstrate that p   q is a deductive s conservative extension of
both p   q  and p   q  for s   sig p    w r t  l  as usual  we demonstrate a stronger
fact  that p   q is a model s conservative extension of p   q  and of p   q  for s which
is sufficient by claim   of proposition   
in order to show that p   q is a model s conservative extension of p   q  for s  
sig p     consider any model i of p   q    we need to construct a model j of p   q
such that i s   j  s   let j be defined exactly as i except that the interpretations of the
atomic concepts fibrosis  pancreas  genetic fibrosis  and genetic origin are defined as the
interpretation of cystic fibrosis in i  and the interpretations of atomic roles located in and
   

fimodular reuse of ontologies  theory and practice

has origin are defined as the identity relation  it is easy to see that axioms m m  and m 
are satisfied in j   since we do not modify the interpretation of the symbols in p    j also
satisfies all axioms from p    moreover  j is a model of m   because genetic fibrosis and
genetic disorder are interpreted in j like cystic fibrosis and genetic disorder in i  and i is
a model of q    which implies the concept inclusion     cystic fibrosis v genetic disorder  
hence we have constructed a model j of p   q such that i s   j  s   thus p   q is a
model s conservative extension of p   q   
in fact  the construction above works if we replace q  with any subset of q that implies
  in particular  p   q is also a model s conservative extension of p   q    in this way  we
have demonstrated that the modules for p in q are exactly those subsets of q that imply
 

an algorithm implementing the task t  can be used for extracting a module from an
ontology q imported into p prior to performing reasoning over the terms in p  however 
when the ontology p is modified  the module has to be extracted again since a module q 
for p in q might not necessarily be a module for the modified ontology  since the extraction
of modules is potentially an expensive operation  it would be more convenient to extract a
module only once and reuse it for any version of the ontology p that reuses the specified
symbols from q  this idea motivates the following definition 
definition     module for a signature   let o  and o    o  be l ontologies and s
a signature over l  we say that o   is a module for s in o   or an s module in o    w r t 
l  if for every l ontology o with sig o   sig o     s  we have that o   is a module for o
in o  w r t  l 

intuitively  the notion of a module for a signature is a uniform analog of the notion of a
module for an ontology  in a similar way as the notion of safety for a signature is a uniform
analog of safety for an ontology  the reasoning task corresponding to definition    can be
formulated as follows 
t  

given a l ontology o  and a signature s over l 
compute a module o   for s in o   

continuing example     it is possible to demonstrate that any subset of q that implies
axiom   is in fact a module for s    cystic fibrosis  genetic disorder  in q  that is  it can
be imported instead of q into every ontology o that shares with q only symbols from s  in
order to prove this  we use the following sufficient condition based on the notion of model
conservative extension 
proposition     modules for a signature vs  model conservative extensions 
let o  and o    o  be l ontologies and s a signature over l such that o  is a model
s conservative extension of o     then o   is a module for s in o  w r t  l 
proof  in order to prove that o   is a module for s in o  w r t  l according to definition    
take any shoiq ontology o such that sig o   sig o     s  we need to demonstrate
that o   is a module for o in o  w r t  l  that is  according to definition     o  o  is a
deductive s   conservative extension of o  o   w r t  l for s    sig o  
   
   

ficuenca grau  horrocks  kazakov    sattler

indeed  by lemma    since o  is a model s conservative extension of o     and sig o    
sig o   s  we have that o   o is a model s    conservative extension of o    o for
s     s  sig o   in particular  since s    sig o   s     we have that o   o is a deductive
s   conservative extension of o    o w r t  l  as was required to prove     
example    let q and  be as in example     we demonstrate that any subset q  of q
which implies  is a module for s    cystic fibrosis  genetic disorder  in q  according to
proposition     it is sufficient to demonstrate that q is a model s conservative extension of
q    that is  for every model i of q  there exists a model j of q such that i s   j  s   it is
easy to see that if the model j is constructed from i as in example     then the required
property holds 

note that a module for a signature s in q does not necessarily contain all the axioms that
contain symbols from s  for example  the module q  consisting of the axiom m   m  and
m  from q does not contain axiom m  which mentions the atomic concept cystic fibrosis
from s  also note that even in a minimal module like q  there might still be some axioms
like m  that do not mention symbols from s at all 
    minimal modules and essential axioms
one is usually not interested in extracting arbitrary modules from a reused ontology  but
in extracting modules that are easy to process afterwards  ideally  the extracted modules
should be as small as possible  hence it is reasonable to consider the problem of extracting
minimal modules  that is  modules that contain no other module as a subset 
examples    and    demonstrate that a minimal module for an ontology or a signature
is not necessarily unique  the ontology q consisting of axioms m m  has two minimal modules q     m   m   m    and q     m   m   m    for the ontology p     p   p   p   e  
as well as for the signature s    cystic fibrosis  genetic disorder   since these are the minimal sets of axioms that imply axiom     cystic fibrosis v genetic disorder   depending
on the application scenario  one can consider several variations of tasks t  and t  for computing minimal modules  in some applications it might be necessary to extract all minimal
modules  whereas in others any minimal module suffices 
axioms that do not occur in a minimal module in q are not essential for p because
they can always be removed from every module of q  thus they never need not be imported
into p  this is not true for the axioms that occur in minimal modules of q  it might be
necessary to import such axioms into p in order not to lose essential information from q 
these arguments motivate the following notion 
definition     essential axiom   let o and o  be l ontologies  s a signature and 
an axiom over l  we say that  is essential for o in o  w r t  l if  is contained in any
minimal module in o  for o w r t  l  we say that  is an essential axiom for s in o  w r t 
l  or s essential in o    if  is contained in some minimal module for s in o  w r t  l  
in our example above the axioms m m  from q are essential for the ontology p  and
for the signature s    cystic fibrosis  genetic disorder   but the axiom m  is not essential 
in certain situations one might be interested in computing the set of essential axioms of
an ontology  which can be done by computing the union of all minimal modules  note that
   

fimodular reuse of ontologies  theory and practice

notation

input

task

checking safety 
t 

o  o    l

check if o is safe for o  w r t  l

t 

o  s  l

check if o is safe for s w r t  l

extracting of  all   some   union of   minimal  module s  
t  a s u  m 

o  o    l

extract modules in o  w r t  o and l

t  a s u  m 

o    s  l

extract modules for s in o  w r t  l

where o  o  are ontologies and s a signature over l
table    summary of reasoning tasks relevant for ontology integration and reuse
computing the union of minimal modules might be easier than computing all the minimal
modules since one does not need to identify which axiom belongs to which minimal module 
in table   we have summarized the reasoning tasks we found to be potentially relevant
for ontology reuse scenarios and have included the variants t am  t sm  and t um of the
task t  and t am  t sm  and t um of the task t  for computation of minimal modules
discussed in this section 
further variants of the tasks t  and t  could be considered relevant to ontology reuse 
for example  instead of computing minimal modules  one might be interested in computing
modules with the smallest number of axioms  or modules of the smallest size measured in
the number of symbols  or in any other complexity measure of the ontology  the theoretical
results that we will present in this paper can easily be extended to many such reasoning
tasks 
    safety and modules for general ontology languages
all the notions introduced in section   are defined with respect to an ontology language 
so far  however  we have implicitly assumed that the ontology languages are the description
logics defined in section  that is  the fragments of the dl shoiq  the notions considered in section   can be applied  however  to a much broader class of ontology languages 
our definitions apply to any ontology language with a notion of entailment of axioms from
ontologies  and a mechanism for identifying their signatures 
definition     an ontology language is a tuple l    sg  ax  sig       where sg is a set
of signature elements  or vocabulary  of l  ax is a set of axioms in l  sig is a function
that assigns to every axiom   ax a finite set sig    sg called the signature of   and
   is the entailment relation between sets of axioms o  ax and axioms   ax  written
o      an ontology over l is a finitesset of axioms o  ax  we extend the function sig
to ontologies o as follows  sig o     o sig   

definition    provides a very general notion of an ontology language  a language l is
given by a set of symbols  a signature   a set of formulae  axioms  that can be constructed
over those symbols  a function that assigns to each formula its signature  and an entailment
relation between sets of axioms  the ontology language owl dl as well as all description
   

ficuenca grau  horrocks  kazakov    sattler

logics defined in section   are examples of ontology languages in accordance to definition    
other examples of ontology languages are first order logic  second order logic  and logic
programs 
it is easy to see that the notions of deductive conservative extension  definition     safety
 definitions   and    and modules  definitions    and      as well as all the reasoning tasks
from table    are well defined for every ontology language l given by definition     the
definition of model conservative extension  definition    and the propositions involving
model conservative extensions  propositions       and     can be also extended to other
languages with a standard tarski model theoretic semantics  such as higher order logic 
to simplify the presentation  however  we will not formulate general requirements on the
semantics of ontology languages  and assume that we deal with sublanguages of shoiq
whenever semantics is taken into account 
in the remainder of this section  we establish the relationships between the different
notions of safety and modules for arbitrary ontology languages 
proposition     safety vs  modules for an ontology  let l be an ontology language 
and let o  o    and o    o  be ontologies over l  then 
   o  is safe for o w r t  l iff the empty ontology is a module for o in o  w r t  l 
   if o    o   is safe for o  o   then o   is a module for o in o  w r t  l 
proof     by definition    o  is safe for o w r t  l iff  a  o  o  is a deductive conservative
extension of o w r t  l  by definition     the empty ontology o      is a module for o in
o  w r t  l iff  b  o  o  is a deductive s conservative extension of o  o     o w r t  l
for s   sig o   it is easy to see that  a  is the same as  b  
   by definition    o    o   is safe for o  o   w r t  l iff  c  o  o     o    o       o  o 
is a deductive conservative extension of o  o   w r t  l  in particular  o  o  is a deductive
s conservative extension of o  o   w r t  l for s   sig o   which implies  by definition    
that o   is a module for o in o  w r t  l 
we also provide the analog of proposition    for the notions of safety and modules for
a signature 
proposition     safety vs  modules for a signature  let l be an ontology language 
o  and o    o    ontologies over l  and s a subset of the signature of l  then 
   o  is safe for s w r t  l iff the empty ontology o      is an s module in o  w r t  l 
   if o    o   is safe for s  sig o     w r t  l  then o   is an s module in o  w r t  l 
proof     by definition    o  is safe for s w r t  l iff  a  for every o with sig o     sig o  
s  it is the case that o  is safe for o w r t  l  by definition     o      is an s module
in o  w r t  l iff  b  for every o with sig o     sig o   s  it is the case that o      is
a module for o in o  w r t  l  by claim   of proposition     it is easy to see that  a  is
equivalent to  b  
   by definition    o    o   is safe for s  sig o     w r t  l iff  c  for every o  with
sig o    o      sig o   s  sig o      we have that o    o   is safe for o w r t  l  by
   

fimodular reuse of ontologies  theory and practice

definition     o   is an s module in o  w r t  l iff  d  for every o with sig o   sig o   s 
we have that o   is a module for o in o  w r t  l 
in order to prove that  c  implies  d   let o be such that sig o     sig o   s  we need
to demonstrate that o   is a module for o in o  w r t  l 
   
 
 
 
 
 
 
let o    o  o    note that sig o   o     sig o    sig o   o      sig o   sig o     
 sig o    o      sig o    sig o      s  sig o      hence  by  c  we have that o    o   is safe
for o   o  o   w r t  l which implies by claim   of proposition    that o   is a module
for o in o  w r t  l     

   undecidability and complexity results
in this section we study the computational properties of the tasks in table   for ontology
languages that correspond to fragments of the description logic shoiq  we demonstrate
that most of these reasoning tasks are algorithmically unsolvable even for relatively inexpressive dls  and are computationally hard for simple dls 
since the notions of modules and safety are defined in section   using the notion of
deductive conservative extension  it is reasonable to identify which  un decidability and
complexity results for conservative extensions are applicable to the reasoning tasks in table    the computational properties of conservative extensions have recently been studied
in the context of description logics  given o   o over a language l  the problem of
deciding whether o is a deductive conservative extension of o  w r t  l is   exptimecomplete for l   alc  ghilardi et al          this result was extended by lutz et al 
        who showed that the problem is   exptime complete for l   alciq and undecidable for l   alciqo  recently  the problem has also been studied for simple dls  it
has been shown that deciding deductive conservative extensions is exptime complete for
l   el lutz   wolter         these results can be immediately applied to the notions of
safety and modules for an ontology 
proposition    given ontologies o and o  over l  the problem of determining whether
o is safe for o  w r t  l is exptime complete for l   el    exptime complete for
l   alc and l   alciq  and undecidable for l   alciqo  given ontologies o  o   
and o    o  over l  the problem of determining whether o   is a module for o in o  is
exptime complete for l   el    exptime complete for l   alc and l   alciq 
and undecidable for l   alciqo 
proof  by definition    an ontology o is safe for o  w r t  l iff o  o  is a deductive
conservative extension of o  w r t  l  by definition    an ontology o   is a module for o in
o  w r t  l if o  o  is a deductive s conservative extension of o  o   for s   sig o  w r t 
l  hence  any algorithm for checking deductive conservative extensions can be reused for
checking safety and modules 
conversely  we demonstrate that any algorithm for checking safety or modules can be
used for checking deductive conservative extensions  indeed  o is a deductive conservative
extension of o   o w r t  l iff o o  is safe for o  w r t  l iff  by claim   of proposition    
o     is a module for o  in o   o  w r t  l  

   

ficuenca grau  horrocks  kazakov    sattler

corollary    there exist algorithms performing tasks t   and t  a s u m from table  
for l   el and l   alciq that run in exptime and   exptime respectively  there
is no algorithm performing tasks t   or t  a s u m from table   for l   alciqo 
proof  the task t  corresponds directly to the problem of checking the safety of an ontology 
as given in definition   
suppose that we have a   exptime algorithm that  given ontologies o  o  and o   
 
o   determines whether o   is a module for o in o  w r t  l   alciq  we demonstrate
that this algorithm can be used to solve the reasoning tasks t am  t sm and t um for
l   alciq in   exptime  indeed  given ontologies o and o    one can enumerate all
subsets of o  and check in   exptime which of these subsets are modules for o in o 
w r t  l  then we can determine which of these modules are minimal and return all of them 
one of them  or the union of them depending on the reasoning task 
finally  we prove that solving any of the reasoning tasks t am  t sm and t um is not
easier than checking the safety of an ontology  indeed  by claim   of proposition     an
ontology o is safe for o  w r t  l iff o     is a module for o  in o w r t  l  note that
the empty ontology o     is a module for o  in o w r t  l iff o     is the only minimal
module for o  in o w r t  l 
we have demonstrated that the reasoning tasks t  and t  a s u m are computationally
unsolvable for dls that are as expressive as alcqio  and are   exptime hard for alc 
in the remainder of this section  we focus on the computational properties of the reasoning
tasks t  and t  a s u m related to the notions of safety and modules for a signature  we
demonstrate that all of these reasoning tasks are undecidable for dls that are as expressive
as alco 
theorem     undecidability of safety for a signature  the problem of checking
whether an ontology o consisting of a single alc axiom is safe for a signature s is undecidable w r t  l   alco 
proof  the proof is a variation of the construction for undecidability of deductive conservative extensions in alcqio  lutz et al          based on a reduction to a domino tiling
problem 
a domino system is a triple d    t  h  v   where t               k  is a finite set of tiles
and h  v  t  t are horizontal and vertical matching relations  a solution for a domino
system d is a mapping ti j that assigns to every pair of integers i  j    an element of t  
such that hti j   ti j   i  h and hti j   ti   j i  v   a periodic solution for a domino system
d is a solution ti j for which there exist integers m      n    called periods such that
ti m j   ti j and ti j n   ti j for every i  j    
let d be the set of all domino systems  ds be the subset of d that admit a solution and
dps be the subset of ds that admit a periodic solution  it is well known  borger  gradel 
  gurevich        theorem        that the sets d   ds and dps are recursively inseparable 
that is  there is no recursive  i e  decidable  subset d   d of domino systems such that
dps  d   ds  
we use this property in our reduction  for each domino system d  we construct a
signature s   s d   and an ontology o   o d  which consists of a single alc axiom such
that 
   

fimodular reuse of ontologies  theory and practice

 q   

  v a  t    t ak

where t               k 

 q   

at u at  v 
f
at v rh    ht t  ih at   
f
at v rv    ht t  iv at   

   t   t   k

 q   
 q   

 tk
 tk

figure    an ontology otile   otile  d  expressing tiling conditions for a domino system d
 a  if d does not have a solution then o   o d  is safe for s   s d  w r t  l   alco 
and
 b  if d has a periodic solution then o   o d  is not safe for s   s d  w r t  l   alco 
in other words  for the set d  consisting of the domino systems d such that o   o d 
is not safe for s   s d  w r t  l   alco  we have dps  d   ds   since d   ds and dps
are recursively inseparable  this implies undecidability for d  and hence for the problem of
checking if o is s safe w r t  l   alco  because otherwise one can use this problem for
deciding membership in d   
the signature s   s d   and the ontology o   o d  are constructed as follows  given
a domino system d    t  h  v    let s consist of fresh atomic concepts at for every t  t and
two atomic roles rh and rv   consider an ontology otile in figure   constructed for d  note
that sig otile     s  the axioms of otile express the tiling conditions for a domino system
d  namely  q    and  q    express that every domain element is assigned with a unique tile
t  t    q    and  q    express that every domain element has horizontal and vertical matching
successors 
now let s be an atomic role and b an atomic concept such that s  b 
  s  let o      
where 
i
hf
      v s 
 ci vdi  otile  ci u di   t  rh  rv  b u rv  rh  b 
we say that rh and rv commute in an interpretation i    i   i   if for all domain
elements a  b  c  d  and d  from i such that ha  bi  rh i   hb  d  i  rv i   ha  ci  rv i   and
hc  d  i  rh i   we have d    d    the following claims can be easily proved 
claim   

if otile  d  has a model i in which rh and rv commute  then d has a solution 

indeed a model i      i   of otile  d  can be used to guide the construction of a solution
ti j for d as follows  for every i  j     we construct ti j inductively together with elements
ai j  i such that hai j   ai j   i  rv i and hai j   ai   j i  rh i   we set a    to any element
from i  
now suppose ai j with i  j    is constructed  since i is a model of axioms  q    and
 q    from figure    we have a unique at with    t  k such that ai j  at i   then we set
ti j    t  since i is a model of axioms  q    and  q    and ai j  at i there exist b  c  i
and t    t    t such that hai j   bi  rh i   hai j   ci  rv i   ht  t  i  h  ht  t   i  v   b  at  i  
and c  at   i   in this case we assign ai j      b  ai   j    c  ti j      t    and ti   j    t    
note that some values of ai j and ti j can be assigned two times  ai   j   and ti   j   are
constructed for ai j   and ai j     however  since rv and rh commute in i  the value for
   

ficuenca grau  horrocks  kazakov    sattler

ai   j   is unique  and because of  q     the value for ti   j   is unique  it is easy to see that
ti j is a solution for d 
claim   

if i is a model of otile  o  then rh and rv do not commute in i 

indeed  it is easy to see that otile  o       v s  rh  rv  b u rv  rh  b    hence  if
i    i   i   is a model of otile  o  then there exist a  b  c  d  and d  such that hx  ai  si
for every x  i   ha  bi  rh i   hb  d  i  rv i   d   b i   ha  ci  rv i   hc  d  i  rh i   and
d    b i   this implies that d     d    and so  rh and rv do not commute in i 
finally  we demonstrate that o   o d  satisfies properties  a  and  b  
in order to prove property  a  we use the sufficient condition for safety given in proposition   and demonstrate that if d has no solution then for every interpretation i there
exists a model j of o such that j  s   i s   by proposition    this will imply that o is safe
for s w r t  l 
let i be an arbitrary interpretation  since d has no solution  then by the contra positive
of claim   either     i is not a model of otile   or     rh and rv do not commute in i  we
demonstrate for both of these cases how to construct the required model j of o such that
j  s   i s  
case      if i    i   i   is not a model of otile then there exists an axiom  ci v di   
otile such that i      ci v di    that is  there exists a domain element a  i such that
a  cii but a   dii   let us define j to be identical to i except for the interpretation of the
atomic role s which we define in j as sj    hx  ai   x     since the interpretations of
the symbols in s have remained unchanged  we have a  cij   a  dij   and so j       v
s  ci u dj     this implies that j      and so  we have constructed a model j of o such
that j  s   i s  
case      suppose that rh and rv do not commute in i    i   i    this means that
there exist domain elements a  b  c  d  and d  from i with ha  bi  rh i   hb  d  i  rv i  
ha  ci  rv i   and hc  d  i  rh i   such that d     d    let us define j to be identical to i except
for the interpretation of the atomic role s and the atomic concept b  we interpret s in j as
sj    hx  ai   x     we interpret b in j as b j    d     note that a   rh  rv  b j and
a   rv  rh  b j since d     d    so  we have j       v s  rh  rv  b u rv  rh  b  
which implies that j      and thus  we have constructed a model j of o such that
j  s   i s  
in order to prove property  b   assume that d has a periodic solution ti j with the
periods m  n     we demonstrate that o is not s safe w r t  l  for this purpose we
construct an alco ontology o  with sig o   sig o     s such that o  o        v   
but o         v    this will imply that o is not safe for o  w r t  l   alco  and  hence 
is not safe for s w r t  l   alco 
we define o  such that every model of o  is a finite encoding of the periodic solution ti j
with the periods m and n  for every pair  i  j  with    i  m and    j  n we introduce
a fresh individual ai j and define o  to be an extension of otile with the following axioms 
 p     ai   j   v rv   ai   j  

 p     ai   j   v rv   ai   j   

i    i     

mod m

 p     ai j    v rh   ai j   

 p     ai j    v rh   ai j    
j    j     
f
 p      v  im   jn  ai j  

mod n

   

fimodular reuse of ontologies  theory and practice

the purpose of axioms  p    p    is to ensure that rh and rv commute in every model of
o    it is easy to see that o  has a model corresponding to every periodic solution for d with
periods m and n  hence o         v    on the other hand  by claim    since o  contains
otile   then in every model of o   o  rh and rv do not commute  this is only possible if
o   o have no models  so o   o       v   
a direct consequence of theorem    and proposition    is the undecidability of the
problem of checking whether a subset of an ontology is a module for a signature 
corollary    given a signature s and alc ontologies o  and o    o    the problem of
determining whether o   is an s module in o  w r t  l   alco is undecidable 
proof  by claim   of proposition     o is s safe w r t  l if o     is an s module in o
w r t  l  hence any algorithm for recognizing modules for a signature in l can be used for
checking if an ontology is safe for a signature in l 
corollary    there is no algorithm that can perform tasks t   or t  a s u m for l  
alco 
proof  theorem    directly implies that there is no algorithm for task t   since this task
corresponds to the problem of checking safety for a signature 
solving any of the reasoning tasks t am  t sm  or t um for l is at least as hard as
checking the safety of an ontology  since  by claim   of proposition     an ontology o is
s safe w r t  l iff o     is  the only minimal  s module in o w r t  l 

   sufficient conditions for safety
theorem    establishes the undecidability of checking whether an ontology expressed in
owl dl is safe w r t  a signature  this undecidability result is discouraging and leaves
us with two alternatives  first  we could focus on simple dls for which this problem is
decidable  alternatively  we could look for sufficient conditions for the notion of safety
that is  if an ontology satisfies our conditions  then we can guarantee that it is safe  the
converse  however  does not necessarily hold 
the remainder of this paper focuses on the latter approach  before we go any further 
however  it is worth noting that theorem    still leaves room for investigating the former
approach  indeed  safety may still be decidable for weaker description logics  such as el 
or even for very expressive logics such as shiq  in the case of shiq  however  existing
results  lutz et al         strongly indicate that checking safety is likely to be exponentially
harder than reasoning and practical algorithms may be hard to design  this said  in what
follows we will focus on defining sufficient conditions for safety that we can use in practice
and restrict ourselves to owl dlthat is  shoiqontologies 
    safety classes
in general  any sufficient condition for safety can be defined by giving  for each signature
s  the set of ontologies over a language that satisfy the condition for that signature  these
ontologies are then guaranteed to be safe for the signature under consideration  these
intuitions lead to the notion of a safety class 
   

ficuenca grau  horrocks  kazakov    sattler

definition     class of ontologies  safety class   a class of ontologies for a language
l is a function o   that assigns to every subset s of the signature of l  a subset o s 
of ontologies in l  a class o   is anti monotonic if s   s  implies o s     o s     it is
compact when o  o s  sig o   for each o  o s   and it is subset closed if o   o 
and o   o s  implies o   o s   it is union closed if o   o s  and o   o s  implies
 o   o     o s  
a safety class  also called a sufficient condition to safety  for an ontology language l
is a class of ontologies o   for l such that for each s it is the case that  i    o s   and
 ii  each ontology o  o s  is s safe for l 

intuitively  a class of ontologies is a collection of sets of ontologies parameterized by a
signature  a safety class represents a sufficient condition for safety  each ontology in o s 
should be safe for s  also  w l o g   we assume that the the empty ontology  belongs to
every safety class for every signature  in what follows  whenever an ontology o belongs to
a safety class for a given signature and the safety class is clear from the context  we will
sometimes say that o passes the safety test for s 
safety classes may admit many natural properties  as given in definition     antimonotonicity intuitively means that if an ontology o can be proved to be safe w r t  s
using the sufficient condition  then o can be proved to be safe w r t  every subset of s 
compactness means that it is sufficient to consider only common elements of sig o  and s
for checking safety  subset closure  union closure  means that if o  o  and o    satisfy the
sufficient condition for safety  then every subset of o  the union of o  and o    also satisfies
this condition 
    locality
in this section we introduce a family of safety classes for l   shoiq that is based on the
semantic properties underlying the notion of model conservative extensions  in section   
we have seen that  according to proposition    one way to prove that o is s safe is to show
that o is a model s conservative extension of the empty ontology 
the following definition formalizes the classes of ontologies  called local ontologies  for
which safety can be proved using proposition   
definition     class of interpretations  locality   given a shoiq signature s 
we say that a set of interpretations i is local w r t  s if for every shoiq interpretation i
there exists an interpretation j  i such that i s   j  s  
a class of interpretations is a function i   that given a shoiq signature s returns a set
of interpretations i s   it is local if i s  is local w r t  s for every s  it is monotonic if s   s 
implies i s     i s     it is compact if for every s    s  and s such that  s  m s     s   
we have that i s    s   i s    s   where s  m s  is the symmetric difference of sets s  and
s  defined by s  m s     s    s   s    s   
given a class of interpretations i    we say that o   is the class of ontologies o   based
on i   if for every s  o s  is the set of ontologies that are valid in i s   if i   is local then
we say that o   is a class of local ontologies  and for every s and o  o s  and every
  o  we say that o and  are local  based on i    


   

fimodular reuse of ontologies  theory and practice

r
example    let ia
   be a class of shoiq interpretations defined as follows  given a
r
signature s  the set ia  s  consists of interpretations j such that rj    for every atomic
r
role r 
  s and aj    for every atomic concept a 
  s  it is easy to show that ia
 s 
i
i
is local for every s  since for every interpretation i          and the interpretation
j    j   j   defined by j    i   rj    for r 
  s  aj    for a 
  s  and x j    x i
r
r
r
for the remaining symbols x  then j  ia  s  and i s   j  s   since ia
 s     ia
 s   
r
r
for every s   s    it is the case that ia    is monotonic  ia    is also compact  since for
r
r
 s    are defined differently
 s    and ia
every s  and s  the sets of interpretations ia
only for elements in s  m s   
r
r
given a signature s  the set axa
 s  of axioms that are local w r t  s based on ia
 s 
r
consists of all axioms  such for every j  ia  s   it is the case that j      then the
r
r
r
 s  
 s  iff o  axa
   is defined by o  oa
class of local ontologies based on ia


proposition     locality implies safety  let o   be a class of ontologies for shoiq
based on a local class of interpretations i    then o   is a subset closed and union closed
safety class for l   shoiq  additionally  if i   is monotonic  then o   is anti monotonic 
and if i   is compact then o   is also compact 
proof  assume that o   is a class of ontologies based on i    then by definition    for
every shoiq signature s  we have o  o s  iff o is valid in i s  iff j    o for every
interpretation j  i s   since i   is a local class of interpretations  we have that for
every shoiq interpretation i there exists j  i s  such that j  s   i s   hence for
every o  i s  and every shoiq interpretation i there is a model j  i s  such that
j  s   i s   which implies by proposition   that o is safe for s w r t  l   shoiq  thus
o   is a safety class 
the fact that o   is subset closed and union closed follows directly from definition   
since  o   o     o s  iff  o   o    is valid in i s  iff o  and o  are valid in i s  iff
o   o s  and o   o s   if i   is monotonic then i s     i s    for every s   s    and
so o  o s    implies that o is valid in i s    which implies that o is valid in i s    which
implies that o  o s     hence o   is anti monotonic 
if i   is compact then for every s    s  and s such that  s  m s     s    we have
that i s    s   i s    s   hence for every o with sig o   s we have that o is valid in
i s    iff o is valid in i s     and so  o  o s    iff o  o s     in particular  o  o s  iff
o  o s  sig o   since  s m  s  sig o     sig o     s   sig o    sig o      hence 
o   is compact 
r
corollary    the class of ontologies oa
 s  defined in example    is an anti monotonic
compact subset closed and union closed safety class 

example    recall that in example   from section    we demonstrated that the ontology
p   q given in figure   with p     p           p   e   is a deductive conservative extension
of q for s    cystic fibrosis  genetic disorder   this has been done by showing that every
s interpretation i can be expanded to a model j of axioms p p   e  by interpreting
the symbols in sig p      s as the empty set  in terms of example    this means that
   

ficuenca grau  horrocks  kazakov    sattler

r
r
p   oa
 s   since oa
   is a class of local ontologies  by proposition     the ontology
p  is safe for s w r t  l   shoiq 


proposition    and example    suggest a particular way of proving the safety of ontologies  given a shoiq ontology o and a signature s it is sufficient to check whether
r
 s   that is  whether every axiom  in o is satisfied by every interpretation from
o  oa
r
ia  s   if this property holds  then o must be safe for s according to proposition    
it turns out that this notion provides a powerful sufficiency test for safety which works
surprisingly well for many real world ontologies  as will be shown in section    in the next
section we discuss how to perform this test in practice 
    testing locality
r
in this section  we focus in more detail on the safety class oa
    introduced in example     when ambiguity does not arise  we refer to this safety class simply as locality  
r
from the definition of axa
 s  given in example    it is easy to see that an axiom  is
r
local w r t  s  based on ia  s   if  is satisfied in every interpretation that fixes the interpretation of all atomic roles and concepts outside s to the empty set  note that for defining
locality we do not fix the interpretation of the individuals outside s  but in principle  this
could be done  the reason is that there is no elegant way to describe such interpretations 
namely  every individual needs to be interpreted as an element of the domain  and there is
no canonical element of every domain to choose 
in order to test the locality of  w r t  s  it is sufficient to interpret every atomic concept
and atomic role not in s as the empty set and then check if  is satisfied in all interpretations
of the remaining symbols  this observation suggests the following test for locality 

proposition     testing locality  given a shoiq signature s  concept c  axiom 
and ontology o let   c  s       s  and   o  s  be defined recursively as follows 
  c  s     

     s 
    a  s 
     a   s 
    c  u c    s 
    c    s 
    r c    s 
      n r c     s 

    
   if a 
  s and otherwise   a 
   a  
    c    s  u   c    s  
    c    s  
   if sig r    s and otherwise   r   c    s  
   if sig r    s and otherwise      n r   c    s   

  c  v c    s       c    s  v   c    s   
    r  v r    s      v   if sig r      s  otherwise
  r     v  if sig r      s  otherwise    r  v r    
    a   c  s 
  a     c  s  
    r a  b   s 
    v  if r 
  s and otherwise   r a  b  
    trans r   s     v  if r 
  s and otherwise   trans r  
    funct r   s     v  if sig r    s and otherwise   funct r  
s
  o  s     
o     s 
    s     

   this notion of locality is exactly the one we used in our previous work  cuenca grau et al         

   

 a 
 b 
 c 
 d 
 e 
 f  
 g 
 h 
 i 
 j 
 k 
 l 
 m 
 n 

fimodular reuse of ontologies  theory and practice

r
then  o  oa
 s  iff every axiom in   o  s  is a tautology 

proof  it is easy to check that for every atomic concept a and atomic role r from   c  s  
we have a  s and r  s  in other words  all atomic concepts and roles that are not in s
are eliminated by the transformation   it is also easy to show by induction that for every
r
interpretation i  ia
 s   we have c i      c  s  i and that i     iff i        s   hence
r
an axiom  is local w r t  s iff i     for every interpretation i  ia
 s  iff i        s 
r
for every sig   interpretation i  ia  s  iff     s  is a tautology 
example    let o      be the ontology consisting of axiom    m  from figure    we
demonstrate using proposition    that o is local w r t  s     fibrosis  genetic origin   but
not local w r t  s     genetic fibrosis  has origin  
indeed  according to proposition     in order to check whether o is local w r t  s  it is
sufficient to perform the following replacements in   the symbols from s  are underlined  

m 

  by  f  
  by  b  
  
 
z
  
 
z
genetic fibrosis  fibrosis u has origin genetic origin

   

similarly  in order to check whether o is local w r t  s    it is sufficient to perform the
following replacements in   the symbols from s  are underlined  
  by  b  
  by  b  
  
 
z     
z
m  genetic fibrosis  fibrosis u has origin genetic origin

   

in the first case we obtain   m   s         fibrosis u   which is a shoiq tautology 
hence o is local w r t  s  and hence by proposition   is s   safe w r t  shoiq  in the
second case   m   s       genetic fibrosis   u has origin   which is not a shoiq
tautology  hence o is not local w r t  s   

    a tractable approximation to locality
one of the important conclusions of proposition    is that one can use the standard capabilities of available dl reasoners such as fact    tsarkov   horrocks         racer
 moller   haarslev         pellet  sirin   parsia        or kaon   motik        for testing
locality since these reasoners  among other things  allow testing for dl tautologies  checking for tautologies in description logics is  theoretically  a difficult problem  e g  for the
dl shoiq it is known to be nexptime complete  tobies         there are  however 
several reasons to believe that the locality test would perform well in practice  the primary
reason is that the sizes of the axioms which need to be tested for tautologies are usually
relatively small compared to the sizes of ontologies  secondly  modern dl reasoners are
highly optimized for standard reasoning tasks and behave well for most realistic ontologies 
in case reasoning is too costly  it is possible to formulate a tractable approximation to the
locality conditions for shoiq 
   recall that the constructors   c  t c    r c  and    n r c  are assumed to be expressed using   
c  u c    r c and    n r c   hence  in particular  every role r with sig r     s occurs in o as either
r  c     n r  c   r v r  r v r   trans r    or funct r    and hence will be eliminated  all atomic
concepts a 
  s will be eliminated likewise  note that it is not necessarily the case that sig     s    s 
since     s  may still contain individuals that do not occur in s 

   

ficuenca grau  horrocks  kazakov    sattler

definition     syntactic locality for shoiq   let s be a signature  the following
grammar recursively defines two sets of concepts con s  and con s  for a signature s 
con s      a   c    c u c    c  u c   r  c   r c       n r  c       n r c     
con s          c    c  u c   
where a 
  s is an atomic concept  r  possibly the inverse of  an atomic role r 
  s  c
  con s   and i         
any concept  r any role  c   con s   c i 
an axiom  is syntactically local w r t  s if it is of one of the following forms      r v r 
or     trans r    or     funct r    or     c  v c  or     c v c    or     a   c    we denote
r
by axa
 s  the set of all shoiq axioms that are syntactically local w r t  s 
r
a shoiq ontology o is syntactically local w r t  s if o  axa
 s   we denote by
r
oa  s  the set of all shoiq ontologies that are syntactically local w r t  s 

intuitively  syntactic locality provides a simple syntactic test to ensure that an axiom is
r
satisfied in every interpretation from ia
 s   it is easy to see from the inductive definitions


of con  s  and con  s  in definition    that for every interpretation i    i   i   from
r
ia
 s  it is the case that  c   i    and  c   i   i for every c   con s  and

c  con s   hence  every syntactically local axiom is satisfied in every interpretation
r
i from ia
 s   and so we obtain the following conclusion 
r
r
proposition    axa
 s   axa
 s  

further  it can be shown that the safety class for shoiq based on syntactic locality
enjoys all of the properties from definition    
r
proposition    the class of syntactically local ontologies oa
   given in definition   
is an anti monotonic  compact  subset closed  and union closed safety class 
r
r
   is a safety class by proposition     anti monotonicity for oa
   can
proof  oa



be shown by induction  by proving that con  s     con  s     con  s     con s   
r
r
and axa
 s     axa
 s    when s   s    also one can show by induction that
r
r
r
r


  axa  s  iff   axa  s  sig     so oa
   is compact  since o  oa
 s 
r
r

iff o  axa  s   we have that oa    is subset closed and union closed 

example     example    continued  it is easy to see that axiom m  from figure   is
syntactically local w r t  s     fibrosis  genetic origin   below we indicate sub concepts in
 from con s    

m 

 con s     matches a  
 con s     matches r  c 
z
  
 
z
  
 
genetic fibrosis  fibrosis u has origin genetic origin
   
 
 z
 
 con s     matches c u c   

it is easy to show in a similar way that axioms p  p   and e  from figure   are syntactically local w r t  s    cystic fibrosis  genetic disorder   hence the ontology p   
 p           p   e   considered in example    is syntactically local w r t  s 

   

fimodular reuse of ontologies  theory and practice

r  s 
ia

r  a   s  

r
ia
 s 
r
ia
 s 
rid  s 
ia

rj

aj

r  s 
ia





r
ia
 s 



r
ia
 s 



rid  s 
ia

j  j
 hx  xi   x  j  

r  a   s  

rj

aj



j

j  j
 hx  xi   x  j  

j
j

table    examples for different local classes of interpretations
the converse of proposition    does not hold in general since there are semantically
local axioms that are not syntactically local  for example  the axiom     a v a t b  is
local w r t  every s since it is a tautology  and hence true in every interpretation   on the
other hand  it is easy to see that  is not syntactically local w r t  s    a  b  according to
definition    since it involves symbols in s only  another example  which is not a tautology 
is a gci     r a v r b   the axiom  is semantically local w r t  s    r   since
    s     r  v r   is a tautology  but not syntactically local  these examples show
that the limitation of our syntactic notion of locality is its inability to compare different
occurrences of concepts from the given signature s  as a result  syntactic locality does not
detect all tautological axioms  it is reasonable to assume  however  that tautological axioms
do not occur often in realistic ontologies  furthermore  syntactic locality checking can be
performed in polynomial time by matching an axiom according to definition    
proposition    there exists an algorithm that given a shoiq ontology o and a sigr
nature s  determines whether o  oa
 s   and whose running time is polynomial in
 o     s   where  o  and  s  are the number of symbols occurring in o and s respectively  
    other locality classes
r
the locality condition given in example    based on a class of local interpretations ia
  
is just a particular example of locality which can be used for testing safety  other classes
of local interpretations can be constructed in a similar way by fixing the interpretations
of elements outside s to different values  in table   we have listed several such classes of
local interpretations where we fix the interpretation of atomic roles outside s to be either
the empty set   the universal relation     or the identity relation id on   and the
interpretation of atomic concepts outside s to either the empty set  or the set  of all
elements 
each local class of interpretations in table   defines a corresponding class of local
ontologies analogously to example     in table   we have listed all of these classes together
with examples of typical types of axioms used in ontologies  these axioms are assumed
to be an extension of our project ontology from figure    we indicate which axioms are
local w r t  s for which locality conditions assuming  as usual  that the symbols from s are
underlined 
it can be seen from table   that different types of locality conditions are appropriate
r
for different types of axioms  the locality condition based on ia
 s  captures the domain
axiom p   definition p   the disjointness axiom p   and the functionality axiom p  but

   we assume that the numbers in number restrictions are written down using binary coding 

   

ficuenca grau  horrocks  kazakov    sattler

r
a

r
a

rid
a

r
a

r
a

rid
a

 

 

 

 

 

 

 

 

 

 

 

 

p  project u bio medicine v 

 

 

 

 

 

 

p  funct has focus 

 

 

 

 

 

 

p  human genome   project

 

 

 

 

 

 

p  has focus human genome  gene 

 

 

 

 

 

 

 

 

 

 

 

 



    ax

axiom

p  has focus   v project
p 

e 

biomedical project  project u
u has focus bio medicine

has focus cystic fibrosis v
v has focus cystic fibrosis

table    a comparison between different types of locality conditions

neither of the assertions p  or p   since the individuals human genome and gene prevent
us from interpreting the atomic role has focus and atomic concept project with the empty
r
 s   where the atomic roles and concepts outside
set  the locality condition based on ia
s are interpreted as the largest possible sets  can capture such assertions but are generally
poor for other types of axioms  for example  the functionality axiom p  is not captured
by this locality condition since the atomic role has focus is interpreted as the universal
relation   which is not necessarily functional  in order to capture such functionality
rid  s  or i rid  s   where every atomic role outside
axioms  one can use locality based on ia
a
s is interpreted with the identity relation id on the interpretation domain  note that the
modeling error e  is not local for any of the given locality conditions  note also that it is
not possible to come up with a locality condition that captures all the axioms p p   since
in p  and p  together imply axiom      human genome  u bio medicine v   which
uses the symbols from s only  hence  every subset of p containing p  and p  is not safe
w r t  s  and so cannot be local w r t  s 
it might be possible to come up with algorithms for testing locality conditions for the
classes of interpretation in table   similar to the ones presented in proposition     for
r
example  locality based on the class ia
 s  can be tested as in proposition     where the
case  a  of the definition for   c  s  is replaced with the following 
  a  s 

    if a 
  s and otherwise   a

 a   

r
rid  s   checking
for the remaining classes of interpretations  that is for ia
 s  and ia
locality  however  is not that straightforward  since it is not clear how to eliminate the
universal roles and identity roles from the axioms and preserve validity in the respective
classes of interpretations 
still  it is easy to come up with tractable syntactic approximations for all the locality
conditions considered in this section in a similar manner to what has been done in section      the idea is the same as that used in definition     namely to define two sets
con s  and con s  of concepts for a signature s which are interpreted as the empty

   

fimodular reuse of ontologies  theory and practice

con s      c    c u c    c  u c

con s          c    c  u c 

  r c      n r c 

r    
for ia

  a

r    
for ia

  a

r
for ia
   

  r  c       n r  c   

r
for ia
   

  r  c     n r  c

rid    
for ia

  rid  c         rid  c     

rid    
for ia

     m rid  c   m     

r  s      c  v c   c v c    a   c 
axa
r
for ia
   

  r v r   trans r     funct r  

r
for ia
   

  r v r   trans r     r  a  b 

rid    
for ia

  trans rid     funct rid  

where 
a   a   r   r   rid   s 
sig r    sig r    sig rid     s 
  con s  
c   con s   c i 
c is any concept  r is any role

figure    syntactic locality conditions for the classes of interpretations in table  
set and  respectively  as i in every interpretation i from the class and see in which situations dl constructors produce the elements from these sets  in figure   we gave recursive
r  s  that correspond to classes i r  s  of
definitions for syntactically local axioms axa
a
interpretations from table    where some cases in the recursive definitions are present only
for the indicated classes of interpretations 
    combining and extending safety classes
in the previous section we gave examples of several safety classes based on different local
classes of interpretations and demonstrated that different classes are suitable for different
types of axioms  in order to check safety of ontologies in practice  one may try to apply
different sufficient tests and check if any of them succeeds  obviously  this gives a more
powerful sufficient condition for safety  which can be seen as the union of the safety classes
used in the tests 
formally  given two classes of ontologies o     and o      their union  o   o      is a
class of ontologies defined by  o  o    s    o   s o   s   it is easy to see by definition   
that if both o     and o     are safety classes then their union  o   o      is a safety
class  moreover  if each of the safety classes is also anti monotonic or subset closed  then
the union is anti monotonic  or respectively  subset closed as well  unfortunately the unionclosure property for safety classes is not preserved under unions  as demonstrated in the
following example 
r
r
example    consider the union  oa
 oa
    of two classes of local ontologies
r
r
oa    and oa    defined in section      this safety class is not union closed since 
for example  the ontology o  consisting of axioms p p  from table   satisfies the first
locality condition  the ontology o  consisting of axioms p p  satisfies the second locality
condition  but their union o  o  satisfies neither the first nor the second locality condition
and  in fact  is not even safe for s as we have shown in section     


as shown in proposition     every locality condition gives a union closed safety class 
however  as seen in example     the union of such safety classes might be no longer unionclosed  one may wonder if locality classes already provide the most powerful sufficient
   

ficuenca grau  horrocks  kazakov    sattler

conditions for safety that satisfy all the desirable properties from definition     surprisingly
this is the case to a certain extent for some locality classes considered in section     
definition     maximal union closed safety class   a safety class o     extends
a safety class o     if o   s   o   s  for every s  a safety class o     is maximal unionclosed for a language l if o     is union closed and for every union closed safety class o    
that extends o     and every o over l we have that o  o   s  implies o  o   s  

r
r
proposition    the classes of local ontologies oa
   and oa
   defined in section    
are maximal union closed safety classes for l   shiq 

proof  according to definition     if a safety class o   is not maximal union closed for a
language l  then there exists a signature s and an ontology o over l  such that  i  o 
 
o s    ii  o is safe w r t  s in l  and  iii  for every p  o s   it is the case that o  p is
safe w r t  s in l  that is  for every ontology q over l with sig q   sig o  p   s it is
the case that o  p  q is a deductive conservative extension of q  we demonstrate that
r
r
this is not possible for o     oa
   or o     oa
  
r
we first consider the case o     oa    and then show how to modify the proof for
r
the case o     oa
   
let o be an ontology over l that satisfies conditions  i  iii  above  we define ontologies
p and q as follows  take p to consist of the axioms a v  and r   v  for every atomic
r
concept a and atomic role r from sig o    s  it is easy to see that p  oa
 s   take q
to consist of all tautologies of form  v a and  v r   for every a  r  s  note that
sig o  p   sig q   s  we claim that o  p  q is not a deductive sig q  conservative
extension of q 
   
r
intuitively  the ontology p is chosen in such a way that p  oa
 s  and o  p  q
r
has only models from ia
 s   q is an ontology which implies nothing but tautologies and
uses all the atomic concepts and roles from s 
r
r
since o 
  oa
 s   there exists an axiom   o such that  
  axa
 s   let
        s  where       is defined as in proposition     as has been shown in the proof of
r
this proposition  i     iff i     for every i  ia
 s   now  since o     and o  p  q
r
has only models from ia  s   it is the case that o  p  q      by proposition     since 
r
does not contain individuals  we have that sig    s   sig q  and  since  
  axa
 s  
 is not a tautology  thus q       hence  by definition    o  p  q is not a deductive
sig q  conservative extension of q     
r
for o     oa
   the proof can be repeated by taking p to consist of axioms   v a
and r   v  for all a  r  sig o    s  and modifying       as has been discussed in
section     
there are some difficulties in extending the proof of proposition    to other locality
classes considered in section      first  it is not clear how to force interpretations of roles
to be the universal or identity relation using shoiq axioms  second  it is not clear how
to define the function       in these cases  see a related discussion in section       note
also that the proof of proposition    does not work in the presence of nominals  since
this will not guarantee that        s  contains symbols from s only  see footnote   on
r
r
p        hence there is probably room to extend the locality classes oa
   and oa
  
for l   shoiq while preserving union closure 
   

fimodular reuse of ontologies  theory and practice

   extracting modules using safety classes
in this section we revisit the problem of extracting modules from ontologies  as shown in
corollary    in section    there exists no general procedure that can recognize or extract
all the  minimal  modules for a signature in an ontology in finite time 
the techniques described in section    however  can be reused for extracting particular
families of modules that satisfy certain sufficient conditions  proposition    establishes the
relationship between the notions of safety and module  more precisely  a subset o  of o is
an s module in o provided that o   o  is safe for s  sig o     therefore  any safety class
o   can provide a sufficient condition for testing modulesthat is  in order to prove that
o  is a s module in o  it is sufficient to show that o   o   o s  sig o      a notion of
modules based on this property can be defined as follows 
definition     modules based on safety class  
let l be an ontology language and o   be a safety class for l  given an ontology o and
a signature s over l  we say that om  o is an o   based s module in o if o   om 
o s  sig om    

remark    note that for every safety class o    ontology o and signature s  there exists
at least one o   based s module in o  namely o itself  indeed  by definition     the empty
ontology    o   o also belongs to o s  for every o   and s 
note also that it follows from definition    that om is an o   based s module in o iff
om is an o   based s   module in o for every s  with s  s    s  sig om    

it is clear that  according to definition     any procedure for checking membership of a
safety class o   can be used directly for checking whether om is a module based on o   
in order to extract an o   module  it is sufficient to enumerate all possible subsets of the
ontology and check if any of these subsets is a module based on o   
in practice  however  it is possible to avoid checking all the possible subsets of the
input ontology  figure   presents an optimized version of the module extraction algorithm 
the procedure manipulates configurations of the form om   ou   os   which represent a
partitioning of the ontology o into three disjoint subsets om   ou and os   the set om
accumulates the axioms of the extracted module  the set os is intended to be safe w r t 
s  sig om    the set ou   which is initialized to o  contains the unprocessed axioms  these
axioms are distributed among om and os according to rules r  and r   given an axiom 
from ou   rule r  moves  into os provided os remains safe w r t  s  sig om   according
to the safety class o    otherwise  rule r  moves  into om and moves all axioms from
os back into ou   since sig om   might expand and axioms from os might become no longer
safe w r t  s  sig om    at the end of this process  when no axioms are left in in ou   the
set om is an o   based module in o 
the rewrite rules r  and r  preserve invariants i i  given in figure    invariant i 
states that the three sets om   ou and os form a partitioning of o  i  states that the set os
satisfies the safety test for s  sig om   w r t  o    finally  i  establishes that the rewrite
rules either add elements to om   or they add elements to os without changing om   in other
words  the pair   om     os    consisting of the sizes for these sets increases in lexicographical
order 
   

ficuenca grau  horrocks  kazakov    sattler

input 

an ontology o  a signature s  a safety class o  

output 

a module om in o based on o  
unprocessed


configuration  om   ou   os  




module

safe

initial configuration  

 o 

termination condition  ou   

rewrite rules 
r   om   ou       os   om   ou   os    

if  os       o s  sig om   

r   om   ou       os   om       ou  os   

if  os        o s  sig om   

invariants for om   ou   os  
i   o   om   ou   os

    o    o   
invariant for om   ou   os   om
u
s
      o     
i     om     os     lex   om
s

i   os  o s  sig om   
figure    a procedure for computing modules based on a safety class o  
proposition     correctness of the procedure from figure    let o   be a safety
class for an ontology language l  o an ontology over l  and s a signature over l  then 
    the procedure in figure   with input o  s  o   terminates and returns an o  based s module om in o  and
    if  additionally  o   is anti monotonic  subset closed and union closed  then there
is a unique minimal o   based s module in o  and the procedure returns precisely this
minimal module 
proof      the procedure based on the rewrite rules from figure   always terminates for
the following reasons   i  for every configuration derived by the rewrite rules  the sets om  
ou and os form a partitioning of o  see invariant i  in figure     and therefore the size
of every set is bounded   ii  at each rewrite step    om     os    increases in lexicographical
order  see invariant i  in figure     additionally  if ou     then it is always possible to
apply one of the rewrite rules r  or r   and hence the procedure always terminates with
ou     upon termination  by invariant i  from figure    o is partitioned into om and os
and by invariant i   os  o s  sig om     which implies  by definition     that om is an
o   based s module in o 
    now  suppose that  in addition  o   is an anti monotonic  subset closed  and union  is an o   based s module in o  we demonstrate
closed safety class  and suppose that om
by induction that for every configuration om   ou   os derivable from    o    by rewrite
    this will prove that the module computed
rules r  and r   it is the case that om  om
by the procedure is a subset of every o   based s module in o  and hence  is the smallest
o   based s module in o 
    the rewrite rule r  does not change
indeed  for the base case we have om     om
the set om   for the rewrite rule r  we have  om   ou       os   om       ou  os   
if  os        o s  sig om    
   
   

fimodular reuse of ontologies  theory and practice

input  an ontology o  a signature s  a safety class o  
output  a module om in o based on o  
initial configuration  

 o 

termination condition  ou   

rewrite rules 
r  

om   ou       os   om   ou   os    

if     o s  sig om   

r   om   ou       os  os   om       ou  os   os if      o s  sig om     and
sig os    sig    sig om  
figure    an optimized procedure for computing modules based on a compact subsetclosed union closed safety class o  
  but o       o     then   o      o   o    
suppose  to the contrary  that om  om
m
m
s
m
  is an o   based s module in o  we have that o    o s  sig o       since o  
since om
s
m
      since o
 
is subset closed      o s  sig om
m  om and o   is anti monotonic  we
have     o s  sig om     since by invariant i  from figure    os  o s  sig om    and
o   is union closed  os      o s  sig om     which contradicts      this contradiction
   
implies that the rule r  also preserves property om  om

claim     of proposition    establishes that the procedure from figure   terminates for
every input and produces a module based on a given safety class  moreover  it is possible
to show that this procedure runs in polynomial time assuming that the safety test can be
also performed in polynomial time 
if the safety class o   satisfies additional desirable properties  like those based on classes
of local interpretations described in section      the procedure  in fact  produces the smallest
possible module based on the safety class  as stated in claim     of proposition     in this
case  it is possible to optimize the procedure shown in figure    if o   is union closed 
then  instead of checking whether  os       o s  sig om    in the conditions of rules
r  and r   it is sufficient to check if     o s  sig om    since it is already known that
os  o s  sig om     if o   is compact and subset closed  then instead of moving all the
axioms in os to ou in rule r   it is sufficient to move only those axioms os that contain
at least one symbol from  which did not occur in om before  since the set of remaining
axioms will stay in o s  sig om     in figure   we present an optimized version of the
algorithm from figure   for such locality classes 
example    in table   we present a trace of the algorithm from figure   for the ontology o
consisting of axioms m m  from figure    signature s    cystic fibrosis  genetic disorder 
r
and safety class o     oa
   defined in example     the first column of the table lists
the configurations obtained from the initial configuration    o    by applying the rewrite
rules r  and r  from figure    in each row  the underlined axiom  is the one that is being
tested for safety  the second column of the table shows the elements of s  sig om   that
have appeared for the current configuration but have not been present for the preceding
configurations  in the last column we indicate whether the first conditions of the rules r 
r
and r  are fulfilled for the selected axiom  from ou that is  whether  is local for ia
   
the rewrite rule corresponding to the result of this test is applied to the configuration 
   

ficuenca grau  horrocks  kazakov    sattler

om   ou      os

new elements in s  sig om  

     m   m   m   m   m     cystic fibrosis  genetic disorder

    o s  sig om    
yes



r 

 

   m   m   m   m    m 



yes



r 

 

   m   m   m    m   m 



no



r 

 

m    m   m   m   m    

fibrosis  located in  pancreas 
has origin  genetic origin

no



r 

 

m   m    m   m   m    

genetic fibrosis

no



r 

 

m   m   m    m   m    



yes



r 

 

m   m   m    m    m 



no



r 

 

m   m   m   m       m 



table    a trace of the procedure in figure   for the input q    m           m   from figure  
and s    cystic fibrosis  genetic disorder 

note that some axioms  are tested for safety several times for different configurations 
because the set ou may increase after applications of rule r   for example  the axiom
   m  is tested for safety in both configurations   and    and    m  in configurations
  and    note also that different results for the locality tests are obtained in these cases 
both m  and m  were local w r t  s  sig om   when om     but became non local when
new axioms were added to om   it is also easy to see that  in our case  syntactic locality
produces the same results for the tests 
in our example  the rewrite procedure produces a module om consisting of axioms m 
m   note that it is possible to apply the rewrite rules for different choices of the axiom
 in ou   which results in a different computation  in other words  the procedure from
figure   has implicit non determinism  according to claim     of proposition    all such
r
computations should produce the same module om   which is the smallest oa
   based
s module in o  that is  the implicit non determinism in the procedure from figure   does
not have any impact on the result of the procedure  however  alternative choices for 
may result in shorter computations  in our example we could have selected axiom m  in
the first configuration instead of m  which would have led to a shorter trace consisting of
configurations    and    only 

it is worth examining the connection between the s modules in an ontology o based on
a particular safety class o   and the actual minimal s modules in o  it turns out that any
o   based module om is guaranteed to cover the set of minimal modules  provided that
o   is anti monotonic and subset closed  in other words  given o and s  om contains all
the s essential axioms in o  the following lemma provides the main technical argument
underlying this result 
lemma    let o   be an anti monotonic subset closed safety class for an ontology language l  o an ontology  and s a signature over l  let o  be an s module in o w r t  l
and om an o   based s module in o  then o     o   om is an s module in o w r t  l 
   

fimodular reuse of ontologies  theory and practice

proof  by definition     since om is an o   based s module in o  we have that o   om 
o s  sig om     since o    o    o    om  o   om and o   is subset closed  it is the case
that o    o   o s  sig om     since o   is anti monotonic  and o   om   we have that
o    o   o s  sig o      hence  o  is an o   based s module in o    in particular o  is
an s module in o  w r t  l  since o  is an s module in o w r t  l  o  is an s module in
o w r t  l 
corollary    let o   be an anti monotonic  subset closed safety class for l and om be
an o   based s module in o  then om contains all s essential axioms in o w r t  l 
proof  let o  be a minimal s module in o w r t  l  we demonstrate that o   om   indeed 
otherwise  by lemma     o   om is an s module in o w r t  l which is strictly contained
in o    hence om is a superset of every minimal s module in o and hence  contains all
s essential axioms in o w r t  l 
as shown in section      all the axioms m m  are essential for the ontology o and
signature s considered in example     we have seen in this example that the locality based
s module extracted from o contains all of these axioms  in accordance to corollary     in
our case  the extracted module contains only essential axioms  in general  however  localitybased modules might contain non essential axioms 
an interesting application of modules is the pruning of irrelevant axioms when checking
if an axiom  is implied by an ontology o  indeed  in order to check whether o    
it suffices to retrieve the module for sig   and verify if the implication holds w r t  this
module  in some cases  it is sufficient to extract a module for a subset of the signature of
 which  in general  leads to smaller modules  in particular  in order to test subsumption
between a pair of atomic concepts  if the safety class being used enjoys some nice properties
then it suffices to extract a module for one of them  as given by the following proposition 
proposition    let o   be a compact union closed safety class for an ontology language
l  o an ontology and a  b atomic concepts  let oa be an o   based module in o for
s    a  in o  then 
  if o         a v b  and  b v    o   then oa     
  if o         b v a  and    v b   o   then oa     
proof     consider two cases   a  b  sig oa   and  b  b 
  sig oa   
 a  by remark    it is the case that oa is an o   based module in o for s    a  b  
since sig    s  by definition    and definition    it is the case that o     implies
oa     
 b  consider o    o  b v    since sig b v      b  and b 
  sig oa     b v   
o   and o   is compact  by definition    it is the case that  b v    o s  sig oa    
since oa is an o   based s module in o  by definition     then o   oa  o s  sig oa    
since o   is union closed  it is the case that  o   oa     b v    o s  sig oa     note
that b v    oa   since b   sig oa    hence  o   oa     b v     o    oa   and  by
definition     we have that oa is an o   based s module in o    now  since o     a v b  
it is the case that o      a v    and hence  since oa is a module in o  for s    a   we
have that oa     a v   which implies oa     a v b  
   

ficuenca grau  horrocks  kazakov    sattler

   the proof of this case is analogous to that for case    case  a  is applicable without
changes  in case  b  we show that oa is an o   based module for s    a  in o   
o     v b   and  hence  since o        v a   it is the case that ob       v a   which
implies o      b v a  
r    and
corollary    let o be a shoiq ontology and a  b atomic concepts  let oa
r    be locality classes based on local classes of interpretations of form i r    and
oa
a
r
r    and
ia     respectively  from table    let oa be a module for s    a  based on oa
r     then o     a v b  iff o     a v b  iff
ob be a module for s    b  based on oa
a
ob     a v b  
r    and    v a   o r    
proof  it is easy to see that  b v    oa
a

proposition    implies that a module based on a safety class for a single atomic concept
a can be used for capturing either the super concepts  case     or the sub concepts  case
   b of a  provided that the safety class captures  when applied to the empty signature 
axioms of the form b v   case    or    v b   case     that is  b is a super concept or
a sub concept of a in the ontology if and only if it is such in the module  this property
can be used  for example  to optimize the classification of ontologies  in order to check if
the subsumption a v b holds in an ontology o  it is sufficient to extract a module in
o for s    a  using a modularization algorithm based on a safety class in which the
ontology  b v   is local w r t  the empty signature  and check whether this subsumption
holds w r t  the module  for this purpose  it is convenient to use a syntactically tractable
approximation of the safety class in use  for example  one could use the syntactic locality
conditions given in figure   instead of their semantic counterparts 
it is possible to combine modularization procedures to obtain modules that are smaller
than the ones obtained using these procedures individually  for example  in order to check
r    based module m for
the subsumption o     a v b  one could first extract a oa
 
s    a  in o  by corollary    this module is complete for all the super concepts of a in
o  including bthat is  if an atomic concept is a super concept of a in o  then it is also a
r    based module m for s    b  in
super concept of a in m    one could extract a oa
 
m  which  by corollary     is complete for all the sub concepts of b in m    including a 
indeed  m  is an s module in m  for s    a  b  and m  is an s module in the original
ontology o  by proposition     therefore  it is the case that m  is also an s module in o 

   related work
we have seen in section   that the notion of conservative extension is valuable in the formalization of ontology reuse tasks  the problem of deciding conservative extensions has been
recently investigated in the context of ontologies  ghilardi et al         lutz et al        
lutz   wolter         the problem of deciding whether p  q is a deductive s conservative
extension of q is exptime complete for el  lutz   wolter           exptime complete
w r t  alciq  lutz et al          roughly owl lite   and undecidable w r t  alciqo
 roughly owl dl   furthermore  checking model conservative extensions is already undecidable for el  lutz   wolter         and for alc it is even not semi decidable  lutz
et al         
   

fimodular reuse of ontologies  theory and practice

in the last few years  a rapidly growing body of work has been developed under the
headings of ontology mapping and alignment  ontology merging  ontology integration 
and ontology segmentation  kalfoglou   schorlemmer        noy      a      b   this field
is rather diverse and has roots in several communities 
in particular  numerous techniques for extracting fragments of ontologies for the purposes of knowledge reuse have been proposed  most of these techniques rely on syntactically
traversing the axioms in the ontology and employing various heuristics to determine which
axioms are relevant and which are not 
an example of such a procedure is the algorithm implemented in the prompt factor
tool  noy   musen         given a signature s and an ontology q  the algorithm retrieves a fragment q   q as follows  first  the axioms in q that mention any of the
symbols in s are added to q    second  s is expanded with the symbols in sig q     these
steps are repeated until a fixpoint is reached  for our example in section    when s  
 cystic fibrosis  genetic disorder   and q consists of axioms m m  from figure    the algorithm first retrieves axioms m   m   and m  containing these terms  then expands s with
the symbols mentioned in these axioms  such that s contains all the symbols of q  after
this step  all the remaining axioms of q are retrieved  hence  the fragment extracted by
the prompt factor algorithm consists of all the axioms m  m   in this case  the promptfactor algorithm extracts a module  though not a minimal one   in general  however  the
extracted fragment is not guaranteed to be a module  for example  consider an ontology
q    a  a  b v c  and     c v b   the ontology q is inconsistent due to the
axiom a  a  any axiom  and  in particular  is thus a logical consequence of q  given
s    b  c   the prompt factor algorithm extracts q     b v c   however  q        and
so q  is not a module in q  in general  the prompt factor algorithm may fail even if q is
consistent  for example  consider an ontology q      v  a   a v b       a v r a  
and s    a   it is easy to see that q is consistent  admits only single element models 
and  is satisfied in every such a model  that is  q      in this case  the prompt factor
algorithm extracts q     a v b   which does not imply  
another example is seidenbergs segmentation algorithm  seidenberg   rector        
which was used for segmentation of the medical ontology galen  rector   rogers        
currently  the full version of galen cannot be processed by reasoners  so the authors
investigate the possibility of splitting galen into small segments which can be processed
by reasoners separately  the authors describe a segmentation procedure which  given a set
of atomic concepts s  computes a segment for s in the ontology  the description of
the procedure is very high level  the authors discuss which concepts and roles should be
included in the segment and which should not  in particular  the segment should contain
all super  and sub  concepts of the input concepts  concepts that are linked from the
input concepts  via existential restrictions  and their super concepts  but not their subconcepts  for the included concepts  also their restrictions  intersection  union  and
equivalent concepts should be considered by including the roles and concepts they contain 
together with their super concepts and super roles but not their sub concepts and
sub roles  from the description of the procedure it is not entirely clear whether it works
with a classified ontology  which is unlikely in the case of galen since the full version of
galen has not been classified by any existing reasoner   or  otherwise  how the super 
and sub  concepts are computed  it is also not clear which axioms should be included in
   

ficuenca grau  horrocks  kazakov    sattler

the segment in the end  since the procedure talks only about the inclusion of concepts and
roles 
a different approach to module extraction proposed in the literature  stuckenschmidt
  klein        consists of partitioning the concepts in an ontology to facilitate visualization
of and navigation through an ontology  the algorithm uses a set of heuristics for measuring
the degree of dependency between the concepts in the ontology and outputs a graphical
representation of these dependencies  the algorithm is intended as a visualization technique 
and does not establish a correspondence between the nodes of the graph and sets of axioms
in the ontology 
what is common between the modularization procedures we have mentioned is the lack
of a formal treatment for the notion of module  the papers describing these modularization
procedures do not attempt to formally specify the intended outputs of the procedures  but
rather argue what should be in the modules and what not based on intuitive notions  in
particular  they do not take the semantics of the ontology languages into account  it might
be possible to formalize these algorithms and identify ontologies for which the intuitionbased modularization procedures work correctly  such studies are beyond the scope of this
paper 
module extraction in ontologies has also been investigated from a formal point of view
 cuenca grau et al       b   cuenca grau et al         define a notion of a module qa in an
ontology q for an atomic concept a  one of the requirements for the module is that q should
be a conservative extension of qa  in the paper qa is called a logical module in q   the
paper imposes an additional requirement on modules  namely that the module qa should
entail all the subsumptions in the original ontology between atomic concepts involving a and
other atomic concepts in qa   the authors present an algorithm for partitioning an ontology
into disjoint modules and proved that the algorithm is correct provided that certain safety
requirements for the input ontology hold  the ontology should be consistent  should not
contain unsatisfiable atomic concepts  and should have only safe axioms  which in our
terms means that they are local for the empty signature   in contrast  the algorithm we
present here works for any ontology  including those containing non safe axioms 
the growing interest in the notion of modularity in ontologies has been recently
reflected in a workshop on modular ontologies  held in conjunction with the international
semantic web conference  iswc        concerning the problem of ontology reuse  there
have been various proposals for safely combining modules  most of these proposals  such
as e connections  cuenca grau  parsia    sirin      a   distributed description logics
 borgida   serafini        and package based description logics  bao  caragea    honavar 
      propose a specialized semantics for controlling the interaction between the importing
and the imported modules to avoid side effects  in contrast to these works  we assume here
that reuse is performed by simply building the logical union of the axioms in the modules
under the standard semantics  and we establish a collection of reasoning services  such as
safety testing  to check for side effects  the interested reader can find in the literature a
detailed comparison between the different approaches for combining ontologies  cuenca
grau   kutz        
   for information see the homepage of the workshop http   www cild iastate edu events womo html

   

fimodular reuse of ontologies  theory and practice

   implementation and proof of concept
in this section  we provide empirical evidence of the appropriateness of locality for safety
testing and module extraction  for this purpose  we have implemented a syntactic locar
r
lity checker for the locality classes oa
   and oa
   as well as the algorithm for
extracting modules given in figure   from section   
r
first  we show that the locality class oa
   provides a powerful sufficiency test for
r
safety which works for many real world ontologies  second  we show that oa
   based
modules are typically very small compared to both the size of the ontology and the modules
extracted using other techniques  third  we report on our implementation in the ontology
editor swoop  kalyanpur  parsia  sirin  cuenca grau    hendler        and illustrate the
r
r
combination of the modularization procedures based on the classes oa
   and oa
   
    locality for testing safety
r
we have run our syntactic locality checker for the class oa
   over the ontologies from a
library of     ontologies of various sizes and complexity some of which import each other
 gardiner  tsarkov    horrocks          for all ontologies p that import an ontology q 
we check if p belongs to the locality class for s   sig p   sig q  
it turned out that from the    ontologies in the library that import other ontologies  all
but    were syntactically local for s  and hence also semantically local for s   from the   
non local ontologies    are written in the owl full species of owl  patel schneider et al  
      to which our framework does not yet apply  the remaining   non localities are due
to the presence of so called mapping axioms of the form a  b     where a 
  s and b    s 
note that these axioms simply indicate that the atomic concepts a  b   in the two ontologies
under consideration are synonyms  indeed  we were able to easily repair these non localities
as follows  we replace every occurrence of a in p with b   and then remove this axiom from
the ontology  after this transformation  all   non local ontologies turned out to be local 

    extraction of modules
in this section  we compare three modularization  algorithms that we have implemented
using manchesters owl api  
a   the prompt factor algorithm  noy   musen        
a   the segmentation algorithm proposed by cuenca grau et al         
r
a   our modularisation algorithm  algorithm     based on the locality class oa
   

the aim of the experiments described in this section is not to provide a throughout comparison of the quality of existing modularization algorithms since each algorithm extracts
modules according to its own requirements  but rather to give an idea of the typical size
of the modules extracted from real ontologies by each of the algorithms 
   the library is available at http   www cs man ac uk  horrocks testing 
   in this section by module we understand the result of the considered modularization procedures which
may not necessarily be a module according to definition    or   
   http   sourceforge net projects owlapi

   

ficuenca grau  horrocks  kazakov    sattler

 a  modularization
of nci
 a 
modularization
of nci

 b  modularization
modularization of of
galen small
 b 
galen small

 c  modularization
modularization of snomed
 c 
of snomed

 d  modularization
modularization of galen full
 d 
of galen full

 e  small
small modules
of of
galen full
 e 
modules
galen full

 f  large
large modules
of of
galen full
 f 
modules
galen full

figure    distribution for the sizes of syntactic locality based modules  the x axis gives the
number of concepts in the modules and the y axis the number of modules extracted for
each size range 

   

fimodular reuse of ontologies  theory and practice

a   segmentation

a   loc  based mod 

  atomic

a   prompt factor

concepts

max    

avg    

max    

avg    

max    

avg    

nci

     

    

     

  

    

   

    

snomed

      

   

   

   

   

   

    

go

ontology

     

 

   

 

   

   

    

sumo

   

   

   

   

   

 

    

galen small

    

   

   

   

   

  

   

galen full

     

   

   

   

   

    

   

sweet

    

    

    

    

    

   

   

dolce lite

   

   

   

   

   

    

    

table    comparison of different modularization algorithms

as a test suite  we have collected a set of well known ontologies available on the web 
which we divided into two groups 
simple  in this group  we have included the national cancer institute  nci  ontology  
the sumo upper ontology    the gene ontology  go     and the snomed ontology    
these ontologies are expressed in a simple ontology language and are of a simple structure 
in particular  they do not contain gcis  but only definitions 
complex  this group contains the well known galen ontology  galen full     the
dolce upper ontology  dolce lite     and nasas semantic web for earth and environmental terminology  sweet      these ontologies are complex since they use many
constructors from owl dl and or include a significant number of gcis  in the case of
galen  we have also considered a version galen small that has commonly been used as
a benchmark for owl reasoners  this ontology is almost    times smaller than the original
galen full ontology  yet similar in structure 
since there is no benchmark for ontology modularization and only a few use cases are
available  there is no systematic way of evaluating modularization procedures  therefore
we have designed a simple experiment setup which  even if it may not necessarily reflect
an actual ontology reuse scenario  it should give an idea of typical module sizes  for each
ontology  we took the set of its atomic concepts and extracted modules for every atomic
concept  we compare the maximal and average sizes of the extracted modules 
it is worth emphasizing here that our algorithm a  does not just extract a module for
the input atomic concept  the extracted fragment is also a module for its whole signature 
which typically includes a fair amount of other concepts and roles 
  
   
   
   
   
   
   

http   www mindswap org      cancerontology ncioncology owl
http   ontology teknowledge com 
http   www geneontology org
http   www snomed org
http   www openclinical org prj galen html
http   www loa cnr it dolce html
http   sweet jpl nasa gov ontology 
   

ficuenca grau  horrocks  kazakov    sattler

r
r
 a  concepts dna sequence and  b  oa
 s  based module for  c  oa
 s  based module for
microanatomy in nci
dna sequence in nci
micro anatomy in the fragment  b

figure    the module extraction functionality in swoop
the results we have obtained are summarized in table    the table provides the size
of the largest module and the average size of the modules obtained using each of these
algorithms  in the table  we can clearly see that locality based modules are significantly
smaller than the ones obtained using the other methods  in particular  in the case of sumo 
dolce  galen and snomed  the algorithms a  and a  retrieve the whole ontology as
the module for each input signature  in contrast  the modules we obtain using our algorithm
are significantly smaller than the size of the input ontology 
for nci  snomed  go and sumo  we have obtained very small locality based modules  this can be explained by the fact that these ontologies  even if large  are simple
in structure and logical expressivity  for example  in snomed  the largest locality based
module obtained is approximately      of the size of the ontology  and the average size of
the modules is      of the size of the largest module  in fact  most of the modules we have
obtained for these ontologies contain less than    atomic concepts 
for galen  sweet and dolce  the locality based modules are larger  indeed  the
largest module in galen small is      of the size of the ontology  as opposed to      
in the case of snomed  for dolce  the modules are even bigger    of the size of
the ontologywhich indicates that the dependencies between the different concepts in the
ontology are very strong and complicated  the sweet ontology is an exception  even
though the ontology uses most of the constructors available in owl  the ontology is heavily
underspecified  which yields small modules 
in figure    we have a more detailed analysis of the modules for nci  snomed 
galen small and galen full  here  the x axis represents the size ranges of the ob   

fimodular reuse of ontologies  theory and practice

tained modules and the y axis the number of modules whose size is within the given range 
the plots thus give an idea of the distribution for the sizes of the different modules 
for snomed  nci and galen small  we can observe that the size of the modules
follows a smooth distribution  in contrast  for galen full  we have obtained a large number
of small modules and a significant number of very big ones  but no medium sized modules
in between  this abrupt distribution indicates the presence of a big cycle of dependencies in
the ontology  the presence of this cycle can be spotted more clearly in figure   f   the figure
shows that there is a large number of modules of size in between      and      concepts 
this cycle does not occur in the simplified version of galen and thus we obtain a smooth
distribution for that case  in contrast  in figure   e  we can see that the distribution for
the small modules in galen full is smooth and much more similar to the one for the
simplified version of galen 
the considerable differences in the size of the modules extracted by algorithms a  
a  are due to the fact that these algorithms extract modules according to different requirements  algorithm a  produces a fragment of the ontology that contains the input atomic
concept and is syntactically separated from the rest of the axiomsthat is  the fragment
and the rest of the ontology have disjoint signatures  algorithm a  extracts a fragment of
the ontology that is a module for the input atomic concept and is additionally semantically
separated from the rest of the ontology  no entailment between an atomic concept in the
module and an atomic concept not in the module should hold in the original ontology  since
our algorithm is based on weaker requirements  it is to be expected that it extracts smaller
modules  what is surprising is that the difference in the size of modules is so significant 
in order to explore the use of our results for ontology design and analysis  we have
integrated our algorithm for extracting modules in the ontology editor swoop  kalyanpur
et al          the user interface of swoop allows for the selection of an input signature and
the retrieval of the corresponding module   
figure  a shows the classification of the concepts dna sequence and microanatomy in
r
the nci ontology  figure  b shows the minimal oa
   based module for dna sequence 
r
as obtained in swoop  recall that  according to corollary     a oa
   based module for an
atomic concept contains all necessary axioms for  at least  all its  entailed  super concepts
in o  thus this module can be seen as the upper ontology for a in o  in fact  figure  
shows that this module contains only the concepts in the path from dna sequence to
the top level concept anatomy kind  this suggests that the knowledge in nci about the
particular concept dna sequence is very shallow in the sense that nci only knows that a
dna sequence is a macromolecular structure  which  in the end  is an anatomy kind  if one
wants to refine the module by only including the information in the ontology necessary to
r
entail the path from dna sequence to micro anatomy  one could extract the oa
  based module for micro anatomy in the fragment  b  by corollary     this module contains
all the sub concepts of micro anatomy in the previously extracted module  the resulting
module is shown in figure  b 

    the tool can be downloaded at http   code google com p swoop 

   

ficuenca grau  horrocks  kazakov    sattler

   conclusion
in this paper  we have proposed a set of reasoning problems that are relevant for ontology
reuse  we have established the relationships between these problems and studied their computability  using existing results  lutz et al         and the results obtained in section    we
have shown that these problems are undecidable or algorithmically unsolvable for the logic
underlying owl dl  we have dealt with these problems by defining sufficient conditions
for a solution to exist  which can be computed in practice  we have introduced and studied
the notion of a safety class  which characterizes any sufficiency condition for safety of an
ontology w r t  a signature  in addition  we have used safety classes to extract modules from
ontologies 
for future work  we would like to study other approximations which can produce small
modules in complex ontologies like galen  and exploit modules to optimize ontology
reasoning 

references
baader  f   brandt  s     lutz  c          pushing the el envelope  in ijcai     proceedings of the nineteenth international joint conference on artificial intelligence 
edinburgh  scotland  uk  july    august          pp          professional book
center 
baader  f   calvanese  d   mcguinness  d  l   nardi  d     patel schneider  p  f   eds   
        the description logic handbook  theory  implementation  and applications 
cambridge university press 
bao  j   caragea  d     honavar  v          on the semantics of linking and importing in
modular ontologies  in proceedings of the  th international semantic web conference
 iswc        athens  ga  usa  november            vol       of lecture notes in
computer science  pp       
borger  e   gradel  e     gurevich  y          the classical decision problem  perspectives
of mathematical logic  springer verlag  second printing  universitext       
borgida  a     serafini  l          distributed description logics  assimilating information
from peer sources  j  data semantics            
cuenca grau  b   horrocks  i   kazakov  y     sattler  u          a logical framework
for modularity of ontologies  in ijcai     proceedings of the twentieth international
joint conference on artificial intelligence  hyderabad  india  january       pp     
     aaai 
cuenca grau  b     kutz  o          modular ontology languages revisited  in proceedings
of the workshop on semantic web for collaborative knowledge acquisition  hyderabad  india  january         
cuenca grau  b   parsia  b     sirin  e       a   combining owl ontologies using econnections  j  web sem               
cuenca grau  b   parsia  b   sirin  e     kalyanpur  a       b   modularity and web ontologies  in proceedings of the tenth international conference on principles of knowledge
   

fimodular reuse of ontologies  theory and practice

representation and reasoning  kr        lake district of the united kingdom  june
           pp          aaai press 
cuenca grau  b   horrocks  i   kazakov  y     sattler  u          just the right amount 
extracting modules from ontologies  in proceedings of the   th international conference on world wide web  www        banff  alberta  canada  may            
pp          acm 
cuenca grau  b   horrocks  i   kutz  o     sattler  u          will my ontologies fit
together   in proceedings of the      international workshop on description logics
 dl        windermere  lake district  uk  may      june          vol      of ceur
workshop proceedings  ceur ws org 
gardiner  t   tsarkov  d     horrocks  i          framework for an automated comparison of description logic reasoners  in proceedings of the  th international semantic
web conference  iswc        athens  ga  usa  november            vol       of
lecture notes in computer science  pp          springer 
ghilardi  s   lutz  c     wolter  f          did i damage my ontology  a case for conservative extensions in description logics  in proceedings of the tenth international
conference on principles of knowledge representation and reasoning  kr       
lake district of the united kingdom  june            pp          aaai press 
horrocks  i   patel schneider  p  f     van harmelen  f          from shiq and rdf to
owl  the making of a web ontology language  j  web sem              
horrocks  i     sattler  u          a tableaux decision procedure for shoiq  in proceedings
of the nineteenth international joint conference on artificial intelligence  ijcai     
edinburgh  scotland  uk  july    august          pp          professional book
center 
kalfoglou  y     schorlemmer  m          ontology mapping  the state of the art  the
knowledge engineering review          
kalyanpur  a   parsia  b   sirin  e   cuenca grau  b     hendler  j  a          swoop  a
web ontology editing browser  j  web sem                 
lutz  c   walther  d     wolter  f          conservative extensions in expressive description
logics  in proceedings of the twentieth international joint conference on artificial
intelligence  ijcai      hyderabad  india  january       pp          aaai 
lutz  c     wolter  f          conservative extensions in the lightweight description logic
el  in proceedings of the   st international conference on automated deduction
 cade      bremen  germany  july              vol       of lecture notes in computer science  pp        springer 
moller  r     haarslev  v          description logic systems  in the description logic
handbook  chap     pp          cambridge university press 
motik  b          reasoning in description logics using resolution and deductive
databases  ph d  thesis  univesitat karlsruhe  th   karlsruhe  germany 
noy  n  f       a   semantic integration  a survey of ontology based approaches  sigmod
record               
   

ficuenca grau  horrocks  kazakov    sattler

noy  n  f       b   tools for mapping and merging ontologies  in staab    studer  staab
  studer         pp         
noy  n     musen  m          the prompt suite  interactive tools for ontology mapping
and merging  int  journal of human computer studies  elsevier         
patel schneider  p   hayes  p     horrocks  i          web ontology language owl abstract
syntax and semantics  w c recommendation 
rector  a     rogers  j          ontological issues in using a description logic to represent
medical concepts  experience from galen  in imia wg  workshop  proceedings 
schmidt schau  m     smolka  g          attributive concept descriptions with complements  artificial intelligence  elsevier              
seidenberg  j     rector  a  l          web ontology segmentation  analysis  classification
and use  in proceedings of the   th international conference on world wide web
 www        edinburgh  scotland  uk  may              pp        acm 
sirin  e     parsia  b          pellet system description  in proceedings of the      international workshop on description logics  dl       whistler  british columbia 
canada  june            vol      of ceur workshop proceedings  ceur ws org 
staab  s     studer  r   eds            handbook on ontologies  international handbooks
on information systems  springer 
stuckenschmidt  h     klein  m          structure based partitioning of large class hierarchies  in proceedings of the third international semantic web conference  iswc       hiroshima  japan  november             vol       of lecture notes in computer science  pp          springer 
tobies  s          the complexity of reasoning with cardinality restrictions and nominals
in expressive description logics  j  artif  intell  res   jair              
tsarkov  d     horrocks  i          fact   description logic reasoner  system description 
in proceedings of the third international joint conference on automated reasoning
 ijcar        seattle  wa  usa  august              vol       of lecture notes in
computer science  pp          springer 

   

fi