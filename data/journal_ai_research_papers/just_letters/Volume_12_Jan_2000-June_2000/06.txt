journal of artificial intelligence research                  

submitted          published       

the complexity of reasoning with cardinality restrictions
and nominals in expressive description logics
stephan tobies

tobies informatik rwth aachen de

lufg theoretical computer science  rwth aachen
ahornstr            aachen  germany

abstract

we study the complexity of the combination of the description logics alcq and alcqi
with a terminological formalism based on cardinality restrictions on concepts  these combinations can naturally be embedded into c     the two variable fragment of predicate logic
with counting quantifiers  which yields decidability in nexptime  we show that this approach leads to an optimal solution for alcqi   as alcqi with cardinality restrictions has
the same complexity as c    nexptime complete   in contrast  we show that for alcq 
the problem can be solved in exptime  this result is obtained by a reduction of reasoning with cardinality restrictions to reasoning with the  in general weaker  terminological
formalism of general axioms for alcq extended with nominals   using the same reduction 
we show that  for the extension of alcqi with nominals  reasoning with general axioms
is a nexptime complete problem  finally  we sharpen this result and show that pure
concept satisfiability for alcqi with nominals is nexptime complete  without nominals 
this problem is known to be pspace complete 
   introduction

description logics  dls  can be used in knowledge based systems to represent and reason about taxonomical knowledge of the application domain in a semantically well defined
manner  woods   schmolze         they allow the definition of complex concepts  i e  
classes  unary predicates  and roles  binary predicates  to be built from atomic ones by
the application of a given set of constructors  for example  the following concept describes
those parents having at least two daughters 
human u  male t female  u      haschild female  u  haschild human
this concept is an example for the dl alcq  alcq extends the  standard  dl alc
 schmidt schau   smolka        by qualifying number restrictions  i e   concepts restricting the number of individuals that are related via a given role  here haschild   instead of
allowing only for existential or universal restrictions like alc  alcq is a syntactic variant of
the  multi  modal logic k with graded modalities  fine         in this paper we will study
problems for the dls alcq and alcqi   the latter extends alcq with the possibility to
refer to the inverse of role relations  additionally  in this paper we will encounter nominals 
i e   concepts referring to single elements of the domain  the extensions of alcq and alcqi
with nominals are denoted by alcqo and alcqio  an example concept of alcqio that
describes the common children of the individuals alice and bob living with alice or bob
is
 haschild    alice u  haschild   bob u  liveswith  alice t bob  
c      ai access foundation and morgan kaufmann publishers  all rights reserved 

fitobies

concept satisfiability
gcis
cardinality restr 

alcq

 c 
 c 
exptime c 
pspace

exptime

alcqo

open

 c 
exptime c 
exptime

alcqi

 c 
 c 
nexptime c 
pspace

exptime

alcqio

nexptime c 
nexptime c 
nexptime c 

figure    complexity results established in this paper  shown in bold face 
here  the parent relationship is expressed as the inverse of the haschild relationship 
a terminological component  tbox  allows for the organisation of defined concepts and
roles and forms the knowledge base of a dl system  tboxes studied in dls range from weak
ones allowing only for the acyclic introduction of abbreviations for complex concepts  over
tboxes capable of expressing various forms of general axioms  to cardinality restrictions
that can express restrictions on the number of elements the extension of a concept may
have  in the following  we give examples of these three types of assertions 
the following tbox introduces parent as an abbreviation for a human having at least
one child and whose children are all human  toddler for very young human  and busy parent
for a parent having at least two children that are toddlers 
parent   human u      haschild  u  haschild human
toddler   human u veryyoung
busyparent   parent u      haschild toddler 
the next expressions are general axioms stating that males and females are disjoint   
denotes the empty concept  and that males or females coincide with those humans having
exactly two human parents 
female u male    
female t male   human u      haschild   human 
finally  the following expression is a cardinality restriction expressing that there are at most
two earliest ancestors 
     human u      haschild   human   
cardinality restriction were first introduced by baader et al         as a terminological
formalism for the dl alcq  as we will see  they can express general axioms and hence are
the most expressive of the terminological formalisms considered in this paper 
a key component of a dl system is a reasoning component that provides services like
subsumption or consistency tests for the knowledge stored in the tbox  a subsumption
test  for example  could infer from the previous definitions that both male and female are
subsumed by human and that busyparent is subsumed by parent as each busy parent must
have at least one child  there exist sound and complete algorithms for reasoning in a large
number of dls and different tbox formalisms that are optimal with respect to the known
worst case complexity of these problems  see donini et al         for an overview  
   

fithe complexity of cardinality restrictions and nominals

in this paper we establish a number of new complexity results for dls with cardinality
restrictions or nominals  figure   summarises the new complexity bounds established in
this paper  all problems are complete for their respective complexity class  this paper is
organised as follows 
after giving some basic definitions in section    we show that consistency of tboxes
with cardinality restrictions for alcqi is a nexptime complete problem  section     membership in nexptime is shown by a translation to the satisfiability problem of c    pacholski et al            the two variable fragment of first order predicate logic augmented
with counting quantifiers  the matching lower bound is established by a reduction from a
nexptime complete bounded domino problem 
in section    we show that reasoning with cardinality restrictions can be reduced to
reasoning with the  weaker  formalism of general axioms in the presence of nominals  this
yields interesting complexity results both for reasoning with cardinality restrictions and
with nominals  using a result from  de giacomo         the reduction shows that consistency of tboxes with cardinality restrictions for alcq is in exptime  this improves the
result from  baader et al          where it was shown that the problem can be solved in
nexptime  moreover  we show that for a dl with number restrictions  inverse roles  and
nominals reasoning problems become nexptime hard  which solves an open problem from
 de giacomo         this combination is of particular interest for the application of dls
in the area of reasoning with database schemata  calvanese et al       a      b  
   the logic

alcqi

definition     let nc be a set of atomic concept names and nr be a set of atomic role
names  concepts in alcqi are built inductively from these using the following rules  all
a   nc are concepts  and  if c   c    and c  are concepts  then also

 c  c  u c  

and

   n s c   

are concepts  where n   n and s   r or s   r   for some r   nr  
a cardinality restriction of alcqi is an expression of the form    n c   or    n c  
where c is a concept and n   n   an alcqi  tcbox   is a finite set of cardinality restrictions 
the semantics of concepts is defined relative to an interpretation i    i   i    which
consists of a domain i and a valuation  i   that maps each concept name a to a subset
ai of i and each role name r to a subset ri of i  i   this valuation is inductively
extended to arbitrary concepts using the following rules  where  m denotes the cardinality
of a set m  
  c  i    i n c i  
 c  u c   i    c i   c i  
   n r c  i    fa   i j  fb   i j  a  b    ri   b   c i g  ng 
   n r   c  i    fa   i j  fb   i j  b  a    ri   b   c i g  ng 
   the nexptime result is valid only if we assume unary coding of numbers in the counting quantifiers 
this is the standard assumption made by most results concerning the complexity of dls 
   the subscripted  c  indicates that the tbox consists of cardinality restrictions

   

fitobies

 x a 
   ax
for a   nc
 x  c  
     x c  
 x c  u c       x c       x c   
 x   n r c       ny  rxy    y  c   
 x   n r   c       ny  ryx    y  c   
 y  c  
    x c   xny  ynx 
     n c  
      nx  x c   for      f    g
  t  
   vf     n c   j     n c     t g
figure    the translation from alcqi into c  
an interpretation i satisfies a cardinality restriction    n c   iff   c i    n  and it satisfies    n c   iff   c i    n  it satisfies a tcbox t iff it satisfies all cardinality restrictions
in t   in this case  i is called a model of t and we will denote this fact by i j  t   a tcbox
that has a model is called consistent 
with alcq we denote the fragment of alcqi that does not contain any inverse roles
r   

using the constructors from definition      we use    c   as an abbreviation for the
cardinality restriction       c   and introduce the following abbreviations for concepts 
c  t c       c  u  c   
   n s c          n      s c  
c    c     c  t c 
   n s c        n s c   u    n s c  
 s c        s c  
    a t  a for some a   nc
 s c        s  c  
tboxes consisting of cardinality restrictions have first been studied in  baader et al  
      for the dl alcq  obviously  two concepts c  d have the same extension in an interpretation i iff i satisfies the cardinality restriction       c u  d  t   c u d    hence 
cardinality restrictions can express terminological axioms of the form c   d  which are
satisfied by an interpretation i iff c i   di   general axioms are the most expressive tbox
formalisms usually studied in the dl context  de giacomo   lenzerini         one standard inference service for dl systems is satisfiability of a concept c with respect to a tcbox
t   i e   is there an interpretation i such that i j  t and c i       for a tbox formalism
based on cardinality restrictions this is easily reduced to tbox consistency  because obviously c is satisfiable with respect to t iff t   f     c  g is a consistent tcbox  for this
the reason  we will restrict our attention to tcbox consistency  other standard inferences
such as concept subsumption can be reduced to consistency as well 
until now there does not exist a direct decision procedure for alcqi tcbox consistency 
nevertheless this problem can be decided with the help of a well known translation of
alcqi  tcboxes to c    borgida         given in figure    the logic c   is the fragment of
predicate logic in which formulae may contain at most two variables  but which is enriched
with counting quantifiers of the form     the translation   yields a satisfiable sentence of
c   if and only if the translated tcbox is consistent  since the translation from alcqi to c  
   

fithe complexity of cardinality restrictions and nominals

can be performed in linear time  the nexptime upper bound  gradel et al         pacholski
et al         for satisfiability of c   directly carries over to alcqi  tcbox consistency 
lemma     consistency of an alcqi  tcbox t can be decided in nexptime 
please note that the nexptime completeness result from  pacholski et al         is only
valid if we assume unary coding of numbers in the input  this implies that a number n may
not be stored in logarithmic space in some k ary representation but consumes n units of
storage  this is the standard assumption made by most results concerning the complexity
of dls  we will come back to this issue in section     
   consistency of

alcqi  tcboxes is nexptime complete

to show that nexptime is also the lower bound for the complexity of tcbox consistency 
we use a bounded version of the domino problem  domino problems  wang        berger 
      have successfully been employed to establish undecidability and complexity results
for various description and modal logics  spaan        baader   sattler        
    domino systems
definition     for n   n   let zn denote the set f           n  g and n denote the addition
modulo n  a domino system is a triple d    d  h  v    where d is a finite set  of tiles 
and h  v  d  d are relations expressing horizontal and vertical compatibility constraints
between the tiles  for s  t   n   let u  s  t  be the torus zs  zt  and let w   w        wn   be
a word over d of length n  with n  s   we say that d tiles u  s  t  with initial condition
w iff there exists a mapping    u  s  t    d such that  for all  x  y     u  s  t  

 if   x  y    d and   x s    y    d   then  d  d      h  horizontal constraint  
 if   x  y    d and   x  y t      d    then  d  d      v  vertical constraint  
   i       wi for    i   n  initial condition  

bounded domino systems are capable of expressing the computational behaviour of
restricted  so called simple  turing machines  tm   this restriction is non essential in the
following sense  every language accepted in time t  n  and space s  n  by some one tape tm
is accepted within the same time and space bounds by a simple tm  as long as s  n   t  n  
 n  borger et al         
theorem       borger et al          theorem       

let m be a simple tm with input alphabet   then there exists a domino system d  
 d  h  v   and a linear time reduction which takes any input x    to a word w   d with
jxj   jwj such that
 if m accepts x in time t  with space s   then d tiles u  s  t  with initial condition w
for all s  s       t  t      
 if m does not accept x  then d does not tile u  s  t  with initial condition w for any
s  t    
   

fitobies

corollary    

there is a domino system d such that the following is a nexptime hard problem 
given an initial condition w   w        wn   of length n  does d tile the torus
u   n      n     with initial condition w 
proof  let m be a  w l o g  simple  non deterministic tm with time   and hence space  
bound  n deciding an arbitrary nexptime complete language l m   over the alphabet  
let d be the according domino system and trans the reduction from theorem     
the function trans is a linear reduction from l m   to the problem above  for v   
with jvj   n  it holds that v   l m   iff m accepts v in time and space  jvj iff d tiles
u   n      n     with initial condition trans v   
    defining a torus of exponential size

similar to proving undecidability by reduction of unbounded domino problems  where defining infinite grids is the key problem  defining a torus of exponential size is the key to
obtaining a nexptime completeness proof by reduction of bounded domino problems 
to be able to apply corollary     to tcbox consistency for alcqi   we must characterise
the torus z   z  with a tcbox of polynomial size  to characterise this torus  we use
 n concepts x            xn   and y            yn     where xi  resp   yi  codes the ith bit of the
binary representation of the x coordinate  resp   y coordinate  of an element a 
for an interpretation i and an element a   i   we define pos a  by
n

n

pos a      xpos a   ypos a     
 

nx 

xi

 

n
x

   
i

    

i

  

yi

i

 

i



 

where

a    xii
   if a    yii
       ifotherwise
yi  
   otherwise  
we use a well known characterisation of binary addition  e g   borger et al          to
relate the positions of the elements in the torus 
lemma     let x  x  be natural numbers with binary representations
xi

x

 

then
x   x    

 

n
x

  

i

 

xi

  i and
 

n  k 

 mod     iff
n

k

 

 

   j   
   

n  k 
k

 

   j   

x 

 

 

n
x

  

i

x i

  i  

xj

        xk       x k     

xj

        xk   x k    

where the empty conjunction and disjunction are interpreted as true and false  respectively 
   

fithe complexity of cardinality restrictions and nominals

deast

 

xk

u

n

n

 

   j   
  kg 

k
n

xj

 

  
 

k

  
k  
 k  

k
n

    north    
        north       
     c             
   deast u dnorth  
n

n

 xk u

g g

 

n

n

  
 

k
n

g

      

 

g

c  n

 

n

g

c     

       east    
        east       
     c        
     c            
g

tn

n

 yk

yk

      xk    east  xk   u   xk    east xk    u

   xj       xk    east xk   u   xk    east  xk    u

   j   
 

g

k
n

 

  

g

dnorth

k

  yk    east yk   u   yk    east  yk   

   

figure    a tcbox defining a torus of exponential size
the tcbox tn is defined in figure    the concept c      is satisfied by all elements
a of the domain for which pos a           holds  c          is a similar concept  whose
instances a satisfy pos a      n     n    
the concept dnorth is similar to deast where the role north has been substituted for east
and variables xi and yi have been swapped  the concept deast  resp  dnorth   enforces that 
along the role east  resp  north   the value of xpos  resp  ypos  increases by one while the
value of ypos  resp  xpos  is unchanged  they are analogous to the formula in lemma     
the following lemma is a consequence of the definition of pos and lemma     
lemma     let i    i   i   be an interpretation  deast   dnorth defined as in figure   
and a  b   i  
n

i implies 
 a  b    easti and a   deast
i implies 
 a  b    northi and a   dnorth

n

xpos b   xpos a     
ypos b    ypos a 
xpos b    xpos a 
ypos b   ypos a     

 mod  n 

 mod  n 
the tcbox tn defines a torus of exponential size in the following sense 
lemma     let tn be the tcbox as defined in figure    let i    i   i   be a model of
tn   then
 i   easti   northi      u   n    n    s    s     
   

fitobies

where u   n   n   is the torus z   z  and s   s  are the horizontal and vertical successor
relations on this torus 
proof  we show that the function pos is an isomorphism from i to u   n    n    injectivity
of pos is shown by induction on the  manhattan distance  d a  of the pos value of an element
a to the pos value of the upper right corner 
for an element a   i we define d a  by
d a      n   xpos a       n   ypos a   
note that pos a    pos b  implies d a    d b   since i j       c             there is
at most one element a   i such that d a       hence  there is exactly one element a
such that pos a      n     n     now assume there are elements a  b   i such that
pos a    pos b  and d a    d b       then either xpos a     n   or ypos a     n   
w l o g   we assume xpos a     n    from i j  tn  it follows that a  b     east   i   let
a    b  be elements such that  a  a      easti and  b  b      easti   since d a      d b      d a 
and pos a      pos b    the induction hypothesis yields a    b    from lemma     it follows
that
xpos a     xpos b     xpos a       mod  n  
ypos a      ypos b      ypos a 
this also implies a   b because a         east     i and f a  a      b  a   g  easti   hence
pos is injective 
to prove that pos is also surjective we use a similar technique  this time  we use an
induction on the distance from the lower left corner  for each element  x  y    u   n    n  
we define 
d   x  y     x   y 
we show by induction that  for each  x  y    u   n    n    there is an element a   i
such that pos a     x  y   if d   x  y       then x   y      since i j       c         there
is an element a   i such that pos a            now consider  x  y    u   n    n   with
d   x  y        without loss of generality we assume x      if x     then y     must hold  
hence  x    y    u   n    n   and d   x    y    d   x  y   from the induction hypothesis  it
follows that there is an element a   i such that pos a     x    y   then there must be
an element a  such that  a  a      easti and lemma     implies that pos a       x  y   hence
pos is also surjective 
finally  pos is indeed a homomorphism as an immediate consequence of lemma     
n

n

n

n

it is interesting to note that we need inverse roles only to guarantee that pos is injective  the same can be achieved by adding the cardinality restriction      n   n     to
tn   from which the injectivity of pos follows from its surjectivity and simple cardinality
considerations  of course the size of this cardinality restriction would only be polynomial
in n if we assume binary coding of numbers  also note that we have made explicit use of
the special expressive power of cardinality restrictions by stating that  in any model of tn 
the extension of c          must have at most one element  this cannot be expressed
with a alcqi  tbox consisting of terminological axioms 
n

n

   

fithe complexity of cardinality restrictions and nominals

    reducing domino problems to tcbox consistency

once lemma     has been proved  it is easy to reduce the bounded domino problem to
tcbox consistency  we use the standard reduction that has been applied in the dl context 
e g   in  baader   sattler        
lemma     let d    d  v  h   be a domino system  let w   w        wn     d   there is
a tcbox t  n  d  w  such that 
 t  n  d  w  is consistent iff d tiles u   n   n   with initial condition w 
 t  n  d  w  can be computed in time polynomial in n 
proof  we define t  n  d  w     tn   td   tw   where tn is defined in figure    td captures
the vertical and horizontal compatibility constraints of the domino system d  and tw enforces the initial condition  we use an atomic concept cd for each tile d   d  td consists
of the following cardinality restrictions 
g
  cd u cd     
   cd      
d d d   dnfdg

cd 

       

g

 d d    h

g

g

d d

 cd     east 

g

g

  

d d

d d

g

 cd     north 

 d d    v

cd 

    

tw consists of the cardinality restrictions
    c        cw                  c n        cw     
n

where  for each x  y  c x y  is a concept that is satisfied by an element a iff pos a     x  y  
defined similarly to c      and c           
from the definition of t  n  d  w  and lemma      it follows that each model of t  n  d  w 
immediately induces a tiling of u   n    n   and vice versa  also  for a fixed domino system
d  t  n  d  w  is obviously polynomially computable 
the main result of this section is now an immediate consequence of lemma      lemma      and corollary     
n

n

theorem    

consistency of alcqi  tcboxes is nexptime complete  even if unary coding of numbers is
used in the input 
recalling the note below the proof of lemma      we see that the same argument also
applies to alcq if we allow binary coding of numbers 
corollary    

consistency of alcq tcboxes is nexptime hard  if binary coding is used to represent
numbers in cardinality restrictions 
it should be noted that it is open if the problem can be decided in nexptime  if binary
coding of numbers is used  since the reduction of c   only yields decidability in   nexptime 
   

fitobies

in the following section  we will see that  for unary coding of numbers  deciding consistency of alcq tcboxes can be done in exptime  corollary       this shows that the
coding of numbers indeed has an inuence on the complexity of the reasoning problem  it
is worth noting that the complexity of pure concept satisfiability for alcq does not depend on the coding  the problem is pspace complete both for binary and unary coding of
numbers  tobies        
for unary coding  we needed both inverse roles and cardinality restrictions for the
reduction  this is consistent with the fact that satisfiability for alcqi concepts with respect
to tboxes consisting of terminological axioms is still in exptime  which can be shown by
a reduction to the exptime complete logics cin  de giacomo        or cpdl  pratt 
       this shows that cardinality restrictions on concepts are an additional source of
complexity  one reason for this might be that alcqi with cardinality restrictions no longer
has the tree model property 
   reasoning with nominals

nominals  i e   atomic concepts referring to single individualsof the domain  are studied both
in the area of dls  borgida   patel schneider        donini et al         and modal logics
 gargov   goranko        blackburn   seligman        areces et al          in this section
we show how  in the presence of nominals  consistency for tcboxes can be polynomially
reduced to consistency of tboxes consisting of general inclusion axioms  which  in general 
is an easier problem  this correspondence is used to obtain two novel results   i  we show
that  for unary coding  consistency of alcq tboxes consisting of cardinality restrictions
can be decided in exptime   ii  we show that  in the presence of both inverse roles and
number restrictions  reasoning with nominals is strictly harder than without nominals  the
complexity of determining consistency of tboxes with general axioms rises from exptime
to nexptime  and the complexity of concept satisfiability rises from pspace to nexptime 
definition     let ni be a set of individual names  also called nominals  disjoint from
nc and nr   concepts in alcqio are defined as alcqi  concepts with the additional rule
that  for every o   ni   o is an alcqio concept 
a general concept inclusion axiom for alcqio is an expression of the from c v d 
where c and d are alcqio concepts  a tibox for alcqio is a finite set of general
inclusion axioms for alcqio  where the subscript  i  stands for  inclusion  
the semantics of alcqio concepts is defined similar as for alcqi   with the additional
requirement that every interpretation maps a nominal o   ni to a singleton set oi  i  
o can be seen as a name for the element in oi   please note that we do not have a unique
name assumption  i e   we do not assume that o     o  implies oi     oi   
an interpretation i satisfies an axiom c v d iff c i  di   it satisfies a tibox tgci iff
it satisfies all axioms in tgci   in this case i is called a model of tgci  and we will denote
this fact by i j  tgci   a tibox that has a model is called consistent 
cardinality restrictions  tcboxes  and their interpretation for alcqio are defined analogously to alcqi  
   

fithe complexity of cardinality restrictions and nominals

r

with alcqo we denote the fragment of alcqio that does not contain any inverse roles

  

consistency of tcboxes or tiboxes both for alcqo and alcqio is exp hard and can be decided in nexptime  if unary coding of numbers is used 
proof  consistency of tiboxes  and hence of tcboxes  is exptime hard already for  a
syntactical variant of  alc  halpern   moses         assuming unary coding of numbers 
we can reduce the problems to satisfiability of c    which yields the nexptime upper
bound 
lemma    
time

    expressing cardinality restrictions using nominals

in the following we show how  under the assumption of unary coding of numbers  consistency
of alcqi  tcboxes can be polynomially reduced to consistency of alcqio tiboxes  it
should be noted that  conversely  it is also possible to polynomially reduce consistency
of alcqio tiboxes to consistency of alcqi  tcboxes  for an arbitrary concept c   the
cardinality restrictions f     c         c  g force the interpretation of c to be a singleton 
since we do not gain any further insight from this reduction  we do not formally prove this
result 
definition     let t   f     n  c              k nk ck  g be an alcqi  tcbox  w l o g   we
assume that t contains no cardinality restriction of the form      c   as these are trivially
satisfied by any interpretation  the translation of t   denoted by  t    is the alcqio tibox
defined as follows 

 

 t     f   i ni ci  j    i  kg 
where    i ni ci   is defined depending on whether   i    or   i    
 

n
 
   i ni ci     ffocji vv coi tj    tj oi ng g   foj v  o  j    j      n g
i
i
i
i
i
i
i

if
if

    
  i   
  i

where o i           oni are fresh and distinct nominals and we use the convention that the empty
disjunction is interpreted as    to deal with the case ni     
i

assuming unary coding of numbers  the translation of a tcbox t is obviously computable in polynomial time 
lemma     let t be an alcqi  tcbox  t is consistent iff  t   is consistent 
proof  let t   f     n  c              k nk ck  g be a consistent tcbox  hence  there is a
model i of t   and i j     i ni ci   for each    i  k  we show how to construct a model
i   of  t   fromj i   i   will be identical to i in every respect except for the interpretation of
the nominals oi  which do not appear in t   
if   i     then i j  t implies  cii  ni  if ni      then we have  not introduced
new nominals  and  t   contains ci v     otherwise  we define  oji  i such that cii 
   

fitobies

f oji  i   j    j  nig  this implies cii     o i  i           oni  i   and hence  in either case 
i   j     ni ci  
if   i     then ni     must hold  and i j  t implies  cii   ni  let x         xn be ni
distinct elements from i with fx            xn g  cii   we set  oji  i   fxj g  since we have
chosen distinct individuals to interpret different nominals  we have i   j  oji v  o i for every
   i      ni  moreover  xj   cii implies i   j  oji v ci and hence i   j     ni ci  
i

i

i

we have chosen distinct nominals for every cardinality restrictions  hence the previous
construction is well defined and  since i   satisfies    i ni ci   for every i  i   j   t   
for the converse direction  let i be a models of  t    the fact that i j  t  and hence
the consistency of t   can be shown as follows  let    i ni ci  be an arbitrary cardinality
restriction in t   if   i    and ni      then we have      ci    fci v   g and 
since i j   t   nwe have cii     and hence i j       ci   if   i    and
ni      we have
n i
 
i
 
fci v oi t  t oi g   t    from i j   t   follows  ci    oi t  t oi    ni  if   i    
then we have foji v ci j    j  nig foji v  o i j    j      nig   t    from the first set
of axioms we get f oji  i j    j  nig  cii   from the secondsset of axioms we get that  for
every    j      ni   oji  i     o i  i   this implies that ni     f oji  i j    j  nig   cii  
i

i

theorem    

assuming unary coding of numbers  consistency of alcqi  tcboxes can be polynomially
reduced to consistency of alcqio tiboxes  similarly  consistency of alcq tcboxes can be
polynomially reduced to consistency of alcqo tiboxes 
proof  the first proposition follows from the fact that  t   is polynomially computable
from t if we assume unary coding of numbers and from lemma      the second proposition
follows from the fact that the translation does not introduce additional inverse roles  if t
does not contain inverse roles  then neither does  t    and hence the result of translating
an alcq tcbox is an alcqo tibox 
    complexity results

we will now use theorem     to obtain new complexity results both for dls with cardinality
restrictions and with nominals 
     

alcq and alcqo

de giacomo        obtains complexity results for various dls by sophisticated polynomial
reduction to a propositional dynamic logic  the author establishes many complexity results 
one of which is of special interest for our purposes 
theorem       de giacomo         section     

satisfiability and logical implication for cno knowledge bases  tbox and abox  are exp complete 
the dl cno studied by the author is a strict extension of alcqo  tboxes in his thesis
correspond to what we call tiboxes in this paper  unary coding of numbers is assumed
time

   

fithe complexity of cardinality restrictions and nominals

throughout his thesis  although a unique name assumption is made  it is not inherent
to the utilised reduction since is explicitly enforced  it is thus possible to eliminate the
propositions that require a unique interpretation of individuals from the reduction  hence 
together with lemma      we get the following corollary 
corollary    

consistency of alcqo tiboxes is exptime complete if unary coding of number is assumed 
together with theorem      this solves the open problem concerning the lower bound
for the complexity of alcq with cardinality restrictions  moreover  it shows that the nexptime algorithm presented in  baader et al         is not optimal with respect to worst case
complexity 
corollary    

consistency of alcq tcboxes is exptime complete  if unary coding of numbers in cardinality and number restrictions is used 
     

alcqio

conversely  using theorem     enables us to transfer the nexptime completeness result
from theorem     to alcqio 
corollary    

consistency of alcqio tiboxes or tcboxes is nexptime complete 
proof  for tiboxes  this is an immediate corollary of theorem     and theorem     
reasoning with tcboxes is as hard as for tiboxes in the presences of nominals 
this results explains a gap in  de giacomo         there the author establishes the
complexity of satisfiability of knowledge bases consisting of tiboxes and aboxes both for
cno  which allows for qualifying number restrictions  and for cio  which allows for inverse
roles  by reduction to an exptime complete pdl  no results are given for the combination cino  which is a strict extension of alcqio  corollary     shows that  assuming
exptime    nexptime  there cannot be a polynomial reduction from the satisfiability
problem of cino knowledge bases to an exptime complete pdl  again  a possible explanation for this leap in complexity is the loss of the tree model property  while for cio and
cno  consistency is decided by searching for a tree like pseudo models even in the presence
of nominals  this seems no longer to be possible in the case of knowledge bases for cino 
unique name assumption it should be noted that our definition of nominals is nonstandard for description logics in the sense that we do not impose the unique name assumption that is widely made  i e   for any two individual names o    o    ni   oi     oi  is
required  even without a unique name assumption  it is possible to enforce distinct interpretation of nominals by adding axioms of the form o  v  o   moreover  imposing a unique
name assumption in the presence of inverse roles and number restriction leads to peculiar
effects  consider the following tibox 
t   fo v    k r       v  r  og
   

fitobies

under the unique name assumption  t is consistent iff ni contains at most k individual
names  because each individual name must be interpreted by a unique element of the domain  every element of the domain must be reachable from oi via the role r  and oi may
have at most k r successors  we believe that this dependency of the consistency of a tibox
on constraints that are not explicit in the tibox is counter intuitive and hence have not
imposed the unique name assumption 
nevertheless  it is possible to obtain a tight complexity bound for consistency of alcqiotiboxes with the unique name assumption without using theorem      but by an immediate
adaption of the proof of theorem     
corollary     

consistency of alcqio tiboxes with the unique name assumption is nexptime complete
if unary coding of numbers assumed 
proof  a simple inspection of the reduction used to prove theorem      and especially
of the proof of lemma     shows that only a single nominal  which marks the upper right
corner of the torus  is necessary to perform the reduction  if o is an individual name and
create is a role name  then the following tibox defines a torus of exponential size 

tn     v  east   
  v  north   
  v      east         v      north      
  v  create c        o v c             
c          v o 
  v deast u dnorth
n

n

n

n

since this reduction uses only a single individual name  the unique name assumption is
irrelevant 
internalisation of axioms in the presence of inverse roles and nominals  it is possible
to internalise general inclusion axioms into concepts using the spy point technique used 
e g   in  blackburn   seligman        areces et al          the main idea of this technique
is to enforce that all elements in the model of a concept are reachable from a distinct point
 the spy point  marked by an individual name in a single step 
definition      let t be an alcqio tibox  w l o g   we assume that t is of the form
f  v c              v ck g  let spy denote a fresh role name and i a fresh individual name 
we define the function spy inductively on the structure of concepts by setting aspy   a for
all a   nc   ospy   o for all o   ni     c  spy    c spy   c  u c   spy   c spy u c spy   and
   n r c  spy      n r   spy  i  u c spy  
the internalisation ct of t is defined as follows 
g

 iu

 vc  t

c spy

u

g

ct

 vc  t

 spy c spy

lemma      let t be an alcqio tibox  t is consistent iff ct is satisfiable 
proof  for the if  direction let i be a model of ct with a    ct  i   this implies ii   fag 

let i   be defined by

i     fag   fx   i j  a  x    spyi g
   

fithe complexity of cardinality restrictions and nominals

and i     i ji   
 
 
claim    for every x   i and every alcqio concept c   we have x    c spy  i iff x   c i  
we proof this claim by induction on the structure of c   the only interesting case is
c      n r d    in this case c spy      n r   spy  i  u d spy    we have
x      n r   spy  i  u d spy  i
iff  fy   i j  x  y    ri and y     spy  i i    dspy i g   n
   iff  fy   i   j  x  y    ri   and y   di   g   n
iff x      n r d i    
where the equivalence    holds because of set equality and   the definition of i   
by construction   for every   v c   t and every x   i   x    c spy  i   due to claim   
this implies x   c i and hence i   j    v c  
for the only if  direction  let i be an interpretation with i  j  t   we pick an
arbitrary
 
i
 
i
i
element a    and define an extension i of i by setting i   fag and spy   f a  x  j
x   i   since i and spy do not occur in t   we still have that i   j  t  
 
claim    for every x   i and every alcqio concept c that does not contain i or spy 
 
 
x   c i iff x    c spy  i  
again  this claim is proved by induction on the structure of concepts and the only
interesting case is c      n r d  
 
x      n r d  i
iff  fy   i   j  x  y    ri   and y   di   g   n
   iff  fy   i   j  x  y    ri      a  y    spyi     and y    dspy i   g   n
iff x      n r   spy  i  u dspy i    
again  the equivalence    holds due to set equality and the definition of i   
since  for every   v c    t   we have i   j    v c   claim   yields that    vc  t c spy i    
 
i and hence a    ct  i
as a consequence  we obtain the sharper result that already pure concept satisfiability
for alcqio is a nexptime complete problem 
f

corollary     

concept satisfiability for alcqio is nexptime complete 
proof  from lemma       we get that the function mapping a alcqio tibox t to ct
is a reduction from consistency of alcqio tiboxes to alcqio concept satisfiability  from
corollary     we know that the former problem is nexptime complete  obviously  ct can
be computed from t in polynomial time  hence  the lower complexity bound transfers 
   

fitobies

concept satisfiability
gcis
cardinality restr 

alcq

 c 
 c 
exptime c 
pspace

exptime

alcqo

open

 c 
exptime c 
exptime

alcqi

 c 
 c 
nexptime c 

alcqio

 c 
 c 
nexptime c 

pspace

nexptime

exptime

nexptime

figure    complexity of the reasoning problems
   conclusion

combining the results from  de giacomo        and  tobies        with the results from
this paper  we obtain the classification of the complexity of concept satisfiability and tboxconsistency for various dls and for tboxes consisting either of cardinality restrictions or
of general concept inclusion axioms shown in figure    where we assume unary coding of
numbers 
the result for alcqio shows that the current efforts of extending very expressive dls
as the logic shiq  horrocks et al         and dlr calvanese et al       c  or propositional
dynamic logics as cpdlg  de giacomo   lenzerini        with nominals are dicult tasks 
if one wants to obtain a practical decision procedure  since already concept satisfiability for
these logics is a nexptime hard problem 
we have shown that  while having the same complexity as c    alcqi does not reach its
expressive power  tobies         cardinality restrictions  although interesting for knowledge
representation  are inherently hard to handle algorithmically  the same applies to nominals
in the presence of inverse roles and number restrictions  as an explanation for this we offer
the lack of a tree model property  which was identified by vardi        as an explanation
for good algorithmic behaviour of many modal logics 
at a first glance  our results make alcqi with cardinality restrictions on concepts or
alcqio with general axioms obsolete for knowledge representation because c   delivers
more expressive power at the same computational price  yet  is is likely that a dedicated
algorithm for alcqi may have better average complexity than the c   algorithm  such an
algorithm has yet to be developed  this is highly desirable as it would also be applicable to
reasoning problems for expressive dls with nominals  which have applications in the area
of reasoning with database schemata  calvanese et al       a      b  
an interesting question lies in the coding of numbers  if we allow binary coding of
numbers  the translation approach together with the result from  pacholski et al        
leads to a   nexptime algorithm  as for c    it is an open question whether this additional
exponential blow up is necessary  a positive answer would settle the same question for c  
while a proof of the negative answer might give hints how the result for c   might be
improved  for alcq with cardinality restrictions  we have partially solved this problem 
with unary coding  the problem is exptime complete whereas  for binary coding  it is
nexptime hard 

   

fithe complexity of cardinality restrictions and nominals

acknowledgments

i would like to thank franz baader  ulrike sattler  and the anonymous referees for valuable
comments and suggestions  this work was supported by the dfg  project no  gr        
  
references

aiello  l  c   doyle  j     shapiro  s  c   eds     proceedings of kr            principles
of knowledge representation and reasoning  proceedings of the fifth international
conference  kr      morgan kaufmann publishers  san francisco  california 
areces  c   blackburn  p     marx  m          a road map on complexity for hybrid logics 
in proceedings of the annual conference of the european association for computer
science logic  csl      lncs       pp           springer verlag 
baader  f   buchheit  m     hollunder  b          cardinality restrictions on concepts 
artificial intelligence                    
baader  f     sattler  u          expressive number restrictions in description logics 
journal of logic and computation                 
berger  r          the undecidability of the dominoe problem  memoirs of the american
mathematical society     
blackburn  p     seligman  j          hybrid languages  journal of logic  language and
information                 
borger  e   gradel  e     gurevich  y          the classical decision problem  perspectives
in mathematical logic  springer verlag  berlin 
borgida  a          on the relative expressiveness of description logics and first order logics 
artificial intelligence              
borgida  a     patel schneider  p  f          a semantic and complete algorithm for
subsumption in the classic description logic  journal of artificial intelligence research 
           
calvanese  d   de giacomo  g   lenzerini  m   nardi  d     rosati  r       a   source integration in data warehousing  in proceedings of the ninth international workshop on
database and expert systems applications  dexa      pp           ieee computer
society press 
calvanese  d   de giacomo  g     lenzerini  m       b   on the decidability of query
containment under constraints  in proceedings of the seventeenth acm sigact
sigmod sigart symposium on principles of database systems  pods     
calvanese  d   de giacomo  g   lenzerini  m   nardi  d     rosati  r       c   description
logic framework for information integration  in proc  of the  th int  conf  on the
principles of knowledge representation and reasoning  kr      pp       
   

fitobies

de giacomo  g          decidability of class based knowledge representation formalisms  ph d  thesis  dipartimento di informatica e sistemistica  univ  di roma
 la sapienza  
de giacomo  g     lenzerini  m          tbox and abox reasoning in expressive description
logics   in aiello et al   aiello et al          pp          
donini  f  m   lenzerini  m   nardi  d     schaerf  a          reasoning in description
logics  in brewka  g   ed    foundation of knowledge representation  pp          
csli publications 
fine  k          in so many possible worlds  notre dame journal of formal logic     
        
gargov  g     goranko  v          modal logic with names  j  of philosophical logic     
        
gradel  e   otto  m     rosen  e          two variable logic with counting is decidable 
in proceedings  twelth annual ieee symposium on logic in computer science  pp 
        warsaw  poland  ieee computer society press 
halpern  j  y     moses  y          a guide to completeness and complexity for model
logics of knowledge and belief  artificial intelligence                  
horrocks  i   sattler  u     tobies  s          practical reasoning for expressive description
logics  in proceedings of the  th international conference on logic for programming
and automated reasoning  lpar      pp          
pacholski  l   szwast  w     tendera  l          complexity of two variable logic with
counting  in proceedings  twelth annual ieee symposium on logic in computer
science  pp          warsaw  poland  ieee computer society press 
pratt  v  r          models of program logics  in proceedings of the twentieth ieee
symposium on foundations of computer science  pp           ieee 
schmidt schau  m     smolka  g          attributive concept descriptions with complements  artificial intelligence           
spaan  e          complexity of modal logics  ph d  thesis  university of amsterdam 
tobies  s          a nexptime complete description logic strictly contained in c    in
flum  j     rodriguez artalejo  m   eds    proceedings of the annual conference
of the european association for computer science logic  csl      lncs       pp 
         springer verlag 
tobies  s          pspace reasoning for graded modal logics  journal of logic and computation  to appear 
   

fithe complexity of cardinality restrictions and nominals

vardi  m  y          why is modal logic so robustly decidable   in descriptive complexity
and finite models  proceedings of a dimacs workshop  january              no    
in dimacs series in discrete mathematics and theoretical computer science  pp 
         american math  society 
wang  h          dominoes and the aea case of the decision problem  bell syst  tech 
j            
woods  w  a     schmolze  j  g          the kl one family  computers and mathematics
with applications   special issue on artificial intelligence                    

   

fi