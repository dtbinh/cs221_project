journal of artificial intelligence research                

submitted       published     

reasoning on interval and point based
disjunctive metric constraints in temporal contexts
federico barber

fbarber dsic upv es

dpto  de sistemas informticos y computacin
universidad politcnica de valencia
camino de vera s n        valencia  spain

abstract
we introduce a temporal model for reasoning on disjunctive metric constraints on intervals and
time points in temporal contexts  this temporal model is composed of a labeled temporal algebra
and its reasoning algorithms  the labeled temporal algebra defines labeled disjunctive metric pointbased constraints  where each disjunct in each input disjunctive constraint is univocally associated
to a label  reasoning algorithms manage labeled constraints  associated label lists  and sets of
mutually inconsistent disjuncts  these algorithms guarantee consistency and obtain a minimal
network  additionally  constraints can be organized in a hierarchy of alternative temporal contexts 
therefore  we can reason on context dependent disjunctive metric constraints on intervals and
points  moreover  the model is able to represent non binary constraints  such that logical
dependencies on disjuncts in constraints can be handled  the computational cost of reasoning
algorithms is exponential in accordance with the underlying problem complexity  although some
improvements are proposed 

   introduction
two main lines of research are commonly recognized in the temporal reasoning area  the first
approach deals with reasoning about temporal constraints on time dependent entities  the goal is to
determine what consequences  t  follow from a set of temporal constraints    temporalconstraints   t    or to determine whether a set of temporal constraints is consistent  with no
assumptions about properties of temporal facts  the second approach deals with reasoning about
change  events  actions and causality  here  the goal is to obtain the consequent state from a set of
actions or events which are performed on an initial state    si   a   a        an      sj    both these
approaches constitute active fields of research with applications in several artificial intelligence areas
such as reasoning about change  scheduling  temporal planning  knowledge based systems  natural
language understanding  etc  in these areas  time plays a crucial role  problems have a dynamic
behavior  and it is necessary to represent and reason about the temporal dimension of information 
in this paper  we deal with the first of these approaches  our goal is reasoning on qualitative and
quantitative constraints between intervals or time points in temporal contexts  moreover  special
cases of non binary constraints are also managed  these tasks are pending issues in the temporal
reasoning area  as well as important features to facilitate modeling of relevant problems in this area
 including planning  scheduling  causal or hypothetical reasoning  etc   
several temporal reasoning models have been defined in the literature  with a clear trade off
between representation expressiveness and complexity of reasoning algorithms  qualitative point
algebra  pa   vilain  kautz   van beek        is a limited subset of interval based models  interval

      ai access foundation and morgan kaufmann publishers  all rights reserved 

fireasoning on interval and point  based disjunctive m etric constraints in temporal contexts

algebra  ia  introduced by allen        represents symbolic  qualitative  constraints between
intervals but metric information  such as  interval  starts   seconds before interval     cannot be
included  metric  quantitative  point based models  dechter  meiri   pearl        include the  time
line   metric  in their constraints  but they can only represent a limited subset of disjunctive
constraints between intervals  thus  constraints like  interval   bef  aft  interval    cannot be
represented  gerevini   schubert        
some efforts have been made to integrate qualitative and quantitative temporal information on
points and intervals  kautz   ladkin        drakengren   jonsson        etc    particularly  meiri
       introduces qualitative algebra  qa   where each interval is represented by three nodes  one
representing the interval and the other two representing its extreme points  such that qa can
represent qualitative and metric constraints on points and intervals  badaloni and berati        define
the interval distance sub algebra  idsa   where nodes are intervals  these intervals are related by
disjunctive   tuple metric constraints between their ending time points   i i  i j     i i   i j     i i   i j     i i  
i j     staab and hahn        propose a model for reasoning on qualitative and metric boundaries of
intervals  however  these models cannot handle constraints on interval durations  which were
identified earlier by allen         constraints such as  interval  lasts   seconds more than interval  
require a high order expression  dechter et al          or a duration primitive which should be
integrated with interval and point constraints  allen        barber         particularly  barber       
proposes two orthogonal networks to relate constraints on durations and time points  navarrete
       and wetprasit and sattar        relate disjunctive constraints on durations and time points 
but only a limited subset of interval constraints is managed  more recently  pujari and sattar       
propose a framework for reasoning on points  intervals and durations  pidn   here  variables
represent points or intervals  and constraints are an ordered set of three intervals representing  start 
end  duration  subdomains  however  no specialized algorithms for management of pidn
constraints are proposed 
in relation to the complexity of reasoning algorithms  the consistency problem is polynomial in
pa  vilain  kautz   van beek        and in non disjunctive metric networks  dechter et al         
however  vilain  kautz and van beek        also showed that determining the consistency of a
general case temporal network  i e   disjunctive qualitative and metric constraints between points 
intervals or durations  is np hard  thus  in previous qualitative or quantitative models  the
consistency problem is tractable only under some properties on constraints  relationships between
variable domains and constraints  or by using restricted subsets of constraints  dechter et al        
dechter        van beek   detcher        wetprasit   sattar        jeavons et al         etc    for
instance  tractable subclasses of ia have been identified by vilain  kautz and van beek        
nebel and burckert         drakengren and jonsson         etc  moreover  some interesting results
have been obtained in identification of tractable subclasses of qa  specifically  jonsson et al        
identified the five maximal tractable subclasses of the qualitative point interval algebra  however 
to my knowledge the maximal tractable subclass of pidn model  maximal tractable subclass of
qualitative and quantitative point  interval and duration constraints  is still not identified  in any case 
these restricted tractable subclasses are not able to obtain expressiveness of full models  and the
problem of reasoning on disjunctive constraints on points and intervals remains np complete 
on the other hand  these qualitative and metric temporal models do not manage certain types of
non binary constraints  which are important for modeling some problems  scheduling  causal
reasoning  etc    for instance  disjunctive assertions like  interval   bef  meets  interval      time  

fibarber

point  is         from time point     or temporal causal relations like if  interval   bef  meets 
interval    then  time point  is         from time point    should be incorporated in these models
 meiri         moreover  the global consistency property introduced by dechter        is an
important property in temporal networks  since it allows us to obtain solutions by backtrack free
search  dechter        freuder         in particular  a global consistent network would allow us to
handle conjunctive queries like does  interval   bef  meets  interval      time point  is         from
time point    hold  without propagation of the query  as it is required in  van beek        
stergiou and koubarakis         jonsson and bckstrm        dealt with the representation of
temporal constraints by means of disjunctions of linear constraints  linear inequalities and
inequations  also named disjunctive linear relations  dlrs   these expressions are a unifying
approach to manage disjunctive constraints on points  intervals and durations  such that these
expressions subsume most of the formalism for temporal constraint reasoning  jonsson   bckstrm 
       moreover  dlrs are able to represent disjunctions of non disjunctive metric constraints  x  y  c   x   y  c        xn  yn cn    where xi and yi are time points  ci real numbers and n   stergiou
  koubarakis         obviously  the satisfiability problem for an arbitrary set of disjunctions of
linear constraints is np complete  interesting tractable subclasses of dlrs and conditions on
tractability are identified in  cohen et al         jonsson   bckstrm        and stergiou  
koubarakis         the two main tractable subclasses are horn linear and ord horn linear
constraints  stergiou   koubarakis        jonsson   bckstrm         however  these subclasses
subsume temporal algebras whose management is also polynomial 
the management of a set of disjunctions of linear constraints is mainly based on general methods
from linear programming  although some specific methods have been defined for tractable subclasses
 stergiou   koubarakis        cohen et al         etc    as pujari and sattar outline         the
linear programming approach  though expressive  does not take advantage of the underlying
structures  e g   domain constraints  of temporal constraints  in addition  usual concepts in temporal
reasoning  as composition and intersection operations on constraints  minimal constraints  kconsistency  freuder         decomposability  montanari          globally consistency  dechter 
       etc   and their consequences should be adapted to reasoning on disjunctive linear constraints 
which is not a trivial issue 
in spite of the expressive power of the previous models  some problems  including planning 
scheduling  hypothetical reasoning  etc   also need to reason on alternative contexts  situations 
intentions or causal projections  and to know what holds in each one of them  dousson et al        
gerevini   schubert        garcia   laborie        srivastava   kambhampati         this gives
rise to the need to reason on context dependent constraints  this feature is not supported in the usual
temporal models in a general way  nor described in the usual expressive power of constraints
 jeavons et al          therefore  ad hoc methods should be used when reasoning on temporal
contexts is required 
these issues will be addressed in this paper  we describe a temporal model  which integrates
qualitative and metric disjunctive constraints on time points and intervals  the temporal model is
based on time points as primitive  such that intervals are represented by means of their end timepoints  however  the representation of interval constraints seems to imply some kind of relation
among endpoint constraints  gerevini   schubert         the proposed temporal model introduces
labeled constraints  where each elemental constraint  disjunct  in a disjunctive point based metric
constraint is associated to one unique label  in this way  point based constraints can be related among
  

fireasoning on interval and point  based disjunctive m etric constraints in temporal contexts

them without using hyper arcs  therefore  metric and symbolic constraints among intervals and timepoints can be fully integrated  represented and managed by means of a labeled metric point based
temporal constraint network  tcn   particularly  the model proposed here handles constraints
proposed in qa  meiri         idsa  badaloni   berati         and distance constraint arrays
model  staab   hahn         moreover  several added functionalities are also provided 
 management of alternative temporal contexts  each input constraint can be associated to a
given context  a hierarchy of alternative temporal contexts can be defined  such that
constraints between points and intervals are dependent on each context  to my knowledge 
these features improve existing temporal models  where contexts are not managed 
 reasoning algorithms on labeled constraints are based on a closure process  these processes
guarantee consistency and obtain a minimal disjunctive context dependent tcn  additionally 
a special type of globally labeled consistent tcn is obtained  this property allows us to obtain
solutions by backtrack free search  freuder        
 management of a special type of non binary constraints  reasoning algorithms are able to
manage disjunctions of disjunctive constraints  this supposes an extension of disjunctions of
non disjunctive metric constraints proposed by stergiou and koubarakis         moreover 
given a set of disjunctive constraints  the model can handle logical relations among
disjunctions of different constraints  thus  we can express that a set of atomic disjuncts in
disjunctive constraints are mutually disjunctive among them  therefore  a special type of
and or tcn can be managed as a conjunctive  and  tcn  likewise  the model can also handle
special non binary constraints representing implications among temporal constraints as were
identified by meiri        
with these features  the proposed temporal model is suitable for modeling problems where these
requirements appear  the computational cost of reasoning methods is non polynomial  given the
complexity of the underlying problem  however  several improvements are also proposed 
a brief revision of the main temporal reasoning concepts is presented in section    in section   
a temporal algebra for labeled point based disjunctive metric constraints is described  this temporal
algebra introduces the concept of labeled constraints and their temporal operations  reasoning
algorithms for guaranteeing a minimal  and consistent  tcn are specified in section    by using this
model  the integration of interval and point based constraints and management of non binary
constraints are respectively described in sections   and    association of constraints to temporal
contexts and management of context dependent constraints are detailed in section    finally  section
  concludes 

   basic temporal concepts
temporal reasoning deals with reasoning on temporal constraints  the syntax and semantics of
constraints are defined by an underlying temporal algebra  which is the basis for performing the
reasoning processes  a temporal algebra can be defined according to the following elements 
 temporal primitive  or variable   x i    usually time points  ti   or intervals  ii   
 interpretation domain d for primitives xi   the interpretation domain represents the time line 
  

fibarber

time points are instantiated on d  ti d   and temporal intervals can be modelled as pairs of
ending time points that can be instantiated on d  ii    ii    ii     ii dxd  ii  ii   
 temporal constraints between primitives  where each constraint relates n primitives  c     n  x   
x         xn    as particular cases  the  empty constraint     is named the inconsistent constraint
and  u  is the universal constraint  unary constraints restrict the interpretation domain d for
variables  they are not usually used in symbolic algebras  where an infinite domain is
assumed  binary constraints are temporal constraints between two variables  xi cij xj    and nary constraints represent temporal constraints among n variables  by default  binary constraints
are assumed in this paper  we can also have qualitative  relative relation  or quantitative
 metric relation  constraints  as well as disjunctive  cij is a set of disjunctive basic constraints 
 cij     or non disjunctive constraints 
 operations between constraints  mainly  temporal composition     temporal intersection
    temporal union     and temporal inclusion    
a temporal problem is specified by a set of n variables x   xi    an interpretation domain d and
a finite set of temporal constraints between variables   xi cij xj     a temporal problem gives rise to
a temporal constraint network  tcn  which can be represented as a directed graph where nodes
represent temporal primitives  xi   and labeled directed edges represent the binary constraints between
them  cij   the universal constraint u is not usually represented in the graph  and each direct edge
 representing cij   between xi and xj implies an inverse one  representing cji   between xj and xi  
according to the underlying temporal algebra  we mainly have ia tcns based on the interval
algebra  allen         pa tcns based on the point algebra  vilain et al          or metric tcns
based on the metric point algebra  dechter et al         dean   mcdermott         in this later
case  disjunctive metric point based constraints give rise to a temporal constraint satisfaction
problem  tcsp   dechter et al         
reasoning on temporal constraints can be seen as a constraint satisfaction problem  csp   an
instantiation of the variables x is a n tuple  v    v    v        vn     vi d which represents the assignments
of values  vi   to variables  x i     x   v    x   v        xn  vn   a  global  solution of a tcn is a consistent
instantiation of the variables x in their domains such that all tcn constraints are satisfied  a value
v is a consistent  or feasible  value for xi if there exists a tcn solution in which xi  v  the set of all
feasible values of a variable xi is the minimal domain for the variable  a constraint  xi cij xj   is
consistent if there exists a solution in which  xi cij xj   holds  a constraint cij is minimal iff it consists
only of consistent elements  or feasible values  that is  those which are satisfied by some
interpretation of tcn constraints  a tcn is minimal iff all its constraints are minimal 
a tcn is consistent  or satisfiable   iff it has at least one solution  freuder        generalizes the
notion of consistency as   a network is k consistent iff  given any instantiation of any k   variables
satisfying all the direct constraints among those variables  there exists at least one instantiation of any
kth variable such that the k values taken together satisfy all the constraints among the k variables   as
consequences   i  all  k    length paths in the network are consistent   ii  for each pair or nodes  there
exists an interpretation that satisfies each  k    length path between them  and  iii  each sub tcn of
k nodes is consistent  as particular cases    consistency    consistency and   consistency are called
node consistency  arc consistency and path consistency  respectively  mackworth        montanari 
      
  

fireasoning on interval and point  based disjunctive m etric constraints in temporal contexts

path consistency is a common concept in constraint networks  from montanari        and
mackworth         a path of k length through nodes  x    x         xk   xj   is path consistent iff for any
value v  d  and vj dj such that  x  v  c j xj vj   holds  there exists a sequence of values v  d    v d   
     vk dk such that  v  cl  v      v  c   v          and  vk ck j vj   hold  a tcn is path consistent iff all its
paths are consistent  moreover  montanari        proves that to ensure path consistency it suffices
to check every   length path  thus  path consistency and   consistency are equivalent concepts 
alternatively  meiri        outlines a path of k length  xi   x    x        xk   xj   is path consistent iff cij 
 ci   c         ckj    however  this definition disregards domain constraints  such that it is equivalent
to the former definition if variable domains are infinite or the tcn is also node and arc consistent 
as the usual case in symbolic algebras  in metric algebras  path consistency usually assumes node and
arc consistency  therefore  taking into account that it is only necessary to test   length paths to
assure path consistency  a tcn is path consistent iff cij  cik  ckjtcn  cij   cik  ckj    this
condition gives rise to the more usual path consistent algorithm  the transitive closure algorithm
 tca  which imposes local   consistency in each sub tcn of   nodes  such that all   length paths
become consistent paths  mackworth        montanari          the tca algorithm will obtain an
equivalent path consistent tcn if it exists  otherwise  it fails 
cij  cik  ckj tcn  cij cij   cik  ckj  
a network is strong k consistent iff the network is j consistent for all jk  freuder         an nconsistent tcn is a consistent tcn  and a strong n consistent tcn is a minimal tcn  alternatively 
dechter        introduces the concepts of local and global consistency  a partial instantiation of
variables  x   v    x   v        xk  vk      k n is locally consistent if it satisfies all the constraints among
these variables  a subtcn is globally consistent if any locally consistent instantiation of the
variables in the subtcn can be extended to a consistent instantiation of all tcn  a globally
consistent tcn is one in which all its subtcns are globally consistent  thus  a tcn is strong nconsistent iff it is globally consistent  dechter        
the first reasoning task on a tcn is to determine whether the tcn is consistent  if the tcn is
consistent  we can then obtain the minimal tcn  all tcn solutions  by assuming a discrete and finite
model of time   only one solution  a partial solution  consistent instantiation of a subset of tcn
variables  which is a part of a global solution   etc 
deductive closure  or propagation  is one of the basic reasoning algorithms  the closure process
is a deductive process on a tcn  where new derived constraints are deduced from the explicitly
asserted ones by means of the composition    and intersection    operations  thus  the process of
determining the consistency and the minimality of a tcn is related to a sound and complete closure
process  vilain et al          alternatively  csp based methods  with several heuristic search criteria 
are also used for guaranteeing consistency and obtaining tcn solutions  in this paper  we are mainly
interested in tcn closure processes 
determining the consistency of a general case tcn is np hard  and minimal tcns can be
obtained by a polynomial number of consistency processes  vilain et al          particularly  dechter 
meiri and pearl        showed that determining consistency and obtaining a minimal disjunctive
metric tcn can be achieved in o n  le   where n is the number of tcn nodes  e is the number of
explicitly asserted  input  constraints  and l is the maximum number of intervals in an input
constraint  however  specific levels of k consistency can guarantee consistency and obtain a minimal
tcn  depending on the tcn topology or the underlying temporal algebra  for example  path  

fibarber

consistency guarantees consistency and obtains a minimal non disjunctive metric tcn  dechter et
al          the path consistency tca algorithm has an o n   cost  allen        vilain  kautz   van
beek         however  assuring path consistency can become a complex task in disjunctive metrictcns if the variable domain d is large or continuous  as was stated by dechter  meiri and pearl
        the number of intervals in  cij  cjk   is upper bounded by  cij  x cjk    thus  the total number of
disjuncts  subintervals  in a path consistent tcn might be exponential in the number of disjuncts per
constraints in the initial  input  tcn  schwalb and dechter        call this the fragmentation
problem  which does not appear in non disjunctive metric tcns  thus  the tca algorithm is o n 
r    in disjunctive metric tcns if time is not dense  dechter et al          where the range r is the
maximum difference between the lowest and highest number specified in any input constraints 

   a labeled temporal algebra
the main elements of the point based disjunctive metric temporal algebra are  dechter et al         
 time point  ti   as primitive variable  a continuous variable domain  like q or   is usually
assumed 
 each temporal constraint cij u is a finite set of l mutually exclusive subdomains  or
subintervals  of d 
cij   d   d       d   d             d k d k            d l d l     

where d k d k and d k  d k d 

and disjunctively restricts the temporal distance between two time points  ti and tj  
tj   ti    d   d       d   d              d l d l    
meaning that  d   tj  ti  d             d l  tj  ti d l    similar conditions can be applied to open
 d k d k   and semi open intervals  d k d k     d k d k    the universal constraint u is         
unary constraints restrict the associated subdomain of a time point ti   d   d       d   d           
 d l d l     a special time point t  is usually included  which represents  the beginning of the
world   usually  t       thus  each unary constraint on ti can be represented as a binary one
between ti and t   
ti   t     d   d       d   d              d l d l     ti d     d      ti  d     d             ti d l   d l  
and  by default  ti    t         ti   
 the algebra operations  mainly      and   from  meiri         given two temporal
constraints s   ds i   ds i    and t   dt j   dt  j    
s  t    dk   dis  djt   dk   di  dj   
that is   ds i   ds i  s   dt j   dt  j  t  t  ds i  d t j   ds i  d t j     here  resulting subdomains
in s  t may not be pairwise disjoint  therefore  some additional processing may be required
to compute a disjoint subdomain set 
s  t    dk   dks  dkt   that is  the set intersection of their subdomains 
s  t    dk   dks  dk t   as the set union of their subdomains 
st   iff dk s  dk t 
  

fireasoning on interval and point  based disjunctive m etric constraints in temporal contexts

on the basis of the point based disjunctive metric temporal algebra and its operations  we
introduce a labeled point based disjunctive metric temporal algebra  which gives rise to a labeledtcn 
    labeled constraints and inconsistent label sets
an elemental constraint  ec  is one disjunct in a disjunctive constraint  similar terms are atomic 
basic or canonical constraints  however  lets use this term due to the special structure of labeled
elemental constraints which are introduced further on  thus  a disjunctive constraint cij can be
considered as a disjunctive set of l mutually exclusive elemental constraints  ecij k   
ecij k    d ij k d ij k     i j k d ij k d ij k
cij  ec ij     ec ij          ec ij l    u   k p      l   kp   ecij k  ec ij p   
definition    labeled constraints   a labeled elemental constraint lecij k is an elemental constraint
ecij k associated to a set of labels  labelij k   where each labelij k is a symbol  a labeled constrain t lc ij
is a disjunctive set of labeled elemental constraints  lecij k    that is 
lc ij   lecij     lecij          lecij l    where
lecij k   ec ij k  labelij k     and  labelij k   label    label         labels   is a set of symbols 

each label in a labeled tcn can be considered as a unique symbol  the following cases can
occur 
i 

if an input  or explicitly asserted  constraint lc ij has only one elemental constraint  that is 
only one disjunct  this elemental constraint has the label  r     the labeled universalconstraint is  u r     in a given tcn  the set of all elemental constraints labeled with  r   
is the common context  thus  the label r  represents the set of elemental constraints which
have no other alternatives  disjuncts   all elemental constraints labeled only with r  should
hold since they have no other alternative disjuncts 

ii 

if an input constraint lc ij has more than one elemental constraint  each elemental constraint
lecij k lc ij has a single and exclusive label associated to it    labelij k        thus  each label
in the tcn represents bi univocally an elemental constraint in an explicitly asserted
constraint 

iii  each derived elemental constraint  obtained by combining  lc  or intersecting   lc  two
labeled elemental constraints  has a set of labels associated to it  this set of labels is obtained
from the label sets associated to the combined  or intersected  labeled elemental constraints 
it will be detailed in the later specification of operations  lc   lc  in section      in
consequence  the label set associated to a derived elemental constraint represents the
conjunctive support set of explicitly asserted elemental constraints that imply this derived
elemental constraint 
let s see a simple example on labeled constraints  which was introduced by dechter  meiri and
pearl        

  

fibarber

          r    

t 
          r             r    

          r    

t 

t 
t 

        r             r    

t 

          r     

t 

figure    the labeled point based disjunctive metric tcn of the example  

example     john goes to work either by car            or by bus  at least       fred goes to work
either by car            or in a carpool            today john left home  t   between
     and       and fred arrived  t   at work between      and       we also know
that john arrived  t   at work about         after fred left home  t    
in this example  we have the disjunctive labeled constraints in figure    where t  represents the
initial time        and where the granularity is in minutes  a label  r    is associated to elemental
constraints belonging to constraints with only one disjunct  in constraints with more than one 
mutually exclusive disjuncts  each disjunct is labeled with an exclusive label rn  n     thus 
 the label r  is associated to  john left home between      and         fred arrived at work
between      and        and  john arrived at work about         after fred left home   this
is the common context 
 the label r  is associated to  john goes by bus   and r  to  john goes by car  
 the label r  is associated to  fred goes in a carpool   and r  to  fred goes by car  
definition    inconsistent label sets   an inconsistent label set  i l set  is a set of labels  labeli  
and represents a set of overall inconsistent elemental constraints  that is  they cannot all
simultaneously hold  
theorem    any label set that is a superset of an i l set is also an i l set  the proof is obvious  if
a set of elemental constraints is inconsistent  any superset of it is also inconsistent  
definition    elemental constraints  lecij k  of an input disjunctive constraint lc ij are pairwise disjoint 
thus  each   length set of labels from each pair of  lecij k   is added to the set of i l sets  that is  for
each input constraint lc ij   lecij     lecij          lecij l    where lecij k  ecij k  labelij k    and   labelij k      
k p      l    kp  i l sets  i l sets    labelij k   labelij p    
in the example of figure     r  r    and  r  r    are i l sets  other i l sets existing in a labeled
tcn will be detected in the reasoning processes later detailed in section   

  

fireasoning on interval and point  based disjunctive m etric constraints in temporal contexts

    operations on labeled constraints
the following points define the main operations on labeled constraints 
      temporal inclusion lc
the temporal inclusion operation lc should take into account the inclusion of temporal intervals and
the inclusion of associated label sets 
lecij k lc lecij p    ecij k  labelij k    lc  ecij p  labelij p     def ecij k t ecij p   labelij k    labelij p   
      temporal union lc
operation lc performs the disjunctive temporal union of labeled constraints as the set union of their
elemental constraints  however  all labeled elemental constraints whose associated labels are i l sets
should be rejected 
lc ij lc lcij  def lecij k lc ij   lc   lecij k   lcij    where
lc   lecij k   lcij      ec ij k  labelij k    lc lcij  def
inconsistent  labelij k      lcij
lecij p lcij   lecij p lc lecij k   lcij
other     lcij     lecij k        lecij p    lecij plcij  lecij k lclecij p  

 s   
 s    

the function inconsistent  labelij k   returns true if the set  labelij k   is an i l set or a superset of
any existing i l set  theorem     otherwise  it returns false 
inconsistent  labelij k     def
if  labels  inconsistent label sets    labels   labelij k   then true else false 
the operation lc simplifies the resulting constraint  equal or less restricted elemental constraints
with equal or bigger associated label sets are removed  for instance 
           r  r  r  r               r  r     lc            r  r               r  r  r      
           r  r               r  r     
in the resulting constraint            r  r  r  r    and           r  r  r    are eliminated  as examples
of the cases s  and s    respectively  that is            r  r    lc          r  r  r  r    and           r  r   
lc           r  r  r     these simplifications can seem counter intuitive  however  note that the label
set associated to each derived labeled elemental constraint represents the support set  composed of
input elemental constraints  from which the derived labeled elemental constraint is obtained  thus 
only the minimal associated label set should be represented  for reason of efficiency  moreover  the
more labels are in the associated label set  labelij k    the elemental constraint  ecij k   should be equal
or more restricted 
      temporal composition lc
operation lc performs the temporal composition of labeled constraints  it is based in the operation
 of the underlying disjunctive metric point based algebra 
  

fibarber

lc ij lc lc jk  def lecij plc ij   lecjk q lc jk lc    ecij p  ecjk q  labelij p   labeljk q     
for instance            r               r     lc              r                 r      
             r  r                 r  r                 r  r                 r  r     
note that elemental constraints in a labeled derived constraint may not be pairwise disjoint 
however  these labeled derived elemental constraints cannot be simplified  this is related to the
fragmentation problem of the disjunctive metric algebra  schwalb   dechter         we have that
each derived labeled elemental constraint should have its own associated label set  in the example 
             r  r                 r  r     cannot be simplified to             r  r  r    since each
subinterval depends on a different set of labels  that is  on a different support set of elemental
constraints   if the label set  r  r    becomes an i l set  only             r  r    should be removed 
on the other hand  if           becomes an inconsistent interval between the implied time points 
only  r  r    should be asserted as an i l set 
      temporal intersection  lc
operation  lc performs the temporal intersection of labeled constraints and is based on the operation
 
lc ij lc lcij  def lecij k lc ij   lecij p lcij   lc  lecij k  lc lecij p  
where  lecij k  lc lecij p  def
if ec ij k  ecij p    then   
 the inconsistent constraint is returned 
else   ecij k  ecij p     labelij k   labelij p    
as example 
          r               r      lc           r               r                  r  r              r  r    
in the operations lc and  lc  the label set  labelij r  associated to each derived labeled elemental
constraint  ecij r  is obtained from the set union of labels associated to combined  lc  or intersected
  lc  labeled elemental constraints  therefore   labelij r  represents the support set  composed of input
elemental constraints  that implies the derived elemental constraint  ecij r  
definition    a set of i l sets is complete if it represents all inconsistent sets of tcn elemental
constraints  a set of i l sets is sound if each i l set represents an inconsistent set of elemental
constraints  
theorem    assuming a complete and sound set of i l sets  a labeled elemental constraint is
consistent iff it has an associated label set which is not an i l set  the proof is trivial  since the label
set associated to each labeled elemental constraint represents its support set  
theorem    assuming a complete and sound set of i l sets  no inconsistent labeled elemental
constraint is obtained in operations lc and lc 
proof  the operations lc and lc use the operation lc to obtain their results  this operation lc
rejects all labeled elemental constraints whose associated labels are i l sets  thus  all elemental
constraints derived in operations lc and  lc are consistent  theorem     
  

fireasoning on interval and point  based disjunctive m etric constraints in temporal contexts

    distributive property  lc over  lc in disjunctive labeled constraints
operations  and  are distributive  i e    distributes over   in non disjunctive metric tcn  but
this property does not hold in disjunctive metric constraints  dechter  meiri and pearl        show
the following example  given the disjunctive metric constraints 
a                   
we have 

b            

c                    

 a   b  c                      

 a  b    a  c              

thus  clearly  a   b  c    a  b    a  c   however  the distributive property holds for
operations lc and  lc in labeled tcn 
theorem    by using labeled constraints and i l sets  lc distributes over lc 
proof  lets consider the labeled constraints lc i   lc j and lc k   thus 
 lc i lc lc j    lc  lc i lc lc k  
can be expressed  according to the definition of operation lc  as 
 lecp lc i   lecq lc j   lc  lecp lc lecq      lc  lecrlc i   lecs lc k   lc  lecr lc lecs     
lecp lc i   lecq lc j   lecrlc i   lecs lc k  lc  lecp lc lecq    lc lc  lecr lc lecs    
which  according to the definition of  lc  can be expressed as 
lecp lc i   lecq lc j   lecrlc i   lecs lc k  lc  lecp lc lecq    lc  lecr lc lecs    

 e  

in this expression  lecp and lecr are elemental constraints of the same labeled constraint lc i  
however  the set union of label sets associated to each pair of elemental constraints in any  input or
derived  labeled constraint is an i l set  definition     that is  if lecp lecr  then  labelp   labelr 
is an i l set  thus  if lecp lecr  the label set associated to  lecp lc lecq   lc  lecr lc lecs   is an i lset  in consequence   lecp lc lecq   lc  lecr lc lecs   is rejected in operation lc  that is 
lecp lc i   lecq lc j   lecrlc i   lecs lc k   lecplecr  lc  lecp lc lecq   lc  lecr lc lecs        
thus  the above expression  e   results 
lecp lc i   lecq lc j   lecslc k  lc   lecp lc lecq   lc  lecp lc lecs     
in this expression  lc clearly distributes over  lc for elemental constraints  i e   non disjunctive
constraints   therefore 
lecp lc i   lecq lc j   lecslc k  lc   lecp lc  lecq lc lecs       
lecp lc i   lc  lecp lc  lecqlc j   lecs lc k   lc  lecq lc lecs       lc i lc  lc j lc lc k   
that is  lc distributes over  lc for labeled constraints 

for instance  following the previous example 
a          r             r    

b            r    

c           r             r   

and  r  r      r  r    are i l sets  thus  we have 
 a lc  b  lc c            r             r    lc            r     lc          r             r      
        r             r   lc           r  r             r  r     
  

fibarber

          r  r  r             r  r  r             r  r  r             r  r  r    
also 
 a lc b   lc  a lc c   
         r             r    lc           r      lc
         r             r    lc          r             r      
          r  r             r  r     lc          r  r             r  r            r  r             r  r     
lc           r  r  r             r  r  r             r  r  r  r   
         r  r  r  r             r  r  r  r             r  r  r             r  r  r    
however   r  r      r  r    are i l sets  thus            r  r  r  r             r  r  r  r             r 
r  r  r    are removed in operation lc  therefore 
 a lc b   lc  a lc c              r  r  r             r  r  r             r  r  r             r  r  r    
that is   a lc  b lc c     a lc b   lc  a lc c  

   reasoning algorithms on labeled constraints
several algorithms for reasoning on disjunctive constraints can be applied for the management of
labeled temporal constraints  by using the lc  lc  lc and lc operations  for instance  the wellknown transitive closure algorithm  general closure algorithms as in  dechter        dechter et al  
      van beek   dechter         csp based approaches  etc  however  montanari        shows
that when composition operation distributes over intersection  any path consistent tcn is also a
minimal tcn  from theorem    we have that lc distributes over lc  thus  application of a pathconsistent algorithm on the proposed labeled tcn will obtain a minimal tcn  thus  the tca
algorithm could be used as the closure process on labeled constraints  in a similar way as allen
       uses it  however  an incremental reasoning process is proposed on the basis of the incremental
path consistent algorithm for non disjunctive metric constraints described by barber         an
incremental reasoning process is useful when temporal constraints are not initially known but are
successively deduced from an independent process  for instance  in an integrated planning and
scheduling system  garrido et al          the proposed reasoning algorithm is similar to the tca
algorithm  however  updating and closure processes are performed at each new input constraint 
thus  each new input constraint is updated and closured on a previously minimal tcn  figure    
therefore  no further propagation of modified constraints in the closure process is needed  moreover 
the proposed reasoning algorithms will obtain a complete and sound set of i l sets 
the specification of reasoning processes is described in section      the properties of these
processes will be described later in section     
    the updating process
given a previous labeled tcn  composed by a set of nodes  ni    a set of labeled constraints  lc ij  
among them  and a set of i l sets  the updating process of each new c ij between nodes ni and nj
constraint is detailed in figure   
  

fireasoning on interval and point  based disjunctive m etric constraints in temporal contexts

updating  ni cij nj 
 cij  ecij   ecij          ecij l    a disjunctive metric constraint 
lc ij  put labels  cij     an exclusive label is associated to each elemental constraint
ecij k in cij
if consistency test  lc ij   lc ij    consistency test of lc ij  the previously existing
constraint between n i and nj is lcij   moreover  new i l sets
are detected 
then   inconsistent constraint  
return  false 
else   consistent constraint  
lc ij  lc ij  lc lc ij  
lc ji  inverselc  lc ij   
closure  ni lc ij nj     closure algorithm for the updated constraint 
return  true 
end if
end updating
figure    updating process on labeled constraints
the function put labels cij   returns a labeled constraint lcij  lecij     lecij          lecij l   
associating an exclusive label to each elemental constraint in cij  if there is only one disjunct in cij  
the label in the unique elemental constraint is  r     otherwise  each pair of labels in lcij is added to
the set of i l sets  since elemental constraints in cij are pairwise disjoint  definition     by using the
inverse function on non labeled constraints  the inverse lc function is 
inverselc    ec ij k  labelij k       def   inverse  ec ij k    labelij k    
the described updating process is performed each time that one new input constraint cij is
asserted on a previous tcn  thus  an initial tcn with no nodes  no constraints  and no i l sets is
assumed  figure     at each new input constraint  cij    the tcn is incrementally updated and
closured  that is  if cij is consistent  consistency test function   the constraint cij is added to the
tcn  the closure process  closure function  propagates its effects to all tcn  and the new tcn is
obtained  a new updating process can be performed on this new tcn  and so on successively 
       the consistency test function
the consistency test function  figure    is based on the operation  lc  a new input constraint lc ij
between nodes ni and nj is consistent if it temporally intersects with the previously existing constraint
lc ij between these nodes  moreover  the consistency test function can detect new i l sets 
i 

if the new constraint lc ij is consistent with the existing constraint lc ij   and two elemental
constraints ecij p lc ij   ecij klc ij do not intersect  ecij k  ecij p     then the label set
 labelij k   labelij p   is an i l set and should be added to the current set of i l sets 

ii 

if an existing elemental constraint between nodes ni and nj  lecij klc ij  does not intersect with
the new constraint lc ij   then  labelij k   is an i l set and should be added to the current set of
i l sets 

  

fibarber

consistency test  lc ij   lcij    
if  lc ij  lc lcij       
then return  false 
else
if lecij k lc ij   lecij p lc ij   lecij k  lc lecij p    
then i l sets  i l sets    labelij k   labelij p    
if lecij k lc ij   lecij k  lc lcij     
then i l sets  i l sets   labelij k   
end if
return  true 
end  consistency test
figure    consistency test function
for example 
consistency test            r               r                 ra    
          r               r                 rb       true
since
           r               r                 ra     lc           r               r                 rb     
           r  r              r  r         
in this function  the label sets  r  r      r  r    and  ra  are detected as i l sets and should be
added to the current set of i l sets  since 
          r     lc           r       
         r     lc           r        
             ra     lc           r               r                 rb       
note that  rb   does not need to be detected as an i l set  since the label rb is not included in the
final constraint            r  r              r  r      to be added to the tcn 
any superset of an i l set is also an i l set  theorem     moreover  note that  r  r     r  r   
do not need to be added to the set of i l sets  since the label r  is not included in the final constraint 
therefore  the following simplifications can also be performed each time a new i l set is added to
the current set of i l sets  these simplifications do not modify the results of reasoning processes 
but minimize the size of the set of i l sets and improve its management efficiency 
i 

no new i l set that is superset of an existing i l set is added to the set of i l sets 

ii 

if an existing i l set is superset of the new i l set  then the existing i l set is removed 

iii  no new i l set that contains a label of lc ij   which does not appear in the labeled constraint
 lc ij  lc lc ij   to be added to the tcn  should be added to the set of i l sets 
lets see an example of the updating and consistency test processes  lets take the labeled tcn
that results from example   once the following constraints have been updated and closured 

  

fireasoning on interval and point  based disjunctive m etric constraints in temporal contexts

set of inconsistent label sets    r  r      r  r    
           r    

t 
           r    
          r    
            r  r   
          r  r    

t 
t 

            r  r   
          r  r    

t 
           r  r   
        r  r    

         r  r  r   
        r  r  r   
           r  r  r   
          r  r  r    

           r  r   
          r  r     

t 

         r  r   
         r  r    

         r   
          r    

t 
           r     

t 
t 

figure    the resulting labeled tcn of figure   before updating  t            t   
 t        r           r    t      t           r            r    t     t          r    t      t          r    t    
the resulting labeled tcn is shown in figure   and the set of i l set is   r  r      r  r     
now  we update  t          r    t     the previously existing constraint between t  and t  is  figure    
        r  r  r            r  r  r                r  r  r              r  r  r    
the consistency test function performs 
          r     lc         r  r  r            r  r  r                r  r  r              r  r  r      
          r  r  r             r  r      r  r  r       

 e  

thus   t  t           r     is consistent  moreover   r  r  r    is detected as an i l set  the
elemental constraints associated to  r  r  r    are an inconsistent set of disjuncts that cannot hold
simultaneously  that is 
 if today john left home between      and       r     fred arrived at work between     
and       r    and john arrived at work about         after fred left home  r     then it is
impossible for john to have gone by bus  r     and fred to have gone in a carpool  r      
the set of i l sets obtained in the reasoning process can be considered as special derived
constraints  which express the inconsistency of a set of input elemental constraints  for instance  the
i l set  r  r  r    represents  figure    
    t          t      t          t      t          t      t          t      t        t     
this expression is a non binary constraint  this type of constraints could be represented as a
disjunctive linear constraint  as jonsson and bckstrm         stergiou and koubarakis       
show  however  input elemental constraints should be represented in derived constraints to be able
to derive these inconsistent sets of input elemental constraints  in this model  this is done by means
of the label sets associated to labeled elemental constraints 

  

fibarber

    the closure process
the closure process  figure    is applied each time a new input constraint  lc i j   is updated  such that
the effects of lc ij are propagated to all tcn 
closure  ni lc ij nj 
   first loop  closure n i  n j  n k   
nk tcn   lc jk   u r    
lc ik  lc ik  lc  lc ij lc lc jk    lc ki  inverse lc ik 
   second loop  closure n j  ni  nl   
nl tcn   lc il   u r    
lc jl  lc jl  lc  inverse lc ij   lc lc il    lc lj  inverse lc jl  
   third loop  closure nl  ni  nj  nk    
nl   nk tcn   lc li   u r     lc jk   u r    
lc lk  lc lk  lc  lc li lc lc ij lc lc jk    lc kl  inverse lc lk  
end closure
figure    the closure process on labeled constraints

   
nl  

nl i

lc il i

   

ni

nk  
   

lcij

nj

nk i
lcjk i

nk t

nl s

figure    loops in the closure process
the closure process has three loops  figure     in these loops the process obtains 

 

i 

derived constraints lc ik between ni and any node nk   if nk is previously connected with nj
 edge   of figure    

ii 

derived constraints lc lj between nj and any node nl   if nl is previously connected with ni
 edge   of figure    

this loop could be simplified as 
  n l  n i  n k    n l  n k tcn   lc li   u r     lc j k   u r    

lc lk  lc lk lc  lc li lc lc ik   or as

  n l  nj  n k    n l  n k tcn   lc li   u r     lc j k   u r     lc lk  lc lk lc  lc lj lc lcj k 
since lc ik  or lc lj   has already been closured in the first  or in the second loop   moreover  the efficiency of the third loop
can be improved if only modified constraints in the first  or in the second loop  are considered 

  

fireasoning on interval and point  based disjunctive m etric constraints in temporal contexts

set of inconsistent label sets    r  r      r  r     r  r  r   
          r  r             r  r  r    

t 
          r  r  r   
         r  r  r   
         r  r  r    

t            r  r  r   
         r  r  r   
         r  r  r    

          r  r  r   
         r  r  r   
         r  r  r    

t 

t 

          r  r  r   
         r  r  r   
         r  r  r    

          r  r              r  r  r    

          r  r  r   
         r  r  r   
         r  r  r    

t 

         r  r  r   
         r  r  r   
        r  r  r    

          r  r   
         r  r  r    

t 
           r  r              r  r  r    

t 
t 

figure    the labeled minimal tcn of the example  
iii  derived constraints lc lk between any pair of nodes nl and nk   if nl and nk are previously
connected with ni and nj respectively  edge   of figure    
lets see the previous example   represented in figure   and figure    when the consistent
constraint  expression e   
 t            r  r  r             r  r    t   
is closured  in the first loop of the closure process  we have 
lc     lc    lc            r  r  r             r  r    lc lc     
            r  r               r  r       lc
           r  r  r             r  r    lc            r  r            r  r      
            r  r               r  r     lc
            r  r  r  r             r  r  r             r  r            r  r  r    
however    r  r      r  r     r  r  r     are i l sets  no labeled elemental constraints whose
associated label set is a superset of these i l sets will be derived  theorem     thus 
lc                r  r               r  r     lc           r  r  r             r  r     
            r  r  r             r  r  r              r  r  r    
similarly 
lc     lc    lc            r  r  r            r  r    lc lc     
            r  r  r               r  r  r              r  r  r   
lc     lc    lc            r  r  r             r  r    lc lc     
          r  r  r             r  r  r            r  r  r    
after the second and third loops  the final labeled tcn is obtained  figure     the final set of i lsets is   r  r      r  r     r  r  r      these sets represent all sets of mutually inconsistent inputelemental constraints that exist in the tcn of figure   
  

fibarber

    properties of reasoning algorithms
in this section  the main properties of the proposed reasoning algorithms are described 
theorem    the proposed updating and closure processes  sections     and      guarantee a
consistent tcn if they are applied on a previous minimal  and consistent  tcn 
proof  the updating constraint lcij is asserted in the tcn if it is consistent with the previous minimal
constraint lc ij  consistency test function  

theorem    the proposed closure algorithm obtains a path consistent tcn  if it is applied over a
previous minimal tcn 
proof  this was detailed by barber        for non disjunctive tcns and it is applied here to labeled
tcns  we have 
i 

no derived constraint can exist between a pair of nodes if no path between them combines
the asserted constraint lc ij  

ii 

the closure process computes a derived constraint between any pair of nodes  nl   nk   that
become connected by a path across the closured constraint lc ij   lets assume an existing path
between the nodes nx    ny  that includes lc ij  
nx    nx    nx              nx   nj lc ij nj    ny         ny    ny 
such that a derived constraint between nx  ny  should be computed  however  a minimal
constraint between  nx    ni   and between  nj   ny    should already exist in the previous minimal
tcn  in consequence  a derived constraint between  nx    ny    is computed in the third loop
of the process 

iii  if the previous tcn is minimal  all possible derived constraints that can exist between any
pair of nodes  nl  nk   are already computed in the constraint lclk derived between these nodes
in the proposed closure process  in the third loop  this process obtains 
lclk   lc lk  lc  lc li lc lc ij lc lc jk   
lets suppose there exists another path between  nl   nk   across the updated lc ij constraint   nl  
np   ni   nj   nq   nk    this path computes another derived constraint between  nl   nk   
lc  lk   lc lk lc  lc lp lc lc pi lc lc ij lc lc jq lc lc qk   
however  since the previous tcn is minimal  the previously existing minimal constraints
lc li and lc jk imply  lc lp lc lc pi   and  lc jq lc lc qk   respectively  that is  lc li lc lc lp lc lc pi   and
lc jk lc lc jq lc lc qk   thus  lc  lk is also implicitly implied by lclk  lclk lclc  lk    here  we have
assumed the associative property for lc  which is obvious from its definition 
iv  derived constraints obtained in the closure process do not need to be closured again if the
previous tcn is minimal  that is  no constraint in the tcn would become more restricted
if derived constraints were also closured  let suppose lc lk is modified in the third loop of
closure process 
lclk   lc lk  lc  lc li lc lc ij lc lc jk  
such that it should be propagated to the  nl   nk   np   subtcn  figure     thus  the following
derived constraints should be obtained 
  

fireasoning on interval and point  based disjunctive m etric constraints in temporal contexts

lclp   lc lp  lc  lclk lc lc kp  

lcpq   lc pq lc  lc pl lc lclk   

for constraint lclp   we have 
lclp   lc lp lc  lclk lc lc kp     lc lp lc   lc lk lc  lc li lc lc ij lc lc jk    lc lc kp   
however  since lc distributes over  lc 
lclp   lc lp  lc   lc lk lc lc kp    lc  lc li lc lc ij lc lc jk lc lc kp    
since the previous tcn is minimal  the minimal constraints lc pi and lc pj should previously
exist  such that lclp lc lc lk lc lc kp   and lc jp lc lc jk lc lc kp    thus 
lclp lc lc lp  lc  lc li lc lc ij lc lc jp   
however  in the third loop of the closure process  the following derived constraint is
computed 
lc  lp   lc lp lc  lc li lc lc ij lc lc jp   
thus  lclp is already represented in the obtained constraint lc  lp  that is  lc  lp lc lc lp    in a
similar way 
lc  pq   lc pq lc  lc pi lc lc ij lc lc jq  
is also obtained in the proposed closure process  such that lc  pq lc lc pq  
therefore  each derived constraint  any combinable path across lc ij   between any pair of nodes
in the tcn is computed  so that the closure process obtains a path consistent tcn  

np

lclp

lcpk

lclk

nl
lclj

lc ij

ni

nk
nj

lcjk

figure    lc lk is also propagated to lc lp and lc pq
theorem    the proposed reasoning processes obtain a minimal tcn  if the previous tcn is a
minimal tcn 
proof  montanari        shows that when composition distributes over intersection  i e   
distributes over    any path consistent tcn is also a minimal tcn   this is the case in nondisjunctive metric tcns  dechter et al          in our case  lc distributes over lc  theorem    and
the closure process obtains a path consistent tcn  theorem     therefore  the proposed reasoning
processes also obtain a minimal tcn  

  

fibarber

new input
constraint

initial
tcn
no nodes  no
constraints  no i l sets

input constraint
  ni lcij nj  
if  ni lcij nj   is consistent
reasoning process  updating   closure processes
consistency test  consistent tcn
closure process  path consistent tcn 
distributive property   lc over lc   minimal
new consistent and minimal tcn
new complete and sound set of i l sets

figure    an incremental reasoning process
theorem    at each updating process  reasoning algorithms obtain a complete and a sound new set
of i l sets  definition     if they are applied on a previous minimal tcn and a previous sound and
complete set of i l sets 
proof 
i  the new set of i l sets is complete  the consistency test of the updated constraint lc ij obtains
all possible new i l sets that can appear when lc ij is added to the tcn  except those i l sets
which are related to the mutual exclusion of the disjuncts in lc ij  which are determined in the
put label function  
a  no new i l sets can appear in which some label of lc ij does not participate  otherwise 
they would have been detected in a previous updating process  since the previous set of
i l sets is assumed complete  thus  some label of lcij should always participate in any
new i l set that appears when lcij is updated 
b  all new i l sets  in which some label of lcij participates  are detected in the consistency
test of lcij  let s assume that a new and undetected i l set exists  rk   r    r           rp   in
which some new elemental constraint eck rk lc ij takes part  thus  the elemental
constraints associated to  r    r           rp   compute a derived elemental constraint ecx
between the nodes ni and nj  
 ecx  r   r          rp  

 

 ecx  r   r          rp    lc  eck rk    

this elemental constraint ecx is already represented in the previously existing constraint lc ij

  

fireasoning on interval and point  based disjunctive m etric constraints in temporal contexts

between ni and nj since the previous tcn is minimal    thus  eck ecx   such that the i lset  rk   r    r           rp   is detected in the consistency test of lcij   in conclusion  all new
inconsistent sets of elemental constraints in which lc ij participates are detected and no other
new i l sets can exist  therefore  the new set of i l sets is complete if the previous set
of i l sets is complete 
ii  the new set of i l sets is sound  all new i l sets obtained represent inconsistent sets of
elemental constraints  this is trivial  given the consistency test function  
in conclusion  the proposed reasoning algorithms obtain a minimal  and consistent  tcn if they
are applied to a previous minimal tcn  figure     therefore  the reasoning algorithms guarantee
tcn consistency and obtain a minimal tcn and a complete and sound set of i l sets at each new
input assertion 
    global labeled consistency
in a minimal  binary  disjunctive network  every subnetwork of size two is globally consistent
 dechter         therefore  any local consistent instantiation of a subset of two variables can be
extended to a full consistent instantiation  however  to assure that a local consistent instantiation of
a subset of more that two variables is overall consistent  the partial instantiation should be propagated
on the whole tcn  van beek         thus  assembling a tcn solution can become a costly
propagation process in disjunctive tcns  even though a minimal tcn was used  the proposed
reasoning processes maintain a complete and sound set of i l sets  theorem     thus  we can deduce
if a locally consistent set of elemental constraints is overall consistent by means of label sets
associated to labeled elemental constraints and the set of i l sets  specifically  we can deduce
whether any locally consistent instantiation of k variables    k n  is overall consistent  lets see the
following example  which is based on a previous one proposed by dechter  meiri and pearl        
example     dave goes walking to work in          john goes to work either by car
          or by bus          fred goes to work either by car           
or in a carpool            or walking          today  they all left their
home between      and       at t   t  and t  time points   and arrived at
work at just the same time  t    before       
here  we have the following labeled disjunctive constraints where  t  represents the initial time
       and granularity is in minutes 
t    t          r    
t    t            r    

t     t          r    

t     t          r    

t    t            r           r    

t     t          r    

t    t            r           r           r    

the minimal tcn of example   is represented in figure     here  the binary constraints between
each time point and t  represent unary constraints and restrict interpretation domains for variables
 t    t    t    t     obviously  this minimal tcn is not a globally consistent tcn  for instance 

 

the elemental constraint ec x is already represented in an explicit way  or by means of another elemental constraint ecy
 ecy tec x   labely   r   r          rp   due to the simplification process performed in the operation lc   in both cases 
ec kec x   ec kecy   

  

fibarber

instantiations   t        t       t      are consistent with the existing constraints involved among  t   
t    t    t     but this partial solution cannot be extended to the overall tcn 

        

t 
         

          
        

t 
          

t 

                         

t 

          
                 

        

t 

         

figure     minimal tcn of example  
lets consider the tcn with labeled constraints  for reasons of simplicity  we only denote the
labeled constraints among  t    t    t    t    
 t          r  r           r  r           r  r    t     
 t          r  r           r  r  r            r  r  r           r  r  r    t     
 t           r  r  r            r  r           r  r  r           r  r  r           r  r  r    t     
 t             r  r             r  r    t     
 t             r  r             r  r           r  r    t     
 t            r  r  r              r  r  r            r  r  r             r  r  r             r  r  r            r  r  r    t    

the set of i l sets is   r  r     r  r     r  r     r  r     from this labeled tcn and the set of
i l sets  we can deduce that instantiations   t        t        t       are not overall consistent  these
instantiations are not locally consistent with the labeled constraints in the subtcn  t    t    t    t     all
label sets associated to possible simultaneous fulfillment of
 t          t       t          t     and  t          t    

are i l sets  that is  all label sets in the cartesian product
  r  r     r  r        r  r     r  r  r        r  r     r  r  r    

are i l sets  thus  the set of i l sets can be used to deduce consistency of a set of labeled elemental
constraints and to obtain a globally consistent labeled tcn 
theorem    lets assume a labeled tcn of n nodes  and the corresponding complete and sound set
of i l sets  and a local set of k   k  n     labeled elemental constraints in the tcn  each one of
which is between any pair of nodes 
 lec    lec          leck      ec    label       ec   label            ec k  labelk     

  

fireasoning on interval and point  based disjunctive m etric constraints in temporal contexts

the local set of labeled elemental constraints  lec    lec          leck  is overall consistent iff the setunion of their associated label sets  i   k  labeli    is not an i l set 
proof  the label set  i   k  labeli    is the support set of the simultaneous fulfillment of  lec    lec   
      leck    moreover  the set of i l sets is complete and sound with respect to overall tcn  theorem
    such that any label set not in the set of i l set is overall consistent  therefore  theorem    
 i   k  labeli    and  lec    lec          leck   are overall consistent iff i   k  labeli   is not an i l set  
definition    labeled consistency     lets assume a labeled tcn of n nodes  and the corresponding
complete set of i l sets  and a set of k   k n     constraints  each one of which is between any pair
of nodes in the tcn 
 c ij      in   jn  ij 
the set of constraints  c ij   is labeled consistent with respect to the nodes involved in these
constraints  iff 
i 

for each constraint cij   there exists an elemental labeled constraint elc ij x between  ni   nj   in
the tcn such that elc ij x satisfies cij   that is  cij   elc ij xlc ij   c ij  ecij x   

ii 

the resulting set of the union of label sets associated to these elemental labeled constraints
 which satisfy  c ij    is not an i l set  u cij label ij x  is not an i l set  note that this is the
condition of theorem    

theorem     lets assume a labeled tcn of n nodes  and the corresponding complete set of i lsets  and a set of k   k  n     constraints  each one of which is between any pair of nodes in the
tcn 
 c ij      in   jn  ij 
the set of constraints  c ij   is overall consistent iff  c ij   is labeled consistent with respect to the
nodes involved in constraints  c ij   
proof  the proof is trivial according to definition   and theorem    we have that the set of
constraints  c ij   is consistent iff there exists a local set of elemental constraints in the tcn  elc ij x 
that makes  c ij  labeled consistent  definition     thus  the local set  elc ij x  is consistent  theorem
    such that  c ij   is also consistent  
for instance  we can determine whether any pair of constraints c  ij and c kl can hold simultaneously
 that is  they are overall consistent  if 
elc ij xlc ij   c  ij  ecij x  elc kl yckl   c kl  eckl y   labelij x  labelkl y  
is not an i l set 
moreover  any local instantiation of any k      kn  variables  t   v    t   v         t k    v k     can
be extended to a global solution if 
elc    xlc      v ec   x          elc  k     ylc  k       v k   ec   x 
where lc i  is the constraint between ni and t    and  label   x  label   y         label k     y  is not
and i l set 
 

we need to introduce the concept of labeled consistency since it is a different concept from the consistency concept 

  

fibarber

for instance  in example   of figure     the partial instantiation   t        t        t       is
consistent  we have 
        r  r   lc             

        r  r  r   lc             

        r  r  r   lc             

and  r  r    r  r  r   r  r  r     r  r  r    is not an il set  thus  this partial solution can be
extended to a global solution  for instance    t        t        t        t        
therefore  a labeled tcn can be considered as a globally labeled consistent tcn  that is  on the
basis of the concepts introduced by dechter        
definition     local labeled consistency   a partial instantiation of variables   k n   t   v    t   v   
     tk  vk   is local labeled consistent if it is labeled consistent with respect to  t    t    t         tk   nodes 
this also holds for k n  
definition     global labeled consistency   a labeled sub tcn  with the global set of i l sets  is
global labeled consistent if any partial instantiation of variables in the sub tcn  which is local
labeled consistent  can be extended to the overall tcn  a globally labeled consistent tcn is one in
which all its sub tcns are globally labeled consistent  
theorem     at each new assertion  the proposed reasoning processes obtain a globally labeledconsistent tcn  if they are applied on a previous minimal tcn and a previous sound and complete
set of i l sets 
proof  the proof is trivial according to the previous definitions  definition   and definition    and
to the properties of the reasoning processes  theorem   and theorem     any partial instantiation
in any subtcn  which is labeled consistent with respect to the nodes involved in the partial
instantiation  is overall consistent  theorem      
similar expressions can be made for k labeled consistency and strong k labeled consistency on
the basis of the concepts provided by freuder         therefore  the set of i l sets in a labeled tcn
provides a useful way to assure whether a local instantiation of variables can be part of a global
solution  moreover  freuder        shows that in a strong k consistent tcn  consistent instantiations
of variables of any subnetwork of size k can be found in a backtrack free manner and in any variable
ordering  this is also a consequence of the decomposability  montanari        dechter et al        
or globally consistency  dechter        properties  obviously  this feature also holds for labeled
tcns 
    analysis of temporal complexity
lets analyze the computational cost of the proposed reasoning processes  these processes are 
basically  an incremental path consistent algorithm  barber         at each updating process of a
new input constraint on a tcn with n nodes  the computational cost of updating and closure
processes is bounded by  n   o lc    o lc     in the proposed reasoning process  the path consistent
algorithm obtains a minimal disjunctive metric tcn  this is possible due to the management of
labeled constraints  associated label sets  and i l sets  thus  the complexity of reasoning processes
is mainly due  instead of a complex closure process  to the management of complex data structures
 labeled constraints  associated label sets  and i l sets   that is  the complexity of the proposed

  

fireasoning on interval and point  based disjunctive m etric constraints in temporal contexts

reasoning processes is mainly due to the complexity of operations lc and  lc 
the computational cost of lc and  lc depends on the number of elemental constraints in labeled
constraints  the size of associated label sets  and the size of i l sets in the previous minimal labeled
tcn  let  n  be the number of nodes   l  the maximum number of disjuncts  or labels  in input
constraints  and  e  the number of updated input constraints in the previous tcn  the maximum
number of labels in the tcn is l e  since each disjunct in each updated input labeled constraint has
its own  unequivocal label  moreover  any i l set can have as maximum one label from each input
labeled constraint lc ij   since   i  elemental constraints in lc ij are pairwise disjoint  such that each pair
of labels in lc ij is added to the set of i l sets  and  ii  any superset of an existing i l set is also an
i l set  thus  the maximum number of labels in any i l set is e  furthermore  each label in an i lset should be from a different input labeled constraint  there are e input labeled constraints  and each
input labeled constraint has as maximum l labels  thus  the maximum number of i l sets of q length
  qe  is    qe   lq   
therefore  the number of i length   ie  i l sets is i   e    ei   li     o  e le   however  any
superset of an i l set is already known as inconsistent  such that supersets are not stored in the set
of i l sets  thus  the number of i l set is bounded by o le   additionally  we also have e   l    i lsets of   length  since the l disjuncts in each updated constraint are mutually exclusive among them 
similarly  the maximum number of associated label sets is also bounded by o le   each one with a
maximum of e labels  thus  the number of elemental constraints  or labeled subintervals  in any
labeled constraint is bound by o le   since each elemental constraint in a labeled constraint has its
own associated label set 
according to these parameters  the computational cost of each updating process is bounded by
o n  l e   the recovery process of constraints has a constant cost  since a minimal tcn is always
maintained  the computational cost of the proposed algorithms agreed with the computational cost
inherent to the problem of the management of disjunctive metric constraints  dechter         in fact 
the closure process could be considered as an integrated management of the le alternative nondisjunctive tcns in which a disjunctive tcn can be split  as it is shown by dechter  meiri and pearl
        it should be noted that l can be bounded in some typical problems like scheduling  where
usually l    garrido et al          or by restricting domain size  range or granularity  in metric
algebras  on the other hand  several improvements can be made on the described processes  for
example  an efficient management of label sets has a direct influence on the efficiency of the
reasoning processes  thus  each label set  for instance   r  r  r     can be considered as a
unidimensional array of bits  which is the binary representation of an integer number  for instance
                therefore  each associated label set is represented by a number and the set of i l sets
becomes a set of numbers  matching and set union processes on label sets in operations lc and lc
can be efficiently performed by means of operations on integer numbers with a constant cost 
therefore  the computational cost can be bounded by o n  l e  
other alternative implementations are under study  two different approaches exist for temporal
constraint management  brusoni et al         yampratoom  allen        barber         the first
approach is to maintain a closured tcn by recomputing the tcn at each new input constraint and
making the derived constraints explicit  here  queries are answered in constant time  although this
implies a high spatial cost  the second approach is to explicitly represent only input constraints  such
that the spatial requirements are minimum  however  further computation is needed at query time
and when consistency of each new input constraint is tested  the proposed reasoning methods hold
  

fibarber

in the first approach  which seems more appropriate for problems where queries on the tcn are more
usual tasks than updating processes 
in addition  the proposed reasoning algorithms obtain a sound and complete set of i l sets and
a globally labeled consistent tcn  regrettably  assembling a solution in a labeled tcn  although
backtrack free  is also costly due to the exponential number of i l sets  however  these features offer
the capability of representing and managing special types of non binary disjunctive constraints  later
detailed in section    
other reasoning algorithms for query processes on a non closured tcn  as well as csp
approaches can be defined on the basis of the labeled temporal algebra described  less expensive
algorithms can be applied on labeled constraints by using the specified operations lc  lc  lc and
lc  for instance  the tca algorithm as is applied by allen         and the k consistency algorithms
like those described in  cooper        freuder         moreover  a minimal tcn of labeled
constraints can be obtained without enforcing global consistency  for example  by applying the naive
backtracking algorithm described by dechter  meiri and pearl         which is o n  le  

   interval based constraints through labeled point based constraints
the integration of quantitative and qualitative information has been the goal of several temporal
models  as was described in section    when intervals are represented by means of their ending
points ii   ii    integration of constraints on intervals and points seems to require some kind of nonbinary constraints between time points  gerevini   schubert        schwalb   dechter       
drakengren   jonsson         in this section  the proposed temporal model is applied in order to
integrate interval and point based constraints  constraints on intervals are managed by means of
constraints on ending points of intervals and i l sets  likewise  metric information can also be added
to interval constraints such that an expressive way of integrating qualitative and quantitative
constraints is obtained 
    symbolic interval based constraints
symbolic constraints on intervals express the qualitative temporal relation between two intervals 
each symbolic constraint is a disjunctive subset of    elemental constraints  which are mutually
exclusive among them  allen         for example  the following constraint
i   ec     ec    i   

ec    ec   b  m  o  d  s  f  e  bi  mi  oi  di  si  fi  

really means  i     ec   ec      ec   ec      i    since ec   and ec   are mutually exclusive  and one and
only one elemental constraint should hold  for reasons of simplicity  we only consider two disjuncts
in the symbolic constraint  however  these expressions can be easily extended for managing from
  to    disjuncts  the above expression can be expressed as 
i     ec   ec      ec   ec      i  
i     ec   ec      ec    ec      ec   ec       ec   ec      i 
in this way  we have 

  

 e   

fireasoning on interval and point  based disjunctive m etric constraints in temporal contexts

i 

the constraints  i   ec   ec    i    and  i   ec   ec    i     can be expressed as disjunctive
metric constraints on the same pairs of time points 

ii 

the constraints  i   ec    ec    i    and  i   ec   ec    i    can be expressed as a mutual
exclusion among the associated labels of the above point based constraints  that is  as a set
of i l sets 

we present a simple example to illustrate these conclusions  for instance   i   before after  i   
can be expressed by means of constraints among the time points i     i     i    and i     as 
 i   b a  i      i          rb    i       i           ra    i     
thus  when intervals are represented by means of their ending points ii   ii    an interval based
constraint gives rise to disjunctive constraints between different pairs of time points  i e   non binary
constraints   these non binary constraints can be represented as i l sets  thus  according to the
above expression  e   
 i   b a  i     i   b  b  i      i   a  a  i      i   b  a  i      i   b  a  i    
we have 
i  before i   i          rb    i    
i  before i 
 i           rb    i    

i  after i   i           ra    i    
i  after i   i          ra    i    

therefore   i   b a  i     can be expressed as 
 i          rb         rb    i       i           ra        ra    i     
    i          rb    i       i           ra    i       
    i           rb    i       i          ra    i       
which is equivalent to  by using the labels associated to each elemental constraint  
 i          rb         rb    i       i           ra        ra    i    
and  rb  ra    rb  ra   are i l sets  such that one and only one disjunctive symbolic constraint
holds 
thus  symbolic constraints between intervals can be represented by means of   i  a set of
disjunctive metric constraints between time points  and  ii  a set of i l sets  in table    the
equivalent metric constraints between interval ending time points for each elemental interval based
constraint are detailed  according to this table  the following steps allow us to represent disjunctive
symbolic constraints between intervals by means of disjunctive metric constraints between interval
ending points and i l sets 
i 

each interval i i is represented by means of its ending points ii    ii   by default   i i          r   
ii    holds 

ii 

a symbolic constraint between two intervals  ii cij ij  is composed of a disjunctive set of
 from   to     elemental symbolic constraints cij   ecij k   b  m  o  d  s  f  e  bi  mi  oi  di 
si  fi  

iii  each elemental symbolic constraint ec b  m  o  d  s  f  e  bi  mi  oi  di  si  fi  is represented
  

fibarber

by a conjunctive set of disjunctive point based metric constraints  fourth column of table
    this conjunctive set of point based constraints expresses the fulfillment or nonfulfillment  ec  ec  of the elemental symbolic constraint ec 
iv  a disjunctive set cij   ecij k   of elemental symbolic constraints between ii and ij is represented
by 


a conjunctive set of disjunctive point based metric constraints between the time points
ii    ii    ij  and i j   this conjunctive set is composed by the constraints in the fourth column
of table   for each elemental constraint in  ecij k   



a set of i l sets that expresses the logical relation among elemental symbolic
constraints in  ec ij k    that is   one and only one elemental symbolic constraint in  ecij k 
should hold  
iv a  only one elemental constraint in  ecij k   should hold  this condition does not
need to be represented since the different sets of point based constraints that
correspond to fulfillment of different elemental symbolic constraints  second
column of table    are already mutually exclusive 
iv b 

one of the elemental symbolic constraints in  ecij k   should hold  let s be the
label sets  where each label set corresponds to the point based constraints which
are related to the non fulfillment of each elemental symbolic constraint in  ec ij k  
 third column of table     thus  the cartesian product among the label sets in s
is a set of i l sets 

for instance  i   b m s di  i  can be represented as 
 i           r    i       i            r    i     

i   b b  i    i          rb         rb    i     
i   m m  i    i            rm        rm         rm    i     
i   s s  i    i            rs        rs         rs    i       i          rs         rs    i     
i   di di  i   i   d d  i    i           rd        rd    i       i          rd         rd    i     

moreover  one of the symbolic constraints in  b  m  s  di  should hold  thus  according to point
iv b of the method   the cartesian product of the associated labels related to the non fulfillment of
each elemental symbolic constraints in  b  m  s  di   that is 
  rb    rm    rm    rs    rs    rs    rd    rd   

should be explicitly included in the set of i l sets 
by applying this method  qualitative interval based constraints can be fully integrated in the
proposed labeled point based constraints  in this case  the interpretation domain for time points  ii ii    can be restricted to only three values   d                          such that  l    therefore  the
computational cost of reasoning algorithms is bounded by o n     e  
to illustrate the proposed method  lets show a typical example on symbolic interval based
constraints  figure    a   which was given by allen         this example shows how interval based
constraints can be represented and managed by means of disjunctive metric point based constraints
and a minimal ia tcn can be obtained 
  

fireasoning on interval and point  based disjunctive m etric constraints in temporal contexts

ii ecij k ij

ii ecij k ij

ii  ecij k ij

ii  ecij k  ec
 ij k  ij

ii before ij

ii         rb    ij  

ii          rb    ij  

ii         rb         rb    ij  

ii meets ij

ii          rm    ij  

ii         rm         rm    ij  

ii          rm        rm         rm    ij  

ii during ij

ii          rd    ij  

 ii         rd    ij   

ii          rd        rd    ij  

ii         rd    ij  
ii starts ij

ii          rf    ij  
 

ii        rf    ij

 




ii         rd         rd    ij  
ii          rs        rs         rs    ij ii         rs         rs    ij  

 ii          rs    ij   

 ii         rf         rf    ij   

ii          rf        rf         rf    ij  

 ii       rf    ij  
 

ii          rf         rf    ij  

 

 ii         ro    ij   

 
ii overlaps ij ii        ro    ij

ii equal ij

 ii          rd    ij   

 ii         rs         rs    ij   

ii          rs    ij ii         rs    ij  

ii finishes ij



ii          ro        ro    ij  

ii         ro    ij  



 ii          ro    ij   

ii         ro         ro    ij  

ii         ro    ij  



 ii          ro    ij   

ii         ro         ro    ij  

ii          re    ij  

 ii         re         re    ij   

ii         re         re         re    ij  

ii          re    ij  

  ii         re         re    ij   

ii         re         re         re    ij  

table    interval based constraints and their equivalent disjunctive metric constraints between
interval ending points  cells in the second and fourth columns are a conjunctive set of constraints 

symbolic
constraint
 ia  d di  ib 



 ib  d di  ic 



 id  m s  ia 



 id  o  ib 



 id  m s  ic 



disjunctive metric constraint between i  i 

inconsistent label sets

ia          r        r    ibia         r         r    ib 
ib         r        r    ia ib         r         r    ia  

 r  r     r  r   
 r  r     r  r   

ib         r        r     icib         r          r     ic 
ic         r         r     ibic         r          r     ib 
 
id        r         r          r     ia id         r         r          r     ia id        r          r     ia  
id         r    ibid        r    ib 
id        r    ibid         r         r         r     icid         r         r          r     icid        r          r     ic 

 r   r      r   r    
 r   r      r   r    
 r   r      r   r      r   r    
 r   r      r   r      r   r    

 r   r      r   r      r   r    
 r   r      r   r      r   r    

table    symbolic constraints in figure    a by means of disjunctive metric
constraints between i   i 

  

fibarber

figure    a represents a path consistent ia tcn  which has inconsistent values in constraints
 allen         in table    we have the interval based symbolic constraints for this example  the
corresponding disjunctive metric constraints between their ending time  points  ii    ii    and the
corresponding set of i l sets  according to table     moreover  we also have 
 ia        r   ia      ib       r   ib     ic       r   ic    and  id        r   id   

when all these metric constraints among the ending time points of intervals are updated according
the proposed methods in section    the labeled minimal tcn in table   is obtained  the associated
labels to each elemental constraint  disjunct  in constraints are not included for reasons of brevity 

d

d
 s m 
a

 s m 

 o 

 d  di 

a

b

 d di 

 d  oi  f  e  fi 
si  s  o   di 

 o 

 d  di 

b

 d di 

 s m 

 s m 
 d  di  s  si  e 

c

a  path consistent ia tcn

c

b  minimal ia tcn

figure     path consistent and equivalent minimal ia tcn

ia 
ia 

ia 

ib 

       

      
      
      

ia 

      

ib 

               
     

ib 

      

      
      

ib 

      

       
     

       
     
       

      

      

ic 

id 

id 

                                      
      

                       
      
     
      
     
                               
     
      

ic                                
     
ic
                             
      
     
     
id                               
      
id 

ic 

      

       
     

      

       

                       
      

      
      

      

       
      

      

       
     

       
      
       

      

table    the minimal metric point based tcn of the ia tcn in figure    a
  

fireasoning on interval and point  based disjunctive m etric constraints in temporal contexts

allen        remarks that the symbolic constraint  ia  f fi  ic  cannot hold given the existing
constraints between ia  ib  ic and id  in the labeled point based tcn   ia  f fi  ic  is represented
by a set of constraints among ending points of ia and ic  moreover  the labels associated to each
labeled elemental constraint allow us to determine whether a set of elemental constraints between
different pairs of time points can be part of a global solution  theorem      thus  we can deduce
whether  ia  f fi  ic  can hold in the point based tcn 
the existing constraints between the ending time points of ic and ia  with their associated labelsets are 
ic        r   r   r   r   r   r   r   r   r   r   r   r   r   r   
      r   r   r   r   r   r   r  r   r   r   r  r  r  r  r   
     r   r   r   r   r   r   r   r   r   r   r  r  r  r  r    ia 
ic 

      r   r   r   r   r   r   r  r   r   r   r  r  r  r  r   
       r   r   r   r   r   r   r   r   r   r   r   r   r   r   
      r   r   r   r   r   r   r   r   r   r   r  r  r  r  r    ia 

let s ask for each disjunct in  ia  f fi  ic  
i  the constraint  ia  f  ic  implies  ic          ia     ic          ia    according to
theorem     these constraints hold iff the set union of the label sets associated to  ic       
ia   and to  ic        ia   is not an i l set  we have two possibilities 
i     r   r   r   r   r   r   r      r   r   r   r   r   r   r   r   r   r   r  r  r  r  r     
 r  r  r  r  r   r   r   r   r   r   r   r   r   r   r   r   r     or
i   

 r   r   r   r   r   r   r      r   r   r   r   r   r   r   r   r   r   r  r  r  r  r     
 r   r   r   r   r   r   r   r   r   r   r   r   r  r  r  r  r    

however  both label sets  i    i    are i l sets  for instance   r   r     and  r   r     are i lsets  table    and they are subsets of i   and i    respectively  thus   ia  f  ic  does not hold 
ii  the constraint  ia  fi  ic  implies  ic          ia     ic          ia    similarly 
ii     r   r   r   r   r   r   r      r   r   r   r   r   r   r  r   r   r   r  r  r  r  r     
 r   r   r   r  r   r   r   r   r   r   r   r   r  r  r  r  r    

this label set is an i l set  for instance   r   r     is an i l set  also 
ii     r   r   r   r   r   r   r      r   r   r   r   r   r   r  r   r   r   r  r  r  r  r     
 r  r  r  r  r   r   r   r   r   r   r   r   r  r   r   r   r    

both these label sets  ii    ii    are also i l sets  for instance   r    r    and  r   r     are i lsets  thus   ia  fi  ic  does not hold either 
in conclusion  the symbolic constraint  ia  f fi  ic  cannot hold on the globally labeled consistent
point based tcn  this conclusion could be also obtained from a minimal ia tcn  figure    b  
additionally  we have that  ia  f fi  ic  implies  ia        ic    that is  if the constraint  ia       
ic   holds  we have that the associated constraints to the label sets  r   r   r   r   r   r   r    or
 r   r   r   r   r   r   r    should also hold  each one of these label sets implies  ic           ia   
that is   ia        ic     ic          ia    thus  the only way that  ia        ic   can hold is if  ia
 e  ic  holds  these relations will be detailed in section   
  

fibarber

    metric constraints on intervals
metric constraints between intervals can also be managed in the described temporal model  from a
general point of view  metric information can be added to each elemental interval based constraint
in a standard way  table     these metric constraints on interval boundaries  table    are similar to
the ones proposed by staab and hahn        
ia symbolic
elemental
constraints

ia metric elemental constraints
cij    dm  dm      dm  dm            dmn dmn   
c ij    dm   dm      dm   dm            dm n dmn   
ii

ii before ij

ii  before cij   ij

ii meets ij

ii  meets c ij   ij

ii during ij

ii  cij during c ij   ij

ii starts ij

ii  starts c ij   ij

ii finishes ij

ii  finishes cij   i j

c

ij

ij

ii
cij

ij

ii

c  ij

c
ij

ij
ii
c
ij

ij
ii

c
ij

ij
ii

ii overlaps ij

ii  overlaps cij   ij

cij

ij

ii

ii equal ij

ii  cij equal c ij   ij

c
ij

c 

ij

ij

table    metric interval constraints on interval boundaries
obviously  the metric constraints of table   can be managed in the proposed model  by means
of metric constraints on interval ending points  thus  symbolic constraints of interval algebra can
be extended in this way to metric domain  however  since each interval is represented by means of
its ending time points  more flexible metric constraints on intervals can be represented by means of
metric constraints on their ending time points  in this way  the described model also subsumes the
interval distance sub algebra model proposed by badaloni and berati         moreover  ending
points of intervals can also be related to the initial time point t    and unary metric constraints on
interval durations can be expressed by means of metric constraints between the two ending points of
each interval 
dur  ii       dm  dm      dm  dm            dmn dmn    
 ii     dm  dm      dm  dm            dmn dmn    ii    

  

fireasoning on interval and point  based disjunctive m etric constraints in temporal contexts

 

  i   

 

  i   

  
  

t 

i 

i  

 

 

  
i 
 

  

 

                      

figure     metric constraints between intervals
thus  following constraints  figure     
 i   b  o  i     i   is                    before i      i   is                        after t   
can be represented as  table    
by default   i           r    i      i          r    i     and
 i   b  o  i  



 i         rb         rb    i    

 i          ro        ro    i    

 i         ro         ro    i    

 i         ro         ro    i    



 i   is                    at the left of i   
 i   is                        after t   



 i            r           r    i    
 t             r             r    i     

and  rb  ro      rb  ro      rb  ro      r  r    and  r  r    are i l sets 

   reasoning on logical expressions of constraints
in the described model  each disjunct in an input constraint is univocally associated to a label 
moreover  the label set associated to each derived elemental constraint represents the support set of
input elemental constraints from which the elemental constraint is derived  i l sets represent
inconsistent sets of input elemental constraints  by reasoning on labeled disjunctive constraints 
associated label lists and i l sets  the temporal model offers the capability of reasoning on logical
expressions of elemental constraints belonging to disjunctive constraints between different pairs of
time points  let s assume the following labeled input constraints 
 ni lc ij nj     ni   lecij     rij     lecij      rij          lecij p    rij p   nj   
 nk lc kl nl     nk   leckl      rkl     leckl      rkl          leckll q    rkl q   nl  
i  to represent that two elemental constraints    elc ij x lc ij   elckl ylc kl   cannot hold simultaneously
 that is  elc ij x  elc kl y    the label set  rij x rkl y   should be added to the set of i l sets 
ii  to represent a logical dependency between two elemental constraints  such as  if lec ij x then
leckl y   where lecij xcij   leckl yckl    the cartesian product  rij x     rkl     rkl            rkl q   rkl y    should be added to the set of i l sets 
iii  to represent that two elemental constraints  elc ij xlcij   elckl y lc kl   should hold simultaneously
 bi directional logical dependency   the cartesian products  rij x     rkl     rkl            rkl q   

for reasons of simplicity  only two elemental constraints are shown  however  more than two disjunctions can be managed
in a similar way  likewise  these features can be also applied to labeled derived constraints 

  

fibarber

 rkl y    and  rkl y      rij     rij            rij p    rij x   should be added to the set of i l sets 
for instance  lets see the example   of section      figure     
 to represent that john goes to work by car and fred goes to work walking is not possible 
 r  r    should be asserted as an i l set 
 to represent that if john goes to work by car then fred goes to work walking   r  r    and
 r  r    should be asserted as i l sets 
 to represent that if john goes to work by car then fred goes to work walking  and vice versa 
 r  r      r  r    and  r  r    should be asserted as i l sets 
in a similar way  logical relations among point based and interval based elemental constraints can
also be represented  for instance  the logical dependence  the duration of i  is       if i  is before i 
and the duration of i   is         if i  is after i   can be represented as 
 i   b  bi  i    

 i          rb         rb     i     
 rb   rb     is an i l set 

 i          rb          rb     i     

 i            r            r    i     
and  r  rb       r  rb    are i l sets  since rb   is associated to i  is after i   and rb  is associated
to i  is before i    likewise   i  starts at the same time as i   if t  occurs after t   can be represented
as  see table    
i   s  s  i    i            rs        rs         rs    i        i          rs         rs    i      
 t           r           r         r    t    
and  r  rs      r  rs     and  r  rs    are i l sets  since r  is associated to  t  occurs after t    and rs   
rs  and rs  are associated to  i  does not start at the same time as i    
    disjunctions of point and interval based constraints
disjunctions of constraints between different pairs of points and intervals can be represented in the
proposed model by means of labeled constraints between points and a set of i l sets  this subsumes
the related expressiveness in the subset of disjunctive linear constraints proposed by stergiou and
koubarakis         where only disjunctions of constraints between different pairs of points are
managed 
to represent a disjunctive set of disjunctive constraints between points  we have   
 ni lc ij nj     nk lc kl nl   can be represented as   ni  lc ij lc ij   nj     nk  lc kl lc kl   nl   
and some logical relation among lc ij   lc ij   lc kl and lc kl  thus  the disjunctive set of constraints 
  ni lc ij nj     nk lc kl nl    
  ni   lecij     rij      lecij    rij            lecij p   rij p   nj   
 nk   leckl     rkl      leckl     rkl            leckj q   rkl q   nl   
 

for reasons of simplicity  only two constraints are shown  however  more than two disjunctive constraints can be managed
in a similar way 

  

fireasoning on interval and point  based disjunctive m etric constraints in temporal contexts

can be represented as 
i  a conjunctive set of constraints between  ni   nj   and between  nk   nl    where   lecx  can be
represented by means of the complementary domain of  lecx  
 ni   lecij     rij      lecij     rij            lecij p   rij p     lecij     rij      lecij     rij            lecij p   rij p    nj   
 nk   leckl     rkl      leckl     rkl           leckj q   rkl q     leckl     rkl      leckl     rkl           leckj q   rkl q    nl  
  ni   lecij     rij      lecij     rij           lecij p   rij p    lecij     r ij      lecij     r ij           lecij p  r ij p   nj   
 nk   leckl    rkl      leckl     rkl          leckj q   rkl q    leckl     r kl      leckl    r kl            leckl q   r kl q    nl   
ii  a set of i l sets to represent the mutually exclusive disjunction of lc ij and lc kl  they cannot
simultaneously hold  
ii a  one of the constraints lc ij or lc kl should hold  the cartesian product of label sets from
complementary domains of lc ij and lc kl    r ij     r ij           r ij p   r kl     r kl           r kl q   
are i l sets 
ii b  only one of the constraints lc ij or lc kl should hold  the cartesian product of label sets
from lc ij and lc kl    rij     rij           rij p   rkl     rkl           rkl q   are i l sets 
thus  disjunctive and conjunctive sets of disjunctive constraints between points can be represented
and managed by means of a conjunctive set of disjunctive constraints and a set of i l sets  for
example 
 ti         r            r    tj     tk         r            r    tl   
 ti         r            r         r           r         r    tj   
 tk         r            r         r           r         r     tl   
and
 ii a  since  ti         r             r    tj   or  tk         r             r    tl   should hold 
 r  r  r    r  r  r     are i l sets 
 ii b  since only one constraint  t i        r            r    tj   or  tk         r           r    tl   should
hold 
 r  r    r  r       r  r      r  r      r  r      r  r    are i l sets 
ii  ecij ij

ii ecij ij

ii ecij ij

i  before i 

i        rb    i 

i  before i 

i          rb    i   

 

 

ii  ecij   ecij  ij
 

i        rb         rb    i   

i           rb    i   

i          rb         rb    i   

 

i         rb    i 

 

table    point based constraints for  i  before i    and  i  before i    
similarly  disjunctions of interval based constraints between different pairs of intervals can also
be represented  for instance  from table   and table      i  before i      i  before i    can be
represented as 
 i          rb         rb    i       i          rb         rb    i     

  

fibarber

and
a 

one of the constraints  i  before i   or  i  before i    should hold  thus  the cartesian product
of label sets associated to the disjunctive constraints in  ii ecij ij   is a set of i l sets   rb   
rb    is an i l set 

b 

only one of the constraints  i  before i    or  i  before i    should hold  thus  the label set
associated to the mutual fulfillment of constraints in  ii ecij ij   is an i l set   rb    rb    is an
i l set 

thus 
  i  before i      i  before i     
 i          rb         rb    i       i          rb         rb    i     
and  rb    rb      rb    rb    are i l sets 
ii ecij ij

ii ecij ij

ii  ecij ij

ii  ecij   ecij  ij

 i  during i   

i           rd    i   

 i          rd    i    

i           rd        rd    i   

i          rd    i   
 i  starts i   

i           rs    i  i          rs    i   



 i           rd    i    

i          rd         rd    i   

 i          rs         rs    i     i           rs        rs         rs    i  

 i           rs    i    

i          rs         rs    i   

table    point based constraints for  i  during i    and  i  starts i   
in a similar way  table      i  during i      i  starts i     
 i           rd        rd    i     

 i          rd         rd    i     

 i            rs        rs         rs    i       i          rs         rs    i     
and  rd  rd  rs  rs    and the cartesian product  rd  rd    x  rs  rs  rs    are i l sets 
therefore  logical relations on elemental constraints can be represented by a set of i l sets  thus 
a labeled tcn  and the set of i l sets  can represent a special type of and or tcn  these types of
non binary constraints enrich the expressiveness of language and allow for the modeling of more
complex problems  meiri         stergiou and koubarakis        and jonsson and bckstrm       
show that disjunctions of linear constraints  dlr  are also able to represent these non binary
constraints  however  pujari and sattar        remark that general methods from linear programming
should then be applied for dlr management  such that specific temporal concepts  like the ones
detailed in section    are not considered in these general methods  in the proposed model 
management of these non binary constraints are performed by the proposed reasoning methods
without increasing their computational complexity  the added functionality is of interest in several
temporal reasoning problems  including planning  scheduling and temporal constraint databases
 barber et al         gerevini   schubert        brusoni et al         stergiou   koubarakis       
etc   where no general solutions are provided in the specific temporal reasoning area 
in addition  the proposed reasoning algorithms obtain a globally labeled consistent tcn
 theorem      this feature allows us to manage hypothetical queries  which is an important
requirement in query processes on temporal constraint databases  brusoni et al          thus  queries
  

fireasoning on interval and point  based disjunctive m etric constraints in temporal contexts

such as does c ij hold  if c kl  can be answered without any tcn propagation  the label set associated
to each derived elemental constraint represents the set of input elemental constraints that should hold
for the fulfillment of this elemental constraint  therefore 
 xk c kl xl  xi c ij xj  
holds  if elc kl y lc kl   eckl yc kl then elc ij xlc ij   ec ij xc ij and labels elc ij x labels elc kl y   hold 
for example  from the labeled minimal tcn in figure    we have 
 t            t      t            t    

 t              t      t              t    

however   t            t    does not imply  t            t     similarly  questions such as can
c ij hold  if c kl  can also be easily answered by applying theorem   and theorem    

   alternative temporal contexts
when we reason on temporal facts  we can simultaneously work on different alternative temporal
contexts  situations  trends  plans  intentions or possible worlds  dousson et al         garcia  
laborie         this is usual in a branching  backward or forward  model of time  here  we can have
alternative past contexts  i e   different lines about how facts may have occurred  or alternative future
contexts  i e   different lines about how facts may occur   thus  temporal context management is also
required in hypothetical or causal reasoning  also  having different contexts permits a partition of
the whole tcn in a set of independent chains in order to decrease the complexity problem size
 gerevini   schubert         in this section  we do not deal with hypothetical reasoning issues  our
goal is temporal management of context dependent constraints  thus  in general  a hierarchy of
alternative temporal contexts can be established  such that constraints can be associated to different
temporal contexts  for instance  figure    represents a hierarchy of alternative contexts  where w 
represents the root context and there are different disjunctive constraints between  n    n    in each
context  temporal reasoning algorithms detailed in this paper are able to manage these contextdependent constraints 
 input disjunctive constraints are asserted in different temporal contexts  to do this  the labels
associated to input elemental constraints can also be used to represent the context in which the
disjunctive is asserted  for instance  figure      if the constraint 
 n           r               r    n   
is asserted in context w    we have the following input context dependent labeled constraint 
 n           r   w               r   w    n    
here  each context dependent label set associated to each elemental constraint represents both
the alternative temporal disjunct  i e   r  or r    and the context in which the elemental
constraint is asserted  w    
 label sets associated to context dependent derived elemental constraints will represent the
temporal contexts in which derived elemental constraints hold 
definition    a context dependent disjunctive constraint is a disjunctive constraint where each
elemental constraint  i e   disjunct  is associated to an alternative temporal context  the universal
labeled constraint is       w  r     where w  is the root context  
  

fibarber

the proposed reasoning processes can manage context dependent disjunctive constraints in a way
similar to previously defined labeled disjunctive constraints  section     for instance  according to
the constraints and contexts in figure     the following input labeled constraints between nodes n 
n  should be updated 
 n            r  w               r  w    n    

 n           r  w               r  w    n    

 n             r  w                 r  w    n    

 n           r  w               r  w    n    

 n            r  w     n    

 n             r  w                r   w     n    

 n           r  w                r  w     n    

 n              r  w     n    

more restricted constraints
context w  

n           n  

context w 

n                       n  
context w  

n                        n  

context w 

n                       n  

n                        n  

root context w 

context w  

n           n  
context w 

n                      n  

context w  

n             n

 

context w  

n             n

 

assertion in context k

downward propagation 
propagation to contextk
and its successor contexts

upward consistency 
consistency in contextk
and its predecessor contexts

figure     a hierarchy of alternative contexts
the updating process of each new constraint cij in a given context wp should assure the
consistency of c ij in the context wp   as well as in its predecessor contexts  figure      the consistency
of cij with the successor contexts of wp will be detailed in section      since several options can be
identified  however  it is not necessary to assure consistency among constraints belonging to contexts
of different hierarchies  successor contexts of a given context represent different alternatives  which
are mutually exclusive  thus  constraints belonging to contexts of different hierarchies can be
mutually inconsistent  however  this does not imply that constraints in these contexts should
necessarily be mutually disjoint  for instance  figure      the constraints  n           r  w        
     r  w    n    in context w  and  n           r  w               r  w    n    in context w  are not
mutually disjoint  however  w    w  and w  are assumed as three mutually exclusive alternatives of
w   
  

fireasoning on interval and point  based disjunctive m etric constraints in temporal contexts

the closure process of each new constraint cij in context wp should downward propagate the new
constraint cij to all its successor contexts  figure      moreover  no propagation should be performed
to the predecessor contexts of contextk   nor among contexts of different hierarchies  elemental
constraints belonging to contexts of different hierarchies cannot be simultaneously considered  that
is  combined or intersected 
    context dependent updating and closure processes
the update and closure processes defined in section   should be adapted in order to manage contextdependent disjunctive constraints  the context update process  figure     asserts the constraint
cij  ec    ec        ecn   in the context contextk  in a way similar to the updated process described in
section    context update should be performed each time a new context dependent constraint is
asserted 
context update  ni cij nj contextk 
lc ij  put label context  cij   contextk  
 labelling and mutual inconsistency 
if consistency test  get upward  ni   nj   contextk    lc ij  
 upwards consistency test
then   inconsistent constraint  
return  false 
else   consistent constraint  
 lc ij is asserted in the contextk and in all its
lc ij   lc ij   get  ni   nj   contextk    lc  lc ij  lc lc ij   
 successor contexts 
lc ji  inverselc  lc ij   
context closure  ni lc ij nj contextk  
 downwards closure algorithm in contextk 
 
return  true 
end if
end context update
figure     context update process for context dependent labeled constraints
where 
 put label context  cij   contextk   associates an exclusive label set to each elemental constraint
ecij p cij   this label set has two labels  rij p contextk    in this label set  the first label is the
label associated to each temporal disjunct  in a way similar to put labels function  these labels
are mutually exclusive  definition     the second label represents the context in which cij is
updated  moreover  each pair of labels associated to successor contexts of the parent context
of contextk is added to the i l sets  since all the successor contexts of a given context are
mutually exclusive 
contextp   contextp succesor contexts parent context contextk    
i l sets  i l sets    contextk   contextp    
where parent context contextk   and successor contexts contextk   return the parent context
and the set of successor contexts of contextk   respectively  thus  in figure       w    w    
 w    w      w    w      w     w       w     w       w     w       w     w      are i l sets 
  

fibarber

 get  ni   nj   contextk   returns the set of labeled elemental constraints between ni and nj in the
contextk  and in all its successor contexts   that is 
get  ni   nj   contextk        ecij p  labelij p   lc ij   contextk  labelij p    
note that get ni   nj  contextk   is a subset of lc ij   thus   lc ij   get  ni   nj   context k    means the setdifference between lc ij and get  ni   nj   contextk    that is  the set of elemental constraints in the
context dependent constraint lc ij   which are not in contextk   nor in any of its successor contexts 


get upward  ni  nj   contextk    similarly to the previous get function  it returns the existing
constraints between ni and nj in the contextk  and in all its successor contexts   however  if
there is no constraint between ni and nj in the contextk   then the function returns the
constraints between ni and nj that exist in the predecesor context of contextk 
get upward  ni  nj   contextk      
if get  ni   nj   contextk     then return  get  ni   nj   contextk   
else
contextk  parent context  contextk  
until get  ni   nj   contextk      contextk  w  do
if get  ni   nj   contextk     then return  get  ni   nj   contextk   
else return         w  r    
end get upward

the context dependent closure  figure     process is similar to the closure process described in
section   and it is also performed at each updating process  the closure process of each updated
constraint in contextk is downwards performed in contextk and in all its successor contexts 

context closure  ni lc ij nj contextk 
   first loop  closure n i  n j  n k   
nk tcn   lc jk   u r  w    
lc ik  lc ik lc  lc ij lc lc jk   
lc ik   lc ik   get  ni   nk   contextk    lc lcij  
lc ki  inverse lc ik 
   second loop  closure n j  ni  nl   
nl tcn   lc il   u r  w    
lc jl  lc jl lc  inverse lc ij   lc lc il   
lc jl   lc jl   get  nj   nl   contextk    lc lc jl  
lc lj  inverse lc jl  
   third loop  closure nl  ni  nj  nk   
nl   nk tcn   lc lj   u r  w     lc jk   u r  w    
lc lk  lc lk lc  lc li lc lc ij lc lc jk  
lc lk   lc lk   get  nl   nk   contextk    lc lc lk  
lc kl  inverse lc lk 
end context closure
figure     context closure process for context dependent labeled constraints
  

fireasoning on interval and point  based disjunctive m etric constraints in temporal contexts

the resulting label set associated to each context dependent derived elemental constraint represents
the contexts where the elemental constraint holds  as well as the hierarchy of predecessor contexts
of the elemental constraint  for instance  figure    shows the contextual labeling for the example in
figure     moreover  after successively performing the updating and closure processes for all
constraints in this example  we have the following constraint between nodes n  and n   
 n  lc    n      n            r  w               r  w            r  r  w  w               r  r  w  w   
 e  
          r  r  w  w               r  r  w  w            r  r  w  w               r  r  w  w   
        r  r  r  w   w  w             r  r  r  w   w  w               r   r  r  w   w  w   
        r  r  r  w   w  w              r  r  r  w   w  w              r  r  r  w   w  w    n   

 w  

 w  w  

 w  w  w   

 w  w  

 w  w  

 w  w  w   

 w  w   w    

 w  w  w   

 w  w   w   

figure     labels in contexts
no closure process is performed among constraints belonging to contexts of different hierarchies 
according to put label context function  each pair of labels related to the successor contexts of each
context is an i l set  thus  these i l sets prevent deriving elemental constraints from contexts of
different hierarchies  that is  each derived elemental constraint obtained  combining or intersecting 
from two elemental constraints in contexts of different hierarchy will have an inconsistent associated
label set  therefore  these derived elemental constraints will be rejected in the operation lc  for
instance  in the example of figure       w    w      w    w      w    w      w     w       w     w     
 w     w       w     w      are i l sets  thus  if a constraint is asserted in context w   
i  no propagation is performed using constraints in contexts w   and w   simultaneously 
since  w     w     is an i l set 
ii  no propagation is performed in context w    nor in w    nor in their successors  since  w   
w    and  w  w    are i l sets 
let s see an example of the context update and context closure processes  lets assume that the
context dependent constraints in figure    are already updated and closured  such that the previous
constraint lc     expression e   exists between n  and n    now  we update  n            n    in context
w    the call to consistency test function in the context update function is 
consistency test  get upward  n    n    w               r  w     
given the previous constraint lc    between n  and n   expression e    the function performs 
         r  r  w  w               r  r  w  w            r  r  r  w   w  w   
  

fibarber

         r  r  r  w   w  w               r   r  r  w   w  w     lc          r  w    
          r  r  r  w  w             r  r  r  w   w  w             r  r  r  r  w   w  w     
thus  the new constraint  n            n    is consistent in context w    therefore  the constraint
between n  n  results 
lc     lc      get  n     n     w      lc  lc    lc          r  w      
         r  w               r  w             r  r  w  w              r  r  w  w   
       r  r  w  w              r  r  w  w           r  r  r  w   w  w   
          r  r  r  w   w  w              r  r  r  w   w  w    lc
         r  r  w  w            r  r  r  w  w            r  r  r  w   w  w            r  r  r  r  w   w  w    
         r  w               r  w             r  r  w  w              r  r  w  w           r  r  w  w   

 e  

          r  r  w  w           r  r  r  w   w  w              r  r  r  w   w  w              r  r  r  w   w  w   
        r  r  w  w            r  r  r  w   w  w            r  r  r  r  w   w  w    

note that the new updated constraint is asserted in context w  and propagated to all its successor
contexts  w   and w      however  the new constraint in context w  does not affect the existing
constraints in predecessor contexts of w   w   nor the constraints belonging to contexts of different
hierarchies  w    w  and their successors  
in this update process  no closure process is performed  since no node is related with n  or n   
now  lets update  n            n    in context w    we have 
consistency test  get upward  n    n    w               r  w     
that performs 
        w  r    lc           r  w                r  w  w      
since no previous constraint exists between  n  n    in context w    the constraint  n            n    is
consistent  and asserted in the tcn 
lc             w  r             r  w  w    
 e  
afterwards  this constraint is closured  the call to context closure process is 
context closure  n            w  r             r  w  w     n    w    
in this closure process  only the first loop is performed since no node is related to n    moreover 
only the previous constraint lc     expression e   exists in the current tcn between n  and n    thus 
the first loop performs 
lc     lc    lc          w  r             r  w  w    lc lc       
      w  r     lc          w  r             r  w  w    lc lc       
        w  r               r  r  w  w             r  r  w  w   
         r  r  r  w   w  w             r  r  r  r  w   w  w    
such that 
lc      lc      get  n    n    w     lc lc             w  r          lc lc     
      w  r               r  r  w  w             r  r  w  w   
         r  r  r  w   w  w             r  r  r  r  w   w  w    
  

 e  

fireasoning on interval and point  based disjunctive m etric constraints in temporal contexts

thus  the asserted constraint between  n    n    in context w  is closured in the context w  and in
all its successor contexts  w   and w      likewise  the closure process does not perform any
propagation simultaneously using constraints of the contexts w   and w      nor any of the context w   
w    nor any of their successors 
    complete versus incomplete partition of contexts
in each updating process  the consistency of each new constraint lcij in a given context is assured in
this context and in all its parent contexts  lets deal with consistency issues between a context and
its successor contexts  here  we have that constraints in a given context wi can be either completely
covered or only partially covered by the existing constraints in the successor contexts of wi   that is 
the successor contexts of wi can be either a complete partition or only a partial partition of wi  
for instance  let s assert the constraint  n              r  w    n    in the context w  of the example
in figure     in the consistency test function  we have  where the constraint lc    is the previous
expression e   
get upward  n     n     w     lc            r  w     
        r  r  w  w              r  r  w  w           r  r  r  w   w  w            r  r  r  w   w  w   
          r   r  r  w   w  w    lc            r  w                 r  w  r  r  w    

that is  the asserted constraint is consistent with the existing constraints in context w    however 
no resulting elemental constraint is associated to context w   nor w     this means that the asserted
constraint  n              r  w    n    is consistent in w    but is inconsistent in w   and in w     here 
two alternatives appear 
i  to assume that existing successor contexts are a complete partition of their parent context 
therefore  a new constraint cij in a context wi should be rejected  if cij is inconsistent in all
successor contexts of wi  for instance  we can assume that w   and w   in figure    are a
complete partition of w    thus   n              r  w    n    should be rejected 
ii  to assume that successor contexts are not a complete partition of their parent context  therefore 
successor contexts become inconsistent and they should be removed  in the example  we can
assume that contexts w   and w   are not a complete partition of the context w    such that
another possible new successor context of w   would be able to match in the future the asserted
constraint  n              r  w    n     in this case  the constraint  n              r  w    n    is
assumed to be correct  such that it can be asserted in the tcn  therefore  the contexts w   and
w   become inconsistent   w     and  w     should be added to the set of i l sets  such that
these contexts  and all their successor contexts and all their constraints  become inconsistent and
removed from the tcn  that is  all elemental constraints with an associated label set containing
 w     or  w     should be removed 
in both cases  each context will always be consistent with all its successor contexts  the option
to be adopted can depend on the problem type to solve  garrido et al          any of the these options
can be easily introduced in the described reasoning processes  since the function consistency test
can determine which successor contexts  ws   become inconsistent at each new constraint  lcij   in
a context  wk   
  

fibarber

ws successor contexts wk     elc ij p get upward  ni   nj   wk    ws labelij p   
elc ij r get upward  ni   nj   wk   lc lcij    ws labelij r  
on the other hand  when   i  the successor contexts  wk    wk         wkp   of a context wk are a
complete partition of it  and  ii  all constraints in  wk    wk         wkp   have been asserted  then
constraints in wk can be restricted according to the final existing constraints in  w k    wk         wkp   
to do this  the context wk should be constrained by the temporal union of the constraints in all its
successor contexts 
    a minimal and consistent context dependent tcn
definition    a context dependent tcn is minimal  and consistent  if the constraints in each context
are consistent  with respect to constraints in this context  in all its predecessor contexts  and all its
successor contexts  and minimal  with respect to constraints in this context and in all its predecessor
contexts   
theorem     at each updating process  the context dependent reasoning processes obtain a minimal
 and consistent  context dependent tcn if the previous context dependent tcn is minimal 
proof  if the previous context dependent tcn is minimal  the consistency test function guarantees
the consistency of each new context dependent input constraint 
i 

in its context and in all its parent contexts  get upward function and theorem    

ii 

in all its successor contexts  depending of the two identified cases in section      

the closure process of a new constraint in a given context  wk   propagates its effects to this
context and to all its successor contexts  therefore  theorem     the process obtains the new minimal
constraints in this context  wk   and in all its successor contexts  
moreover  the obtained context dependent tcn is globally labeled consistent  thus  we can
deduce whether a set of elemental constraints  between different pairs of time points  is consistent
 theorem      that is  this set of elemental constraints holds in some context  for instance  given the
previous constraints lc      lc    and lc     previous expressions e   e  and e    we can deduce that 
 n            n      n            n      n            n   
is full consistent since 
elc    xlc      elc    y lc      elc    zlc        label   x    label   x    label   x   is not an i l set 
specifically  these instantiations hold in  r  r  w  w    and  r  r  w     thus  this set of
elemental constraints holds in context w   and  obviously  in all its predecessor contexts  
likewise  from a minimal context dependent tcn  the user can retrieve the constraints that hold
in each context or the constraints that simultaneously hold in a set of given contexts  to do this  the
context constraints function retrieves the constraints that hold between a pair of nodes  ni   nj   in a
given context  contextk    that is  the result of get upwards ni   nj   contextk   except those elemental
constraints belonging to successor contexts of contextk  

  

fireasoning on interval and point  based disjunctive m etric constraints in temporal contexts

context constraints  ni  nj  contextk      get upwards  ni   nj   contextk   
 lecij p lc ij   contextqsuccesor contexts contextk     contextq   labelij p    
for instance  given the context dependent constraint lc    in figure     expression e    the
following constraint would hold between  n    n    in both contexts w  and w   
context constraints n     n     w    lc context constraint n     n     w      
        r  r  w  w              r  r  w  w    lc         r  r  w  w              r  r  w  w    
        r  r  r  w  w  w      

in addition  we can obtain the constraints  which simultaneously hold in a context and in any of
its successor ones  for instance  in context w  and in any of its successor contexts  w     w     the
following constraint holds 
context constrains n    n    w   lc  context constraints n   n     w     lc context constraints n     n    w      
        r  r  w  w              r  r  w  w    lc
        r  r  r  w   w  w   lc           r  r  r  w   w  w              r   r  r  w   w  w    
           w   r   r  r  w  w           w   r  r  r  w  w            w   r  r  r  w  w    

on the other hand  each alternative context  wi   can be associated to an alternative hypothesis
 hi    each hypothesis hi gives rise to a set of constraints  which will be asserted in the associated
context wi   thus  the proposed reasoning processes assure minimal constraints in the hierarchy of
hypotheses  moreover  if a hypothesis  hi   becomes unavailable  then the label set  wi   should be
added to the set of i l sets  thus  all constraints in context wi  and in all its successor contexts  will
be removed  that is  all constraints that depend on the unavailable hypothesis hi will be removed 
    computational complexity of temporal context management
the management of temporal context does not increase the complexity of the reasoning processes
detailed in section    in fact  we can consider that each label associated to a disjunct  ri   in labeled
disjunctive constraints is also associated to a context  wi    thus  the computational cost of each
updating process is also bounded by o n  l e   where  l  is the maximum number of input disjuncts
between any pair of nodes in all contexts 
the temporal labeled algebra proposed in this paper  section    has been applied on the pointbased disjunctive metric constraints  dechter  meiri   pearl         however  this labeled algebra
can also be applied on other temporal constraints  in this case  the operations  lc   lc  lc and  lc
should be specified  section    on the basis of the operations     t and t of the underlying
algebra  in this way  the management of temporal contexts can also be applied to other types of
constraints 
theorem     the computational complexity of the proposed reasoning process applied to contextdependent non disjunctive metric constraints is polynomial  o n  w    in the number w of managed
contexts 
 

however  note that this is an impossible situation  since w   and w   are mutually exclusive contexts  that is   w    w   
is an i l set 

  

fibarber

proof  disjunctions in constraints are only related to the contexts in which input constraints are
asserted  if non disjunctive constraints are managed  that is  constraints between each pair of nodes
are in the form 
 ni   ec ij    w  r       ec ij    w  r                ecij k  wk r      nj    

 kw   w   wi   

thus  the maximum number of disjuncts in constraints is bounded by the maximum number of
managed contexts w  moreover  the maximum length of associated label sets is the maximum depth
in the hierarchy of contexts  and the set of i l sets has only   length sets  i e   pairs of labels
associated to each pair of successor contexts of each context   therefore  the computational cost of
operations lc and  lc is bounded by o w     
the methods proposed in section     for management of temporal contexts can also be applied
to other temporal reasoning algorithms  instead of the reasoning methods detailed in section    this
requires that these other reasoning algorithms be based on the operations of composition and
intersection of temporal constraints  thus 
i  each elemental constraint should only be associated to the context  w i   in which it is asserted   
thus  label sets associated to elemental constraints have only one contextual label  wi   
ii  the methods for management of temporal contexts described in section     should be
integrated into the new reasoning algorithms  these algorithms should use the operations 
lc  lc  get and get upwards  the computational cost of operations  lc and lc related to
management of temporal contexts is polynomial  o w     in the number  w  of managed
contexts  therefore  the computational cost of the reasoning algorithms is increased by a factor
w  when temporal contexts are managed 
for instance  when interval based constraints are managed  the tca algorithm can be used to
obtain a path consistent context dependent ia tcn  with a o n  w    cost  similarly  when a contextdependent reasoning is applied to pidn networks  pujari   sattar         the computational cost of
specific reasoning algorithms on pidn constraints is increased by a factor w    when the proposed
temporal algebra in section   is applied to tractable classes of constraints  the specific reasoning
algorithms for management of these classes of constraints can also be applied  the computational
cost of these reasoning algorithms  which should be based on combination and intersection
operations on constraints  is increased by a polynomial factor w    for instance  when nondisjunctive metric constraints are managed  the tca algorithm can be used as the closure algorithm
in section      this algorithm will obtain a minimal context dependent tcn with a computational
cost o n   w    

   conclusions
several problems remain pending in representation and reasoning problems on temporal constraints 
in relation to this  we have dealt with reasoning on complex qualitative and quantitative constraints
between time points and intervals  which can be organized in a hierarchy of alternative temporal
 

that is  there are not labels  ri  associated to disjunctions in disjunctive constraints  thus  definition   is not applied in
the put label context function  therefore  the distributive property for lc over lc does not hold for disjunctive
constraints  however  this is not relevant since other reasoning processes will be applied 

  

fireasoning on interval and point  based disjunctive m etric constraints in temporal contexts

contexts  we have described a new labeled temporal algebra  whose main elements are labeled
disjunctive metric constraints  label sets associated to elemental constraints  and sets of inconsistent
elemental constraints  i l sets   the temporal model presented is able to integrate qualitative and
metric constraints on time points and intervals  in fact  symbolic and metric constraint between
intervals can be represented by means of disjunctive metric constraints between time points and a set
of i l sets  the model is also able to manage  non binary  logical relations among elemental
constraints  the reasoning algorithms on the described model are based on the distributive property
for composition over intersection in labeled constraints  and guarantee consistency and obtain a
minimal tcn of disjunctive metric point based constraints  in addition  a special type of global
labeled consistent tcn is also obtained 
labeled constraints can be organized in a hierarchy of alternative temporal contexts  such that
temporal reasoning processes can be performed on these contexts  reasoning algorithms guarantee
consistency in each hierarchy of contexts  maintain a minimal context dependent tcn  and allow us
to determine what constraints hold in each context or in a set of alternative contexts  thus  we can
reason on a hierarchy of context dependent constraints on intervals  points and unary durations
 figure     
these described features are useful functionalities for modeling important problems in the
temporal reasoning area  however  they have not been identified in previous models  therefore  the
temporal model presented here represents a flexible framework for reasoning on complex  contextdependent  metric and qualitative constraints on time points  intervals and unary durations 
dur i                          

i   b  i  
t                        i   

context w    
 

i    b d m  i  
dur i                        

i                          i   
dur i                        

context w  

context w    
t                        i    
i                         i    
root context w  

t                        i
i    d m   i  
context w  

 

i   d  i  
t             i   
context w    
dur i         
i     m   i 
context w    

figure     context dependent constraints on intervals  time points and unary durations
a path consistent algorithm can be used as the closure process on labeled tcns  like the typical
tca algorithm as applied by allen         this path consistent algorithm would obtain a minimal
context dependent tcn of disjunctive metric constraints  we have proposed an incremental
reasoning process  thus  a minimal  and consistent  context dependent tcn is assured at each new
assertion  this incremental reasoning allows us to detect whether each new input constraint is
inconsistent with the previously existing ones  this can be useful when problem constraints are not

  

fibarber

initially known but are successively deduced from an incremental independent process  garrido et
al         
a prototype of proposed reasoning algorithms has been implemented in common lisp and is
available from the author  these reasoning algorithms are being applied to an integrated architecture
of planning and scheduling processes  garrido et al          here  the scheduling process should
guarantee the consistency of each alternative partial plan  i e   temporal constraints and availability
of resources for operations  simultaneously as the planner is generating each partial plan  srivastava
  kambhampati         thus  the following main features are needed 
 management of disjunctive metric constraints  particularly  in planning and scheduling
problems the number disjuncts in input constraints is generally bounded by l   i e   nonsimultaneous use of resources   however  temporal dependencies between constraints  i e  
non binary constraints  can appear  for instance  operation durations can be dependent on the
order in which they are scheduled 
 incremental reasoning  the process should interactively guarantee the consistency of each new
input temporal constraint  about resources  plans  ordering  and objects  as each new step is
deduced in a partial plan 
 management of temporal contexts  where each context is associated to an alternative plan
 action or state   reasoning algorithms simultaneously work over different and alternative
partial plans 
a globally labeled consistent  and minimal  tcn allows us to determine consistent alternative
choices and to obtain optimal solutions in each plan  additionally  the proposed model can be a
useful framework to apply on problems where these features also appear  dousson et al        
garcia   laborie        srivastava   kambhampati        etc   
the computational cost of reasoning algorithms is exponential  due to the inherent complexity of
the management of disjunctive constraints  however  the management of temporal contexts does not
increase the complexity of the reasoning processes on disjunctive constraints 
some improvements to decrease the empirical cost of reasoning algorithms have been proposed
in this paper  the application of algorithms to handle only an explicit tcn  without making the
derived constraints explicit  and empirical evaluations on several test cases are under study 
moreover  other reasoning algorithms can be applied to the temporal algebra presented  as proposed
in section    on the other hand  it is interesting to identify subclasses of the labeled temporal algebra
where the size of label sets can be bounded  and to identify tractable subclasses of ia on the proposed
model  it could also be interesting to identify the expressive power of i l sets  and labeled
constraints  on the basis of method described by jeavons  cohen and cooper         here  each i lset represents a special derived constraint  which expresses the inconsistency of a set of input
elemental constraints  that is  a special type of disjunctive linear constraint  jonsson   bckstrm 
      stergiou   koubarakis        
the proposed labeled algebra  labeled constraints and the operations on them  can be applied to
other temporal models  i e   to other classes of temporal constraints  operations  and reasoning
algorithms   to do this  the operations of the labeled algebra  lc  lc  lc and lc  should be defined
on the basis of the respective operations       and   of these models  and the reasoning
algorithms should use the operations defined on labeled constraints   lc  lc  lc and lc   this
  

fireasoning on interval and point  based disjunctive m etric constraints in temporal contexts

requires that these reasoning algorithms be based on the composition and intersection operations 
specifically  the application of the proposed model to tractable temporal constraints  as those
identified in section    jonsson et al         drakengren   jonsson        vilain  kautz and van
beek        etc    allows for a tractable reasoning process on a hierarchy of temporal constraint
contexts 

acknowledgements
this work was partially supported by the generalitat valenciana  research project  gv         
and by the spanish government  research project  cycit tap           the author would
sincerely like to thank the jair reviewers for their helpful comments and suggestions on previous
versions of this paper 

references
allen  j          maintaining knowledge about temporal intervals  comm of the acm                 
badaloni  s     berati  m          hybrid temporal reasoning for planning and scheduling  in
proceedings of the   int  workshop on temporal representation and reasoning  time    
barber  f          a metric time point and duration based temporal model  acm sigart bulletin 
             
barber  f   botti  v   onaindia  e     crespo  a          temporal reasoning in reakt  an
environment for real time knowledge based systems  aicommunications                 
brusoni  v   console  l     terenziani  p          later  managing temporal information efficiently 
ieee expert                
cohen  d   jeavons  p     koubarakis  m          tractable disjunctive constraints  in proceedings 
of the  rd int  conf  on principles and practice of constraint programming  cp     freuder 
e c   ed    lecture notes in computer science                
cooper  m c          an optimal k consistency algorithm  artificial intelligence            
dean  t l     mcdermott  d v          temporal data base management  artificial intelligence     
     
dechter  r   meiri  i     pearl  j          temporal constraint networks  artificial intelligence     
      
dechter  r          from local to global consistency  artificial intelligence             
dousson  c   gaborit  p     ghallab m          situation recognition  representation and
algorithms  in proceedings of   th international joint conference on artificial intelligence
 ijcai    
drakengren  t     jonsson  p          eight maximal tractable subclasses of allen s algebra with
metric time  journal of a i  research           
  

fibarber

freuder  e  c          synthesizing constraint expressions  comm  of the acm                   
freuder  e  c          a sufficient condition for backtrack free search  journal of the acm         
      
garcia  f     laborie  p          hierarchisation of the seach space in temporal planning  new
directions in ai planning           ios press 
garrido  a   marzal  e   sebasti  l     barber f          a model for planning and scheduling
integration  in proceedings of the   th  conference of spanish association of a i 
 caepia    
gerevini  a     schubert  l          efficient algorithms for qualitative reasoning about time 
artificial intelligence              
jeavons  p   cohen  d     cooper m          constraints  consistency and closure  artificial
intelligence               
jeavons  p   cohen  d   gyssens  m          how to determine the expressive power of constraints 
constraints  an int  journal             
jonsson  p     bckstrm  c          a linear programming approach to temporal reasoning  in
proceedings of the    th  national conference on artificial intelligence  aaai    aaai
press 
jonsson  p     bckstrm  c          a unifying approach to temporal constraint reasoning  artificial
intelligence               
jonsson  p   drakengren  t     bckstrm  c          computational complexity of relating time
points and intervals  artificial intelligence               
kautz  h     ladkin  p          integrating metric and qualitative temporal reasoning  in proceedings
of the  th  national conference on artificial intelligence  aaai    aaai press 
mackworth  a  k          consistency in networks of relations  artificial intelligence              
meiri  i          combining qualitative and quantitative constraints in temporal reasoning  artificial
intelligence              
montanari  u          networks of constraints  fundamental properties and applications to picture
processing  information science            
navarrete  i     marin  r          qualitative temporal reasoning with points and durations  in
proceedings of the    th  international joint conference on artificial intelligence  ijcai     
nebel  b     burckert  h j          reasoning about temporal relations  a maximal tractable subclass
of allen s interval algebra  journal of the acm                
pujari  a     sattar  a          a new framework for reasoning about points   intervals and
durations  in proceedings on the int  joint conference on artificial intelligence  ijcai     
schwalb  e     dechter  r          processing disjunctions in temporal constraints networks 
artificial intelligence            
  

fireasoning on interval and point  based disjunctive m etric constraints in temporal contexts

staab  s     hahn  u          distance constraint arrays  a model for reasoning on intervals with
qualitative and quantitative distances  in proceedings of the   th biennial conference of the
canadian society for computational studies of intelligence on advances in artificial
intelligence  ai      lecture notes in artificial intelligence                
srivastava  b     kambhampati  s          efficient planning through separate resource scheduling 
in proceedings of the aaai spring symp  on search strategy under uncertainty and incomplete
information  aaai press 
stergiou  k     koubarakis  m          tractable disjunctions of linear constraints  in proceedings
of the  nd int  conf  on principles and practice of constraints programming  cp    
freuder  e c   ed    lecture notes in computer science                
stergiou  k     koubarakis  m          bactracking algorithms for disjunctions of temporal
constraints  in proceedings of the    th  national conference on artificial intelligence  aaai     aaai press 
van beek  p         temporal query processing with indefinite information  artificial intelligence
in medicine                 
van beek  p     detcher r          on the minimality and global consistency of row convex
networks  journal of the acm                  
van beek  p     dechter  r          constraint tightness and looseness versus local and global
consistency  journal of the acm                  
vilain  m   kautz  h     van beek p          constraint propagation algorithm for temporal
reasoning  in proceedings of the  th  national conference on artificial intelligence  aaai    aaai press 
wetprasit  r   sattar a          temporal representation with qualitative and quantitative information
about points and durations  in proceedings of the    th  national conference on artificial
intelligence  aaai     aaai press 
yampratoom  e     allen  j          performance of temporal reasoning systems  acm sigart
bulletin                

  

fi