journal of artificial intelligence research                

submitted        published     

mechanisms for multi unit auctions
shahar dobzinski

shahar cs cornell edu

computer science department  cornell university
ithaca  ny      

noam nisan

noam cs huji ac il

the school of computer science and engineering
the hebrew university of jerusalem
jerusalem  israel

abstract
we present an incentive compatible polynomial time approximation scheme for multiunit auctions with general k minded player valuations  the mechanism fully optimizes over
an appropriately chosen sub range of possible allocations and then uses vcg payments
over this sub range  we show that obtaining a fully polynomial time incentive compatible
approximation scheme  at least using vcg payments  is np hard  for the case of valuations
given by black boxes  we give a polynomial time incentive compatible   approximation
mechanism and show that no better is possible  at least using vcg payments 

   introduction
in algorithmic mechanism design our goal is to construct efficient mechanisms that will
handle the selfish behavior of the players  in particular  we are interested in designing
truthful mechanisms  that is  mechanisms in which the dominant strategy of each player is
to simply reveal his true valuation 
typical problems in the field involve allocating goods to players  one key problem is
the problem of multi unit auctions  here we are given m identical items and n bidders 
in our setting we view the number of items m as large and desire mechanisms whose
computational complexity is polynomial in the number of bits needed to represent m  every
bidder i has a valuation function vi            m      where vi  q  denotes his value for
obtaining q items  we assume that vi is weakly monotone increasing  free disposal   and
normalized  vi           our goal is the usual one of maximizing the social welfare i vi  qi  
where i qi  m 
in the general case  each vi is represented by m real numbers  and in abstract settings
may be accessed as a black box  in a concrete setting  we will assume that vi is represented
as a k minded bid  i e  given by a list   q    p           qk   pk    where vi  q    max j qj q  pj  
this corresponds to a xor bidding language  nisan         observe that a k minded
valuation corresponds to a step function with at most k steps  step i is located at qi and
has height pi    in general  k can be as large as m  and the case k     is the single minded
case 
this problem has received much attention  starting from vickreys seminal paper       
that described a truthful mechanism for the case of downward sloping valuations in which
the items can be optimally allocated greedily  the general case  however  is np hard  as the
single minded case is just a re formulation of the knapsack problem  luckily  the knapsack
c
    
ai access foundation  all rights reserved 

fidobzinski   nisan

problem has a fully polynomial time approximation scheme  i e  can be approximated to
within a factor of      in time polynomial in n  log m       and it is not hard to see that
the algorithm directly extends to the general case of multi unit auctions 
    vcg based mechanisms
the key positive technique of mechanism design is the vcg payment scheme  in this
payment scheme each bidder i pays hi  vi    j  i vj  a   where a is the algorithmic output 
and hi is some arbitrary function that does not depend on vi   unfortunately  while vcg
works perfectly well from a game theoretic perspective  it is not so useful in computational
settings  since in multi unit auctions  and in most interesting combinatorial optimization
problems  calculating the exact optimum is intractable 
one naive idea is to use an approximation algorithm to find an approximate solution
a  and then let each bidder i pay hi  vi    j  i vj  a   applying this idea to the case of
multi unit auction is tempting in particular in light of the known        approximation
algorithm for this problem  unfortunately  it turns out that in general using an approximation algorithm together with vcg payments does not result in a truthful mechanism 
this phenomenon was studied by nisan and ronen         it was observed there that the
following family of allocation algorithms do yield truthful vcg based mechanisms 
definition  an allocation algorithm  that produces an output a  a for each input
v         vn   where a is the set of possible alternatives  is called maximal in range  henceforth mir  if it completely optimizes the social welfare over some subrange r  a  i e  
for some r  a  we have that for all v         vn   a  arg maxar i vi  a  
i e   mir algorithms use the following natural and simple strategy to find an approximately
optimal solution  they just optimally search within a pre specified sub range of feasible
solutions  a subrange over which optimal search is algorithmically feasible 
the main result of nisan and ronen        states that this is essentially it  no other
vcg based mechanisms are incentive compatible 
theorem  nisan   ronen         the allocation algorithm of any incentive compatible
vcg based mechanism for combinatorial auctions is equivalent to a maximal in range algorithm 
equivalent here means that the social utilities are identical for all inputs  i e  if a and b
are the outputs of the two allocation algorithms for input v            vn then i vi  a    i vi  b  
in particular  the outputs must coincide generically  except perhaps in case of ties  nisan
and ronen        prove this for two specific types of mechanism design problems  but the
result is more general  dobzinski   nisan        
following nisan and ronen         dobzinski and nisan        view this result as
a negative one  namely  they show that in the setting of combinatorial auctions with
submodular bidders  mir algorithms do not have much power  this might imply that in
the above setting truthful deterministic mechanisms do not have much power  since lavi
et al         give a partial evidence that all truthful mechanisms that provide a good
approximation ratio must be mir 
  

fimechanisms for multi unit auctions

in contrast  this paper views this result as a positive result  we observe that mir
algorithms provide us with a constructive way of obtaining truthful mechanisms    indeed 
this paper suggests that there are some settings where the power of mir algorithms is not
trivial at all  we note that several previous papers already obtained upper bounds using
mir techniques  holzman  kfir dahav  monderer    tennenholtz        dobzinski  nisan 
  schapira        blumrosen   dobzinski         yet  this paper initiates the systematic
study of mir algorithms  in particular  the techniques used are more sophisticated then
those obtained in previous work 
    previous work and our results
for the case of multi unit auctions with single minded bidders  the paper by briest  krysta 
and vocking        presents a truthful fully polynomial time approximation scheme  fptas   improving upon a previous result of mualem and nisan         the only result
known for k minded bidders is a randomized     approximation mechanism that is truthful in expectation  lavi   swamy         the current paper presents a polynomial time
approximation scheme  ptas  for the general case 
theorem  for every fixed       there exists a truthful       approximation mechanism
for multi unit auctions with k minded bidders whose running time is polynomial in n  log m 
and k  the dependence of the running time on  is exponential 
however  we prove two ways in which the mechanism can not be improved upon  first 
we show that the dependence on  cannot be made polynomial without destroying the
truthfulness  as long as mir techniques are used  in contrast  from a pure algorithmic point
of view it is possible to obtain a fully polynomial time approximation scheme    furthermore 
there exists a truthful fptas if all bidders are known to be single minded  briest et al  
      
theorem  no fully polynomial time truthful approximation mechanism that uses vcg
payments exists  unless p np 
then we show that the dependence on k is necessary  and that no approximation scheme
is possible in a general black box model  this is shown in a general communication model 
and even for two bidders 
theorem  every approximation mechanism among two bidders with general valuations
that uses vcg payments requires exponentially many queries to obtain an approximation
factor that is better than     
we do present a truthful approximation mechanism in the general black box model that
does obtain a factor of      this improves upon the randomized one of lavi and swamy
       that is only truthful in expectation 
   note that the payments of an efficient mir mechanism can be computed efficiently  take the output
allocation and pay each bidder the sum of the values of the other bidders in the output allocation 
   of course  ignoring computational issues  the standard vcg mechanism is mir and provides an approximation ratio of   

  

fidobzinski   nisan

theorem  there exists a truthful     approximation mechanism for multi unit auctions
among general valuations whose running time is polynomial in n and log m  the access to
bidders valuations is through value queries  what is vi  q      the mechanism uses vcg
payments 
in section   we present a fairly general construction that takes any  approximation mir
 
algorithm a for t bidders  for some      and converts it into an    t  
  approximation
algorithm for n bidders  in time polynomial in n  log m  and the running time of a  the
construction works as long as the model allows us to answer value queries  we present
four applications of the construction  the first two applications provide another proof of the
upper bounds discussed above  the ptas for k minded bidders  and the     approximation for
the black box model   then we present two new applications  a ptas for stronger bidding
languages  such as the one used by kothari et al          and a          approximation
mechanism for multi unit auctions with subadditive valuations  prior to our paper  nothing
was known about the latter setting 
the construction provides us with an interesting example of a truthful reduction among
problems  any mir approximation algorithm for a fixed number of bidders can be automatically translated into a truthful approximation algorithm for any number of bidders  while
losing only a small factor in the approximation ratio 
    discussion and open questions
the main open problem remains to determine the best approximation ratio that can be obtained in a truthful way  the only general method known for constructing such mechanisms
is vcg  and our lower bounds state that vcg cannot take us any further  furthermore 
lavi et al         show that for   bidders in the black box model  if all items are allocated 
then mir algorithms are the only truthful way to obtain a reasonable approximation ratio 
combined with our lower bounds  we get that no better than     truthful approximation is
possible in polynomial time  for   bidders and if all items are allocated  an intriguing
open question is to understand whether the condition that all items are allocated is indeed
necessary 
another issue that the paper highlights is the inherent difference between obtaining
approximation algorithms in single parameter environments and multi parameter environments  in a single parameter environment the private information of each bidder consists of
only one number  while in multi parameter environments the private information consists
of more than one number  recall that in the single parameter variant of multi unit auctions  where we assume that all bidders are single minded  there exists a truthful fptas
 briest et al          however  the variants we discuss in this paper are multi parameter 
and indeed our lower bounds suggest that obtaining fptas is impossible  if one can prove
that all mechanisms that give a good approximation ratio must be mir  
paper organization
in section   we present the ptas for k minded bidders  and the     approximation in the
black box model  section   considers lower bounds for mir algorithms in both models 
   this is yet another improvement upon the mechanism of lavi and swamy        which requires the
stronger demand queries 

  

fimechanisms for multi unit auctions

in section   we describe a general construction  and its algorithmic applications  truthful
mechanisms for other models and more powerful bidding languages 

   preliminaries
in this section we provide the basic definitions and notations used in this paper 
    the setting
in a multi unit auction there is a set of m identical items  and a set n                  n 
of bidders  each bidder i has a valuation function vi    m   r    which is normalized
 vi          and non decreasing  denote by v the set of possible valuations  an allocation
of the items  s    s            sn   to n is a vector of non negative integers with i si  m 
denote the set of allocations by s  the goal is to find an allocation that maximizes the
welfare  i vi  si   
we consider two settings that differ in how the valuations are given to us  in the concrete
setting  a bidding language model  we will assume that vi is represented as a k minded
bid  i e  given by a list   q    p           qk   pk    where vi  q    max j qj q  pj  
otherwise  the valuations are given to us as black boxes  for algorithms  the black
box v will only answer the weak value queries  given s  what is the value of v s   for the
impossibility result  we assume that the black box v can answer any query that is based
on v  the communication model   our algorithms run in time poly n  log m   while our
impossibility result gives a lower bound on the number of bits transferred  and holds even
if the mechanism is computationally unbounded 
    truthfulness
a deterministic n bidder mechanism for multi unit auctions is a pair  f  p  where f   v n  s
and p    p         pn    where pi   v n  r 
definition     let  f  p  be a deterministic mechanism   f  p  is truthful if for all i  all
vi   vi  and all vi we have that vi  f  vi   vi  i    pi  vi   vi    vi  f  vi    vi  i    p vi    vi   
definition     f is an affine maximizer if there exist a set of allocations r  a constant
i    for i  n   and a constant  s    for each  s  s  such that f  v         vn   
arg max s  s       sn  r  i  i vi  si      s    f is called maximal in range  mir  if i    
for i  n   and s     for each  s  r 
the following proposition is standard 
proposition     let f be an affine maximizer  in particular  maximal in range   there
are payments p such that  f  p  is a truthful mechanism 

   the basic mechanisms
this section provides the basic mechanisms for multi unit auctions  a ptas for k minded
bidders  and a    approximation for the black box model 
  

fidobzinski   nisan

    a truthful ptas for k minded bidders
we design an mir algorithm for this problem  which directly yields an incentive compatible
vcg based mechanism  we define a range r of allocations  and prove that if all bidders
are k minded then the algorithm outputs in polynomial time the best allocation in r  we
start with defining the subrange r 
definition     we say that an allocation  s         sn   is t round if there exists a set t of
bidders   t    t  such that the following two conditions hold 
 let l   jt sj  
j
k
ml
 for each bidder i 
  t   si is a multiple of max   nt 
     
 
k
j
ml
       n  t   items are assigned to bidders outside t   it
 at most max   nt 
 
  si 
j
k
ml
max   nt 
       n  t  
 
we let r be the set of all t round allocations for some fixed t  that will depend only on
the approximation guarantee   next we prove that the value of the best allocation in r is
close to the optimum 
lemma     let  a         an   be an optimal t round allocation  and  o         on   an optimal
 
unrestricted allocation  then i vi  ai        t  
 i vi  oi   
proof 
let us start with an optimal unrestricted allocation  o         on    and use it to
construct a t round allocation with high value  assume that all items are allocated in the
optimal allocation  without loss of generality due to the monotonicity of the valuations   and
that v   o          vn  on    let t            t  be the set of t bidders required in definition
     and assign each bidder i  t a bundle of size oi   as in definition      let l   jt oj  
let j 
  t be the bidder who got the largest number of items oj  ml
  for each i 
  t 
j
knt
ml
i    j  round up each oi to the nearest multiple of b   max   nt        and assign this
many items to bidder i  assign bidder
jkno items  this is a valid t round allocation since if
j
ml
b      we added at most  n  t    nt    ml
nt items by rounding up  but deleted at least
ml
nt

items by removing oj   notice that the second condition also holds  if b      observe
that even the optimal allocation is t round  as for the value of the solution  observe that
vi  oi  
each bidder i    j gets a bundle no smaller than oi   in addition  vj  oj    it  
  which
gives the required approximation 
our mir approximation algorithm will try each subset of at most t bidders to be the
set t of bidders  for each possible selection of t   the algorithm will consider all possible
allocations to bidders in t according to the k bids each bidder submitted  that is  we
will consider the allocation that assigns each bidder i  t exactly si items  if and only if
it si  m  and for each si there is a bid  si   pi   in the k bids of bidder i  for some pi      
for each selection of t and allocation to the bidders in t according to their bids  the
algorithm splits the remaining m  l items into at most  n  t   equi sized bundles of size
  

fimechanisms for multi unit auctions

k
j
ml
      where l is the total number of items that bidders in t get  the maximalmax   nt 
 
in range algorithm will optimally allocate these equi size bundles among the bidders that
are not in t   finally  the algorithm outputs the best allocation among all allocations
considered  all that is left is to show the following two lemmas 
lemma     for every fixed t the above algorithm runs in time polynomial in n and log m 
proof 
there are at most nt possible selections of sets t   for each selection of t
there are at most k t allocations to bidders in t that are considered  finding the optimal
allocation to bidders not in t is by dynamic programming  let b be the size of the equi size
bundles  without loss of generality  we assume that t    n  t           n   we calculate
the following information for every    i  n  t and    q   n  t     m  i  q  is the
maximum value that can be obtained by allocating at most q equi size bundles among
bidders     i  each entry can be filled in polynomial time using the relations  m  i  q   
maxq  q  vi  q   b    m  i     q  q       in particular notice that if b     then the number of
equi size bundles is polynomial in the number of bidders  thus the number of entries in
the table is polynomial also in this case  overall we get that the algorithm runs in time
polynomial in n and log m  for every fixed t 
lemma     the above algorithm finds an optimal t round allocation 
proof  first  notice that the algorithm outputs a t round allocation  let us prove that
it outputs an optimal one  let o    o         on   be an optimal t round allocation  let t be
the set of bidders from definition      and let l   it oi   for each bidder i  t remove
the maximal number qi  possibly zero  of items from oi such that vi  oi     vi  oi  qi   
observe that there exists a pair  qj    p j   in is xor bids such that qj    oi  qi   we now
handle the bidders
that
  t holds a bundle that is a multiple
k are not in t   each bidder i 
j
ml
 
  
in
o 
while
in
order
for
the
allocation that we construct to be
of b   max   nt 
 
j
k
ml 
t round we need the bidders not in t to receive multiples of b    max   nt 
      for
 
l    it  oi  qi    however  notice that b   b  and that the number of equi size bundles
is at least the same  hence  by assigning each bidder i 
  t the same number of equi size
bundles as in o  bidder i holds at least the same value as in o  the lemma follows since
the algorithm considers the newly constructed allocation 
we therefore have the following theorem 
 
theorem     there exists a truthful vcg based mechanism that provides a     t  
 approximation for multi unit auctions with k minded bidders in time polynomial in n  log m 
k  for every constant t 

    a     approximation for multi unit auctions with black box access
let us consider the multi unit auction problem with general valuations given by black boxes 
we will assume in our algorithm an oracle access to it that may be queried for vi  q   where
q is the given bundle size   
   this is analogous to the weakest value query in a combinatorial auction setting  our lower bounds
presented later will apply to all other query types as well 

  

fidobzinski   nisan

we will design a     approximation mir algorithm for this problem  which again yields
an incentive compatible vcg based mechanism  our mir approximation
algorithm will

m
 
first split the items into n equi sized bundles of size b   n  as well as a single extra
bundle of size r that holds the remaining elements  thus n  b   r   m   the maximum in
range algorithm will optimally allocate these whole bundles among the n bidders  what we
need to show are the following two simple facts 
lemma     an optimal allocation of the bundles can be found in time polynomial in n and
log m 
lemma     let  a         an   be an optimal allocation of the bundles that was found by the
algorithm  and  o         on   an optimal unrestricted allocation  then i vi  oi     i vi  ai   
the proofs are simple 
proof   of lemma       the algorithm is by dynamic programming  we calculate the
following information for every    i  n and    q  n    m  i  q  is the maximum
value that can be obtained by allocating at most q regular bundles among bidders     i  and
m    i  q  is the maximum value that can be obtained by allocating at most q regular bundles
and the remainder bundle among bidders     i  each entry can be filled in polynomial
time using the relations  m  i  q    maxq  q vi  q   b    m  i     q  q     and m    i  q   
max maxq  q  vi  q   b    m    i     q  q       maxq  q  vi  q   b   r    m  i     q  q       
proof   of lemma       let us start with an optimal unrestricted allocation o     on where
all items are allocated  without loss of generality since the valuations are monotone   and
look at the bidder j that got the largest number of items oj  m n  there are now two
possibilities  if vj  oj    i  j vi  oi   then by allocating all items to j  i e  all regular sized
bundles as well as the remainder bundle  we get the required   approximation  otherwise 
round up each oi to the nearest multiple of b  i e  to full bundles   except for bidder j
that gets nothing  this is a valid allocation since we added at most nb  m n items by
rounding up  but deleted at least m n items by removing oj   and its value is certainly at
least i  j vi  oi   which gives the required approximation 
we have thus proved 
theorem     there exists a truthful polynomial time vcg based mechanism that gives a
 
   approximation for multi unit auctions with general valuations 

   lower bounds for vcg based mechanisms
we now move on to show that both mechanisms essentially achieve the best approximation
ratios possible  we say that an allocation  s         sn   is complete if all items are allocated 
i si   m  consider an mir algorithm for n bidders that does not have full range of
complete allocations  i e   for some    s         sn   m  i n si  m it never outputs the
allocation  s         sn    m  i n si    now consider the set of valuations where for every
bidder i vi  q      if and only if q  si  and   otherwise   the only allocation with value
n is  s         sn    m  i n si   which is not in the range  while all other allocations have a
value of at most n    
  

fimechanisms for multi unit auctions

from this we can easily get a lower bound for any computationally efficient mir algorithm in the models considered in this paper  we start with a lower bound in the black box
model  the lower bound is on the number of queries that the bidders must be queried  and
holds for any type of query  i e   in a general communication setting 
proposition     let a be a mir algorithm for multi unit auctions that achieves an approximation ratio better than      then  the communication complexity of a is  m  
proof  in the case of two bidders  an optimal algorithm is known to have a communication
complexity of  m  
lemma      nisan   segal        finding the optimal allocation in multi unit auctions requires  m  bits of communication  even if there are only two bidders and even for
just finding the value of the allocation  this lower bound also applies to nondeterministic
settings 
thus  any mir algorithm for   bidders that uses o m  bits of communication will be
non optimal and thus  as argued above  gives no better than a     approximation  the case
of more than   bidders follows by setting all valuations but the first two to    and then
considering all allocations in which all items are allocated to the first two bidders 
the second result rules out the existence of fptas for k minded bidders  in other
words  the dependence of the running time in   cannot be made polynomial  the result
essentially applies to all models that allow single minded bidders  e g   xor bids  and the
bidding language used by kothari et al          see the next section for a description  
proposition     let a be a mir algorithm that achieves an approximation ratio better
than     n     then  a does not run in polynomial time  unless p   n p  
proof  similarly to the previous proposition  and by the standard reduction from knapsack
to multi unit auctions  it follows that for every polynomial time mir algorithm there exist
large enough n and m for which the range of complete allocations is not full  unless p   n p  
the lemma follows by the discussion above 
this concludes the proof of the lower bounds for mir mechanisms  to draw the same
conclusion for vcg based mechanisms  one technical detail that should be explicitly mentioned  our lower bounds were for mir algorithms  while vcg based mechanisms are only
proved to give algorithms that are equivalent to mir algorithms  see dobzinski and nisan
        however  both proofs hold even for finding the value of the optimal allocation and
thus directly apply also to algorithms that are equivalent to mir algorithms 

   a general construction and applications
we present a general construction that takes a maximal in range algorithm for a constant
number of bidders in some bidding language or model    and extends it to a truthful mechanism for an unbounded number of bidders  yet  the extension loses only an arbitrarily
small constant in the approximation ratio 
   by a model we mean  e g   some restriction on the valuations or on how they can be accessed 

  

fidobzinski   nisan

we describe four applications of the construction  first  we reprove the ptas for kminded bidders and the     approximation algorithm for general bidders of section    then 
we study the bidding language considered by kothari et al          kothari et al  describe
an approximately truthful fptas for this bidding language  while we present a truthful
vcg based ptas  this is the best possible since section   essentially rules out the possibility of a vcg based fptas   finally  we present a truthful         approximation mechanism
for the case the valuations are sub additive  a k a  complement free  and are accessed via
a black box 
    the setting
fix some bidding language or a model for multi unit auction in which the bidders can
answer value queries  let a be a maximal in range algorithm for t bidders and at most m
items in this model  denote the complexity of a by a t  m   its range by ra t m   and its
approximation guarantee by     
the construction
   build the set q of allocations as follows 
 a  let u       

 
 n   

let l          buc  bu  c          ublogu mc   m  
 b  for every set t of bidders   t    t  and l  l 
i  run a with m  l items and the set t of bidders  denote by si the number
of items a allocates to each bidder i  t  
ii  split the remaining l items into at most  n  bundles  each consisting of
max   nl        items 
iii  find the optimal allocation of the equal size bundles among the bidders that
are not in t   denote by si the allocation to each bidder i 
  t 
iv  add  s            sn   to q 
   output the allocation with the highest welfare in q 
theorem     there exists some range of allocations r such that the construction is maximal in r  the construction runs in time poly log m  n  a t  m   for every constant t  it
 
outputs an allocation with value of    t  
  of the optimal allocation 
proof 

we will make use of the following definition 

definition     an allocation is  r  t  l  round if 
 r is a set of allocations  and in each r  r at most t bidders are allocated non empty
bundles  the bidders are allocated together up to m  l items 
 there exists a set t of bidders   t    t  such that the bidders in t are allocated
according to some allocation in r 
  

fimechanisms for multi unit auctions

 
 each bidder i 
  t receives an exact multiple of max   nl        units  and it
  si 
 l 
 
max   n        n  
it is not hard to verify that the construction always outputs allocations that are in the
following range 

r    s s is a  ra k ml   k  l  round allocation where l  l and k  t 
lemma     let  o            on   be an optimal unrestricted allocation  there exists an alloca 
tion  s            sn    r for which i vi  si       t  
   i vi  oi   
proof 
denote the value of the optimal solution by opt  without loss of generality 
assume that all items are allocated and that v   o            vn  on    let l  l be the largest
such that m  l  ti   oi   let  s            st   be the allocation that a outputs when run on
bidders            t and m  l items  and assign each bidder    i  t si items  observe that
ti   vi  si      ti   vi  oi    to finish the proof we show that there is an allocation in the
range that recovers the value of all bidders t              n but at most one  the lemma will
t
then follow since for each such bidder i  vi  oi    op
t    
claim     step   b iii returns an allocation  st             st   of the l items to bidders t  
           n such that for each bidder i in this set  but at most one  we have that vi  si    vi  oi   
proof  let r   ni t   oi   let j  t     be some bidder with oj  nr  observe that the
existence of this bidder is guaranteed   let l  l be the largest such that m  l  ti   oi
r
 observe that l  r   we also have that l  r   n
  we chose the largest possible value for
r
r
l  and therefore l           r   n  
 n
 
now  for each i    j round up each oi to the nearest multiple of max   nl         and
allocate no items to bidder j  observe that for all bidders but bidder j the bundle size they
get increases  also observe that the number of additional items we allocate to bidders in
l
r
l
l
 t            n  is at most  nl    n    n
  thus  we have that l  r   n
   n
 r  oj    n
 
all that is left is to show that the construction runs in polynomial time 
lemma     the optimal allocation in r can be found in time poly log m  n  a t  m    for
every constant t 
proof  step   b iii of the construction can be implemented using a dynamic programming
similarly to lemma      optimality of the allocation in r is clear  the running time is
poly log     m  nk  a t  m    which is polynomial in the relevant parameters for every
 n  

constant t 

    applications of the construction
we now provide several applications of our construction 
  

fidobzinski   nisan

      a ptas for k minded valuations
we reprove the ptas for k minded bidders of section    a multi unit auction problem
with m items and t k minded bidders can be optimally solved by exhaustive search in
time poly  tk t   log m   which is polynomial in log m and k for every constant t  by the
construction  and since an optimal algorithm is in particular maximal in range   we get a
 
ptas for k minded bidders  for every constant t  we get a     t  
  approximation in time
polynomial in n and log m 
      a     approximation for general valuations
here we observe that a multi unit auction with one bidder can be optimally solved by
allocating all items to the single bidder  we let t     in the statement of theorem      and
get a     approximation algorithm for general valuations 
      a ptas for the marginal piecewise bidding language
the following marginal piecewise bidding language was used by kothari et al          a
valuation v is determined by a list of at most k tuples denoted by  u    m            uk   mk    we
assume that the mi s are non negative and that uk           u       the tuples determine
the marginal utility of the jth item  in other words  to determine the value of a set of s
items  we sum over all the marginal utilities  i e   for each item j  ul  j   ul     let his
marginal utility be rj   ml   and for every s  m  let v s    sj   rj    in fact  the above
bidding language is more powerful than the one described by kothari et al          which
allows only marginal decreasing piecewise valuations  
we now show how to optimally solve a multi unit auction problem in this setting with
a constant number of bidders  a ptas follows  just as in the k minded case 
we say that bidder i is precisely assigned if he is allocated si items  and for some ui    
there exists a tuple  si   ui   in his k bids  the main observation here is that there is an
optimal solution  o            on   in which at most one bidder is not precisely assigned  suppose
there are two bidders i and i  that are not precisely assigned  then  move items to the bidder
with the higher  or equal  marginal utility  the value of the allocation cannot decrease 
continue this process until all bidders but at most one are precisely assigned 
now optimally solving a multi unit auction problem with a constant number of bidders
is obvious  select each of the n bidders in his turn to be the bidder that is not precisely
assigned  in each iteration  let i be the bidder that is not precisely assigned  and go over
all allocations in which all other bidders are precisely assigned  then  assign bidder i the
remaining items  since there are at most k possible sets that make a bidder precisely
assigned  the algorithm runs in time poly n   n  k n    log m   which is polynomial in log m
and k for every constant n 
      a          approximation for subadditive valuations
in this model we assume that the valuations are given as black boxes  as in section      
and that for each valuation v and bundles    s  t  m we have that v s    v t   v s   t  
such valuations are called subadditive valuations 
  

fimechanisms for multi unit auctions

let us now describe an algorithm that provides an approximation ratio of    in this
setting when the number of bidders is constant  by the construction  we get a         approximation vcg based mechanism for unbounded number of bidders  for every constant
  the algorithm is quite simple  fix a small enough constant             suffices   all
bidders  but at most one  can only receive a bundle s that is a power of   including the
empty bundle   the bidder that does not get a bundle of size that is a power of  receives
the remaining items  we use exhaustive search to find the optimal allocation in this range 
to see that the algorithm indeed provides an approximation ratio of      consider an
optimal solution  o            on    without loss of generality  assume that o          on  notice
that unlike before now the bidders are ordered by their bundle size   let o be the set of
bidders with odd indices  and e be the set of bidders with even indices 
the analysis is divided into two cases  first suppose that io vi  oi    ie vi  oi   
consider the following allocation  the bundles of bidders in e are rounded up to the power
of  that is near o i   the bundles of bidders in o       are rounded up to the nearest power
of   and bidder   gets the remaining items  notice that the above allocation is valid since
for a small enough choice of  we assign bidders in o no more items than what we removed
from bidders in e  also notice that this allocation is in the range  as for the approximation
ratio  observe that bidders in o hold at least the same value as in the optimal solution 
since each bidder in o is allocated at least the same number of items as in the optimal
solution  in addition  each bidder in e holds at least half of the items allocated to him in
the optimal solution  thus  by subadditivity  bidders in e hold together at least half of the
value they hold in the optimal solution  in total  the value of the allocation obtained by
the algorithm is at least    of the value of the optimal solution 
let us now handle the case where io vi  oi     ie vi  oi    consider the allocation
where all bidders in o are rounded up to the power of  that is near o i   and all bidders
in e are rounded up to the nearest power of   except for one arbitrary bidder in e who
gets the remaining items   this allocation is in the range  and the analysis is similar to the
previous case  leaving us with an approximation ratio of    also in the current case 
the running time of the algorithm is poly n   log m n     which is polynomial in log m
for constant n and  
notice that the approximation ratio achieved is almost the best possible  as every mir
approximation algorithm that guarantees a factor better than    requires  m  communication  by lemma     finding the optimum solution of a multi unit auction with two bidders
requires  m  bits of communication  we make the valuations sub additive by defining
for each v a new valuation  v    s    v s    v m   for all s       thus  as in section    the
range of every polynomial time mir mechanism for two bidders with subadditive valuations
cannot contain all complete allocations  fix some mir algorithm  and let  s    m  s    be
a complete allocation that is not in the range  consider the following instance  bidder  
values at least s  items with a value of    and smaller bundles with a value of    and bidder
  values at least m  s  items with a value of    and smaller bundles with a value of    and
  is the value of the empty bundle   notice that the valuations of the bidders are indeed
subadditive  also observe that the optimal welfare is    but the mechanism can achieve
welfare of at most   
  

fidobzinski   nisan

acknowledgments
a preliminary version of this paper appeared in ec    we are grateful to liad blumrosen
and ahuva mualem for helpful discussions  the second author is supported by a grant
from the israeli science foundation 

references
blumrosen  l     dobzinski  s          welfare maximization in congestion games  ieee
journal on selected areas in communications                   
briest  p   krysta  p     vocking  b          approximation techniques for utilitarian
mechanism design  in stoc  pp       
dobzinski  s     nisan  n          limitations of vcg based mechanisms  in stoc  pp 
       
dobzinski  s   nisan  n     schapira  m          approximation algorithms for combinatorial auctions with complement free bidders  in stoc  pp         
holzman  r   kfir dahav  n   monderer  d     tennenholtz  m          bundling equilibrium in combinatrial auctions  games and economic behavior             
kothari  a   parkes  d  c     suri  s          approximately strategyproof and tractable
multi unit auctions  decision support systems              special issue dedicated
to the fourth acmconference on electronic commerce 
lavi  r   mualem  a     nisan  n          towards a characterization of truthful combinatorial auctions  in the   th annual ieee symposium on foundations of computer
science  focs  
lavi  r     swamy  c          truthful and near optimal mechanism design via linear
programming  in focs  pp         
mualem  a     nisan  n          truthful approximation mechanisms for restricted combinatorial auctions  in aaai    
nisan  n          in p  cramton and y  shoham and r  steinberg  editors   combinatorial
auctions  chapter    bidding languages  mit press 
nisan  n     ronen  a          computationally feasible vcg mechanisms  j  artif  intell 
res   jair            
nisan  n     segal  i          the communication requirements of efficient allocations and
supporting prices   journal of economic theory 
vickrey  w          counterspeculation  auctions and competitive sealed tenders  journal
of finance      

  

fi