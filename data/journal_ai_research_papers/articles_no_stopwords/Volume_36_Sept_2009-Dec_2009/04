journal artificial intelligence

submitted published

relaxed survey propagation
weighted maximum satisfiability
hai leong chieu

chaileon dso org sg

dso national laboratories
science park drive singapore

wee sun lee

leews comp nus edu sg

department computer science school computing
national university singapore singapore

abstract
survey propagation sp shown work well large instances
random sat near phase transition shown sp estimates
marginals covers represent clusters solutions sp generalizes
sp work maximum satisfiability max sat cover interpretation
sp generalize sp formulate relaxed survey propagation rsp extends sp apply weighted max sat
rsp interpretation estimating marginals covers
violating set clauses minimal weight naturally generalizes cover interpretation sp empirically rsp outperforms sp state art
max sat solvers random max sat instances rsp outperforms state art
weighted max sat solvers random weighted max sat instances

introduction
sat archetypical np complete difficulty solving
random sat instances shown related clause variable ratio
n number clauses n number variables phase
transition occurs critical value c random sat instances c
generally satisfiable instances c instances close phase
transition generally hard solve local search mezard zecchina
braunstein mezard zecchina
survey propagation sp invented statistical physics community approaches used analyzing phase transitions spin glasses mezard
zecchina sp surprised computer scientists ability solve
efficiently extremely large difficult boolean satisfiability sat instances phase
transition region extended sp handle
maximum satisfiability max sat battaglia kolar zecchina
progress made understanding sp works well braunstein
zecchina first showed sp viewed belief propagation bp
pearl related factor graph clusters solutions represented
covers non zero probability known whether similar interpretation
given sp extend sp handle weighted
c

ai access foundation rights reserved

fichieu lee

max sat instances way preserves cover interpretation call
relaxed survey propagation rsp empirically
rsp outperforms sp state art solvers random max sat instances
outperforms state art solvers benchmark max sat instances
random weighted max sat instances outperforms state art weighted max sat
solvers
rest organized follows section describe background
literature mathematical notations necessary understanding includes
brief review definition joint probability distributions factor graphs
introduction sat max sat weighted max sat
formulated inference probability distribution factor graph
section give review bp pearl plays central role
section give description sp braunstein et al
sp battaglia et al explaining warning propagation
section define joint distribution extended factor graph given weighted
max sat instance factor graph generalizes factor graph defined maneva
mossel wainwright chieu lee solving
sat instances running bp factor graph equivalent running
sp derived braunstein mezard zecchina weighted
max sat gives rise call relaxed survey
propagation rsp section empirically rsp outperforms
solving hard max sat weighted max sat instances

background
sp first derived principles statistical physics understood
bp estimating marginals joint distribution defined factor graph
section provide background material joint distributions defined
factor graphs define boolean satisfiability sat maximum
satisfiability max sat weighted maximum satisfiability weighted maxsat solved solving inference
joint distributions defined factor graphs review definition derivation
bp follow next section describe sp
section
notations
first define notations concepts relevant inference
factor graphs factor graphs provide framework reasoning manipulating joint
distribution set variables general variables could continuous nature
limit discrete random variables
denote random variables large roman letters e g x
random variables discrete taking values finite domain usually
interested vectors random variables write letters bold
face e g x often index random variables letters j k write
example x xi iv v finite set subset w v denote


firelaxed survey propagation weighted max sat


x


x


x

x

figure simple factor graph p x x x x x x x
xw xi iw call assignment values variables x configuration
denote small bold letters e g x often write x represent event
x x probability distribution p write p x mean p x x similarly
write x denote event x x write p x denote p x x
recurring theme defining message passing joint
distributions factor graphs kschischang frey loeliger joint distribution
defined product local functions functions defined small subset variables
refer local functions factors index factors e g greek
letters e g avoiding used symbol clause variable ratio sat
instances factor denote v v subset variables
defined e function defined variables xv message passing
messages vectors real numbers sent factors variables
vice versa vector message sent variable xi factor denoted
mi message xi denoted mi
joint distributions factor graphs
given large set discrete random variables x xi iv interested joint
probability distribution p x variables set v large often
interest assume simple decomposition draw conclusions efficiently
distribution interested joint probability distribution
decomposed follows
p x x


xv
z f



set f indexes set functions f function defined
subset variables xv set x maps configurations xv non negative
real numbers assuming function defined small subset variables
xv hope efficient inference distribution despite large number
variables x constant z normalization constant ensures
distribution sums one configurations x x
factor graph kschischang et al provides useful graphical representation
illustrating dependencies defined joint probability distribution equation
factor graph g v f e bipartite graph two sets nodes set variable
nodes v set factor nodes f set edges e factor graph connects
variable nodes factor nodes hence bipartite nature graph factor graph
representing joint distribution equation edge e e


fichieu lee

variable xi parameter factor e v denote v
set factors depending variable xi e
v f v



simple example factor graph figure small example
example v v factor graph representation useful
illustrating inference joint distributions form equation kschischang et al section describe bp factor
graph representation
equation defines joint distribution product local factors often useful
represent distribution following exponential form
p x exp

x

xv



f

equation reparameterization equation xv exp xv
ln z statistical physics exponential form often written follows
p x



exp
e x
z
kb



e x hamiltonian energy function kb boltzmanns constant
temperature simplicity set kb equations equivalent
p
e x f xv
bayesian belief networks markov random fields two graphical representations often used describe multi dimensional probability distributions factor graphs
closely related bayesian networks markov random fields
operating factor graphs often directly applicable bayesian networks markov
random fields refer reader work kschischang et al comparison
factor graphs bayesian networks markov random fields
inference joint distributions
literature inference joint distribution refer solving one two
define two follows
map given joint distribution p x interested configuration highest probability configurations x called maximuma posteriori configurations map configurations
x arg max p x
x



joint distribution equation map configuration minimizes energy
function e x hence map sometimes called energy minimization




firelaxed survey propagation weighted max sat

marginal given joint distribution p x central interest
calculation estimation probabilities events involving single variable xi xi
refer probabilities marginal probabilities
x

pi xi

p x



x xi

p

notation x xi means summing configurations x variable xi set
xi marginals important represent underlying distribution individual
variables
general solvable reasonable time currently known methods naive calculation pi xi involves summing probabilities configurations
variables x xi xi example factor graph n variables
cardinality q finding marginal one variables involve summing q n
configurations furthermore np complete sat simply coded
factor graphs see section map general np complete
marginal equivalent model counting sat p complete
cooper hence general expect solve inference exactly reasonable time unless small special structures
exploited efficient inference
central interest particular approximate inference method known
sum product belief propagation bp defer discussion
bp next section rest section describe sat
max sat weighted max sat simply formulated
inference joint distribution factor graph
sat max sat
variable boolean takes values false true follow
conventions statistical physics boolean variables take values
corresponding false corresponding true
boolean satisfiability sat given boolean propositional formula
written operators conjunction disjunction negation
parenthesis objective sat decide whether exists configuration propositional formula satisfied evaluates true sat
first shown np complete stephen cooks seminal
cook levin
three operators boolean algebra defined follows given two propositional
formulas b b true b true b true
b true true false rest use
standard notations boolean algebra boolean operators b means b
b means b means parenthesis available allow
nested application operators e g b b c
conjunctive normal form cnf often used standard form writing boolean
formulas cnf consists conjunction disjunctions literals literal
variable negation example x x x x cnf


fichieu lee

x x x x x x boolean formula written cnf
de morgans law distributivity law although practice may lead
exponential blowup size formula tseitin transformation often used
instead tseitin cnf boolean formula considered conjunction
set clauses clause disjunction literals hence sat
often given x c x vector boolean variables c set
clauses clause c satisfied configuration evaluates true
configuration otherwise said violated configuration use greek
letters e g indices clauses c denote v set variables
clause c k sat sat clause c consists
exactly k literals k sat np complete k cook
maximum satisfiability max sat optimization version
sat aim minimize number violated constraints
formula define simple working example max sat use
throughout
example define instance max sat cnf following clauses
x x x x x x x x x x x x
x x boolean expression representing would
x x x x x x x x x x x x x x



objective max sat would configuration minimizing
number violated clauses
factor graph representation sat instances
sat cnf easily represented joint distribution factor
graph following definition give possible definition joint distribution
boolean configurations given sat instance boolean variables take values

definition given instance sat x c conjunctive normal form
x vector n boolean variables define energy e x distribution p x configurations sat instance battaglia et al
c c xv
e x


j xi

iv



x

c xv




exp e x
z





c

p x

x n j takes values j resp
contains xi negative resp positive literal clause satisfied one
variables xi takes value j clause satisfied c xv otherwise
c xv


firelaxed survey propagation weighted max sat







x



x



x



figure factor graph sat instance given example dotted resp solid
lines joining variable clause means variable negative resp positive
literal clause

definition energy function zero satisfying configurations
equals number violated clauses non satisfying configuration hence satisfying
configurations sat instance map configurations factor graph
section make definitions useful rest
clause containing variable xi associated value j say
xi satisfies xi j case clause satisfied regardless values
taken variables conversely say xi violates xi satisfy
case still possible satisfied variables
definition clause c define u resp value xi
violates resp satisfies clause means j u j
define following sets
v
v
vs
vu






v
v
v
v



definitions v resp v set clauses contain xi
positive literal resp negative literal vs resp vu set clauses containing
xi agrees resp disagrees clause concerning xi sets useful
define sp message passing sat instances
factor graph representing max sat instance given example shown
figure example v v vs
vu energy example follows



e x x x x x x x






x x x x x x x x






fichieu lee

related work sat
sat well studied computer science archetypical np complete
common reformulate np complete graph coloring
sat prestwich sat solvers complete incomplete
best known complete solver solving sat probably davis putnamlogemann loveland dpll davis putnam davis logemann loveland dpll basic backtracking runs choosing
literal assigning truth value simplifying formula recursively checking
simplified formula satisfiable case original formula satisfiable otherwise recursive check done assuming opposite truth value variants
dpll chaff moskewicz madigan minisat een sorensson
rsat pipatsrisawat darwiche among best performers recent sat competitions berre simon solvers satz li anbulagan
cnfs dubois dequen making progress solving hard
random sat instances
solvers participated recent sat competitions complete solvers
incomplete stochastic solvers sat instance unsatisfiable
often able solve larger satisfiable instances complete solvers incomplete solvers
usually start randomly initialized configuration different differ
way flip selected variables move towards solution one disadvantage
hard sat instances large number variables flipped
move current configuration local minimum acts local trap incomplete
solvers differ strategies used move configuration traps example
simulated annealing kirkpatrick jr vecchi allows search move uphill
controlled temperature parameter gsat selman levesque mitchell
walksat selman kautz cohen two developed
allow randomized moves solution cannot improved locally two
differ way choose variables flip gsat makes change minimizes
number unsatisfied clauses configuration walksat selects
variable flipped previously satisfied clauses becoming unsatisfied
variants walksat gsat use strategies tabusearch mcallester selman kautz adapting noise parameter used
help search local minima hoos another class approaches
applying discrete lagrangian methods sat constrained optimization
shang wah lagrange mutlipliers used force lead search
local traps
sp braunstein et al shown beat best incomplete
solvers solving hard random sat instances efficiently sp estimates marginals
variables chooses fix truth value size instance
reduced removing variables sp run remaining instance
iterative process called decimation sp literature shown empirically sp
rarely makes mistakes decimation sp solves large sat instances
hard local search recently braunstein zecchina


firelaxed survey propagation weighted max sat

shown modifying bp sp updates reinforcement term effectiveness
solvers improved
weighted max sat
weighted max sat generalization max sat
clause assigned weight define instance weighted max sat
follows
definition weighted max sat instance x c w cnf consists x vector
n variables taking values c set clauses w set weights
clause c define energy weighted max sat
e x

w
j xi

c iv
x





x n j takes values w weight clause
total energy e x configuration x equals total weight violated clauses
similarly sat complete incomplete solvers weighted maxsat complete weighted max sat solvers involve branch bound techniques
calculating bounds cost function larrosa heras introduced framework
integrated branch bound techniques max dpll solving
max sat incomplete solvers generally employ heuristics similar
used sat example incomplete method min conflicts hillclimbing random walks minton philips johnston laird many
sat solvers walksat extended solve weighted max sat
weights used criterion selection variables flip
working example define following instance weighted
max sat
example define set weighted max sat clauses following table

id







clause
weight
x x

x x

x x

x x x

x x x

x x

energy





































































weighted max sat example variables clauses max sat
example given example table clauses satisfied tick
violated cross possible configurations variables first


fichieu lee

row symbol corresponds value corresponds example
string corresponds configuration x x x last row
table shows energy configuration column
factor graph weighted max sat example one
max sat example example differences two examples
clause weights reflected joint distribution factor graph
energy example follows



e x x x x x x x






x x x x x x x x



phase transitions
sp shown work well sat instances near phase transition
instances known hard solve term phase transition arises
physics community understand notion hardness optimization
computer scientists physicists studying relationship
computational complexity computer science phase transitions statistical physics
statistical physics phenomenon phase transitions refers abrupt changes
one physical properties thermodynamic magnetic systems small
change value variable temperature computer science
observed random ensembles instances k sat sharp
threshold randomly generated undergo abrupt change properties
example k sat observed empirically clause variable ratio
changes randomly generated instances change abruptly satisfiable unsatisfiable
particular value often denoted c moreover instances generated value
close c found extremely hard solve
computer scientists physicists worked bounding calculating precise value c phase transition sat occurs cavity
physicists claim c mezard zecchina derivation
value c non rigorous derivation formulated sp
rigorous mathematical approaches upper bounds value c
derived first order methods example work kirousis kranakis
krizanc stamatiou c sat upper bounded achlioptas
naor peres lower bounded value c weighted second moments
method lower bound close upper bounds k sat ensembles large
values k however lower bound sat rather far conjectured
value better algorithmic lower bound obtained analyzing
behavior sat configurations kaporis kirousis lalas
physicists shown rigorously second moment methods approaches c search space fractures dramatically many small solution clusters
appearing relatively far apart mezard mora zecchina clusters
solutions generally defined set connected components solution space
two adjacent solutions hamming distance differ one variable daude


firelaxed survey propagation weighted max sat

k



j

j


mk

mj

j



mi



ml
l

figure illustration messages bp
mezard mora zecchina redefined notion clusters concept
x satisfiability sat instance x satisfiable exists two solutions differing
n x variables n total number variables showed near phase
transition x goes around small values without going phase
intermediate values clustering phenomenon explains instances generated
close c extremely hard solve local search difficult
local search move local minimum global minimum

belief propagation
bp reinvented different fields different names example
speech recognition community bp known forward backward
procedure rabiner juang tree structured factor graphs bp
simply dynamic programming applied tree structure shown
bp calculates marginals variable factor graph e solving
loopy factor graphs bp found provide reasonable
approximation solving marginal converges case
bp often called loopy bp yedidia freeman weiss
shown fixed points loopy bp correspond stationary
points bethe free energy hence sensible approximate method estimaing
marginals
section first describe bp dynamic programming
method solving marginal tree structured factor graphs
briefly describe bp applied factor graphs loops
refer reader work yedidia et al underlying theoretical
justification case
given factor graph representing distribution p x bp involves iteratively passing messages factor nodes f variable nodes v vice versa
factor node represents factor factor joint distribution given
equation figure give illustration messages passed
factor nodes variable nodes greek alphabet e g f square represents
factor e g roman alphabet e g v circle represents variable
e g xi
factor variable messages e g mi variable factor messages e g
mi vectors real numbers length equal cardinality variable xi


fichieu lee

denote mi xi mi xi component vector corresponding
value xi xi
message update equations follows


mj xj

v



j

x

mi xi

j xj
xv

xv xi



mj xj



jv

p

xv xi means summing configurations xv xi set xi
tree structured factor graph message updates scheduled
two parses tree structure messages converge messages converge
beliefs variable node calculated follows


bj xj

mj xj



v j

tree structured graph normalized beliefs variable equal
marginals
input joint distribution p x defined tree structured factor graph v f e
variable xi x
output exact marginals variable xi

organize tree xi root tree
start leaves propagate messages child nodes parent nodes
right root xi equations
marginals xi obtained normalized beliefs equation

figure bp calculating marginal single variable xi
tree structured factor graph

calculating exact marginals given variable xi given
figure simply dynamic programming procedure calculating
marginals pi xi organizing sums sums leaves done first
simple example figure calculating p x sum ordered follows
p x

x

p x

x x x

x x

x x



x

x



x x

x
x

x x

firelaxed survey propagation weighted max sat

bp simply carries sum node x root
tree structured factor graph figure
bp used calculating marginals variables efficiently
message passing schedule given figure schedule involves selecting
random variable node root tree passing messages leaves
root back leaves two parses message updates
required figure one variable would performed
beliefs variables calculated messages normalized beliefs
variable equal marginals variable

input joint distribution p x defined tree structured factor graph v f
output exact marginals variables v

randomly select variable root
upward pass starting leaves propagate messages leaves right
tree
downward pass root propagate messages back leaves
calculate beliefs variables given equation

figure bp calculating marginals variables treestructured factor graph

factor graph tree structured e contains loops message updates
cannot scheduled simple way described figure case
still apply bp iteratively updating messages equations often
round robin manner factor variable pairs done messages
converge e messages change iterations guarantee
messages converge general factor graphs however converge
observed beliefs calculated equation often good approximation
exact beliefs joint distribution murphy weiss jordan
applied manner bp often called loopy bp recently
yedidia freeman weiss shown loopy bp underlying
variational principle showed fixed points bp correspond
stationary points bethe free energy fact serves sense justify
bp even factor graph operates loops minimizing
bethe free energy sensible approximation procedure solving marginal
refer reader work yedidia et al details


fichieu lee

survey propagation sp sp
recently sp braunstein et al shown beat best
incomplete solvers solving hard sat instances efficiently sp first
derived principles statistical physics explained cavity
mezard parisi first given bp interpretation work braunstein
zecchina section define sp sp
solving sat max sat warning propagation interpretation

sp sat
section defined joint distribution sat x c
energy function configuration equal number violated clauses configuration factor graph v f e representing joint distribution variable
nodes v correspond boolean variables x factor node f represents
clause c section provide intuitive overview sp
formulated work braunstein et al
sp defined message passing factor graph
v f e factor f passes single real number neighboring variable
xi factor graph real number called survey according warning
propagation interpretation given work braunstein et al survey
corresponds probability warning factor sending variable
xi intuitively close factor warning variable xi
taking value violate clause close factor
indifferent value taken xi clause satisfied
variables v
first define messages sent variable xj neighboring factor
function inputs factors containing xj e j v j sp
message vector three numbers uj sj j following
interpretations
uj probability xj warned clauses take value violate
clause
sj probability xj warned clauses take value satisfy
clause

j probability xj free take value
defintions update equations follows
uj
sj



j



j

vu j

vs j





j

vs j

j




vu j

sp reasons clusters solutions probability warning section used loosely
sp literature refer fraction clusters warning applies next section
define rigorous probability distribution covers rsp



firelaxed survey propagation weighted max sat

j



j



v j





uj

jv

uj sj j



equations defined sets factors vu j vs j
defined section event variable xj warned take value
violating warned least one factor vu j take satisfying
value b factors vs j sending warnings equation
probability event uj product two terms first corresponding
event second event b definitions sj j defined
similar manner equation final survey simply probability joint
event incoming variables xj violating clause forcing last variable xi
satisfy
sp consists iteratively running update equations
surveys converge surveys converged calculate local biases follows


j



j


v

j





j



v j

v j



j



j

j


v

j

j



j



v j

wi
wi


j






j j j


j






j j j

solve instances sat sp run converges
variables highly constrained set preferred values sat
instance reduced smaller instance sp run smaller
instance continues sp fails set variables case local
search walksat run remaining instance called
survey inspired decimation braunstein et al given
figure
sp
contrast sp sp objective solve max sat instances hence clauses allowed violated price sp
understood special case sp taken infinity battaglia
et al sp penalty value exp multiplied distribution
violated clause hence although message passing allows violation
clauses value increases surveys prefer configurations violate
minimal number clauses


fichieu lee

input sat constant k
output satisfying configuration report failure

randomly initialize surveys
iteratively update surveys equations
sp converge go step
sp converges calculate wi wi equations
decimation sort variables absolute difference wi wi
set top k variables preferred value simplify instance
variables removed
surveys equal zero variables removed step output
simplified sat instance otherwise go back first step smaller
instance
run walksat remaining simplified instance output satisfying
configuration walksat succeeds otherwise output failure

figure survey inspired decimation sid solving sat
braunstein et al

sp still understood message passing factor
graphs sp factor passes survey neighboring variable xi

corresponding probability warning simplify notations define

resp
probability warning taking value resp



define


practice since clause warn
j

j






equals zero

j defined definition
since clauses violated insufficient simply keep track whether variable
warned value necessary keep track many
times variable warned value know many clauses


violated variable take particular value let hj
resp hj


number times variable xj warned factors v j value

resp sp variable xj forced take value hj



smaller hj penalty case exp yhj notations used


work battaglia et al describing sp let hj hj
hj

battaglia et al defined sp message passing equations calculate
probability distribution hj input surveys

j v j j j v j j




firelaxed survey propagation weighted max sat

v j refers cardinality set v j unnormalized distributions
pej h calculated follows


pej h h h h
v j





pej h pej h


pej h exp h


pej h exp h
v j

pej h pej

h




h h zero otherwise h h zero otherwise
equations take account neighbor j excluding
v j penalties exp multiplied every time value hj decreases
absolute value neighbor xj added end procedure


equivalent multiplying messages factor exp ymin hj
hj

pej h normalized pj h computing pej h possible
values h v j v j message updates surveys follows
v j

wj


x

pj h

h

x


wj


pj h




h v j
j





j






j



j
wj




jv j
j











quantity wj
resp wj
probability events warning value
resp equation reflects fact warning sent variable
xi variables warning going violate
sp converges preference variable calculated follows

v j

wj
wj

x

pj h

h

x

pj h




h v j

pj h calculated similar manner pj h except
exclude calculations
definitions message updates sp used
solve max sat instances survey inspired decimation similar one


fichieu lee

sp given figure iteration decimation process sp
decimation procedure selects variables fix preferred values quantity
bf ix j wj wj



work battaglia et al additional backtracking process introduced make decimation process robust backtracking process allows
decimation procedure unfix variables already fixed values variable xj
fixed value xj following quantities calculated
bbacktrack j xj wj wj



variables ranked according quantity top variables chosen
unfixed figure backtracking decimation
sp battaglia et al value given input
determined empirically
input max sat instance constant k optional input yin backtracking
probability r
output configuration

randomly initialize surveys
yin given set yin otherwise determine value bisection
method
run sp convergence sp converges variable xi extract
random number q
q r sort variables according equation fix top k
biased variables
b q r sort variables according equation unfix top k
biased variables
simplify instance step sp converged return nonparamagnetic solution paramagnetic solution refers set bf ix j jv
biased value variables go step
run weighted walksat remaining instance outputs best configuration found

figure survey inspired decimation sid solving max sat instance
battaglia et al



firelaxed survey propagation weighted max sat

relaxed survey propagation
shown maneva et al braunstein zecchina sp sat
reformulated bp extended factor graph however
formulation cannot generalized explain sp applicable
max sat previous chieu lee extended formulation
work maneva et al address max sat section
modify formulation previous chieu lee address
weighted max sat setting extended factor graph run bp
theorem formulation generalizes bp interpretation
sp given work maneva et al main theorem theorem
running loopy bp factor graph estimates marginals
covers configurations violating set clauses minimal total weight
first define concept covers section defining extended
factor graph section rest section given weighted max sat
x c w assume variables x take values third value
dont care state corresponding warning message sp defined
section
covers weighted max sat
first need define semantics value dont care state
definition maneva et al given configuration x say variable xi
unique satisfying variable clause c assigned whereas
variables xj clause assigned u j see definition definitions
u variable xi said constrained clause unique satisfying
variable variable unconstrained constrained clauses define
coni x ind xi constrained



ind p equals predicate p true otherwise
illustration consider configuration x example
configuration x constrained clauses x constrained
x unconstrained flipping x violate additional
clauses configuration
following definition redefine configuration taking values
satisfies violates clauses
definition configuration satisfies clause contains variable xi
set value ii least two variables take value configuration
violates clause variables xj set u j configuration x invalid
clause exactly one variables set
remaining variables set u configuration valid valid clauses
c
definition invalid configurations reflects interpretation value
dont care state clauses containing variable xi already satisfied


fichieu lee

variables value xi matter xi cannot last remaining
possibility satisfying clause case clause contains two variables set
clause satisfied one two variables variable
take dont care value
define partial order set valid configurations follows maneva et al

definition let x two valid configurations write x xi yi
xi yi
partial order defines lattice maneva et al showed sp
peeling procedure peels satisfying configuration minimal element
lattice cover minimal element lattice sat region cover
defined follows kroc sabharwal selman
definition cover valid configuration x n satisfies clauses
unconstrained variables assigned
sp shown return marginals covers maneva et al
principle two kinds covers true covers correspond satisfying
configurations false covers kroc et al showed empirically
number false covers negligible sat instances rsp apply weighted
max sat instances introduce notion v cover
definition v cover valid configuration x n
total weight clauses violated configuration equals v
x unconstrained variables assigned
hence covers defined definition simply v covers v e covers
extended factor graph
section define joint distribution extended factor graph
positive v covers first need define functions used
define factors extended factor graph
definition clause c following function assigns different values
configurations satisfy violate invalid see definition

val xv





exp w



xv satisfies
xv violates
xv invalid



definition introduced parameter rsp plays
similar role sp term exp w penalty
violating clause weight w


firelaxed survey propagation weighted max sat

definition maneva et al given configuration x define parent set
pi x variable xi set clauses xi xi unique satisfying
variable configuration x e set clauses constraining xi value formally
pi x c coni xv



example configuration x parent sets p x
p x p x
given weighted max sat instance x c w factor graph g v f e
construct another distribution associated factor graph gs v fs es
follows v let p set possible parent sets variable xi due
restrictions imposed definition pi x must contained v


v therefore cardinality p v v extended
factor graph defined set variables n x x xn
xi p hence factor graph number variables
original sat instance variable large cardinality given configurations
x sat instance denote configurations x x iv x
xi pi x
definitions given far define semantics valid configurations parent sets
rest section define factors extended factor graph gs
ensure definitions satisfied configurations
single variable compatibilities defined following factor
variable x
x xi pi x










pi x xi
pi x xi

valid xi pi x



first case definition pi x xi corresponds case
variable xi unconstrained yet takes value valid configurations
v covers unconstrained variables set zero value
factor hence v covers positive value factors last
case definition validity xi pi x simply means xi resp
xi pi x v resp pi x v
clause compatibilities
x v val xv

q





kv ind pk x con k xv



ind defined definition clause compatibilities introduce penalties
val xv joint distribution second term equation enforces
parent sets pk x consistent definitions parent sets definition
variable xk clause
values x determines uniquely values p pi x iv hence
distribution x xi pi x iv simply distribution x
theorem notation unsat x represent set clauses violated
x underlying distribution p factor graph defined section positive


fichieu lee

























figure extended factor graph sat instance given example factor
nodes correspond clause compatibility factors single variable
factor nodes represents single variable compatibility factors factor
graph similar original factor graph sat instance figure except
additional factor nodes

v covers v cover x
p x x p x



exp w



unsat x

proof configurations v covers invalid contains unconstrained
variables set invalid configurations distribution zero
definition val configurations unconstrained variables set
distribution zero due definition factors v cover total
penalty violated clauses product term equation
definition defines joint distribution factor graph rsp
message passing defined factor graph
definition rsp defined loopy bp applied
extended factor graph gs associated maxsat instance x c w
section formulate message passing updates rsp well
decimation rsp solver weighted max sat instances
example figure shows extended factor graph weighted max sat instance
defined example
definition define min cover weighted max sat instance cover
minimum total weight violated clauses instance
theorem taken rsp estimates marginals min covers
following sense stationary points rsp correspond stationary
points bethe free energy distribution uniform min covers


firelaxed survey propagation weighted max sat



energy



energy



energy



energy











energy

energy

figure energy landscape weighted max sat instance given example
node represents configuration variables x x x example
node represents configuration x x x

proof ratio probability v cover v cover equals exp
taken distribution equation positive min covers
hence rsp loopy bp factor graph representing equation
estimates marginals min covers
application rsp weighted max sat instances taking would often
cause rsp fail converge taking sufficiently large value often
sufficient rsp used solve weighted max sat instances
figure v covers small weighted max sat example example
example unique min cover x x x
maneva et al formulated sp equivalent sp
braunstein et al sp loopy bp
extended factor graph defined work maneva et al comparing
definitions extended factor graph factors rsp sp chieu
lee
theorem taking rsp equivalent sp
proof definitions joint distribution sp maneva et al
rsp differ definition rsp
definitions become identical since sp rsp equivalent loopy bp
distribution defined extended factor graphs equivalence joint
distribution means equivalent
taking infinity corresponds disallowing violated clauses sp formulated
satisfiable sat instances clauses must satisfied sp clause weights
inconsequential clauses satisfied
disallow unconstrained variables take value appendix
give alternative definition single variable potentials equation


fichieu lee

definition maneva et al defines smoothing interpretation sp
smoothing applied rsp see theorem work maneva et al
appendix details
importance convergence
found message passing bp sp perform
well whenever converge e g see kroc sabharwal selman success
rsp random ensembles max sat weighted max sat instances
believed due clustering phenomenon found
rsp could successful cases clustering phenomenon observed
believe presence large clusters help sp converge well
long sp converges presence clusters necessary good
performance
covers simply boolean configurations variables taking value
represent singleton clusters call covers degenerate covers many structured
non random weighted max sat found covers found
often degenerate previous chieu lee teh defined modified
version rsp energy minimization factor graphs lemma
configurations zero probability e covers degenerate
showed value tuned favor convergence
rsp
section success rsp benchmark max sat instances
trying recover covers configurations found rsp found
benchmark instances used degenerate covers fact rsp converged
instances sufficient rsp outperform local search

rsp solving weighted max sat
previous section defined rsp definition loopy bp
extended factor graph section derive rsp message
passing definition giving decimation
used solving weighted max sat instances
message passing
variables extended factor graphs longer boolean form
x xi pi x large cardinalities definition bp
stated message vector passed factors variables length
equal cardinality variables section messages passed
rsp grouped groups message passed variables
factors three values
rsp factor variable messages grouped follows

mi
xi pi x vs
cases variable xi constrained clause



firelaxed survey propagation weighted max sat

u
mi
xi u pi x vu
cases variable xi constrained u clauses

mi
xi pi x vs
cases variable xi constrained least one
variable xj satisfies equals otherwise xi constrained

mi
xi pi x

last two messages equal



mi
mi
mi


equality due fact factor constraining variables
matter whether variable satisfying long least two
variables satisfying following consider two equal

messages single message mi
variable factor messages grouped follows


ri
svs mia
variable xi constrained

p

u
ri

pi x vu mia u pi x
variable xi constrained clauses u

p


ri
pi x vs mia pi x
variable xi constrained constrained clauses

p


ri

variable xi unconstrained equals

last two messages grouped one message done previous
chieu lee follows



ri
ri
ri


since calculating updates mj messages ri messages ri
required update equations rsp weighted max sat given figure
update equations derived loopy bp updates equations
section worst case densely connected factor graph iteration updates
performed n time n number variables number
clauses

factor variable messages
begin update equations messages factors variables given

equations message mi
groups cases xi constrained


fichieu lee




mi


u
rj



jv






u
mi


u

rj
rj


jv
w

e

mi






rk
rk


kv



u

rj

jv k



u

rj
jv

u

rj
rj




x

jv




u
rj



jv




ri






u


mi
mi
mi




vu



vs


u
ri







mi
mi




vs

u
mi


vu




mi


vau



ri



vu











u


mi
mi
mi


vs


mi




vs


mi





vs vu



bi


v




u

mi



v



mi
mi





v

bi

v

bi

u

mi













mi




v



mi
mi





mi


v


mi







v

figure update equations rsp equations bp equations factor
graph defined text



firelaxed survey propagation weighted max sat

factor means variables violating factor hence
equation



mi


u
rj


jv
u
rj
messages neighbors stating violate
u
next equation mi
states variable xi violating case
variables possible cases

two variables satisfying message update


u

rj
rj


jv


rk

x



kv

u
rj


jv k



u
rj


jv

exactly one variable v constrained variables violating
message update
x




rk

u
rj

jv k

kv

variables violating case penalty factor
exp w message update


exp w

u
rj

jv

sum three cases equation

third update equation mi
case variable xi uncons means
strained satisfying case mi

least one satisfying variable unconstrained message
update


u

rj
rj


jv



u
rj

jv

variable factor messages

consists case variable xi constrained
first message ri
factor means satisfies neighboring factors vs violates factors
vu probability



vu



u
mi





mi
mi




vs

u
second message ri
case xi violates case variables
u
v satisfied clauses vs violated case variable xi must



fichieu lee

constrained one clauses vu hence message update


vs





u


mi
mi
mi


vu

vu


mi






message
third message ri
sum two messages ri
ri
variable xi satisfies constrained must constrained
factors


ri








vu

u
mi




mi
mi


vs



vs


mi




case x
second part message ri


mi



vs vu

sum two equations equation
beliefs
beliefs calculated factor variable messages converges obtain estimates marginals min covers calculation beliefs
similar calculation variable factor messages
belief bi belief variable xi taking value case
variable xi satisfies clauses v violates clauses v case
xi must constrained one factors v hence belief follows


v

u

mi






mi
mi


v




mi


v

calculation belief bi similar bi belief bi case
xi hence calculated follows



mi


v

comparing rsp sp message passing
message passing rsp sp share many similarities
include multiplicative penalty distribution violated clause
contain mechanism dont care state sp occurs variable
receives warnings neighboring factors
however number significant differences two


firelaxed survey propagation weighted max sat

rsp penalties imposed factor passes message variable
sp penalties imposed variable compiles incoming warnings
decides many factors going violate
importantly rsp variables participating violated clauses never take
value sp variable receiving equal number warnings set

factors v taking value e hj hj


hj decide pass message warning hence sp
possible variables violated clauses take dont care state
work battaglia et al sp formulated cavity
found optimal value given max sat

e complexity statistical physics e energy density
mezard zecchina stated finite value energy
max sat zero theorem rsp
large possible underlying distribution min covers
experimental figure showed indeed true rsp long
converges

input weighted max sat instance constant k yin
output configuration

randomly initialize surveys set yin
run rsp rsp converges sort variables according quantities
bi p xi p xi fix top k variables preferred
values subject condition bi
weighted max sat rsp fails converge adjust value
rsp converges least one variable set go back step simplified instance otherwise run weighted walksat solver simplified
instance output configuration found
figure decimation rsp solving weighted max sat instance

decimation
decimation shown figure used
experiments described section comparing rsp sp random max sat
instances section run fixed yin vary yin
range values comparing figure figure sp condition used spy check paramagnetic solution replaced condition given step
figure experimental section used sp implementation


fichieu lee

available online battaglia et al contains mechanism backtracking
decimation decisions see figure section rsp still outperforms sp despite
backtracking decisions running rsp weighted max sat found
necessary adjust dynamically decimation process details
experimental settings please refer section

experimental
run experiments random max sat random weighted max sat well
benchmark max sat instances used work lardeux saubion hao
viols

viols

figure behaviour sp rsp varying values x axis
number violated clauses viols axis comparison performances rsp sp shown table objective showing
graphs figure behavior rsp varying
consistent theorem long rsp converges performance improves
increases graph rsp reaches plateau fails converge
property allows systematic search good value used
behavior sp varying less consistent


random max sat
run experiments randomly generated max sat instances variables
different clause variable ratios random instances generated sp code
available online battaglia et al figure compare sp rsp random
max sat different clause variable ratio vary
performance sp rsp unsat region sat beyond phase transition
c value number violated clauses axis plotted
value used


firelaxed survey propagation weighted max sat

perform decimation procedure figure rsp fixed value yin
decimating variables time e k sp run sp code available
line option decimating variables iteration two different
settings without backtracking battaglia et al backtracking procedure used sp improve performance unfixing previously fixed variables rate
r errors made decimation process corrected rsp
run backtracking note formulation equals formulation
work battaglia et al battaglia et al
sp rsp fail converge becomes large enough happens
output returned walksat original instance
figure see happening curve reaches horizontal line signifying
returning configuration regardless seed randomized
walksat identical instances identical figure
see rsp performs consistently sp increases performance rsp
improves point rsp fails converge interestingly max sat instances
observed rsp converges value given instance continue
converge value throughout decimation process hence best value
rsp obtainable without going decimation process commence
decimation largest value rsp converges table rsp
outperforms sp despite fact allow backtracking rsp
compare rsp sp local search solvers implemented ubcsat
tompkins hoos run iterations max sat solvers
ubcsat take best among solvers shown table
see local solvers ubcsat worse rsp sp
tried running complete solvers toolbar de givry heras zytnicki larrosa
maxsatz li manya planes unable deal instances
size
random weighted max sat
run experiments randomly generated weighted max sat instances
instances generated way instances max sat addition
weights clause uniformly sampled integers set
upper bound weights experimental
figure compare rsp weighted max sat solvers implemented
ubcsat rsp run experiments initial set whenever
fails converge lower value halve value
less see figure see rsp outperforms ubcsat consistently
experiments figure
benchmark max sat instances
compare rsp ubcsat instances used work lardeux et al
instances used sat competition among instances use
seven largest instances variables run rsp two settings
decimating variables time run rsp increasing values


fichieu lee

table number violated clauses attained method sp sp bt spy backtracking rsp best selected
best performance bold face column fix shows number
variables fixed rsp optimal time time taken rsp
minutes fix variables amd opteron ghz machine













ubcsat












sp












sp bt












rsp












fix












time minutes












w viol

w viol





figure experimental weighted max sat instances x axis shows
value axis w viol number violated clauses returned


rsp fixes number spins stop increasing number spins
fixed decreases previous value ubcsat run iterations
solvers shown table seven instances rsp fails
fix spins first one outperforms ubcsat rest lardeux et al
best performances average order
magnitude higher table figure shows finding good sp
hard benchmark instances run sp option battaglia et al
uses dichotomic search sp failed fix spins instances


firelaxed survey propagation weighted max sat

table benchmark max sat instances columns instance shows instance name
lardeux et al nvar number variables ubcsat
rsp x x number decimations iteration number violated
clauses returned fx x number spins fixed rsp
best indicated bold face
instance
fw
nc
nw





nvar ubcsat rsp fx rsp
family purdom















family pyhala braun unsat





















fx








success sp family random ensembles sat max sat
usually due clustering phenomenon random ensembles
benchmark instances random instances attempted see configurations
found rsp indeed belong cover representing cluster solutions rather
disappointingly found solutions rsp outperformed local search
variables solutions constrained least one clause hence
v covers found degenerate covers e covers contain variables set
appears success rsp benchmark instances due
clustering phenomenon simply rsp manages converge instances
value kroc sabharwal selman made similar observation
convergence bp sp often sufficient obtaining good solution
given discussed section ability vary improve convergence
useful feature rsp one distinct ability exploit clustering
phenomenon

conclusion
recent work max sat weighted max sat tends focus complete
solvers solvers unable handle large instances max sat competition
argelich li manya planes largest max sat instances used
variables large instances complete solvers still practical local
search procedures feasible alternative sp generalizing sp
shown able solve large max sat instances phase transition lacks
theoretical explanations recent work sp generated
sat easy hard easy transition clause variable ratio increases
max sat however shown empirically beyond phase transition
satisfiability instances hard solve zhang


fichieu lee

rsp outperforms sp well local search max sat weighted
max sat instances well beyond phase transition region
rsp sp well max sat instances near phase transition
mechanisms behind sp rsp similar impose penalty term
violated constraint reduce sp sp uses population
dynamics seen warning propagation
formulated rsp bp extended factor
graph enabling us understand rsp estimating marginals min covers

acknowledgments
work supported part nus arf grant r

appendix smoothing interpretation rsp
definition sp maneva et al parameter introduced define
whole family sp corresponds sp
sp corresponds bp section
develop general version extended factor graph defined section
incorporates sp call corresponding rsp
factor graph rsp
difference factor graph rsp one section
definition variable compatibilities equation following notations work
maneva et al introduce parameters restrict
case sp rsp equal redefine
variable compatibilities follows

x xi pi x











pi x xi
pi x xi

valid xi pi x



definition equation corresponds particular case
section defined factor graph unconstrained
variables must take value definition unconstrained variables allowed take values weight value
weight
definition joint distribution equation redefined follows
n x n x
exp w

unsat x

p x p xk pk k



n x number unconstrained variables x taking n x
number unconstrained variables taking x
case studied case main underlying distribution
distribution positive v covers


firelaxed survey propagation weighted max sat

case case configurations x n x non zero probability distribution given equation hence value forbidden
variables take values boolean configuration violating clauses total weight
w probability proportional exp yw hence retreive weighted max sat
energy defined equation case factor graph equivalent original
weighted max sat factor graph defined definition hence rsp equivalent
loopy bp original weighted max sat
case case valid configurations x violating clauses
n x n x
total weight w probability proportional exp yw hence
probability v covers case spread lattice
minimal element
formulation rsp seen family include
bp rsp moving bp rsp varies

references
achlioptas naor peres rigorous location phase transitions hard
optimization nature
argelich j li c manya f planes j second evaluation max sat
solvers sat tenth international conference theory applications
satisfiability testing
battaglia kolar zecchina r minimizing energy glass thresholds physical review e
berre l simon l essentials sat competition sat
sixth international conference theory applications satisfiability testing
berre l simon l special sat competitions
evaluations journal satisfiability boolean modeling computation
braunstein mezard zecchina r survey propagation
satisfiability random structures
braunstein zecchina r survey propagation local equilibrium equations
journal statistical mechanics theory experiment
braunstein zecchina r learning message passing networks discrete
synapses physical review letters
chieu h l lee w relaxed survey propagation sum product
max sat aaai twenty third aaai conference artificial intelligence
chieu h l lee w teh w cooled relaxed survey propagation
mrfs nips advances neural information processing systems cambridge mit press
cook complexity theorem proving procedures stoc third
annual acm symposium theory computing pp york ny usa
acm


fichieu lee

cooper g f computational complexity probabilistic inference
bayesian belief networks note artif intell
daude h mezard mora zecchina r pairs sat assignments random
boolean formul theor comput sci
davis logemann g loveland machine program theorem proving
commun acm
davis putnam h computing procedure quantification theory journal
acm jacm
de givry heras f zytnicki larrosa j existential arc consistency
getting closer full arc consistency weighted csps ijcai nineteenth
international joint conference artificial intelligence
dubois dequen g backbone search heuristic efficient solving hard sat formulae ijcai seventeenth international joint conference artificial
intelligence pp
een n sorensson n minisat sat solver conflict clause minimization
sat eighth international conference theory applications satisfiability testing
hoos h h adaptive noise mechanism walksat aaai eighteenth
national conference artificial intelligence pp
kaporis c kirousis l lalas e g probabilistic analysis greedy
satisfiability random structures
kirkpatrick jr c g vecchi p optimization simulated annealing
science
kirousis l kranakis e krizanc stamatiou c approximating
unsatisfiability threshold random formulas random structures

kroc l sabharwal selman b survey propagation revisited uai
twenty third conference uncertainty artificial intelligence
kroc l sabharwal selman b message passing local heuristics
decimation strategies satisfiability sac th annual acm symposium
applied computing
kschischang f r frey b loeliger h factor graphs sum product
ieee transactions information theory
lardeux f saubion f hao j k three truth values sat maxsat ijcai nineteenth international joint conference artificial
intelligence
larrosa j heras f resolution max sat relation local consistency weighted csps ijcai nineteenth international joint conference
artificial intelligence
levin l universal search problemy peredaci informacii


firelaxed survey propagation weighted max sat

li c anbulagan heuristics unit propagation satisfiability ijcai fifteenth international joint conference artificial intelligence
pp
li c manya f planes j detecting disjoint inconsistent subformulas
computing lower bounds max sat aaai twenty first aaai conference
artificial intelligence
maneva e mossel e wainwright look survey propagation
generalizations http arxiv org abs cs cc
mcallester selman b kautz h evidence invariants local search
aaai proceedings fourteenth national conference artificial intelligence
pp providence rhode island
mezard mora zecchina r clustering solutions random satisfiability physical review letters
mezard parisi g cavity method zero temperature journal
statistical physics
mezard zecchina r random k satisfiability analytic
solution efficient physical review e
minton philips johnston laird p minimizing conflicts heuristic
repair method constraint satisfaction scheduling artificial intelligence
moskewicz w madigan c f chaff engineering efficient sat solver
dac thirty ninth design automation conference pp
murphy k weiss jordan loopy belief propagation approximate
inference empirical study uai fifteenth annual conference uncertainty
artificial intelligence pp san francisco ca morgan kaufmann
pearl j probabilistic reasoning intelligent systems networks plausible inference morgan kaufmann publishers inc san francisco ca usa
pipatsrisawat k darwiche rsat sat solver description tech rep
automated reasoning group computer science department ucla
prestwich local search sat encoded colouring giunchiglia
e tacchella eds sat vol lecture notes computer science pp
springer
rabiner l juang b fundamentals speech recognition prentice hall
selman b kautz h cohen b noise strategies improving local search
aaai twelfth national conference artificial intelligence pp
selman b levesque h j mitchell method solving hard satisfiability aaai tenth national conference artificial intelligence
pp aaai press
shang wah b w discrete lagrangian global searchmethod
solving satisfiability journal global optimization


fichieu lee

tompkins hoos h ubcsat implementation experimentation environment sls sat max sat sat seventh international
conference theory applications satisfiability testing
tseitin g complexity derivations propositional calculus studies
mathematics mathematical logic part ii
yedidia j freeman w weiss generalized belief propagation nips
advances neural information processing systems pp
yedidia j freeman w weiss constructing free energy approximations
generalized belief propagation ieee transactions information
theory
zhang w phase transitions backbones sat maximum sat
proceedings seventh international conference principles practice
constraint programming




