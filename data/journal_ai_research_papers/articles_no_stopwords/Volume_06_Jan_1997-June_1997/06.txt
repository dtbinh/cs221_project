Journal Artificial Intelligence Research 6 (1997) 211-221

Submitted 12/96; published 6/97

Research Note

Complete Classification Tractability RCC-5

Peter Jonsson
Thomas Drakengren

Department Computer Information Science, Linkoping University
S-581 83 Linkoping, Sweden

petej@ida.liu.se
thodr@ida.liu.se

Abstract

investigate computational properties spatial algebra RCC-5 restricted
version RCC framework spatial reasoning. satisfiability problem RCC-5 known
NP-complete much known approximately four billion subclasses.
provide complete classification satisfiability subclasses polynomial NPcomplete respectively. process, identify maximal tractable subalgebras four
total.

1. Introduction

Qualitative spatial reasoning received constantly increasing amount interest literature.
main reason is, probably, spatial reasoning proved applicable realworld problems in, example, geographical database systems (Egenhofer, 1991; Grigni, Papadias,
& Papadimitriou, 1995) molecular biology (Cui, 1994). applications, size
problem instances huge, complexity problems algorithms highly relevant
area study. However, questions computational complexity received much attention
literature; two notable exceptions results reported Nebel (1995) Renz
Nebel (1997). article take small step towards better understanding complexity
issues qualitative spatial reasoning.
well-known framework qualitative spatial reasoning so-called RCC approach (Randell
& Cohn, 1989; Randell, Cui, & Cohn, 1992). approach based modelling qualitative spatial
relations regions using first-order logic. special interest, complexity-theoretic
standpoint, two subclasses RCC-5 RCC-8. well-known RCC-5
RCC-8 quite weak expressive power. Although used describe spatial situations,
general perhaps better described topological algebras. However,
denote algebras spatial algebras order avoid terminological confusion; term
topological algebra well-established completely different meaning mathematics (Mallios,
1986).
Bennett (1994) shown suciency using propositional logics reasoning RCC5 RCC-8. Hence, reasoning becomes ecient compared reasoning full
first-order logic. Bennett's approach uses classical propositional logic RCC-5 intuitionistic
propositional logic RCC-8. Unfortunately, logics known computationally hard.
satisfiability problem classical propositional logic intuitionistic propositional logic NPcomplete (Cook, 1971) Pspace-complete (Statman, 1979) respectively. However, complexity
underlying logic carry cases; Renz Nebel (1997) shown
satisfiability problem RCC-5 RCC-8 NP-complete. full proofs found
(Renz, 1996).
findings motivate search tractable subclasses RCC-5 RCC-8. Nebel (1995)
showed reasoning basic relations RCC-8 polynomial-time problem. Renz
Nebel (1997) improved result substantially showing following results:

c 1997 AI Access Foundation Morgan Kaufmann Publishers. rights reserved.

fiJonsson & Drakengren

exists large, maximal subclass RCC-8, denoted Hb8, contains basic relations
polynomial. Hb8 contains 148 elements 256 (58%).
exists large, maximal subclass RCC-5, denoted Hb5, contains basic relations
polynomial. Hb5 contains 28 elements 32 (87%). Furthermore, unique,
maximal subclass RCC-5 containing basic relations.

concentrate RCC-5 article. main result complete classification
subclasses RCC-5 respect tractability. classification makes possible determine
whether given subclass tractable simple test carried hand
automatically. thus gained clear picture tractability borderline RCC-5.
less necessary showing results kind, main proof relies case analysis
performed computer. number cases considered roughly 4 104 . analysis cannot,
course, reproduced research paper verified manually. Hence, include description
programs used. programs available on-line appendix article.
structure article follows: Section 2 defines RCC-5 auxiliary concepts.
Section 3 contains tractability proofs three subclasses RCC-5. Section 4 show
subclasses together Hb5 maximal tractable subclasses RCC-5. article
concludes brief discussion results.

2. RCC-5 Algebra

follow Bennett (1994) definition RCC-5. RCC-5 based notions regions
binary relations them. region p variable interpreted non-empty subsets
fixed set. noted require sets open sets topological
space. limitation since impossible distinguish interior points boundary points
RCC-5. Thus take set X use discrete topology = hX ; 2X i, every
subset X open set .
assume fixed universe variable names regions. Then, R-interpretation
function maps region variables non-empty subsets set.
Given two interpreted regions, relation described exactly one elements
set B five basic RCC-5 relations. definition relations found Table 1.
Figure 1 shows 2-dimensional examples relations RCC-5. formula form XBY
X regions B 2 B, said satisfied R-interpretation iff interpretation
regions satisfies relations specified Table 1.
express indefinite information, unions basic relations used, written sets basic
relations, leading 25 binary RCC-5 relations. Naturally, set basic relations interpreted
disjunction basic relations. set RCC-5 relations 2B denoted R5. Relations
special interest null relation ? (also denoted ?) universal relation B (also
denoted >).
formula form X fB1 ; : : :; B gY called RCC-5 formula. formula satisfied
R-interpretation = iff XB satisfied = i, 1 n. finite set RCC-5
formulae said R-satisfiable iff exists R-interpretation = satisfies every formula
. satisfying R-interpretation called R-model . Given R-interpretation =
variable v, write =(v) denote value v interpretation =.
reasoning problem study following:
n



: finite set RCC-5 formulae.
: exist R-model ?

Instance
Question

212

fiA Complete Classification Tractability RCC-5

X fDRgY
X fPOgY
X fPPgY
X fPPIgY
X fEQgY

iff X \ = ?
iff 9a; b; c : 2 X; 62 Y; b 2 X; b 2 Y; c 62 X; c 2
iff X
iff X
iff X =
Table 1: five basic relations RCC-5.

X

X





(X; )

DR

(X; )

PO

X

PP

(X; )

X

PPI

(X; )

X
(X; )

EQ

Figure 1: Pictorial example relations RCC-5.
denote problem RSAT. following, often consider restricted versions RSAT
relations used formulae subset R5. case say
set formulae use parameter problem description denote subclass
consideration, e.g., RSAT(S ). Note RSAT problem instance represented
labelled directed graph, nodes region variables arcs labelled relations
variables. Given instance RSAT, say graph graph representation
.
continue defining algebra RCC-5 relations.

Definition 2.1 Let B = fDR; PO; PP; PPI; EQg. RCC-5 algebra consists set R5 = 2B
operations unary converse (denoted ), binary intersection (denoted \) binary
composition (denoted ). defined follows:
8X; :
XR iff RX
8X; : X (R \ )Y iff XRY ^ XSY
8X; : X (R )Y iff 9Z : (XRZ ^ ZSY )
subset R5 , said subalgebra RCC-5
iff closed converse, intersection
composition. easily verified R = fB B 0 jB 2 R; B 0 2 g, i.e., composition
^

^

union component-wise composition basic relations.
Next, introduce closure operation. closure operation transforms given subclass
R5 one polynomially equivalent original subclass respect satisfiability.
operation similar closure operation RCC-5 introduced Renz (1996)
pose restrictions given subclass. (Renz's operation requires fEQg member
subclass closed.)

Definition 2.2 Let R5. denote closure , defined least subalgebra
containing closed converse, intersection composition.
Observe subset R5 subalgebra iff = .

next lemma given without proof. proof analogous result Allen's algebra
found Nebel Burckert (1995).
213

fiJonsson & Drakengren

Lemma 2.3 Let R5. RSAT(S ) polynomially transformed RSAT(S ) vice
versa.

Corollary 2.4 Let R5. RSAT(S ) polynomial iff RSAT(S ) polynomial. RSAT(S )
NP-complete iff RSAT(S ) NP-complete.

3. Tractable Subclasses RCC-5

begin section defining four tractable subalgebras RCC-5, found Table 2.
Later on, show algebras maximal tractable subalgebras RCC-5.
28
tractability first algebra, R28
5 , established Renz Nebel (1997). name R5
ects fact algebra contains 28 elements.

Theorem 3.1 RSAT(R28
5 ) polynomial.
tractability second algebra, R20
5 , settled quite easily. algorithm found
Figure 2.
20
Lemma 3.2 Let instance RSAT(R20
5 ). algorithm accepts input iff

R-model.

Proof: if: show contrapositive, i.e., A20 rejects R-model. Clearly,
satisfiability preserved transformations made lines 7-10. Note XRX 2
EQ 2 R satisfiable. Thus satisfiable algorithm rejects line 5. Similarly,
satisfiable algorithm rejects line 6.

only-if: Consider set completion line 11. denote set 0 . Obviously, 0

satisfiable initial satisfiable. observe line 7 ensures 0 relate
variables EQ. Furthermore, line 8 guarantees one relation relates
two variables.
Now, construct R-model 0 follows: Let V set variables 0 . Let
assign non-empty sets pairwise disjoint members V . Let U = 2 (X ).
Introduce set values U 0 = fff j X; 2 V g satisfying following:
X

V

X;Y

1. = iff X = Z = W ;
2. arbitrary X; 2 V , 62 U .
X;Y

Z;W

X;Y

relation type X fPOgY X fPO; EQgY , extend sets (X ) (Y )
element .
Clearly, two sets X; disjoint (and thus related DR) unless X fPOgY
X fPO; EQgY . cases, X must disjoint. fact, introducing
, forced X fPOgY hold satisfies formulae type X fPOgY well
formulae type X fPO; EQgY . Hence, R-model 0 implies R-satisfiability
.
2
X;Y

X;Y

Theorem 3.3 RSAT(R20
5 ) polynomial.
Proof: Algorithm A20 correctly solves RSAT(R20
5 ) problem previous lemma. Further-

more, number iterations bounded number variables number
formulae given instance tests easily performed polynomial time.
2
Next show tractability RSAT(R17
5 ).
214

fiA Complete Classification Tractability RCC-5

20 R17 R14
R28
5 R5
5
5
?


fDRg

fPOg

fDR; POg

fPPg


fDR; PPg

fPO; PPg

fDR; PO; PPg

fPPIg


fDR; PPIg

fPO; PPIg

fDR; PO; PPIg

fPP; PPIg

fDR; PP; PPIg


fPO; PP; PPIg


fDR; PO; PP; PPIg

fEQg


fDR; EQg

fPO; EQg

fDR; PO; EQg

fPP; EQg



fDR; PP; EQg

fPO; PP; EQg


fDR; PO; PP; EQg
fPPI; EQg



fDR; PPI; EQg

fPO; PPI; EQg


fDR; PO; PPI; EQg
fPP; PPI; EQg


fDR; PP; PPI; EQg


fPO; PP; PPI; EQg


>


Table 2: maximal tractable subalgebras RCC-5.

Theorem 3.4 RSAT(R17
5 ) polynomial.
Proof: Consider algorithm A17 Figure 2. exist X; X ?Y 2

satisfiable. Otherwise, let variables value. Since EQ member
every relation occurs , interpretation R-model .
2

continue proving RSAT(R14
5 ) tractable problem. Let
9
R5 = ffPP; EQgg [ fR [ fPP; PPIg j R 2 R5g:
9
Using machine-assisted proof, shown R14
5 = R5 sucient prove
9
tractability RSAT(R5) Corollary 2.4. program used showing available
on-line appendix article.
on, let arbitrary instance RSAT(R95) G = hV; E graph representation. following proofs similar spirit proofs appearing Drakengren
215

fiJonsson & Drakengren

1
2
3
4
5
6
7
8
9
10
11
12

algorithm A20
Input: instance RSAT(R20
5 ).
repeat
0
9X; R : XRX 2 EQ 62 R reject
9X; : X ?Y 2 reject
9X; : X =6 X fEQgY 2 substitute X
9X; Y; R; : XRY 2 XSY 2
( , fXRY; XSY g) [ fX (R \ )Y g
9X; R : XRX 2 EQ 2 R , fXRX g
= 0
accept

1
2
3
4

algorithm A17
Input: instance RSAT(R17
5 ).
9X; X ?Y 2 reject
else accept

1
2
3
4
5
6
7

algorithm A9
Input: instance RSAT(R95) graph representation G.
Let G0 graph obtained G removing arcs labelled fPP; EQg.
Find strongly connected components C G0
every arc e G whose relation contain EQ
e connects two nodes C reject
accept
17
9
Figure 2: Algorithms RSAT(R20
5 ), RSAT(R5 ) RSAT(R5).

Jonsson (1996). algorithm reminiscent algorithm van Beek (1992) deciding
satisfiability point algebra.
Definition 3.5 RCC-5 relation R said acyclic relation iff cycle G R
every arc never satisfiable.
relation PP example acyclic relation fPP; EQg acyclic. continue
showing properties acyclic relations.
Proposition 3.6 Let R acyclic relation. every relation R0 R acyclic.
Proof: Since taking subsets R constrains satisfiability further, result follows.
2
Proposition 3.7 Let R acyclic relation, choose fR0 j R0 Rg. Then,
cycle G every arc labelled relation unsatisfiable.
Proof: argument previous proposition.
2
following definition needed following proofs.
Definition 3.8 Let instance R-satisfiability problem, model , r 2 R5
relation two region variables X . r said satisfied r0
relation r0 r, Xr0 satisfied .
216

fiA Complete Classification Tractability RCC-5

definition may seem bit cumbersome essence clear. example, let X
region variables related X fPO; PPgY , model X interpreted f1; 2g
f1; 2; 3g. , fPO; PPg satisfied fPPg, fPO; PPg.
Lemma 3.9 Let R acyclic relation, A; A0 sets fR0 j R0 Rg A0
fa [ fEQg j 2 Ag. Then, every cycle C labelled relations [ A0 satisfiable iff contains
relations A0 . Furthermore, relations cycle satisfied EQ.
Proof: only-if: Suppose cycle C satisfiable contains relation
A. Apply induction number n arcs cycle. n = 1, get contradiction
Proposition 3.7. So, suppose induction C contains n + 1 arcs. Let R-model
relations C . cannot case every relation C satisfied
relation A, Proposition 3.7. Thus, relation R0 C satisfied EQ.
collapse two variables connected R0 one variable, cycle n nodes
containing relation A. contradicts induction hypothesis.
if: Suppose cycle C contains relations A0 . C satisfied choosing EQ
every arc. Notice only-if part implies C must satisfied choosing EQ every arc.

2

Hence, variables forced equal.

studied acyclic relations, turn attention DAG-satisfying relations.
formal definition follows.
Definition 3.10 basic relation B said DAG-satisfying iff DAG (directed acyclic
graph) labelled relations containing B satisfiable, i.e., corresponding RSAT problem
model.
typical example DAG-satisfying relation EQ. Given DAG labelled relations containing EQ, always satisfy relations assigning non-empty set variables.
show PP DAG-satisfying relation.
Definition 3.11 Let G arbitrary DAG. node v G said terminal node iff
arcs start v.
Lemma 3.12 basic relation PP DAG-satisfying.
Proof: Let G DAG labelled relations containing PP. show G satisfied
R-model . Induction n number nodes G. case n = 1
trivial. Suppose G n +1 nodes remove terminal node g. induction, remaining
graph G0 = hV 0 ; E 0i satisfiable model 0.SWe shall construct model G,
agrees 0 every variable G0. Let = fM 0(v) j v 2 V 0 g let element
. Let (g) = [ fffg. Obviously, model G.
2
state simple result Drakengren Jonsson (1996).
Lemma 3.13 Let G irre exive1 acyclic subgraph D. arcs G
reoriented resulting graph acyclic.
specializing result, get next lemma.
Lemma 3.14 Let G irre exive acyclic subgraph let arcs labelled
relations containing PP, arcs labelled relations containing PP PPI.
G R-satisfiable.
1. graph irre exive iff arcs node v node v.

217

fiJonsson & Drakengren

Proof: Reorient arcs G resulting graph acyclic. always possible
previous lemma. Furthermore, whenever arc reoriented, invert relation
arc, G0 satisfiable iff G is. construction, arcs containing PP PPI
reoriented, every arc DAG G0 contains PP and, thus, since PP DAG-satisfying
Lemma 3.12, G0 satisfiable. Consequently, G satisfiable.
2
Lemma 3.15 Algorithm A9 correctly solves RSAT(R95).
Proof: Assume algorithm finds strongly connected component G0 (which contains
relation fPP; EQg), containing two nodes G connected arc e labelled
relation R0 contain EQ. exists cycle C relation
every arc contains EQ, e connects two nodes C e part cycle.
Lemma 3.9, C satisfied choosing relation EQ every arc C , since R0

admit EQ, C unsatisfiable.
Otherwise, every strongly connected component collapsed single node, removing
arcs start end collapsed node. transformation retains satisfiability using
argument above. collapsing, subgraph obtained considering arcs labelled
fPP; EQg acyclic. Since remaining arcs labelled relations containing PP
PPI, graph R-satisfiable Lemma 3.14. (Note graph irre exive since every
node contained strongly connected component.)
2
Lemma 3.16 Given graph G = hV; Ei, algorithm A9 runs O(jV j + jEj) time.
Proof: Strongly connected components found O(jV j + jEj) time (Baase, 1988)
remaining test made O(jV j + jE j) time.
2
Theorem 3.17 RSAT(R14
5 ) solved polynomial time.
14
9
Proof: RSAT(R95) polynomial previous two lemmata. Since R14
5 = R5, RSAT(R5 )
solved polynomial time Corollary 2.4.
2

4. Classification RCC-5

give classification RCC-5 need two NP-completeness results.
Theorem 4.1 RSAT(S ) NP-complete
1. (Renz & Nebel, 1997) C1 = ffPOg; fPP; PPIgg ,
2. C2 = ffDR; POg; fPP; PPIgg .
Proof: proof C2 polynomial-time reduction RSAT(C1). Let arbitrary
instance RSAT(C1). Construct following set:
0 = fX fPP; PPIgY j X fPP; PPIgY 2 g [ fX fDR; POgY j X fPOgY 2 g:
Clearly, 0 obtained polynomial time 0 instance RSAT(C2). show
satisfiable iff 0 satisfiable.
only-if: Assume exists R-model . hard see R-model

0 since X fPOgY X fDR; POgY . Thus 0 R-satisfiable R-satisfiable.

if: Assume existence R-model 0 assigns subsets set U region variables

0 . Let element 62 U . construct new interpretation follows:
(x) = 0 (x) [ fffg every variable x 0 . easily seen following holds :
218

fiA Complete Classification Tractability RCC-5

1.
2.
3.
4.

xfDRgy 0 xfPOgy .
xfPOgy 0 xfPOgy .
xfPPgy 0 xfPPgy .
xfPPIgy 0 xfPPIgy .

easy see xfPP; PPIgy 0 xfPP; PPIgy . Similarly, xfDR; POgy
0 xfPOgy . follows model R-satisfiable 0 R-satisfiable.
2
main theorem stated proved.

Theorem 4.2 R5, RSAT(S ) polynomial iff subset member R =
20 17 14
fR28
5 ; R5 ; R5 ; R5 g, NP-complete otherwise.
Proof: if: R 2 R , RSAT(R) polynomial shown previous section.
only-if: Choose R5 subset algebra R . subalgebra
R 2 R , choose relation x x 2 x 62 R. always done since 6 R. Let
X set relations note X subset algebra R . set R
contains four algebras construction X , jX j 4. Observe RSAT(S ) NP-complete
RSAT(X ) NP-complete.
show RSAT(S ) NP-complete, machine-assisted case analysis following
P

P

P

P

P

P

form performed:


4
X
32
1. Generate subsets R5 size 4.
= 41449 subsets.
=0


2. Let set. Test: subset subalgebra R C
2 f1; 2g.
P

test succeeds . Hence, RSAT(S ) NP-complete Corollary 2.4.



2

program used showing previous theorem appears on-line appendix article.

5. Discussion

main problem reporting tractability results restricted classes problems diculty
isolating interesting relevant subclasses. systematic approach building complete classifications way partially overcoming problem. problem class consideration
regarded relevant, tractable subclasses regarded relevant computational
problem interest. especially true spatial reasoning size problem instances extremely large; one good example spatial reasoning connection Human
Genome project (Cui, 1994).
Another advantage complete classifications satisfactory scientific
point view; gain clear picture borderline tractability intractability
intrinsic scientific value. common critique complete classifications tend generate
certain classes totally useless. instance, subalgebra R17
5 certainly use.
must made clear critique unjustified since researcher makes complete
classification deliberately invent useless classes. Instead, useless classes appear
complete classification, unavoidable parts classification.
219

fiJonsson & Drakengren

work reported article extended many different ways. One obvious extension
study computational problems RSAT problem. Renz (1996) studied two
problems, RMIN RENT, certain subclasses RCC-5 RCC-8. RMIN problem
decide set spatial formulae minimal, i.e., whether basic relations every formula
satisfied not. RENT problem decide whether formula XRY entailed
set spatial formulae. Grigni et al. (1995) study stronger form satisfiability refer
realizability: finite set RCC-5 formulae said realizable iff exist regions
plane bounded Jordan curves satisfy relations . Grigni et al. (1995)
shown realizability problem much harder satisfiability problem. instance,
deciding realizability formulae constructed two relations DR PO NP-complete
satisfiability problem polynomial. Certainly, studies realizability problem would
worthwhile.
Another obvious research direction completely classify spatial algebras, RCC8. RCC-8 contains 2256 1077 relations question whether feasible remains
answered.

6. Conclusions

studied computational properties RCC-5. 232 possible subclasses classified respect whether corresponding satisfiability problem tractable not.
classification reveals four maximal tractable subclasses algebra.

References

Baase, S. (1988). Computer Algorithms: Introduction Analysis (2nd edition). Addison Wesley,
Reading, MA.
Bennett, B. (1994). Spatial reasoning propositional logics. Doyle, J., Sandewall, E., &
Torasso, P. (Eds.), Proceedings 4th International Conference Principles Knowledge
Representation Reasoning (KR-94), pp. 165{176 Bonn, Germany. Morgan Kaufmann.
Cook, S. A. (1971). complexity theorem-proving procedures. Proceedings 3rd ACM
Symposium Theory Computing, pp. 151{158.
Cui, Z. (1994). Using interval logic order assembly. Proceedings Second International
Conference Intelligent Systems Molecular Biology, pp. 103{111. AAAI Press.
Drakengren, T., & Jonsson, P. (1996). Maximal tractable subclasses Allen's interval algebra: Preliminary report. Proceedings 13th (US) National Conference Artificial Intelligence
(AAAI-96), pp. 389{394 Portland, OR, USA. American Association Artificial Intelligence.
Egenhofer, M. J. (1991). Reasoning binary topological relations. Gunther, O., & Schek,
H. J. (Eds.), Advances Spatial Databases, pp. 143{160. Springer-Verlag.
Grigni, M., Papadias, D., & Papadimitriou, C. (1995). Topological inference. Mellish, C. (Ed.),
Proceedings 14th International Joint Conference Artificial Intelligence (IJCAI-95),
pp. 901{906 Montreal, PQ, Canada. Morgan Kaufmann.
Mallios, A. (1986). Topological Algebras. Selected Topics. North-Holland, Amsterdam.
Nebel, B. (1995). Computational properties qualitative spatial reasoning: First results.
Wachsmuth, I., Rollinger, C.-R., & Brauer, W. (Eds.), KI-95: Advances Artificial Intelligence, pp. 233{244 Bielefeld, Germany. Springer-Verlag.
220

fiA Complete Classification Tractability RCC-5

Nebel, B., & Burckert, H.-J. (1995). Reasoning temporal relations: maximal tractable
subclass Allen's interval algebra. Journal ACM, 42 (1), 43{66.
Randell, D. A., & Cohn, A. G. (1989). Modelling topological metrical properties physical
processes. Brachman, R. J., Levesque, H. J., & Reiter, R. (Eds.), Proceedings 1st
International Conference Principles Knowledge Representation Reasoning (KR-89),
pp. 55{66 Toronto, ON, Canada. Morgan Kaufmann.
Randell, D. A., Cui, Z., & Cohn, A. G. (1992). spatial logic based regions connection.
Swartout, B., & Nebel, B. (Eds.), Proceedings 3rd International Conference Principles
Knowledge Representation Reasoning (KR-92), pp. 165{176 Cambridge, MA, USA.
Morgan Kaufmann.
Renz, J. (1996). Qualitatives raumliches Schlieen: Berechnungseigenschaften und eziente Algorithmen. Master thesis report, Fakultat fur Informatik, Universitat Ulm. Available
http://www.informatik.uni-freiburg.de/sppraum.
Renz, J., & Nebel, B. (1997). complexity qualitative spatial reasoning: maximal
tractable fragment region connected calculus. Proceedings 15th International
Joint Conference Artificial Intelligence (IJCAI-97) Nagoya, Japan. Morgan Kaufmann.
appear.
Statman, R. (1979). Intuitionistic logic polynomial-space complete. Theoretical Computer Science,
9 (1), 67{72.
van Beek, P. (1992). Reasoning qualitative temporal information. Artificial Intelligence, 58,
297{326.

221


