journal artificial intelligence

submitted published

demand side energy management via multiagent coordination
consumer cooperatives
andreas veit

andreas cs cornell edu

department computer science
cornell university
ithaca ny usa

ying xu
ronghuo zheng

yingx andrew cmu edu
ronghuoz andrew cmu edu

tepper school business
carnegie mellon university
forbes avenue
pittsburgh pa usa

nilanjan chakraborty

nilanjan chakraborty stonybrook edu

department mechanical engineering
stony brook university
stony brook ny usa

katia sycara

katia cs cmu edu

robotics institute school computer science
carnegie mellon university
forbes avenue
pittsburgh pa usa

abstract

key challenge creating sustainable energy efficient society make consumer
demand adaptive supply energy especially renewable supply article
propose partially centralized organization consumers agents namely consumer cooperative purchases electricity market cooperative central coordinator buys
electricity whole group technical challenge consumers make demand
decisions private demand constraints preferences share
coordinator agents propose novel multiagent coordination shape
energy demand cooperative coordinate individual consumers incomplete information coordinator determines virtual price signals sends consumers induce
shift demands required prove converges central optimal solution minimizes electric energy cost cooperative additionally
present time complexity iterative implications agents
incentive compatibility furthermore perform simulations real world consumption
data characterize convergence properties b understand effect
differing demand characteristics participants well different price functions cost
reduction convergence time scales linearly agent population
size length optimization horizon finally observe participants flexibility
shifting demands increases cost reduction increases cost reduction sensitive
variation consumption patterns consumers
ai access foundation rights reserved

fiv eit x u z heng c hakraborty ycara

introduction
two key issues creating sustainable energy efficient society increase penetration
renewable sources manage supply demand reduce demand peaks
maintaining supply demand balance one way commonly used achieve
demand supply balance supply requested demand whenever occurs however
attempting achieve demand supply balance adjusting supply side leads use
flexible usually diesel operated power plants expensive inefficient emit large
amount carbon alternative adjusting supply side adjust demand
consumers palensky dietrich via demand response programs demand response
defined changes electricity consumption end users normal consumption
patterns response changes price electricity time albadi el saadany
several different forms demand response programs developed overview
see albadi el saadany typical example incentive program customers receive payment participation direct load control programs utilities
remotely control power consumption consumers appliances switching
small scale pilot studies direct load control successful reducing peak energy consumption however consumers uncomfortable yielding control appliances utility
companies rahimi ipakchi medina muller roytelman another type demand management program price energy rates variable follow real cost
electricity objective indirect method control overall demand incentivizing consumers flatten demand curve shifting energy peak peak times
typical example programs time use pricing price peak times
higher price peak times recent technological advances smart meters
smart appliances created potential enable direct real time participation individual
consumers energy market thus make real time price demand management programs
reality however two key realizing potential first despite presence
small pilot programs utilities consider individual consumers insufficient size considered
demand response services second consumers participate market directly rather
utilities stability system may compromised e g herding ramchurn
vytelingum rogers jennings considering challenges mohsenian rad wong
jatskevich schober leon garcia argue good demand side management program
focus controlling aggregate demand important economic load dispatching wood wollenberg group consumers instead individual consumers
coordinating group consumers called consumer cooperative
introduced studied
consumer cooperative collective allows partial centralization consumers represented
group coordinator mediator agent purchases electricity utilities market
behalf consumer configurations potentially increase energy efficiency via aggregation demand reduce peak power demand coordinator neither market maker
traditional demand response aggregator jellings chamberlin since set energy
prices aims incur profits selling market rather role akin social planners
sense manages demand associated consumer group electricity cost
group minimized b individual group members autonomously decentralized
manner decide shift demands maintaining privacy individual demand preferences
constraints members cooperative typically geographically co located close
proximity one another example small neighborhood households enterprises
practice close proximity required due limitations distribution infrastructure geograph

fim ultiagent c oordination emand ide e nergy anagement

ically separated system operators markets electricity suppliers proposed coordination
could benefit already existing structures universities malls industrial parks
commercial estates large residential complexes although organizations may already purchase electricity centralized manner constituent members e g firms industrial park
currently coordinated keep constraints private
consumer cooperatives offer advantages energy utility companies consumers
utility companys perspective consumer groups large enough useful demand response programs predictable demand shifts compared individual consumers barbose goldman neenan give survey utility experience price programs
conclude participants large industrial customers individual consumers participation energy groups allows retain control appliances addition
consumers obtain electricity better prices would purchased
electricity individually price advantage due three reasons first groups size allows
group enter flexible purchase contracts price paid consumers
reflects actual cost production accurately case current long term fixed
contract structures kirschen second buying collectively group benefit
discounts analogous group insurance programs third negotiated electricity contracts
price usually consists two components one reflecting actual energy production cost
premium volatility energy demand supply buying group
help reduce premium volatility provided demands group members
coordinated making total demand stable
aim design effective schemes coordinating electricity demand
agents purchasing electricity consumer cooperative technical challenge
endeavor fact central coordinator know constraints individual
consumers thus cannot compute optimal demand schedule furthermore
actual cost electricity consumption depends aggregate consumption profile agents
however agents may want share demand patterns constraints agents
coordinator therefore present designed enable central agent coordinate consumers achieve optimal centralized load individual agents decide
demand shifting autonomously retain private knowledge demand constraints
papers contributions follows first present iterative coordination
minimize energy cost consumer cooperative preserves privacy individual
demand constraints costs consumers second prove converges
centralized optimal solution provide computational complexity third provide
formal arguments incentive compatibility coordination scheme fourth present
discuss extensive simulation real world data preliminary version work
appeared work veit xu zheng chakraborty sycara
organized follows section give overview related work
point differences section formulate cost optimization consumer cooperative section introduce demand scheduling
consumer cooperative particular section introduce basic iterative section prove convergence optimal solution section
introduce general iterative section prove convergence general
surface resemblance centralized coordinator determines resource allocations agents private preferences coordinator tries elicit typically addressed
via vickrey clark groves mechanisms differs fundamental ways discussed
related work section



fiv eit x u z heng c hakraborty ycara

settings section provide complexity analysis convergence section provide formal arguments incentive compatibility consumers section
evaluate coordination simulations real world consumption data
finally section summarize main contributions offer perspective
future work

related work
mentioned introduction demand response programs vary classical direct load
control price programs real time prices introduce
uses variable price signals coordinate energy consumption consumer cooperative
therefore restrict discussion demand management variable price signals
current literature price demand shaping mostly operates assumption
desirable automated autonomous system e g smart meter receives price
signals uses help consumer schedule demand minimize electricity cost
satisfying demand preferences constraints two types price signals
used dynamic deterministic prices literature price demand response
programs considers case deterministic prices electricity prices time slots
known consumption case applies long term contracts day ahead markets
horizon sufficiently short see vytelingum ramchurn rogers jennings
ramchurn vytelingum rogers jennings known electricity prices consumers
compute consumption schedule ahead time e g daily consumption plan annual
production plan falls category demand scheduling deterministic prices
approaches demand scheduling proposed literature differ important characteristics first differ level studied secondly differ
objective demand scheduling different levels studied include level single consumer market maker grid operator different
objectives include minimizing cost single consumer minimizing total cost power
generation reducing peak average ratio demand optimizing grid stability
papers studying demand scheduling level grid operators
major concern grid stability particular objectives include minimization power
flow fluctuations tanaka et al minimization power losses voltage deviations clement nyns haesen driesen
work demand scheduling done level consumers important characteristic regime electricity prices often exogenously fixed influenced
demand scheduling e consumer price taker almost papers regime focus
micro demand scheduling one multiple appliances single residential household
commercial building typical objective minimize incurred electricity cost example chu jong study air conditioning load control pedrasa spooner macgill
optimize operation schedule distributed energy resources including space heater
pool pump etc papers studying different perspectives example philpott pettersen samadi mohsenian rad wong schober address
challenge uncertainty loads consumers energy consumption stream
close work since well study demand management level
consumers however instead studying single consumer consider group consumers
consumer cooperative buys electricity utility company known price scheme
work differs literature following aspects size shift system stability


fim ultiagent c oordination emand ide e nergy anagement

indirect control crucially information privacy first literature
considers control single consumer practice may difficult utility companies
grid operators deal individual consumers demand response programs demand shift individual consumer might small magnitude compared aggregated
necessary shift thus unclear whether scheme induce shift sufficient size
contrast utilitys perspective consumer cooperative studied work large enough
useful demand response programs second literature assumes
consumers participate markets directly however concerns voiced
without control utility companies stability system may compromised
uncontrolled distributed interactions kirschen contrast demands consumers
consumer cooperative coordinated central coordinator minimize electricity procurement cost cooperative buying group helps reduce demand volatility
coordinated demand management achieve higher stability demand reduce demand
peaks third common assumption literature demand manager direct
control appliances household perfect knowledge loads operation
constraints however cooperative coordinator lacks control demand scheduling
individual consumers moreover demand constraints preferences private knowledge
individual consumer known coordinator consumers
another stream related work demand scheduling level market maker contrast previous approaches regime coordinator e market
maker set electricity prices consumers often use price lever influence
demand number consumers studies stream categorized two groups
centralized decentralized dietrich latorre olmos ramos compare demand response programs electric system high wind penetration two different settings e
centralized vs decentralized centralized often reaches higher overall
cost savings disadvantage central knowledge consumers constraints preferences necessary partially decentralized avoids limitation keeps consumers
constraints preferences private achieving proven optimality solution
coordinator uses prices incentivize consumers shift demand coordinator
needs pay close attention possibility herding phenomenon whereby agents move
demand towards low price times simultaneously thus cause spike demand bring
instability system address issue addition price signal papers adopt
auxiliary methods make agents gradually change loads voice vytelingum ramchurn
rogers jennings charge agents additional fee much change
demand profile one period next ramchurn et al introduce adaptive mechanism controlling rate frequency agents allowed adapt loads
readjust demand profile vytelingum et al introduce compensation signal sent
agents providing estimate much aim change behavior
approaches may perform well unlike work provide formal guarantees
proposed converge optimal solution moreover approaches require
coordinator market maker charge consumers arbitrarily e g imposing additional fees feature may implementable acceptable practice contrast
coordinator akin social planner must ensure total charge energy demand
agents equal actual amount paid energy supplier
papers address decentralized demand side management game theoretic perspective mainly focus deriving charging mechanism make consumers
reach stable demand equilibrium achieves central objective papers often share


fiv eit x u z heng c hakraborty ycara

underlying assumption individual consumers unit electricity cost increases consumers aggregate consumption assumption holds setting energy cost
period increases difference demand supply wu mohsenian rad huang
peak average ratio mohsenian rad et al nguyen song han
unit market price per period increases aggregate demand vytelingum voice
ramchurn rogers jennings atzeni ordonez scutari palomar fonollosa
work mohsenian rad et al nash equilibrium demand achieves optimality via
designed billing strategy individual cost proportional total energy cost however billing strategy consumer must estimate consumers demand
making decision therefore implement proposed consumers
needs coordinate iterative manner exchange demand profiles
iteration may cause invasions consumers privacy works wu et al
nguyen et al vytelingum et al atzeni et al individual consumers dont need interact communicate central coordinator
papers coordinator maintains equilibrium designing unit price
aggregate demand often implemented distributed iterative scheme
iteration agents report loads coordinator coordinator updates price
accordingly although papers ensure minimum information exchange none
theoretically proven would converge centralized optimal solution
contrast safeguards privacy consumers proves
converges centralized optimal solution
surface resemblance central coordinator determines resource allocations agents private preferences coordinator tries elicit
typically addressed via vickrey clark groves mechanisms reason considering vcg type mechanisms one key requirements application coordinator pay supplier groups electricity demand prices
given supplier thus revenue namely sum payments individual agents make
equal actual amount paid supplier words jargon mechanism design budget balance key requirement well documented
literature vcg type mechanisms guarantee budget balance green laffont
hurwicz impossible design mechanism achieves three properties
namely efficiency budget balance strategy proofness addition budget
balance allocation efficiency desired social goal achieves budget balance lemma allocation efficiency theorem although cannot guarantee
strategy proofness due impossibility prove manipulation strategy exists
dominates truth reporting theorem

formulation
model consumer group consists n members period divided
discrete time slots number discrete time slots depends market price structure
differ depending utility companies example time use pricing
different prices day night whereas hourly time use pricing let
r n matrix row matrix ri electricity demand agent
fact shown ausubel milgrom context broadcast spectrum allocation
revenue obtained vcg type mechanisms even zero case would mean agents would
pay money coordinator making impossible pay supplier



fim ultiagent c oordination emand ide e nergy anagement



twolevel threshold rate




high load





low load







high load
price cents kwh






threshold hj

total cost

marginal price pm
j
j





twolevel threshold rate



dollars

cents kwh





low load
price cents kwh

threshold hj









aggregated demand j








kwh

marginal electricity prices





aggregated demand j





kwh

b total electricity cost

figure sample two level increasing threshold pricing model used bc hydro
n call ri demand profile agent entry rij electricity demand
p
agent time slot j total aggregated demand time slot j j n
rij average
market price unit electricity consumer group time slot j defined pj j
assume typical market price function prices different time slot
price threshold structure means marginal electricity prices differ among different demand levels time slot every unit electricity consumed specified price
threshold charged lower price additional unit exceeding threshold charged
higher price thus marginal electricity price time slot denoted pm
j j nondecreasing function total demand marginal price given demand level payment
increment decrement adding reducing one unit electricity figure shows example
two level increasing threshold pricing model adopted bc hydro marginal price
ph
j hj
j
two level threshold structure formally written follows pm




j
j
l
p j j hj
l

ph
j pj hj price threshold time slot j let x denote positive value term
x e x max x x denote negative value respectively e x min x
total energy cost time slot j thus integral marginal prices figure b shows total
electricity cost aggregated demand two level threshold pricing model total
electricity cost computed


l
l
pj j j ph
j j hj pj j hj pj hj



demand profile agent ri must satisfy individual constraints overall demand
consists two types loads shiftable loads non shiftable loads mohsenian rad et al
mohsenian rad leon garcia wu et al model demand constraints
shiftable non shiftable loads example non shiftable loads typically refrigerator
bc hydro canadian utility company pricing model obtained www bchydro com



fiv eit x u z heng c hakraborty ycara

shiftable loads include dishwasher electric vehicles washer dryer etc appliances modeled
total demand required course horizon upper lower bounds
demand time slot well earliest start latest end times constraints form
convex set p
assume total demand agent whole
period fixed e
j rij total demand agent
consider loads demand constraints form convex set denote xi
constraint set private knowledge agent share neither firms
coordinator application scenarios agent determines energy demand profile
consider additional costs associated demand schedule example given
factory energy commonly used production changing energy demand schedule
therefore may mean changing production process thereby production cost agent
cost denoted gi ri assume cost function convex overall cost function
p
agent
j pj j rij gi ri
objective minimize sum agents costs overall energy allocation written
p
pn pm
pj j rij n
min c r
gi ri

j
pm

ri xi j rij
energy allocations rij optimization variables r matrix demand
profiles agents note defined convex
xi although
p setp

objective function non linear convex following first n
j pj j rij

pm
j pj j j convex non decreasing j indicated equation together
pm
pn
j
j pj j j convex rij j boyd vandeni rij conclude
berghe since gi ri convex total cost function c r summation convex
functions convex thus convex minimization

solution
although convex optimization since constraints preferences
agents private knowledge optimal demand profiles cannot computed directly
central coordinator objective function although sum individual costs agent
coupled price electricity time slot j depends aggregated demand
agents j however since constraints agent specific naturally
separable therefore primal decomposition bertsekas tsitsiklis used
solve sub correspond agent optimizing energy
cost subject individual constraints central coordinator compute appropriate
information sent agents guide demand pattern towards time slots lower
prices corresponds master primal decomposition methods
since agents know electricity market prices individually optimize demand
according prices let resulting demand profile called uncoordinated demand
profile figure depicts aggregated uncoordinated demand profile setting three
time slots seen aggregated demand time slot threshold h
aggregated demand time slots h h thus shift
demand time slot time slots would reduce total cost group however
since agents dont know demand agents cannot shift demand
intuitive solution coordinator coordinate demand would inform


fim ultiagent c oordination emand ide e nergy anagement




threshold
h

high price
low price


h









h








h



high price

threshold

h












time slot j





aggregated demand



h

low price

c coordinated scenario



aggregated demand








b herding scenario




aggregated demand j

aggregated demand j

aggregated demand

aggregated demand j

initial scenario




threshold









high price
h
low price


h


h








time slot j









time slot j



figure comparison demand profiles uncoordinated herding coordinated scenarios
agents aggregated demand time slot knowing market price agents could
solve individual optimization problematic agents
dont know demand constraints preferences agents group costs
strongly depend demand agents example agents knowing market
price current aggregated demand could shift much demand possible supposedly
cheap time slot would lead load synchronization herding phenomenon agents
shift demand supposedly cheap time slot resulting demand peak time slot
thus increasing total cost effect herding phenomenon shown figure b
much demand shifted time slot resulting demand threshold
time slots thus key challenge design information coordinator sends
agents virtual price signal enable system minimize overall cost
virtual price signal final price agents pay information
would pay given current aggregated demand virtual price signal enables
agents foresee possible price increment reduction caused demand shifting therefore virtual price signal agent time slot j svij rij r function variable rij
denoting demand agent time slot j price signal computed previous aggregate demand profile r therefore included price function ease
readability time made explicit notation used proofs superscript v indicates virtual price contrast real market prices pj j design virtual
price signal coordinator first computes amount demand ideally shifted
time slot shown figure amount denoted j j difference
total aggregated demand price threshold time slot readability
refer j delta increment noting delta could negative values e could
decrement avoid herding delta increment needs divided among agents
threshold price signal needs designed agent price threshold
lower price threshold serves penalize total demand time slot going threshold thus agents know maximum amount demand could shift
prices solve individual optimization exact calculation price
signal svij rij r shown section given price signal virtual cost optimization
agent solves
p
v
min cvi ri r min
j sij rij r rij gi ri
p


ri xi j rij
note overall convex optimization thus solvable however individual constraints cost functions agents might
able shift much demand assigned means virtual price signal


fiv eit x u z heng c hakraborty ycara

implies aggregated demand shift less amount could achieved
figure c shows case total demand second time slot remains threshold whole could shifted order shift remaining demand another
price signal dividing remaining amount would necessary motivates us design
iterative coordinator update virtual price signal consumers
feedback thus gradually adjust individual demands central optimal solution
basic coordination
present basic coordination details virtual price signal design
energy allocation setting horizon two time slots cost
shifting demand g although called basic setting setting practical
relevance represents commonly used time use pricing schemes divide
horizon two time slots albadi el saadany one time slot typically high
load high prices one time slot typically low load low prices electricity
overview lgorithm
recall ri denotes demand profile agent r matrix demand profiles
agents let r updated demand profile agent iteration r
demand profile agents
initialization agent computes initial uncoordinated electricity demand profile ri
solving market prices sends coordinator
coordinator adds individual demands determine aggregated demand j
time slot j calculates delta increment j demand shifted
time slot finally coordinator divides demand among agents computes
virtual price signals svij rij r agent time slot j
coordinator sends virtual price signals agents
receiving virtual price signal agent individually calculate demand
profiles r according optimization
agents send demand profiles back coordinator
coordinator compares demand profiles old profiles agent changed
demand profile e r r coordinator stops otherwise sets r r
goes step
c oordination v irtual p rice ignal
virtual price signal one agent one time slot threshold price function demand
time slot demand specified threshold charged low price demand
threshold charged higher price virtual price signal therefore parameterized
h
low marginal price pl
j high marginal price pj price threshold hij r
specifies demand levels prices apply virtual price svij agent time slot j
computed parameters follows
pl h r ph r h r
ij
ij
j ij
j
rij hij r
rij
svij rij r

l
pj
rij hij r


fim ultiagent c oordination emand ide e nergy anagement

aggregated demand iteration



agent demand r

j










h



j





















h



r

h






time slot j

h



r






agent demand r

aggregated demand j



agent demand local optimization

r





h







h


r





time slot j

agent demand local optimization





time slot j

figure division j among agents virtual price signal yellow demand belongs
agent red demand agent amount demand shifted
time slot indicates amount demand needs shifted time slot

agent demand local optimization



r



h















h



r








time slot j

agent demand local optimization


j



agent demand r

aggregated demand iteration









h

r

h

aggregated demand j

agent demand r


j



r



h







h















time slot j



time slot j



figure demand agents local optimization agent cannot reduce entire demand
time slot e r h demand constraints left top plot thus
aggregated demand time slot still threshold e h therefore central
coordinator sends modified price signal agents continues
agents stop shifting demands



fiv eit x u z heng c hakraborty ycara

l
v
although prices ph
j pj derived market prices sij called virtual price
signal threshold hij r changes agents change demand profiles
coordinator chooses hij r rij induce agents reduce demand hij r rij
increase demand one time slot ij amount coordinator wants agent change
demand time slot j threshold hij r updated demand profiles submitted
last iteration
hij r rij ij


thus agents know current market price change demand
time slot j ij demand exceeding hij r need pay higher price
demand j coordinator wants change time slot j calculated difference
current aggregated demand threshold market price
j hj j



since coordinator
wants total demand change agents less j
p
ensure ij j allowable shift agent proportional agents share
r
aggregated demand time slot e ij pj rijij figure shows total demand

change divided among agents order create individual virtual price signals left
side shows initial aggregated demand two agents yellow demand belongs agent
red demand agent since aggregated demand threshold time slot e
h threshold time slot e h coordinator wants agents
shift demand time slot time slot amount demand shifted time
slot amount demand shifted time slot right
side shows individual thresholds agents determined central coordinator
procedure described allocation demand change agents illustrated
dashed arrows current demand agent time slot r threshold time slot
h notations interpreted similarly
agent r esponse v irtual p rice ignal
received virtual price signal agents independently optimize demand profiles order minimize cost according agents objective function cvi ri r
p
v

j sij rij r rij gi ri written
cvi

ri r


x





l
l
ph
j rij hij r pj rij hij r pj hij r gi ri



j

since agents pay high price ph
j demand exceeding individual threshold
agent shift much demand false impression possible cost reduction figure shows agents demand profiles individual optimization left side shows
individual agents optimized demand profile comparison
right side figure seen agent shifted whole allocated amount agent
shifted part e g due constraints right side figure shows central
agents individual optimization seen still demand left
shifted time slot time slot remaining demand would divided among
agents subsequent iteration


fim ultiagent c oordination emand ide e nergy anagement

payment rule
converged agents pay virtual unit price demand
time slot last iteration virtual unit price equals average unit price aggregate demand whole cooperative agent changed demand profile equation
r final demand profiles whole cooperative ri final demand profile agent
payment agent given
paymenti


x

svij rij r rij



j

convergence basic
section prove basic iterative procedure converges optimal solution
l
basic setting gi ph
j pk j k lemma
strictly reduces cost every iteration fact used theorem
converges theorem gi
l
ph
j pk j k converged solution optimal solution subsequently
get stuck suboptimal solution general settings lemma
gi lemma
lemma strictly reduces total cost every iteration c r c r
proof lets first introduce notation used throughout proof let r total
demand profile end iteration round r total demand profile end round
similarly let c r total cost end iteration c r total cost
end iteration virtual prices round computed central coordinator
r let cvi ri r cost agent computed according virtual price signal
demands beginning round cvi r r end round
beginning iteration total cost consumer group market prices
given objective function equals sum individual cost agents
p
v
virtual price signals given e n
ci ri r c r
n x

x

svij

rij r rij

gi ri



j
n x

x

n
x






hj j rij
p

rij rij
rij
j



hj j rij
p
pl
r

r

ij
ij
j
rij

x
n
hj j rij
l
p
pj rij

gi ri
rij



ph
j

h
n
x
x


l
l
ph


h


p


h


p
h

gi ri
j
j
j
j
j
j
j
j
j





n x

x
j



pj j rij

n
x

gi ri





fiv eit x u z heng c hakraborty ycara

stopped least one agent changed demand profile e
r ri agents change demand profile reduces cost according
thus given virtual price signal agent cost demand profile r strictly lower
previous demand profile ri

cvi r r cvi ri r

agents
submitted demand profile aggregated demand compn


puted j rij next sum agents individual cost according
virtual price signals upper bound total central cost market prices thus total cost
aggregated demand lower equal sum agents individual cost
demand fact important prevents herding behavior
solution reduces cost agents individual lead worse solution
central proved showing equations every time slot j
difference central cost aggregated demand sum agents individual
cost less equal following sketch proof omitting algebraic steps
ease readability consult appendix complete proof time slot j
n
x

n
x



pj j rij

svij rij
r rij





pn




rij
hij r j


h
pl
rij hij r j
j pj


l
ph

p
r

h
r

ij
j
j
ij




h

pl
rij
hij r

j pj

r h
pn ij ij
h
rij
ij

hp
n


hpn




l
ph
j pj



hj
hj



j hj
j hj



pn v
j holds sum time slots


since pj j rij sij rij r rij
p
v

c r n
ci ri r
equations conclude
pn

n
n
x
x
c r
cvi r r
cvi ri r c r






thus total cost strictly reduced iteration
theorem basic iterative solving converges
proof definition convex lower bound total cost
obtained sum individual initial demand profile costs market prices lemma
reduces total cost iteration thus concluded
converges

p
pn v
n
lemma real market cost n
pj rij rij equals virtual cost
sij rij r rij
time slot j rij hij r rij hij r
proof rij hij r j hj first case equation follows cost
equal rij hij r j hj second case equation follows cost
equal


fim ultiagent c oordination emand ide e nergy anagement

theorem solution r basic optimal following cases
j r satisfies j hj restrictions gi
b r satisfies j j hj gi high price time slot
l
greater low price time slot e ph
j pk j k
proof prove contradiction converged solution r
satisfies case solution r lower cost suppose exists solution
r e c r c r contradicts convergence conditions
ri solution agents individual ri arg minxi xi cvi xi r
denote r r r linear combination r r since central
cost function convex c r c r c r c r j r satisfies
j hj demand beginning iteration rij j rij hij r
rij hij r j ij similarly j ij


follows j rij
hij r rij
hij r


pn

v
c r moreover
therefore lemma
ci ri r
p
v
c r c r equation n
ci ri r c r follows
v
v
cvi r
r ci ri r conflicts ri arg minxi xi ci xi r e ri
solution agents individual
prove contradiction converged solution r satisfies
case b solution r lower cost assume exists solution r
c r c r let time slots j k j j k k without loss

generality note pm
j j pk k otherwise cost would lower
h
l

j hj k hk pm
j j pj j decreases pk k pk k increases
l


market price structure ph
k pj follows pj j pk k leads

l
h
contradiction j hj k hk j hj pj j pj pm
k k pk thus
h
h
h

h


pm
j j pk k j hj pj j pj pk k pk pk pj
otherwise shift j k would beneficial least one agent would

stopped follows pm
j j pk k leads contradiction case
j hj k hk works similarly
follows r optimal solution solution lower cost exists thus proposed iterative converges optimal solution since convex solution global optimal solution boyd vandenberghe
lemma basic could converge suboptimal solution r settings r
satisfies j j hj gi
proof prove presenting counterexample basic converge
suboptimal solution settings r satisfies j j hj gi consider
population agents n horizon time slots agents
constraints form converged solution aggregated demand
threshold one time slot directly threshold another time slot one time slot
threshold
let price function three time slots given
h
l h
l h
pl
p h p p h p p h






p h

p h

p h

p l

p l

p l

kwh



demand agent

demand agent

kwh

v eit x u z heng c hakraborty ycara




















kwh
















time slot

demand agent

demand agent

kwh

time slot



time slot














time slot

b optimal solution r

converged solution r

figure converged optimal solution example lemma top row shows
demand agent bottom row demand agent dashed lines indicate upper
lower bounds demands agents time slot solid black lines price
thresholds time slot
individual constraints agents demand upper lower bounds demand
time slot b constant total demand time slots specifically
r r r r r r
r r r r r r
let r denote demand profile agents tth iteration let initial
iteration final iteration convergence beginning agents compute


initial demand profiles market
prices r r cost

initial demand profiles c r convergence profiles two agents




r r see figure graphical representation cost
demand profiles c r however different demand profile agents exists
r r see figure b graphical representation profile
feasible leads lower total cost e c r follows stopped
suboptimal solution

lemma basic could converge suboptimal solution r settings r
satisfies j j hj gi
proof appendix b counterexample presented proving basic converge
suboptimal solution settings r satisfies j j hj gi


fim ultiagent c oordination emand ide e nergy anagement

general coordination
previous sections introduced basic iterative coordination optimal energy
allocation basic setting horizon two time slots cost
shifting demand g moreover presented counter examples showing general
settings g get stuck suboptimal solution
section present general coordination energy allocation general settings
two time slots non zero individual costs shifting demand
additional phase
reason convergence suboptimal solution coordinator cannot determine
agents marginal valuation demand aggregated demand time slot
threshold agents might different marginal valuations shift agent
lower valuation agent higher valuation might beneficial however opportunity
improvement cannot realized coordinator know marginal valuations
agents
introduce additional phase address basic
converged coordinator checks whether aggregated demand threshold
least one time slot case stops solution optimal
however demand threshold time slot coordinator initiates another phase
basic idea besides virtual price signal coordinator sends additional query
agents requesting valuations increase decrease threshold time
slots aggregated demand threshold coordinator uses information
adjust virtual price signals

let vij
denote value agent increase threshold time slot j let
ij
r
demand profile resulting price signal agent
time slot
threshold

j
v
ij
ij
virtual cost
j increased e hij r hij r moreover let ci ri r
threshold time slot j increased
definition agent marginal valuation increase threshold time slot j
difference virtual cost original virtual virtual
increased threshold time slot j valuation decrease defined analogously







j


ij

v
ij
vij
r cvi rj
r

c
r
r

v
r

c
r
r
ci r r




ij




agents receive virtual price signal query marginal valuations
first compute optimal demand profile r price signal second compute


marginal valuations vij
r vij
r every time slot aggregated demand

threshold let vector vi consist valuations increments vi decrements
respectively finally agents send ri vi vi back coordinator
received agents information coordinator computes virtual price signals
next iteration aggregated demand thenthreshold
finds agents lowest


cost increase threshold l arg mini vij lowest cost decrease
n



threshold k arg mini vij
combined cost negative vkj
vlj
beneficial shift


fiv eit x u z heng c hakraborty ycara

agent l agent k exists case coordinator updates thresholds agents l k
lj kj
stops demand threshold time slot time slots


thresholds pair l k exists vkj
vlj
follows converges
every time slot aggregated demand threshold j hj agents cost
reduction increase threshold less additional cost decrease
threshold agents e


vlj
vkj
l k n j j hj



otherwise coordinator would change price signals would stop
general
general designed iterative coordinator updates virtual
price signals consumers feedback thus gradually adjusts individual demands
central optimal solution overall shown iteration
consists two steps first central coordinator aggregates demand submitted agents
computes virtual price signals agent virtual price signals computed
subroutine calculatevirtualpricesignals second individual agents use
virtual price signal solve individual cost optimization compute marginal
valuation electricity demand report coordinator agents response
computed calculatedemandprofileandvaluation
general first runs basic convergence subsequently
performs additional phase necessary particular additional phase performed basic converged line least one time slot aggregated demand
threshold line reaches optimal solution r


r j hj j additional phase vlj
vkj
l k n j j hj
convergence general optimal solution
please note theorem still holds general still reduces
total cost iteration thus extended converges theorem prove
solution general lies within neighborhood optimal solution
theorem converged solution r general lies within neighborhood
optimal solution r amount agents compute marginal valuations
proof prove contradiction general converged solution r solution r exists lower cost respect central
outside neighborhood around r suppose exists solution r lower total energy cost r e c r c r contradicts convergence
conditions general ri solution agents individual


ri arg minxi xi cvi xi r vlj
vkj
l k n j j hj
case left theorem j j hj implies rij hij r




h r k k r h r l k r r
l k l l rlj
lj
lj
kj
lj
kj




firkj
rkj case conflicts convergence conditions


fim ultiagent c oordination emand ide e nergy anagement

overall
data scenario electricity contract agent definitions
optimal demand schedule r
























initialization agents compute initial energy demand profile ri solving
market prices send coordinator
addp hase f alse
demand schedule r optimal
coordinator calculates price signals
svij rij r j calculatevirtualpricesignals ri vi vi addp hase
coordinator sends virtual price signals agents
agents calculate demand profiles valuations time slots j
r vi vi calculatedemandprofileandvaluation svij rij r addp hase
agents send demand profiles valuations back coordinator
converged e r r
j hj j
demand schedule r optimal
else


addp hase vlj
vkj
l k n j j hj
demand schedule r optimal
else
start additional phase e addp hase true
end
end
else
r r
end
end





rlj
start case l k firlj




firkj rkj moreover denote r

rit





rit
l k j
rit
otherwise

demand profile reflecting changes demand time slot j resulting individ

ual agents demand threshold rlj
hlj r rkj


hkj r thus lemma get sum virtual cost equal central cost
n
x









v
v


cvi r

r

c
r

r


c
r

r

l
k

l
k

l k



c r c r

n
x

cvi ri r





fiv eit x u z heng c hakraborty ycara

calculation virtual price signal coordinator






calculatevirtualpricesignals ri vi vi addp hase
data demand profiles valuations agents ri vi vi
virtual price signals agents svij rij r j
p
compute aggregated demand j n
rij
compute demand shifted time slot j hj j
r
divide demand among agents ij pj rijij










addp hase
n



time slot j agents l k min vlj
vkj



vlj
vkj

adapt demand shifted agent l lj agent k kj
end
end
compute thresholds demands shifted hij rij ij

calculation individual demand profiles marginal valuation energy
agent
calculatedemandprofileandvaluation sv
ij rij r addp hase
data virtual price signal svij rij r j
demand profile r valuations vi vi








compute demand profile r according virtual price signal
ri arg minxi xi cvi xi r
addp hase
foreach time slot j threshold rij hij




ij cv r r
compute valuation increased threshold vij
cvi rj
r




ij cv r r
compute valuation decreased threshold vij
cvi rj

r

end
end

implies
n
x



cvi r
r

l k



n
x

cvi ri r

l k



v
cvi r
r ci ri r

conflicts convergence condition ri arg minxi xi cvi xi r









v


cvl r

r


c
r

r

cvl rl r cvk rk r
k
l
k


h




cvl r
cvl rl r cvk r
cvk rk r
l r
k r



fim ultiagent c oordination emand ide e nergy anagement









equal cv rj rij
firkj
rkj get cvl r

r

l
l
l




equal cv rj rij thus equation follows
cvk r
k
k r
k


vlj
r vkj
r



conflicts convergence condition l k n vlj
r vkj
r
general case l k get
n
x




x
x





cvk r
cvl r
cvi r
r
k r
l r

ilk




kk



c r c r

n
x

cvi ri r



implies
n
x
ilk




cvi

n
x



cvi r

r



cvi ri r

ilk




r




r

cvi

ri r

conflicts convergence condition ri arg minxi xi cvi xi r

x


x

x
x

v


cvk rk r
cvl r

r


c
r

r


cvl rl r
k
l
k





x


kk

cvl





kk



x

x
x


r

cvl rl r
cvk r

cvk rk r
l r
k r


kk

kk

since amount demand increased time slot j equal demand decreased cost
decrease lhs greater increase cost rhs exists pair agents
l k marginal cost decrease l larger marginal cost increase k


l l k k vlj
r vkj
r



conflicts convergence condition l k n vlj
r vkj
r

solution r lies within neighborhood optimal solution r amount
agents compute marginal valuations beneficial shift size greater
equal exists stops however beneficial shift smaller might
still exist
convergence time
section give upper bound number steps needs converge
first give bound basic lemma extended phase lemma
second give bound general theorem


fiv eit x u z heng c hakraborty ycara

lemma basic converges within maximum log n e steps n
number agents distance converged solution optimal solution basic

proof prove showing upper bound number iterations needed one time
slot say time slot j get initial demand level neighborhood optimal
demand level basic sufficient demand last time
slot reached optimal level demand time slots reached optimal level
proof consider time slot initial demand optimal demand
sufficient every shift consists demand decrease least one time slot
increase least one time slot thus time slots optimal demand
level reached optimal level remaining time slots reached optimal levels
since variables proof time slot j omit subscript j increased readability let dt difference optimal aggregated demand aggregated demand
iteration since demand assumed optimal demand dt without
loss generality assume initial value dt optimum
agent initial demand rij worst case one agent e g agent increase
demand case agent increase demand iteration increment
equals amount demand shift assigned coordinator
denote increment agent demand iteration ct agent demand
iteration c n denoting total number agents demand shift assigned
r
agent given definition price signal ij pnj ij
rij

agent increment

ct dt


n ct
agent demand iteration initial demand plus increments first iterations
similarly difference dt initial difference minus agent increments


ct


x

al dt

l


x

al ct ct dt dt ct dt

l

substituting equation
dt dt
n dt

dt dt
n dt

n dt

dt dt

n dt dt dt dt dt

dt
since n dt get



n dt
n n
dt
dt
n
n


l

log

thus loglogn log n
log n dt moreover
n

since logarithm strictly increasing concave log n log n
log n e dt



n

thus

fim ultiagent c oordination emand ide e nergy anagement

lemma extended phase converges maximum within number


l

c c
v



steps



c total cost solution basic c total cost optimal
solution v minimum value marginal valuations increase decrease
threshold one time slot
proof prove showing upper bound number iterations needed reduce
total cost solution basic e c total cost optimal
solution e c iteration extended phase thresholds adapted two agents


say k j thus total cost reduced vkj
vlj
equation let v minimum value


vkj vlj long converge iteration total cost
l
reduced least v thus stops within c vc steps
theorem time complexity general lies n c c e linear number agents pseudopolynomial c c
proof lemma get upper bound number iterations basic
dn log e log constant independent n time complexity
basic n
l
lemma get upper bound number iterations
c c
extended phase
cost difference c c depend n
v
specific characteristics agents minimum valuation v proportional size
threshold increment decrement thus v constant constant choice thus
bound extended phase pseudopolynomial c c
incentive compatibility
general allocation three key properties interest namely efficiency
strategy proofness budget balance context efficiency implies
overall electricity consumption cost minimized strategy proofness implies telling truth
dominant strategy agents hence report truthfully budget balance implies
total amount paid members cooperative equal actual electricity consumption cost two well known facts three properties literature first
allocation efficient way implement payments guarantee strategy proofness
use vcg type mechanisms see work green laffont hurwicz second green laffont hurwicz prove payments obtained vcg type
mechanisms cannot achieve budget balance thus impossible design mechanism
achieves three properties namely efficiency budget balance strategy proofness
stated discussion related work section budget balance key requirement application point view furthermore allocation efficiency desired social goal achieves budget balance lemma allocation efficiency
theorem therefore impossibility cannot achieve strategy proofness e
truth telling cannot dominant strategy however believe agent may choose truthfully respond agents cannot anticipate future development
prove manipulation strategy exists dominates truth reporting therefore define
notion weak incentive compatibility
definition satisfies weak incentive compatibility weakly incentive compatible
strategy dominates telling truth


fiv eit x u z heng c hakraborty ycara

theorem general weakly incentive compatible
proof agents two possible ways deviate truthful reporting first
could report demand profile minimize individual cost according
current virtual price signals intent misreporting would benefit final
payment second could report marginal valuations differ true marginal valuations analysis assume rational agents e agents prefer lower cost
note payment rule equation agent pays electricity demand
final price signal iteration truthful demand report minimizes agents cost given
price signal therefore agent report truthfully final price signal e final
iteration incur higher cost furthermore agents know whether given price
signal final price signal agents limited knowledge
know demand profiles agents constraints preferences thus manipulation
iteration may higher cost truthful report therefore manipulation strategy
involving misreported demand profiles dominates truthful reporting
regarding reporting marginal valuations definition obvious deflating
valuation hurts agent demonstrate extension example lemma
deviating truth revelation inflating reported marginal valuation hurt
agent aggregated demand threshold time slot coordinator asks
agents valuations increase threshold without loss generality assume

l
ph
agent true valuation reduce time slot increase v
p agent

l
reduce time slot increase v ph
p lets assume agent misreports

valuation v coordinator increases threshold time slot agent
decreases threshold agent follows agent shift demand time slot
time slot agent shift demand time slot time slot leads
demand profiles rdeviate
rdeviate
however profile


lead increase total cost increase individual cost deviating
agent table shows individual cost since misreporting valuations may higher
electricity cost truthful report misreporting agent manipulation strategy involving
misreported marginal valuations dominates truthful reporting
cost
truthful reports
agent deviates

agent cost



agent cost



total cost



table cost different demand profiles individual agents

simulation
perform simulations real world consumption data characterize convergence
properties b understand effect different parameters characterize
electricity demand profile cost reduction coordination
scales linearly number agents time slots
observe participants flexibility shifting demands increases cost reduction
since agent deviation increases agent well agent cost one might argue increasing
agents cost could incentive deviation however note cost agent visible others
therefore believe agent may choose report truthfully



fielectricity price euro cents kwh

ultiagent c oordination emand ide e nergy anagement

dayahead
spot market
price

































time slot

figure day ahead spot market prices epex spot average tuesday
increases well cost reduction sensitive whether consumers use
electricity evening day
datasets
cer electricity consumption data use real electricity consumption data generate consumer demand profiles data gathered irish commission energy regulation
cer context smart metering study study electricity consumption data
small medium enterprises private households collected period
years observation period divided time intervals minutes one data
point represents average electricity consumption kilowatts one participant
minute interval particular used data enterprises participating enterprises
answered questionnaires among others number employees typical hours
operation refer data set cer data set
eex electricity prices market data generate cooperatives electricity prices real
day ahead market electricity prices gathered european energy exchange eex
leading energy exchange europe particular use average hourly day ahead
prices epex spot market tuesdays january st may th
figure shows average day ahead spot market prices observation period refer
hourly market price data eex data set
simulation parameters
model work mohsenian rad et al wep
define agent predetermined total electricity demand horizon
r upper lower
h j iji
bounds electricity demand time slot e rij rij rij regarding individual cost functions gi assume gi data industry specific cost
functions
data set available http www ucd ie issda data commissionforenergyregulation
data available http www eex com en market data



fiv eit x u z heng c hakraborty ycara

odeling c omposition c ooperatives
agents variety different demand characteristics reflect diversity use
cer data set identify two classes consumers similar characteristics group
consumers similar characteristics clustered participants study k means
clustering information questionnaires electricity consumption data
particular used consumption profiles tuesdays tuesday average
work day class represents consumers consuming electricity day
whereas class represents consumers stable consumption day higher
consumption night classes cooperatives varying compositions simulated parameter p fracagent defines composition cooperative specifying
fraction agents class class p f racagent
g enerating n ominal emand agents
agents nominal demand value around agent vary demand simulate
scenarios time slots use time intervals minutes
generate interpolating averaging data points two data sets j
represents first j last time slot day get different agents nominal
demand agent time slot outcome xij random variable xcj let cj

mean average demands participants class c time slot j let cj
corrected sample standard deviationof average
demands thenominal demand drawn
uniform distribution xcj u cj cj cj cj distributions xcj
two classes
shown figure total demand agent whole day computed
p
x

j ij
odeling f lexibility c onsumers
agents different flexibilities changing demand profiles ability expressed agents upper lower bound constraints electricity demand
time slot parameter p flexshift defines flexibility agents specifying percentage agents vary demands nominal demand thus
larger p f lexshif apart upper lower bounds parameter
agents fixed one scenario flexibility nominal demand upper
lower bounds computed
rij xij p f lexshif
rij xij p f lexshif



odeling e lectricity p rice
cooperatives electricity price function time slot defined marginal price
h
low load pl
j high load pj price threshold hj specifying demand
levels marginal prices apply use prices eex data set exemplar prices
h
generate pl
j pj let mpj average spot market price epex spot time slot j


fim ultiagent c oordination emand ide e nergy anagement




exemplary
nominal
demand





electricity demand kw

electricity demand kw



distribution
nominal
demand

























































time slot



















time slot

class day consumer

b class night consumer

figure distributions nominal demand two different consumer classes
compute marginal electricity prices
pl
j mpj
ph
j mpj

max

x

mpx

min

x



mpx

keep marginal prices fixed across simulations however price thresholds may
vary across different simulation scenarios example price threshold could
aggregated nominal demand demand increased could
demand reduced parameter p distthresh defines distance
aggregated nominal demand price thresholds specifying percentage thresholds
aggregated nominal demand negative value p distt hresh
thresholds lie positive value lie aggregated nominal demand
scenario one fixed value time slots figure illustrates scenarios
different values p distt hresh addition price thresholds could different
time slot e g following profile aggregated nominal demand could
time slot flat thresholds compute flat thresholds defining moving
average aggregated nominal demand parameter p flatthresh defines flatness
threshold specifying width interval thresholds flattened
moving average p f latt hresh thresholds follow exactly aggregated nominal
demand whereas p f latt hresh thresholds every time slot figure b
illustrates scenarios different values p f latt hresh thresholds computed

hj
p f latt hresh

j p f latt
x hresh
jp f latt hresh


p distt hresh

x

xij





imulation cenarios
create different scenarios vary input parameters follows p f racagent
p f lexshif p f latt hresh p distt hresh


fiv eit x u z heng c hakraborty ycara




values
p distthresh























aggregated demand kw

aggregated demand kw

values
p flatthresh






































time slot



























time slot

price thresholds different values p distt hresh b price thresholds different values p f latt hresh

figure price thresholds different values parameters p distt hresh p f latt hresh

agents
leads different scenarios define converged cost reduction
one iteration gets less e c r c r
simulation
first present effects different parameters cost reduction
subsequently discuss convergence time
definition cost reduction difference cost uncoordinated profile c
chosen agent optimizing cost according market price
coordinated

profile c percentage cost uncoordinated profile e cr c c c
figure shows subset p f racagent agents
figure shows cost reduction cooperatives consisting consumers mainly
consuming electricity night figure b shows cost reductions cooperatives consist
consumer classes equal proportions finally figure c shows cost reductions cooperatives consisting consumers main demand day x axis represents
flexibility shifting demand axis flatness thresholds z axis height
thresholds figures scenarios high cost reduction white scenarios
less cost reduction dark red scenarios observed mean cost reduction
varying however sampled cases represent combinations
input parameters cannot say realistic individual settings example
many scenarios optimization possible put cost reduction optimization
possible price threshold provided supplier higher sum agents upper
bound constraints price threshold lower sum lower bound constraints
taking account scenarios observe mean moreover looking cost
reduction initial nominal demand profile get mean


fim ultiagent c oordination emand ide e nergy anagement





























p flexshift











p flatthresh






















p distthresh



p distthresh













p distthresh












p flatthresh

p flexshift









p flexshift








p flatthresh

consumers mainly con b consumers classes c consumers mainly consume night p f racagent
equal fractions p f racagent sume day p f racagent

figure cost reduction function four input parameters
p f racagent p f latt hresh p distt hresh p f lexshif scenarios high cost reduction white scenarios less cost reduction dark red
ensitivity nalysis
purpose sensitivity analysis understand effect different input parameters
cost reduction sensitivity analysis perform multiple
linear regression dependent variable criterion choose cost reduction definition
independent variables predictors choose smallest interpretable model provides good
adjusted r squared resulting model shown table model explains
variance adjusted r squared remaining variance cannot explained
model agents demand constraints generated randomly
predictors
p f racagent
p f latt hresh
p f lexshif
p distt hresh
p distt hresh p f lexshif
p f racagent p f latt hresh

coefficient







stand error







p value

e
e
e
e


table multiple linear regression model adjusted r
agents flexibility shifting demands increases cost reduction increases e
p f lexshif g
multiple linear regression model summarized table shows effect p f lexshif
highly significant p positive value coefficient shows
increase flexibility leads increased cost reduction
intuitively higher flexibility demand time slots high prices shifted
lower prices consequently higher cost reduction achieved example
p f lexshif demand shifted cost reduced however another reason
high cost reduction uncoordinated profile higher cost recall
uncoordinated demand profile agents optimize demand according hourly


fiv eit x u z heng c hakraborty ycara











aggregated
nominal demand



aggregated
optimal demand

aggregated demand kw

aggregated demand kw

price thresholds












































time slot



























time slot

lower flexibility p f lexshif

b higher flexibility p f lexshif

figure example scenarios different flexibilities agents shifting demands

market prices consequently higher agents flexibility adapt demand
schedules hourly prices however since coordinated agents shift much
demand possible cheap time slots leads load synchronization total demand
former cheap slots exceeds thresholds leading higher costs herding behavior thus
high flexibility uncoordinated consumers leads highly synchronized demand high initial
costs allow cost reduction figure illustrates settings low
p f lexshif high p f lexshif flexibility figure shows clearly
initial demand peak higher scenario flexibility recall figure slots
relatively low priced slots lowest area
red dashed curve uncoordinated demand profile coordinated demand profile gray
multiplied respective marginal prices shows cost reduction coordination
increasing freedom figure b seen area two curves increases
reason height peak stays first agents shift much demand
possible time slots aggregated demands thresholds peaks time slots
demand levels thresholds agents reach upper bounds time
slots shift remaining demand time slots lowest prices threshold
according hourly prices cheapest remaining time slot since freedom allows
demanding remaining electricity time slot height peak change
absolute distance demand thresholds aggregated load profile
decreases cost reduction increases e p distt hresh g
multiple linear regression model summarized table shows effect p distt hresh
highly significant p negative coefficient shows away
thresholds aggregated load profile less cost reduction achieved
figure illustrates settings low p distt hresh normal p distt hresh
high p distt hresh thresholds cost reduction limited much agents
decrease demand increase thresholds demand thresholds
represented area initial demand profile red dashed line thresholds
yellow flat line thresholds unused demand thresholds area
two lines thresholds amounts affected flatness


fim ultiagent c oordination emand ide e nergy anagement













aggregated
nominal demand



aggregated
optimal demand

aggregated demand kw

aggregated demand kw

price thresholds


































aggregated demand kw






















time slot






























time slot







































time slot

thresholds average load b thresholds average load c thresholds average load
p distt hresh
p distt hresh
p distt hresh

figure example scenarios different heights price thresholds

thresholds e flatter thresholds larger two areas become thus flatter
thresholds cost reduction increases well regression model supports
parameter p f latt hresh positive coefficient highly significant p
however cost reduction scenario high thresholds figure c greater
case normal thresholds figure b happens flexibility shifting
demand limiting factor since absolute distance upper lower bounds
smaller time slots low demand demand hits upper bounds time slots
reaches lower bounds time slots high demand situation increment
thresholds leads time slots thresholds thus possibilities shift
demand consequently flexibility limiting factor cost reduction increases
thresholds slightly increased supported regression model interaction
term p distt hresh p f lexshif highly significant p
observe similar cost reductions groups mostly consumers one class
groups agents classes similar fractions
multiple linear regression model table shows parameter p f racagent
significant predictor cost reduction p supports observation
see cost reductions coordinated behavior two classes day consumers
night consumers well mixed groups figure illustrates settings night consumers
figure mixed group figure b day consumers figure c however
examples increasing fraction day consumers cost reduction decreases larger
extent indicated parameter p f racagent regression model effect due
interaction effect composition cooperative flatness thresholds
multiple linear regression model shows interaction term p f racagent p f latt hresh
significant predictor p negative value coefficient e shows
flatness thresholds increases fraction day consumers increases
cost reduction decreases figure seen thresholds lying outside
agents demand bounds many time slots thresholds time slot
situation thresholds demand bounds limit potential cost reduction
coordination consequently thresholds get flatter get reach agents demand
bounds since load profiles day consumers significant difference peak
low load effect stronger groups larger fraction day consumers


fiv eit x u z heng c hakraborty ycara







price thresholds



aggregated
nominal demand

aggregated demand kw














































aggregated
optimal demand



aggregated demand kw





aggregated demand kw






















time slot




































time slot

































time slot

consumers mainly con b consumers classes c consumers mainly consuming
sume night p f racagent
equal fractions p f racagent day p f racagent

figure example scenarios different compositions consumer cooperative
c onvergence p roperties lgorithm
let first iteration submission agents uncoordinated initial demand profiles
second iteration coordinator sends first virtual price signals agents recall
beginning basic performed basic converged
additional phase started necessary recall defined converged
cost reduction one iteration gets less e c r c r
simulations basic converges average within iterations cases
need additional phase general converges average additional iterations
experiment setup one hp pavilion dmt intel core
two cores operating ghz gigabyte ddr physical memory setup one
iteration basic took average seconds one iteration extended
phase took average seconds looking agents demand profiles convergence
observe agent average time slots demand bounds tight
sampled scenarios least one time slot demand bound tight
agents satisfy constant total demand whole horizon
definition convergence accuracy difference cost converged solution
optimal solution percentage difference cost uncoordinated profile
c r
optimal solution e c r

c r c r
simulations basic achieves optimal solution
sampled scenarios
found sampled cases basic achieves optimal solution
remaining scenarios basic comes average close optimal solution
indicates cases basic provide good
simulations indicate larger step sizes lead faster convergence
cost small reductions accuracy
parameter defines step size extended phase intuitively larger steps lead faster
convergence cost reduced accuracy table shows convergence accuracy average
number iterations convergence varying number agents time
slots fixed n indicate increases number
iterations convergence well accuracy decreases however reduction accuracy
small achieves good indicate order


fim ultiagent c oordination emand ide e nergy anagement

achieve accurate solutions within iterations step size adapted run time
particular value reduced time


convergence accuracy









number iterations
convergence




table convergence accuracy time varying step sizes
simulations indicate convergence time scales linearly agent
population size number time slots
analyze influence convergence time vary number agents
time slots table shows convergence accuracy table b
number iterations convergence step size fixed indicate
number iterations convergence increases linearly number agents time
slots accuracy change much increase agent population time slots
ptime
p slots
agents pppp

pp































convergence accuracy

ptime
p slots
agents pppp






pp

























b number iterations convergece

table convergence accuracy time varying number agents time slots

conclusion future work
presented iterative coordination minimize energy cost
consumer cooperative given information agents individual demand constraints
preferences remains private proved converges optimal demand schedule presented time complexity iterative agents incentive
compatibility additionally conducted evaluations multiagent simulation real world consumption data simulations characterized convergence
properties effect differing demand characteristics cooperative
price functions cost reduction convergence
time scales linearly population size length optimization horizon finally observe participants flexibility shifting demands increases cost reduction increases
cost reduction sensitive variation consumption patterns consumers
work extended several directions future work investigate settings
agents might able compute guaranteed optimal solution individual
provably good approximation could apply settings detailed load


fiv eit x u z heng c hakraborty ycara

agents overall demand come two types loads shiftable loads
non shiftable loads loads divided interruptible non interruptible
loads addition loads subject temporal constraints lead situation
individual agents longer convex thus agent solve
individual optimally luo chakraborty sycara present distributed iterative
generalized task assignment context multirobot system mrgap approximate best responses agents provable
approximate ratio would interesting investigate distributed context

demand cooperative time slot solely consists aggregated
demand agents future work consider generation storage
centralized e owned cooperative distributed e owned individual agent
another avenue future work consider formulation cooperative faces
uncertainty electricity prices example consider hour horizon instead
long term contract electricity bought hourly spot market scheduling
demand one knows price next hour prices future hourly time slots
uncertain spot market electricity price depends many factors controlled
coordinator hence purposes prices assumed externally
specified stochastic process assumption goal would design
determining policies generation storage price signals sent firms central
coordinator determine schedules individual firms expected cost
buying electricity minimized

acknowledgements
work partially supported nsf award iis

appendix proof virtual cost upper bound total cost
proof give full proof showing sum agents individual cost according
virtual price signals upper bound total central cost market prices prove
showing equations every time slot j difference total cost
aggregated demand sum agents individual cost lower equal since
true every time slot true sum time slots
central cost aggregated demand given equation
n
x


pj j rij
j






ph
j hj pl
pl
j
j j hj
j hj


h

l

pj j hj pj hj j hj



l
j hj
pl
j j hj pj hj
p
pn

n

ph
rij
hij pl
j
j hij

p
pi
n
n
l

pl
j hij
pj rij hij


j hj
j hj

fim ultiagent c oordination emand ide e nergy anagement

sum agents individual cost given equation
n
x



sij rij
rij j





n h
x


ph
rij
hij
j




pl
j rij hij



pl
j hij





difference two costs get
n
x

n
x



pj j rij

sij rij
rij j




p

h



n
l

l

h
l

h

h

h

p
r

h

p
r
h

p

h

p
r
p
ij
ij
ij
j ij
ij
j
ij
j
j ij
ij
j


pn h



l

l
h

l

l

rij hij pj rij hij pj hij
pj rij hij pj hij pj

since

pn


j hj


pn l
pl
h


ij
j
pj hij equal removed

p
h



n ph r hij ph r hij pl r hij
j
ij
j
ij
j
ij

pn h



l

h

l


p
r

h

p
r

h

p
r
ij
ij
j
ij
j
ij
j
ij hij


lets write
p
analog n
r

j hj
j hj






pn l
pn
h r h
h r h
p
r

h
p
p



ij
ij
ij
ij
ij
ij
j
j
rij hij j


pn
pn
pn
h

rij hij lets write r hij r hij
hij pj

pn

ij



j hj

ij

ij

n
n


h


p h
p

h

l



r h pj rij hij pj rij hij r h pj rij hij pj rij hij
ij








ij

n
p
h
rij
ij

ij



j hj terms

pn


h
rij
ph
ij
j



r h
pn ij ij
h
rij
ij




l

pl
j rij hij pj rij hij



removed j hj remove
pn



h
rij
ij



h
rij
ij

ij

n
p

l



pj rij hij ph
rij
hij
j


rij

pn

h
rij
ij

h



pj rij hij pl
j rij hij


l

pj rij hij ph
rij
hij
j

j hj
j hj

j hj


h

pl
rij
hij
j hj
j pj
p


n
h
l
j hj
pj pj rij hij
pn

l
h

rij
hij
j hj
pj pj
h p




n
h
l


rij
hij
j hj
pj pj
h




p

n
l
h


rij
hij
j hj
pj pj


r h
pn ij ij
h
rij
ij

l
ph
j pj





j hj



h r h
p
ij equal
ij
j



l

hij pj rij hij respectively


pn





l pl ph
factor ph

p
j
j
j
j
pn

j hj


rij
hij



fiv eit x u z heng c hakraborty ycara

since inequality true every time slot holds sum time slots follows
sum agents individual cost according virtual price signals upper bound
p

total central cost market prices c r n
ci ri
n x

x

n x

x



pj j rij
gi r
sij rij
rij gi r

j

j

appendix b proof counterexample basic converge
suboptimal solution case gi
present counterexample prove basic converge suboptimal solution
general settings gi consider population agents n
horizon time slots agents constraints converged solution
aggregated demand equal threshold one time slot let price function given
h
l h
pl
p h p p h

individual constraints agents demand
r r r r
r r r r

agents individual cost associated demand schedule given

g r r







g r r








beginning agents compute initial demand profiles market prices r


r cost demand profiles c r




convergence final profiles twoagents r r
cost demand profiles c r
however different demand profile agents exists r r
profile feasible leads lower total cost e c r follows
stopped suboptimal solution

references
albadi el saadany e demand response electricity markets overview
power engineering society general meeting ieee pp ieee
atzeni ordonez l scutari g palomar fonollosa j demand side management
via distributed energy generation storage optimization ieee transactions smart grid

ausubel l milgrom p lovely lonely vickrey auction combinatorial
auctions
barbose g goldman c neenan b survey utility experience real time
pricing tech rep ernest orlando lawrence berkeley national laboratory berkeley ca
usa


fim ultiagent c oordination emand ide e nergy anagement

bertsekas p tsitsiklis j n parallel distributed computation numerical methods prentice hall inc upper saddle river nj usa
boyd vandenberghe l convex optimization cambridge university press
chu c jong novel direct air conditioning load control method ieee transactions
power systems
clement nyns k haesen e driesen j impact charging plug hybrid electric
vehicles residential distribution grid ieee transactions power systems

dietrich k latorre j olmos l ramos demand response isolated system
high wind integration ieee transactions power systems
green j laffont j j characterization satisfactory mechanisms revelation
preferences public goods econometrica journal econometric society
hurwicz l existence allocation systems whose manipulative nash equilibria
pareto optimal rd world congress econometric society
jellings c w chamberlin j h demand side management concepts methods
pennwell books tulsa ok usa
kirschen demand side view electricity markets ieee transactions power systems
luo l chakraborty n sycara k distributed design multi robot generalized task assignment proceedings ieee international conference intelligent
robots systems
medina j muller n roytelman demand response distribution grid operations
opportunities challenges ieee transactions smart grid
mohsenian rad wong v jatskevich j schober r leon garcia autonomous
demand side management game theoretic energy consumption scheduling
future smart grid ieee transactions smart grid
mohsenian rad leon garcia optimal residential load control price prediction real time electricity pricing environments ieee transactions smart grid

nguyen h k song j b han z demand side management reduce peak average
ratio game theory smart grid ieee conference computer communications
workshops infocom wkshps pp ieee
palensky p dietrich demand side management demand response intelligent energy
systems smart loads ieee transactions industrial informatics
pedrasa spooner macgill coordinated scheduling residential distributed
energy resources optimize smart home energy services ieee transactions smart grid

philpott pettersen e optimizing demand side bids day ahead electricity markets
ieee transactions power systems
rahimi f ipakchi demand response market resource smart grid
paradigm ieee transactions smart grid


fiv eit x u z heng c hakraborty ycara

ramchurn vytelingum p rogers jennings n putting smarts
smart grid grand challenge artificial intelligence communications acm

ramchurn vytelingum p rogers jennings n agent control decentralised demand side management smart grid th international conference
autonomous agents multiagent systems pp
samadi p mohsenian rad h wong v schober r tackling load uncertainty
challenges energy consumption scheduling smart grid ieee transactions smart
grid
tanaka k uchida k ogimi k goya yona senjy funabashi kim c
optimal operation controllable loads smart grid topology considering insolation
forecasted error ieee transactions smart grid
veit xu zheng r chakraborty n sycara k multiagent coordination energy consumption scheduling consumer cooperatives proceedings th aaai conference artificial intelligence pp
voice vytelingum p ramchurn rogers jennings n decentralised control
micro storage smart grid proceedings th aaai conference artificial
intelligence pp
vytelingum p ramchurn rogers jennings n agent homeostatic control
green energy smart grid first international workshop agent technologies
energy systems ates
vytelingum p voice ramchurn rogers jennings n theoretical practical foundations large scale agent micro storage smart grid journal artificial intelligence
wood wollenberg b power generation operation control john wiley sons
wu c mohsenian rad h huang j wind power integration via aggregator consumer
coordination game theoretic innovative smart grid technologies isgt
ieee pes pp ieee




