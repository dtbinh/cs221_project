Journal Artificial Intelligence Research 51 (2014) 493-532

Submitted 07/14; published 10 /14

Reasoning Topological Cardinal Direction Relations
2-Dimensional Spatial Objects
Anthony G. Cohn

A.G.C OHN @ LEEDS . AC . UK

School Computing, University Leeds, UK
Faculty Engineering Information Technology,
University Technology Sydney, Australia

Sanjiang Li

ANJIANG .L @ UTS . EDU . AU

AMSS-UTS Joint Research Lab,
Centre Quantum Computation & Intelligent Systems,
University Technology Sydney, Australia
College Computer Science, Shaanxi Normal University, China

Weiming Liu

L IU W EIMING @ BAIDU . COM

Baidu (China) Co., Ltd., Shanghai, China

Jochen Renz

J OCHEN .R ENZ @ ANU . EDU . AU

Research School Computer Science,
Australian National University, Australia

Abstract
Increasing expressiveness qualitative spatial calculi essential step towards meeting
requirements applications. achieved combining existing calculi way
express spatial information using relations multiple calculi. great challenge
develop reasoning algorithms correct complete reasoning combined
information. Previous work mainly studied cases interaction combined
calculi small, one two calculi simple. paper tackle
important combination topological directional information extended spatial objects.
combine best known calculi qualitative spatial reasoning, RCC8 algebra
representing topological information, Rectangle Algebra (RA) Cardinal Direction
Calculus (CDC) directional information. consider two different interpretations RCC8
algebra, one uses weak connectedness relation, uses strong connectedness relation.
interpretations, show reasoning topological directional information decidable remains NP. computational complexity results unveil significant differences
RA CDC, weak strong RCC8 models. Take combination
basic RCC8 basic CDC constraints example: show consistency problem
P use strong RCC8 algebra explicitly know corresponding basic RA
constraints.

1. Introduction
Qualitative Spatial Reasoning (QSR) multi-disciplinary research field aims establishing
expressive representation formalisms qualitative spatial knowledge providing effective reasoning mechanisms. Originating Allens work (1983) temporal interval relations, QSR
widely acknowledged AI approach spatial knowledge representation reasoning,
applications ranging natural language understanding (Davis, 2013), robot navigation (Shi,
Jian, & Krieg-Bruckner, 2010; Falomir, 2012), geographic information systems (GISs) (Egenhofer
c
2014
AI Access Foundation. rights reserved.

fiC OHN , L , L IU , & R ENZ

& Mark, 1995), sea navigation (Wolter et al., 2008), high level interpretation video data (Sridhar, Cohn, & Hogg, 2011; Cohn, Renz, & Sridhar, 2012). refer reader work Cohn
Renz (2008), Wolter Wallgrun (2012) information.
qualitative approach usually represents spatial information introducing relation model
domain spatial entities, could points, line segments, rectangles, arbitrary
regions. literature, relation model often called qualitative calculus (Ligozat &
Renz, 2004), contains finite set jointly exhaustive pairwise disjoint (JEPD) relations
defined domain. past three decades, dozens spatial relation models
proposed literature (Cohn & Renz, 2008; Chen, Cohn, Liu, Wang, Ouyang, & Yu, 2013).
Many qualitative calculi approximate spatial entities points. convenient
representing spatial direction, distance positions (providing extent objects
small compared distance apart), inappropriate far shapes and/or topology
spatial objects concerned. paper, represent spatial entities 2-dimensional
bounded regions real plane, may holes multiple connected components.
literature, spatial calculi focus one single aspect space, e.g. topology, direction, distance, position, shape. Topological relations relations invariant
homeomorphisms scale, rotation, translation. widely acknowledged topological relations crucial importance. One influential formalism topological relations
region connection calculus (RCC) (Randell, Cui, & Cohn, 1992). Based one primitive binary
connectedness relation, set eight JEPD topological relations defined RCC.
calculus known RCC8 algebra. According different interpretations connectedness,
calculus may different variants. paper, say two (closed) regions weakly connected share least common point, say strongly connected intersection
least one-dimensional. Accordingly, address two resulting RCC8 algebras weak
strong RCC8 algebras respectively. convenience, denote weak RCC8 algebra
RCC8, strong one RCC80 .
importance distinction strong weak RCC8 becomes clear analysing
different ways defining neighbourhood pixels commonly used Computer Vision. 4connectedness refers pixels horizontally vertically connected pixel,
8-connectedness includes diagonally neighbouring pixels well. distinction corresponds
nicely distinction strong weak RCC8 8-connectedness considers connections point, 4-connectedness considers connections along line (which onedimensional). Therefore, use strong weak RCC8 similar way use 4- 8connectedness, depending requirements application hand.
RCC8 algebra represents topological information spatial objects. many
practical applications, however, kinds relations often used together topological
relations. example, recommending restaurant dined common give
descriptions restaurant city centre, west central station, nearby
McDonalds.
Among aspects spatial information topology, directional relations
perhaps important. two well-known formalisms cope directional
relations extended spatial objects. One Rectangle Algebra (RA) (Balbiani, Condotta,
& Farinas del Cerro, 1999), Cardinal Direction Calculus (CDC) (Goyal & Egenhofer,
2001; Skiadopoulos & Koubarakis, 2005). representing direction primary object
reference object, RA approximates reference object primary object
494

fiR EASONING OPOLOGICAL C ARDINAL IRECTION R ELATIONS

minimum bounding rectangles (MBRs), relates two objects interval relations
projected intervals. hand, CDC approximates reference object MBR,
leaving primary object unchanged. CDC 511 basic relations, RA 169
basic relations. (487 511) basic CDC relations intersect one one basic
RA relation and, hence, contained unique basic RA relation. Therefore, CDC sense
expressive RA.
central reasoning problem QSR consistency problem. instance consistency
problem set constraints (xy), x, spatial variables, qualitative
relation qualitative calculus. say consistent satisfiable exists instantiation spatial variables constraints satisfied. Without loss generality,
assume unique constraint two variables. Note x
related, add (x ? y) without changing consistency, ? universal relation
calculus. Unlike classical CSPs, domain spatial variable usually infinite, may
undecidable determine consistency binary CSPs infinite domains (Hirsch, 1999).
past three decades, QSR made significant progress solving consistency problems
variety qualitative calculi (Renz & Nebel, 1999; Renz, 1999; Balbiani et al., 1999; Zhang,
Liu, Li, & Ying, 2008; Skiadopoulos & Koubarakis, 2005; Liu, Zhang, Li, & Ying, 2010; Liu & Li,
2011).
order bring spatial reasoning theory closer practical applications, necessary
combine multiple aspects spatial information. growing number works devoted
combining topological RCC relations aspects spatial information, e.g. qualitative size
(Gerevini & Renz, 2002), cardinal directions (Sistla & Yu, 2000; Li, 2006a, 2007; Liu, Li, & Renz,
2009; Li & Cohn, 2012), connectivity (Kontchakov, Nenov, Pratt-Hartmann, & Zakharyaschev,
2011), convexity (Davis, Gotts, & Cohn, 1999; Schockaert & Li, 2012), betweenness (Schockaert
& Li, 2013), gravity (Ge & Renz, 2013). Recently, Wolfl Westphal (2009) empirically
compared two approaches combination binary qualitative constraint calculi general.
interesting works combining spatial temporal formalisms (Gerevini & Nebel,
2002; Gabelaia, Kontchakov, Kurucz, Wolter, & Zakharyaschev, 2005). Moreover, subareas
formalisms constraint research, combination formalisms discussed long time
strong results, see e.g. work Bodirsky Kara (2010), Jonsson
Krokhin (2004).
current paper considers full combination RCC8 RCC80 two directional
relation models RA CDC. identify joint satisfaction problem (JSP) main reasoning
task. Given network topological (RCC8 RCC80 ) constraints network directional
(RA CDC) constraints , assuming involve set variables, JSP
decide joint network ] satisfiable. Note use ], instead , indicate
variables.
Since topological directional information independent, possible joint
network ] unsatisfiable satisfiable. Solving joint satisfaction
problem general harder solving independently. paper, interpret directional relations terms RA CDC, interpret topological relations terms weak
strong RCC8 algebras. basic constraints involved, show JSP
basic (weak strong) RCC8 basic RA networks solved polynomial time,
JSP basic (weak strong) RCC8 basic CDC networks NP-complete. Furthermore,
show that, three calculi (viz. RCC8, RA, CDC) combined together, JSP
495

fiC OHN , L , L IU , & R ENZ

basic RCC80 networks basic RA CDC networks tractable. Since non-basic constraints
always backtracked basic constraints, results show JSP (weak strong)
RCC8 RA CDC NP.
paper significant extension conference paper (Liu et al., 2009), combination basic weak RCC8 RA CDC constraints considered. paper considers
combination RCC80 RA and/or CDC constraints. addition, extend tractable
results two maximal tractable subsets RCC8 one large tractable subset RA. paper
closely related work Li (2007), Li Cohn (2012), combination
weak RCC8 algebra two subalgebras (viz. DIR9 DIR49) RA considered.
1.1 Application Scenario
example demonstrating usefulness results, use Angry Birds domain.
Similar representation reasoning tasks applied whenever use computer vision
detect objects image video. Angry Birds popular computer game gained increasing
attention within AI community, see e.g. work Zhang Renz (2014). Angry Birds
AI competition AI challenge problem, goal build intelligent agent
play Angry Birds better best human players (see http://aibirds.org).

Figure 1: screenshot Angry Birds game.
Angry Birds domain includes number building blocks different materials, sizes
shapes, even holes. building blocks form complicated spatial structures
protect pigs attacking birds (see Figure 1). AI agents able play game
humans do, get visual information game form screenshots.
competition organisers provide basic computer vision software detects minimum
bounding boxes objects screenshot well object category. given
set rectangles form minimum bounding boxes actual objects (see Figure 1).
object solid physical object cannot overlap another object (only RCC8 relations DC
EC possible objects), bounding boxes related relation
Rectangle Algebra relation CDC. Instead considering spatial relations
single objects, take account sets objects, example, set objects
directly indirectly supported particular object, set objects provide
cover particular pig, set wooden blocks.
496

fiR EASONING OPOLOGICAL C ARDINAL IRECTION R ELATIONS

Notations
, , , , ,
D, R, S,

w
x, y, z,vi , vj
, ,
a, b, c,
b8 , Q8 , C8
H
P, Q
H
Ix (a), Iy (a)
M(a)

= (mi )ni=1
(, )
x (, ), (, )
(, )
]
JSP(S, )
RA(T )
RCC8(D)
CCP(vi , vj )

Meanings
relations, usually basic relations (page 498)
relations, usually non-basic relations (page 498)
converse relation (page 498)
weak composition (page 498)
spatial variable interval variable (page 498)
network constraints (page 498)
bounded regions (page 500)
three maximal tractable subclasses RCC8 (page 500)
points (page 501)
unique maximal tractable subclass IA (page 502)
x- y- projective intervals region (page 503)
minimal bounding rectangle (MBR) region (page 503)
RA relation induced two IA relations , (page 503)
n-tuple regions mi form solution network (page 504)
consistent pair basic CDC relations (page 505)
x- y- projective interval relations (, ) (page 505)
RA relation x (, ) (, ) induced (, ) (page 506)
combination two networks set variables (page 507)
joint satisfaction problem subclasses (page 507)
RA relation induced RCC8 relation (page 509)
RCC8 relation induced RA relation (page 509)
two variables vi , vj common conflict point relation (page 510)
Table 1: Notations.

sets building blocks form spatial regions general sense used RCC8
BRCC8 (Wolter & Zakharyaschev, 2000), include regions multiple disconnected
pieces regions holes. particular, means RCC8 relation possible two
sets objects, DC EC.
Given spatial configurations Angry Birds domain, use RCC8 relations well
RA CDC relations represent spatial information (sets of) objects minimum
bounding boxes extracted screenshots. results paper allow us accurately reason combined information represented using RCC8, RA, CDC. Important
reasoning tasks benefit results include, example, inferring configuration
changes hit bird inferring whether given representation consistent whether
stable gravity (Zhang & Renz, 2014). algorithm predicting configuration
blocks shot might work envisaging individual possible block positions might
mutually globally inconsistent. algorithm reasoning consistency
predictions therefore desirable.
remainder paper proceeds follows. Section 2 introduces basic notions, important
examples, essential results qualitative calculi. Section 3 describes joint satisfaction
problem considers simple example combination RA CDC constraints. Sections
4 5 consider computational complexity combination weak and, respectively, strong
497

fiC OHN , L , L IU , & R ENZ

RCC8 RA. Section 6 discusses computational complexity combination weak
strong RCC8 CDC. conclude paper Section 7 give proofs major computational complexity results appendices. convenience reader, Table 1 summarises
notations used paper.

2. Qualitative Calculi
establishment proper qualitative calculus key success qualitative approach temporal spatial reasoning. section introduces basic notions qualitative calculi recalls RCC8 algebra, Rectangle Algebra, Cardinal Direction Calculus.
addition, summarise essential results used main part
paper.
2.1 Basic Notions
Let U domain temporal spatial entities, Rel(U) set binary relations U.
usual relational operations intersection, union, complement, Rel(U) Boolean
algebra. finite set B nonempty binary relations U jointly exhaustive pairwise disjoint
(JEPD short) two entities U related one one relation B. Write hBi
subalgebra Rel(U) generated B. Clearly, relations B atoms algebra hBi.
call hBi qualitative calculus U, call relations B basic relations calculus.
Notation. Note relation hBi union set basic relations. paper,
write R = {1 , 2 , ..., k } R union basic relations 1 , 2 , ..., k . convenience,
regard basic relation singleton {}.
two relations R, qualitative calculus = hBi, write R converse R,
defined
R = {(x, y) U U : (y, x) R},

(1)

write R w smallest relation contains R S, usual composition R
S, defined
R = {(x, y) U : (z U)(x, z) R (z, y) S}.
call R w weak composition R (Duntsch, Wang, & McCloskey, 2001).
constraint hBi form (xRy), R relation hBi. call (xRy) basic
constraint R basic relation B. important reasoning problem qualitative calculus
determine satisfiability consistency network = {vi Rij vj }ni,j=1 constraints hBi,
satisfiable (or consistent) instantiation (ai )ni=1 U (ai , aj ) Rij
holds 1 i, j n.
Given two constraint networks = {vi Rij vj }ni,j=1 = {vi Tij vj }ni,j=1 , say refines
Tij subset Rij 1 i, j n. consistent scenario consistent basic
network refines . clear consistent iff consistent scenario.
hand, given n-tuple entities (ai )ni=1 U, write ij basic relation fixed qualitative
calculus relates ai aj . = {vi ij vj }ni,j=1 consistent scenario call
scenario (or basic constraint network) induced (ai )ni=1 .
498

fiR EASONING OPOLOGICAL C ARDINAL IRECTION R ELATIONS

consistency constraint network partially determined path-consistency algorithms. say network = {vi Rij vj }ni,j=1 path-consistent

Rji = Rij
,

6= Rij Rik w Rkj

(2)

i, j k 6= i, j. case basic network, equivalent saying every
subnetwork involving three variables consistent.
Path-consistency enforced cubic time (Vilain & Kautz, 1986). is, apply
path-consistency algorithm constraint network , cubic time algorithm
terminate either get empty constraint (and hence know inconsistent) transform
equivalent path-consistent network. basic networks, easy see consistency
implies path-consistency, opposite proposition always hold.
following subsections recall qualitative topological directional calculi
discussed paper.
2.2 Region Connection Calculus RCC8
region connection calculus (RCC) (Randell et al., 1992) first-order theory based binary
connectedness relation. Standard RCC models arise topological spaces. paper,
concerned interpretations RCC real plane, provides arguably
important model RCC. Another reason lies directional calculi considered paper
defined real plane. plane region (or region) nonempty regular closed subset
real plane. consider bounded regions, cardinal directions involve bounded
regions. regions could multi-pieces and/or holes.1
One standard interpretation RCC based Whiteheadean connectedness (Whitehead,
1929) plane regions, two regions connected common point. connectedness may considered weak many cases. example, worm cannot pass
interior one apple another, touch point, without becoming visible exterior worms point view might well say apples sufficiently
connected. (Borgo, Guarino, & Masolo, 1996, p. 223) paper, consider stronger
connectedness, two regions regarded connected intersection least onedimensional (Li, Liu, & Wang, 2013). case rectangular grid spatial primitive entities,
already noted, strong weak connectedness correspond to, respectively, important notion
4- 8-neighbourhood pixels commonly used Computer Vision.
interpretations, relations Table 2 converses TPP NTPP form
JEPD set. Write Brcc8 Brcc80 two sets. call Boolean algebras generated
Brcc8 Brcc80 , respectively, weak strong RCC8 models, written RCC8 RCC80 .
Strong connectedness considered Borgo et al., (1996), Cohn Varzi (1999),
Li et al., (2013). easy see that, relations, strong connectedness contained weak
connectedness. Table 2 illustrates configuration (the 2nd left) instance EC
RCC8 instance DC RCC80 , configuration (the 2nd right)
instance TPP RCC8 instance NTPP RCC80 .
1. stress restriction RCC bounded plane regions affect complexity reasoning
RCC8, every consistent RCC8 network solution RCC model (Li, 2006b).

499

fiC OHN , L , L IU , & R ENZ

Relation
equals
disconnected
externally connected

Symb.
EQ
DC
EC

partially overlap

PO

tangential proper part
non-tangential proper part

TPP
NTPP

Definition (weak)
a=b
ab=
b 6= b =
b 6=
6 b 6 b
b 6 b
b

Definition (strong)
a=b
dim(a b) 0
dim(a b) = 1
b 6=
6 b 6 b
b dim(a b) = 1
b dim(a b) 0

Table 2: set basic RCC8 RCC80 relations, a, b two plane regions x , x, dim(x)
denote, respectively, interior, boundary, dimension x. Note notational convenience set dim() = 1.

Remark 1. far consistency realisations concerned, Li (2006b) shown
consistent RCC8 network solution RCC model. cubic realisation algorithm described used construct solution weak strong RCC8 models.
implies particular RCC8 network solution weak RCC8 model iff
solution strong RCC8 model. show paper, is, however, case
cardinal directions combined topological relations.
following, recall important properties three maximal tractable subclasses
b
H8 , C8 , Q8 RCC8 identified Renz (1999). complete list relations subclasses
found Appendix work Renz (2002).
Lemma 2. Suppose R non-basic RCC8 relation R {DC, EC, PO} = .
(1) R Q8 iff R either {TPP, NTPP} {TPP , NTPP }.
b8 iff R Q8 one following relations
(2) R H
{TPP, EQ}, {TPP, NTPP, EQ}, {TPP , EQ}, {TPP , NTPP , EQ}.
b8 , either {NTPP, EQ} {NTPP , EQ}.
(3) R C8 iff R H
note lemma define subclasses. particular, subclasses
include RCC8 relations R R {DC, EC, PO} =
6 .
Renz shows consistent scenario constructed O(n2 ) time pathconsistent network one three maximal tractable subclasses.
500

fiR EASONING OPOLOGICAL C ARDINAL IRECTION R ELATIONS

Theorem 3 (Renz, 1999). consistent scenario path-consistent network constraints
b8 , C8 , Q8 computed O(n2 ) time, replacing every constraint (vi Rvj )
H
(vi base(R) vj ) , base(R) basic relation obtained follows:
(1) R B, base(R) = R;
(2) else {DC} R, base(R) = {DC};
b8 , base(R) = {EC};
(3) else {EC} R = Q8 = H
(4) else {PO} R, base(R) = {PO};
(5) else {NTPP} R = C8 , base(R) = {NTPP};
(6) else {TPP} R, base(R) = {TPP};
(7) else base(R) = base(R ).
follows, call canonical consistent scenario .
2.2.1 R EALISATION BASIC RCC8 N ETWORKS
known that, basic RCC8 networks, path-consistency implies consistency (Nebel, 1995).
next give short description cubic realisation algorithm proposed Li (2006b), need
devise similar algorithm later combination cases.
Given basic RCC8 network = {vi ij vj }ni,j=1 , suppose path-consistent. ntpp-chain
defined series variables vi1 , vi2 , , vik vis NTPPvis+1
= 1, , k 1. ntpp-level l(i) variable vi defined maximum length
ntpp-chains contained ends vi .
realisation constructed follows, variable may interpreted bounded
region multiple pieces. Without loss generality, assume (vi EQvj )
= j. first define variable vi finite set Xi control points follows. i,
introduce point Pi vi ; vi ECvj vi POvj , introduce point Pij vi ; vi TPPvj
vi NTPPvj , put Xi points Xj . expand point P Xi little obtain
square s(P ). squares pairwise disjoint. Then, taking union squares, obtain
instantiation bounded regions vi . works EC NTPP constraints.
modifications needed cope constraints (cf. Li, 2006b Appendix C
paper).
2.3 Interval Algebra Rectangle Algebra
subsection, recall Interval Algebra (IA) (Allen, 1983) Rectangle Algebra (RA) (Balbiani et al., 1999). IA qualitative calculus generated 13 basic relations closed
intervals real line shown Table 3. write
Bint = {b, m, o, s, d, f, eq, fi, di, si, oi, mi, bi}

(3)

set basic IA relations. Ligozat (1994) defines dimension2 basic interval relation
2 minus number equalities appearing definition relation (see Table 3). is,
2. stress notion dimension different topological dimension.

501

fiC OHN , L , L IU , & R ENZ

basic relations
dim(eq) = 0, dim(m) = dim(s) = dim(f) = 1, dim(b) = dim(o) = dim(d) = 2.

(4)

non-basic relation R define
dim(R) = max{dim() : basic relation R}.

Relation

meets
overlaps
starts

finishes
equals

Symb.
b




f
eq

Conv.
bi
mi
oi
si
di

eq

Dim.
2
1
2
1
2
1
0

(5)

Definition
x+ <
x+ =
x < < x+ < +
x = < x+ < +
< x < x+ < +
< x < x+ = +
x = < x+ = +

(i)

(ii)

Table 3: IA basic relations (i) definitions (ii) conceptual neighbourhood graph, x =
[x , x+ ], = [y , + ] two intervals.
Nebel Burckert (1995) shown unique maximal tractable subclass IA
contains basic relations. subclass, written H, known ORD-Horn class.
Using conceptual neighbourhood graph (CNG) IA (Freksa, 1992), Ligozat (1994) gives
geometrical characterisation ORD-Horn relations. Consider CNG IA (shown Table 3
(ii)) partially ordered set (Bint , ) (by interpreting relation smaller right upper
neighbours). 1 , 2 Bint 1 2 , write [1 , 2 ] set basic interval relations
1 2 , call relation convex interval relation. IA relation R called
pre-convex obtained convex relation removing one basic relations
dimension lower R. example, [o, eq] = {o, s, fi, eq} convex relation {o, eq}
pre-convex relation. Ligozat shown ORD-Horn relations precisely pre-convex relations.
Nebel Burckert show every path-consistent IA network H consistent. Furthermore, construct consistent scenario every path-consistent IA network H
quadratic time.
Suppose R IA relation let
Rcore = { Bint : dim() = dim(R), R}.

(6)

(6) clear Rcore = {eq} iff R = {eq}, Rcore = R {b, o, d, di, oi, bi} R
{b, o, d, di, oi, bi} nonempty, Rcore = R \ {eq} otherwise.
Lemma 4. (Renz, 1999) Suppose = {vi Rij vj }ni,j=1 path-consistent IA network H. Let
core
core = {vi Rij
vj }ni,j=1 .

core path-consistent.
502

(7)

fiR EASONING OPOLOGICAL C ARDINAL IRECTION R ELATIONS

Table 3 (ii) easy see pre-convex relation R dimension 1 iff either R
1-dim basic relation R contained {s, eq, si} {fi, eq, f}. consequence, know
Corollary 5. Suppose = {vi Rij vj }ni,j=1 path-consistent network H.
v }n
consistent scenario = {vi Rij
j i,j=1 following property:
) = dim(R ),
dim(Rij
ij
= {eq} R = {eq}, R = {m} R = {m}, R = {mi} R = {mi}.
Rij
ij
ij
ij
ij
ij

result shows that, path-consistent network H, construct quadratic
time consistent scenario .

(i)

(ii)

Figure 2: (i) minimum bounding rectangle M(a) region a; (ii) RA relation b
o.
IA naturally extended regions plane. assume orthogonal basis Euclidean plane. bounded region a, minimum bounding rectangle (MBR), denoted M(a),
smallest rectangle contains whose sides parallel axes basis.
write Ix (a) Iy (a) as, respectively, x- y-projections M(a). basic rectangle
relation two bounded regions a, b iff (Ix (a), Ix (b)) (Iy (a), Iy (b)) ,
, two basic IA relations (see Figure 2 illustration). write Brec set
basic rectangle relations, i.e.,
Brec = { : , Bint }.

(8)

169 different basic rectangle relations Brec . Rectangle Algebra (RA) algebra
generated relations Brec (Balbiani et al., 1999).
following definitions used later.
Definition 6. Suppose = 1 2 basic RA relation. say 0-meet relation
1 , 2 {m, mi}, corner relation 1 , 2 {m, mi, s, si, f, fi, eq}. general, say
non-basic RA relation R = {1 , ..., k } (k 2) corner relation (1 k)
corner relation.
definition, 0-meet relation corner relation. Furthermore, easy see basic
RA relation 0-meet relation iff, every two rectangles r, r0 (r, r0 ) , r r0
singleton plane; corner relation iff every two rectangles r, r0 (r, r0 ) have,
least, corner point common.
following lemma straightforward.
503

fiC OHN , L , L IU , & R ENZ

Lemma 7. Let = {vi (Rij Sij )vj }ni,j=1 RA network, Rij Sij arbitrary IA
relations. satisfiable iff projections x = {xi Rij xj }ni,j=1 = {yi Sij yj }ni,j=1
satisfiable IA networks.
Corollary 5 lemma
Lemma 8. Suppose = {vi Rij vj } path-consistent RA network H H.
consistent scenario = {vi ij vj }
ij 0-meet relation iff Rij 0-meet basic relation,
ij corner relation iff Rij consists basic corner relations.
consequence, know H H tractable subclass RA. maximal tractable subclass
identified RA, larger tractable subclass RA identified (Balbiani et al.,
1999).
next show path-consistent basic IA RA network canonical solution
following sense.
+ n
Definition 9 (canonical tuple intervals (rectangles)). Suppose = ([m
, mi ])i=1 n-tuple
intervals. Let E(m) set values end points intervals m. say
canonical iff E(m) = {0, 1, , }. tuple rectangles (mi )ni=1 canonical iff x-
y-projections, (Ix (mi ))ni=1 (Iy (mi ))ni=1 , canonical tuples intervals. solution
IA (RA, respectively) network called canonical solution canonical tuple intervals
(rectangles, respectively).

basic satisfiable IA network, compute total order end points. Hence
obtain canonical solution (by assigning 0 first end point, 1 second, etc.).
gives us following proposition.
Proposition 10. Suppose satisfiable basic IA (RA) constraint network. unique
canonical solution.
2.4 Cardinal Direction Calculus
cardinal direction calculus (CDC) proposed Goyal Egenhofer (1997). Given
bounded region b real plane, extending four edges M(b), partition plane
nine tiles, denoted bij (1 i, j 3), see Figure 3 (i) illustration.
primary region reference region b, CDC relation b, denoted ab ,
encoded 3 3 Boolean matrix (dij )1i,j3 , dij = 1 iff bij 6= (where
interior a). example, basic CDC relations ab ba regions a, b
Figure 3(ii) represented following matrices.




0 0 0
0 0 1
= ab = 1 0 0 , = ba = 0 0 1 .
(9)
0 0 0
0 0 1
CDC relation zero Boolean matrix, 29 1 = 511 basic relations
CDC. denote set Bcdc . pair basic CDC relations (, ) called consistent pair
504

fiR EASONING OPOLOGICAL C ARDINAL IRECTION R ELATIONS

(i)

(ii)

(iii)

Figure 3: Illustrations (i) nine tiles reference region; (ii) (iii): two solutions
CDC basic constraint network {v1 v2 , v2 v1 }, defined Eq. (9).

constraint network {v1 v2 , v2 v1 } solution. call weak converse
(, ) consistent pair. Figure 4 shows basic CDC relation may one weak
converse. Therefore, need relation b relation b give complete
description (in terms CDC calculus) directional information two regions a, b.

(i)

(ii)

Figure 4: Illustration two consistent CDC pairs (i) (ab , ba ) (ii) (a0 b0 , b0 ), ab =
a0 b0 ba 6= b0 a0 . note rectangle relation a, b
a0 , b0 o.
following show strong connection CDC RA relations.
Definition 11. (Zhang et al., 2008; Liu et al., 2010) pair basic CDC relations (, ),
define x-projective interval relation (, ), written x (, ), disjunction basic
IA relations instance x-projection solution {v1 v2 , v2 v1 },
i.e.
x (, ) = { Bint : (m1 , m2 )[(m1 , m2 ) (m2 , m1 ) (Ix (m1 ), Ix (m2 )) ]}.
similar definition applies y-direction.
Note (, ) consistent pair, x (, ) (, ) empty relation.
(, ) consistent pair, prove (Liu et al., 2010) x- (or y-) projective interval
505

fiC OHN , L , L IU , & R ENZ

relation IA relation R following property
R = {b, m} R = {bi, mi}, R basic IA relation {o, s, d, f, eq, oi, si, di, fi}.

(10)

two projective interval relations combined RA relation.
Definition 12. (Zhang et al., 2008; Liu et al., 2010) pair basic CDC relations (, ),
call (, ) = x (, ) (, ) RA relation induced (, ). general, basic CDC
constraint network = {vi ij vj }ni,j=1 , call () = {vi Rij vj }ni,j=1 RA constraint network
induced , Rij = (ij , ji ).
Note (, ) necessarily basic RA relation. (, ) consistent, know
RA relation (, ) form , , IA relations satisfy (10). Furthermore,
solution {v1 v2 , v2 v1 } always solution {v1 (, )v2 }. note solution
{v1 (, )v2 } necessarily solution {v1 v2 , v2 v1 }.
Take consistent pair ( , ) defined (9) example. Figure 3 (ii) (iii) show two
solutions (a, b) (a0 , b0 ) basic CDC constraint network {v1 v2 , v2 v1 }. implies
definition x ( , ) contains {b, m}. easy see definition x ( , )
contains basic IA relations x ( , ) = {b, m}. Similarly, show ( , ) =
{d}. shows consistent pair ( , ) corresponds basic RA relations, viz.
b d.
2.4.1 C ANONICAL OLUTIONS BASIC CDC N ETWORKS
IA RA, consistent CDC networks canonical solutions.
Definition 13 (regular solution, Zhang et al., 2008; Liu et al., 2010). Suppose = (mi )ni=1
solution basic CDC constraint network . say maximal m0i mi holds
solution (m0i )ni=1 M(mi ) = M(m0i ); say regular maximal
(M(mi ))ni=1 canonical tuple rectangles.
basic CDC network general many regular solutions, following result.
Proposition 14. Let basic CDC network. Suppose basic RA network refines
(), induced RA network . determine cubic time whether solution
satisfies . Moreover, solution, unique regular solution
satisfies . Furthermore, unique regular solution constructed cubic time.
Proof. proof similar Proposition 12 work Liu et al., (2010). sketch
given Appendix A.
proof result, see region mi regular solution (mi )ni=1
consists unit cells (i.e. rectangles form [i, i+1][j, j +1], i, j Z) canonical
solution , i.e. region mi cell c, either c mi c mi = .
basic CDC network , may exist exponentially many different basic RA networks
refine (). Hence, may exponentially many different regular solutions (see Figure 11(a) example network). However, verify solution, need
prove solution special basic RA network refines () (Liu et al.,
2010, Proposition 12).3 Therefore, consistency determined cubic time, and,
consistent, regular solution constructed cubic time (Liu et al., 2010).
3. special network called meet-free basic RA network work Liu et al., (2010).

506

fiR EASONING OPOLOGICAL C ARDINAL IRECTION R ELATIONS

3. Joint Satisfaction Problem
preparatory introduction basic notions essential results qualitative calculi,
ready describe joint satisfaction problem.
Let M1 M2 two qualitative calculi domain U. Suppose Si subclass
Mi (i = 1, 2). write JSP(S1 , S2 ) joint satisfaction problem (Gerevini & Renz, 2002; Li,
2007) S1 S2 .
Suppose = {vi Tij vj }ni,j=1 constraint network S1 , = {vi Dij vj }ni,j=1
constraint network S2 involving variables. say ] instance
JSP(S1 , S2 ). joint satisfaction problem first considered RCC8 qualitative size
calculus (identical Point Algebra Vilain & Kautz, 1986) Gerevini Renz (2002).
Moreover, shown consistency joint network approximated polynomial bipath-consistency algorithm. Li Cohn (2012) recently showed bipath-consistency
equivalently expressed below.
Definition 15. Let ] joint constraint network M1 M2 , = {vi Tij vj }ni,j=1
= {vi Dij vj }ni,j=1 . say ] bi-closed Dij Tij nonempty
basic relation Tij , basic relation Dij , 1 i, j n (here regard
relation subset U U). bi-closed joint network ] bipath-consistent
path-consistent.
Informally speaking, joint constraint network bi-closed basic relation given
relation one calculi consistent corresponding relation calculus.
simple example joint satisfaction problem, consider combination RA
CDC next subsection.
3.1 Combination RA CDC
Let R basic CDC relation. R , set-theoretic converse (or inverse) relation R
(cf. (1)), may representable relation algebra CDC (Cicerone & Di Felice, 2004; Liu
et al., 2010). is, R cannot represented union several basic CDC relations.
sense, say CDC closed converse. Recently, Schneider et al. (2012) proposed
variant CDC, called Object Interaction Model (OIM), closed converse.
two bounded regions a, b, OIM divides plane (l1 + 2) (l2 + 2) tiles
extending edges M(a) M(b), l1 + 1 l2 + 1 numbers horizontal
and, respectively, vertical lines. clear 1 l1 , l2 3 since edges M(a) M(b) may
coincide. OIM relation ab represented l1 l2 matrix (also written ab ) considering
existence interior points and/or b corresponding bounded tiles. Let bounded
tile. set entry corresponding matrix ab 0 interior point
either b; set 1 (2, respectively) interior point (b, respectively)
interior point b (a, respectively); set 3 otherwise. converse relation
basic OIM relation basic OIM relation. particular, basic OIM relation ba b
obtained swapping occurrences 1 2 ab .
example, OIM relations regions Figure 3 (ii) (iii) respectively




0 0 2
0 2
ab = 1 0 2 , a0 b0 = 1 2 ,
0 0 2
0 2
507

fiC OHN , L , L IU , & R ENZ

OIM relations regions Figure 4 respectively

ab



0 2 2
= 1 3 2 ,
1 1 0

a0 b0



0 2 2
= 1 1 2 .
1 1 0

note regions a, b, a0 , b0 figures ab = a0 b0 . suggests OIM
finer grained CDC sense splits one basic CDC relation several OIM relations.
Nevertheless, since CDC closed converse, need consider consistent pairs basic
CDC relations order evaluate expressivity. comparing expressivity two
calculi way, see (ab , ba ) 6= (a0 b0 , b0 a0 ) Figure 4, (ab , ba ) = (a0 b0 , b0 a0 )
Figure 3. shows OIM makes finer distinctions CDC describing scenarios
given Figure 3(ii) (iii): saying west b, CDC differentiate east
boundary meets precedes west boundary b. following result shows OIM
finer CDC describing cardinal relations, essence combination
CDC RA.
Theorem 16. (Li & Liu, 2014) two regions b, compute RA relation
b, CDC relation b, CDC relation b OIM relation b,
vice versa.
words, basic OIM relation , exist two basic CDC relations , 0
basic RA relation = 0 , i.e. two regions b, relation
OIM relation b iff , 0 are, respectively, CDC relation b, CDC relation
b a, RA relation b. basic CDC RA relations JEPD,
choices , 0 , unique. following, call CDC relation induced
call RA relation induced . Note case 0 (as relation b a) CDC
relation induced , OIM relation b a.
consequence, following result.

Proposition 17. Suppose = {vi ij vj }ni,j=1 basic OIM network ji = ij
n
n
i, j. Let = {vi ij vj }i,j=1 = {vi ij vj }i,j=1 , ij ij are, respectively, CDC
relation RA relation induced ij . consistent iff joint network ]
consistent.

Proof. Recall converse basic OIM relation basic OIM relation.
, straightforward show = . Therefore, solutions
ji = ij
ij
ij
ij
ji
exactly solutions ] .
consequence Propositions 14 17
Corollary 18. Let , given Proposition 17. basic RA network
refines (), consistency determined cubic time. Moreover, consistent,
unique regular solution solution .
far, described example JSP. next three sections,
consider main task paper: JSP topological directional constraints.
508

fiR EASONING OPOLOGICAL C ARDINAL IRECTION R ELATIONS

4. Combination Weak RCC8 RA Networks
section represent topological information weak RCC8 relations directional information RA relations. first consider interaction weak RCC8 RA relations,
consider JSP basic constraints, and, lastly, consider JSP general.
4.1 Interaction Weak RCC8 RA Relations
Relations different calculi may interact sense relation one calculus may intersect
several relations second calculus. recall related definitions preliminary
results obtained Li Cohn (2012).
Definition 19. Let RCC8 relation RA relation. RA relation induced
RCC8 relation induced defined
RA(T ) = { : basic RA relation 6= }

(11)

RCC8(D) = { : basic RCC8 relation 6= }.

(12)

Note joint network ] bi-closed ij RA(ij ) ij RCC8(ij ) i, j.

easy see (cf. Li Cohn, 2012) RA(T ) = {RA({}) : }
RA({DC}) RA({EC}) RA({PO}) RA({TPP}) RA({NTPP, EQ}),




RA({PO}) RA({TPP }) RA({NTPP , EQ}),

(13)
(14)

where, example, RA({EC}) RA({PO}) holds because, basic RA relation ,
RA({EC}) M(a) M(b) 6= (a, b) , RA({PO}) M(a) M(b)
non-degenerate rectangle (a, b) .
Lemma 20. Let RCC8 relation RA relation. RCC8(D) relation
b8 , Q8 , C8 ; RA(T ) relation H H relation H
b8 Q8 .
intersection H
Proof. follows definitions RCC8(D) RA(T ) simple table look-up
Appendix work Renz (2002).
second statement apply relations C8 . example, consider = {NTPP,
EQ}. relation C8 , RA(T ) = {d d, eq eq} outside H H.
4.2 Combination Basic Networks
consider combination RCC8 RA. First show bipath-consistency
sufficient consistency JSP(Brcc8 , Brec ) (Li & Cohn, 2012). Let = {vi ij vj }4i,j=1
basic RA network induced four rectangles mi (i = 1, 2, 3, 4) illustrated below.
Let = {vi ij vj }4i,j=1 basic RCC8 constraint network 12 = 34 = {EC}
others {DC}. Clearly, satisfiable. Although ] bipath-consistent,
satisfiable. because, otherwise, exists solution = (mi )4i=1 M(m1 )M(m2 ) =
M(m3 ) M(m4 ) = {P } singleton. 12 = 34 = {EC} know P mi (i = 1, 2, 3, 4).
contradicts 13 = {DC}.
call point P configuration conflict point. general, following
definition.
509

fiC OHN , L , L IU , & R ENZ

Definition 21 (conflict point). Let = {vi ij vj }ni,j=1 basic RCC8 network = {vi
ij vj }ni,j=1 basic RA network. Suppose canonical solution . point Q called
conflict point mi exists j mi mj = {Q} ij = {EC}. write Ci
set conflict points mi .
Clearly, conflict point mi corner point mi . implies mi mj
may one common conflict point. Moreover, suppose = (mi )ni=1 solution
] M(mi ) = mi 1 n. conflict point mi contained
mi . means Ci mi . consequence,
Ci Cj 6= ij 6= {DC} (1 i, j n)

(15)

following theorem shows sufficient.
Theorem 22. Let = {vi ij vj }ni,j=1 basic RCC8 network = {vi ij vj }ni,j=1 basic RA
network. Suppose ] bipath-consistent. ] satisfiable iff (15) holds.
Proof. necessity part clear. defer proof sufficiency part Appendix B.
corollary, JSP(Brcc8 , Brec ) P.
Corollary 23. basic RCC8 network basic RA network , consistency ]
decided cubic time.
Proof. Bipath-consistency ] checked cubic time. construct unique
canonical rectangle solution quadratic time. conflict point set Ci computed
quadratic time. is, condition Theorem 22 checked cubic time.
4.3 Large Tractable Subsets
b8 , C8 , Q8 , IA one maximal
Recall RCC8 three maximal tractable subclasses H
tractable subclass H, containing basic relations. subsection, aim extend
b8 , C8 RCC8, large tractable subset H H
result maximal tractable subsets H
RA.
end, need extend notion conflict points basic networks arbitrary
networks. Recall 0-meet relations corner relations basic RA relations defined Definition 6.
Definition 24 (common conflict point). Let = {vi Tij vj }ni,j=1 RCC8 network =
{vi Dij vj }ni,j=1 RA network. say two variables vi , vj CCP (common conflict point)
relation, written CCP(vi , vj ), Dij 0-meet (basic) relation Tij = {EC},
Dij (possibly disjunctive) corner relation;
510

fiR EASONING OPOLOGICAL C ARDINAL IRECTION R ELATIONS

exist i0 , j 0 Dii0 Djj 0 0-meet (basic) relations, Dij 0 , Di0 j Di0 j 0
(possibly disjunctive) corner relations, Tii0 = Tjj 0 = {EC}.
CCP(vi , vj ) vi0 , vj0 variables satisfy conditions, write CCP(i, j :
i0 , j 0 ) stress roles vi0 vj 0 .

(i)

(ii)

Figure 5: Two joint constraint networks JSP(RCC8, RA), (i) (ii)
Dij basic RA relation vi vj illustrated picture, T14 = T23 = {EC} unspecified RCC8 constraints
non-basic RCC8 relation {DC, EC, PO}.
(i) (ii)
CCP(1, 2), CCP(1, 3), CCP(1, 4), CCP(2, 3), CCP(2, 4), CCP(3, 4).

Examples shown Figure 5. Note basic networks, vi vj
CCP relation iff Ci Cj nonempty, i.e. vi vj common conflict point.
Definition 25. Let = {vi Tij vj }ni,j=1 RCC8 network = {vi Dij vj }ni,j=1 RA
network. say ] CCP-consistent
CCP(vi , vj ) DC 6 Tij

(16)

holds 6= j. say joint network ] BC-consistent bipath-consistent
CCP-consistent.
general, vi vj CCP relation, (in realisation) vi vj share least
one corner point (of MBRs) common. Therefore, weak RCC8 algebra, cannot
disconnected, neither contained another non-tangential proper part. Note
latter statement follows bi-closedness ] .
Similar bipath-consistency algorithm (Gerevini & Renz, 2002), devise algorithm
(Algorithm 1) enforcing BC-consistency. following theorem shows algorithm
sound.
Theorem 26. Suppose ] joint network RCC8 RA constraints, = {vi Tij
vj }ni,j=1 = {vi Dij vj }ni,j=1 . O(n4 ) time, algorithm BC-C ONSISTENCY either
finds inconsistency transforms ] equivalent joint network 0 ] 0
BC-consistent.
511

fiC OHN , L , L IU , & R ENZ

Input: joint network ] , = {vi Tij vj }ni,j=1 = {vi Dij vj }ni,j=1 .
Output: false, empty constraint generated; BC-consistent joint network equivalent
] , otherwise.
Q {(i, k, j) | 6= j, k 6= i, k 6= j};
(i indicates i-th variable ] .
Analogously j k)
Q 6=
select delete path (i, k, j) Q;
BC-R EVISION(i, k, j)
Tij = Dij =
return false;
end
Q Q {(i, j, k), (k, i, j) | k 6= i, k 6= j};
end
end
Function: BC-R EVISION(i, k, j)
Input: three variables i, k j
Output: true, Tij Dij revised; false otherwise.
Side effects: Tij Dji revised using operations w .
Tij
(Tij RCC8(Dij )) (Tji RCC8(Dji )) (Tik RCC8(Dik )) w (Tkj RCC8(Dkj ));
Dij (Dij RA(Tij )) (Dji RA(Tji )) (Dik RA(Tik )) w (Dkj RA(Tkj ));
CCP(i, j : k)
Tij Tij \ {DC};
end
neither Tij Dij revised
return false;
end
;
Dji Dij
Tji Tij ;
return true.
Algorithm 1: BC-C ONSISTENCY, write CCP(i, j : k) represent situation
exists another variable vl vl vk together evidence CCP(i, j).

512

fiR EASONING OPOLOGICAL C ARDINAL IRECTION R ELATIONS

Proof. because, iteratively use following updating rules either empty constraint occurs network becomes stable.
Tij (Tij RCC8(Dij )) (Tji RCC8(Dji ))
(Tik RCC8(Dik )) w (Tkj RCC8(Dkj ))


(17)

Dij (Dij RA(Tij )) (Dji RA(Tji )) (Dik RA(Tik )) w (Dkj RA(Tkj ))

(18)

Tij Tij \ {DC} CCP(i, j : k),

(19)

i, j, k represent variables vi , vj vk CCP(i, j : k) represents situation
exists another variable vl vl vk together evidence CCP(i, j).
triple, CCP(i, j : k) determined O(n) time subroutine BC-R EVISION(i, k, j)
carried O(n) time. Since Tij set basic RCC8 relations Dij set
basic RA relations, (Tij , Dij ) revised constant number times. Therefore number
loops remains cubic, BC-C ONSISTENCY terminate O(n4 ) time.
algorithm general complete. following lemma useful prove main
result (Theorem 28), guarantee completeness algorithm RCC8 networks
b8 RA networks H H.
H
Lemma 27. Let = {vi Tij vj }ni,j=1 RCC8 network = {vi Dij vj }ni,j=1 RA network.
b8 Q8 ] bipath-consistent. Assume canonical
Suppose H
consistent scenario (cf. Theorem 3), consistent scenario . ]
bipath-consistent.
Proof. path-consistent basic networks, need show ]
RA( ) RCC8( ) 6= j. Since basic
bi-closed, i.e. ij
ij
ij
ij
ij
ij
nonempty 6= j. (13) (14)
relations, equivalent showing ij
ij
). Therefore RA(T ) = RA( ),
straightforward show RA(Tij ) = RA(ij
ij
ij
ij
ij


i.e. ij ij nonempty.
note result apply C8 . example, let = {NTPP, EQ}, =
{d d, eq eq}. RCC8 relation NTPP inconsistent RA relation eq eq.
Theorem 28. Let = {vi Tij vj }ni,j=1 RCC8 network = {vi Dij vj }ni,j=1 RA netb8 , H H. ] consistent BC-consistent.
work. Suppose H
Proof. Recall RA network H H essence pair IA networks H.
0-meet relation iff is;
Lemma 8 know consistent scenario (i) ij
ij

(ii) ij corner relation iff Dij consists corner relations. Let canonical consistent
scenario . show ] consistent.
Lemma 27 know ] bipath-consistent. next show satisfies (15),
equivalent (16) basic constraints concerned. end, show CCP(i, j :
i0 , j 0 ) holds ] holds ] . choice , know Tii0 =
Tjj 0 = {EC} RA relations either 0-meet relations consist corner relations.
Therefore, CCP(i, j : i0 , j 0 ) holds ] . ] BC-consistent, know DC
6= {DC} ] satisfies (15). Theorem 22, know ] ,
ij . implies ij
hence ] , consistent.
513

fiC OHN , L , L IU , & R ENZ

b8 Q8 H H
consequence, know joint consistency problem H
solved polynomial time.
b8 , H H) JSP(Q8 , H H) P.
Theorem 29. joint satisfaction problems JSP(H
b8 Q8 , H H.
Proof. Suppose ] joint network H
first apply algorithm BC-C ONSISTENCY ] . empty relation occurs
process, ] inconsistent. Otherwise, suppose 0 ] 0 BC-consistent joint network
b8 Q8 0 H H. note that,
equivalent ] . assert 0 still H
b8 (or Q8 ), RA relation H H, Lemma 31
RCC8 relation H
b8 Q8 ;
RCC8(D) relation H
RA(T ) relation H H;
b8 (or Q8 ).
\ {DC} = {EC, PO, TPP, NTPP, TPP , NTPP , EQ} H
BC-C ONSISTENCY uses rules (17)-(19) update relations, RCC8 relation
b8 (or Q8 ), RA relation 0 remains HH. consistency 0 ]0
0 remains H
follows Theorem 28.
property proof theorem hold C8 . remains open
JSP(C8 , H H) tractable (though important practical purposes since either
b8 Q8 used backtrack find solution required).
H

5. Combination RCC80 RA Networks
section, represent topological information RCC80 relations directional information
RA relations. previous section shown that, certain tractable subclasses RCC8
RA, JSP determined polynomial time, show bipath-consistency
incomplete subclasses. reason lies two regions constrained DC
may common conflict point. RCC80 , situation exist anymore two
disjoint regions may still 0-dimensional intersection. section show that, RCC80 ,
bipath-consistency alone sufficient show consistency joint network ]
H8 C8 H H.
case weak RCC8, first consider interaction RCC80 RA relations,
consider consistency joint basic networks, and, lastly, consider general case.
Similar Definition 19, following definition.
Definition 30. Let RCC80 relation RA relation. RA relation induced
RCC80 relation induced defined
RA(T ) = { : basic RA relation 6= }
0

RCC8 (D) = { : basic RCC80 relation 6= }.

easy see RA(T ) = {RA({}) : }

(20)
(21)

RA({DC}) RA({EC}) RA({PO}) RA({TPP}) = RA({NTPP}) RA({EQ}).
RA({PO}) RA({TPP }) = RA({NTPP }) RA({EQ}).
514

fiR EASONING OPOLOGICAL C ARDINAL IRECTION R ELATIONS

Note RA({TPP}) = RA({NTPP})= {s, d, f, eq} {s, d, f, eq}.
RCC80 non-tangential proper part region may MBR a. example,
star region Figure 6 non-tangential proper part MBR RCC80 .
Lemma 31. Let RCC80 relation RA relation. RCC80 (D) relation
b8 , Q8 , C8 ; RA(T ) relation H H relation H
b8
intersection H
Q8 C8 .
particular, unlike case weak RCC8, RA({NTPP, EQ}) = {s, d, f, eq}
{s, d, f, eq} relation H H.

Figure 6: Basic regions control point P combination RCC80 RA.
Theorem 32. Suppose basic RCC80 network basic RA network. ]
consistent bipath-consistent.
Proof. proof follows pattern combination weak RCC8 RA (Theorem 22), need replace basic regions around control point P star regions shown Figure 6, show three regions b, r, g around P , bNTPPr
rNTPPg.
following result RCC80 RA.
b8 Q8 RCC80 , RA network. ]
Theorem 33. Suppose network H
consistent ] bi-closed, path-consistent, consistent.
Proof. Assume canonical consistent scenario , consistent scenario
) = RA( ) hence
. Then, completely similar Lemma 27, show RA(ij
ij




bi-closeness ] . consistent, know ] bipath-consistent,
hence consistent Theorem 32.
b8 , RA) polynoThe result shows consistency joint network JSP(H
b8 RA network.
mially reduced determining consistency RCC8 network H
b8 , RA) separable problem. particular,
sense, JSP(H
515

fiC OHN , L , L IU , & R ENZ

Theorem 34. RCC8 relations interpreted using strong connectedness, joint satisb8 , H H) JSP(Q8 , H H) P.
faction problems JSP(H
Again, remains open whether result holds networks C8 RCC80 , even
though case RA({NTPP, EQ}) = RA(TPP) relation H H.
following section, consider combination RCC8 CDC constraints.

6. Combination RCC8 CDC Constraints
Although basic RCC8 networks basic CDC networks solved cubic time independently, interaction RCC8 CDC constraints makes joint satisfaction problem
hard solve. section, first show joint satisfaction problem NP designing polynomial non-deterministic algorithm show NP-hard even basic constraints. shows JSP(Brcc8 , Bcdc ) NP-complete. consider three variants
JSP(Brcc8 , Bcdc ) obtained replacing RCC8 RCC80 and/or CDC OIM. Write Boim
set basic OIM relations. show JSP(Brcc8 , Boim ) JSP(Brcc80 , Bcdc ) NP-complete,
JSP(Brcc80 , Boim ) P.
6.1 Algorithms
Let instance joint basic RCC8 RCC80 network basic CDC OIM network
set variables. provide subsection algorithms determining consistency ] . key idea first showing ] consistent iff regular solution
RA consistent (see below) giving algorithms determining whether
regular solution.
Suppose = (mi )ni=1 solution . Recall say = (mi )ni=1 regular solution
maximal solution {M(mi )}ni=1 canonical tuple rectangles (cf. Dfn. 13). Note
region regular solution union set cells introduced canonical
tuple rectangles.
Definition 35. Let = {vi ij vj }ni,j=1 basic RCC8 network = {vi ij vj }ni,j=1 basic
CDC network. Suppose = (mi )ni=1 regular solution . Write RA network
induced m. say regular solution RA consistent exists solution
] satisfies .
following lemma gives characterisation consistent joint basic networks.
Lemma 36. Let = {vi ij vj }ni,j=1 basic RCC8 network = {vi ij vj }ni,j=1 basic
CDC network. ] consistent iff regular solution RA consistent .
Proof. sufficiency part clear definition. prove necessity part. Suppose =
(ai )ni=1 solution ]. Write RA network induced a. solution
] . Hence unique regular solution satisfies . Write = (mi )ni=1
regular solution. clear regular solution RA consistent .
lemma, determine consistency ] , need determine existence
regular solutions RA consistent . Suppose regular solution .
next give necessary sufficient condition RA consistent .
516

fiR EASONING OPOLOGICAL C ARDINAL IRECTION R ELATIONS

end, first fix notation terminology. region mi m, say corner
point P mi potential conflict point (in m) exactly one four cells incident P
contained mi . example, grey region shown Figure 7 five potential conflict points
Pi (i = 1, ..., 5). Later show points may introduce conflicts hard resolve
RCC8 constraints involved. Furthermore, denote Gi set cells contained
mi , Ei set edges cells lie boundary mi , Ni set potential conflict
points vi .

Figure 7: Illustration potential conflict points.
Lemma 37. Let = {vi ij vj }ni,j=1 basic RCC8 network = {vi ij vj }ni,j=1 basic
CDC network. regular solution = (mi )ni=1 RA consistent , have:
ij = TPP NTPP Gi Gj .

(22)

Proof. prove contradiction. Assume (vi TPPvj ) (vi NTPPvj ) constraint
Gi * Gj .
Suppose (vs vt ) constraint , basic CDC relation represented 3 3
Boolean matrix (dpq )1p,q3 . solution , 1 p, q 3
dpq = 1 iff ms mpq
6= ,

(23)

mpq
denotes one nine tiles generated MBR mt (cf. Fig. 3). Since
regular solution Gs set cells contained ms , equivalent saying
dpq = 1 iff

Gs mpq
common cell.

(24)

let g cell Gi \ Gj . g Gj , construction procedure regular
solutions (see Appendix A), exists constraint (vj 0 vk ) 0 = (d0uv ) g
0pq = 0 hence,
cell contained mpq
k p, q. (24) g Gj know
pq

00
(23), mj mk = . Let (vi vk ) CDC constraint vi vk suppose
00pq = 1 (24).
00 = (d00uv ). g cell Gi mpq
k ,
RA consistent , exists solution = (ai )ni=1 ]
M(ai ) = M(mi ). Since (vi TPPvj ) (vi NTPPvj ) , know ai aj . Furthermore,
pq
aj mj maximal solution . Therefore, ai mj . mpq
k = ak
pq
pq


00
00pq
mj mk = , ai ak empty. shows (ai , ak ) since
= 1.
contradiction.
NTPP constraints may furthermore exclude edges Ei nodes Ni
valuation vi . Suppose vi NTPPvj constraint = (mi )ni=1 RA consistent
. solution = (ai )ni=1 ] M(ai ) = M(mi ), ai NTPPaj aj mj
517

fiC OHN , L , L IU , & R ENZ

aj mj = . say, ai cannot touch edges nodes Ej Nj .
characterise this, define
[
Ei Ei \ {Ej : vi NTPPvj },
(25)
[
Ni Ni \ {Nj : vi NTPPvj }.
(26)
Since every region represented Boolean matrix, Gi , Ei , Ni calculated
polynomial time. following proposition gives necessary sufficient condition
RA consistent .
Lemma 38. Let = {vi ij vj }ni,j=1 basic RCC8 network = {vi ij vj }ni,j=1 basic
CDC network. regular solution = (mi )ni=1 RA consistent iff
vi TPPvj vi NTPPvj implies Gi Gj ,

M( Ei ) = M(mi ) i,
vi POvj implies Gi Gj 6= ,

exists resolving function f , defined function V P( {N1 , , Nn })
satisfying (27)-(29).
f (vi ) Ni ,

(27)

vi ECvj Gi Gj 6= Ei Ej 6= f (vi ) f (vj ) 6= ,

(28)

vi DCvj f (vi ) f (vj ) = .

(29)

Proof. begin necessity part. Suppose RA consistent . definition
exists solution = (ai )ni=1 ] M(ai ) = M(mi ). first condition
proven Lemma 37. second condition, M(ai ) = M(mi ), ai mi , know
ai nonempty intersection one unit edge cell lies top (bottom, leftmost,
rightmost) edge M(mi ). unit
edge clearly Ei . Furthermore, proven
edge Ei , thus M( Ei ) = M(mi ). following two conditions guarantee
PO, EC constraints
satisfied violating DC constraints. third condition
follows directly ai Gi ai POaj . last condition, define resolving function
f f (vi ) = {P Ni : P ai }. straightforward prove f satisfies (27)-(29).
sufficiency part, construct solution ] . procedure quite similar
given Theorem 22 Appendix B. vi , choose control point cell Gi
control point edge Ei . vi POvj , choose control point
common cell Gi Gj . vi ECvj , choose control point common cell
Gi Gj 6= , common edge Ei Ej 6= , f (vi ) f (vj ) resolving
function f . proven control points lead solution . Moreover,
choice control points ensures regions solution .
Since conditions Lemma 38 verified nondeterministic polynomial algorithm,
following theorem.
Theorem 39. JSP(Brcc8 , Bcdc ) NP.
518

fiR EASONING OPOLOGICAL C ARDINAL IRECTION R ELATIONS

Proof. Suppose ] instance JSP(Brcc8 , Bcdc ). devise nondeterministic polynomial
algorithm follows. first guess basic RA network consistent basic CDC
network , compute regular solution satisfies cubic time, guess
resolving function f satisfies conditions (27)-(29), check whether consistent
basic RCC8 network Lemma 38 via f . case, algorithm returns true.
Otherwise, algorithm returns false. shows JSP(Brcc8 , Bcdc ) NP.
Since OIM network one regular solution, Lemma 38
Corollary 40. JSP(Brcc8 , Boim ) NP.
interpret topological constraints RCC80 , following simplified condition
determining whether regular solution RA consistent .
Proposition 41. Suppose basic RCC80 network, basic CDC network,
set variables V = {v1 , , vn }. regular solution RA consistent
iff
vi TPPvj vi NTPPvj implies Gi Gj ,
vi POvj implies Gi Gj 6= ,
vi ECvj implies either Gi Gj Ei Ej nonempty.
Moreover, conditions checked polynomial time.
Proof. proof similar Lemma 38. resolving function irrelevant,
RCC80 conflict points longer evidence EC relations, point P (a set X, respectively) regarded evidence
relation (aECb) P 0 b (X b), respectively.
Note require M( Ei ) = M(mi ), RCC8 possible aNTPPb
M(a) = M(b), see Figure 6 illustration.
directly leads following two results.
Theorem 42. JSP(Brcc80 , Bcdc ) NP.
Proof. proof similar Theorem 39. Suppose ] instance JSP(Brcc8 , Bcdc ).
first guess basic RA network consistent construct regular solution
satisfies check whether RA consistent Proposition 41.
Recall OIM essence combination CDC RA, basic OIM network
consistent iff two component CDC RA networks consistent (see Proposition 17).
case RCC80 combined OIM, following tractability result.
Theorem 43. JSP(Brcc80 , Boim ) P.
Proof. algorithm JSP(Brcc80 , Boim ) contains three steps. Suppose ] instance
n variables. first step decide whether independently consistent.
so, return false; otherwise, construct unique regular solution . achieved
O(n3 ) time. calculate Gi Ni , done O(n4 ) time. third step
decide whether RA consistent according Proposition 41, done
O(n4 ) time. Therefore, consistency ] determined O(n4 ) time and, hence,
JSP(Brcc80 , Boim ) P.
519

fiC OHN , L , L IU , & R ENZ

next subsection, show JSP(Brcc8 , Bcdc ), JSP(Brcc80 , Bcdc ), JSP(Brcc8 , Boim )
NP-hard.
6.2 NP-Hardness Results
Recall proof Theorem 39, guess twice determining consistency
instance ] JSP(Brcc8 , Bcdc ), basic RA network consistent ,
resolving function f satisfies (27)-(29) (see Proposition 38). subsection
devise two polynomial reductions known NP-hard problems JSP(Brcc8 , Bcdc ) exploiting
two facts.
Theorem 44. JSP(Brcc8 , Bcdc ) NP-hard.
Proof. first reduction 3-SAT JSP(Brcc8 , Bcdc ). quite complicated,
defer construction Appendix C. explain problem NP-hard.
3-SAT instance , construct instance ] JSP(Brcc8 , Bcdc )
RCC8 constraint either DC EC constraint. Furthermore, show
unique regular solution RA consistent consistent.
intractability caused potential conflict points regular solution, which, together EC DC constraints, may introduce conflicts hard resolve.
Lemma 38, satisfy EC constraint vi ECvj , need check whether mi mj share
cell, else edge, else corner point. last case, proven without much difficulty
points shared mi mj exactly points Ni Nj . Therefore, mi mj share
cell edge, evidence point constraint vi ECvj chosen Ni Nj .
turns choosing evidence points EC constraints violating
DC constraints NP-hard.
second reduction Graph 3-colouring problem JSP(Brcc8 , Bcdc ). defer construction Appendix D. graph G, construct instance G ] G JSP(Brcc8 , Bcdc ).
reduction differs first one exploit intractability finding
resolving function. fact, vi ECvj constraint, regular solution G ,
either mi mj share cell edge, mi mj disjoint (in case RA
consistent ). say, resolving functions effect RA consistency m.
reduction based fact G exponentially many regular solutions,
general way test polynomial time (unless P = NP).
Note first reduction shown unique regular solution RA
consistent consistent, 3-SAT instance ] instance
JSP(Brcc8 , Bcdc ) defined reduction. Write basic RA network induced
particular regular solution . easy see ] consistent iff ] ]
consistent. words, reduction 3-SAT reduction JSP(Brcc8 , Boim ).
Corollary 45. JSP(Brcc8 , Boim ) NP-hard.
Similarly, second reduction reduction JSP(Brcc80 , Bcdc ).
JSP(Brcc8 , Bcdc ) instance graph G uses DC EC constraints, two variables required EC, MBRs 0-meet, MBRs may overlap.
Corollary 46. JSP(Brcc80 , Bcdc ) NP-hard.
520

fiR EASONING OPOLOGICAL C ARDINAL IRECTION R ELATIONS

NP-hardness results Theorem 39, Corollary 40, Theorem 42, know
Theorem 47. joint satisfaction problems JSP(Brcc8 , Bcdc ), JSP(Brcc80 , Bcdc ), JSP(Brcc8 ,
Boim ) NP-complete.

7. Conclusion
paper, investigated computational complexity reasoning topological
relations cardinal directions extended spatial objects. used two different interpretations well-known RCC8 algebra representing topological information, use
Rectangle Algebra (RA) cardinal direction calculus (CDC) describe directional information. shown joint satisfaction problems decidable remain NP
interpretations topological directional information. importantly, shown
consistency problem P basic (weak strong) RCC8 basic RA constraints
involved, topological constraints basic strong RCC8 constraints directional
constraints jointly represented basic RA CDC constraints.
related work reported work Sistla Yu (2000), Li (2007), Li
Cohn (2012), small fragments RA used express directional information.
results represent large step towards applicability qualitative spatial reasoning techniques
real-world problems. particular tractable results promising enable efficient
reasoning important calculi. means efficient reasoning important
potential application, developers aim representing directional information using RA
(or together CDC) instead CDC alone and/or representing topological information using
RCC80 instead RCC8. results combining RCC8 CDC/OIM important
theoretical point view first formal results combination. demonstrated using concrete application scenario, results practical significance,
combined information consider easily extracted cases computer vision used
obtaining spatial information.

Acknowledgments
thank anonymous reviewers invaluable comments detailed suggestions.
first author thanks University Technology Sydney funding visit Sydney
Adjunct Professor. work partially supported Australian Research Council (Grant
No.s DP120104159, DP120103758 FT0991917), National Natural Science Foundation
China (Grant No. 61228305), EU funded projects RACE (FP7-ICT-287752) STRANDS
(FP7-ICT-600623).

Appendix A. Realisation Basic CDC Networks
describe cubic algorithm given work Zhang et al., (2008), Liu et al., (2010).
Given basic CDC network, first, compute canonical solution induced (possibly nonbasic) RA network. Next, remove cells violate constraints rectangle.
Third, check whether obtained valid solution. following, give
detailed description running example illustrated Table 4 Figure 8.
521

fiC OHN , L , L IU , & R ENZ

(1, 2)

(1, 3)

(2, 3)


0
1
1
0
1
1
1
1
0

ij
0
1
0
0
0
0
1
0
0


0
0
0
0
0
0
0
0
0


0
0
0
0
0
0
0
0
0

ji
1
1
0
0
1
0
0
0
1

xij yij

xij yij

oo

oo

{m, b}

b

oi

oi



1
1
0
0
0
0
0
1
1

Table 4: Example solving basic CDC network.

Step 1. Compute induced RA network 0 .
Step 2. Refine 0 basic RA network = {vi (xij yij )vj }ni,j=1 setting xij = xij \{m, mi}
yij = yij \{m, mi}. unsatisfiable, neither . Suppose satisfiable construct
canonical solution = (mi )ni=1 (cf. Figure 8).

Figure 8: Illustration Step 3: Deriving solution canonical solution .
Step 3. step tries find solution = (mi )ni=1 basic CDC network
M(mi ) = M(mi ). Recall basic CDC relation ij represented 3 3 Boolean matrix
((ij )xy ). solution, mi (mj )xy = holds every (ij )xy = 0, (mj )xy one
nine tiles generated M(mj ) (cf. Figure 3).
make solution ,
means,


need exclude impossible cells mi . Set Ti = {(mj )xy : (ij )xy = 0}nj=1 . Let mi
closure mi \ Ti (cf. Figure 8 left).
Step 4. last step checks whether = (mi )ni=1 solution . solution,
must regular solution; not, assert solution all.
note regular solutions may exist (cf. Figure 8 right). get
repeating Steps 2 4 using every possible refinement 0 .

Appendix B. Proof Theorem 22
need show sufficiency part. Similar cubic construction method basic RCC8 constraints (cf. Li, 2006b Section 2.2.1 paper), construct solution
= (mi )ni=1 additional requirement M(mi ) = mi 1 n,
{m1 , ..., mn } canonical solution . Recall coordinates corner point
rectangle mi integral. Assuming ntpp-level l(i) computed 1 n,
next describe construction detail.
522

fiR EASONING OPOLOGICAL C ARDINAL IRECTION R ELATIONS

Step 1. Selection Control Points
vi select set control points Xi . First all, corner point Ci control point
vi . select one (non-integral) point edge mi put four points
Xi . Then, j > ij = EC PO select point Pij mi mj (which nonempty
bipath-consistency ] ), put Xi Xj . Note mi mj
could single point, line segment, rectangle. choosing Pij mi mj ,
require Pij fresh point chosen corner point
rectangle (unless mj singleton set). write P set control points.
Step 2. Basic Regions Associated Control Points
control point Q, construct series sectors {q i,k : k = 1, , 4}ni=1 series
squares {q (i) }ni=1 (see Figure 9). call basic regions associated Q. Note
use upper case letter denote control point, use corresponding lower case letter (with
indices) denote basic regions. sectors chosen way allows us distinguish
four connecting regions cases Q corner point (such point P Figure3).
sectors completely fill disks.

Figure 9: Basic regions control point Q.
two different control points, require outermost squares disjoint. Furthermore, basic region must small enough crossed border mi
Q boundary point.
Step 3. Region Construction
control point Q, set q =
a1i
a2i
a3i
a4i

S4

k=1 q

i,k .

Let
[
= mi {q : Q Xi }
[
= a1i (mi {q j : ij = PO, Q Xi Xj })
[
= a2i {a2j : ji = TPP ji = NTPP}
[
= a3i {q (l(i)) : ji = NTPP, Q a3j }

Set mi = a4i = (mi )ni=1 . easy prove satisfies RCC8 constraints .
example, suppose (vi DC vj ) constraint . (15) holds, know vi vj share
common conflict point, i.e. Ci Cj = . Due choice control points vi vj , know
523

fiC OHN , L , L IU , & R ENZ

Xi Xj empty. easy show mi mj empty hence DC constraint
satisfied.
show satisfies , need prove M(mi ) = mi i. clear a1i
a2i subsets mi . choice Xi , know mi = M(a1i ) = M(a2i ). ji = TPP
NTPP, mj mi bipath-consistency. implies M(a3i ) = mi . Furthermore,
ji = NTPP, (mj , mi ) bipath-consistency. control point Q
a3j mj , Q interior mi . Therefore, choice basic regions, know
outmost square q (n) Q, hence q (l(i)) , contained mi . Therefore, M(a4i ) = mi . proves
solution ] .

Appendix C. Reduction 3SAT JSP(Brcc8 , Bcdc )
V
n
Let =
i=1 cj 3SAT instance involving n propositional variables {pk }k=1 clauses.
Assume j-th clause cj qi1 qi2 qi3 , qij literal {pk }nk=1 {pk }nk=1 .
construct JSP(Brcc8 , Bcdc ) instance ] choose particular regular solution
satisfiable iff RA consistent .
three types spatial variables ] : auxiliary variables (called grid variables)
used fix relative locations variables, variables simulate propositional
variables, variables simulate propositional clauses.
C.1 Grid Variables
introduce 10 n grid variables Gij (1 2n, 1 j 5). CDC constraints
variables specified Figure 10 (left). RCC8 relation two grid variables
Gij , Gi0 j 0 EC 4-neighbours, i.e. {|i i0 |, |j j 0 |} = {0, 1}. EC constraints
make sure gap MBRs two neighbouring grid variables. implies
one regular solution .
Grid variables mainly used locate spatial variables. new variable v grid
variable Gij , say v occupies Gij v M(Gij ) nonempty, MBR M(Gij ), i.e.
M(v M(Gij )) = M(Gij ).

Figure 10: Grid spatial variables propositional variables.

C.2 Spatial Variables Propositional Variables
propositional variable pi , four spatial variables Ai , Bi , Ci Di introduced
occupies two grid cells, empty intersection interiors MBRs
524

fiR EASONING OPOLOGICAL C ARDINAL IRECTION R ELATIONS

grid variables. corresponding grid cells illustrated Figure 10 (right). Take Ai
example. assigning CDC constraints Ai grid variables, require Ai
occupies G2i1,1 G2i1,4 , disjoint MBRs grid variables. easy
see Ai Bi contains two points, viz. Pi+ Pi , Ci Di .
topological constraints, require Ai ECBi Ci ECDi , constraints
DC. EC constraints imply Ai Bi Ci Di nonempty. hand,
since Ai DCCi , conclude Ai Bi must share one Pi+ Pi , Ci
Di share one.
C.3 Spatial Variables Propositional Clauses
clause (qj1 qj2 qj3 ) , introduce two new spatial variables Ej Fj ,
occupy three grid cells. precise occupied grid cells set according variables signs
qjk . Figure 11 gives example illustrate construction, assume qj1 = pi1 , qj2 =
pi2 , qj3 = pi3 . topological constraints, set constraint Ej Fj
EC, set constraints DC. implies Ej Fj contains least one point
Pi1 , Pi+2 , Pi+3 . claim case Ai1 Bi1 = {Pi1 }, Ai2 Bi2 = {Pi+2 }
Ai3 Bi3 = {Pi+3 }. Otherwise, DC constraint, e.g. Ai1 Ej , violated.
C.4 Regular Solution May RA Consistent

Figure 11: Spatial variables clauses.
finished construction. Note always satisfiable exponentially many regular solutions (as may may gap 4-neighbouring
grid variables). However, EC constraints 4-neighbouring grid variables imply
regular solution gap 4-neighbouring grid variables RA
consistent . denote regular solution m.
next show consistent iff ] consistent. Suppose ] solution a.
define assignment : {pi }ni=1 {true, f alse} (pi ) = true iff Ai Bi = {Pi+ }
a. verify satisfies . hard, suppose assignment satisfies
. prove ] solution. idea introduce instance JSP(Brcc8 , Brec ),

two spatial variables A+
Ai instead Ai (also Bi , Ci , Di ), three
k
variables Ej (1 k 3) instead Ej (also Fj ). RA constraints set according
Figure 10 Figure 11, RCC8 constraints set . proven
new joint network satisfies (15), solution obtained cubic time. solution

] obtained merging related regions (e.g. merging A+
Ai Ai ).
525

fiC OHN , L , L IU , & R ENZ

verification straightforward. Therefore, satisfiable iff ] satisfiable, thus
satisfiable iff RA consistent .

Appendix D. Reduction Graph 3-Colouring JSP(Brcc8 , Bcdc )
Suppose G = (V, E) graph. construct instance G ] G JSP(Brcc8 , Bcdc ) follows.
node vi V , construct gadget 10 spatial variables: uki (k = 1, 2, , 8), xi
0
yi . first describe CDC constraints. basic CDC constraints uki uki
specified Figure 12 (i). example, G contains following basic CDC constraints








0 0 0
0 0 0
1 1 0
0 0 0
u1i 1 0 0 u2i , u2i 0 0 1 u1i , u2i 1 1 0 u7i , u7i 0 1 1 u2i .
0 0 0
0 0 0
0 0 0
0 1 1
Note that, induced RA constraint u2l+1
u2l+2
l = 0, 1, 2 (b m) eq.


basic CDC constraints xi yi specified Figure 12 (ii), i.e.




0 0 0
0 0 0
xi 1 1 0 yi , yi 0 1 1 xi .
0 0 0
0 0 0
CDC constraints concerning xi , yi uki specified follows.

0
xi 0
0

1
xi 0
0

0
k
ui 0
0

0

yi 0
0

1
yi 0
0

0
uki 0
0




0 0 0
0 0
1 0 u1i , xi 1 0 0 u2i ,
0 0 1
0 1



0 0
1 0 0
1 0 u5i , xi 1 0 0 u6i ,
0 0
0 0 0

0 0
1 0 xi (k 6= 6),
0 0



0 0
0 0 0
0 1 u1i , yi 0 1 0 u2i ,
0 1
0 0 1



0 0
1 0 0
0 1 u5i , yi 0 1 0 u6i ,
0 0
0 0 0

0 0
1 0 yi (2 k 8),
0 0


1
xi 0
0

1
xi 0
0

0
6
ui 0
0

1

yi 0
0

1
yi 0
0

0
u1i 1
0




1 0 0
0 0
1 0 u3i , xi 1 0 0 u4i ,
0 0 1
0 1

0 0
0 0 uki (k = 7, 8),
0 1

0 0
0 1 xi ;
0 0



0 0
1 0 0
0 1 u3i , yi 0 1 0 u4i ,
0 1
0 0 1

0 0
0 0 uki (k = 7, 8),
0 1

0 0
0 0 yi .
0 0

Figure 12 (ii) illustrates regular solution uki , xi yi , u1i meets u2i
gap u3i u4i , u5i u6i . note total eight different
regular solutions network restricted gadget vi .
526

fiR EASONING OPOLOGICAL C ARDINAL IRECTION R ELATIONS

(i)

(ii)
Figure 12: Illustrations CDC constraints: (i) constraints uki (k = 1, 2, , 8); (ii)
constraints relating xi , yi . Note use dashed squares denote variables u7i u8i ,
connect two variables. Note xi yi three disjoint parts.

527

fiC OHN , L , L IU , & R ENZ

RCC8 constraint two variables either EC DC. require xi ECyi .
realisable u2l+1
meets u2l+2
x-direction least one l {0, 1, 2}.4 use fact


mimic node vi V coloured one three colours. RCC8 constraints
remaining pairs variables specified DC. 5
gadgets nodes V horizontally aligned, illustrated Figure 13.

Figure 13: Illustrations gadgets nodes V

Figure 14: Illustrations gadget edge ek = (vi , vj ), dashed lines suggest corresponding edges aligned according proper CDC constraints.
devise gadgets edges graph G. Let ek = (vi , vj ) edge E.
0 , w 1 , w 2 w 3 well constraints
colour l {0, 1, 2}, introduce four variables wk,l
k,l
k,l
k,l
2l+2
2l+1
2l+2
guarantee u2l+1
cannot
meet
u

u
meets
u
,

corresponds
nodes vi


j
j
vj cannot colour l (because ek edge G). CDC constraints specified
1 meets w 3 iff u2l+1 meets u2l+2 , w 3 meets w 2 iff u2l+1
Figure 14. note wk,l


j
k,l
k,l
k,l
3 ) contained
meets u2l+2
,


x-direction.


CDC
constraints


show

M(w
j
k,l
0 ). implies either gap w 1 w 3 gap w 3
M(wk,l
k,l
k,l
k,l
2 . words, w 1 meets w 3 w 3 meets w 2 cannot happen simultaneously.
wk,l
k,l
k,l
k,l
k,l
4. one l u2l+1
meets u2l+2
x-direction, always choose smallest l


colour node vi .
5. Note u1i DCu2i together CDC relations u1i u2i necessarily imply u1i
precede u2i x-direction. is, u1i could still meet u2i x-direction case.

528

fiR EASONING OPOLOGICAL C ARDINAL IRECTION R ELATIONS

constraints enforcing dashed lines know u2l+1
cannot meet u2l+2
u2l+1
meets u2l+2
,


j
j
vice versa.
Note need complete . unspecified CDC constraints easily
deduced figures, unspecified RCC8 constraints DC.
hard verify graph G 3-colourable iff joint network G ] G consistent.
idea that, : V {0, 1, 2} 3-colouring G, may construct solution
G ] G RA relation u2l+1
u2l+2
eq (i) = l, b eq


otherwise. guarantees xi yi realisable. fact incident nodes G
r realisable. hand, ] satisfiable,
colour implies wk,l
G
G
least one pair {(u1i , u2i ), (u3i , u4i ), (u5i , u6i )} RA relation eq (otherwise,
xi ECyi violated). Define : V {0, 1, 2} (vi ) = min{l : u2l+1
eq u2l+2
}.


r realisable.
verified 3-colouring G due fact wk,l
completed reduction Graph 3-Colouring JSP(Brcc8 , Bcdc ). note
EC constraints interpreted terms RCC80 . means G ] G
regarded instance JSP(Brcc8 , Bcdc ). Therefore, provided reduction
Graph 3-Colouring JSP(Brcc80 , Bcdc ).

References
Allen, J. F. (1983). Maintaining knowledge temporal intervals. Communications ACM,
26(11), 832843.
Balbiani, P., Condotta, J.-F., & Farinas del Cerro, L. (1999). new tractable subclass rectangle algebra. Dean, D. (Ed.), Proceedings Sixteenth International Joint Conference
Artificial Intelligence (IJCAI-99), pp. 442447. Morgan Kaufmann.
Bodirsky, M., & Kara, J. (2010). complexity temporal constraint satisfaction problems. J.
ACM, 57(2).
Borgo, S., Guarino, N., & Masolo, C. (1996). pointless theory space based strong connection
congruence. Aiello, L. C., Doyle, J., & Shapiro, S. C. (Eds.), KR, pp. 220229. Morgan
Kaufmann.
Chen, J., Cohn, A. G., Liu, D., Wang, S., Ouyang, J., & Yu, Q. (2013). survey qualitative
spatial representations. Knowledge Engineering Review, FirstView, 131.
Cicerone, S., & Di Felice, P. (2004). Cardinal directions spatial objects: pairwiseconsistency problem. Information Sciences, 164(1-4), 165188.
Cohn, A. G., & Renz, J. (2008). Qualitative spatial reasoning. van Harmelen, F., Lifschitz, V., &
Porter, B. (Eds.), Handbook Knowledge Representation. Elsevier.
Cohn, A. G., Renz, J., & Sridhar, M. (2012). Thinking inside box: comprehensive spatial
representation video analysis. KR, pp. 588592.
Cohn, A. G., & Varzi, A. C. (1999). Modes connection. Freksa, C., & Mark, D. M. (Eds.),
COSIT, Vol. 1661 Lecture Notes Computer Science, pp. 299314. Springer.
Davis, E. (2013). Qualitative spatial reasoning interpreting text narrative. Spatial Cognition
& Computation, 13(4), 264294.
529

fiC OHN , L , L IU , & R ENZ

Davis, E., Gotts, N. M., & Cohn, A. G. (1999). Constraint networks topological relations
convexity. Constraints, 4(3), 241280.
Duntsch, I., Wang, H., & McCloskey, S. (2001). relation-algebraic approach Region
Connection Calculus. Theoretical Computer Science, 255, 6383.
Egenhofer, M. J., & Mark, D. M. (1995). Naive geography. Frank, A., & Kuhn, W. (Eds.),
COSIT-95, pp. 115. Springer.
Falomir, Z. (2012). Qualitative distances qualitative description images indoor scene
description recognition robotics. AI Communications, 25(4), 387389.
Freksa, C. (1992). Temporal reasoning based semi-intervals. Artificial Intelligence, 54(1), 199
227.
Gabelaia, D., Kontchakov, R., Kurucz, A., Wolter, F., & Zakharyaschev, M. (2005). Combining
spatial temporal logics: Expressiveness vs. complexity. Journal Artificial Intelligence
Research, 23, 167243.
Ge, X., & Renz, J. (2013). Representation reasoning general solid rectangles. Rossi,
F. (Ed.), IJCAI. IJCAI/AAAI.
Gerevini, A., & Renz, J. (2002). Combining topological size information spatial reasoning.
Artificial Intelligence, 137(1), 142.
Gerevini, A., & Nebel, B. (2002). Qualitative spatio-temporal reasoning rcc-8 allens
interval calculus: Computational complexity. ECAI, pp. 312316.
Goyal, R., & Egenhofer, M. (1997). direction-relation matrix: representation directions
relations extended spatial objects. Annual Assembly Summer Retreat
University Consortium Geographic Information Systems Science.
Goyal, R., & Egenhofer, M. (2001). Similarity cardinal directions. Jensen, C., Schneider, M.,
Seeger, B., & Tsotras, V. (Eds.), Proceedings 7th International Symposium Advances
Spatial Temporal Databases (SSTD-01), pp. 3658. Springer.
Hirsch, R. (1999). finite relation algebra undecidable network satisfaction problem. Logic
Journal IGPL, 7(4), 547554.
Jonsson, P., & Krokhin, A. A. (2004). Complexity classification qualitative temporal constraint
reasoning. Artificial Intelligence, 160(1-2), 3551.
Kontchakov, R., Nenov, Y., Pratt-Hartmann, I., & Zakharyaschev, M. (2011). decidability
connectedness constraints 2D 3D Euclidean spaces. IJCAI, pp. 957962.
Li, S. (2006a). Combining topological directional information: First results. Lang, J., Lin, F.,
& Wang, J. (Eds.), Proceedings First International Conference Knowledge Science,
Engineering Management (KSEM-06), pp. 252264. Springer.
Li, S. (2006b). topological consistency realization. Constraints, 11(1), 3151.
Li, S. (2007). Combining topological directional information spatial reasoning. Veloso,
M. (Ed.), Proceedings 20th International Joint Conference Artificial Intelligence
(IJCAI-07), pp. 435440. AAAI.
Li, S., & Cohn, A. G. (2012). Reasoning topological directional spatial information.
Computational Intelligence, 28(4), 579616.
530

fiR EASONING OPOLOGICAL C ARDINAL IRECTION R ELATIONS

Li, S., & Liu, W. (2014). Cardinal directions: comparison direction relation matrix objects
interaction matrix. International Journal Geographical Information Science, accepted
publication, doi: http://dx.doi.org/10.1080/13658816.2014.954580.
Li, S., Liu, W., & Wang, S. (2013). Qualitative constraint satisfaction problems: extended
framework landmarks. Artificial Intelligence, 201, 3258.
Ligozat, G. (1994). Tractable relations temporal reasoning: pre-convex relations. ECAI-94.
Workshop Spatial Temporal Reasoning, pp. 99108.
Ligozat, G., & Renz, J. (2004). qualitative calculus? general framework. Zhang, C.,
Guesgen, H., & Yeap, W.-K. (Eds.), PRICAI-04, pp. 5364. Springer.
Liu, W., & Li, S. (2011). Reasoning cardinal directions extended objects: NPhardness result. Artificial Intelligence, 175(18), 21552169.
Liu, W., Li, S., & Renz, J. (2009). Combining RCC-8 qualitative direction calculi: Algorithms
complexity. Boutilier, C. (Ed.), Proceedings Twenty-first International Joint
Conference Artificial Intelligence (IJCAI-09), pp. 854859.
Liu, W., Zhang, X., Li, S., & Ying, M. (2010). Reasoning cardinal directions extended objects. Artificial Intelligence, 174(12-13), 951983.
Nebel, B. (1995). Computational properties qualitative spatial reasoning: First results. KI-95,
pp. 233244, Berlin, Germany. Springer-Verlag.
Nebel, B., & Burckert, H.-J. (1995). Reasoning temporal relations: maximal tractable
subclass Allens interval algebra. Journal ACM, 42(1), 4366.
Randell, D. A., Cui, Z., & Cohn, A. G. (1992). spatial logic based regions connection.
KR-92, pp. 165176.
Renz, J. (1999). Maximal tractable fragments Region Connection Calculus: complete
analysis. Dean, D. (Ed.), Proceedings Sixteenth International Joint Conference
Artificial Intelligence (IJCAI-99), pp. 448454. Morgan Kaufmann.
Renz, J. (2002). Qualitative spatial reasoning topological information, Vol. 2293 Lecture
Notes Artificial Intelligence. Springer-Verlag, Berlin, Germany.
Renz, J., & Nebel, B. (1999). complexity qualitative spatial reasoning: maximal
tractable fragment Region Connection Calculus. Artificial Intelligence, 108, 69123.
Schneider, M., Chen, T., Viswanathan, G., & Yuan, W. (2012). Cardinal directions complex
regions. ACM Transactions Database Systems, 37(2), 8:18:40.
Schockaert, S., & Li, S. (2012). Convex solutions RCC8 networks. ECAI, pp. 726731.
Schockaert, S., & Li, S. (2013). Combining RCC5 relations betweenness information.
IJCAI, pp. 10831089.
Shi, H., Jian, C., & Krieg-Bruckner, B. (2010). Qualitative spatial modelling human route instructions mobile robots. ACHI, pp. 16.
Sistla, A., & Yu, C. (2000). Reasoning qualitative spatial relationships. Journal Automated
Reasoning, 25(4), 291328.
Skiadopoulos, S., & Koubarakis, M. (2005). consistency cardinal direction constraints.
Artificial Intelligence, 163(1), 91135.
531

fiC OHN , L , L IU , & R ENZ

Sridhar, M., Cohn, A. G., & Hogg, D. C. (2011). video RCC8: Exploiting distance
based semantics stabilise interpretation mereotopological relations. COSIT, pp.
110125.
Vilain, M. B., & Kautz, H. A. (1986). Constraint propagation algorithms temporal reasoning.
AAAI, pp. 377382.
Whitehead, A. (1929). Process Reality: Essay Cosmology. Cambridge University Press,
Cambridge.
Wolfl, S., & Westphal, M. (2009). combinations binary qualitative constraint calculi.
Boutilier, C. (Ed.), Proceedings Twenty-first International Joint Conference Artificial
Intelligence (IJCAI-09), pp. 967972.
Wolter, D., & Wallgrun, J. (2012). Qualitative spatial reasoning applications: New challenges
sparq toolbox. Hazarika, M. (Ed.), Qualitative Spatio-Temporal Representation
Reasoning: Trends Future Directions, pp. 336362.
Wolter, D., Dylla, F., Wolfl, S., Wallgrun, J. O., Frommberger, L., Nebel, B., & Freksa, C. (2008).
Sailaway: Spatial cognition sea navigation. KI, 22(1), 2830.
Wolter, F., & Zakharyaschev, M. (2000). Spatial reasoning RCC-8 boolean region terms.
ECAI, pp. 244250.
Zhang, P., & Renz, J. (2014). Qualitative spatial representation reasoning angry birds:
extended rectangle algebra. KR.
Zhang, X., Liu, W., Li, S., & Ying, M. (2008). Reasoning cardinal directions: efficient
algorithm. Fox, D., & Gomes, C. (Eds.), Proceedings Twenty-Third AAAI Conference
Artificial Intelligence (AAAI-08), pp. 435440. AAAI.

532


