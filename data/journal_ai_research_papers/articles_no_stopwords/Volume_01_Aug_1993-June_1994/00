Journal Artificial Intelligence Research 1 (1993) 1-23

Submitted 5/93; published 8/93

Market-Oriented Programming Environment
Application Distributed Multicommodity Flow Problems
Michael P. Wellman

wellman@engin.umich.edu

University Michigan, Dept. Electrical Engineering Computer Science,
Ann Arbor, MI 48109 USA

Abstract

Market price systems constitute well-understood class mechanisms
certain conditions provide effective decentralization decision making minimal communication overhead. market-oriented programming approach distributed problem
solving, derive activities resource allocations set computational agents
computing competitive equilibrium artificial economy. Walras provides basic
constructs defining computational market structures, protocols deriving
corresponding price equilibria. particular realization approach form
multicommodity ow problem, see careful construction decision process according economic principles lead ecient distributed resource allocation,
behavior system meaningfully analyzed economic terms.

1. Distributed Planning Economics
distributed multiagent planning system, plan system whole composite plans produced constituent agents. plans may interact significantly
resources required agents' activities (preconditions) products resulting activities (postconditions). Despite interactions, often
advantageous necessary distribute planning process agents separated
geographically, different information, possess distinct capabilities authority,
designed implemented separately. case, agent limited
competence awareness decisions produced others, sort coordination
required maximize performance overall system. However, allocating resources
via central control extensive communication deemed infeasible, violates whatever
constraints dictated distribution planning task first place.
task facing designer distributed planning system define computationally ecient coordination mechanism realization collection agents.
agent configuration may given, may design parameter. term agent,
refer module acts within mechanism according knowledge
interests. capabilities agents organization overall decision-making
structure determine behavior system whole. concerns collective behavior self-interested decision makers, design decentralized structure
fundamentally exercise economics incentive engineering. problem developing
architectures distributed planning fits within framework mechanism design (Hurwicz, 1977; Reiter, 1986), many ideas results economics directly applicable.
particular, class mechanisms based price systems competition
deeply investigated economists, characterized conditions eciency
c 1993 AI Access Foundation Morgan Kaufmann Publishers. rights reserved.

fiWellman

compatibility features economy. applicable, competitive
mechanism achieves coordination minimal communication requirements (in precise
sense related dimensionality messages transmitted among agents (Reiter, 1986)).
theory general equilibrium (Hildenbrand & Kirman, 1976) provides foundation general approach construction distributed planning systems based
price mechanisms. approach, regard constituent planning agents consumers
producers artificial economy, define individual activities terms production consumption commodities. Interactions among agents cast exchanges,
terms mediated underlying economic mechanism, protocol.
specifying universe commodities, configuration agents, interaction
protocol, achieve variety interesting often effective decentralized behaviors.
Furthermore, apply economic theory analysis alternative architectures,
thus exploit wealth existing knowledge design distributed planners.
use phrase market-oriented programming refer general approach deriving solutions distributed resource allocation problems computing competitive
equilibrium artificial economy.1 following, describe general approach
primitive programming environment supporting specification computational
markets derivation equilibrium prices. example problem distributed transportation planning demonstrates feasibility decentralizing problem nontrivial
interactions, applicability economic principles distributed problem solving.

2. WALRAS: Market-Oriented Programming Environment
explore use market mechanisms coordination distributed planning modules, developed prototype environment specifying simulating computational
markets. system called walras, 19th-century French economist Leon Walras, first envision system interconnected markets price equilibrium.
Walras provides basic mechanisms implementing various sorts agents, auctions,
bidding protocols. specify computational economy, one defines set goods
instantiates collection agents produce consume goods. Depending
context, goods agents may fixed exogenously, example, could correspond real-world goods agents participating planning process. Others might
completely artificial ones invented designer decentralize problem-solving
process particular way. Given market configuration, walras runs agents
determine equilibrium allocation goods activities. distribution goods
activities constitutes market solution planning problem.
1. name inspired Shoham's use agent-oriented programming refer specialization
object-oriented programming entities described terms agent concepts interact
via speech acts (Shoham, 1993). Market-oriented programming analogous specialization,
entities economic agents interact according market concepts production exchange.
phrase invoked Lavoie, Baetjer, Tulloh (1991) refer real markets software
components.

2

fiMarket-Oriented Programming

2.1 General Equilibrium

walras framework patterned directly general-equilibrium theory. brief exposition, glossing many fine points, follows; elaboration see text microeconomic
theory (e.g., (Varian, 1984)).
start k goods n agents. Agents fall two general classes. Consumers
buy, sell, consume goods, preferences consuming various combinations
bundles goods specified utility function. agent consumer,
utility function, u : <+ ! <, ranks various bundles goods according preference.
Consumers may start initial allocation goods, termed endowment. Let e denote agent i's endowment good j , x amount good j
ultimately consumes. objective consumer choose feasible bundle goods,
(x 1; : : :; x ) (rendered vector notation x ), maximize utility. bundle
feasible consumer total cost going prices exceed value
i's endowment prices. consumer's choice expressed following
constrained optimization problem:
k



i;j

i;

i;j

i;k



max
u (x ) s.t. p x p e ;
x








(1)



p = (p1; : : :; p ) vector prices k goods.
Agents second type, producers, transform sorts goods
others, according technology. technology specifies feasible combinations
inputs outputs producer. Let us consider special case one
output good, indexed j , remaining goods potential inputs. case,
technology producer described production function,
k

= ,x = f (x 1; : : :; x


i;j



i;

i;j

,1; x +1 ; : : :; x );
i;j

i;k

specifying maximum output producible given inputs. (When good
input production, production function characterizes net output.)
case, producer's objective choose production plan maximizes profits subject
technology going price output input goods. involves choosing
production level, , along levels inputs produce minimum cost.
Let x p denote consumption prices, respectively, input goods.
corresponding constrained optimization problem maximize profits, difference
revenues costs:


i;|



|







max p , min
p x s.t. f (x ) ;
x
yi

equivalently,

j



i;|

|

i;|





min
p x s.t. , x f (x ):
x




i;j



i;|

i;|

(2)

agent acts competitively takes prices given, neglecting impact
behavior prices. formulation implicitly assumes perfect competition,
prices parameters agents' constrained optimization problems. Perfect
competition realistically ects individual rationality numerous agents,
small respect entire economy. Even case, however,
3

fiWellman

implement competitive behavior individual agents choose. implications
restriction perfect competition discussed below.
pair (p; x) price vector vector demands agent constitutes
competitive equilibrium economy if:
1. agent i, x solution constrained optimization problem|(1)
(2)|at prices p,


2. net amount good produced consumed equals total endowment,
n
X

=1



x =

n
X

i;j

=1

e ; j = 1; : : :; k:
i;j

(3)



words, total amount consumed equals total amount produced (counted
negative quantities consumption bundles producers), plus total amount
economy started (the endowments).
certain \classical" assumptions (essentially continuity, monotonicity, concavity utility production functions; see, e.g., (Hildenbrand & Kirman, 1976; Varian,
1984)), competitive equilibria exist, unique given strictness conditions.
perspective mechanism design, competitive equilibria possess several desirable
properties, particular, two fundamental welfare theorems general equilibrium theory: (1) competitive equilibria Pareto optimal (no agent better without
worse), (2) feasible Pareto optimum competitive equilibrium
initial allocation endowments. properties seem offer exactly
need: bound quality solution, plus prospect achieve
desired behavior carefully engineering configuration computational
market. Moreover, equilibrium, prices ect exactly information required
distributed agents optimally evaluate perturbations behavior without resorting
communication reconsideration full set possibilities (Koopmans, 1970).

2.2 Computing Competitive Equilibria

Competitive equilibria computable, algorithms based fixed-point methods (Scarf, 1984) optimization techniques (Nagurney, 1993) developed.
sorts algorithms effect operate collecting solving simultaneous equilibrium equations (1), (2), (3)). Without expressly distributed formulation, however,
techniques may violate decentralization considerations underlying distributed
problem-solving context. quite acceptable purposes algorithms
originally designed, namely analyze existing decentralized structures, transportation industries even entire economies (Shoven & Whalley, 1992). purpose
implement distributed system, must obey computational distributivity constraints
relevant usual purposes applied general-equilibrium analysis. general, explicitly examining space commodity bundle allocations search equilibrium
undercuts original motive decomposing complex activities consumption
production separate goods.
4

fiMarket-Oriented Programming

Another important constraint internal details agents' state (such utility
production functions bidding policy) considered private order maximize modularity permit inclusion agents designers' direct control.
consequence computationally exploiting global properties arising special features agents would generally permissible purposes. example,
constraint profits zero consequence competitive behavior constantreturns production technology. Since information form technology
bidding policy private producer agents, could considered cheating embed
zero-profit condition equilibrium derivation procedure.
Walras's procedure decentralized relaxation method, akin mechanism
tatonnement originally sketched Leon Walras explain prices might derived.
basic tatonnement method, begin initial vector prices, p0 . agents
determine demands prices (by solving corresponding constrained optimization problems), report quantities demanded \auctioneer". Based
reports, auctioneer iteratively adjusts prices excess
demand supply, respectively. instance, adjustment proportional excess
could modeled difference equation
n
X

p +1 = p + ff( x ,




=1





n
X

=1

e ):




sequence p0 ; p1; : : : converges, excess demand market approaches zero,
result competitive equilibrium. well known, however, tatonnement
processes converge equilibrium general (Scarf, 1984). class economies
tatonnement works so-called stable equilibria (Hicks, 1948). sucient
condition stability gross substitutability (Arrow & Hurwicz, 1977): price
one good rises, net demands goods decrease. Intuitively,
gross substitutability violated complementarities preferences
technologies reduced consumption one good cause reduced consumption
others well (Samuelson, 1974).

2.3 WALRAS Bidding Protocol

method employed walras successively computes equilibrium price separate market, manner detailed below. tatonnement, involves iterative adjustment prices based reactions agents market. However, differs
traditional tatonnement procedures (1) agents submit supply demand curves
rather single point quantities particular price, (2) auction adjusts individual prices clear, rather adjusting entire price vector increment
(usually function summary statistics excess demand).2
Walras associates auction distinct good. Agents act market
submitting bids auctions. walras, bids specify correspondence prices
2. general approach called progressive equilibration Dafermos Nagurney (1989), applied
particular transportation network equilibrium problem. Although model market dynamics
appear investigated extensively general-equilibrium theory, seem
match kind price adjustment process envisioned Hicks pioneering study dynamics
stability (Hicks, 1948).

5

fiWellman

quantities good agent offers demand supply. bid particular
good corresponds one dimension agent's optimal demand, parametrized
prices relevant goods. Let x (p) solution equation (1) (2),
appropriate, prices p. walras agent bids good j assumption prices
remaining goods fixed current values, p. Formally, agent i's bid
good j function x : <+ ! <, prices quantities satisfying


|

i;j

x (p ) = x (p ; p) ;
i;j

j



j

|

j

subscript j right-hand side selects quantity demanded good j
overall demand vector. agent computes sends function (encoded
variety formats) auction good j .
Given bids interested agents, auction derives market-clearing price,
quantity demanded balances supplied, within prespecified tolerance.
clearing price simply zero crossing aggregate demand function,
sum demands agents. zero crossing exist long aggregate
demand suciently well-behaved, particular, continuous decreasing price.
Gross substitutability, along classical conditions existence equilibrium,
sucient ensure existence clearing price stage bidding protocol.
Walras calculates zero crossing aggregate demand function via binary search.
aggregate demand well-behaved, result auction may non-clearing
price.
current price clearing respect current bids, say market
commodity equilibrium. say agent equilibrium set
outstanding bids corresponds solution optimization problem going prices.
agents commodity markets equilibrium, allocation goods dictated
auction results competitive equilibrium.
Figure 1 presents schematic view walras bidding process. auction
distinct good, agent, link auctions interest.
\tote board" current prices, kept up-to-date various auctions.
current implementation tote board global data structure, however, since price
change notifications explicitly transmitted interested agents, central information
could easily dispensed with.
agent maintains agenda bid tasks, specifying markets must
update bid compute new one. Figure 1, agent pending tasks submit
bids auctions G1 , G7, G4. bidding process highly distributed,
agent need communicate directly auctions goods interest (those
domain utility production function, nonzero endowments).
interactions concerns single good; auctions never coordinate
other. Agents need negotiate directly agents, even know other's
existence.
new bids received auction, previously computed clearing price becomes
obsolete. Periodically, auction computes new clearing price (if new updated
bids received) posts tote board. price updated,
may invalidate agent's outstanding bids, since computed
assumption prices remaining goods fixed previous values. finding


6

fiMarket-Oriented Programming

G1

A1

G2

Gk

A2

Ai
Task Agenda
[1], [7], [4]

Figure 1:

Walras's bidding process. G

tote board p1
p2

}


}
pk

denotes auction j th good,
ith trading agent. item [j ] task agenda denotes pending task
compute submit bid good j .
j



price change, agent augments task agenda include potentially affected
bids.
times, walras maintains vector going prices quantities would
exchanged prices. agents nonempty bid agendas auctions new
bids, goods may disequilibrium. auctions clear agendas
exhausted, however, economy competitive equilibrium (up numeric
tolerance). Using recent result Milgrom Roberts (1991, Theorem 12),
shown condition sucient convergence tatonnement|gross substitutability|
sucient convergence walras's price-adjustment process. key observation
progressive equilibration (synchronous not) price time based
set previous supply demand bids.
Although precise results effect, computational effort required
convergence fixed tolerance seems highly sensitive number goods, much
less number agents. Eydeland Nagurney (1989) analyzed detail
convergence pattern progressive equilibration algorithms related walras particular special cases, found roughly linear growth number agents. However,
general conclusions dicult draw cost computing equilibrium particular computational economy may well depend interconnectedness strength
interactions among agents goods.

2.4 Market-Oriented Programming

described above, walras provides facilities specifying market configurations
computing competitive equilibrium. view walras programming
environment decentralized resource allocation procedures. environment provides
constructs specifying various sorts agents defining interactions via
7

fiWellman

relations common commodities. setting initial configuration, market
run determine equilibrium level activities distribution resources
throughout economy.
cast distributed planning problem market, one needs identify (1) goods
traded, (2) agents trading, (3) agents' bidding behavior. design steps
serially dependent, definition constitutes exchangeable producible
commodity severely restricts type agents makes sense include.
mentioned above, sometimes take fixed real-world agents goods
presented part problem specification. configuration determined,
might advantageous adjust general parameters bidding protocol. Below,
illustrate design task walras formulation multicommodity ow problem.

2.5 Implementation

Walras implemented Common Lisp Common Lisp Object System (CLOS).

current version provides basic infrastructure running computational economies,
including underlying bidding protocol library CLOS classes implementing
variety agent types. object-oriented implementation supports incremental development market configurations. particular, new types agents often defined
slight variations existing types, example modifying isolated features demand
behavior, bidding strategies (e.g., management task agenda), bid format. Wang
Slagle (1993) present detailed case use object-oriented languages represent
general-equilibrium models. proposed system similar walras respect
formulation, although designed interface conventional model-solving packages,
rather support decentralized computation equilibrium directly.
Although models distributed system, walras runs serially single processor.
Distribution constraints information communication enforced programming
specification conventions rather fundamental mechanisms software environment. Asynchrony simulated randomizing bidding sequences agents
called unpredictably. Indeed, artificial synchronization lead undesirable
oscillation clearing prices, agents collectively overcompensate imbalances
preceding iteration.3
current experimental system runs transportation models sort described below, well abstract exchange production economies parametrized utility
production functions (including expository examples Scarf (1984) Shoven
Whalley (1984)). Customized tuning basic bidding protocol necessary. process getting walras run examples, added
generically useful building blocks class libraries, much required fill
comprehensive taxonomy agents, bidding strategies, auction policies.
3. formal dynamic models (Huberman, 1988; Kephart, Hogg, & Huberman, 1989), homogeneous
agents choose instantaneously optimal policies without accounting others simultaneously
making choice. Since value particular choice varies inversely number agents
choosing it, delayed feedback others' decisions leads systematic errors, hence
oscillation. observed phenomenon empirically synchronized version WALRAS.
eliminating synchronization, agents tend work different markets one time, hence
suffer much delayed feedback prices.

8

fiMarket-Oriented Programming

3. Example: Multicommodity Flow
simple version multicommodity ow problem, task allocate given
set cargo movements given transportation network. transportation network
collection locations, links (directed edges) identifying feasible transportation
operations. Associated link specification cost moving cargo along it.
suppose cargo homogeneous, amounts cargo arbitrarily
divisible. movement requirement associates amount cargo origin-destination
pair. planning problem determine amount transport link order
move cargo minimum cost. simplification ignores salient aspects real
transportation planning. instance, model completely atemporal, hence
suitable planning steady-state ows planning dynamic movements.
distributed version problem would decentralize responsibility transporting separate cargo elements. example, planning modules corresponding geographically organizationally disparate units might arrange transportation cargo
within respective spheres authority. decision-making activity might decomposed along hierarchical levels abstraction, gross functional characteristics, according
relevant distinction. decentralization might result real distribution
authority within human organization, inherent informational asymmetries
communication barriers, modularity imposed facilitate software engineering.
Consider, example, abstract transportation network Figure 2, taken
Harker (1988). four locations, directed links shown. Consider two movement requirements. first transport cargo location 1 location 4,
second reverse direction. Suppose wish decentralize authority separate
agents (called shippers) decide allocate cargo movement. first shipper decides split cargo units paths 1 ! 2 ! 4 1 ! 2 ! 3 ! 4,
second figures split paths 4 ! 2 ! 1 4 ! 2 ! 3 ! 1. Note
latter paths shipper share common resource: link 2 ! 3.
2

4

1

3

Figure 2: simple network (from Harker (1988)).
overlapping resource demands, shippers' decisions appear
necessarily intertwined. congested network, example, cost transporting
unit cargo link increasing overall usage link. shipper planning
cargo movements user network would thus underestimate
costs potentially misallocate transportation resources.
9

fiWellman

analysis networks this, transportation researchers developed
equilibrium concepts describing collective behavior shippers. system equilibrium, overall transportation cargo proceeds omniscient central
planner directing movement shipment minimize total aggregate
cost meeting requirements. user equilibrium, overall allocation cargo
movements shipper minimizes total cost, sharing proportionately
cost shared resources. system equilibrium thus global optimum,
user equilibrium corresponds composition locally optimal solutions subproblems.
intermediate possibilities, corresponding game-theoretic equilibrium
concepts Nash equilibrium, shipper behaves optimally given
transportation policies remaining shippers (Harker, 1986).4
perspective designer distributed planner, seek decentralization
mechanism reach system equilibrium, come close possible given
distributed decision-making structure. general, however, cannot expect derive
system equilibrium globally optimal solution without central control. Limits coordination communication may prevent distributed resource allocation exploiting
opportunities inhibiting agents acting cross purposes. certain
conditions decision making indeed decentralized effectively via market mechanisms.
General-equilibrium analysis help us recognize take advantage opportunities.
Note multicommodity ow problem, effective distributed solution
due Gallager (1977). One market structures described effectively mimics
solution, even though Gallager's algorithm formulated expressly market terms.
point crack hitherto unsolved distributed optimization problem (though
would nice), rather illustrate general approach simply described yet
nontrivial task.

4. WALRAS Transportation Market

section, present series three transportation market structures implemented
walras. first simplest model comprises basic transportation goods shipper
agents, augmented succeeding models include agent types. Comparative analysis three market structures reveals qualitatively distinct economic
computational behaviors realized alternate walras configurations.

4.1 Basic Shipper Model

resource primary interest multicommodity ow problem movement cargo.
value cost cargo movement depends location, designate
distinct good capacity origin-destination pair network (see Figure 2).
capture cost input required move cargo, define another good denoting generic
transportation resources. concrete model, might consist vehicles, fuel,
labor, factors contributing transportation.
4. Nash solution, shippers correctly anticipate effect cargo movements average
cost link. resulting equilibrium converges user equilibrium number shippers
increases effect individual's behavior prices diminishes (Haurie & Marcotte, 1985).

10

fiMarket-Oriented Programming

decentralize decision making, identify movement requirement
distinct shipper agent. shippers, consumers, interest moving various
units cargo specified origins destinations.
interconnectedness agents goods defines market configuration. Figure 3
depicts walras configuration basic shipper model corresponding example
network Figure 2. model two shippers, S1 4 S4 1, denotes
shipper requirement move goods origin destination j . Shippers connect
goods might serve objectives: case, movement along links belong
simple path shipper's origin destination. diagram, G denotes
good representing amount cargo moved link ! j . G0 denotes special
transportation resource good. Notice goods interest shippers
G0, endowments, G2 3, transportation link serving
origin-destination pairs.
;

;

i;j

i;j

;

G

G 2,3

G 2,4

S4,1

S1,4

G0

G 1,2

Figure 3:

G 3,1

3,4

G

G

2,1

4,2

Walras basic shipper market configuration example transportation network.

model employ transportation costs based network congestion,
thus exhibiting diseconomies scale. words, marginal average costs (in
terms transportation resources required) increasing level service
link. Using Harker's data, take costs quadratic. quadratic cost model posed
simply concreteness, represent substantive claim transportation
networks. important qualitative feature model (and one necessary
example work) exhibits decreasing returns, defining characteristic
congested networks. Note Harker's model terms monetary costs, whereas
introduce abstract input good.
Let c (x) denote cost transportation resources (good G0 ) required transport
x units cargo link j . complete cost functions are:
c1 2(x) = c2 1(x) = c2 4(x) = c4 2(x) = x2 + 20x;
c3 1(x) = c2 3(x) = c3 4(x) = 2x2 + 5x:
Finally, shipper's objective transport 10 units cargo origin
destination.
i;j

;

;

;

;

;

;

;

11

fiWellman

basic shipper model, assume shippers pay proportionately (in units
G0 ) total cost link. amounts policy average cost pricing.
take shipper's objective ship much possible (up movement
requirement) least costly manner. Notice objective expressible
terms consumer's optimization problem, equation (1), hence model
technically instance general-equilibrium framework.
Given network prices link, cheapest cargo movement corresponds
shortest path graph, distances equated prices. Thus, given
link, shipper would prefer ship entire quota link shortest path,
zero otherwise. case ties, indifferent among possible allocations.
bid link i; j , shipper derive threshold price determines whether link
shortest path taking difference shortest-path distance networks
link i; j 's distance set zero infinity, respectively.
incrementally changing bids, shipper consider outstanding bids
current prices. value reserving capacity particular link zero
cannot get service links path. Similarly, already committed
shipping cargo parallel path, gain obtaining capacity (even
lower price) withdraws bids.5 Therefore, actual demand policy
shipper spend uncommitted income potential ow increase (derived
maximum- ow calculations) could obtain purchasing capacity given link.
willing spend threshold value link, described above. determines
one point demand curve. unsatisfied requirement uncommitted
income indicates willingness pay lower price greater amount capacity.
Boundary points serve bootstrap economy; initial conditions
typically case individual link contributes overall ow shipper's
origin destination. Finally, demand curve completed smoothing operation
points.
Details boundary points smoothing operation rather arbitrary,
make claim particular bidding policy ideal guaranteed work broad
class problems. crude approach appears sucient present example
similar ones, long shippers' policies become accurate prices approach
equilibrium.
Walras successfully computes competitive equilibrium example,
case basic shipper model corresponds user equilibrium (UE)
transportation network. UE example network, shipper sends 2.86 units
cargo shared link 2 ! 3, remaining cargo direct link
location 2 destination. allocation inecient, total cost 1143 resource
5. Even shipper could simultaneously update bids markets, would good idea
here. competitive shipper would send cargo least costly path, neglecting possibility
demand may increase prices longer cheapest. outstanding bids provide
sensitivity effect, functions price. cannot respond changes
many prices once, thus policy updating bids simultaneously lead perpetual
oscillation. example, network considered here, unique competitive equilibrium
shipper splitting cargo two different paths. Policies allocating cargo one path never
lead result, hence convergence competitive equilibrium depends incrementality
bidding behavior.

12

fiMarket-Oriented Programming

units, somewhat greater global minimum-cost solution 1136 units.
economic terms, cause ineciency externality respect usage
shared link. shippers effectively charged average cost|which case
decreasing returns marginal cost|the price face ect full
incremental social cost additional usage resource. effect, incremental usage
resource one agent subsidized other. steeper decreasing returns,
agents incentive overutilize resource.6 simple example
classic tragedy commons.
classical remedy problems internalize externality allocating
ownership shared resource decision maker proper incentives
use eciently. implement solution walras augmenting market
structure another type agent.

4.2 Carrier Agents
extend basic shipper model introducing carriers, agents type producer
capability transport cargo units specified links, given varying amounts
transportation resources. model described here, associate one carrier
available link. production function carrier simply inverse
cost function described above. achieve global movement cargo, shippers obtain
transportation services carriers exchange necessary transportation resources.
Let C denote carrier transports cargo location location j .
carrier C connected auction G , output good, along G0|its input
production process. Shipper agents connected G0 , endowed
transportation resources exchange transportation services. Figure 4 depicts
walras market structure carriers included economy.
i;j

i;j

i;j

G

C 2,4

Figure 4:

3,4

C 3,4

G 2,4

S1,4

G 1,2

C 1,2

G 2,3

C 2,3

G0

C 3,1

G 3,1

S4,1

G

C

G

4,2

2,1

C 2,1

4,2

Walras market configuration example transportation network economy shippers carriers.

6. Average-cost pricing perhaps common mechanism allocating costs shared resource.
Shenker (1991) points problems scheme|with respect eciency strategic
behavior|in context allocating access congested computer networks, problem analogous
transportation task.

13

fiWellman

case decreasing returns technology, producer's (carrier's) optimization
problem unique solution. optimal level activity maximizes revenues minus costs,
occurs point output price equals marginal cost. Using result,
carriers submit supply bids specifying transportation services function link prices
(with resource price fixed), demand bids specifying required resources function
input prices (for activity level computed output price fixed).
example, consider carrier C1 2. output price p1 2 input price p0 , carrier's
profit
p1 2y , p0c1 2(y);
level service chooses supply. Given cost function above,
expression maximized = (p1 2 , 20p0)=2p0. Taking p0 fixed, carrier submits
supply bid function p1 2. demand side, carrier takes p1 2 fixed
submits demand bid enough good G0 produce , treated function
p0.
revised configuration agent behaviors described, walras derives system equilibrium (SE), is, cargo allocation minimizing overall transportation costs.
derived cargo movements correct within 10% 36 bidding cycles, 1%
72, cycle every agent submits average one bid one auction.
total cost (in units G0 ), division shippers' expenditures carriers' profits,
equilibrium prices presented Table 1. Data UE solution basic shipper model included comparison. decentralized process produces
global optimum perfectly consistent competitive behavior|the carriers price
outputs marginal cost, technologies convex.
;

;

;

;

;

;

;

TC expense profit p1 2 p2 1 p2 3 p2 4 p3 1 p3 4 p4 2
pricing
MC (SE) 1136
1514 378 40.0 35.7 22.1 35.7 13.6 13.6 40.0
1143
0 30.0 27.1 16.3 27.1 10.7 10.7 30.0
AC (UE) 1143
;

;

;

;

;

;

;

Table 1: Equilibria derived walras transportation example. TC, MC, AC
stand total, marginal, average cost, respectively. TC = shipper expense ,
carrier profit.
simple check prices Table 1, verify p2 3 + p3 4 = p2 4
p2 3 + p3 1 = p2 1. relationships must hold equilibrium (assuming links
nonzero movements), else shipper could reduce cost rerouting cargo. Indeed,
simple (small symmetric) example this, easy derive equilibrium
analytically using global equations these. argued above, would improper
exploit relationships implementation truly distributed decision process.
lesson exercise achieve qualitatively distinct results simple variations market configuration agent policies. designers' perspective,
prefer configuration leads transportation-ecient SE. Examination
Table 1 reveals achieve result allowing carriers earn nonzero
profits (economically speaking, really rents fixed factor represented
;

;

;

;

14

;

;

fiMarket-Oriented Programming

congested channel) redistributing profits shippers cover increased
expenditures. (In model general equilibrium production, consumers shares
producers' profits. closes loop value ultimately realized
consumption. specify shares part initial configuration,
endowment.) example, distribute profits evenly two shippers.

4.3 Arbitrageur Agents

preceding results demonstrate walras indeed implement decentralized
solution multicommodity ow problem. market structure Figure 4
distributed might be, (1) agents connected G0, (2) shippers
need know links potentially serving origin-destination pair. first
concerns easily remedied, choice single transportation resource good
completely arbitrary. example, would straightforward consider collection
resources (e.g., fuel, labor, vehicles), endow shipper subsets these.
second concern addressed within walras. so, introduce yet
another sort producer agent. new agents, called arbitrageurs, act specialized
middlemen, monitoring isolated pieces network ineciencies. arbitrageur
produces transportation k buying capacity j j k.
production function simply specifies amount output good, G , equal
minimum two inputs, G G . p + p < p , production
profitable. bidding policy walras increment level activity
iteration amount proportional current profitability (or decrement proportional
loss). incremental behavior necessary constant-returns producers
walras, profit maximization problem interior solution linear case.7
incorporate arbitrageurs transportation market structure, first create new
goods corresponding transitive closure transportation network. example
network, leads goods every location pair. Next, add arbitrageur
every triple locations (1) ! j original network, (2) exists
path j k traverse location i. two conditions ensure
arbitrageur every pair i; k connected path one link,
eliminate combinations either redundant clearly unprofitable.
revised market structure running example depicted Figure 5, new
goods agents shaded. goods agents inactive market solution
omitted diagram avoid clutter.
Notice Figure 5 connectivity shippers significantly decreased,
shippers need aware good directly serving origin-destination
pair. dramatically simplifies bidding problem, avoid analysis
price network. structure whole seems distributed, agent concerned
three goods.
i;j;k

i;k

i;j

j;k

i;j

j;k

i;k

i;j;k

i;j;k

7. Without restriction bidding behavior, competitive constant-returns producer would
choose operate level infinity zero, depending whether activity profitable
unprofitable going prices (at break-even, producer indifferent among levels).
would lead perpetual oscillation, problem noticed (and solved) Paul Samuelson 1949
considered use market mechanisms solve linear programming problems (Samuelson, 1966).

15

fiWellman


G 2,4

A2,3,1

2,3,4

G 2,3
C 2,4

A1,2,4

G

3,4

C 3,4

G1,4

G 1,2

C 1,2

C 2,1
C 2,3

G0

S1,4

G2,1

C 3,1

G3,1

4,2,1

C 4,2

G 4,2

G4,1

S4,1

Figure 5: revised walras market configuration arbitrageurs.
Despite simplified shipper behavior, walras still converges SE, optimal
solution, configuration. Although resulting allocation resources identical,
qualitative change market structure corresponds qualitative change
degree decentralization.
fact, behavior walras market configuration arbitrageurs virtually identical standard distributed algorithm (Gallager, 1977) multicommodity
ow (minimum delay communication networks). Gallager's algorithm, distributed
modules expressly differentiate cost function derive marginal cost increasing
ow communication link. Flows adjusted equate marginal
costs along competing subpaths. procedure provably converges optimal solution
long iterative adjustment parameter suciently small. Similarly, convergence
walras model requires arbitrageurs adjust activity levels
quickly response profit opportunities loss situations.

4.4 Summary

preceding sections developed three progressively elaborate market configurations
multicommodity ow problem. Table 2 summarizes size shape configuration transportation network V locations E links, movement
requirements. basic shipper model results user equilibrium,
augmented models produce globally optimal system equilibrium. carrier model requires E new producer agents produce superior result. arbitrageur model adds
O(V E ) producers potentially new goods well, reduces number
goods interest individual agent O(E ) small constant.
market models represent three qualitatively distinct points spectrum
potential configurations. Hybrid models conceivable, example, partial
set arbitrageurs included, perhaps arranged hierarchy regular
16

fiMarket-Oriented Programming

model
Basic shipper
: : : plus carriers
: : : plus arbitrageurs

goods

shippers

E + 1 [O(E )]
E + 1 [O(E )]
O(V 2) [2]

carriers arbitrageurs
|
|
E [2]
|
E [2] O(V E ) [3]

Table 2: Numbers goods agents three market configurations. type
agent, figure brackets indicates number goods individual
bids.
structure. would expect configurations exhibit behaviors intermediate
specific models studied here, respect equilibrium produced degree
decentralization.

5. Limitations

One serious limitation walras assumption agents act competitively.
mentioned above, behavior rational many agents, small
respect overall economy. However, individual agent large enough affect
prices significantly (i.e., possesses market power), forfeits utility profits failing
take account. two approaches toward alleviating restriction perfect
competition computational economy. First, could simply adopt models imperfect
competition, perhaps based specific forms imperfection (e.g., spatial monopolistic
competition) general game-theoretic models. Second, architects configure
markets promote competitive behavior. example, decreasing agent's grain size
enabling free entry agents enhance degree competition. Perhaps
interestingly, controlling agents' knowledge market structure (via standard
information-encapsulation techniques), degrade ability exploit whatever
market power possess. Uncertainty shown increase competitiveness among
risk-averse agents formal bidding models (McAfee & McMillan, 1987),
computational environment substantial control uncertainty.
existence competitive equilibria ecient market allocations depends
critically assumption nonincreasing returns scale. Although congestion
real factor transportation networks, example, many modes transport
often economies scale density may lead returns increasing
overall (Harker, 1987). Note strategic interactions, increasing returns, factors
degrading effectiveness market mechanisms inhibit decentralization general,
would need addressed directly approach.
cast walras general environment distributed planning, natural
ask universal \market-oriented programming" computational paradigm.
characterize computational power model easily enough, correspondence
class convex programming problems represented economies satisfying classical conditions. However, interesting issue well conceptual framework market
17

fiWellman

equilibrium corresponds salient features distributed planning problems. Although
early make definitive assertion this, seems clear many planning
tasks fundamentally problems resource allocation, units distribution
often correspond well units agency. Economics prominent (and
arguably successful) approach modeling resource allocation decentralized
decision making, reasonable suppose concepts economists find useful
social context prove similarly useful analogous computational context.
course, economics ideal analyzing aspects social interaction,
expect many issues organization distributed planning well
accounted-for framework.
Finally, transportation network model presented highly simplified version actual planning problem domain. realistic treatment would
cover multiple commodity types, discrete movements, temporal extent, hierarchical network structure, critical features problem. may captured
incremental extensions simple model, perhaps applying elaborations developed
transportation science community. example, many transportation models (including Harker's elaborate formulation (Harker, 1987)) allow variable supply
demand commodities complex shipper-carrier relationships. Concepts
spatial price equilibrium, based markets commodities location, seem offer
direct approach toward extending transportation model within walras.

6. Related Work
6.1 Distributed Optimization
techniques models described obviously build much work economics,
transportation science, operations research. intended research contribution
fields, rather application construction computational
framework decentralized decision making general. Nevertheless, words
order regarding relation approach described extant methods distributed
optimization.
Although elaborate walras model essentially equivalent existing algorithms distributed multicommodity ow (Bertsekas & Tsitsiklis, 1989; Gallager, 1977),
market framework offers approach toward extensions beyond strict scope
particular optimization problem. example, could reduce number arbitrageurs,
would eliminate guarantees optimality, might still reasonable
expectation graceful degradation. Similarly, could realize conceptual extensions
structure problem, distributed production goods addition transportation, adding new types agents. given extension, may well
customized distributed optimization algorithm would outperform computational
market, coming algorithm would likely involve completely new analysis.
Nevertheless, must stated speculations regarding methodological advantages
market-oriented framework indeed speculations point, relative
exibility applications programming paradigm must ultimately demonstrated
empirically.
18

fiMarket-Oriented Programming

Finally, large literature decomposition methods mathematical programming problems, perhaps common approach distributed optimization.
Many techniques interpreted economic terms, using close
relationship prices Lagrange multipliers. Again, main distinction
approach advocated conceptual. Rather taking global optimization problem decentralizing it, aim provide framework formulating task
distributed manner first place.

6.2 Market-Based Computation
basic idea applying economic mechanisms coordinate distributed problem solving
new AI community. Starting contract net (Davis & Smith, 1983),
many found metaphor markets appealing, built systems organized
around markets market-like mechanisms (Malone, Fikes, Grant, & Howard, 1988).
original contract net actually include economic notions bidding
mechanism, however, recent work Sandholm (1993) shown cost price
incorporated contract net protocol make true market mechanism. Miller Drexler (Drexler & Miller, 1988; Miller & Drexler, 1988) examined
market-based approach depth, presenting underlying rationale addressing
specific issues salient computational environment. Waldspurger, Hogg, Huberman,
Kephart, Stornetta (1992) investigated concepts actually implementing
market mechanisms allocate computational resources distributed operating system.
Researchers distributed computing (Kurose & Simha, 1989) applied specialized
algorithms based economic analyses specific resource-allocation problems arising
distributed systems. remarks line work, see (Wellman, 1991).
Recently, Kuwabara Ishida (1992) experimented demand adjustment
methods task similar multicommodity ow problem considered here. One
significant difference method would consider path network
separate resource, whereas market structures manipulate links location
pairs. Although cast system competitive-equilibrium framework,
results congruent obtained walras.
Walras distinct prior efforts two primary respects. First, constructed expressly terms concepts general equilibrium theory, promote mathematical analysis system facilitate application economic principles
architectural design. Second, walras designed serve general programming environment implementing computational economies. Although developed specifically
allocate computational resources, reason could included market structures configured particular application domains. Indeed, idea grounding
measures value computation real-world values (e.g., cargo movements) follows
naturally general-equilibrium view interconnected markets, one
exciting prospects future applications walras distributed problem-solving.
Organizational theorists studied markets mechanisms coordinating activities
allocating resources within firms. example, Malone (1987) models information
requirements, exibility performance characteristics variety market
non-market structures. terminology, walras implements centralized market,
19

fiWellman

allocation good mediated auction. Using models, determine
whether gross form organization advantageous, given information cost
communication, exibility individual modules, related features.
paper, examine greater detail coordination process computational markets,
elaborating criteria designing decentralized allocation mechanisms. take
distributivity constraint exogenously imposed; constraint relaxable,
organizational economic analysis illuminate tradeoffs underlying mechanism
design problem.
Finally, market-oriented programming shares Shoham's agent-oriented programming (Shoham, 1993) view distributed problem-solving modules best designed
understood rational agents. two approaches support different agent operations
(transactions versus speech acts), adopt different rationality criteria, emphasize different agent descriptors, ultimately aimed achieving goal specifying
complex behavior terms agent concepts (e.g., belief, desire, capability) social organizations. Combining individual rationality laws social interaction provides perhaps
natural approach generalizing Newell's \knowledge level analysis" idea (Newell,
1982) distributed computation.

7. Conclusion

summary, walras represents general approach construction analysis
distributed planning systems, based general equilibrium theory competitive mechanisms. approach works deriving competitive equilibrium corresponding
particular configuration agents commodities, specified using walras's basic constructs defining computational market structures. particular realization
approach simplified form distributed transportation planning, see qualitative differences economic structure (e.g., cost-sharing among shippers versus ownership
shared resources profit-maximizing carriers) correspond qualitatively distinct behaviors (user versus system equilibrium). exercise demonstrates careful design
distributed decision structure according economic principles sometimes lead
effective decentralization, behaviors alternative systems meaningfully
analyzed economic terms.
contribution work reported lies idea market-oriented programming, algorithm distributed computation competitive equilibria computational
economies, initial illustration approach simple problem distributed
resource allocation. great deal additional work required understand precise capabilities limitations approach, establish broader methodology
configuration computational economies.

Acknowledgements
paper revised extended version (Wellman, 1992). benefited
discussions computational economies many colleagues, would thank
particular Jon Doyle, Ed Durfee, Eli Gafni, Daphne Koller, Tracy Mullen, Anna Nagurney,
20

fiMarket-Oriented Programming

Scott Shenker, Yoav Shoham, Hal Varian, Carl Waldspurger, Martin Weitzman,
anonymous reviewers helpful comments suggestions.

References

Arrow, K. J., & Hurwicz, L. (Eds.). (1977). Studies Resource Allocation Processes.
Cambridge University Press, Cambridge.
Bertsekas, D. P., & Tsitsiklis, J. N. (1989). Parallel Distributed Computation. PrenticeHall, Englewood Cliffs, NJ.
Dafermos, S., & Nagurney, A. (1989). Supply demand equilibration algorithms
class market equilibrium problems. Transportation Science, 23, 118{124.
Davis, R., & Smith, R. G. (1983). Negotiation metaphor distributed problem
solving. Artificial Intelligence, 20, 63{109.
Drexler, K. E., & Miller, M. S. (1988). Incentive engineering computational resource
management. Huberman (1988), pp. 231{266.
Eydeland, A., & Nagurney, A. (1989). Progressive equilibration algorithms: case
linear transaction costs. Computer Science Economics Management, 2, 197{
219.
Gallager, R. G. (1977). minimum delay routing algorithm using distributed computation.
IEEE Transactions Communications, 25, 73{85.
Harker, P. T. (1986). Alternative models spatial competition. Operations Research, 34,
410{425.
Harker, P. T. (1987). Predicting Intercity Freight Flows. VNU Science Press, Utrecht,
Netherlands.
Harker, P. T. (1988). Multiple equilibrium behaviors networks. Transportation Science,
22, 39{46.
Haurie, A., & Marcotte, P. (1985). relationship Nash-Cournot Wardrop
equilibria. Networks, 15, 295{308.
Hicks, J. R. (1948). Value Capital (second edition). Oxford University Press, London.
Hildenbrand, W., & Kirman, A. P. (1976). Introduction Equilibrium Analysis: Variations Themes Edgeworth Walras. North-Holland Publishing Company,
Amsterdam.
Huberman, B. A. (Ed.). (1988). Ecology Computation. North-Holland.
Hurwicz, L. (1977). design resource allocation mechanisms. Arrow Hurwicz
(1977), pp. 3{37. Reprinted American Economic Review Papers Proceedings,
1973.
21

fiWellman

Kephart, J. O., Hogg, T., & Huberman, B. A. (1989). Dynamics computational ecosystems. Physical Review A, 40, 404{421.
Koopmans, T. C. (1970). Uses prices. Scientific Papers Tjalling C. Koopmans, pp.
243{257. Springer-Verlag. Originally published Proceedings Conference
Operations Research Production Inventory Control, 1954.
Kurose, J. F., & Simha, R. (1989). microeconomic approach optimal resource allocation
distributed computer systems. IEEE Transactions Computers, 38, 705{717.
Kuwabara, K., & Ishida, T. (1992). Symbiotic approach distributed resource allocation:
Toward coordinated balancing. Pre-Proceedings 4th European Workshop
Modeling Autonomous Agents Multi-Agent World.
Lavoie, D., Baetjer, H., & Tulloh, W. (1991). Coping complexity: OOPS
economists' critique central planning. Hotline Object-Oriented Technology, 3 (1),
6{8.
Malone, T. W., Fikes, R. E., Grant, K. R., & Howard, M. T. (1988). Enterprise: marketlike task scheduler distributed computing environments. Huberman (1988), pp.
177{205.
Malone, T. W. (1987). Modeling coordination organizations markets. Management
Science, 33, 1317{1332.
McAfee, R. P., & McMillan, J. (1987). Auctions bidding. Journal Economic Literature, 25, 699{738.
Milgrom, P., & Roberts, J. (1991). Adaptive sophisticated learning normal form
games. Games Economic Behavior, 3, 82{100.
Miller, M. S., & Drexler, K. E. (1988). Markets computation: Agoric open systems.
Huberman (1988), pp. 133{176.
Nagurney, A. (1993). Network Economics: Variational Inequality Approach. Kluwer
Academic Publishers.
Newell, A. (1982). knowledge level. Artificial Intelligence, 18, 87{127.
Reiter, S. (1986). Information incentive performance (new)2 welfare economics.
Reiter, S. (Ed.), Studies Mathematical Economics. MAA Studies Mathematics.
Samuelson, P. A. (1966). Market mechanisms maximization. Stiglitz, J. E. (Ed.),
Collected Scientific Papers Paul A. Samuelson, Vol. 1, pp. 415{492. MIT Press,
Cambridge, MA. Originally appeared RAND research memoranda, 1949.
Samuelson, P. A. (1974). Complementarity: essay 40th anniversary HicksAllen revolution demand theory. Journal Economic Literature, 12, 1255{1289.
22

fiMarket-Oriented Programming

Sandholm, T. (1993). implementation contract net protocol based marginal
cost calculations. Proceedings National Conference Artificial Intelligence,
pp. 256{262 Washington, DC. AAAI.
Scarf, H. E. (1984). computation equilibrium prices. Scarf, H. E., & Shoven, J. B.
(Eds.), Applied General Equilibrium Analysis, pp. 1{49. Cambridge University Press,
Cambridge.
Shenker, S. (1991). Congestion control computer networks: exercise cost-sharing.
Prepared delivery Annual Meeting American Political Science Association.
Shoham, Y. (1993). Agent-oriented programming. Artificial Intelligence, 60, 51{92.
Shoven, J. B., & Whalley, J. (1984). Applied general-equilibrium models taxation
international trade: introduction survey. Journal Economic Literature, 22,
1007{1051.
Shoven, J. B., & Whalley, J. (1992). Applying General Equilibrium. Cambridge University
Press.
Varian, H. R. (1984). Microeconomic Analysis (second edition). W. W. Norton & Company,
New York.
Waldspurger, C. A., Hogg, T., Huberman, B. A., Kephart, J. O., & Stornetta, S. (1992).
Spawn: distributed computational economy. IEEE Transactions Software Engineering, 18, 103{117.
Wang, Z., & Slagle, J. (1993). object-oriented knowledge-based approach formulating
applied general equilibrium models. Third International Workshop Artificial
Intelligence Economics Management Portland, OR.
Wellman, M. P. (1991). Review Huberman (1988). Artificial Intelligence, 52, 205{218.
Wellman, M. P. (1992). general-equilibrium approach distributed transportation planning. Proceedings National Conference Artificial Intelligence, pp. 282{289
San Jose, CA. AAAI.

23


