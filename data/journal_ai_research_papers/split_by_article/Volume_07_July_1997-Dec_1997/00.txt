Journal of Artificial Intelligence Research 7 (1997) 1{24

Submitted 2/97; published 7/97

Defining Relative Likelihood in Partially-Ordered
Preferential Structures
Joseph Y. Halpern

Cornell University, Computer Science Department
Ithaca, NY 14853
http://www.cs.cornell.edu/home/halpern

halpern@cs.cornell.edu

Abstract

Starting with a likelihood or preference order on worlds, we extend it to a likelihood
ordering on sets of worlds in a natural way, and examine the resulting logic. Lewis earlier
considered such a notion of relative likelihood in the context of studying counterfactuals,
but he assumed a total preference order on worlds. Complications arise when examining
partial orders that are not present for total orders. There are subtleties involving the exact
approach to lifting the order on worlds to an order on sets of worlds. In addition, the
axiomatization of the logic of relative likelihood in the case of partial orders gives insight
into the connection between relative likelihood and default reasoning.

1. Introduction
A preference order  on a set W of worlds is a reexive, transitive relation on W . Various
readings have been given to the  relation in the literature; u  v has been interpreted as \u
at least as preferred or desirable as v" (Kraus, Lehmann, & Magidor, 1990; Doyle, Shoham,
& Wellman, 1991) (it is this reading that leads to the term \preferential structure"), \u at
least as normal (or typical) as v" (Boutilier, 1994), and \u is no more remote from actuality
than v" (Lewis, 1973). In this paper, we focus on one other interpretation, essentially also
considered by Lewis (1973). We interpret u  v as meaning \u is at least as likely as v".1
Interestingly, all these readings seem to lead to much the same properties.
In the literature, preference orders have been mainly used to give semantics to conditional logics (Lewis, 1973) and, more recently, to nonmonotonic logic (Kraus et al., 1990).
The basic modal operator in these papers has been a conditional !, where p ! q is interpreted as \in the most preferred/normal/likely worlds satisfying p, q is the case". However,
if we view  as representing likelihood, then it seems natural to define a binary operator
 on formulas such that '  is interpreted as \' is more likely than ". Lewis (1973)
in fact did define such an operator, and showed how it related to !. However, he assumed
that  was total; that is, he assumed that for all worlds w; w0 2 W , either w  w0 or
w0  w. But in many cases in preferential or likelihood reasoning, it seems more appropriate to allow the preference order to be partial. It may well be that an agent finds two
1. There is a tradition, starting with Lewis (1973), of taking u  v, rather than u  v, to mean that u
is as preferred or as desirable as v. This last reading historically comes from the interpretation of the
preferred world as being less far from actuality. Since there seems to be a split in the reading in the
literature, and  has traditionally been taken to mean \at least as likely" in the literature on qualitative
probability (Fine, 1973; Gardenfors, 1975), we take this reading here.

c 1997 AI Access Foundation and Morgan Kaufmann Publishers. All rights reserved.

fiHalpern

situations incomparable as far as normality or likelihood goes. For example, one situation
may be better in one dimension but worse in another.
As we show in this paper, there are some subtleties involved in starting with a partial
preference order on worlds. What we are ultimately interested is not an ordering on worlds,
but an ordering on sets of worlds. To make sense of a statement like '  , we need to
compare the relative likelihood of the set of worlds satisfying ' to that of the set satisfying
. Unfortunately, there are many possible ways of extending a preference order on worlds
to one on sets of worlds. We focus here on two particular choices, which both agree with the
definition given by Lewis in the case that the preference order on worlds is total, but differ
in general. We define  using the definition that allows us to make the most interesting to
work in default reasoning.
We then turn our attention to axiomatizing the likelihood operator. Lewis provided an
axiomatization for the case where the preference order is partial. The key axioms used by
Lewis were transitivity:
('1  '2 ) ^ ('2  '3 ) ) ('1  '3 );
and the union property:
('1  '2 ) ^ ('1  '3 ) ) ('1  ('2 _ '3 )):
This latter property is characteristic of possibility logic (Dubois & Prade, 1990). In the
partially ordered case, these axioms do not suce. We need the following axiom:
(('1 _ '2 )  '3 ) ^ (('1 _ '3 )  '2 ) ) ('1  ('2 _ '3 )):
It is not hard to show that this axiom implies transitivity and the union property (in the
presence of the other axioms), but it is not equivalent to them. Interestingly, it is the
property captured by this axiom that was isolated in (Friedman & Halpern, 1997) as being
the key feature needed for a likelihood ordering on sets to be appropriate for doing default
reasoning in the spirit of (Kraus et al., 1990). Thus, by considering preference orders that
are partial, we are able to clarify the connections between , !, and default reasoning.
The rest of this paper is organized as follows. In Section 2, we consider how to go from
an ordering on worlds to one on sets of worlds, focusing on the differences between total
and partial preference orders. In Section 3, we present a logic for reasoning about relative
likelihood and provide a natural complete axiomatization for it. In Section 4, we relate
our results to other work on relative likelihood, as well as to work on conditional logic and
nonmonotonic reasoning. We conclude in Section 5. Proofs of the technical results can be
found in Appendix A.

2. From Preorders on Worlds to Preorders on Sets of Worlds

We capture the likelihood ordering on a set W of possible worlds by a partial preorder |that
is, a reexive and transitive relation| on W .2 We typically write w0  w rather than

2. A partial order R is typically assumed to be reexive, transitive, and anti-symmetric (so that if (a; b) 2 R
and (b; a) 2 R, then a = b). We are not assuming that  is anti-symmetric here, which is why it is a
preorder.

2

fiRelative Likelihood in Partially-Ordered Preferential Structures

(w0 ; w) 2 . As usual, we often write u  v rather than v  u, and take u  v to be an
abbreviation for u  v and not(v  u), and u  v to be an abbreviation for v  u. The
relation  is a strict partial order , that is, it is an irreexive (for all w, it is not the case that
w  w) and transitive relation on W . We say that  is the strict partial order determined
by .
As we said in the introduction, we think of  as providing a likelihood, or preferential, order on the worlds in W . Thus, w  w0 holds if w is at least as likely/preferred/normal/close
to actuality as w0 . Given this interpretation, the fact that  is assumed to be a partial
preorder is easy to justify. For example, transitivity just says that if u is at least as likely
as v, and v is at least as likely as w, then u at least as likely as w. Notice that since 
is a partial preorder, there may be some pairs of worlds w and w0 that are incomparable
according to . Intuitively, we may not be prepared to say that either one is likelier than
the other. We say that  is a total preorder (or connected, or a linear preorder) if for all
worlds w and w0 , either w  w0 or w0  w.
Since we have added likelihood to the worlds, it seems reasonable to also add likelihood
to the language, to allow us to say \' is more likely than ", for example. But what
exactly should this mean? Although having  in our semantic model allows us to say that
one world is more likely than another, it does not immediately tell us how to say that a set
of worlds is more likely than another set. But, as we observed in the introduction, this is
just what we need to make sense of \' is more likely than ".
How should we extend a likelihood ordering on worlds to one on sets of worlds? Clearly
we want to do so in a way that preserves the ordering on worlds. That is, using > to
denote the ordering sets, we would certainly expect that u  v would imply fug > fvg. We
could impose a few other minimal requirements, but they certainly would not be enough to
uniquely determine an ordering on sets. For example, here are two general approaches; to
distinguish them, we put subscripts on >.
1. Define >1 so that U >1 V if for all u 2 U and all v 2 V , we have u  v. We can
define a strict partial order in this spirit in two distinct ways.
(a) By considering the analogous procedure to that used to get  from : We define
>2 so that U >2 V if U >1 V and not(V >1 U ). We call this the standard method
below.
(b) By replacing  in the definition of >1 by : We define >3 so that U >3 V if
for all u 2 U and all v 2 V , we have u  v. We call this the alternative method.
2. Define >4 so that U >4 V if for all v 2 V , U , there is some u 2 U , V such that
u  v. Note that this approach focuses on the symmetric difference between U and
V . There are again two ways of getting a strict partial order.
(a) The standard method gives us U >5 V if U >4 V and not(V >4 U ).
(b) The alternative method gives us U >6 V if for all v 2 V , U there is some
u 2 U , V such that u  v.
The first approach ( >1 ) was used by Doyle, Shoham, and Wellman (1991) in defining
a logic of relative desire, starting with a preference order on worlds. Unfortunately, as
3

fiHalpern

they themselves point out, these relations are too weak to allow us to make important
distinctions. They go on to define other notions of comparison, but these are more tuned
to their applications, and not in the spirit of the notions we are considering here.
The second approach (typically >4 and >5 ) has been widely used in various applications
in the literature. For example,
 Dershowitz and Manna (1979) use it to define on ordering on multisets, which is then
used to provide a technique for proving program termination.
 Przymusinski (1987) uses it to order models of a database.
 Brass (1991), Cayrol, Royer, and Saurel (1992), Delgrande (1994), and Geffner (1992)
all use it to help model various aspects of default reasoning.
In this paper, we focus on a variant of the second approach, essentially due to Lewis
(1973), which has interesting connections to default reasoning. Roughly speaking, we take
U to be more likely than V if for every world in V , there is a more likely world in U .
To make this precise, if U; V  W , we write U s V if for every world v 2 V , there is a
world u 2 U such that u  v. It is easy to check that s is a partial preorder, that is, it is
reexive and transitive. (The superscript s is for \set".) Moreover, if  is a total preorder,
then so is s . Finally, as we would expect, we have u  v iff fug s fvg, so the s relation
on sets of worlds can be viewed as a generalization of the  relation on worlds.
We can then apply both the standard method and the alternative method to define a
strict partial order. The standard method gives us the relation 0 , where U 0 V holds
if U s V and not(V s U ). The alternative method gives us the relation s defined on
finite sets by taking U s V to hold if U is nonempty, and for every world v 2 V , there is
a world u 2 U such that u  v. (The reasons that U is taken to be nonempty and that the
definition is restricted to finite sets are discussed below.)
How do these various approaches compare? Clearly U >1 V implies U s V , although
the converse does not hold in general; >1 is a very weak ordering. As a consequence, >2
and 0 are incomparable, as are >3 and s. Similar remarks apply to >4 . Again, it is easy
to see that U >4 V implies U s V . On the other hand, the two notions are not equivalent.
For example, suppose v  v0 . Then fvg s fv; v0 g, but we do not have fvg >4 fv; v0 g.
Why are we focusing on s , 0 , and s here, rather than >1 { >6 (or some other notion)? From a likelihood viewpoint, they all seem to be reasonable; our intuitions regarding
extending likelihood from worlds to sets of worlds do not seem to be that well developed. It
may be possible to motivate s as the finest relation extending  that has certain properties, but that was not in fact our motivation here. Rather, our interest is motivated by the
deep connections between 0 and s and certain approaches to nonmonotonic reasoning.
Having said that, many of the questions that we consider here could perfectly well be explored using >1 { >6 . With that apology, we do not discuss >1 { >6 further in this paper,
except for the odd remark.
We have explained that there are two methods for getting a strict partial order on sets
of worlds from a partial order on worlds. But are the standard method and the alternative
method really so different? It is easy to see that u  v iff fug s fvg iff fug 0 fvg. (This
is true for >2 , >3 , >5 , and >6 as well.) Thus, s and 0 agree on singleton sets and
extend the  relation on worlds. Moreover, both s and 0 are strict partial orders on
4

fiRelative Likelihood in Partially-Ordered Preferential Structures

finite sets. (The requirement that U must be nonempty in the definition of U s V is there
to ensure that we do not have ; s ;; strictly speaking, we should have also added it to
the definitions of >3 and >6 to ensure that they were strict partial orders.) As shown in
Lemma 2.9, 0 and s are in fact identical if the underlying preorder  on worlds is a total
preorder. However, as the following example shows, s and 0 are not identical in general.

Example 2.1: Suppose W = fw1 ; w2 g, and  is such that w1 and w2 are incomparable.
Then it is easy to see that fw1 ; w2 g 0 fw1 g. However, it is not the case that fw1 ; w2 g s
fw1 g, since there is no element of fw1 ; w2 g that is strictly more likely than w1 .3
Notice that we were careful to define  as we did only on finite sets. The following

example illustrates why:

Example 2.2: Let W1 = fw0 ; w1 ; w2 ; : : :g, and suppose that  is such that
w0  w1  w2  : : :
Then it is easy to see that if we were to apply the definition of s to infinite sets, then we
would have W1 s W1 , and s would not be irreexive.4
The approach for extending the definition of s to infinite sets is essentially due to

Lewis (1973) (who did it for the case of total preorders). The idea is to say that in order
to have U s V , it is not enough that for every element v in V there is some element u in
U that is more likely than v. This definition is what allows W1  W1 in Example 2.2.
Notice that in the finite case, it is easy to see that if U s V , then for every element v in
V , there must some u 2 U such that, not only do we have u  v, but u dominates V in
that for no v0 2 V do we have v0  u. It is precisely this domination condition that does
not hold in Example 2.2. This observation provides the motivation for the ocial definition
of s, which applies in both finite and infinite domains.

Definition 2.3: Suppose  is a partial preorder on W , U; V  W , and w 2 W . We say
that w dominates V if for no v 2 V is it the case that v  w. (Notice that if  is a total
preorder, this is equivalent to saying that w  v for all v 2 V .) We write U s V if U is
nonempty and, for all v 2 V , there exists u 2 U such that u  v and u dominates V .
It is easy to see that this definition of s agrees with our earlier definitions if U and V
are finite.
We now collect some properties of s , 0 , and s . To do this, we need a few definitions.
We say that a relation > on 2W (not necessarily a preorder) is qualitative if (V1 [ V2 ) > V3
and (V1 [ V3 ) > V2 implies V1 > (V2 [ V3 ). We say that > satisfies the union property if
V1 > V2 and V1 > V3 implies V1 > (V2 [ V3). We say that > is orderly if U > V , U 0  U ,
and V 0  V implies U 0 > V 0 . We provide some intuition for these properties following
Proposition 2.5, after showing how they help us characterize s , 0 , and s .
3. We remark that similar results hold for >5 and >6 . They are identical if the underlying order on worlds
is a total preorder, and this example can also be used to show that they differ if the underlying order is
partial.
4. Similar problems arise for >6 when dealing with infinite sets, and the solution for s described in
Definition 2.3 can be applied to >6 as well.

5

fiHalpern

Lemma 2.4: If > is an orderly qualitative relation on 2W , then > is transitive and satisfies

the union property.

Proof: See Appendix A.
The converse to Lemma 2.4 does not hold. Indeed, an orderly strict partial order on
2W may satisfy the union property and still not be qualitative. For example, suppose
W = fa; b; cg, and we have fa; bg > fcg, fa; cg > fbg, fa; b; cg > fbg, fa; b; cg > fcg, and
fa; b; cg > fb; cg. It can easily be checked that > is an orderly strict partial order that
satisfies the union property, but is not qualitative.
With these definitions in hand, we can state the key properties of the relations we are
interested in here.

Proposition 2.5:
(a) If  is a partial preorder on W , then s is an orderly partial preorder on 2W that
satisfies the union property.

(b) If  is a partial preorder on W , then 0 is an orderly strict partial order on 2W .
(c) If  is a strict partial order on W , then s is an orderly qualitative strict partial
order on 2W .

Proof: See Appendix A.
We can now discuss how to interpret the properties we have been considering in light of
this result.
To the extent that we think of > as meaning \more likely than", then orderliness is a
natural property to require. If U is more likely than V , then certainly any superset of U
should be more likely than any subset of V . It is thus not surprising that all three of the
relations we have defined are orderly.
Clearly the union property generalizes to arbitrary finite unions. That is, if > satisfies
the union property and A > Bi , i = 1; : : : ; n, then A > B1 [ : : : [ Bn . In particular, if
u  vj for j = 1; : : : ; N , then fug s fv1 ; : : : ; vN g, no matter how large N is, and similarly
if we replace  by  (since the fact that s is qualitative means that it satisfies the union
property, by Lemma 2.4). This is very different from probability, where suciently many
\small" probabilities eventually can dominate a \large" probability. This suggests that
u  v should perhaps be interpreted as \u is much more likely than v". More generally,
if > satisfies the union property, then U > V can be interpreted as meaning that U is
much more likely than V . In this sense, the notion of likelihood corresponding to s or s
is closer to possibility (Dubois & Prade, 1990) than probability, since the relation \more
possible than" satisfies the union property.
Note that, in general, 0 does not satisfy the union property. In Example 2.1, we have
fw1 ; w2 g 0 fw1 g and fw1 ; w2 g 0 fw2 g, but we do not have fw1 ; w2 g 0 fw1 ; w2 g.
The qualitative property is somewhat more dicult to explain intuitively. Of the three
relations we are considering, only the s relation satisfies it. The fact that 0 does not
satisfy it follows from Lemma 2.4, together with the observation that 0 does not satisfy
the union property. Example 2.1 also shows that s is not qualitative, since if it were,
6

fiRelative Likelihood in Partially-Ordered Preferential Structures

we could conclude from fw1 ; w2 g s fw2 g (taking V1 = fw1 g and V2 = V3 = fw2 g in the
definition of qualitative) that fw1 g s fw2 g, a contradiction. Our interest in the qualitative
property stems from the fact that, in a precise sense, it is the property that characterizes
s. It first arose in (Friedman & Halpern, 1997), where it was shown to be the key property
required of a generalization of probability called plausibility to capture default reasoning.
This is discussed in more detail in Section 4.
If  is a total preorder, then we get further connections between these notions. Before
we discuss the details, we need to define the analogue of total preorders in the strict case.
A relation > on an arbitrary set W 0 (not necessarily of the form 2W ) is modular if w1 >w2
implies that, for all w3 , either w3 > w2 or w1 > w3 . Modularity is the \footprint" of a total
preorder on the strict order determined by it. This is made precise in the following lemma.
Lemma 2.6: If  is a total preorder, then the strict partial order  determined by  is
modular. Moreover, if > is a modular, strict partial order on W , then there is a total
preorder  on W such that > is the strict partial order determined by .
Proof: See Appendix A.
Modularity is preserved when we lift the preorder from W to 2W .
Lemma 2.7: If  is a modular relation on W , then s is a modular relation on 2W .
Proof: See Appendix A.
Although we showed that the converse to Lemma 2.4 does not hold in general for strict
partial orders, it does hold for orders that are modular.
Lemma 2.8: If > is a modular strict partial order and satisfies the union property, then
> is qualitative.
Proof: See Appendix A.
As shown in (Friedman & Halpern, 1997), there is a connection between nonmonotonic
reasoning, conditional logic, and the qualitative property. (This is discussed in Section 4.)
This relationship is best understood by considering s, rather than s or 0 , which is why
we focus on s here. Lewis (1973) was able to use 0 because he focused on total preorders.
The following lemma makes this precise.
Lemma 2.9: If  is a total preorder, then s and 0 agree. In general, U s V implies
U 0 V , but the converse does not hold.
Proof: See Appendix A.
We close this section by considering when a preorder on 2W can be viewed as being
generated by a preorder on W . This result turns out to play a key role in our completeness
proof, and emphasizes the role of the qualitative property.
Theorem 2.10: Let F be a finite algebra of subsets of W (that is, F is a set of subsets of
W that is closed under union and complementation and contains W itself) and let > be an
orderly qualitative relation on F .
7

fiHalpern

(a) If > is a total preorder on F , then there is a total preorder  on W such that > and
s agree on F (that is, for U; V 2 F , we have U > V iff U s V ).
(b) If > is a strict partial order and each nonempty set in F has at least 2log(jFj)
elements, then there is a partial preorder  on W such that > and s agree on F .

log(jF j)

Proof: An atom of F is a minimal nonempty element of F . Since F is finite, it is easy to
see that every element of F can be written as a union of atoms, and the atoms are disjoint.
Part (a) is easy: for each w 2 W , let Aw be the unique atom in F containing w. Define 
on W so that v  w iff Av > Aw . It is easy to see that if > is a total preorder on F , then
 is a total preorder on W and > agrees with s on F . The proof of (b) is considerably

more dicult; see Appendix A for details.
It is not clear that the requirement that the sets in F have at least 2log(jFj)
elements
is necessary. However, it can be shown that Theorem 2.10(b) does not hold without some
assumptions on the cardinality of elements in F . For example, suppose that the atoms of
F are A, B , and C . Let > be defined so that (B [ C ) >A, W >A, X > ; for all nonempty
X 2 F , and these are the only pairs of sets that are in the > relation. It is easy to see
that > is an orderly, qualitative, strict partial order. However, if W = fa; b; cg, A = fag,
B = fbg, and C = fcg, there is no ordering  on W such that s and > agree on F : it is
easy to see that such an ordering  must make a, b, and c incomparable. But if they are
incomparable, we cannot have fb; cg s fag. On the other hand, if we allow C to have two
elements, by taking W = fa; b; c; dg, A = fag, B = fbg, and C = fc; dg, then there is an
ordering  such that s = >: we simply take a  c and b  d.
log(jF j)

3. A Logic of Relative Likelihood

We now consider a logic for reasoning about relative likelihood. Let  be a set of primitive
propositions. A basic likelihood formula (over ) is one of the form '  , where ' and
are propositional formulas over . We read '  as \' is more likely than ". Let L
consist of Boolean combinations of basic likelihood formulas. Notice that we do not allow
nesting of likelihood in L, nor do we allow purely propositional formulas. There would no
diculty extending the syntax and semantics to deal with them, but this would just obscure
the issues of interest here.
A preferential structure (over ) is a tuple M = (W; ;), where W is a (possibly
infinite) set of possible worlds,  is a partial preorder on W , and  associates with each
world in W a truth assignment to the primitive propositions in . Notice that there may be
two or more worlds with the same truth assignment. As we shall see, in general, we need to
have this, although in the case of total preorders, we can assume without loss of generality
that there is at most one world associated with each truth assignment.
We can give semantics to formulas in L in preferential structures in a straightforward
way. For a propositional formula ', let [ '] M consist of the worlds in M whose truth
assignment satisfies '. We then define

M j= '  if [ '] M s [ ] M .
We extend j= to Boolean combinations of basic formulas in the obvious way.
8

fiRelative Likelihood in Partially-Ordered Preferential Structures

Notice that M j= :(:'  false) iff [ :'] M = ; iff [ '] M = W . Let K' be an abbreviation for :(:'  false). It follows that M j= K' iff ' is true at all possible worlds.5
With these definitions, we can provide a sound and complete axiomatization for this
logic of relative likelihood. Let AX consist of the following axioms and inference rules.
L1.
L2.
L3.
L4.
Gen.
MP.

All substitution instances of tautologies of propositional calculus
:('  ')
(('1 _ '2 )  '3 ) ^ (('1 _ '3 )  '2 ) ) ('1  ('2 _ '3 ))
(K (' ) '0 ) ^ K ( 0 ) ) ^ ('  )) ) '0  0
K', for all propositional tautologies ' (Generalization)
From ' and ' ) infer (Modus ponens)

L2, L3, and L4 just express the fact that s is irreexive, qualitative, and orderly,
respectively; this is made precise in the proof of the following result. The axiom Gen is the
analogue of the inference rule \From ' infer K'", typically known as generalization. We
do not have this inference rule here, since our language does not allow nested occurrences
of . Thus, for an arbitrary formula ', the formula K' is not in our language. It is in our
language only if ' is propositional; the axiom takes care of this case.

Theorem 3.1: AX is a sound and complete axiomatization of the language L with respect
to preferential structures.

Proof: The validity of L1 is immediate. It is clear that the fact that s is irreexive and

qualitative, as shown in Proposition 2.5, implies that L2 and L3 are valid. To see that L4
corresponds to orderliness, note that if M j= K (' ) '0 ) ^ K ( 0 ) ) and '  , then
[ '] M  [ '0 ] M , [ 0 ] M  [ ] M , and [ '] M s [ ] M . Since s is orderly, it follows that
[ '0 ] M s [ 0 ] M , so M j= '0  0 . Thus, L4 is valid. It is also clear that MP and Gen
preserve validity. Thus, the axiomatization is sound.
The completeness proof starts out, as is standard for completeness proofs in modal logic,
with the observation that it suces to show that a consistent formula is satisfiable. That
is, we must show that every formula ' for which it is not the case that :' is provable
from AX is satisfiable in some preferential structure M . However, the standard modal
logic techniques of constructing a canonical model (see, for example, (Hughes & Cresswell,
1968)) do not seem to work in this case. Finding an appropriate partial preorder on worlds
is nontrivial. For this we use (part (b) of) Theorem 2.10. See Appendix A for the details.
What happens if we start with a total preorder? Let AXM consist of AX together with
the obvious axiom expressing modularity:
L5. ('1  '2 ) ) (('1  '3 ) _ ('3  '2 ))
We say that a preferential structure is totally preordered if it has the form (W; ; ),
where  is a total preorder on W .
5. K was defined by Lewis (1973), although he wrote 2 rather than K .

9

fiHalpern

Theorem 3.2: AXM is a sound and complete axiomatization of the language L with respect
to totally preordered preferential structures.

Proof: For soundness, we just have to check that L5 is valid in totally ordered preferential

structures. This is straightforward and left to the reader. The completeness proof uses
Theorem 2.10 again, but is simpler than the proof of completeness in Theorem 3.1. We
leave details to Appendix A.
We remark that in light of Proposition 2.8, we can replace L4 in AXM by axioms saying
that  is transitive and satisfies the union property, namely:
L6. ('1  '2 ) ^ ('2  '3 ) ) ('1  '3 )
L7. (('1  '2 ) _ ('1  '3 )) ) ('1  ('1 _ '2 ))
The result is an axiomatization that is very similar to that given by Lewis (1973).
In the proof of Theorem 3.1, when showing that a consistent formula ' is satisfiable, the
structure constructed may have more than one world with the same truth assignment. This
is necessary, as the following example shows. (We remark that this observation is closely
related to the cardinality requirements in Theorem 2.10(b).)

Example 3.3: Suppose  = fp; qg. Let ' be the formula (p  (:p ^ q)) ^ :((p ^ q) 
(:p ^ q)) ^:((p ^:q)  (:p ^ q)). It is easy to see that ' is satisfied in a structure consisting
of four worlds, w1 ; w2 ; w3 ; w4 , such that w1  w3 , w2  w4 , p ^ q is true at w1 , p ^:q is true
at w2 , and :p ^ q is true at both w3 and w4 . However, ' is not satisfiable in any structure
where there is at most one world satisfying :p ^ q. For suppose M were such a structure,
and let w be the world in M satisfying :p ^ q. Since M j= p  (:p ^ q), it must be the
case that [ p] M s fwg. Thus, there must be a world w0 2 [ p] M such that w0  w. But w0
must satisfy one of p ^ q or p ^ :q, so M j= ((p ^ q)  (:p ^ q)) _ ((p ^ :q)  (:p ^ q)),
contradicting the assumption that M j= '.
It is not hard to see that the formula ' of Example 3.3 is not satisfiable in a totally
preordered preferential structure. This is not an accident.

Proposition 3.4: If a formula is satisfiable in a totally preordered preferential structure,

then it is satisfiable in a totally preordered preferential structure with at most one world per
truth assignment.

Proof: See Appendix A.
The results of this and the previous section help emphasize the differences between
totally preordered and partially preordered structures.

4. Related Work

The related literature basically divides into two groups (with connections between them):
(a) other approaches to relative likelihood and (b) work on conditional and nonmonotonic
logic.
10

fiRelative Likelihood in Partially-Ordered Preferential Structures

We first consider relative likelihood. Gardenfors (1975) considered a logic of relative
likelihood, but he took as primitive a total preorder on the sets in 2W , and focused on
connections with probability. In particular, he added axioms to ensure that, given a preorder
s on 2W , there was a probability function Pr with the property that (in our notation)
U s V iff Pr(U )  Pr(V ). Fine (1973) defines a qualitative notion  of comparative
probability, but like Gardenfors, assumes that the preorder on sets is primitive, and is
largely concerned with connections to probability.
Halpern and Rabin (1987) consider a logic of likelihood where absolute statements about
likelihood can be made (' is likely, is somewhat likely, and so on), but there is no notion
of relative likelihood.
Of course, there are many more quantitative notions of likelihood, such as probability,
possibility (Dubois & Prade, 1990), ordinal conditional functions (OCFs) (Spohn, 1988),
and Dempster-Shafer belief functions (Shafer, 1976). The ones closest to the relative likelihood considered here are possibility and OCFs. Recall that a possibility measure Poss on
W associates with each world its possibility, a number in [0; 1], such that for V  W , we
have Poss(V ) = supfPoss(v) : v 2 V g, with the requirement that Poss(W ) = 1. Clearly a
possibility measure places a total preorder on sets, and satisfies the union property, since
Poss(A [ B ) = max(Poss(A); Poss(B )). The same is true for OCFs; we refer the reader
to (Spohn, 1988) for details. Fari~nas del Cerro and Herzig (1991) define a logic QPL
(Qualitative Possibilistic Logic) with a modal operator , where '  is interpreted as
Poss([['] )  Poss([[ ] ). Clearly, '  essentially corresponds to  '. They provide
a complete axiomatization for their logic, and prove that it is equivalent to Lewis' logic.6
Not surprisingly, an analogue of AX M is also complete for the logic. Further discussion of
the logic can be found in (Bendova & Hajek, 1993). We discuss other connections between
possibility measures, OCFs, and our logic below, in the context of conditionals.
We now turn our attention to conditional logic. Lewis's main goal in considering preferential structures was to capture a counterfactual conditional !, where ! ' is read
as \if were the case, then ' would be true" as in \if kangaroos had no tails, then they
would topple over". He takes this to be true at a world w if, in all the worlds \closest" to
w (where closeness is defined by a preorder ) where kangaroos don't have tails, it is the
case that kangaroos topple over.7
More abstractly, in the case where W is finite, for a subset V  W , let best(V ) = fv 2
V : v0  v implies v0 2= V g. Thus, best(V ) consists of all worlds v 2 V such that no world
v0 2 V is considered more likely than v. (We take best(;) = ;.)
If W is finite, we define
(M; w) j= ! ' if best([[ ] M )  [ '] M .
Thus,
true.

! ' is true exactly if ' is true at the most likely (or closest) worlds where ' is

6. Actually, the axiomatization given in (Fari~nas del Cerro & Herzig, 1991) is not quite complete as stated;
to get completeness, we must replace their axiom QPL4|true  '|by the axiom '  false [Luis Fari~nas
del Cerro, private communication, 1996].
7. To really deal appropriately with counterfactuals, we require not one preorder , but a possibly different
preorder w for each world w, since the notion of closeness in general depends on the actual world. We
ignore this issue here, since it is somewhat tangential to our concerns.

11

fiHalpern

For infinite domains, this definition does not quite capture our intentions. For example,
in Example 2.2, we have best(W1 ) = ;. It follows that if M = (W1 ; ; ), then M j=
true ! :p even if  makes p true at every world in W1 . We certainly would not want to
say that \if true were the case, then p would be false" is true if p is true at all the worlds in
W1 ! The solution here is again a generalization of Lewis's definition in the case of totally
ordered worlds, and is much like that for s in infinite domains. We say M j= ! ' if
for all u 2 [ :' ^ ] M , there exists a world v 2 [ ' ^ ] M such that v  u and v dominates
[ :' ^ ] M . This definition agrees with the definition given above for the case of finite W .

Lemma 4.1: If W is finite, then best([[ ] M )  [ '] M iff for all u 2 [ :' ^ ] M , there exists
a world v 2 [ ' ^ ] M such that v  u and v dominates [ :' ^ ] M .
Proof: See Appendix A.
Lewis (1973) argues that this definition of ! captures many of our intuitions for counterfactual reasoning. We can give ! another interpretation, perhaps more natural if we are
thinking in terms of likelihood. We often want to say that ' is more likely than not|in L,
this can be expressed as '  :'. More generally, we might want to say that relative to ,

or conditional on being the case, ' is more likely than not. By this we mean that if we
restrict to worlds where is true, ' is more likely than not, that is, the worlds where ' ^
is true are more likely than the worlds where :' ^ is true.
Let us define !0 ' to be an abbreviation for K : _ (' ^  :' ^ ). That is,
!0 ' is true vacuously in a structure M if does not hold in any world in M ; otherwise,
it holds if ' is more likely than not in the worlds satisfying .
Although the intuition for !0 seems, on the surface, quite different from that for !,
especially in finite domains, it is almost immediate from their formal definitions that they
are equivalent. (This connection between ! and !0 was already observed by Lewis (1973)
in the case of total proeorders.)

Lemma 4.2: For all structures M , we have M j= ! ' iff M j= !0 '.
Proof: This is almost immediate from the definitions. See Appendix A for details.
Given Lemma 4.2, we can write ! for both ! and !0 . The lemma also allows us to

apply the known results for conditional logic to the logic of relative likelihood defined here.
In particular, the results of (Friedman & Halpern, 1994) show that the validity problem for
the logic of Section 3 is co-NP complete, no harder than that of propositional logic, for the
case of both partial and total preorders.8
More recently, ! has been used to capture nonmonotonic default reasoning (Kraus et al.,
1990; Boutilier, 1994). In this case, a statement like Bird ! Fly is interpreted as \birds
typically y", or \by default, birds y". The semantics does not change: Bird ! Fly is
true if in the most likely worlds satisfying Bird , Fly holds as well. Dubois and Prade (1991)
have shown that possibility can be used to give semantics to defaults as well, where ! '
8. We remark that there are also well known axiomatizations for various conditional logics (Burgess, 1981;
Friedman & Halpern, 1994; Lewis, 1973). These do not immediately give us a complete axiomatization
for the logic of relative likelihood considered here, since we must find axioms in the language with ,
not in the language with !.

12

fiRelative Likelihood in Partially-Ordered Preferential Structures

is interpreted as Poss( ) = 0 or Poss(' ^ ) > Poss(' ^ : ). Of course, this is just the
analogue of the definition of ! in terms of s. Goldszmidt and Pearl (1992) have shown
that a similar approach works if we use Spohn's OCFs.
These results are clarified and unified in (Friedman & Halpern, 1997). Suppose we start
with some mapping Pl of sets to a partially ordered space with minimal element ? (such
a mapping is called a plausibility measure in (Friedman & Halpern, 1997)). Define ! '
as Pl(') = ? or Pl( ^ ') > Pl( ^ :'). Then it is shown that ! satisfies the KLM
properties|the properties isolated by Kraus, Lehmann, and Magidor (1990) as forming the
core of default reasoning|if and only if Pl is qualitative, at least when restricted to disjoint
sets.9 Since s, Poss, and OCFs give rise to qualitative orders on 2W , it is no surprise that
they should all lead to logics that satisfy the KLM properties.
We remark we can also start with !, and then define  in terms of !. There are, in
fact, three related ways of doing so. Define ' 0 to be an abbreviation for ((' _ ) ! (' ^
: )) ^:((' _ ) ! ); define ' 00 to be an abbreviation for :(' ! ) ^ ((' _ ) ! : );
define ' 000 to be an abbreviation for :(' ! false) ^ ((' _ ) ! (' ^ : )).

Proposition 4.3: For all structures M , the following are equivalent:
(a) M j= ' 
(b) M j= ' 0
(c) M j= ' 00 .
(d) M j= ' 000 .
The first translation is essentially due to Kraus, Lehmann, and Magidor (1990), the second is essentially due to Freund (1993), and the third is due to Lewis (1973). Since the
equivalences are so close to those already in the literature, we omit the proof of this result
here. Using these equivalences and results of (Kraus et al., 1990), Daniel Lehmann [private
correspondence, 1996] has provided an alternate proof for Theorem 3.1. See the remarks
after the proof of that theorem in Appendix A for a few more details.

5. Conclusion

We have investigated a notion of relative likelihood starting with a preferential ordering on
worlds. This notion was earlier studied by Lewis (1973) in the case where the preferential
order is a total preorder; the focus of this paper is on the case where the preferential order is
a partial preorder. Our results show that there are significant differences between the totally
ordered and partially ordered case. By focusing on the partially ordered case, we bring out
the key role of the qualitative property (Axiom L3), whose connections to conditional logic
were already observed in (Friedman & Halpern, 1997).
9. That is, if V1 , V2 , and V3 are disjoint sets, we require that if Pl(V1 [V2 ) > Pl(V3 ) and Pl(V1 [V3 ) > Pl(V2 ),
then Pl(V1 ) > Pl(V2 [ V3 ). The result also requires the assumption that if Pl(U ) = Pl(V ) = ?, then
Pl(U [ V ) = ?.

13

fiHalpern

Acknowledgements
Many interesting and useful discussions on plausibility with Nir Friedman formed the basis
for this paper; Nir also pointed out the reference (Doyle et al., 1991). Daniel Lehmann,
Emil Weydert, and the referees of the paper also provided useful comments. A preliminary
version of this paper appears in Uncertainty in Artificial Intelligence, Proceedings of the
Twelfth Conference, 1996, edited by E. Horvitz and F. Jensen. Most of this work was
carried out while the author was at the IBM Almaden Research Center. IBM's support
is gratefully acknowledged. The work was also supported in part by NSF under grants
IRI-93-03109 and IRI-96-25901, and by the Air Force Oce of Scientific Research under
contract F49620-96-1-0323.

Appendix A. Proofs

We repeat the statements of the results we are proving here for the convenience of the
reader.

Lemma 2.4: If > is an orderly qualitative relation on 2W , then > is transitive and

satisfies the union property.
Proof: Suppose > is an orderly qualitative relation. To see that > is transitive, suppose
V1 > V2 and V2 > V3. Since > is orderly, it follows that (V1 [ V3 ) > V2 and (V1 [ V2 ) > V3 .
Since > is qualitative, it follows that V1 > (V2 [ V3 ). From the fact that > is orderly, we
get that V1 > V3 . Thus, > is transitive, as desired.
To see that > satisfies the union property, suppose V1 > V2 and V1 > V3 . Since > is
orderly, we have that (V1 [ V3) >V2 and (V1 [ V2) >V3 . Using the fact that > is qualitative,
we get that V1 > (V2 [ V3 ). Hence, > satisfies the union property.

Proposition 2.5:
(a) If  is a partial preorder on W , then s is an orderly partial preorder on 2W that
satisfies the union property.
(b) If  is a partial preorder on W , then 0 is an orderly strict partial order on 2W .
(c) If  is a strict partial order on W , then s is an orderly qualitative strict partial
order on 2W .

Proof: We prove part (c) here; the proof of parts (a) and (b) is similar in spirit, and is
left to the reader. The fact that s is an orderly strict partial order is straightforward,
and is also left to the reader. To see that s is qualitative, suppose V1 [ V2 s V3 and
V1 [ V3 s V2 . Let v 2 V2 [ V3 . We must show that there is some v0 2 V1 that dominates
V2 [ V3 such that v0  v. Suppose without loss of generality that v 2 V2 (an identical
argument works if v 2 V3 ). Since V1 [ V3 s V2 , there is some u 2 V1 [ V3 that dominates
V2 such that u  v. If u dominates V3 , then it clearly dominates V2 [ V3 and it must be

in V1 , so we are done. Thus, we can assume that u does not dominate V3 , so there is some
element u0 2 V3 such that u0  u. Since V1 [ V2 s V3 , there must be some v0 2 V1 [ V2
14

fiRelative Likelihood in Partially-Ordered Preferential Structures

such that v0 dominates V3 and v0  u0 . Since u dominates V2 and u0  u, it follows that u
dominates V2 . Since v0  u0 , we have that v0 dominates V2 . Hence, v0 dominates V2 [ V3 .
It follows that v0 cannot be in V2 , so it must be in V1 . Thus, we have an element in V1 ,
namely v0 , such that v0  v and v0 dominates V2 [ V3 , as desired.

Lemma 2.6: If  is a total preorder, then the strict partial order  determined by 
is modular. Moreover, if > is a modular, strict partial order on W , then there is a total
preorder  on W such that > is the strict partial order determined by .
Proof: Suppose  is a total preorder. To see that  is modular, suppose that w1  w2 .
Given an arbitrary w3 , if w3  w1 , it follows from the transitivity of  that w3  w2 . On
the other hand, if it is not the case that w3  w1 , then w1  w3 . Thus, we have that either
w3  w2 or w1  w3 , so  is modular.
Now suppose that > is a modular strict partial order on W . Define  so that w  v
either if w > v or if neither w > v nor v > w hold. Clearly,  is reexive. To see that it
is transitive, suppose that v1  v2 and v2  v3 . There are three cases: (1) If v1 > v2 , then
since > is modular, we have that either v1 > v3 or v3 > v2 . We cannot have v3 > v2 , for
then we would not have v2  v3 . Thus, we must have v1 > v3 , and hence v1  v3 . (2) If
v2 > v3 , then using modularity again, we get that either v1 > v3 or v2 > v1. Again, we
cannot have v2 > v1 , so we must have v1 > v3 , and so we also have v1  v3 . (3) If neither
v1 >v2 nor v2 >v3 hold, then we claim that neither v1 >v3 nor v3 >v1 hold. For if v1 >v3 ,
then by modularity, we must have either v1 > v2 or v2 > v3 . And if v3 > v1 , then either
v3 > v2 or v2 > v1 , which contradicts the assumption that v1  v2 and v2  v3 . Thus, we
can again conclude that v1  v3 . Thus,  is transitive. Finally, it is almost immediate from
the definition that > is the strict partial order determined by .
Lemma 2.7: If  is a modular relation on W , then s is a modular relation on 2W .
Proof: Suppose  is modular. We want to show that s is modular. So suppose that
V1 s V2 , and it is not the case that V1 s V3. We must show that V3 s V2 . Since it is not
the case that V1 s V3 , there must be some v 2 V3 such that for all u 2 V1 , we do not have
u  v . Now suppose v 2 V2. We claim that v  v. To see this, note that since V1 s V2 ,
there must be some u 2 V1 such that u  v. Since  is modular, we have that either
u  v or v  v. Since, by choice of v , we do not have u  v , we must have v  v. It
follows that V3 s V2 .
Lemma 2.8: If > is a modular strict partial order and satisfies the union property, then

> is qualitative.
Proof: Suppose that > is modular strict partial order that satisfies the union property.
To see that > is qualitative, suppose that (V1 [ V2 ) > V3 and (V1 [ V3 ) > V2 . Since > is
modular, it follows that either (V1 [ V2 ) > V1 or V1 > V3 . If (V1 [ V2 ) > V1 , then, using the
fact that > satisfies the union property and (V1 [ V2 ) >V3 , we get that (V1 [ V2 ) > (V1 [ V3 ).
Using transitivity, it follows that (V1 [ V2 ) > V2 . Using the union property again, we get
that (V1 [ V2 ) > (V1 [ V2 ). This contradicts the assumption that > is irreexive. Thus, we
15

fiHalpern

must have that V1 >V3 . A similar argument shows that V1 >V2 . Using the union property,
we get that V1 > (V2 [ V3 ), as desired.

Lemma 2.9: If  is a total preorder, then s and 0 agree. In general, U s V implies
U 0 V , but the converse does not hold.
Proof: It is immediate from the definitions that U s V implies U 0 V , and the fact that
the converse does not hold is shown by Example 2.1. To show that s and 0 are equivalent
if  is a total preorder, suppose U 0 V . Clearly U is nonempty, since V s ; for all V .
We want to show that U s V , so we must show that for all v 2 V , there is some u 2 U
that dominates V such that u  v. We actually show that there is some u 2 U such that
u  v0 for all v0 2 V . Suppose not. Then for every u 2 U , there is some vu such that we do
not have u  vu . Since  is a total order, this means that vu  u. But this, in turn, means
that V s U , contradicting our assumption that U s V . Since there is a u 2 U such that
u  v for all v 2 V , it easily follows that u dominates V and that U s V , as desired.
Theorem 2.10: Let F be a finite algebra of subsets of W (that is, F is a set of subsets

of W that is closed under union and complementation and contains W itself) and let > be
an orderly qualitative relation on F .
(a) If > is a total preorder on F , then there is a total preorder  on W such that > and
s agree on F (that is, for U; V 2 F , we have U > V iff U s V ).
(b) If > is a strict partial order and each nonempty set in F has at least 2log(jFj)
elements, then there is a partial preorder  on W such that > and s agree on F .

log(jF j)

Proof: Part (a) was already proved in the main text, so we prove part (b) here.

We proceed as follows. We say that a pair (A; X ) is minimal pair of > if X > A and
there is no X 0  X (\" is used here to denote strict subset) such that X 0 > A. The
minimal pairs in an ordered relation determine it. Indeed, the following stronger result
holds.

Lemma A.1: If > and >0 are two orderly qualitative relations on F such that for each

minimal pair (A; X ) of > we have X > A, and for each minimal pair (A0 ; X 0 ) of >0 we
have X 0 >0 A0 , then > = >0 .

Proof: Suppose the assumptions of the lemma holds and that X > Y ; we must show that
X >0 Y . Suppose A is an atom such that A  Y . Since > is orderly, we must have X >A.
Let X 0 be a minimal subset of X such that X 0 > A. Since F is finite, such an X 0 must

exist. Thus, (A; X 0 ) is a minimal pair of >. By assumption, we have X 0 >0 A. Since >0
is orderly, we also have X >0 A. Thus, we have X >0 A for each atom A  Y . Since
>0 is qualitative, it also satisfies the union property, and hence X >0 Y as desired. By
symmetry, it follows that > = >0 .
A minimal-pair tree for > is a rooted tree whose nodes are labeled by atoms such that
the following conditions are satisfied:
16

fiRelative Likelihood in Partially-Ordered Preferential Structures

1. If a node in the tree labeled B is an immediate successor of a node labeled A, then
there must be a minimal pair (A; X ) of > such that B  X .
2. If there is a node t in the tree labeled A and a minimal pair of > of the form (A; X ),
then there must be some atom B  X such that a node labeled B is an immediate
successor of t.
3. There does not exist a path in the tree such that two nodes in the path have the same
label.
4. A node does not have two distinct successors with the same label.
A minimal-pair tree is rooted at A if the root of the tree is labeled by the atom A.
Since a subset of F can be written in a unique way as the union of atoms, there is
a 1-1 correspondence between subsets of F and sets of atoms. Thus, there are exactly
log(jFj) atoms. Because of the third condition, a path in the tree can have length at
most log(jFj). Since all the atoms on the path must be distinct, it follows that there
are at most log(jFj)!  log(jFj)log(jFj) (= jFjlog log(jFj) ) possible paths in a tree rooted at
A. We can identify a tree with the set of its paths, which means that there are at most
2log(jFj)!  2log(jFj)
possible trees rooted at an atom A.
We now label each element in W with a minimal-pair tree in such a way that every
element of atom A is labeled by a tree rooted at A, and every minimal-pair tree rooted at A
is the label of some element of A. Since we have assumed that A has at least 2log(jFj)
elements, there is such a labeling. Let L(w) be the label of node w. We define  on W so
that w0  w iff L(w0 ) is a proper subtree of L(w). Clearly  is a strict partial order.
We claim that > agrees with s. By Lemma A.1, it suces to show that if (A; X ) is a
minimal pair of >, then X s A, and if (A; X ) is a minimal pair of s , then X > A. So
suppose (A; X ) is a minimal pair of >. We want to show that X s A. Let w 2 A, and
suppose that L(w) = T . Thus, T is a minimal-pair tree rooted at A. The construction of
minimal-pair trees guarantees that there is a successor of the root in tree T labeled B for
some atom B  X . Consider the subtree of T rooted at B . This is a minimal-pair tree
rooted at B , and hence must be the label of some w0 2 B  X . Thus, w0  w. It follows
that X s A.
Now suppose that (A; X ) is a minimal pair of s . We want to show that X > A.
Suppose not. As we show below, this means that there exists a minimal-pair tree T rooted
at A such that no node in T is labeled by an atom contained in X . Let w be an element of
A with L(w) = T . By construction, there is no element w0 of X such that w0  w. Thus,
we do not have X s A, contradicting our initial assumption.
It remains to show that there exists a minimal-pair tree T rooted at A such that no
node in T is labeled by an atom contained in X . Clearly, we cannot have X 0 > A for some
X 0  X , for then, by the preceding argument, we would have X 0 s A, and (A; X ) would
not be a minimal pair of s. It follows that if (A; Y ) is a minimal pair of >, then we must
have Y , X 6= ;.
Two general fact about orderly, qualitative relations will be useful in our construction:
log(jF j)

log(jF j)

Lemma A.2: If >0 is a qualitative relation on F and Y >0 X , then (Y , X ) >0 X .
17

fiHalpern

Proof: Notice that (Y , X ) [ X >0 X . Since >0 is qualitative, it follows that (Y , X ) >0 X

(take both V2 and V3 in the definition of qualitative to be X ).
Lemma A.3: If >0 is an orderly, qualitative relation such that (X1 [ X2 ) >0 X3 and
X 0 >0 X2 , then (X1 [ X 0 ) >0 X3 .
Proof: Since >0 is orderly, our assumptions imply that (X1 [ X 0 [ X2 ) >0 X3 and that
(X1 [ X 0 [ X3 ) >0 X2 . Since >0 is qualitative, it follows that (X1 [ X 0 ) > (X2 [ X3 ). The
result follows using the fact that >0 is orderly again.
We start by constructing a tree whose nodes are labeled by atoms and whose root is
labeled by A. We proceed in log(jFj) + 1 stages. At each stage, we have a tree whose nodes
are labeled by atoms. At stage 0, we just take a single node labeled by A. Suppose we
have constructed a tree whose nodes are labeled by atoms and whose root is labeled by A
at stage k < log(jFj). For stage k + 1, for each leaf t in the stage-k tree, if t is labeled by
B , then for each atom C , if there is a minimal pair (B; Y ) of > with C  Y , we add a
successor to t labeled C . We call the tree constructed at the end of stage log(jFj) the full
tree for A.
We next mark nodes in the full tree in stages. At the kth stage, for each atom B , we
mark an unmarked node t labeled B if one of the following three conditions holds: (1)
B  X , (2) there is an ancestor of t in the tree also labeled B , (3) there is a minimal pair
(B; Y ) of > and all the successors of t with a label contained in Y were marked at an earlier
stage. If there are no unmarked nodes satisfying one of these three conditions at stage k,
then the marking process stops. Otherwise, we continue to stage k +1. Since there are only
finitely many nodes, this marking process is guaranteed to terminate.
Our goal is to show that, at the end of the marking process, the root of the full tree
is unmarked. For if this is the case, let T be the subtree of the full tree consisting of all
the unmarked nodes all of whose ancestors are unmarked. It is easy to check that T is a
minimal-pair tree and our marking procedure guarantees that no node in T is labeled by
an atom contained in X , so we are done.
To see that the root of the full tree is unmarked, we proceed as follows: Define a 0-cover
for a node t in the full tree to be just t itself. Suppose we have defined a k-cover for t. A
set Z of nodes is a (k + 1)-cover for t if there exists a k-cover Z 0 for t such that for some
node t0 in Z 0 labeled B and some minimal pair (B; Y ) of >, we have that Z consists of all
the nodes in Z 0 except for t0 , together with all the successors of t0 that are labeled by an
atom contained in Y . An easy argument by induction on k shows the following.
Lemma A.4: If Z is a k-cover for a node t labeled C and k > 0, then there exist a set Y
such that (C; Y ) is a minimal pair of >, successors t1 ; : : : ; tm of t in the full tree, atoms
D1 ; : : : ; Dm such that Y = [mi=1Di and Di is the label of ti , i = 1; : : : ; m, and a partition
Z1 ; : : : ; Zm of Z into disjoint subsets such that Zi is a ki -cover for ti, i = 1; : : : ; m, for
some ki < k.
Given a set Z , let UZn consist of the union of the atoms labeling the nodes of Z still
unmarked at the nth stage (we take UZ0 to be the union of the atoms labeling the nodes in
Z ); given a node t, let Vt consist of the union of the atoms D labeling ancestors of t such
that t or some descendent of t has the label D.
The key fact is the following result.
18

fiRelative Likelihood in Partially-Ordered Preferential Structures

Lemma A.5: If Z is a k-cover for a node t labeled C and k > 0, then (UZn [ Vt [ X ) > C .
Proof: We proceed by induction on k, with a subinduction on n. If k = 1, then there is
some set Y such that (C; Y ) is a minimal pair of > and the nodes in Z are labeled by the
atoms contained in Y . Since (C; Y ) is a minimal pair of >, we have that Y > C . Since >
is orderly, (Y [ Vt [ X ) > C . By definition, UZ0 = Y , so this takes care of the case n = 0.
Suppose n > 0 and (UZn,1 [ Vt [ X ) > C . For the inductive step, it suces to show that
that if
(Y 0 [ V t [ X ) > C
(1)
and D is the label of a node t0 in Z marked at stage n, then
((Y 0 , D) [ Vt [ X ) > C:

(2)

So suppose that (1) holds and D is the label of t0 . We must consider how t0 was marked.
If D  X then (2) is immediate. If there is an ancestor of t0 also labeled D, then D  Vt ,
and, since k = 1, we have Vt  Vt [ C . Thus, since > is orderly, it follows that
0

0

((Y 0 , D) [ Vt [ X [ C ) > C;

(3)

so (2) follows from Lemma A.2. Finally, suppose there is some minimal pair (D; Y 00 ) of
> such that all the successors of t0 labeled by an atom in Y 00 are marked by stage n , 1.
Let Z 0 consist of the successors of t0 labeled by atoms contained in Y 00 . Z 0 is a 1-cover for
t0 . Since UZn,1 = ;, it follows from the induction hypothesis that (Vt [ X ) > D. Again,
since Vt  Vt [ C , (3) follows orderliness and Lemma A.3, and the desired (2) follows from
Lemma A.2.
Now suppose k > 1. Let Y; D1 ; : : : ; Dm ; Z1 ; : : : ; Zm ; t1 ; : : : ; tm be the sets and nodes
guaranteed to exist by Lemma A.4. Since Zi is a ki -cover for ti for some ki < k, by
the induction hypothesis, (UZn [ Vt [ X ) > Di . Since UZn  UZn and Vt  Vt [ C , by
orderliness, we have that (UZn [ Vt [ X [ C ) > Di . Since > is qualitative, we have that
(UZn [ Vt [ X [ C ) > ([i Di ). Since [iDi = Y and Y > C , (3) now follows, and again (2)
follows from Lemma A.2.
Finally, suppose, by way of contradiction, that the root r of the full tree is marked, say
at stage n of the marking process. Lemma A.2 assures us that A \ X = ;, since (A; X )
is a minimal pair of s, so condition (1) of the marking process does not apply. Since r
has no ancestors, condition (2) does not apply either. Thus, there must be some minimal
pair (A; Y ) of > such that all the nodes in the set Z consisting of the successors of r in
the full tree that are labeled by atoms contained in Y are marked by stage n , 1. Thus, we
UZn,1 = ;. Since Vr = ; and Z is a 1-cover for r, by Lemma A.5, it follows that X > A,
contradicting our original assumption.
0

0

0

i

i

i

i

For the completeness theorems (Theorems 3.1 and 3.2) it is convenient to start by proving Theorem 3.2, since it is simpler, and contains the key ideas for the proof of Theorem 3.1.

Theorem 3.2: AXM is a sound and complete axiomatization of the language L with
respect to totally preordered preferential structures.
19

fiHalpern

Proof: Soundness was proved in the main text, so we just consider completeness here.

Suppose that ' is consistent with AXM . We want to show that that ' is satisfiable in a
totally preordered preferential structure. Let '1 ; : : : ; 'm be the basic likelihood formulas
that are subformulas of '. By definition, ' is a Boolean combination of these formulas.
Define an atom over ' to be a conjunction of the form 1 ^ : : : ^ m , where i is either 'i or
:'i. Using straightforward propositional reasoning (L1 and MP), it is straightforward to
show that ' is provably equivalent to the disjunction of the consistent atoms over '. Thus,
since ' is consistent, some atom over ', say , is consistent. We now construct a totally
ordered preferential structure satisfying . Clearly this structure will satisfy ' as well.
Let p1 ; : : : ; pn be the primitive propositions in  that appear in '. Let  consist of
all the N = 2n truth assignments to these primitive propositions. We take W =  and
let F consist of all subsets of . We define a total preorder > on F as follows. Notice
that to each set V in F , there corresponds a propositional formula 'V that is made true
precisely by the truth assignments in the subset V 0 of  that corresponds to V . To be
precise, given a truth assignment ff, let 'ff consist of the conjunction q1 ^ : : : ^ qn, where qi
is pi if ff(pi ) = true, and :pi otherwise. Let 'V be the disjunction of the formulas 'ff for
ff 2 V 0 . (We take the empty disjunction to be the formula false.) Notice for future reference
that 'V [V is provably equivalent to 'V _ 'V . Conversely, for every propositional formula
that mentions only the primitive propositions in fp1 ; : : : ; pn g, there is a corresponding
subset A in F that consists of all truth assignments that make true.
We define a binary relation > on F as follows: V > V 0 iff AX `  ) ('V  'V ).
We claim that > is a modular, qualitative, strict partial order on F . The fact that > is
irreexive follows easily from L2; the fact that it is orderly follows from L4; the fact that
it is qualitative follows from L3; transitivity follows from the fact that > is qualitative and
orderly, by Lemma 2.4; modularity follows from L5. All these arguments are straightforward. We prove the fact that > is qualitative here, and leave the remaining arguments to
the reader.
Suppose V1 ; V2 ; V3 2 F , (V1 [ V2 ) > V3 , and (V1 [ V3 ) > V2 . Our assumptions and
the definition of F imply that AX `  ) (('V _ 'V )  'V ) and that AX `  )
(('V _ 'V )  'V ). By L3 and straightforward propositional reasoning, we get that
AX `  ) ('V  ('V _ 'V )), so that V1 > (V2 [ V3), as desired.
By Lemma 2.6, there is a total preorder >0 on F such that > is the strict partial order
determined by >0 . By Theorem 2.10(a), there is total preorder  on W such that >0 and
s agree on F . Since 0 is the strict partial order determined by s, it follows that 0 and
> agree. Since  is a total preorder, by Lemma 2.9, s and > agree. Let M = (W; ; ).
We now claim that for each formula 'j that is one of the basic likelihood formulas that is a
subformula of ', we M j= 'i iff 'j is a conjunct of . For suppose 'j is of the form  0 .
If 'j is a conjunct of , then clearly AX `  ) (  0 ). Thus, A > A by definition,
so A s A by construction. Since A and A consist of the worlds in W where and
0 , respectively, are true, it follows that (M; w) j=  0 . On the other hand, if :'j is a
conjunct of , then we have AX `  ) :(  0 ). We must have (M; w) j= :(  0 ),
for if (M; w) j=  0 , the same arguments as those above would imply that A > A ,
and so AX `  )  0 , contradicting the consistency of .
Thus, M satisfies , and hence '.
1

2

1

2

0

1

1

3

2

3

2

1

2

2

0

0

0

0

20

fiRelative Likelihood in Partially-Ordered Preferential Structures

Theorem 3.1: AX is a sound and complete axiomatization of the language L with respect

to preferential structures.
Proof: Again, soundness is proved in the main text, so we just consider completeness. The
ideas are much in the spirit of the proof of Theorem 3.2. We again take  to consist of all
the N = 2n truth assignments to these primitive propositions. However, since we plan to
apply part (b) of Theorem 2.10, we no longer take W = . Rather, we take W to consist
of 2n copies of the truth assignments in . More precisely, let W consist of the N 2n
worlds of the form wffi , such that i = 1; : : : ; 2n and ff 2 . Let F consist of all subsets of
W that correspond to subsets of ; that is, V 2 F iff there exists some V 0   such that
V = fwffi : i = 1; : : : ; 2n ; ff 2 V 0 g. Clearly, F is a finite algebra with N elements, and
each nonempty set in F has at least 2log(jFj)
elements.
We define a strict partial order > on F just as in the proof of Theorem 3.1: V > V 0 iff
AX `  ) 'V  'V . As before, > is an orderly qualitative strict partial order on F . It
is not necessarily modular, since we no longer have L5.
By Theorem 2.10(b), there is a partial preorder  on W such that > and s agree on
F . Let M = (W; ; ), where (wffi ) = ff. Just as in the proof of Theorem 3.2, we can now
show that M j= . .
n

n

n

n

log(jF j)

0

As we noted earlier, Daniel Lehmann has found another proof for Theorem 3.1, using
results from (Kraus et al., 1990). To show that a formula in L that is consistent with AX
is satisfiable, he first translates it to a formula of conditional logic (using Proposition 4.3).
It then follows from the representation theorem of (Kraus et al., 1990) that this translated
formula is satisfiable in a preferential structure. The original formula is then satisfiable in
the same structure. This proof allows us to avoid using Theorem 2.10 altogether. However,
we feel that Theorem 2.10 gives insight into the connection between partial orders on worlds
and partial orders on sets of worlds, and thus is of interest in its own right.

Proposition 3.4: If a formula is satisfiable in a totally preordered preferential structure,
then it is satisfiable in a totally preordered preferential structure with at most one world per
truth assignment.
Proof: This follows immediately from the completeness proof of Theorem 3.2; the structure
constructed in that proof has one world per truth assignment.
Lemma 4.1: If W is finite, then best([[ ] M )  [ '] M iff for all u 2 [ :' ^ ] M , there
exists a world v 2 [ ' ^ ] M such that v  u and v dominates [ :' ^ ] M .
Proof: Suppose best([[ ] M )  [ '] M . If u 2 [ :' ^ ] M , then we cannot have u 2
best([[ ] M ), since best([[ ] M )  [ '] M . Since W is finite, there exists a world v 2 best([[ ] M )
such that v  u. Since v 2 best([[ ] M ), we have that v dominates [ :' ^ ] M . Conversely,
suppose that for all u 2 [ :' ^ ] M , there exists a world v 2 [ ' ^ ] M such that v  u
and v dominates [ :' ^ ] M . If u 2 best([[ ] M ), then we must have u 2 [ '] M , for if not,
there exists a world v 2 [ ' ^ ] M such that v  u, contradicting the assumption that
u 2 best([['] M ).
21

fiHalpern

Lemma 4.2: For all structures M , we have M j= ! ' iff M j= !0 '.
Proof: Suppose M j= ! '. By definition, this means that for all u 2 [ :' ^ ] M , there
exists a world v 2 [ ' ^ ] M such that v  u and v dominates [ :' ^ ] M . It immediately
follows that (a) if [ ' ^ ] M = ; then [ :' ^ ] M = ; and (b) if [ ' ^ ] M 6= ;, then by
definition we have M j= ' ^  :' ^ . It follows from (a) that if [ ' ^ ] M = ; then
[ ] M = ;, so M j= K : , and from (b) that if [ ' ^ ] M 6= ; then M j= ' ^  :' ^ .
Thus, M j= K : _ (' ^  :' ^ ); i.e., M j= !0 .
The converse follows equally easily. Suppose M j= !0 '. Clearly if M j= K : then
we trivially have that for all u 2 [ :' ^ ] M , there exists a world v 2 [ ' ^ ] M such that
v  u and v dominates [ :' ^ ] M . On the other hand, if M j= ' ^  :' ^ , then it
follows by definition that for all u 2 [ :' ^ ] M , there exists a world v 2 [ ' ^ ] M such
that v  u and v dominates [ :' ^ ] M . Either way we have M j= ! '.

References
Bendova, K., & Hajek, P. (1993). Possibilistic logic as tense logic. In Carrete, N. P., &
Singh, M. G. (Eds.), Qualitative Reasoning and Decision Technologies, pp. 441{450.
Boutilier, C. (1994). Conditional logics of normality: a modal approach. Artificial Intelligence, 68, 87{154.
Brass, S. (1991). Deduction with super-normal defaults. In Proceedings of 2nd International
Workshop on Nonmonotonic and Inductive Logics, Lecture Notes in AI, Vol. 659, pp.
153{174 Berlin/New York. Springer-Verlag.
Burgess, J. (1981). Quick completeness proofs for some logics of conditionals. Notre Dame
Journal of Formal Logic, 22, 76{84.
Cayrol, C., Royer, R., & Saurel, C. (1992). Management of preferences in assumptionbased reasoning. In IPMU '92 (4th International Conference on Information Processing and Management of Uncertainty in Knowledge-Based Systems), Lecture Notes in
Computer Science, Vol. 682, pp. 13{22 Berlin/New York. Springer-Verlag.
Delgrande, J. P. (1994). A preference-based approach to default reasoning. In Proceedings,
Twelfth National Conference on Artificial Intelligence (AAAI '94), pp. 902{908.
Dershowitz, N., & Manna, Z. (1979). Proving termination with multiset orderings. Communications of the ACM, 22 (8), 456{476.
Doyle, J., Shoham, Y., & Wellman, M. P. (1991). A logic of relative desire. In Proc. 6th
International Symposium on Methodologies for Intelligent Systems, pp. 16{31.
Dubois, D., & Prade, H. (1990). An introduction to possibilistic and fuzzy logics. In
Shafer, G., & Pearl, J. (Eds.), Readings in Uncertain Reasoning, pp. 742{761. Morgan
Kaufmann, San Francisco, Calif.
22

fiRelative Likelihood in Partially-Ordered Preferential Structures

Dubois, D., & Prade, H. (1991). Possibilistic logic, preferential models, non-monotonicity
and related issues. In Proc. Twelfth International Joint Conference on Artificial Intelligence (IJCAI '91), pp. 419{424.
Fari~nas del Cerro, L., & Herzig, A. (1991). A modal analysis of possibilistic logic. In
Symbolic and Quantitative Approaches to Uncertainty, Lecture Notes in Computer
Science, Vol. 548, pp. 58{62. Springer-Verlag, Berlin/New York.
Fine, T. L. (1973). Theories of Probability. Academic Press, New York.
Freund, M. (1993). Injective models and disjunctive relations. Journal of Logic and Computation, 3 (3), 231{247.
Friedman, N., & Halpern, J. Y. (1994). On the complexity of conditional logics. In Principles
of Knowledge Representation and Reasoning: Proc. Fourth International Conference
(KR '94), pp. 202{213. Morgan Kaufmann, San Francisco, Calif.
Friedman, N., & Halpern, J. Y. (1997). Plausibility measures and default reasoning. Journal
of the ACM. Accepted for publication. A preliminary version of this work appeared
in Proc. National Conference on Artificial Intelligence (AAAI '96), 1996, pages 1297{
1304.
Gardenfors, P. (1975). Qualitative probability as an intensional logic. Journal of Philosophical Logic, 4, 171{185.
Geffner, H. (1992). High probabilities, model preference and default arguments. Mind and
Machines, 2, 51{70.
Goldszmidt, M., & Pearl, J. (1992). Rank-based systems: A simple approach to belief
revision, belief update and reasoning about evidence and actions. In Principles of
Knowledge Representation and Reasoning: Proc. Third International Conference (KR
'92), pp. 661{672. Morgan Kaufmann, San Francisco, Calif.
Halpern, J. Y., & Rabin, M. O. (1987). A logic to reason about likelihood. Artificial
Intelligence, 32 (3), 379{405.
Hughes, G. E., & Cresswell, M. J. (1968). An Introduction to Modal Logic. Methuen,
London.
Kraus, S., Lehmann, D., & Magidor, M. (1990). Nonmonotonic reasoning, preferential
models and cumulative logics. Artificial Intelligence, 44, 167{207.
Lewis, D. K. (1973). Counterfactuals. Harvard University Press, Cambridge, Mass.
Przymusinski, T. (1987). On the declarative semantics of stratified deductive databses and
logic programs. In Minker, J. (Ed.), Foundations of Deductive Databases and Logic
Programming, pp. 193{216. Morgan Kaufmann, San Francisco, Calif.
Shafer, G. (1976). A Mathematical Theory of Evidence. Princeton University Press, Princeton, N.J.
23

fiHalpern

Spohn, W. (1988). Ordinal conditional functions: a dynamic theory of epistemic states.
In Harper, W., & Skyrms, B. (Eds.), Causation in Decision, Belief Change, and
Statistics, Vol. 2, pp. 105{134. Reidel, Dordrecht, Netherlands.

24

fi