Journal of Artificial Intelligence Research 21 (2004) 319356

Submitted 11/02; published 03/04

Representation Dependence in Probabilistic Inference
Joseph Y. Halpern

halpern@cs.cornell.edu

Cornell University, Computer Science Department
Ithaca, NY 14853
http://www.cs.cornell.edu/home/halpern

Daphne Koller

koller@cs.stanford.edu

Stanford University, Computer Science Department
Stanford, CA 94035
http://www.cs.stanford.edu/ koller

Abstract
Non-deductive reasoning systems are often representation dependent: representing the
same situation in two different ways may cause such a system to return two different answers. Some have viewed this as a significant problem. For example, the principle of
maximum entropy has been subjected to much criticism due to its representation dependence. There has, however, been almost no work investigating representation dependence.
In this paper, we formalize this notion and show that it is not a problem specific to maximum entropy. In fact, we show that any representation-independent probabilistic inference
procedure that ignores irrelevant information is essentially entailment, in a precise sense.
Moreover, we show that representation independence is incompatible with even a weak default assumption of independence. We then show that invariance under a restricted class of
representation changes can form a reasonable compromise between representation independence and other desiderata, and provide a construction of a family of inference procedures
that provides such restricted representation independence, using relative entropy.

1. Introduction
It is well known that the way in which a problem is represented can have a significant impact
on the ease with which people solve it, and on the complexity of an algorithm for solving
it. We are interested in what is arguably an even more fundamental issue: the extent to
which the answers that we get depend on how our input is represented. Here too, there is
well known work, particularly by Tversky and Kahneman (see, for example, (Kahneman,
Slovic, & Tversky, 1982)), showing that the answers given by people can vary significantly
(and in systematic ways) depending on how a question is framed. This phenomenon is often
viewed as indicating a problem with human information processing; the implicit assumption
is that although people do make mistakes of this sort, they shouldnt. On the other hand,
there is a competing intuition that suggests that representation does (and should ) matter;
representation dependence is just a natural consequence of this fact.
Here we consider one type of reasoning, probabilistic inference, and examine the extent
to which answers depend on the representation. The issue of representation dependence is of
particular interest in this context because of the interest in using probability for knowledge
representation (e.g., (Pearl, 1988)) and because probabilistic inference has been the source
c
2004
AI Access Foundation and Morgan Kaufmann Publishers. All rights reserved.

fiHalpern & Koller

of many of the concerns expressed regarding representation. However, our approach should
be applicable far more generally.
We begin by noting that the notion of probabilistic inference has two quite different
interpretations. In one interpretation, which forms the basis for the Bayesian paradigm,
probabilitic inference consists basically of conditioning: We start out with a prior distribution over some event space, and then condition on whatever observations are obtained. In
the other interpretation, we are given only a set of probabilistic assertions, and our goal
is to reach conclusions about the probabilities of various events. For most of this paper,
we focus on the latter interpretation, although we discuss the relationship to the Bayesian
approach in Section 7.2.
Suppose that we have a procedure for making inferences from a probabilistic knowledge
base. How sensitive is it to the way knowledge is represented? Consider the following
examples, which use perhaps the best-known non-deductive notion of probabilistic inference,
maximum entropy (Jaynes, 1978).1
Example 1.1: Suppose that we have no information whatsoever regarding whether an
object is colorful. What probability should we assign to the proposition colorful ? Symmetry
arguments might suggest 1/2. Since we have no information, it seems that an object should
be just as likely to be colorful as non-colorful. This is also the conclusion reached by
maximum entropy provided that the language has only the proposition colorful . But now
suppose we know about the colors red, blue, and green, and have propositions corresponding
to each of these colors. Moreover, by colorful we actually mean red  blue  green. In this
case, maximum entropy dictates that the probability of red  blue  green is 7/8. Note that,
in both cases, the only conclusion that follows from our constraints is the trivial one: that
the probability of the query is somewhere between 0 and 1.
Example 1.2: Suppose that we are told that half of the birds fly. There are two reasonable ways to represent this information. One is to have propositions bird and fly, and
use a knowledge base KB fly
1 =def [Pr(fly | bird ) = 1/2]. A second might be to have as
basic predicates bird and flying-bird , and use a knowledge base KB fly
2 =def [(flying-bird 
bird )  Pr(flying-bird | bird ) = 1/2]. Although the first representation may appear more natural, it seems that both representations are intuitively adequate insofar as representing the
information that we have been given. But if we use an inference method such as maximum
entropy, the first representation leads us to infer Pr(bird ) = 1/2, while the second leads us
to infer Pr(bird ) = 2/3.
Examples such as these are the basis for the frequent criticisms of maximum entropy
on the grounds of representation dependence. But other than pointing out these examples,
there has been little work on this problem. In fact, other than the work of Salmon (1961,
1963) and Paris (1994), there seems to have been no work on formalizing the notion of representation dependence. One might say that the consensus was: whatever representation
independence is, it is not a property enjoyed by maximum entropy. But are there any
1. Although much of our discussion is motivated by the representation-dependence problem encountered
by maximum entropy, an understanding of maximum entropy and how it works is not essential for
understanding our discussion.

320

fiRepresentation Dependence

other inference procedures that have it? In this paper we attempt to understand the notion
of representation dependence, and to study the extent to which it is achievable.
To study representation dependence, we must first understand what we mean by a
representation. The real world is complex. In any reasoning process, we must focus on
certain details and ignore others. At a semantic level, the relevant distinctions are captured
by using a space X of possible alternatives or states (possible worlds). In Example 1.1, our
first representation focused on the single attribute colorful . In this case, we have only two
states in the state space, corresponding to colorful being true and false, respectively. The
second representation, using red , blue, and green, has a richer state space. Clearly, there
are other distinctions that we could make.
We can also interpret a representation as a syntactic entity. In this case, we typically capture relevant distinctions using some formal language. For example, if we use propositional
logic as our basic knowledge representation language, our choice of primitive propositions
characterizes the distinctions that we have chosen to make. We can then take the states
to be truth assignments to these propositions. Similarly, if we use a probabilistic representation language such as belief networks (Pearl, 1988) as our knowledge representation
language, we must choose some set of relevant random variables. The states are then then
possible assignments of values to these variables.
What does it mean to shift from a representation (i.e., state space) X to another representation Y ? Roughly speaking, we want to capture at the level of the state space a shift
from, say, feet to meters. Thus, in X distances might be described in terms of feet where
in Y they might be described in terms of meters. We would expect there to be a constraint
relating feet to meters. This constraint would not give any extra information about X; it
would just relate worlds in X to worlds in Y . Thus, we first attempt to capture representation independence somewhat indirectly, by requiring that adding constraints relating X to
Y that place no constraints on X itself should not result in different conclusions about X.
The resulting notion, called robustness, turns out to be surprisingly strong. We can show
that every robust inference procedure must behave essentially like logical entailment.
We then try to define representation independence more directly, by using a mapping f
from one representation to another. For example, f could map a world where an individual
is 6 feet tall to the corresponding world where the individual is 1.83 meters tall. Some
obvious constraints on f are necessary to ensure that it corresponds to our intuition of a
representation shift. We can then define a representation-independent inference procedure
as one that preserves inferences under every legitimate mapping f ; i.e., for any KB and ,
KB |  iff f (KB ) | f ().
This definition turns out to be somewhat more reasonable than our first attempt, in that
there exist nontrivial representation-independent inference procedures. However, it is still
a strong notion. In particular, any representation-independent inference procedure must
act essentially like logical entailment for a knowledge base with only objective information
(i.e., essentially non-probabilistic information). Moreover, we show that representation
independence is incompatible with even the simplest default assumption of independence.
Even if we are told nothing about the propositions p and q, representation independence
does not allow us to jump to the conclusion that p and q are independent.
These results suggest that if we want inference procedures that are capable of jumping
to nontrivial conclusions, then we must accept at least some degree of representation de321

fiHalpern & Koller

pendence. They add support to the claim that the choice of language does carry a great
deal of information, and that complete representation independence is too much to expect.
On a more positive note, we show that we can use the intuition that the choice of language
carries information to get limited forms of representation independence. The idea is that the
language should put further constraints on what counts as an appropriate representation
shift. For example, suppose that certain propositions represent colors while others represent
birds. While we may be willing to transform colorful to red  blue  green, we may not be
willing to transform red to sparrow . There is no reason to demand that an inference procedure behave the same way if we suddenly shift to a wildly inappropriate representation,
where the symbols mean something completely different. We provide a general approach to
constructing inference procedures that are invariant under a specific class of representation
shifts. This construction allows us to combine some degree of representation independence
with certain non-deductive properties that we want of our inference procedure. In particular, we present an inference method that supports a default assumption of independence,
and yet is invariant under a natural class of representation shifts.
The rest of this paper is organized as follows. In Section 2, we define probabilistic inference procedures and characterize them. In Section 3, we define robust inference procedures
and show that every robust inference procedure is essentially entailment. In Section 4, we
define representation independence, and show that representation independence is a very
strong requirement. In particular, we show that a representation-independent inference
procedure essentially acts like logical entailment on objective knowledge bases and that
representation independence is incompatible with a default assumption of independence.
Section 5 contains some general discussion of the notion of representation independence
and how reasonable it is to assume that the choice of language should affect inference.
While it may indeed seem reasonable to assume that the choice of language should affect
inference, we point out that this assumption has some consequences that some might view
as unfortunate. In Section 6, we discuss how limited forms of representation independence
can be achieved. We discuss related work in Section 7, and conclude in Section 8.

2. Probabilistic Inference
We begin by defining probabilistic inference procedures. As we discussed in the introduction,
there are two quite different ways in which this term is used. In one, we are given a prior
distribution over some probability space; our knowledge then typically consists of events
in that space, which can be used to condition that distribution and obtain a posterior. In
the other, which is the focus of our work, a probabilistic inference procedure takes as input
a probabilistic knowledge base and returns a probabilistic conclusion.
We take both the knowledge base and the conclusion to be assertions about the probabilities of events in some measurable space (X, FX ), where a measurable space consists of a
set X and an algebra FX of subsets of X (that is, FX is a set of subsets of X closed under
union and complementation, containing X itself).2 Formally, these assertions can be viewed
as statements about (or constraints on) probability measures on (X, FX ). For example, if
2. If X is infinite, we may want to consider countably-additive probability measures and take FX to be
closed under countable unions. This issue does not play significant role in this paper. For simplicity, we
restrict to finite additivity and require only that FX be closed under finite unions.

322

fiRepresentation Dependence

S  FX , a statement Pr(S)  2/3 holds only for distributions where S has probability
at least 2/3. Therefore, if (X,FX ) is the set of all probability measures on (X, FX ) (that
is, all probability measures with domain FX ), we can view a knowledge base as a set of
constraints on (X,FX ) . When FX is clear from context, we often omit it from the notation,
writing X rather than (X,FX ) .
We place very few restrictions on the language used to express the constraints. We
assume that it includes assertions of the form Pr(S)   for all subsets S  FX and rational
  [0, 1], and that it is closed under conjunction and negation, so that if KB and KB 0 are
knowledge bases expressing constraints, then so are KB  KB 0 and KB . (However, the
langauge could include many assertions besides those obtained by starting with assertions
of the form Pr(S)   and closing off under conjunction and negation.) Since the language
puts constraints on probability measures, we cannot directly say that S  FX must hold.
The closest approximation in the language is the assertion Pr(S) = 1. Thus, we call such
constraints objective. A knowledge base consisting of only objective constraints is called an
objective knowledge base. Since Pr(T1 ) = 1  Pr(T2 ) = 1 is equivalent to Pr(T1  T2 ) = 1,
without loss of generality, an objective knowledge base consists of a single constraint of the
form Pr(T ) = 1. Given a knowledge base KB placing constraints on X , we write  |= KB
if  is a measure in X that satisfies the constraints in KB . We use [[KB ]]X to denote all
the measures satisfying these constraints.
In practice, our knowledge is typically represented syntactically, using some logical language to describe the possible states. Typical languages include propositional logic, firstorder logic, or a language describing the values for some set of random variables. In general,
a base logic L defines a set of formulas L() for a given vocabulary . In propositional
logic, the vocabulary  is simply a set of propositional symbols. In probability theory, the
vocabulary can consist of a set of random variables. In first-order logic, the vocabulary is a
set of constant symbols, function symbols, and predicate symbols. To facilitate comparison
between vocabularies, we assume that for each base logic all the vocabularies are finite
subsets of one fixed infinite vocabulary  .
When working with a language, we assume that each state in the state space defines
an interpretation for the symbols in  and hence for the formulas in L(). In the case of
propositional logic, we thus assume that we can associate with each state a truth assignment
to the primitive propositions in . For first-order logic, we assume that we can associate
with each state a domain and an interpretation of the symbols in . In the probabilistic
setting, we assume that we can associate with each state an assignment of values to the
random variables. It is often convenient to assume that the state space is in fact some
subset W of W(), the set of all interpretations for (or assignments to) the vocabulary .
Note that the truth of any formula  in L() is determined by a state. If  is true in some
state w, we write w |= .
The probabilistic extension Lpr () of a base logic L() is simply the set of probability
formulas over L(). Formally, for each   L(), Pr() is a numeric term. The formulas in
Lpr () are defined to be all the Boolean combinations of arithmetic expressions involving
numeric terms. For example, Pr(fly | bird )  1/2 is a formula in Lpr ({fly, bird }) (where
we interpret a conditional probability expression Pr( | ) as Pr(  )/ Pr() and then
multiply to clear the denominator). By analogy with constraints, a formula of the form
Pr() = 1 is called an objective formula.
323

fiHalpern & Koller

Given a set W  W(), assume that FW is the algebra consisting of all sets of the
form [[]]W = {w : w |= }, for   L(). (In the case of propositional logic, where 
consists of a finite set of primitive propositions, FW = 2W . In the case of first-order logic,
not all sets are necessarily definable by formulas, so FW may be a strict subset of 2W .)
Let  be a probability measure on (W, FW ). We can then ascribe semantics to Lpr () in
the probability space (W, FW , ) in a straightforward way. In particular, we interpret the
numeric term Pr() as ({w  W : w |= }). Since a formula   L() describes an event
in the space W , a formula  in Lpr () is clearly a constraint on measures on W . We write
 |=  if the measure   W satisfies the formula .
A syntactic knowledge base KB  Lpr () can be viewed as a constraint on W in an
obvious way. Formally, KB represents the set of probability measures [[KB ]]  W , which
consists of all measures  on W such that  |= KB .
We say that KB (whether syntactic or semantic) is consistent if [[KB ]]X 6= , i.e., if
the constraints are satisfiable. Finally, we say that KB entails  (where  is another set of
constraints on X ), written KB |=X , if [[KB ]]X  [[]]X , i.e., if every measure that satisfies
KB also satisfies . We write |=X  if  is satisfied by every measure in X . We omit the
subscript X from |= if it is clear from context.
Entailment is well-known to be to be a very weak method of drawing conclusions from
a knowledge base, in particular with respect to its treatment of irrelevant information.
Consider the knowledge base consisting only of the constraint Pr(fly | bird )  0.9. Even
though we know nothing to suggest that red is at all relevant, entailment will not allow us
to reach any nontrivial conclusion about Pr(fly | bird  red ).
One way to get more powerful conclusions is to consider, not all the measures that satisfy
KB , but a subset of them. Intuitively, given a knowledge base KB , an inference procedure
picks a subset of the measures satisfying KB , and infers  if  holds in this subset. Clearly,
more conclusions hold for every measure in the subset than hold for every measure in the
entire set.
Definition 2.1 : An (X, FX )-inference procedure is a partial function I : 2(X,FX ) 7
2(X,FX ) such that I(A)  A for A  (X,FX ) and I(A) =  iff A =  for all A  2(X,FX ) in
the domain of I (i.e., for all A for which I is defined). We write KB |I  if I([[KB ]]X )  [[]]X .
When FX is clear from context or irrelevant, we often speak of X-inference procedures.
We remark that Paris (1994) considers what he calls inference processes. These are just
inference procedures as we have defined them that, given a a set A of probability measures,
return a unique probability measure in A (rather than an arbitrary subset of A). Paris
gives a number of examples of inference processes. He also considers various properties that
an inference process might have. Some of these are closely related to various properties of
representation indepedence that we consider. We discuss Pariss work in Section 7.
Entailment is the X-inference procedure defined on all sets determined by taking I to
be the identity. Maximum entropy is also an inference procedure in this sense.
Definition 2.2: Given a probability measure  on a finite space X (where all sets are
P
measurable), its entropy H() is defined as  xX (x) log (x). (The log is taken to the
me (A) consist of the measures in A
base 2 here.) Given a set A of measures in X , let IX
324

fiRepresentation Dependence

that have the highest entropy if there are measures in A whose entropy is at least as high
as that of any measure in A; if there are no such measures, inf me (A) is undefined.
It is easy to see that inf me (A) is defined if A is closed (in the topological sense; i.e., if
n is a sequence of probability measures in A and n converges to , then   A). Thus,
we could take the domain of inf me
X to consist only of the closed sets of measures in X .
There are also open sets A for which inf me (A) is defined, although it is not defined for all
open sets A. For example, suppose X = {x1 , x2 } and let A = { : (x1 ) < 1/2}. Let 0
be such that 0 (x1 ) = 1/2. It is easy to check that H(0 ) = 1, and H() < 1 for   A.
However, for all , there is some   A such that H() > 1  . It follows that there is no
measure in A whose entropy is higher than that of any other measure in A, so inf me (A) is
undefined. On the other hand, if A0 = { : (x1 ) < 2/3}, then there is a measure whose
entropy is maximum in the open set A0 , namely the measure 0 .
There are, of course, many inference procedures besides entailment and maximum entropy that can be defined on a measurable space. In fact, as the following proposition shows,
any binary relation | satisfying certain reasonable properties is an inference procedure of
this type.
Proposition 2.3: If I is an X-inference procedure then the following properties hold for
every KB , KB 0 , ,  over X such that KB is in the domain of I.
 Reflexivity: KB |I KB .
 Left Logical Equivalence: if KB is logically equivalent to KB 0 , i.e., if |= KB  KB 0 ,
then for every  KB |I  iff KB 0 |I .
 Right Weakening: if KB |I  and |=    then KB |I .
 And: if KB |I  and KB |I , then KB |I   .
 Consistency: if KB is consistent then KB |6I false.
Proof: Straightforward from the definitions.
Interestingly, these properties are commonly viewed as part of a core of reasonable
properties for a nonmonotonic inference relation (Kraus, Lehmann, & Magidor, 1990).
We would like to also prove a converse, showing that any relation | over probabilistic
constraints on some space X that satisfies the five properties above must have the form
|IX . This is not quite true, as the following example shows.
Example 2.4: Fix a measurable space (X, FX ). Let the language consist of all (finite)
Boolean combination of statements of the form Pr(S)  , where S  FX . Now fix one
nonempty strict subset S0 of X, and let n be the statement Pr(S0 )  1/n. Define an
inference procedure | as follows. If KB is not equivalent to true (i.e, if [[KB ]]X 6= X ),
then KB |  iff KB |= . On the other hand, true |  iff n |=  for all sufficiently large
n. That is, true |  if there exists an N such that for all n  N , we have n |= . It is
easy to check that all five properties in Proposition 2.3 hold for |. However, | is not |I
for an X-inference procedure I. For suppose it were. Note that n |= m for all n  m,
325

fiHalpern & Koller

so true | m for all m. Thus, we must have I(X )  [[n ]]X for all n. It follows that
IX (X )  [[Pr(S0 ) = 0]]X , and so true |I Pr(S0 ) = 0. However, n 6|= Pr(S) = 0 for any n,
so we do not have true | Pr(S) = 0. This contradicts the assumption that | = |I .
Essentially what we need to get the converse to Proposition 2.3 is an infinitary version of
V
the And Rule, which would say that if KB |I i for all i, then KB |I i i . If the language
were closed under infinite conjunctions, then this rule would in fact be just what we need.
Since we have not assumed that the language is closed under infinite conjunctions, we use
a variant of this rule.
 Infinitary And: For any set  of statements, if KB |I  for all    and  |= ,
then KB |I .
Proposition 2.5: Let | be a relation over probabilistic constraints on X for which the
properties Reflexivity, Left Logical Equivalence, Right Weakening, Infinitary And, and Consistency hold for all KB in the domain of | . (That is, if KB is in the domain of | in
that KB |  for some , then KB | KB , and so on.) Then | is |I for some X-inference
procedure I.
Proof: See Appendix A.1.
We are typically interested not just in an inference procedure defined on one space X,
but in a family of related inference procedures, defined on a number of spaces. For example,
entailment is an inference procedure that is defined on all spaces X; maximum entropy is
defined on all finite measurable spaces (X, 2X ).
Definition 2.6 : If X is a set of measurable spaces, an X -inference procedure is a set
{I(X,FX ) : (X, FX )  X }, where I(X,FX ) is an (X, FX )-inference procedure for (X, FX )  X .
We sometimes talk about an X -inference procedure I, and write KB |I  when (X, FX ) 
X is clear from context. However, it should be stressed that, formally, an X -inference procedure is a really a set of inference procedures (typically related in some natural way).
Clearly entailment is an X -inference procedure for any X , where IX is simply the identity
function for X  X . If X consists of finite measurable spaces where all sets are measurable,
then maximum entropy is an X -inference procedure. We typically denote this inference
procedure | me . Thus, KB | me  if  holds for all the probability measures of maximum
entropy satisfying KB .
Important assumptions: For the remainder of this paper, we deal only with X inference procedures I for which X satisfies two richness assumptions. These assumptions
hold for all the standard inference procedures that have been considered.
 We assume that X is closed under crossproducts, so that if (X, FX ), (Y, FY )  X ,
then (X  Y, FXY )  X , where FXY is the algebra formed by taking finite unions
of disjoint sets of the form S  T , for S  FX and T  FY . It is easy to see that
this is an algebra, since S  T = S  T  S  T  S  T and (S  T )  (S 0  T 0 ) =
(S  S 0 )  (T  T 0 ) (from which it also follows that any union of such sets can be
326

fiRepresentation Dependence

written as a disjoint union). Note that if X and Y are finite sets, FX = 2X , and
FY = 2Y , then FX  FY = 2XY . As we shall see, having (X  Y, FXY )  X if each
of (X, FX ) and (Y, FY ) is in X allows us to relate constraints on X to constraints on
Y in a natural way.
 We assume that X contain sets of all finite cardinalities; more precisely, for all n  2,
there exists a set (X, FX )  X such that |X| = n and FX = 2X . This assumption
is not actually needed for any of our results, since the assumption that X is closed
under crossproducts already implies that, for any finite n, there exists a measurable
space (X, FX )  X such that |X|  n; this already suffices to prove all the results
of the paper. However, assuming that X has sets of all cardinalities does make the
proofs easier.
We also want the domain of I to satisfy certain assumptions, but we defer stating these
assumptions until we have introduced some additional definitions and notation.

3. Robustness
In order to define robustness to representation shifts, we must first define the notion of
a representation shift. Our first attempt at this definition is based on the idea of using
constraints that specify the relationship between the two vocabularies. For example, in Example 1.1, we might have X = {colorful , colorless} and Y = {red , blue, green, colorless}. We
can specify the relationship between X and Y via a constraint that asserts that colorful 
(red  blue  green).
Of course, not every constraint is a legitimate mapping between representations. For
example, a formula that asserted colorful is obviously not a legitimate representation
shift. At a minimum, we must assume that the constraint does not give any additional
information about X as far as logical inference goes. At a syntactic level, we can use the
following definition. Given a knowledge base KB  Lpr (), we say that   Lpr (  0 ) is
-conservative over KB if, for all formulas   Lpr (), we have KB |=  iff KB   |= .
Thus, adding  to the knowledge base does not permit any additional logical inferences
in the vocabulary . An inference procedure I is robust if it is unaffected by conservative
extensions; that is, if KB ,   Lpr (), then KB |I  iff KB   |I  for all  that are
-conservative over KB . Roughly speaking, this says that getting new information that is
uninformative as far as logical inference goes does not affect default conclusions.
The formal definition of robustness, which uses semantic rather than syntactic concepts,
extends these intuitions to arbitrary constraints on measures (not just ones that can be
expressed in the language Lpr ).
Definition 3.1: For   X1 ...Xn , define Xi  Xi by taking Xi (A) = (X1     
Xi1  A  Xi+1      Xn ). A constraint  on Xi can be viewed as a constraint on
X1 ...Xn by taking [[]]X1 ...Xn = {  X1 ...Xn : Xi |= }. We frequently identify
constraints on Xi with constraints on X1  . . .  Xn in this way. For B  X1 Xn , define
proj Xi (B) = {Xi :   B}. A constraint  on X1 Xn is said to be Xi -conservative
over the constraint KB on Xi if proj Xi ([[KB  ]]X1 Xn ) = [[KB ]]Xi .
327

fiHalpern & Koller

To see that this definition generalizes the earlier language-oriented definition, note that
if  and KB are constraints on X and  is a constraint on XY , then KB   |=  iff
proj 1 ([[KB  ]]XY )  [[]]X , while KB |=  iff [[KB ]]X  [[]]X .
Definition 3.2: {IX : X  X } is a robust X -inference procedure if for all spaces X, Y  X ,
constraints KB and  on X , and constraints  on XY that are X-conservative over
KB , we have KB |IX  iff KB   |IXY . (Note that this definition implicitly assumes
that X  Y  X if X, Y  X , an assumption we made explicit earlier.)
At first glance, robustness might seem like a reasonable desideratum. After all, why
should adding a constraint on XY that places no restrictions on X change the conclusions that we might reach about X? Unfortunately, it turns out that this definition
is deceptively strong, and disallows any interesting inference procedures. In particular,
one property we may hope for in an inference procedure is to draw nontrivial conclusions
about probabilities of events, that is, conclusions that do not follow from entailment. For
example, maximum entropy (or any inference procedure based on symmetry) will conclude
Pr(p) = 1/2 from the empty knowledge base. We can show that inference procedures
that are robust do not really allow much in the way of nontrivial conclusions about the
probabilities of events.
Definition 3.3: An (X, FX )-inference procedure I is essentially entailment for the knowledge base KB  X if for all S  FX , if KB |I  < Pr(S) <  then KB |=   Pr(S)  .
I is essentially entailment for X if it is essentially entailment for all knowledge bases KB
in the domain of IX .
Thus, when entailment lets us conclude Pr(S)  [, ], an inference procedure that is
essentially entailment lets us draw only the slightly stronger conclusion Pr(S)  (, ). To
prove this, we need to make three assumptions about the domain of I. (For other results,
we need other assumptions about the domain of I.)
DI1.   Pr(S)   is in the domain of I(X,FX ) for all S  FX , ,   IR.
DI2. If KB is in the domain of IX , then it is also in the domain of IXY (when KB is
viewed as a constraint on XY .)
DI3. If KB 1 and KB 2 are in the domain of IX , then so is KB 1  KB 2 .
Note that sets of the form   Pr(S)   are closed sets. It certainly seems reasonable
to require that such sets be in the domain of an inference procedure; they correspond to
the most basic observations. DI2 seems quite innocuous; as observed earlier, we do want
to be able to view constraints on X as constraints on XY , and doing so should not
prevent them from being in the domain of I. DI3 also seems to be a reasonable assumption,
since if KB 1 and KB 2 correspond to possible observations, we want to be able to draw
conclusions from combining the observations. DI3 holds if the domain of I consists of
closed sets. But note that it does not hold for I me if we take its domain to consist of
all sets that have a measure whose entropy is maximum. For example, if X = {x1 , x2 },
A = {0 }  { : (x1 ) > 3/4}, and B = { : (x1 )  2/3}, where 0 (x0 ) = 1/2, then each
of A and B have a measure whose entropy is maximum, but A  B does not have a measure
whose entropy is maximum.
328

fiRepresentation Dependence

Theorem 3.4: If {IX : X  X } is a robust X -inference procedure that satisfies DI1, DI2,
and DI3, then IX is essentially entailment for all X  X .
Proof: See Appendix A.2.
It is possible to construct robust inference procedures that are almost but not quite
entailment, simply by strengthening some conclusions from Pr(S)  [, ] to Pr(S) 
(, ). Clearly, however, any robust inference procedure is extremely limited in its ability
to jump to conclusions. In the next section, we look at a definition that seems closer to
the intuitive notion of representation independence, and has somewhat more reasonable
consequences.

4. Representation Independence
4.1 Representation shifts
If X and Y are two different representations of the same phenomena then, intuitively,
there should be a way of relating states in X to corresponding states in Y . We want this
correspondence to respect the logical structure of events. Formally, we require that it be a
homomorphism with respect to complementation and intersection.
Definition 4.1: An (X, FX )-(Y, FY ) embedding f is a function f : FX 7 FY such that
f (S  T ) = f (S)  f (T ) and f (S) = f (S) for all S, T  FX .
As elsewhere, we talk about X-Y embeddings rather than (X, FX )-(Y, FY ) embeddings if
FX and FY do not play a significant role.
Our goal is to consider the effect of a transformation on probabilistic formulas. Hence,
we are interested in sets of states and their probabilities.
Definition 4.2: If f is an X-Y embedding,   X , and   Y , then  and  correspond
under f if (S) = (f (S)) for all events S  FX . We define a mapping f  : 2X 7 2Y as
follows. We first define f  on singleton sets (except that, for convenience, we write f  ()
rather than f  ({}) by taking f  () = {  Y : (f (S)) = (S) for all S  FX }. Thus,
f  () consists of all measures in Y that correspond to  under f . If D is an arbitrary
subset of 2X , define f  (D) = D f  () for D  X .
If  is a constraint on X expressed in some language, we typically write f  () rather than
f  ([[]]X ). We implicitly assume that the language is such that the constraint f  () is also
expressible. It is not hard to see that f  () is the constraint that results by replacing every
set S  FX that appears in  by f (S).
Example 4.3: In Example 1.1, we might have X = {colorful , colorless} and Y = {red , blue,
green, colorless}. In this case, we might have f (colorful ) = {red , blue, green} and f (colorless) =
{colorless}. Consider the measure   X such that (colorful ) = 0.7 and (colorless) =
0.3. Then f  () is the set of measures  such that the total probability assigned to the set of
states {red , blue, green} by  is 0.7. Note that there are uncountably many such measures.
It is easy to check that if  is a constraint on X such as Pr(colorful ) > 3/4, then f  () is
Pr({red , blue, green}) > 3/4.
329

fiHalpern & Koller

Embeddings can be viewed as the semantic analogue to the syntactic notion of interpretation defined in (Enderton, 1972, pp. 157162), which has also been used in the recent
literature on abstraction (Giunchiglia & Walsh, 1992; Nayak & Levy, 1995). Essentially,
an interpretation maps formulas in a vocabulary  to formulas in a different vocabulary
 by mapping the primitive propositions in  (e.g., colorful ) to formulas over  (e.g.,
red  blue  green) and then extending to complex formulas in the obvious way. The representation shift in Example 1.2 can also be captured in terms of an interpretation, this one
taking flying-bird to fly  bird .
Definition 4.4: Let  and  be two vocabularies. In the propositional case, a interpretation of  into  is a function i that associates with every primitive proposition p  
a formula i(p)  L(). A more complex definition in the same spirit applies to first-order
vocabularies. For example, if R is a k-ary predicate, then i(R) is a formula with k free
variables.
Given an interpretation i, we get a syntactic translation from formulas in L() to formulas
in L() using i in the obvious way; for example, i((p  q)  r) = (i(p)  i(q))  i(r)
(see (Enderton, 1972) for the details). Clearly an interpretation i from  to  induces an
embedding f from W1  W() to W2  W(): we map [[]]W1 to [[i()]]W2 .
Of course, not all embeddings count as legitimate representation shifts. For example,
consider an embedding f defined in terms of an interpretation that maps both the propositions p and q to the proposition r. Then the process of changing representations using
f gives us the information that p and q are equivalent, information that we might not
have had originally. Intuitively, f gives us new information by telling us that a certain
situationthat where p  q holdsis not possible.
More formally, the embedding f
has the following undesirable property: it maps the set of states satisfying p  q to the
empty set. This means a state where p  q holds does not have an analogue in the new
representation. We want to disallow such embeddings.
Definition 4.5: An X-Y embedding f is faithful if, for all S, T  FX , we have S  T iff
f (S)  f (T ).
This definition has the desired consequence of disallowing embeddings that give new
information as far as logical consequence goes.
Lemma 4.6: An X-Y embedding f is faithful if and only if for all constraints KB and ,
we have KB |=  iff f  (KB ) |= f  ().
Proof: See Appendix A.3.
It is clear that our embedding from Example 4.3 is faithful: f (colorful ) = {red , blue, green}
and f (colorless) = colorless. The following proposition gives further insight into faithful
embeddings.
Proposition 4.7: Let f be a faithful X-Y embedding. Then the following statements are
equivalent:
(a)  and  correspond under f ;
330

fiRepresentation Dependence

(b) for all formulas ,  |=  iff  |= f  ().
Proof: See Appendix A.3.
If the embedding f is a reasonable representation shift, we would like an inference
procedure to return the same answers if we shift representations using f .
Definition 4.8: If X, Y  X , then the X -inference procedure {IX : X  X } is invariant
under the X-Y embedding f if for all constraints KB and  on X , we have KB |IX  iff
f  (KB ) |IY f  (). (Note that, in particular, this means that KB is in the domain of | IX
iff f  (KB ) is in the domain of | IY .)
Definition 4.9: The X -inference procedure {IX : X  X } is representation independent if
it is invariant under all faithful X-Y embeddings for all X, Y  X .
Since the embedding for Example 4.3 is faithful, any representation-independent inference procedure would return the same answers for Pr(colorful ) as for Pr(red  blue  green).
The issue is somewhat more subtle for Example 1.2. There, we would like to have an embedding f generated by the interpretation i(flying-bird ) = fly  bird and i(bird ) = bird .
This is not a faithful embedding, since flying-bird  bird is not a valid formula, while
i(flying-bird  bird ) is (fly  bird )  bird which is valid. Looking at this problem semantically, we see that the state corresponding to the model where flying-bird  bird holds is
mapped to . But this is clearly the source of the problem. According to our linguistic intuitions for this domain, this is not a legitimate state. Rather than considering all the states
in W({flying-bird , bird }), it is perhaps more appropriate to consider the subset X consisting of the truth assignments characterized by the formulas {flying-bird  bird , flying-bird 
bird , flying-bird  bird }. If we now use i to embed X into W({fly, bird }), the resulting embedding is indeed faithful. So, as for the previous example, invariance under this
embedding would guarantee that we get the same answers under both representations.
4.2 Representation-independent inference procedures
Although the definition of representation independence seems natural, so did the definition
of robustness. How do the two definitions relate to each other? First, we show that representation independence is a weaker notion than robustness. For this result, we need to
consider inference procedures that satisfy two further assumptions.
DI4. If f is a faithful X-Y embedding, then KB is in the domain of IX iff f  (KB ) is in the
domain of IY .
DI5. If KB is in the domain of IXY , f is a faithful X-Y embedding, and 1 is a constraint
on X , then KB  (1  f  (1 )) is in the domain of IXY .
DI4 is very natural and is satisfied by all the standard inference procedures. It is easy to
check that if KB is closed iff f  (KB ) is closed. While DI5 may not appear so natural, it
does hold for domains consisting of closed sets, since it is not hard to check that   f  (1 )
is closed. DI5 would follow from DI3 and the assumption that   f  (1 ) is in the domain
of IXY , but it is actually weaker than the combination of these two assumptions. In
particular, it holds for the domain consisting of all sets on which there is a measure of
maximum entropy.
331

fiHalpern & Koller

Theorem 4.10: If an X -inference procedure is robust that satisfies DI2, DI4, and DI5,
then it is representation independent.
Proof: See Appendix A.3.
We have already shown that any robust inference procedure must be almost trivial. Are
there any interesting representation-independent inference procedures? As we shall see, the
answer is mixed. There are nontrivial representation-independent inference procedures, but
they are not very interesting.
Our first result shows that representation independence, like robustness, trivializes the
inference procedure, but only for some knowledge bases.
Theorem 4.11: If {IX : X  X } is a representation-independent X -inference procedure
then, for all X  X , IX is essentially entailment for all objective knowledge bases in its
domain.3
Proof: See Appendix A.3.
Corollary 4.12: If {IX : X  X } is a representation-independent X -inference procedure,
KB is objective, and KB |I  < Pr(S) <  for some   0 and   1, then  = 0 and
 = 1.
This result tells us that from an objective knowledge base Pr(T ) = 1, we can reach only
three possible conclusions about a set S. If T  S, then we can conclude that Pr(S) = 1;
if T  S, then we can conclude that Pr(S) = 0; otherwise, the strongest conclusion we can
make about Pr(S) is that is somewhere between 0 and 1.
We can construct a representation-independent inference procedure that is not entailment and has precisely this behavior if we restrict attention to countable state spaces. Suppose that X is countable. Given an objective knowledge base KB of the form Pr(T ) = 1,
where T  FX , let KB + consist of all formulas of the form 0 < Pr(S) < 1 for for
all nonempty strict subsets S of T in FX .4 We now define an X-inference procedure
0 as follows: If KB is equivalent to an objective knowledge base, then KB |  if
IX
I0
KB  KB + |= ; if KB is not equivalent to an objective knowledge base, then KB |I 0  if
0 is indeed an inference procedure.
KB |= . It follows easily from Proposition 2.5 that IX
Moreover, it is not equivalent to the standard notion of entailment; for example, we have
true |I 0 0 < Pr(p) < 1, while 6|=0 < Pr(p) < 1. Nevertheless, we can prove that I 0 is
representation independent.
0 : X  X } is a representationLemma 4.13: Let X consist of only countable sets. Then {IX
independent X -inference procedure.

3. In an earlier version of this paper (Halpern & Koller, 1995), we claimed that any representationindependent inference procedure that satisfied a minimal irrelevance property (implied by robustness,
but not equivalent to it) is essentially entailment for all knowledge bases. As Jaeger (1996) shows, an
inference procedure along the lines of I 1 described below can be constructed to show that this result is
not correct. We seem to need the full strength of robustness.
4. The requirement that X be countable is necessary here. If X is uncountable and every singleton is in FX ,
then KB + is inconsistent if both T and T are uncountable. It is impossible that each of an uncountable
collection of points has positive measure.

332

fiRepresentation Dependence

Proof: See Appendix A.3.
While objective knowledge bases may not appear so interesting if we restrict to propositional languages, for languages that include first-order and statistical information they
become quite interesting. Indeed, as shown in (Bacchus, 1990; Bacchus, Grove, Halpern, &
Koller, 1996), knowledge bases with first-order and (objective) statistical information allow
us to express a great deal of the information that we naturally encounter. For example, we
can express the fact that 90% of birds fly as an objective statement about the number of
flying birds in our domain relative to the overall number of birds. Of course, Theorem 4.11
applies immediately to such knowledge bases.
Theorem 4.11 also implies that various inference procedures cannot be representation
independent. In particular, since true | me Pr(p) = 1/2 for a primitive proposition p, it
follows that maximum entropy is not essentially entailment. This observation provides
another proof that maximum entropy is not representation independent.
It is consistent with Theorem 4.11 that there are representation-independent inference
procedures that are not almost entailment for probabilistic knowledge bases. For example,
1 defined as follows. Given A   , if there exists
consider the X-inference procedure IX
X
1 (A) = {   : (S)  1/3};
some S  FX such that A = {  X : (S)  1/4}, then IX
X
1 (A) = A. Thus, Pr(S)  1/4 | Pr(S)  1/3. Clearly, I 1 is not essentially
otherwise, IX
X
I1
entailment. Yet, we can prove the following result.

Lemma 4.14: Suppose that X consists only of measure spaces of the form (X, 2X ), where
1 : X  X } is a representation-independent X -inference procedure.
X is finite. Then {IX

Proof: See Appendix A.3.
Note that it follows from Theorem 3.4 that I 1 cannot be robust. Thus, we have shown
that representation independence is a strictly weaker notion than robustness.
This example might lead us to believe that there are representation-independent inference procedures that are interesting for probabilistic knowledge bases. However, as we
now show, a representation-independent inference procedure cannot satisfy one key desideratum: the ability to conclude independence by default. For example, an important feature of
the maximum-entropy approach to nonmononotic reasoning (Goldszmidt, Morris, & Pearl,
1993) has been its ability to ignore irrelevant information, by implicitly assuming independence. Of course, maximum entropy does not satisfy representation independence.
Our result shows that no approach to probabilistic reasoning can simultaneously assure
representation independence and a default assumption of independence.
We do not try to give a general notion of default assumption of independence here,
since we do not need it for our result. Rather, we give a minimal property that we would
hope an inference procedure might have, and show that this property is sufficient to preclude
representation independence. Syntactically, the property we want is that if  and  are
disjoint vocabularies, KB  Lpr (),   L(), and   L(), then KB |I Pr(  ) =
Pr()  Pr().
333

fiHalpern & Koller

Definition 4.15: An X -inference procedure {IX : X  X } enforces minimal default independence if, whenever X and Y are in X , KB is a constraint on X in the domain of |IX ,
S  FX , and T  FY , then KB |IXY Pr(S  T ) = Pr(S)  Pr(T ).5
This definition clearly generalizes the syntactic definition.
Clearly, entailment does not satisfy minimal default independence. Maximum entropy,
however, does. Indeed, a semantic property that implies minimal default independence is
used by Shore and Johnson (1980) as one of the axioms in an axiomatic characterization of
maximum-entropy.
Theorem 4.16: If {IX : X  X } is an X -inference procedure that enforces minimal default
independence and satisfies DI1, then IX is not representation independent.
Proof: See Appendix A.3.
This result is very interesting as far as irrelevance is concerned. We might hope that
learning irrelevant information does not affect our conclusions. While we do not attempt
to define irrelevance here, certainly we would expect that if KB 0 is in a vocabulary disjoint
from KB and , then, for example, KB |I Pr() =  iff KB  KB 0 |I Pr() = . If KB 0
is objective, then the standard probabilistic approach would be to identify learning KB 0
with conditioning on KB 0 . Suppose that we restrict to inference procedures that do indeed
condition on objective information (as is the case for the class of inference procedures we
consider in Section 6). Then KB  KB 0 |I Pr() =  exactly if KB |I Pr( | KB 0 ) = .
Thus, Theorem 4.16 tells us that inference procedures that condition on new (objective)
information cannot both be representation independent and ignore irrelevant information.
Thus, although representation independence, unlike robustness, does not force us to use
entirely trivial inference procedures, it does prevent us from using procedures that have
certain highly desirable properties.

5. Discussion
These results suggest that any type of representation independence is hard to come by. They
also raise the concern that perhaps our definitions were not quite right. We can provide
what seems to be even more support for the latter point.
Example 5.1: Let Q be a unary predicate and c1 , . . . , c100 , d be constant symbols. Suppose
that we have two vocabularies  = {Q, d} and  = {Q, c1 , . . . , c100 , d}. Consider the
interpretation i from  to  for which i(d) = d and i(Q(x)) = Q(x)  Q(c1 )  . . .  Q(c100 ).
Now, consider KB = xQ(x). In this case, i(KB ) = x(Q(x)  Q(c1 )  . . .  Q(c100 ).
Intuitively, since all the ci s may refer to the same domain element, the only conclusion we
can make with certainty from Q(c1 )  . . .  Q(c100 ) is that there exists at least one Q in the
domain, which gives us no additional information beyond KB . We can convert this example
into a general argument that the embedding f corresponding to i is faithful. Intuitively, for
5. Since we are working in the space X  Y , KB should be viewed as a constraint on XY here, Pr(S)
should be understood as Pr(S  Y ), while Pr(T ) should be understood as Pr(X  T ). Recall that, by
assumption, X  Y  X .

334

fiRepresentation Dependence

any KB , we can only get the conclusion Q(c1 )  . . .  Q(c100 ) from f  (KB ) if Q(x) appears
positively in KB ; but, in this case, we already know that there is at least one Q, so we
gain no new information from the embedding. But it does not seem unreasonable that an
inference procedure should assign different degrees of belief to Q(d) given KB = xQ(x) on
the one hand and given i(KB ) = x(Q(x)  Q(c1 )  . . .  Q(c100 )) on the other,6 particularly
if the domain is small. In fact, many reasoning systems explicitly adopt a unique names
assumption, which would clearly force different conclusions in these two situations.
This example suggests that, at least in the first-order case, even faithful embeddings
do not always match our intuition for a reasonable representation shift. One might
therefore think that perhaps the problem is with our definition even in the propositional
case. Maybe there is a totally different definition of representation independence that avoids
these problems. While this is possible, we do not believe it to be the case. The techniques
that we used to prove Theorem 4.16 and 3.4 seem to apply to any reasonable notion of
representation independence.7 To give the flavor of the type of argument used to prove these
theorems, consider Example 1.1, and assume that true |I Pr(colorful ) =  for   (0, 1).8
Using an embedding g such that g(colorful ) = red , we conclude that true |I Pr(red ) = .
Similarly, we can conclude Pr(blue) =  and Pr(green) = . But in order for |I to be
invariant under our original embedding, we must have true |I Pr(red  blue  green) = ,
which is completely inconsistent with our previous conclusions. But the embeddings we use
in this argument are very natural ones; we would not want a definition of representation
independence that disallowed them.
These results can be viewed as support for the position that representation dependence
is justified; the choice of an appropriate representation encodes significant information. In
particular, it encodes the bias of the knowledge-base designer about the world. Researchers
in machine learning have long realized that bias is an inevitable component of effective
inductive reasoning (i.e., learning from evidence). So we should not be completely surprised
if it turns out that other types of leaping to conclusions (as in our context) also depend on
the bias.
But we need to be a little careful here. For example, in some cases we can identify
the vocabulary (and hence, the representation) with the sensors that an agent has at its
disposal. It may not seem that unreasonable that an agent with a temperature sensor and
a motion sensor might carve up the world differently from an agent with a color sensor
and a distance sensor. But consider two agents with different sensors who have not yet
made any observations. Suppose that both of them can talk about the distance to a tree.
Is it reasonable that the two agents should reach different conclusions about the distance
just because they have different sensors (and thus use different vocabularies), although they
have not made any observations? It would then follow that the agents should change their
conclusions if they switched sensors, despite not having made any observations. This does
not seem so reasonable!
Bias and representation independence can be viewed as two extremes in a spectrum.
If we accept that the knowledge base encodes the users bias, there is no obligation to be
6. Actually, i(Q(d)) = Q(d)  Q(c1 )  . . .  Q(c100 ), but the latter is equivalent to Q(d) given KB .
7. They certainly applied to all of the many definitions that we tried!
8. In fact, it suffices to assume that true |I Pr(colorful )  [, ], as long as  > 0 or  < 1.

335

fiHalpern & Koller

invariant under any representation shifts at all. On the other hand, if we assume that the
representation used carries no information, coherence requires that our inference procedure
give the same answers for all equivalent representations. We believe that the right answer lies somewhere in between. There are typically a number of reasonable ways in which
we can represent our information, and we might want our inference procedure to return
the same conclusions no matter which of these we choose. It thus makes sense to require
that our inference procedure be invariant under embeddings that take us from one reasonable representation to another. But it does not follow that it must be invariant under all
embeddings, or even all embeddings that are syntactically similar to the ones we wish to
allow. We may be willing to refine colorful to red  blue  green or to define flying-bird
as fly  bird , but not to transform red to sparrow . In the next section, we show how to
construct inference procedures that are representation independent under a limited class of
representation shifts.

6. Selective invariance
As discussed above, we want to construct an inference procedure I that is invariant only
under certain embeddings. For the purposes of this section, we restrict attention to finite
spaces, where all sets are measurable. That is, we focus on X -inference procedures where
X consists only of measure spaces of the form (X, 2X ), where X is finite.
Our first step is to understand the conditions under which an X -inference procedure I
is invariant under a specific X-Y embedding f . When do we conclude  from KB  X ?
Recall that an inference procedure IX picks a subset DX = IX (KB ), and concludes  iff 
holds for every measure in DX . Similarly, when applied to f  (KB )  Y , IY picks a subset
DY = IY (f  (KB )). For I to be invariant under f with respect to KB , there has to be a
tight connection between DX and DY .
To understand this connection, first consider a pair of measures  on X and  on Y .
Recall from Proposition 4.7 that  and  correspond under f iff, for all formulas , we have
 |=  iff  |= f  (). To understand how the correspondence extends to sets of probability
measures, consider the following example:
Example 6.1: Consider the embedding f of Example 4.3, and let DX = {, 0 } where 
is as above, and 0 (colorful ) = 0.6. How do we guarantee that we reach the corresponding
conclusions from DX and DY ? Assume, for example, that DY contains some measure 
that does not correspond to either  or 0 , e.g., the measure that assigns probability 1/4
to all four states. In this case, the conclusion Pr(colorful )  0.7 holds in DX , because it
holds for both these measures; but the corresponding conclusion Pr(red blue green)  0.7
does not hold in DY . Therefore, every probability measure in DY must correspond to some
measure in DX . Conversely, every measure in DX must correspond to a measure in DY . For
suppose that there is no measure   DY corresponding to . Then we get the conclusion
Pr(blue  red  green) 6= 0.7 from DY , but the corresponding conclusion Pr(colorful ) 6= 0.7
does not follow from DX . Note that these two conditions do not imply that DY must be
precisely the set of measures corresponding to measures in DX . In particular, we might have
DY containing only a single measure  corresponding to  (and at least one corresponding
to 0 ), e.g., one with (red ) = 0.5, (blue) = 0, (green) = 0.2, and (colorless) = 0.3.
336

fiRepresentation Dependence

Based on this example, we use the following extension to our definition of correspondence.
Definition 6.2: We say that DX and DY correspond under f if for all   DY , there exists
a corresponding   DX (so that (S) = (f (S)) for all S  X), and for all   DX , there
exists a corresponding   DY .
Proposition 6.3: Suppose that f is a faithful X-Y embedding, DX  X , and DY  Y .
The following two conditions are equivalent:
(a) DX and DY correspond under f ;
(b) for all , DX |=  iff DY |= f  ().9
Proof: See Appendix A.4.
To produce an inference procedure that is invariant under some X-Y embedding f ,
we must ensure that for every KB , IX (KB ) and IY (KB ) correspond. At first glance, it
seems rather difficult to guarantee correspondence for every knowledge base. It turns out
that the situation is not that bad. In the remainder of this section, we show how, starting
with a correspondence for the knowledge base truethat is, starting with a correspondence
between IX (X ) and IY (Y )we can bootstrap to a correspondence for all KB s, using
standard probabilistic updating procedures.
First consider the problem of updating with objective information. The standard way
of doing this update is via conditioning. For a measure   X and an event S  X, define
|S to be the measure that assigns probability (w)/(S) to every w  S, and zero to all
other states. For a set of measures DX  X , define DX |S to be {|S :   DX }. The
following result is easy to show.
Proposition 6.4: Let S  X be an event and let f be a faithful X-Y embedding. If  and
 correspond under f , then |S and |f (S) also correspond under f .
Proof: Almost immediate from the definitions; left to the reader. (In any case, note that
this result follows from Theorem 6.4 below.)
Clearly, the result extends to sets of measures.
Corollary 6.5: If f is a faithful X-Y embedding, and DX and DY correspond under f ,
then DX |S and DY |f (S) also correspond under f .
What if we want to update on a constraint that is not objective? The standard extension
of conditioning to this case is via relative entropy or KL-divergence (Kullback & Leibler,
1951).
9. While (a) implies (b) for arbitrary spaces, the implication from (b) to (a) depends on the restriction to
finite spaces made in this section. For suppose that X is the natural numbers N , f is the identity, DX
consists of all probability measures on N , and DY consists of all measures but that measure 0 such
that 0 (n) = 1/2n+1 . If the language consists of finite Boolean combinations of assertions of the form
Pr(S)  , for S  N , then it is easy to see that DX |=  iff DY |=  for all formulas , but clearly DX
and DY do not correspond under the identity map.

337

fiHalpern & Koller

Definition 6.6: If  and 0 are measures on X, the relative entropy between 0 and ,
P
denoted KLX (0 k), is defined as xX 0 (x) log(0 (x)/(x)). For a measure  on X and
a constraint , let | denote the set of measures 0 satisfying  for which KLX (0 k) is
minimal.
Intuitively, the KL-divergence measures the distance from 0 to . A measure 0 satisfying  for which KLX (0 k) is minimal can be thought of as the closest measure to
 that satisfies . If  denotes an objective constraint, then the unique measure satisfying  for which KLX (0 k) is minimal is the conditional measure | (Kullback & Leibler,
1951). (That is why we have deliberately used the same notation here as for conditioning.)
Moreover, it is easy to show that KLX (0 k) = 0 iff 0 = . It follows that if   , then
| = .
Given a set of measure DX  X and a constraint  on X , define DX | to be DX |.
We can now apply a well-known result (see, e.g., (Seidenfeld, 1987)) to generalize Proposition 6.4 to the case of relative entropy.
Theorem 6.7: Let  be an arbitrary constraint on X . If f is a faithful X-Y embedding
and  and  correspond under f , then | and |f  () also correspond under f .
Proof: See Appendix A.4.
Again, this result clearly extends to sets of measures.
Corollary 6.8: If f is a faithful X-Y embedding, and DX and DY correspond under f ,
then DX | and DY |f  () also correspond under f .
These results give us a way to bootstrap invariance. We construct an inference procedure that uses relative entropy starting from some set of prior probability measures. Intuitively, these encode the users prior beliefs about the domain. As information comes in,
these measures are updated using cross-entropy. If we design the priors so that certain invariances hold, Corollary 6.8 guarantees that these invariances continue to hold throughout
the process.
Formally, a prior function P on X maps X  X to a set P(X) of probability measures
P (KB ) = P(X)|KB . Note that
in X . Define an inference procedure I P by taking IX
P (true) = P(X), so that when we have no constraints at all, we use P(X) as the basis
IX
for our inference. Most of the standard inference procedures are of the form I P for some
prior function P. It is fairly straightforward to verify, for example, that entailment is I P
for P(X) = X . (This is because, as observed earlier, |KB =  if   KB .) Standard
Bayesian conditioning (defined for objective knowledge bases) is of this form, where we take
P(X) to be a single measure for each space X. More interestingly, it is well known (Kullback
& Leibler, 1951) that maximum entropy is I Pu where Pu (X) is the singleton set containing
only the uniform prior on X.
So what can we say about the robustness of I P to representation shifts? Using Proposition 6.3 and Corollary 6.5, it is easy to show that if we want I P to be invariant under
some set F of embeddings, then we must ensure that the prior function has the right
correspondence property.
Theorem 6.9: If f is a faithful X-Y embedding, then I P is invariant under f iff P(X)
and P(Y ) correspond under f .
338

fiRepresentation Dependence

Proof: See Appendix A.4.
Theorem 6.9 sheds some light on the maximum entropy inference procedure. As we
mentioned, | me is precisely the inference procedure based on the prior function Pu . The
corollary asserts that | me is invariant under f precisely when the uniform priors on X
and Y correspond under f . This shows that maximum entropys lack of representation
independence is an immediate consequence of the identical problem for the uniform prior.
Is there a class F of embeddings under which maximum entropy is invariant? Clearly, the
answer is yes. It is easy to see that any embedding that takes the elements of X to (disjoint)
sets of equal cardinality has the correspondence property required by Theorem 6.9. It follows
that maximum entropy is invariant under all such embeddings. In fact, the requirement that
maximum entropy be invariant under a subset of these embeddings is one of the axioms in
Shore and Johnsons (1980) axiomatic characterization of maximum-entropy. (We remark
that Paris (1994, Theorem 7.10) proves that maximum entropy satisfies a variant of his
atomicity principle; his invariance result is essentially a special case of Theorem 6.9.)
If we do not like the behavior of maximum entropy under representation shifts, Theorem 6.9 provides a solution: we should simply start out with a different prior function.
If we want to maintain invariance under all representation shifts, P(X) must include all
non-extreme priors (i.e., all the measures  on X such that (A) 
/ {0, 1} for all A such
that A 
/ {, X}). This set of priors gives essential entailment as an inference procedure. If,
however, we have prior knowledge as to which embeddings encode reasonable representation shifts, we can often make do with a smaller class of priors, resulting in an inference
procedure that is more prone to leap to conclusions. Given a class of reasonable embeddings F, we can often find a prior function P that is closed under each f  F, i.e., for
each measure   P(X) and each X-Y embedding f  F we make sure that there is a
corresponding measure   P(Y ), and vice versa. Thus, we can guarantee that P has the
appropriate structure using a process of closing off under each f in F.
Of course, we can also execute this process in reverse. Suppose that we want to support
a certain reasoning pattern that requires leaping to conclusions. The classical example of
such a reasoning pattern is, of course, a default assumption of independence. What is the
most representation independence that we can get without losing this reasoning pattern?
As we now show, Theorem 6.9 gives us the answer.
We begin by providing one plausible formulation of the desired reasoning pattern. For
a finite space X, we say that X1      Xn is the product decomposition of X if X =
X1   Xn and n is the largest number for which X can be written as a product in this way.
(It is easy to see that if X is finite, then this maximal product decomposition is unique.)
A measure   X is a product measure on X if X1      Xn is the product decomposition
of X and there exist measures i  Xi for i = 1, . . . , n such that  = 1      n , that
Q
is, (U1      Un ) = ni=1 i (Ui ), if Ui  Xi , i = 1, . . . , n. Let P be the set of all product
measures on X. If P is the prior and the relative entropy rule is used to update the prior
given a knowledge base, then |P satisfies a form of minimal default independence. In
fact, it is easy to show that it satisfies the following stronger property.
339

fiHalpern & Koller

Proposition 6.10: Suppose that X1      Xn is the product decomposition on X and, for
each i = 1, . . . , n, KB i is a constraint on Xi , and Si is a subset of Xi . Then
n
^

KB i |IP Pr(S1  . . .  Sn ) =

i=1



n
Y

Pr(Si ).

i=1

Proof: See Appendix A.4.
Theorem 4.16 shows that |P cannot be invariant under all embeddings. Theorem 6.9
tells us that it is invariant under precisely those embeddings for which P is invariant. These
embeddings can be characterized syntactically in a natural way. Suppose that 1 , . . . , n is
a partition of a finite set  of primitive propositions. Note that a truth assignment to the
primitive propositions in  can be viewed as a crossproduct of truth assignments to the
primitive propositions in 1 , . . . , n . Under this identification, suppose that a set X of truth
assignments to  is decomposed as X1      Xn , where Xi consists of truth assignments
to i . In that case, if p  j and q, r  k for some j 6= k, then true |P Pr(p  q) =
Pr(p)  Pr(q), but since since q and r are in the same subset, we do not have true |P Pr(r 
q) = Pr(r)  Pr(q). Hence, P is not invariant under an interpretation i that maps p to
r and maps q to itself. Intuitively, the problem is that i is crossing subset boundaries;
it is mapping primitive propositions that are in different subsets to the same subset. If we
restrict to interpretations thatpreserve subset boundaries, then we avoid this problem.
We can get a semantic characterization of this as follows. If the product decomposition
of X is X1      Xn and the product decomposition of Y is Y1      Yn , then f is
an X-Y product embedding if f is an X-Y embedding and there are Xi -Yi embeddings fi ,
i = 1, . . . , n, and f (hx1 , . . . , xn i) = f1 (x1 )      fn (xn ). Product embeddings capture
the intuition of preserving subset boundaries; elements in a given subset Xi remain in
the same subset (Yi ) after the embedding. However, the notion of product embedding is
somewhat restrictive; it requires that elements in the ith subset of X map to elements in
the ith component of Y , for i = 1, . . . , n. We can still preserve default independence if the
components of a product are permuted. An g is a permutation embedding if there exists a
permutation  of {1, . . . , n} such that g(hx1 , . . . , xn i) = hx(1) , . . . , x(n) i.
Theorem 6.11: The inference procedure IP is invariant under faithful product embeddings
and under permutation embeddings.
Theorem 6.9 thus provides us with the basic tools to easily define an inference procedure
that enforces minimal default independence for constraints involving disjoint parts of the
language, while at the same time guaranteeing invariance under a large and natural class
of embeddings. Given our negative result in Theorem 4.16, this type of result is the best
that we could possibly hope for. In general, Theorem 6.9 provides us with a principled
framework for controlling the tradeoff between the strength of the conclusions that can be
reached by an inference procedure and invariance under representation shifts.

7. Related Work
As we mentioned earlier, there are two types of probabilistic inference. We partition our
discussion of related work along those lines.
340

fiRepresentation Dependence

7.1 Probabilistic Inference from a Knowledge Base
Given the importance of representation in reasoning, and the fact that one of the main criticisms of maximum entropy has been its sensitivity to representation shifts, it is surprising
how little work there has been on the problem of representation dependence. Indeed, to the
best of our knowledge, the only work that has focused on representation independence in
the logical sense that we have considered here prior to ours is that of Salmon and Paris.
Salmon (1961) defined a criterion of linguistic invariance, which seems essentially equivalent to our notion of representation independence. He tried to use this criterion to defend
one particular method of inductive inference but, as pointed out by Barker in the commentary at the end of (Salmon, 1961), his preferred method does not satisfy his criterion either.
Salmon (1963) then attempted to define a modified inductive inference method that would
satisfy his criterion but it is not clear that this attempt succeeded. In any case, our results
show that his modified method certainly cannot be representation independent in our sense.
As we said earlier, Paris (1994) considers inference processes, which given a constraint on
X , choose a unique measure satisfying the constraint. He then considers various properties
that an inference process might have. Several of these are closely related to properties that
we have considered here. (In describing these notions, we have made some inessential
changes so as to be able to express them in our notation.)
 An X -inference process I is language invariant if all X, Y  X and all constraints KB
and  on X , we have that KB |IX  iff KB |IXY . Clearly language invariance
is a special case of robustness. Paris shows that a center of mass inference process
(that, given a set A  X , chooses the measure that is the center of mass of A) is
not language invariant; on the other hand, it is well known that maximum entropy is
language invariant.
 An X -inference process I satisfies the principle of irrelevant information if for all
spaces X, Y  X , constraints KB and  on X , and constraints  on Y , we have
KB |IX  iff KB   |IXY . Again, this is a special case of robustness, since a
constraint  on Y must be X-conservative. Paris shows that maximum entropy
satisfies this principle. (He restricts the domain of the maximum entropy process to
closed convex sets, so that there is always a unique probability measure that maximizes
entropy.)
 An X -inference process I satisfies the renaming principle if, whenever X and Y are
finite spaces, g : X  Y is an isomorphism, and f : 2X  2Y is the faithful embedding
based on g (in that f (S) = {g(s) : s  S}), then for all constraints KB and  on X ,
we have KB |IX  iff f  (KB ) |IY f  (). Clearly, the renaming principle is a special
case of representation independence. Paris shows that a number of inference processes
(including maximum entropy) satisfy the renaming principle.
 An X -inference process I satisfies the principle of independence if, whenever X, Y ,
and Z are in X , S  FX , T  FY , U  FZ , and KB is the constraint Pr(U ) =
a  Pr(S|U ) = b  Pr(T |U ) = c, where a > 0, then KB | Pr(S  T |U ) = bc. Ignoring the conditional probabilities, this is clearly a special case of minimal default
independence. Paris and Vencovska (1990) show that maximum entropy is the unique
341

fiHalpern & Koller

inference process satisfying a number of principles, including renaming, irrelevant
information, and independence.
 An X -inference process I satisfies the atomicity principle if, for all X, Y1 , . . . , Yn in
X , whenever f 0 is an embedding from {0, 1} to X, and f is the obvious extension of
f 0 to an embedding from to {0, 1}  Y1  . . .  Yn to X  Y1  . . .  Yn , then for all
constraints KB and  on {0,1}Y1 ...Yn , we have KB |IX  iff f  (KB ) |IY f  ().
Clearly atomicity is a special case of representation independence. Paris shows that
there is no inference process that satisfies atomicity. The argument is similar in spirit
to that used to prove Theorems 4.11 and 4.16, but much simpler, since inference
processes return a unique probability measure, not a set of them.
More recently, Jaeger (1996), building on our definitions, has examined representation
independence for general nonmonotonic logics. He considers representation independence
with respect to a collection of transformations, and proves results about the degree to
which certain nonmonotonic formalisms, such as rational closure (Lehmann & Magidor,
1992), satisfy representation independence.
Another line of research that is relevant to representation independence is the work
on abstraction (Giunchiglia & Walsh, 1992; Nayak & Levy, 1995). Although the goal of
this work is again to make connections between two different ways of representing the same
situation, there are significant differences in focus. In the work on abstraction, the two ways
of representing the situation are not expected to be equivalent. Rather, one representation
typically abstracts away irrelevant details that are present in the other. On the other hand,
their treatment of the issues is in terms of deductive entailment, not in terms of general
inference procedures. It would be interesting to combine these two lines of work.
7.2 Bayesian Probabilistic Inference
Bayesian statistics takes a very different perspective on the issues we discuss in this paper.
As we discussed, the Bayesian approach generally assumes that we construct a prior, and use
standard probabilistic conditioning to update that prior as new information is obtained. In
this approach, the representation of the knowledge obtained has no effect on the conclusions.
Two pieces of information that are semantically equivalent (denote the same event) will have
precisely the same effect when used to condition a distribution.
In this paradigm, our analysis is more directly related to the step that precedes the
probabilistic conditioningthe selection of the prior. When we have very specific beliefs
that we want to encode in a prior distribution (as we do, for example, when constructing
a Bayesian network), we design our prior to reflect these beliefs in terms of the vocabulary
used. For example, if we have a particular distribution in mind over the location of an object,
we will encode it one way when representing the space in terms of Cartesian coordinates,
and in another way when using polar coordinates. In effect, we can view the representation
transformation as an embedding f , and the two priors as corresponding under f , in the
sense of Definition 4.2. Thus, the design of the prior already takes the representation into
account.
On the other hand, when we are trying to construct an uninformed prior for some class
of problems, the issue of representation independence becomes directly relevant. Indeed,
342

fiRepresentation Dependence

most of the standard problems with maximum entropy arise even in the simple case when
we simply do Bayesian conditioning starting with a uniform prior over our space.
A standard approach in Bayesian statistics is to use the invariance under certain transformations in order to define an appropriate uninformed prior. For example, we might
want a prior over images that is invariant to rotation and translation. In certain cases,
once we specify the transformation under which we want a measure to be invariant, the
measure is uniquely determined (Jaynes, 1968; Kass & Wasserman, 1993). In this case, the
argument goes, the uniquely determined measure is perforce the right one. This idea of
picking a prior using its invariance properties is in the same spirit as the approach we take
in Section 6. Indeed, as this approach simply uses standard probabilistic conditioning for
objective information (such as observations), the Bayesian approach with an uninformed
prior invariant to a set of embeddings is, in a sense, a special case. However, our approach
does not force us to choose a unique prior. Rather, we allow the use of a set of prior
distributions, allowing us to explore a wider spectrum of inference procedures.
This approach is also related to the work of Walley (1996), who observes that representation independence is an important desideratum in certain statistical applications involving
multinomial data. Walley proposes the use of sets of Dirichlet densities to encode ignorance
about a prior, and shows that this approach is representation independent in its domain of
application.

8. Conclusions
This paper takes a first step towards understanding the issue of representation dependence in probabilistic reasoning, by defining notions of invariance and representation independence, showing that representation independence is incompatible with drawing many
standard default conclusions, and defining limited notions of invariance that might that
allow a compromise between the desiderata of being able to draw interesting conclusions
(not already entailed by the evidence) and representation independence. Our focus here
has been on inference in probabilistic logic, but the notion of representation independence
is just as important in many other contexts. Our definitions can clearly be extended to
non-probabilistic logics. As we mentioned, Jaeger (1996) has obtained some results on representation independence in a more general setting, but there is clearly much more that can
be done. More generally, it would be of interest to understand better the tension between
representation independence and the strength of conclusions that can be drawn from an
inference procedure.

Acknowledgments
Thanks to Ed Perkins for pointing us to (Keisler & Tarski, 1964) and, in particular, the
result that a countably additive probability measure defined on a subalgebra of an algebra
F could not necessarily be extended to a countably additive probability measure on F.
Thanks to the reviewers of the paper for their perceptive comments and for pointing out
(Horn & Tarski, 1948). Much of Halperns work on the paper was done while he was at
the IBM Almaden Research Center. His recent work has been supported by NSF under
343

fiHalpern & Koller

grant IRI-96-25901 and IIS-0090145 and ONR under grant N00014-01-1-0795. Some of
Kollers work was done at U.C. Berkeley. Her research was sponsored in part by the Air
Force Office of Scientific Research (AFSC), under Contract F49620-91-C-0080, and by a
University of California Presidents Postdoctoral Fellowship. Daphne Kollers later work
on the paper was supported through the generosity of the Powell foundation, and by ONR
grant N00014-96-1-0718. A preliminary version of this appears in Proceedings of IJCAI 95,
pp. 18531860.

Appendix A. Proofs
A.1 Proofs for Section 2
Proposition 2.5: Let | be a relation on probabilistic constraints on X for which the
properties Reflexivity, Left Logical Equivalence, Right Weakening, Infinitary And, and Consistency hold for all KB in the domain of | . (That is, if KB is in the domain of | , in
that KB |  for some , then KB | KB , and so on.) Then | is |I for some X-inference
procedure I.
Proof: Define I as follows. If A  X , KB is in the domain of | , and A = [[KB ]]X
for some statement KB , then A is in the domain of I and I(A) = {[[]]X : KB | }.
Note that by Left Logical Equivalence, this is well defined, since if A = [[KB 0 ]]X , then
{[[]]X : KB | } = {[[]]X : KB 0 | }. If A 6= [[KB ]]X for some statement KB , then A is
not in the domain of I. It remains to check that I is an X-inference procedure (i.e., that
I(A)  A and that I(A) =  iff A =  for all A in the domain of I), and that | = |I .
To check that I is an X-inference procedure, suppose that A is in the domain of I. Thus,
A = [[KB ]]X By Reflexivity, it easily follows that I([[KB ]]X )  [[KB ]]X . Next suppose that
I([[KB ]]X ) = . It follows that {[[]]X : KB | } = . Thus, { : KB | } |= false. By
the Infinitary AND rule, we must have KB |I false. By the Consistency Rule, it follows
that [[KB ]]X = . Thus, I is indeed an X-inference procedure. Finally, note that if KB | 
then, by definition of I, I([[KB ]]X )  [[]]X , so KB |I . For the opposite inclusion, note
that if KB |I , then { : KB | } |= . Thus, by the Infinitary And rule, it follows that
KB | I .
A.2 Proofs for Section 3
To prove Theorem 3.4, we need the following lemma.
Lemma A.1: Given two spaces X0 and X1 , measures 0  (X0 ,FX0 ) and 1  (X1 ,FX1 ) ,
and subsets S0  FX0 and S1  FX1 such that 0 (S0 ) = 1 (S1 ), there exists a measure
2  (X0 X1 ,FX0 X1 ) such that 2Xi = i , for i = 1, 2, and 2 (S0  S1 ) = 1.10
Proof: For A  B  FX0  FX1 , define
2 (A  B) = (0 (A  S0 )1 (B  S1 )/1 (S1 )) + (0 (A  S0 )1 (B  S1 )/1 (S1 )),
where we take 0 (A  S0 )1 (B  S1 )/1 (S1 ) = 0 if 1 (S1 ) = 0 and take 0 (A  S0 )1 (B 
S1 )/1 (S1 ) = 0 if 1 (S1 ) = 0. Extend to disjoint unions of such sets by additivity. Since
10. If A and B are sets, we use the notation A  B to denote the set (A  B)  (A  B).

344

fiRepresentation Dependence

all sets in FX0 X1 can be written as disjoint unions of sets of the form A  B  FX0  FX1 ,
this suffices to define 2 . To see that 2 is actually a measure, note that 2 (X  Y ) =
0 (S0 ) + 0 (S0 ) = 1. Additivity is clearly enforced by the definition. Finally, to see that
2 has the desired properties, suppose that 1 (S1 ) 6= 0 and 1 (S1 ) 6= 0. (The argument is
easier if this is not the case; we leave details to the reader.) Then
2X0 (A) = 2 (A  Y ) = 0 (A  S0 )1 (S1 )/1 (S1 ) + 0 (A  S0 1 (S1 )/1 (S1 )
= 0 (A  S0 ) + 0 (A  S0 ) = 0 (A).
Since 0 (S0 ) = 1 (S1 ) by assumption (and so 0 (S0 ) = 1 (S1 )),
2X1 (B) = 2 (X  B) = 0 (S0 )1 (B  S1 )/1 (S1 ) + 0 (S0 )1 (B  S1 )/1 S1 )
= 1 (B  S1 ) + 1 (B  S1 ) = 1 (B).
This completes the proof.
Theorem 3.4: If {IX : X  X } is a robust X -inference procedure that satisfies DI1, DI2,
and DI3, then IX is essentially entailment for all X  X .
Proof: Suppose that {IX : X  X } is robust and IX is not essentially entailment for X  X .
Then there must be a constraint KB on X and a set S  FX such that KB |I  < Pr(S) <
 and KB 6|=   Pr(S)  . Thus, there must be some  
/ [, ] such that KB Pr(S) = 
is consistent. We can assume without loss of generality that  <  (otherwise we can replace
S by S).
We first construct a space Y0  X that has subsets U1 , . . . , Un with the following properties:
(a) There is no measure   Y0 such that (Ui ) > , for all i = 1, ..., n.
(b) For each i, there is some measure 0i  Y0 such that 0i (Ui ) = 1 and 0i (Uj ) >  for
all j 6= i.
We proceed as follows. Choose n and d such that  < (d  1)/(n  1) < d/n < . By
assumption, there exists a Y0  X such that |Y0 | = n!/(n  d)!. Without loss of generality,
we can assume that Y0 consists of all tuples of the form (a1 , . . . , ad ), where the ai s are all
distinct, and between 1 and n. Let Ui be consist of all the tuples in Y0 that have i somewhere
in the subscript; it is easy to see that there are d(n  1)!/(n  d)! such tuples. Suppose that
 is a probability measure in Y0 . It is easy to see that (U1 ) +    + (Un ) = d, since each
tuple in Y0 is in exactly d of the Ui s and so gets counted exactly d times, and the sum of the
probabilities of the tuples is 1. Thus, we cannot have (Ui ) > d/n for all i (and, a fortiori,
we cannot have (Ui ) >  for all i). This takes care of the first requirement. Next, consider
a probability distribution 0i that makes all the tuples making up Ui equally probable, and
gives all the other tuples probability 0. Then it is easy to see that 0i (Ui ) = 1. Moreover,
since it is straightforward to check that there are exactly d(d  1)(n  2)!/(n  d)! tuples
in Ui  Uj for j 6= i, we have 0i (Uj ) = [d(d  1)(n  2)!/(n  d)!]/[d(n  1)!/(n  d)!] =
(d  1)/(n  1). This takes care of the second requirement.
By assumption, there is also a measurable space Y  X such that |Y | = 2. Suppose
that Y = {y, y 0 }. Let Z = X n  Y0  Y n , where the n is the same as the n chosen in the
construction of Y0 . Again, by assumption, Z  X . For i = 1, . . . , n,
345

fiHalpern & Koller

 if A  X, let Ai = X i1  A  X ni  Y0  Y n  Z.
 let KB i = {  Z : Xi  KB };
 let Yi be the subset of Y n where the ith copy of Y is replaced by {y};
 let Vi be the subset of Z of the form X n  Ui  Yi (where U1 , . . . , Un are the subsets
of Yi constructed above).
Let  be the following constraint on Z :
KB 1  . . .  KB n  Pr(S1  V1 ) = 1  . . .  Pr(Sn  Vn ) = 1.
Let Xi denote the ith copy of X in Z. That is, for ease of exposition, we view Z as
being of the form X1      Xn  Y0  Y m , although all the Xi s are identical, since it is
helpful to be able to refer to a specific Xi . We claim that  is Xi -conservative over KB ,
for i = 1, . . . , n. Thus, we must show that proj Xi ([[KB i  ]]Z ) = [[KB ]]X . It is immediate
that proj Xi ([[KB i  ]]Z )  [[KB ]]X . For the opposite inclusion, suppose that   [[KB ]]X .
We must show that there exists some   [[KB i  ]]Z such that Xi = . We proceed as
follows.
Let 00 be a measure in Y0 such that 00 (Ui ) = 1 and 00 (Uj ) > , for j 6= i. By
construction of the Uj s, such a measure must exist. For j  {1, . . . , n}, let 0j be the measure
in Y such that 0i (y) = (S) and if j 6= i, then 0j (y) = /00 (Uj ) (and 0j (y 0 ) = 1  0j (y)).
Let 0 be the measure on Y0  Y n that is the crossproduct of 00 , 01 , . . . , 0n . That is,
0 (T0      Tn ) = 00 (T0 )      0n (Tn ). By construction, 0 (Vj ) =  for j 6= i and
0 (Vi ) = (S).
By assumption, there is a measure 0  X such that 0 |= KB  Pr(S) = . We
now proceed inductively to define a measure k  X k Y0 Y n such that (a) Pr((S1 
V1 )  . . .  (Sk  Vk )) = 1, (b) jY = 0 and jXj =  for j = 1, . . . , k. We define 0 = 0 .
For the inductive step, we simply apply Lemma A.1. Finally, we take  to be n . Our
construction guarantees that X j = , hence that  |= KB j . In addition, the construction
guarantees that  |= Pr(S1  V1 ) = 1  . . .  Pr(Sn  Vn ) = 1. Hence  |= , as desired.
It follows from DI1, DI2, and DI3 that  is in the domain of IZ . Since KB i   is
equivalent to , it follows that KB i   is also in the domain of IZ . Now, by robustness, for
any constraint  on Xi , we have KB i  |I  iff KB i |I . Since KB i |I Pr(Si ) >  and
KB i   is equivalent to , it follows that  |I Pr(Si ) >  for i = 1, . . . , n. By the And rule
(Proposition 2.3), it follows that  |I Pr(S1 ) >   . . .  Pr(Sn ) > . Since  |= Pr((S1 
V1 )  (Sn  Vn )) = 1, it easily follows that  |I Pr(U1 ) >   . . .  Pr(Un ) > . But our
construction guarantees that Pr(U1 ) > . . .Pr(Un ) >  is inconsistent. Thus,  |I false.
By robustness, it follows that KB i |I false. But this can happen only if KB |= false, which
implies that KB |=   Pr(S)  , contradicting our original assumption.
A.3 Proofs for Section 4
To prove Lemma 4.6, it is useful to first prove two additional results:
Lemma A.2: If f is an X-Y embedding, then f (X) = Y and f () = .
346

fiRepresentation Dependence

Proof: Suppose that f is an X-Y embedding. We first show that f () = . From the
definition of embedding, it follows that f () = f (X  ) = f (X)  f (). Thus, f ()  f (X).
But the definition of embedding also implies that f () = f (X) = f (X). Thus, we have
f (X)  f (X). This can happen only if f (X) = Y and f () = f (X) = .

Lemma A.3: If f is a faithful X-Y embedding, then
(a) for any   X , there is a measure   Y such that  corresponds to ;
(b) for any   Y , there is a measure   X such that  corresponds to .
Proof: To prove (a), consider the algebra of subsets of Y the form f (S), for S  FX .
Define a function  0 on the algebra via  0 (f (S)) = (S). This mapping is well defined,
for if f (S) = f (T ), then faithfulness guarantees that S = T . Moreover,  0 is a probability
measure on the algebra. To see this, note by Lemma A.2 that  0 (Y ) =  0 (f (X)) = (X) = 1.
Moreover, if f (S)  f (T ) = , then (by definition of embedding) f (S  T ) =  and so, since
f is faithful, S  T =  (for otherwise f (S  T ) = f () by Lemma A.2, but S  T 6= ).
Thus,
 0 (f (S)  f (T )) =  0 (f (S  T )) = (S  T ) = (S) + (T ) =  0 (f (S)) +  0 (f (T )).
As shown by Horn and Tarski (1948), it is possible to extend  0 to a probability measure 
on FY .11 By construction, we have that  corresponds to .
To prove (b), we use a very similar process. Define a function  on the algebra of sets
S  X via (S) = (f (S)). It is easy to see that  is already a probability measure in X ,
which by construction corresponds to .
We can now prove Lemma 4.6.
Lemma 4.6: An X-Y embedding f is faithful if and only if for all constraints KB and ,
we have KB |=  iff f  (KB ) |= f  ().
Proof: Suppose that f is faithful. To show that KB |=  iff f  (KB ) |= f  (), we must
show that [[KB ]]X  [[]]X iff [[f  (KB )]]Y  [[f  (]]Y . The only if direction is immediate
from the definition of f  . To prove the if direction, suppose not. Then there must exist
some   [[KB ]]X  [[]]X such that f  ()  [[f  ()]]Y . Let  be some probability measure
that corresponds to . Since   f  ()  f  (), there must be some 0  [[]]X such that
  f  (0 ). Since 0 6= , there must be some S  FX such that 0 (S) 6= (S). Since
  f  ()  f  (0 ), we must have both (f (S)) = (S) and (f (S)) = 0 (S). But this is a
contradiction. This completes the proof of the if direction.
For the converse, suppose we have KB |=  iff f  (KB ) |= f  () for all KB and . Given
S, T  FX , we have the following chain of equivalences:
11. It is critical for this result that we are working with finitely additive measures. There may not be a
countably additive measure  extending  0 , even if  0 is countably additive. For example, take FY0 to be
the Borel sets on [0, 1] and take FY to be all subsets of [0, 1]. Let  0 be Lebesgue measure. It is known
that, under the continuum hypothesis, there is no countably additive measure extending  0 defined on
all subsets of [0, 1] (Ulam, 1930) (see (Keisler & Tarski, 1964) for further discussion).

347

fiHalpern & Koller

ST
iff Pr(S) = 1 |= Pr(T ) = 1
iff f  (Pr(S) = 1) |= f  (Pr(T ) = 1) (by assumption)
iff Pr(f (S)) = 1 |= Pr(f (T )) = 1 (by definition of f  )
iff f (S)  f (T ).
Thus, f is faithful.
Proposition 4.7: Let f be a faithful X-Y embedding. Then the following statements are
equivalent:
(a)  and  correspond under f ;
(b) for all formulas ,  |=  iff  |= f  ().
Proof: We first show that (a) implies (b). So suppose that  and  correspond under f .
The only if direction of (b) is trivial: If  |=  then   f  ()  f  (), since f is faithful.
For the if direction, we proceed much as in the proof of Lemma 4.6. Assume that  |= f  ()
but that  6|= . Since   f  (), by definition of f  there must be some 0  [[]]X such that
  f  (0 ). Since 0 |=  whereas  6|= , we must have  6= 0 . Hence, there must be some
S  FX such that (S) 6= 0 (S). Since   f  ()  f  (0 ), it follows that (f (S)) = (S)
and that (f (S)) = 0 (S), which gives the desired contradiction.
We now show that (b) implies (a). Assume by contradiction that  and  do not
correspond under f . Then there must be some event S  FX such that (S) 6= (f (S)).
Let p = (S) and let  be the constraint Pr(S) = p. Then  |= , whereas  6|= f  (),
providing the desired contradiction.
Theorem 4.10: If an X -inference procedure is robust that satisfies DI2, DI4, and DI5,
then it is representation independent.
Proof: Suppose that {IX : X  X } is a robust X -inference procedure. We want to show
that it is representation independent. So suppose KB ,  are constraints on X and f is an
X-Y embedding, for some X, Y  X . We want to show that KB |IX  iff f  (KB ) |IY f  ().
Let  be the following constraint on XY :
(  f  ())  (KB  f  (KB )).
We claim that  is X-conservative over KB and Y -conservative over f  (KB ). Thus, we must
show that proj X ([[KB  ]]XY ) = [[KB ]]X and proj Y ([[f  (KB )  ]]XY ) = [[f  (KB )]]Y .
We show that proj X ([[KB  ]]XY ) = [[KB ]]X here; the argument that proj Y ([[f  (KB ) 
]]XY ) = [[f  (KB )]]Y is almost identical.
Clearly if   [[KB  ]]XY then X  [[KB ]]X , so proj X ([[KB  ]]XY )  [[KB ]]X .
For the opposite inclusion, suppose that   [[KB ]]X . We want to find a measure  0 
0 = . Let  00 be any measure in f  () and let  0  
[[KB  ]]XY ) such that X
XY
0 = . To
be the crossproduct of  and  00 ; that is,  0 (A  B) = (A) 00 (B). Clearly X
see that  0  [[KB  ]]XY ), it clearly suffices to show that  0 |= . But since  and  00
correspond under f , it is immediate from Proposition 4.7 that  |= KB iff  00 |= f  (KB )
and  |=  iff  00 |= f  (). Thus,  |= , as desired.
348

fiRepresentation Dependence

Now suppose that KB |IX . By DI2 and DI5, KB   is in the domain of IXY . By
robustness, KB   |IXY . Thus, I([[KB  ]]XY )  [[]]XY . Since I([[KB  ]]XY ) 
[[KB  ]]XY  [[  f  ()]]XY , it follows that I([[KB  ]]XY )  [[f  ()]]XY .
Moreover, KB   is equivalent to f  (KB )  , so I([[f  (KB )  ]]XY )  [[f  ()]]XY ,
i.e., f  (KB )   |IXY f  (). By DI4, f  (KB ) is in the domain of IY . Since  is Y conservative over f  (KB ), the robustness of {IX : X  X } implies that f  (KB ) |IY f  ().
The opposite implication (if f  (KB ) |IY f  () then KB |IX ) goes the same way. Thus,
{IX : X  X } is representation independent.
Next, we turn our attention to Theorems 4.11 and 4.16. Both of these results follow in
a relatively straightforward way from one key proposition. Before we state it, we need some
definitions.
Definition A.4: We say that a constraint KB on X depends only on S1 , . . . , Sk  FX
(the sets S1 , . . . , Sk are not necessarily disjoint) if, whenever , 0  X agree on S1 , . . . , Sk ,
then  |= KB iff 0 |= KB .
For example, if KB has the form Pr(S1 ) > 1/3  Pr(S2 )  3/4, then KB depends only
on S1 and S2 . Similarly, if KB has the form Pr(S1 | S2 ) > 3/4, then KB depends only on
S1 and S2 .
Definition A.5: Given S1 , . . . , Sk  FX , an atom over S1 , . . . , Sk is a set of the form
T1  . . .  Tk , where Ti is either Si or Si .
Proposition A.6: Suppose that {IX : X  X } is an X -inference procedure and, for some
X  X , there exist S, S1 , . . . , SK  FX and a consistent constraint KB on X that depends
only on S1 , . . . , Sk , such that the following two conditions are satisfied:
 both T  S and T  S are nonempty for every nonempty atom T over S1 , . . . , Sk ,
 KB |IX  < Pr(S) < , where either  > 0 or  < 1.
Then {IX : X  X } is not representation independent.
Proof: Suppose, by way of contradiction, that {IX : X  X } is a representation-independent
inference procedure but nevertheless, for some X  X , there exists sets S, S1 , . . . , Sk  FX
and a knowledge base KB that satisfies the conditions above, for some , . Assume that
 > 0 (a similar argument can be used to deal with the case that  < 1).
Let T1 , . . . , TM be the nonempty atoms over S1 , . . . , Sk . Choose N such that 1/N < .
Our goal is to find a collection f1 , . . . , fN of embeddings of X into some Y  X such that
each of these embeddings has the same effect on KB , but such that the sets fj (S) are disjoint.
Since KB |IX Pr(fj (S)) >  for j = 1, . . . , N , and fj (KB ) = f  (KB ) for j = 1, . . . , N , it
will follow that f  (KB ) |IY Pr(fj (S)) >  for j = 1, . . . , N , a contradiction. We proceed
as follows.
By assumption, there exists a set Z in X such that |Z| = M N . Let Y = X  Z.
Since X is closed under crossproducts, Y  X . Suppose that Z = {z1 , . . . , zM N }, and let
Zi = {zN (i1)+1 , . . . , zN i }, for i = 1, . . . , M . Thus, the Zi s partition Z into M disjoint sets,
each of cardinality N . Let Bi = X  Zi , and let Bij = X  {zN (i1)+j }, for j = 1, . . . , N .
It is easy to see that we can find faithful X-Y embeddings f1 , . . . , fN such that
349

fiHalpern & Koller

1. fj (Ti ) = Bi , for i = 1, . . . , M , j = 1, . . . , N ,
2. fj (Ti  S) = Bij , for i = 1, . . . , M , j = 1, . . . , N .
Notice that we need the assumption that both Ti S and Ti S are nonempty for T1 , . . . , TM
(that is, for each nonempty atom over S1 , . . . , Sk ) to guarantee that we can find such faithful
embeddings. For if Ti  S = , then since fj is an embedding, f (Ti  S) =  6= Bi ; and if
Ti  S = , then fj (Ti  S) = fj (Ti )  f (Ti  S)) = , which means that Bi = Bij , again
inconsistent with the construction.
It is easy to check that, since KB depends only on S1 , . . . , Sk , fj (KB ) depends only
on fj (S1 ), . . . , fj (Sk ), for j = 1, . . . , N . We next show that fj (Si ) is independent of j;
that is, fj (Si ) = fj 0 (Si ) for 1  j, j 0  N . Notice that for h = 1, . . . , k, we have that
fj (Sh ) = Ti Sh fj (Ti ) = {i:Ti Sh } Bi . Thus, fj (Sh ) is independent of j, as desired. Since
fj (KB ) depends only on fj (S1 ), . . . , fj (Sk ), it too must be independent of j. Let KB  be
f1 (KB ) (which, as we have just observed, is identical to f2 (KB ), . . . , fk (KB )).
Since, by assumption, {IX : X  X } is representation independent, and KB |IX P r(S) >
, we have that KB  |IY Pr(fj (S)) > , for j = 1, . . . , N . Thus, KB  |IY Pr(f1 (S)) >
  . . .  Pr(fN (S)) > . But note that, by construction, fj (S) = {i:Ti S6=} Bij . Thus, the
sets fj (S) are pairwise disjoint. Since  > 1/N , we cannot have N disjoint sets each with
probability greater than . Thus, KB  |IY false. But KB is consistent, so KB  = fj (KB )
must be as well. Thus, IY (KB  ) 6= , by assumption. But this contradicts our conclusion
that KB  |IY false. Thus, {IX : X  X } cannot be representation independent.
We can use Proposition A.6 to help prove Theorem 4.11.
Theorem 4.11: If {IX : X  X } is a representation-independent X -inference procedure
then, for all X  X , IX is essentially entailment for all objective knowledge bases in its
domain.
Proof: Suppose, by way of contradiction, that {IX : X  X } is representation independent
but IX is not essentially entailment for some X  X and objective knowledge base KB .
Then there must be some set S  FX such that KB |IX  < Pr(S) <  and KB 6|=  
Pr(S)  . Without loss of generality, we can assume that KB has the form Pr(T ) = 1 for
some T  FX . Moreover, we can assume that if T 6= , then T has a nonempty, measurable
strict subset. (For otherwise, choose Y = {y, y 0 }  X and consider the space X 0 = X  Y .
By assumption, X 0  X . Let f be the X-Y embedding that maps U  FX to U  Y . Since
I is representation independent, we have that Pr(T  Y ) = 1 |I  < Pr(S  Y ) < , and
T  {y}  T  Y .)
If T is nonempty, let Z be any nonempty, measurable strict subset of T (which exists by
assumption); otherwise let Z be the empty set. Let U be the set (T  S)  (T  Z). Notice
that S T = U T . Moreover, since, for any set V , Pr(T ) = 1  Pr(V ) = Pr(V T ) is valid,
it follows from Reflexivity and Right Weakening that KB |IX Pr(V ) = Pr(V  T ). Thus,
KB |IX Pr(S) = Pr(S  T ) = Pr(U  T ) = Pr(U ). It follows that KB |IX  < Pr(U ) < .
We now want to apply Proposition A.6. Note that KB depends only on T . Thus, we
must show that T  U and T  U are nonempty, and if T is nonempty, then T  U and
T  U are as well. As we observed above, T  U = T  S. Thus, if T  U = , then T  S,
contradicting our assumption that KB |I Pr(S) > 0. It is easy to see that T  U = T  S.
Again, we cannot have T  U = , for then T  S, contradicting our assumption that
350

fiRepresentation Dependence

KB |I Pr(S) < 1. By construction, T  U = T  Z = Z. By assumption, if T 6= , then
Z 6= . Finally, T  U = T  Z; again, by construction, this is a nonempty set if T 6= . It
now follows from Proposition A.6 that {IX : X  X } is not representation independent.
Corollary 4.12: If {IX : X  X } is a representation-independent X -inference procedure,
then for all X  X , if KB is an objective knowledge base putting constraints on X , and
KB |IX  < Pr(S) <  for some   0 and   1, then  = 0 and  = 1.
Proof: Assume the hypotheses of the corollary hold. Since KB is objective, it is of the
form Pr(T ) = 1 for some T  FX . Then there are three possibilities. Either (1) T  S, (2)
T  S, or (3) both T  S and T  S are nonempty. If (1) holds, we have KB |= Pr(S) = 1,
while if (2) holds, we have KB |= Pr(S) = 0. Thus, both (1) and (2) are incompatible
with KB |IX  < Pr(S) < . On the other hand, if (3) holds, it is easy to see that for
all , Pr(S) =  is consistent with KB (since there is a probability measure that assigns
probability  to T  S and probability 1   to T  S). Since KB |IX  < Pr(S) < , by
Theorem 4.11, we must have KB |=   Pr(S)  . It follows that the only choices of 
and  for which this can be true are  = 0 and  = 1.
Theorem 4.16: If {IX : X  X } is an X -inference procedure that enforces minimal
default independence and satisfies DI1, then IX is not representation independent.
Proof: Suppose that {IX : X  X } is an X -inference procedure that enforces minimal
default independence and satisfies DI1. Choose X = {x, x0 }  X and let KB be 1/3 
Pr(x)  2/3. By assumption, X  X  X . We can view KB as a constraint on XX ;
in this case, it should be interpreted as 1/3  Pr({x}  X)  2/3. by DI1, KB is is the
domain of IXX . Note that KB is equivalent to the constraint 1/3  Pr(x0 )  2/3. By
minimal default independence, we have that KB |IXX Pr((x, x)) > Pr(x  X)/3 and that
KB |IXX Pr((x0 , x0 )) > Pr(x0  X)/3. Applying straightforward probabilistic reasoning,
we get that KB |IXX Pr({(x, x), (x0 , x0 )}) > 1/3. We now apply Proposition A.6, taking
S to be {(x, x), (x0 , x0 )} and S 0 to be {(x, x), (x, x0 )}. Note that KB depends only on S 0 .
It is almost immediate from the definition of S and S 0 that all of S  S 0 , S  S 0 , S  S 0 ,
and S  S 0 are nonempty. Thus, by Proposition A.6, {IX : X  X } is not representation
independent.
0 : X  X } is a representationLemma 4.13: Let X consist of only countable sets. Then {IX
independent X -inference procedure.

Proof: As we said in the main part of the text, it easily follows from Proposition 2.5 that
0 is an inference procedure for all X  X , since it is easily seen to have the five propIX
erties described in the proposition. To see that I 0 is representation independent, suppose
that f is a faithful X-Y embedding, for X, Y  X . Clearly KB is objective if and only
if f  (KB ) is objective. If KB is not objective, then it is easy to see that KB |I 0  iff
f  (KB ) |I 0 f  (), since |I 0 reduces to entailment in this case. So suppose that KB is objective and has the form Pr(T ) = 1, for some T  FX . Then KB |I 0  iff KB KB + |= . By
Lemma 4.6, this holds iff f  (KB )f  (KB + ) |= f  (). On the other hand, f  (KB ) |I 0 f  ()
iff f  (KB )  (f  (KB ))+ |= f  () Thus, it suffices to show that f  (KB )  f  (KB + ) |= f  ()
iff f  (KB )  (f  (KB ))+ |= f  (). It is easy to show that (f  (KB ))+ implies f  (KB + ), so
that if f  (KB )  f  (KB + ) |= f  () then f  (KB )  (f  (KB ))+ |= f  (). It is not necessarily
351

fiHalpern & Koller

the case that f  (KB + ) implies (f  (KB ))+ . For example, consider the embedding described
in Example 4.3. In that case, if KB is the objective knowledge base Pr(colorful ) = 1,
KB + is empty, and hence so is f  (KB + ), while (f  (KB ))+ includes constraints such as
0 < Pr(green) < 1. Nevertheless, suppose that f  (KB )  (f  (KB ))+ |= f  () and, by way
of contradiction, there is some  such that  |= f  (KB )  f  (KB + )  f  (). Choose 
such that   f  (). Then  and  correspond, so  |= KB  KB +  . It is easy to
show that there exists  0  f  () such that 0 <  0 (S) < 1 for all nonempty subsets of S of
f (T ). To see this, note that if (x) 6= 0, then it suffices to ensure that  0 (f (x)) = (x) and
 0 (y) 6= 0 for all y in f (x). Since Y is countable, this is straightforward. Since  and  0
correspond, we must have that  0 |= f  ()  f  (KB ). By construction,  0 |= (f  (KB ))+ .
This contradicts the assumption that f  (KB )  (f  (KB ))+ |= f  ().
Lemma 4.14: Suppose that X consists only of measure spaces of the form (X, 2X ), where
1 : X  X } is a representation-independent X -inference procedure.
X is finite. Then {IX
Proof: Suppose that X, Y  X , KB and  are constraints on X , and f is an X-Y
embedding. We must show that KB |I 1  iff f  (KB ) |I 1 f  (). For the purposes of this
X
Y
proof, we say that a subset A of X is interesting if there exists some S  FX such that
A = {  X : (S)  1/4}. It is easy to see that if KB is interesting then f  (KB ) is
interesting. The converse is also true, given our assumption that X consists of only finite
spaces where all sets are measurable. For suppose that f  (KB ) is interesting. Then there is
a set T  Y such that f  (KB ) = {  Y : (T )  1/4}. Let A = {S 0  X : f (S 0 )  T }.
Since X is finite, so is A; it easily follows that S = A  A.12 Clearly if (S)  1/4, then
f  ()  f  (KB ), so   [[KB ]]X . Thus, [[KB ]]X  {  X : (S)  1/4}. On the other
hand, if   KB , then f  ()  f  (KB ). Thus, if   f  (), since S  A, it must be the
case that (S) = (f (S))  (T )  1/4. Thus, [[KB ]]X  {  X : (S)  1/4}. It
follows that KB is equivalent to Pr(S)  1/4, and so must be interesting. (We must also
have T = f (S), although this is not needed for the result.)
If KB is not interesting, then KB |I 1  iff KB |=  iff f  (KB ) |= f  () (since entailment
X
is representation independent) iff f  (KB ) |I 1 . On the other hand, if KB is interesting,
Y
then KB is equivalent to Pr(S)  1/4 for some S  X, and f  (KB ) is equivalent to
Pr(f (S))  1/4. Moreover, KB |I 1  iff Pr(S)  1/3 |=  iff Pr(f (S))  1/3 |= f  () iff
X
f  (KB ) |I 1 . Thus, we get representation independence, as desired.
Y

A.4 Proofs for Section 6
Proposition 6.3: Suppose that f is a faithful X-Y embedding, DX  X , and DY  Y .
The following two conditions are equivalent:
(a) DX and DY correspond under f ;
(b) for all , DX |=  iff DY |= f  ().
12. This is not in general true if X is infinite without the additional requirement that f (i Ai ) = i f (Ai )
for arbitrary unions.

352

fiRepresentation Dependence

Proof: To prove that (a) implies (b), assume by way of contradiction that, for some ,
DX |=  but DY 6|= f  (). Then there is some   DY such that  6|= f  (). Let   DX be
a measure corresponding to . Then, by Proposition 4.7, we have that  6|= , the desired
contradiction. The proof for the other direction of (a) is identical.
To prove that (b) implies (a), first consider a measure   DX . We must find a   DY
such that  corresponds to . Suppose that X = {x1 , . . . , xn } (recall that we are restricting
to finite spaces in Section 6) and that (xi ) = ai , i = 1, . . . , n. Let  be the constraint
ni=1 Pr({xi }) = ai . By our assumptions about the language, this constraint is in the
language. Clearly [[]]X = {}. Since   DX , we know that DX 6|= . Hence, DY 6|=
f  (), so that there exists   DY such that  6 f  (). Hence   f  () = f  ({}). By
definition of f  ,  corresponds to .
Now consider a measure   DY , and let  be the measure in X that corresponds
to . Assume by way of contradiction that  6 DX . Taking  as above, it follows that
DX |=  and, therefore, by assumption, DY |= f  (). Thus,  |= f  (). But  |=  and,
by assumption,  and  correspond. This contradicts Proposition 4.7.
Theorem 6.7: Let  be an arbitrary constraint on X . If f is a faithful X-Y embedding
and  and  correspond under f , then | and |f  () also correspond under f .
Proof: Assume that  and  correspond under f . Recall that we are assuming in this section
that X is a finite space; let X = {x1 , . . . , xn }. Let Yi = f (xi ). Given any distribution
 00  Y , define i00 =  00 |Yi and let (f  )1 ( 00 ) denote the unique 00  X such that
 00  f  (00 ).
Now suppose that 0  |. Define  0  Y to be the measure such that
 0 (y) = 0 (xi )  i (y),
where i is the index such that y  Yi . Since i = |Yi , it follows that i (Yi ) = 1. Thus,
 0 (Yi ) = (xi ), and  0 leaves the relative probabilities of elements within each Yi the same
as in . It is easy to verify that  0 and 0 correspond. Hence, by Proposition 4.7,  0 |= f  ().
We claim that  0  |f  (). To show that, we need show only that KLY ( 0 k) is minimal
among all KLY ( 00 k) such that  00 |= f  (). It follows from standard properties of relative
entropy (Cover & Thomas, 1991, Theorem 2.5.3) that for all  00  Y , we have
KLY ( 00 k) = KLX ((f  )1 ( 00 )k(f  )1 ()) +

n
X

KLY (i00 ki ).

(1)

i=1

Note that i = i0 , so KLY (i0 ki ) = 0, for i = 1, . . . , n. Thus, it follows from (1) that
KLY ( 0 k) = KLX (0 k).
Now, let  00  Y be such that  00 |= f  () and let 00 = (f  )1 (00 ). Since  00 and 00
correspond under f , it follows from Proposition 4.7 that 00 |= . Using (1) once again, we
have that
KLY ( 00 k) = KLX (00 k) +

n
X
i=1

 KLX (00 k).
353

KLY (i00 ki )

fiHalpern & Koller

But since 0  |, we know that KLX (0 k)  KLX (00 k). Hence we conclude that
KLY ( 00 k)  KLY ( 0 k),
so that  0  |f  ().
Theorem 6.9: If f is a faithful X-Y embedding, then I P is invariant under f iff P(X)
and P(Y ) correspond under f .
Proof: Suppose that f is a faithful X-Y embedding. By definition, I P is invariant under
f iff, for all KB , , we have
KB | I P  iff f  (KB ) | I P f  ().

(2)

By definition of I P , (2) holds iff
P(X)|KB  [[]]X iff P(Y )|f  (KB )  [[f  ()]]Y for all KB , .

(3)

By Proposition 6.3, (3) holds iff P(X)|KB and P(Y )|f  (KB ) correspond for all KB . By
Corollary 6.5, if P(X) and P(Y ) correspond, then P(X)|KB and P(Y )|f  (KB ) correspond
for all KB . On the other hand, if P(X)|KB and P(Y )|f  (KB ) correspond for all KB , then
P(X) and P(Y ) must correspond: simply take KB = true and observe that P(X)|KB ) =
P(X) and P(Y )|f  (KB ) = P(Y ).
Proposition 6.10: Suppose that X1      Xn is the product decomposition on X and,
for each i = 1, . . . , n, KB i is a constraint on Xi , and Si is a subset of Xi . Then
n
^
i=1

KB i |IP Pr(S1  . . .  Sn ) =


n
Y

Pr(Si ).

i=1

Proof: If KB i is a satisfiable constraint on Xi , for i = 1, . . . , n, then there exist product
V
measures on X satisfying the constraints ni=1 KB i . These product measures are precisely
Vn
the measures in P |( i=1 KB i ). Since each of these measures satisfies Pr(S1  . . .  Sn ) =
Qn
i=1 Pr(Si ) by assumption, the conclusion holds in this case. If any constraint KB i is not
satisfiable, then the result trivially holds.
Theorem 6.11: The inference procedure IP is invariant under faithful product embeddings and under permutation embeddings.
Proof: Suppose that f is a faithful X-Y product embedding, X1      Xn is the product
decomposition of X, and Y1      Yn is the product decomposition of Y . To show that
P is invariant under f , it suffices to show that P (X) and P (Y ) correspond under f .
Supposethat   P (Y ). Then  = 1      n , where i is a measure on Xi , i = 1, . . . , n.
Moreover, since f is a product embedding, there exist f1 , . . . , fn such that f = f1      fn .
Let i  fi (i ), for i = 1, . . . , n. It is easy to check that  = 1      n  f  ().
Conversely, suppose that   P (Y ). Then  = 1      n , where i  Yi for
i = 1, . . . , n. Define   Xi by setting i (S) = i (fi (S)). Since fi is a faithful Xi -Yi
354

fiRepresentation Dependence

embedding, is easy to check that i  Xi and that i  fi (i ). Thus,   f  (). This
completes the proof that P is invariant under faithful X-Y product embeddings.
The argument that P is invariant under faithful X-X permutation embeddings is
similar (and easier). We leave details to the reader.

References
Bacchus, F. (1990). Representing and Reasoning with Probabilistic Knowledge. MIT Press,
Cambridge, Mass.
Bacchus, F., Grove, A. J., Halpern, J. Y., & Koller, D. (1996). From statistical knowledge
bases to degrees of belief. Artificial Intelligence, 87 (12), 75143.
Cover, T. M., & Thomas, J. A. (1991). Elements of Information Theory. Wiley, New York.
Enderton, H. B. (1972). A Mathematical Introduction to Logic. Academic Press, New York.
Giunchiglia, F., & Walsh, T. (1992). A theory of abstraction. Artificial Intelligence, 56 (23),
323390.
Goldszmidt, M., Morris, P., & Pearl, J. (1993). A maximum entropy approach to nonmonotonic reasoning. IEEE Transactions of Pattern Analysis and Machine Intelligence,
15 (3), 220232.
Halpern, J. Y., & Koller, D. (1995). Representation dependence in probabilistic inference.
In Proc. Fourteenth International Joint Conference on Artificial Intelligence (IJCAI
95), pp. 18531860.
Horn, A., & Tarski, A. (1948). Measures in Boolean algebras. Transactions of the AMS,
64 (1), 467497.
Jaeger, M. (1996). Representation independence of nonmonotonic inference relations. In
Principles of Knowledge Representation and Reasoning: Proc. Fifth International
Conference (KR 96), pp. 461472.
Jaynes, E. T. (1968). Prior probabilities. IEEE Transactions on Systems Science and
Cybernetics, SSC-4, 227241.
Jaynes, E. T. (1978). Where do we stand on maximum entropy?. In Levine, R. D., & Tribus,
M. (Eds.), The Maximum Entropy Formalism, pp. 15118. MIT Press, Cambridge,
Mass.
Kahneman, D., Slovic, P., & Tversky, A. (Eds.). (1982). Judgment Under Uncertainty:
Heuristics and Biases. Cambridge University Press, Cambridge/New York.
Kass, R. E., & Wasserman, L. (1993). Formal rules for selecting prior distributions: A review
and annotated bibliography. Tech. rep. Technical Report #583, Dept. of Statistics,
Carnegie Mellon University.
355

fiHalpern & Koller

Keisler, J., & Tarski, A. (1964). From accessible to inaccessible cardinals. Fundamenta
Mathematica, 53, 225308.
Kraus, S., Lehmann, D., & Magidor, M. (1990). Nonmonotonic reasoning, preferential
models and cumulative logics. Artificial Intelligence, 44, 167207.
Kullback, S., & Leibler, R. A. (1951). On information and sufficiency. Annals of Mathematical Statistics, 22, 7686.
Lehmann, D., & Magidor, M. (1992). What does a conditional knowledge base entail?.
Artificial Intelligence, 55, 160.
Nayak, P. P., & Levy, A. Y. (1995). A semantic theory of abstractions. In Proc. Fourteenth
International Joint Conference on Artificial Intelligence (IJCAI 95), pp. 196203.
Paris, J. B. (1994). The Uncertain Reasoners Companion. Cambridge University Press,
Cambridge, U.K.
Paris, J., & Vencovska, A. (1990). A note on the inevitability of maximum entropy. International Journal of Approximate Reasoning, 4 (3), 183224.
Pearl, J. (1988). Probabilistic Reasoning in Intelligent Systems. Morgan Kaufmann, San
Francisco.
Salmon, W. (1961). Vindication of induction. In Feigl, H., & Maxwell, G. (Eds.), Current
Issues in the Philosophy of Science, pp. 245264. Holt, Rinehart, and Winston, New
York.
Salmon, W. (1963). On vindicating induction. In Kyburg, H. E., & Nagel, E. (Eds.),
Induction: Some Current Issues, pp. 2754. Wesleyan University Press, Middletown,
Conn.
Seidenfeld, T. (1987). Entropy and uncertainty. In MacNeill, I. B., & Umphrey, G. J. (Eds.),
Foundations of Statistical Inferences, pp. 259287. Reidel, Dordrecht, Netherlands.
Shore, J. E., & Johnson, R. W. (1980). Axiomatic derivation of the principle of maximum entropy and the principle of minimimum cross-entropy. IEEE Transactions on
Information Theory, IT-26 (1), 2637.
Ulam, S. (1930). Zur masstheorie in der allgemeinen mengenlehre. Fundamenta Mathematicae, 16, 140150.
Walley, P. (1996). Inferences from multinomial data: learning about a bag of marbles.
Journal of the Royal Statistical Society, Series B, 58 (1), 334. Discussion of the
paper by various commentators appears on pp. 3457.

356

fi