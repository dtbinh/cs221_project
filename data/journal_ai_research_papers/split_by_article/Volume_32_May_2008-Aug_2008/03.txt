Journal of Artificial Intelligence Research 32 (2008) 525-564

Submitted 10/07; published 06/08

Efficiency and Envy-freeness in Fair Division of Indivisible
Goods: Logical Representation and Complexity
Sylvain Bouveret

sylvain.bouveret@onera.fr

ONERA Centre de Toulouse.
2, avenue Edouard Belin, BP74025.
31055 Toulouse cedex 4, FRANCE.

Jerome Lang

lang@irit.fr

IRIT-CNRS. 118, route de Narbonne.
31062 Toulouse cedex, FRANCE.

Abstract
We consider the problem of allocating fairly a set of indivisible goods among agents
from the point of view of compact representation and computational complexity. We start
by assuming that agents have dichotomous preferences expressed by propositional formulae. We express efficiency and envy-freeness in a logical setting, which reveals unexpected
connections to nonmonotonic reasoning. Then we identify the complexity of determining
whether there exists an efficient and envy-free allocation, for several notions of efficiency,
when preferences are represented in a succinct way (as well as restrictions of this problem).
We first study the problem under the assumption that preferences are dichotomous, and
then in the general case.

1. Introduction
Allocating goods to agents is an important issue that has been considered from different perspectives in economics (especially social choice theory) and in computer science (especially
Artificial Intelligence and Operations Research), and arises in various real-world settings:
auctions, divorce settlements, electronic spectrum and frequency allocation, airport traffic management, or the fair and efficient exploitation of Earth Observation Satellites (see
the survey from Chevaleyre, Dunne, Endriss, Lang, Lematre, Maudet, Padget, Phelps,
Rodrguez-Aguilar, & Sousa, 2006, for a detailed description). The general issue also covers
a huge variety of allocation problems, depending on the following parameters (see again the
work from Chevaleyre et al., 2006, for a detailed taxonomy):
 the nature of the resources to be allocated (are they divisible or not? single-unit or
multi-unit?);
 the nature of the preferences of the agents (are they numerical or simply ordinal? can
there be preferential dependencies between goods?)
 the nature of the permitted allocations (can goods be shared among several agents?
do all goods have to be allocated? can allocations be accompanied by side payments?);
 the evaluation of the quality of an allocation (Pareto-efficiency, utilitarian or egalitarian social welfare etc.);
c
2008
AI Access Foundation. All rights reserved.

fiBouveret & Lang

 the nature of the process that leads to the allocation (centralized or decentralized).
For instance, standard combinatorial auctions (Cramton, Shoham, & Steinberg, 2005)
typically correspond to indivisible goods (possible multi-unit), numerical preferences with
possible dependencies between goods, monetary payments, maximization of the total value
of sold items, and a centralized computation.
In this paper we focus on fair division of indivisible goods without money transfers1 . Fair
division makes a prominent use of ex-post fairness criteria such as equity and envy-freeness,
and on this point departs from auctions, that rather focus on other kinds of fairness (as
well as on efficiency of the procedure), such as truthful mechanisms, or fairness of the
procedure itself (Brams & Taylor, 1996; Young, 1995). A key concept in the literature on
fair division is envy-freeness: an allocation is envy-free if and only if each agent likes her
share at least as much as the share of any other agent. Ensuring envy-freeness is considered
a desirable property; however, envy-freeness alone does not suffice as a criterion for finding
satisfactory allocations (this is especially obvious if it is not compulsory to allocate all
goods: in this case, not allocating anything to anyone results in an envy-free allocation, yet
totally unsatisfactory), therefore it has to be paired with some efficiency criterion, such as
Pareto optimality or maximum social welfare. However, it is known that for any reasonable
notion of efficiency, there are profiles for which no efficient and envy-free allocation exists2
(Brams, Edelman, & Fishburn, 2003). This is even trivial if every good must be assigned
to someone: in this case, there are profiles for which not even an envy-free allocation exists.
Another well-known notion of fairness (that we do not consider in this paper, except for one
result) is Rawlsian egalitarianism, which says that an allocation is equitable if it maximizes
the satisfaction of the least satisfied agent. Unlike envy-freeness, egalitarianism requires
interpersonal comparability of preferences.
Whereas social choice theory has developed an important literature on fair division,
computational issues have rarely been considered. On the other hand, artificial intelligence
has studied these issues extensively, but until now has focused mainly on combinatorial
auctions and related classical utilitarian problems. Combinatorial auctions, aiming at maximizing the auctioneers revenue (consisting in the sum of the prices paid by all agents),
are only a specific form of allocation process, namely a pure utilitarian form with money
transfers in which considerations such as equity and fairness are not relevant. The literature
on combinatorial auctions and related problems has been investigating issues such as compact representation (so as to allow agents to express their bids in a concise way  see the
work from Nisan, 2005, for an overview) as well as computational complexity, algorithms,
tractable subclasses and approximation. Complexity issues for negotiation (where agents
exchange goods by means of deals) have also been studied (e.g. Dunne, Wooldridge, &
Laurence, 2005; Chevaleyre, Endriss, Estivie, & Maudet, 2004).
The above discussion reveals the existence of a gap (summarized in Table 1): compact
representation and complexity issues for fair division have received very little attention
until now, apart of the recent work (Lipton, Markakis, Mossel, & Saberi, 2004) which
1. Note that the possibility of money transfers reintroduces divisibility to some extent, considering money
as a particular  and divisible  good.
2. Consider for example the situation where we have a single item and two agents who both want it: in
that case, any allocation is either efficient but not envy-free (when the item is given to one of the two
agents), or envy-free but not efficient (if the item is not allocated to anyone).

526

fiEfficiency and Envy-freeness in Fair Division of Indivisible Goods

studies approximation schemes for envy-freeness. The need for compact representation
arises from the following dilemma, formulated by several social choice theorists: either (a)
allow agents to express any possible preference relation on the set of all subsets of items,
and end up with an exponentially large representation (which actually happens for example3
in the work from Herreiner & Puppe, 2002); or (b) severely restrict the set of expressible
preferences, typically by assuming additive independence between items, and then design
procedures where agents express preferences between single items, these preferences being
then extended to sets of items by assuming additivity, thus giving up the possibility of
expressing preferential dependencies such as complementarity and substitutability effects
among items; this is the path followed by Brams et al. (2003), Brams and King (2005) and
Demko and Hill (1998). Yet, as we advocate in this paper, conciliating conciseness and
expressivity is possible, by means of compact representation.
axiomatic study
auctions
(and related problems)

economics

fair division

economics
(especially social choice)

computational study
computer science
(especially AI)
?

Table 1: Computational issues in fair division.
As in most works on fair allocation of indivisible items, we focus on the joint search
for envy-freeness and efficiency. The impossibility to guarantee the existence of an efficient
envy-free allocation implies that determining whether there exists such an allocation is a
crucial task, since a positive answer leads to choose such an allocation whereas a negative
answer calls for a relaxation of one of the criteria, which has been investigated in few papers
(Lipton et al., 2004; Chevaleyre, Endriss, & Maudet, 2007b).
We consider the problem of determining whether there exists an efficient and envy-free
allocation from the point of view of compact representation and computational complexity.
First, since in most cases agents have preferential dependencies (or synergies) between
goods, we raise the issue of how a fair division problem of indivisible goods should be
expressed. We focus first in the simple case where agents have dichotomous preferences,
that is, they simply express a partition between satisfactory and unsatisfactory shares. The
interest of such a restriction is that in spite of the expressivity loss it imposes, it will be
shown to be no less complex than the general case, while being much simpler to expose.
Dichotomous preferences have been considered before in social choice contexts, such as by
Bogomolnaia, Moulin, and Stong (2005) in a fair division context, and of course in approval
voting (Brams & Fishburn, 1978), where every voter specifies a dichotomous preference on
the set of candidates. The most natural representation of a dichotomous preference (with
preferential dependencies between formulae  otherwise the problem is trivial) is by a single
3. Quoting from the work of Brams et al. (2003): Herreiner and Puppe (...) assume that each person has a
linear preference order in 2B . This allows for complementarity and substitutability effects among items
(...). In view of interdependencies that may beset subset evaluations (...), the procedures of Herreiner
and Puppe offer a creative way of dealing with subset preference. On the other hand, the sheer number
of subsets (more than a million when n = 20) and their presumption of clear preference between subsets,
could detract from the practicability of their procedures.

527

fiBouveret & Lang

propositional formula, where variables correspond to goods. Expressing envy-freeness and
efficiency within this logical representation reveals unexpected connections to nonmonotonic
reasoning; this issue will be addressed in Section 3.
The following Sections are devoted to a detailed complexity study of the following problem: given some fair division problem, does there exist an efficient end envy-free allocation?. The latter problem will be studied for different notions of efficiency and various
restrictions. We start (in Sections 3 and 4) by assuming that preferences are dichotomous,
and we identify the complexity of the existence of an envy-free and Pareto-efficient allocation, which turns out to be p2 -complete. Then we consider several restrictions of the
latter problem, namely, (a) fixing the number of agents to two; (b) forcing all agents to
have identical preferences; (c) restricting the syntax of the propositional formulae expressing the preferences of the agents. Then we study variations of the problem obtained by
replacing Pareto-efficiency by other notions of efficiency, namely: (a) asking for complete
allocations (such that every good is allocated to an agent); (b) requiring that a maximum
number of agents be satisfied. In Section 5 we then consider the more general problem
obtained by removing the assumption that preferences are dichotomous. As the problem
then becomes very dependent on the choice of a particular language for compact preference
representation, we pick a particular one (weighted propositional formulae) that extends in
a simple way the pure propositional representation considered in Section 3, and identify the
complexity of the existence of envy-free and efficient allocations, again for several notions
of efficiency. Finally, in Section 6 we sum up our contributions and discuss related work
and further issues.

2. Background
In this section we provide some basic concepts and definitions that we will use all along the
paper.
2.1 Fair Division Problems
Definition 1 (Fair division problem) A fair division problem4 is a tuple P = hI, X, Ri
where
 I = {1, . . . , N } is a set of agents;
 X = {x1 , . . . , xp } is a set of indivisible goods;
 R = hR1 , . . . , RN i is a preference profile, where each Ri is a reflexive, transitive and
complete relation on 2X .
Ri is the preference relation of agent i. ARi B is alternatively denoted by Ri (A, B) or
by A i B; we write A i B (strict preference) for (A i B and not B i A) and A i B
(indifference) for (A i B and B i A).
In addition, Ri is said to be monotonic if and only if for all A, B, A  B  X implies
B i A. R = hR1 , . . . , RN i is monotonic if and only if Ri is monotonic for every i.
4. In the following, we will use indifferently the terms fair division and resource allocation.

528

fiEfficiency and Envy-freeness in Fair Division of Indivisible Goods

Definition 2 (Allocation) An allocation for P = hI, X, Ri is a mapping  : I  2X
such that for all i and j 6= i, (i)  (j) = . If for every x  X there exists an i such that
x  (i) then  is a complete allocation.
In other words, it is not possible in our framework to give the same good to different
agents at the same time, but it is possible to throw away some goods. In this paper, we
will focus especially on two desirable properties of the allocations: Pareto-efficiency and
envy-freeness.
Definition 3 Let ,  0 two allocations.  dominates  0 if and only if (a) for all i, (i) i
 0 (i) and (b) there exists an i such that (i) i  0 (i).  is (Pareto-) efficient if and only
if there is no  0 such that  0 dominates .
Definition 4 An allocation  is envy-free if and only if (i) i (j) holds for all i and
all j 6= i.
2.2 Propositional Logic
Let V be a finite set of propositional variables. LV is the propositional language generated
from V , the usual connectives ,  and  and the Boolean constants > and  in the usual
way5 .
An interpretation M for LV is an element of 2V , i.e., a truth assignment to symbols:
for all x  V , x  M (resp. x 6 M ) means that M assigns x to true (resp. to false).
M od() = {M  2V | M |= } is the set of all models of  (the satisfaction relation |= is
defined as usual, as well as satisfiability and logical consequence).
A literal is a formula of LV of the form x or of the form x, where x  V . A formula
 is under negative normal form (or NNF) if and only if any negation symbol in  appears
only in literals. Any formula can be turned in polynomial time into an equivalent NNF
formula. For instance, a  (b  c) is not under NNF but is equivalent to the NNF formula
a  (b  c).
A formula is positive if it contains no occurrence of the negation symbol. For instance,
a  (b  c) and a  (a  b) are not positive, whereas a  (b  c) and (a  c)  (a  b) are.
> and  are considered positive as well.
Let   LV . V ar()  V is the set of propositional variables appearing in . For
instance, V ar((a  c)  (a  b)) = {a, b, c} and V ar(>) = .
V
Lastly, if S = {1 , . . . , n } is a finite
W set of formulae then S = 1  . . .  n is the
conjunction of all formulae of S, and S = 1  . . .  n is the disjunction of all formulae
of S.
2.3 Computational Complexity
In this paper we will refer to some complexity classes located in the polynomial hierarchy.
BH2 (also referred to as DP) is the class of all languages of the form L1  L2 where L1 is in
NP and L2 in coNP. p2 = PNP is the class of all languages recognizable by a deterministic
Turing machine working in polynomial time using NP oracles. Likewise, p2 = NPNP . p2 =
5. Note that connectives  and  are not allowed; this is important for the definition of positive formulae
(to come).

529

fiBouveret & Lang

p2 [O(log n)] is the subclass of p2 of problems that only need a logarithmic number of
oracles. See for instance the book by Papadimitriou (1994) for further details.

3. Fair Division Problems with Dichotomous Preferences: Logical
Representation
We start by considering in full detail the case where preferences are dichotomous.
Definition 5 Ri is dichotomous if and only if there exists a subset Goodi of 2X such that
for all A, B  X, A i B if and only if A  Goodi or B 
6 Goodi . R = hR1 , . . . , RN i is
dichotomous if and only if every Ri is dichotomous.
There is an obvious way of representing dichotomous preferences compactly, namely by
a propositional formula i (for each agent i) of the language LX (a propositional symbol
vx for each good x) such that M od() = Goodi . Formally:
Definition 6 Let Ri be a dichotomous preference on 2X , with Goodi its associated subset
of 2X , and i a propositional formula on the propositional language LX . We say that i
represents Ri if and only if M od(i ) = Goodi .
Clearly,
 preference Ri there is a formula i representing Ri : i =
Vfor any dichotomous
V
v

v
x . Furthermore, this formula is unique up to logical equivAGoodi
xA x
x6A
alence.
W

Example 1 X = {a, b, c} and Goodi = {{a, b}, {b, c}}. Note that Ri is not monotonic.
Then i = (a  b  c)  (a  b  c) represents Ri . So does 0i = b  ((a  c)  (a  c)),
which is logically equivalent to .
An easy but yet useful result:
Proposition 1 Let Ri be a dichotomous preference on 2X . The following statements are
equivalent:
1. Ri is monotonic;
2. Goodi is upward closed, that is, A  Goodi and B  A imply B  Goodi .
3. Ri is representable by a positive propositional formula.
Proof (1)  (2). Suppose Ri is monotonic, and let A  Goodi and B  A. Then we must have
B i A, and therefore B  Goodi (since A  Goodi ).
(2)  (3). Suppose that Goodi is upward closed,
and consider
`V the set
 min (Goodi ) of all inclusionW
minimal sets in Goodi . Then the formula i = Amin (Goodi )
xA vx represents Ri for the following
reasons. For each B  Goodi , there is a set A  min (Goodi ) such that A  B. Thus the corresponding
conjunction in i is satisfied, then i is satisfied. Conversely, for each set B 6 Goodi , there is no
A  min (Goodi ) such that A  B. Therefore, none of the terms in i is satisfied, then i is not
satisfied. Moreover, i is clearly a positive propositional formula.
(3)  (1). Suppose that Ri is representable by a positive propositional formula i , and let A and
B be two sets of items such that A  B. If A 6 Goodi then clearly B i A. If A  Goodi , then
A  M od(i ). Since i is positive, then B  M od(i ) also. Therefore B  Goodi , and finally B i A.


530

fiEfficiency and Envy-freeness in Fair Division of Indivisible Goods

From now on, we assume that allocation problems P are represented in propositional
form, namely, instead of I, X and R we only specify h1 , . . . , N i. I and X are obviously
determined from h1 , . . . , N i. In the following, we will also write the propositional variables
corresponding to the items x instead of vx for short, since it is often unambiguous.
Let P = h1 , . . . , N i be an allocation problem with dichotomous preferences; then for
each i  N , we rewrite i into i obtained from i by replacing every variable x by the
new symbol xi . For instance, if 1 = a  (b  c) and 2 = a  d then 1 = a1  (b1  c1 ) and
2 = a2  d2 .
Example 2 Consider the following allocation problem: 1 = a  (b  c), 2 = a and
3 = ab (therefore I = {1, 2, 3} and X = {a, b, c}). All the formulae are positive, therefore
preferences are monotonic. For instance, Good1 is the set composed of all supersets of {a}
and of all supersets of {b, c}. Then we have
1 = a1  (b1  c1 );
2 = a2 ;
3 = a3  b3
For all i  N , let Xi = {xi , x  X}. An allocation for a standard allocation problem
P corresponds to a model of V = X1  . . .  XN satisfying at most one xi for each x  X.
In other terms, there is a bijective mapping
the set of possible allocations and the
V between
V
models of the following formula: P = xX i6=j (xi  xj ).
V
If allocation are required to be complete, then P is replaced by C
P = P  xX (x1 
. . .  xn ). The rest is unchanged.
Let V = {xi | i = 1, . . . , N, x  X}. Any interpretation M of M od(P ) is such that
it is never the case that xi and xj are simultaneously true for i 6= j, therefore we can map
M  M od(P ) to an allocation simply defined by (i) = {x | M |= xi }. This mapping is
obviously bijective; we will write F () the model of M od(P ) corresponding to allocation
, and of course F 1 (M ) the allocation corresponding to an interpretation M of M od(P ).
Example 2 (continued) For the allocation problem of Example 2, we have:
P = (a1  a2 )  (a1  a3 )  (a2  a3 )
 (b1  b2 )  (b1  b3 )  (b2  b3 )
 (c1  c2 )  (c1  c3 )  (c2  c3 )
The interpretation M such that M only sets a1 , b3 , and c1 to true is clearly a model
of P . It corresponds to the allocation F 1 (M ) = , with (1) = {a, c}, (2) =  and
(3) = {c}.
3.1 Envy-freeness
We now show how the search for an envy-free allocation can be mapped to a model finding
problem. Let j|i be the formula obtained from i by substituting every symbol xi in i
by xj : for instance, if 1 = a1  (b1  c1 ) then 2|1 = a2  (b2  c2 ). Notice that obviously,
we have i|i = i .
We first give the following lemma, which is easy but yet useful:
531

fiBouveret & Lang

Lemma 1 For all i, j, (j)  Goodi if and only if F () |= j|i .
In particular, when i = j we have (i)  Goodi if and only if F () |= i .
Proof By definition of F , (j)  Goodi if and only if {x | F () |= xj }  Goodi , that is, {x | F () |=
xj } |= i . The latter relation is equivalent to {xi | F () |= xj } |= i , and finally to {xj | F () |=
xj } |= j|i by definition of j|i , from which we can deduce the result.


Using this lemma, we can now map the envy-freeness property to the satisfiability of a
logical formula:
Proposition 2 Let P = h1 , . . . , N i be an allocation problem with dichotomous preferences under propositional form, and the formulae j|i and mapping F as defined above.
Let



^
^
i    
P =
j|i
i=1,...,N

j6=i

Then  is envy-free if and only if F () |= P .
Proof Let  be an allocation.  is not envy-free if and only if there is a pair (i, j), with i 6= j such
that (j) i (i), that is (j)  Goodi and (i) 6 Goodi , which is in turn equivalent to F () |= j|i

and F () 6|= i by lemma 1. Therefore  is envy-free if and only if F () |= P .

The intuitive meaning of this result is that an allocation  is envy-free if and only if,
for every agent i, either i is satisfied by her share (i), or she is not but she envies no one,
that is, for every j, she would not be satisfied by js share either.
The search for envy-free allocations can thus be reduced to a model finding problem:
{F 1 (M ) | M |= P  P } is the set of envy-free allocations for P. Note that, importantly,
P  P has a polynomial size (precisely, quadratic) in the size of the input data.
The problem of existence of an envy-free allocation without any other property is not
very interesting, because such an allocation always exists : it suffices to consider the allocation that gives an empty share to everyone. However,
 the problem of deciding whether there exists an envy-free allocation satisfying some
property expressible by a polynomial size formula (e.g. completeness) can be reduced
to a satisfiability problem;
 the problem of finding (resp. counting) all envy-free allocations comes down to the
problem of finding (resp. counting) all models of P  P .
Example 2 (continued) For the allocation problem of Example 2, we have:
P =

((a1  (b1  c1 ))  ((a2  (b2  c2 ))  (a3  (b3  c3 ))))
(a2  (a1  a3 ))
((a3  b3 )  ((a1  b1 )  (a2  b2 )))

M od(P  P ) = {{c1 }, {c1 , b3 }, {c2 , b3 }, {c2 }, {b3 }, {c3 }, }.
There are therefore 7 envy-free allocations, namely (c, , ), (c, , b), (, c, b), (, c, ),
(, , b), (, , c) and (, , ). Note that none of them is complete.
532

fiEfficiency and Envy-freeness in Fair Division of Indivisible Goods

3.2 Efficient Allocations
Similarly as for the envy-freeness property, Pareto-efficiency can be expressed as a logical
property. The logical expression of this property requires the definition of a maximal consistent subset of a set of formulae.
Definition 7 Let  = {1 , . . . , m } be a set of formulae
and  be a formula. S   is a
V
maximal -consistent subset of Vif and only if (a) S   is consistent and (b) there is
no S 0 such that S  S 0   and S 0   is consistent. Let M axCons(, ) be the set of
all maximal -consistent subsets of . Moreover, we will write M axCons() the set of all
maximal-consistent subsets of , that is, the set M axCons(, >).
Proposition 3 Let P = h1 , . . . , N i an allocation problem. Let P = {1 , . . . , N }.
Then  is Pareto-efficient for P if and only if {i | F () |= i } is a maximal P -consistent
subset of P .
Proof Let  be an allocation. Let Sat() be the set of agents satisfied by , that is, by Lemma 1,
of Sat(), and F () |= P by
|= i by definition V
the set {i | F () |= i }. For all i  Sat(),
V F ()

|
i

Sat()}
=

{i | F () |= i }. Therefore
definition
of
F
().
Therefore
F
()
|=

{
P 
P 
i
V 

{i | F () |= i }  P is consistent.
By definition,  is Pareto-dominated if and only if there is an allocation  0 such that Sat( 0 ) )
Sat(). Therefore, if  is Pareto-dominated there is a consistent subset S  P (corresponding
to
V
{i | F ( 0 ) |= i }) such that {i | F () |= i }  S. Moreover, since  0 is an allocation, S  P is
consistent.
V
Conversely,
{i | F () |= i }  S and S  P is consistent, and M be
V let S  P be such that
0
1
a model of S  P . By definition,  = F (M ) is a well-defined allocation, and  0 (i)  Goodi for all
i  S. Since {i | F () |= i }  S, we have Sat( 0 ) ) Sat(). Therefore  is Pareto-dominated. 

This simple result suggests that efficient allocations can be computed from the logical
expression P of the problem, namely, by computing the maximal
P -consistent subsets of
V
P ; call them {S1 , . . . , Sq }. Then for each Si , let Mi = M od( Si P ) and let M = qi=1 Mi .
Then F 1 (M ) is the set of all efficient allocations for P . Note that there are in general
exponentially many maximal P -consistent subsets of P (and therefore exponentially many
efficient allocations). This can be tempered by (a) there are many practical cases where
the number of maximal consistent subsets is small; (b) it is generally not asked to look for
all efficient allocations; if we look for just one, then this can be done by computing one
maximal P -consistent subset of P .
Example 2 (continued) The maximal
P -consistent subsets of P are S1 =V{1 , 2 },
V




S2 = {1 , 3 } and S3 = {2 , 3 }.
S1 VP has only one model: {b1 , c1 , a2 }.
S 2  P
has two models: {a1 , b3 } and {b1 , c1 , a3 }. S3  P has one model: {a2 , b3 }. Therefore the
four efficient allocations for P are (bc, a, ), (a, , b), (bc, , a) and (, a, b). None of them
is envy-free.
3.3 Efficient and Envy-free Allocations
We are now in position of putting things together. Since envy-free allocations correspond to
the models of P and efficient allocations to the models of maximal P -consistent subsets
of P , the existence of an efficient and envy-free (EEF) allocation is equivalent to
V the
following condition: there exists a maximal P -consistent subset S of P such that S 
533

fiBouveret & Lang

P P is consistent. In this case, the models of the latter formula are the EEF allocations.
Interestingly, this is an instance of a well-known problem in nonmonotonic reasoning:
Definition 8 A supernormal default theory6 is a pair D = h, i with  = {1 , . . . , m },
where 1 , . . . , m and  are propositional formulae. A propositional formula  is a skeptical
consequence of D, denoted by D | , if and only if for all S  M axCons(, ) we have
V
S   |= .
Proposition 4 Let P = h1 , . . . , N i be a fair division problem. Let DP = hP , P i.
Then there exists an efficient and envy-free allocation for P if and only if DP 6| P .
Proof Let P = h1 , . . . , N i be a fair division problem. Let  be a Pareto-efficient and envy-free
V
allocation, and S = {i | F () |= i }.
2. We also have F () |= S
V Then F () |= P by Proposition
V
by definition
of S, and then F () |= S  P , which proves that S  P is consistent, or, in other
V
terms, S 6|= P . Moreover,
V S is a maximal P -consistent subset of P by Proposition 3. Thus
S  M axCons(P , P ), and S  P 6|= P , which implies hP , P i 6| P by definition of 6| .

there is a set S  M axCons(P , P ) such that
V Conversely, suppose that hP , P i 6| P . Then
S  P V
P has a model M . By Proposition 3, F 1 (M ) is a Pareto-efficient allocation (since M is
a model of S  P ), and by Proposition 2, F 1 (M ) is envy-free (since M is a model of P ).


This somewhat unexpected connection to nonmonotonic reasoning
has several impliV
cations. First, EEF allocations correspond to the models of
S  P  P for S 
M axCons(P , P ); however, M axCons(P , P ) may be exponentially large, which argues for avoiding to start computing efficient allocations and then filtering out those that
are not envy-free, but rather compute EEF allocations in a single step, using default reasoning algorithms. Thus, fair division may benefit from computational work in default logic
and connected domains such as belief revision and answer set programming (Baral, 2003;
Gebser, Liu, Namasivayam, Neumann, Schaub, & Truszczynski, 2007). Moreover, alternative criteria for selecting extensions in default reasoning (such as cardinality, weights or
priorities) correspond to alternative efficiency criteria in allocation problems.

4. Allocation Problems with Dichotomous Preferences: Complexity
We will study in this section the complexity of the problem of the existence of an EEF
allocation and some of its restrictions, in the case where preferences are dichotomous, for
several notions of efficiency.
4.1 Complexity of the General Problem
It is known that skeptical inference is p2 -complete (Gottlob, 1992); now, after Proposition
4, the problem of the existence of an EEF allocation can be reduced to the complement of
a skeptical inference problem, which immediately tells that it is in p2 . Less obviously, we
now show that it is complete for this class, even if preferences are required to be monotonic.
To prove hardness, we will use the following restriction of the skeptical inference problem:
Problem 1: restricted skeptical inference (rsi)
INSTANCE: A set of propositional formulae  = {1 , . . . , n }.
QUESTION: do all maximal-consistent subsets of  contain 1 ?
6. Supernormal defaults are also called normal defaults without prerequisites (e.g. Reiter, 1980).

534

fiEfficiency and Envy-freeness in Fair Division of Indivisible Goods

Proposition 5 The problem rsi is p2 -complete.
Proof Membership to p2 comes easily from the fact that the problem rsi is a restriction of the
skeptical inference problem, where the formula  to infer is simply 1 . Hardness comes from the fact
that from any instance h, , i of the skeptical inference problem, we have h, i |  if and only if
h{}  , i | , if and only if h{  }  {1  , . . . , n  }, >i | , if and only if all maximal
-consistent subsets of {, 1 , . . . , n } contain , which is an instance of rsi.


Proposition 6 The problem eef existence of determining whether there exists an efficient and envy-free allocation for a given problem P with monotonic, dichotomous preferences under logical form is p2 -complete.
We show hardness by the following reduction from rsi (the complement problem of rsi,
that is, is there one maximal-consistent subset of  that does not contain 1 ?) to eef
existence. Given any finite set  of propositional formulae, let V = V ar() be the set
of propositional symbols appearing in , and let P() = hI, X, P() i be the following
instance of eef existence:
1. I = {1, 2, ..., n + 3};
2. X = {v i |v  V , i  1...n}  {v i |v  V , i  1...n}  {xi |i  1...n + 1}  {y};
3. for each i = 1, . . . , n, let i be obtained from i by the following sequence of operations:
(i) put i into NNF form (let i0 be the result); (ii) for every v  V , replace, in i0 ,
each (positive) occurrence of v by v i and each occurrence of v by v i ; let i be the
formula obtained. Then:
 for i = 1, . . . , n, i = i  xi ,
V



Vn
Vn
i 
i
n+1  y,
 n+1 =
v
v

x
vV
i=1
i=1
 n+2 = y,
 n+3 = 1 .
We will now prove Proposition 6 using several lemmas.
Lemma 2 An allocation  for P is said to be regular if and only if for all i  n + 3,
(i)  (i), where
S
S
 for all i  n, (i) = vV {v i , v i } {xi };
S
S
 (n + 1) = vV ,i=1,...,n {v i , v i } {xn+1 , y};
 (n + 2) = {y}.
 (n + 3) = (1).
Given some allocation , let now R be defined by R (i) = (i)  (i). Then
1. R is regular;
2.  is efficient if and only if R is efficient;
535

fiBouveret & Lang

3. if  is envy-free then R is envy-free.
Proof (1) is obvious. For all i, the goods outside (i) do not have any influence on the satisfaction
of i (since they do not appear in i ), therefore R (i) i (i), from which (2) follows. The formulae
i being positive, the preference relations i are monotonic, therefore (j) i R (j) holds for all i, j.
Now, if  is envy-free then for all i, j we have (i) i (j), therefore R (i) i (i) i (j) i R (j)
and therefore R is envy-free, from which (3) follows.


Lemma 3 If  is regular then
1. 1 can only envy n + 3;
2. n + 3 can only envy 1;
3. 2, . . . , n envy no one;
4. n + 1 can only envy n + 2;
5. n + 2 can only envy n + 1;
Proof First, note that for any i, j 6= i, i envies j if and only if (i) |= i and (j) |= i .
1. Let i = 1 and j  {2, . . . , n, n + 2}. If 1 envies j, then x1  (j).  being regular, x1 6 (j),
therefore i cannot envy j.
2. Since n+3 = 1 , the same holds for agent n + 3.
3. Let i  {2, . . . , n} and j 6= i. If i envies j then (j) |= i  xi , which is impossible because
xi 6 (j), due to the regularity of .
4. Assume n + 1 envies j for j  {1, . . . , n,n + 3}. Then (j) |= n+1 . Since
(j) |= y is impossible
`V n
 `V n

V
n+1
i
i
(because  is regular), we have (j) |=

x
, thus (j) |= xn+1
v

v
vV
i=1
i=1
which is impossible as well, since  is regular.
5. Let i = n + 2 and j  {1, . . . , n, n + 3}. If i envies j then (j) |= y, which is impossible because
 is regular.


Lemma 4 Let  be a regular allocation satisfying n + 1 and n + 2 and leaving 1 and n + 3
unsatisfied. Let M () be the interpretation on V obtained from  by: for all v  V ,
M () |= v (i.e., v  M ()) if n + 1 receives v 1 , . . . , v n , and M () |= v otherwise, i.e., if
n + 1 receives v 1 , . . . , v n . Then  is efficient and envy-free only if M () 6|= 1 .
Proof Let  be a regular allocation satisfying n + 1 and n + 2. Since  satisfies n + 2, y  (n + 2).
Now,  satisfies n + 1 without giving her y, therefore, for any v, n + 1 receives either all the v i s or all
the v i s. This shows that our definition of M () is well-founded.
Now assume that  is efficient and envy-free, and suppose that M () |= 1 . One S
of the agents 1
1
and n +
3
is
satisfiable
without
spoiling
any
agent
j

6
{1,
n
+
3},
by
giving
her
{x
}

(v i | M () |=
S i
i
i
v )  (v | M () |= v ). Then since  is efficient it must satisfy at least one of 1 and n + 3. It cannot
satisfy them simultaneously (because of x1 ). Thus only one among 1 and n + 3 is satisfied by , the
other one envying her. It contradicts the envy-freeness of , thus proving that M () 6|= 1 .


Lemma 5 For each interpretation M over V , let us define M : I  2X by:
 for each i  1, . . . , n, M (i) = {v i | M |= v}  {v i | M |= v}  {xi };
 M (n + 1) = {xn+1 }  {v i | M |= v, i = 1, . . . , n}  {v i | M |= v, i = 1, . . . , n};
 M (n + 2) = {y}
536

fiEfficiency and Envy-freeness in Fair Division of Indivisible Goods

 M (n + 3) = .
Then:
1. M is a well-defined and regular allocation satisfying n + 1 and n + 2;
2. M (M ) = M (M (M ) is obtained from M as in Lemma 4).
3. for any i  1, . . . , n, M satisfies i if and only if M |= i .
4. M is efficient if and only if M satisfies a maximal consistent subset of .
Proof
1. One can easily check that M does not give the same good to more than one individual,
and that M can only give to each agent i a set of items that are in (i). Therefore it is a
well-defined and regular allocation. This allocation obviously satisfies n + 1 and n + 2.
2. If M |= v then M (n + 1) contains {v i | i = 1, . . . , n} and therefore M (M ) |= v. The case
M |= v is similar.
3. Let i  1, . . . , n. Since M gives xi to i, M satisfies i if and only if F (M (i)) |= i , which is
equivalent to M |= i .
4. From point 3, {i | M satisfies i} = {i | M |= i }  {n + 1, n + 2} (obviously, n + 3 is not
satisfied). Now, since preferences are dichotomous, an allocation  is efficient if and only if the
set of individuals it satisfies is maximal with respect to inclusion. Therefore, M is efficient if
and only if M satisfies a maximal consistent subset of .


Lemma 6 Let  be a regular and efficient allocation satisfying n + 1 and n + 2. Then M ()
satisfies a maximal consistent subset of .
Proof  is regular and satisfies n+1 and n+2, therefore obviously (n+2) = {y} and by lemma 4 M ()
is well-defined. We will now consider the allocation M () , defined from  like in the previous lemmas.
We have M () (n + 1) = {xn+1 }  {v i |M () |= v}  {v i |M () |= v} = {xn+1 }  {v i |{v 1 , . . . , v n } 
(n + 1)}  {v i |{v 1 , . . . , v n }  (n + 1)}. Since n + 1 is satisfied by , (n + 1) must contain {xn+1 },
from what we assert that M () (n + 1)  (n + 1).
Let i  {2, . . . , n}. Since  is regular, we have (i)  (i). Since M () is a complete allocation by
definition, and regular by lemma 5, (i)  M () (i)  M () (n + 1). Since M () (n + 1)  (n + 1) we
have (i)  M () (i)  (n + 1), and thus (i)  M () (i)  (n + 1).  being an allocation, we have
of course (i)  (n + 1) = , from what follows (i)  M () (i).
 being regular, we have (1)(n+3)  (1)(n+3). Since (1) = (n+3), the latter inclusion
comes down to (1)  (n + 3)  (1). Now, we have (1)  M () (1)  M () (n + 1)  M () (n + 3) for
similar reasons as for i  {2, . . . , n}, which, together with M () (n+1)  (n+1) and M () (n+3) = ,
comes down to (1)  M () (1)  (n + 1), and, with (1)  (n + 1) = , we deduce the inclusion
(1)  (n + 3)  M () (1).
We can now prove that M () is efficient. Since preferences are monotonic, all individuals but n + 3
satisfied by  are satisfied by  0 as well (since i 6= n + 3, (i)  M () (i)).
 If n + 3 was not satisfied by , then immediately we deduce that M () is efficient.
 If n + 3 was satisfied by , suppose that M () is not efficient. In that case, there is an allocation
 0 such that i, M () satisfies i implies  0 satisfies i and there is a particular j 6= 1 such that  0
satisfies j and M () does not satisfy j. Clearly,  0 satisfies 1 (since M () does), thus j 6= n + 3
(satisfying simultaneously 1 and n + 3 is impossible). Consider the allocation  00 deduced from
 0 just from swapping the shares of 1 and n + 3. We have, for all i  {2, . . . , n + 2},  satisfies i
implies M () satisfies i implies  0 satisfies i implies  00 satisfies i. We also have  satisfies n + 3
and does not satisfy 1, which is the same for  00 . Thus  satisfies i implies  00 satisfies i for all
i. Moreover,  00 satisfies j  {2, . . . , n + 2} (the same j as above) while M () does not, and
therefore neither does . It proves that  is Pareto-dominated, which is contradictory with the
hypotheses.

537

fiBouveret & Lang

Therefore M () is efficient, from which we conclude, together with lemma 5 (point 4), that M ()
satisfies a maximal consistent subset of .


Lemma 7 Any envy-free and efficient allocation for P() satisfies n + 1 and n + 2, and
leaves 1 and n + 3 unsatisfied.
Proof Suppose that  does not satisfy n + 1; then y 6 (n + 1); now, if y  (n + 2) then n + 1 envies
n + 2; if y 6 (n + 2) then  is not efficient because giving y to n + 2 would satisfy n + 2 and thus lead
to a better allocation than .
Now, suppose  does not satisfy n + 2, that is, y 6 (n + 2); if y  (n + 1) then n + 2 envies n + 1;
if y 6 (n + 1) then again,  is not efficient because giving y to n + 2 would satisfy n + 2 and thus lead
to a better allocation than .
Concerning agents 1 and n + 3, one can notice that since they have identical preferences, any
envy-free allocation must either satisfy them both, or leave them both unsatisfied. Since they cannot
be simultaneously satisfied (because of x1 ), any envy-free allocation leaves them both unsatisfied. 

Lemma 8 If there exists an EEF allocation, then there exists a maximal consistent subset
of  that does not contain 1 .
Proof Let  be an efficient and envy-free allocation. By Lemma 2, R is regular, efficient and envyfree. By Lemma 7, R satisfies n + 1 and n + 2 and leaves 1 and n + 3 unsatisfied. Then by Lemma 6,
M (R ) satisfies a maximal consistent subset of , and by Lemma 4, M (R ) 6|= 1 . Therefore {i 
 | M (R ) |= i } is a maximal consistent subset of  and does not contain 1 .


Lemma 9 If there exists a maximal consistent subset of  that does not contain 1 then
there exists an EEF allocation.
Proof Assume that
V there exists a maximal consistent subset S of  that does not contain 1 , and let
M be a model of S. By point 4 of Lemma 5, M is efficient.
By point 1 of Lemma 5, M is regular; then by Lemma 3, M is envy-free if and only if (i) 1 does
not envy n + 3, (ii) n + 3 does not envy 1 (iii) n + 1 does not envy n + 2 and (iv) n + 2 does not envy
n + 1. By definition of M , M does not satisfy n + 3, hence (i) holds. By point 3 of Lemma 5, M 6|= 1
implies that M does not satisfy 1, therefore (ii) holds as well. And finally, by point 1 of lemma 4, n + 1
and n + 2 are satisfied by M , thus (iii) and (iv) also hold. Therefore M is envy-free.


We are now in position of putting things together and proving Proposition 6:
Proof (Proposition 6) From Lemmas 8 and 9, the existence of a maximal consistent subset of  that
does not contain 1 and the existence of an efficient and envy-free allocation for P() are equivalent.
Clearly, P() is computed in polynomial time. Therefore, P is a polynomial reduction from rsi to eef
existence, which shows that the latter problem is p2 -hard, and therefore p2 -complete.


As a corollary, this p2 -completeness result holds for general (not necessarily monotonic)
dichotomous preferences:
Corollary 1 eef existence for general, dichotomous preference under logical form is p2 complete.
4.2 Restrictions on the Language
As a consequence of this high complexity, it is worth studying restrictions and variants of
the latter problem for which complexity may fall down. We will investigate three kind of
intuitive restrictions of the eef existence problem, defined by:
 fixing the number of agents, and especially, restricting the problem to the case where
there are only 2 agents;
538

fiEfficiency and Envy-freeness in Fair Division of Indivisible Goods

 forcing the agents to have identical preferences;
 restricting the syntax of the agents goals, by limiting their expression to some subclasses of propositional formulae (e.g. clauses, cubes, . . . ).
Contrary to the general eef existence problem, the complexity of these restrictions
may be sensitive to whether the preferences are monotonic or not.
4.2.1 Identical Preferences
We start by considering identical dichotomous preference profiles, that is, all agents have
the same preference, i.e. the same formula .
Proposition 7 eef existence with N identical dichotomous, monotonic preferences is
NP-complete. This result holds even for a fixed number of agents N  2.
Proof If preferences are identical, an envy-free allocation satisfies either all agents or none; now, if
preferences are monotonic, it is always possible to satisfy at least one agent (by giving her all the items).
Therefore, an allocation is EEF if and only if it satisfies all the agents. Clearly, it can be checked in
polynomial time that a given allocation satisfies all agents, hence membership to NP.
Hardness comes from an simple reduction from set splitting:
Problem 2: set splitting
INSTANCE: A collection C = {X1 , . . . , Xn } of subsets of a finite set S.
QUESTION: Is there a partition hS1 , S2 i of S such that no subset in C is entirely contained in either
S1 or S2 ?
Given an instance hC, Si of set splitting, let P(C, S) be the following eef existence instance:
Agents:
Objects:
Preferences:

2 agents,
one object x(a) per element a  S,
V
W
V
W
1 = 2 = Xi C aXi x(a) (and as usual k = Xi C aXi xk (a)): each agent
wants at least one object from each set.

It is easy to see that if there is a set splitting hS1 , S2 i of hC, Si, it is possible to find an allocation
that satisfy the two agents, by giving them respectively x(S1 ) and x(S2 ). Conversely, suppose that
there is an efficient and envy-free allocation , then this allocation must satisfy the two agents. Let
1
hS1 , S2 i = hx1 ((1)),
Wx ((2))i. Suppose that there is an Xi  C such that Xi  S1 or Xi  S2 (say
e.g Xi  S1 ). Then aXi x2 (a) is false, thus making 2 false, which is contradictory with the initial
hypothesis. Therefore hS1 , S2 i is a set splitting of hC, Si.
This is clearly a polynomial-time reduction, hence NP-hardness of eef existence with 2 agents
having identical dichotomous and monotonic preferences.


Unlike Proposition 6, Proposition 7 is sensitive to whether preferences are required to
be monotonic or not.
Proposition 8 eef existence with N identical dichotomous preferences is coBH2 -complete.
This result holds even for a fixed number of agents N  2.
Proof If preferences are identical, an envy-free allocation satisfies either all agents or none. Let  be
the formula representing one agents preferences (of course  is identical for all the agents). If  is
satisfiable then it is possible to satisfy at least one agent. In that case, an allocation  is EEF if and
only if  satisfies all the agents. If  is not satisfiable, then every allocation is EEF. Therefore, there
exists an EEF allocation if and only if   1 . . . . . . N is satisfiable or  is unsatisfiable. This shows
membership to coBH2 .
Hardness comes from a simple reduction from sat-or-unsat. Let I = h, i be a pair of propositional formulae, assumed w.l.o.g. to have no variables in common; we map I to the following allocation
problem:

539

fiBouveret & Lang

Agents:
Objects:
Preferences:

2 agents;
2 objects v and v 0 per propositional variable v appearing in , one object w per propositional variable w appearing in , and one object y;
1 = 2 =   0  (y  ) where 0 denotes the formula  where each variable v has
been replaced by v 0 .

1. Suppose that  is not satisfiable, but  is (corresponding to a negative instance of sat-orunsat). Then it is possible to satisfy at least one agent by giving her y and the objects v
corresponding to the variables assigned to true in the model of . However it is not possible to
satisfy simultaneously the second agent because  is unsatisfiable (and by the way so is 0 ), and
the first agent has already taken y. Therefore in that case there is no EEF allocation.
2. Suppose now that  is satisfiable or  is unsatisfiable (corresponding to a positive instance of
sat-or-unsat). There are two cases:
  is satisfiable. In that case, no matter whether  is satisfiable or not, it is possible to satisfy
the two agents by satisfying simultaneously  for the first one and 0 for the second one.
Consequently there is an EEF allocation.
  and  are both unsatisfiable (recall that the case  unsatisfiable and  satisfiable is covered
by point 1). In that case it is clearly impossible to satisfy any agent. In that case, the empty
allocation is efficient and envy-free.
Therefore there is an EEF allocation if and only if  is satisfiable or  is unsatisfiable, which proves
the proposition.


4.2.2 Two Agents
Note that for the two previous results, the hardness result holds for any fixed number of
agents ( 2). Things are different with Proposition 6, for which hardness does not hold
when N is fixed. Namely, we have the following results.
Proposition 9 eef existence for two agents with monotonic dichotomous preferences is
NP-complete.
Proof Hardness is a corollary of Proposition 7. Membership is obtained as follows. Let h1 , 2 i be the
preference profile, where 1 , 2 are both positive. The formulae ,  and the formulae i are defined
as earlier (see section 3), as well as F () for all allocation . Now  is efficient if and only if either (a)
it satisfies both agents, or (b) it satisfies only one agent, and   1  2 is unsatisfiable, or (c) it is
impossible to satisfy even one agent, i.e., both 1 and 2 are unsatisfiable. (c) is impossible because
1 , 2 are positive. Now,  is envy-free if and only if M |= . Therefore,  is EEF if and only if (a)
M |=   1  2 or (b) M |=   (1  2 )  . Thus, there exists an EEF allocation if and only if
(  1  2 )  (  (1  2 )  ) is satisfiable, hence membership to NP.


Proposition 10 eef existence for 2 agents with dichotomous preferences is coBH2 complete.
Proof Membership comes from the following reduction to sat-or-unsat. Consider an instance P of
the EEF problem with 2 agents having respectively the preferences 1 and 2 . We translate this instance
to an instance h,  0 i of sat-or-unsat defined as follows ( is defined as usual):  = (  1  2 ) 
(1  2 )  (1  2 ) and  0 = (1  2 ). We will prove that  is satisfiable or  0 is unsatisfiable if
and only if there is an EEF allocation for P.
1. Suppose that  is not satisfiable, but  0 is. Since  is not satisfiable, no valid allocation can
satisfy both agents (because   1  2 is not satisfiable). Since  0 is satisfiable, it is possible
to satisfy at least one agent (because 1  2 is satisfiable). We can then deduce that every
efficient allocation satisfies exactly one agent. Since (1  2 )  (1  2 ) is not satisfiable,
M od(1 ) = M od(2 ) (in other words, 1 and 2 are logically equivalent). Let  be an allocation

540

fiEfficiency and Envy-freeness in Fair Division of Indivisible Goods

satisfying the agent 1 (the case is similar with agent 2), F () |= 1 , and thus F () |= 2|1 .
Since F () 6|= 2 (because it is impossible to satisfy both agents), F () 6|=  and thus  is not
envy-free. Hence every efficient allocation raises envy: there is no EEF allocation.
2. Suppose now that  is satisfiable or  0 is not satisfiable.
  0 is not satisfiable. This case is easy because it is not possible to satisfy even one agent.
Therefore every allocation is efficient and envy free.
  and  are both satisfiable. There are two cases:
   1  2 is satisfiable. In this case, there is an allocation, corresponding to the model
of   1  2 , that satisfies both agents. This allocation is clearly EEF.
 1 2 is satisfiable but 1 2 is not satisfiable (the case with 2 1 is similar).
In that case it is not possible to satisfy both agents. However, since  is satisfiable, it
is possible to satisfy at least one, and, like in point 1, every efficient allocation satisfies
exactly one agent. Since 1  2 is satisfiable, there is a model of 1 which is not
a model of 2 . The allocation corresponding to this model is such that the agent 1 is
satisfied and not the agent 2, but the latter agent cannot envy the first one.
It finally proves the correctness of the reduction, which is clearly polynomial.
Hardness comes directly from Proposition 8.



4.2.3 Restriction on the Propositional Language
In the previous results, we made no specific assumptions on the formulae expressing the
agents preferences, except (sometimes) monotonicity. However, if we restrict the set of possible propositional formulae, it can decrease the complexity of the eef existence problem.
We investigate first two natural restrictions on the propositional language: in the first case
we restrict the formulae to the set of clauses (disjunctions of literals), in the second case
the preferences are expressed using cubes only (conjunctions of literals). These restrictions
match two different kinds of real-world problems.
 The case, where the agents preferences are represented by clauses, corresponds to the
kind of problems where each agent only wants one single object of a certain class. One
can consider for example a set of patients all waiting for a kidney transplant. Each
patient only needs one kidney, but several ones may be compatible.
 The case, where the agents preferences are represented by cubes, corresponds to the
kind of problems where each agent needs a single bundle of objects. It is typical from
the kind of problems where the agents build the object they want from a set of basic
material (or virtual) components: the set of objects stand for the basic components,
and the cube of one agent stands for the complete device she wants.
Making one of these two assumptions actually decreases the complexity of the eef existence problem: it even renders it tractable in the case of clauses of objects.
Proposition 11 eef existence for agents having dichotomous preferences restricted to
clauses of objects can be solved in polynomial time.
Proof We will first make two additional assumptions and prove that the complexity of the problem
does not decrease under these two assumptions. (1) We suppose first that the agents preferences are
monotonic. If one agent has non-monotonic preferences, it means that there is one negative literal in
her clause. Giving her an empty share will satisfy her without spoiling another agent, thus she can be
safely removed from the problem. (2) We also suppose that each agent wants at least one object. If one

541

fiBouveret & Lang

agent has an empty clause as her goal, it means that no matter what she gets, she cannot be satisfied.
Thus she can also be safely removed from the problem. In the rest of the proof, we will only consider
problems that verify the assumptions (1) and (2).
The proof is based on the following result: when the agents preferences are disjunction of objects
under assumptions (1) and (2), an allocation is Pareto-efficient and envy-free if and only if it satisfies
every agent. The implication  is immediate. To prove the implication  we need to notice that an
agent is satisfied if and only if she receives at least one object of her clause. Now take an allocation 
such that there is an agent i which is not satisfied by . Then either it is possible to satisfy her without
spoiling another agent, because one object of her clause is given to an agent that does not want it, or
that is already satisfied by another agent: in that case  is not Pareto-efficient. Or it is not possible to
do so because all the objects of agent is disjunction have been given to some other agents that truly
want them: in that case, the agent i envies these other agents, and  is thus not envy-free.
Therefore, finding a Pareto-efficient and envy-free allocation here comes down to finding an allocation that gives to each agent one object that she wants. Thus, an instance P of the eef existence
problem can be reduced to a maximal matching problem, in a bipartite graph GP where there is one
node per agent on one side, and one node per object on the other side, and where there is an edge
between an agent-node i and an object-node o if and only if o is in the agent is clause. It can be easily
checked that there is a Pareto-efficient and envy-free allocation if and only if there is a matching of size
n in GP . The latter problem can be solved in time O(nm) (Ford & Fulkerson, 1962), where m is the
size of the biggest disjunction.


Now we investigate the case where the agents preferences are cubes of objects. Not
very surprisingly, this case is harder that the previous one, but remains in NP.
Proposition 12 eef existence for agents having dichotomous preferences restricted to
cubes of objects is NP-complete. The same result holds if we require the preferences to be
monotonic.
Proof The proof is organized as follows. We will first prove membership to NP without any assumption
on the monotonicity of the preferences. Then we will show hardness in the monotonic case.
We first introduce some additional notations. In the following, we will denote by Obj + (i) (resp.

Obj (i)) the set of objects appearing as positive (resp. negative) literals in agent is cube. Let 
be an allocation.  will be said minimally regular if i, either (i) = Obj + (i) or (i) = . For a
given allocation , we will denote by M R its corresponding minimally regular allocation, that is, the
allocation such that for all i, M R (i) =  if Obj + (i) 6 (i), and M R (i) = Obj + (i) if Obj + (i)  (i).
+
We will also write
S Sat() the set of agents satisfied by : Sat(M R ) = {i | M R (i) = Obj (i)}), and
Allocated() = iI (i) (the set of objects allocated to an agent).
We have the following result:
Lemma 10 Let  be an allocation. We have:
 M R is minimally regular;
 Sat()  Sat(M R );
 If  is Pareto-efficient, then M R is also Pareto-efficient.
Proof
 For all agent i, M R (i) =  or M R (i) = Obj + (i) by definition of M R . Therefore
M R is minimally regular.
 Let  be an allocation, and let i be an agent. If i is satisfied by , then Obj + (i)  (i) and
Obj  (i)  (i) = . By definition of M R , we have M R (i) = Obj + (i), and thus we still have
Obj + (i)  (i) and Obj  (i)  (i) = , therefore the agent i is still satisfied by M R . It
proves that Sat()  Sat(M R ).
 Suppose that  is Pareto-efficient, and suppose that there is a  0 that Pareto-dominates
M R . Then we have Sat()  Sat(M R ) ( Sat( 0 ), which contradicts the fact that  is
Pareto-efficient. It proves the third point.


542

fiEfficiency and Envy-freeness in Fair Division of Indivisible Goods

Lemma 11 A minimally regular allocation M R is Pareto-efficient if and only if there is no i such
that (a) i 6 Sat(M R ) and (b) Obj + (i)  Allocated(M R ) = .
Proof Let M R be a minimally regular allocation, and suppose that there is some i such that
i 6 Sat(M R ) and Obj + (i)  X \ Allocated(M R ). Then the allocation  0 such that j 6= i
 0 (j) = M R (j) and  0 (i) = Obj + (i) is well-defined (since Obj + (i) is among the set of unallocated
objects for M R ), and Pareto-dominates M R , since all the agents satisfied by M R are also satisfied
by  0 , and i is now satisfied by  0 whereas she was not by M R .
Conversely, suppose that M R is not Pareto-efficient, and let  0 be a Pareto-efficient alloca0
tion that Pareto-dominates M R . Then by Lemma 10, M
R is Pareto-efficient, and also Pareto0
dominates M R . For all i  Sat(M R ), M R (i) = M R (i) = Obj + (i) since these two allocations are
0
both minimally regular, and each agent satisfied by M R is also satisfied by S
M R . Moreover, there
0
+
is a j 6 Sat(M R ) such that M R (j) = Obj (j). Since Allocated(M R ) = iSat(M R ) Obj + (i)
S
0
+
+
and since M
R (j)  X \
iSat(M R ) Obj (i), we have Obj (j)  X \ Allocated(M R ), which
finally proves the lemma.

The two lemmas provide a procedure to check if a given allocation  is Pareto-efficient: first
compute M R (which can be done in polynomial time). By Lemma 10, Sat()  Sat(M R ). If the
inclusion is strict (that is, Sat() ( Sat(M R )), then obviously  is not Pareto-efficient since M R
Pareto-dominates it. Otherwise, checking if  is Pareto-efficient comes down to checking if M R is
Pareto-efficient, which comes down, according to Lemma 11, to n set inclusion tests. Now, checking if
 is envy-free is still polynomial. Hence the problem is in NP.
We will now prove the hardness of the problem by focusing on monotonic preferences (that is, such
that Obj  (i) =  for all i). For the hardness proof, we will need a few additional lemmas.
Lemma 12 Let  be an allocation and suppose that the agents have monotonic preferences. If  is
envy-free then M R is envy-free.
Proof Let  be an allocation. By Lemma 10, Sat()  Sat(M R ). Conversely, let i  Sat(M R ).
We have M R (i)  (i), which proves that i  Sat(), because we deal with monotonic preferences.
Now suppose that i envies j in M R . Then i is not satisfied by M R , and thus neither satisfied by
. Since M R (j)  (j) and agent is preferences are monotonic, i will still envy j in . Thus if
 is envy-free, so is M R .

An important corollary of this lemma is that when we deal with monotonic cubes, the existence of
a Pareto-efficient and envy-free allocation is equivalent to the existence of a minimally regular Paretoefficient and envy-free allocation. Therefore we can restrict our existence problem to the minimally
regular allocations.
Lemma 13 Let i and j be two different agents (and still suppose that the agents have monotonic
preferences). Then (there exists a minimally regular allocation M R such that i envies j) if and only if
Obj + (i)  Obj + (j).
Proof Let M R be a minimally regular allocation, and suppose that i envies j. Then obviously
i is not satisfied but j is; hence M R (j) = Obj + (j). Since i envies j, we thus have directly
Obj + (i)  Obj + (j).
Conversely, suppose that Obj + (i)  Obj + (j). Then the allocation M R that gives Obj + (j) to
j and nothing to the other agents is clearly minimally regular, and is also obviously such that i
envies j.

Now we introduce the NP-complete problem that we will use to prove NP-hardness (in the monotonic
case):
Problem 3: exact cover by 3-sets (Karp, 1972)
INSTANCE: A set S of size 3q, and a collection C = hS1 , . . . , S|C| i of 3-element subsets of S
QUESTION: Does C contain an exact cover for S, i.e. a sub-collection C 0  C such that every element
of S occur in exactly one member of C 0 ?
Given an instance hS, C = hS1 , . . . , S|C| ii of exact cover by 3-sets (we will assume w.l.o.g. that
the Si are all different), let P(S, C) be the following eef instance:

543

fiBouveret & Lang

Agents:

a set of |C| + 2|S| agents I = I1  I2 , with I1 = {1, . . . , |C|} and I2 = {|C| + 1, . . . , |C| +
2|S|},

Objects:

a set of 2|S| items X = X1  X2 , with X = {x1 , . . . , x|S| } and X 0 = {x01 , . . . , x0|S| },
each pair (xi , x0i ) corresponding to a different element ai of S,
V
for each agent i  I1 , i = aj Si xj , and for each k  {1, . . . , |S|}, |C|+2k1 =
|C|+2k = xk  x0k .

Preferences:

In other words, the first |C| agents preferences correspond to the sets in the collection C, and the last
2|S| agents are gathered by pairs, each member of the same pair having the same preferences as the
other member.
Since all the Si are different and of size 3, for all i 6= j, Si 6 Sj , and thus Obj + (i) 6 Obj + (j).
By definition of the preferences, we also have Obj + (i) 6 Obj + (j) for each (i, j)  I1  I2 and for each
(i, j)  I2  I1 as well. Hence, by Lemma 13, the only potential source of envy in such an instance
comes from an agent in I2 envying her partner. Since it is impossible to satisfy the two agents of the
same pair at the same time, an allocation is envy-free if and only if it does not satisfy any agent from
I2 .
By Lemma 11, a minimally regular allocation M R is Pareto-efficient if and only if there is no i such
that i 6 Sat(M R ) and Obj + (i)  X \ Allocated(M R ). Therefore a minimally regular allocation M R
is Pareto-efficient and envy-free if and only if there is no k  {1, . . . , |S|} such that M R (|C| + 2k  1) =
{xk , x0k } or M R (|C| + 2k) = {xk0 , x0k0 }, and there is no k0  {1, . . . , |S|} such that {xk0 , x0k0 } 
X \ Allocated(M R ) (this last condition comes down to xk0 6 Allocated(M R ), since xk0 and x0k0 must
be allocated together in a minimally regular allocation). Finally, M R is Pareto-efficient and envy-free
if
S and only if kS  {1, . . . , |S|}, there is an i  I1 such that xk  M R (i), that is, if and only if
iI1 M R (i) =
aj S {xj }.
Let M R be a minimally regular allocation. Then we can define the sub-collection g(M R ) by
g(M R ) = {Si  C | M R (i) = Obj + (i)}. The mapping g clearly defines a bijection between the set of
non-overlapping
sub-collections
S
S
S and the set of minimally regular allocations, and one can notice that
iI1 M R (i) =
Sj g(M R )
ak Sj {xk }.
1
0
Let C 0  CSis an exact cover for
S S. Then
S g (C ) exists
S and is a valid minimally regular allocation.
1
0
We also have iI1 g (C )(i) = Sj C ak Sj {xk } = aj S {xj } because C 0 is a cover. Therefore

g 1 (C 0 ) is Pareto-efficient and envy-free by the previous result.
Conversely, suppose that there is a minimally regular Pareto-efficient andSenvy-free allocation
M R .
S
Then g(M R ) is a non-overlapping sub-collection of C, and is such that Si g(M R ) aj Si {aj } =
S
S
S
{aj } = xj {M R (i) | iI1 } {aj }. M R being Pareto-efficient and envy-free, we have
SiI1 xj M R (i)S
S
S
iI1 M R (i) =
aj S {xj }, and hence
xj {M R (i) | iI1 } {aj } =
xj {xj | aj S} {aj } = S. It proves
that g(M R ) is an exact cover for S.
The reduction is clearly polynomial; hence the NP-hardness.


The previous proof (and especially Lemma 13) sheds the light on the hard case of the
eef existence problem with conjunctive preferences. In an instance of this problem, the
only possible source of envy comes from Obj + (i)  Obj + (j) when we deal we minimally
regular allocations. In that case, we cannot satisfy j without raising envy from i. Now if
Obj + (i) ( Obj + (j), one can remove j from the instance, because if she is satisfied, then
i will envy her (note that this is not true for non-monotonic preferences, because one can
give an object to an agent that does not want it to prevent envy from another agent, and
thus we cannot restrict our problem to minimally regular allocations).
If there is no pair (i, j), i 6= j, such that Obj + (i) = Obj + (j), then one can remove every
agent i such that there is a j 6= i such that Obj + (j) ( Obj + (i). After that, it is easy to
see that every minimally regular allocation is envy-free. Since there is at least one Paretoefficient minimally regular allocation, it guarantees the existence of a Pareto-efficient and
envy-free allocation in that case, may the preferences be monotonic or not. More formally:
544

fiEfficiency and Envy-freeness in Fair Division of Indivisible Goods

Proposition 13 There always exists an efficient and envy-free allocation for an instance
of the eef existence problem with agents having dichotomous preferences restricted to
cubes of objects when the following condition holds:

(i, j)  I 2 , i 6= j, (i = j )  k such that k 6= i, k 6= j and Obj + (k) ( Obj + (i) . (1)
Of course, there is no equivalence between condition 1 and the existence of a Paretoefficient and envy-free allocation7 , because it may happen that, given two agents i and j
having the same preferences, the satisfaction of one of these two agents is prevented by
another agent k such that Obj + (i)  Obj + (k) 6= , but Obj + (k) 6 Obj + (i). This is the
hard case: when two agents i and j have identical preferences, but no agent k is such that
Obj + (k) ( Obj + (i), it may however be possible to prevent i and j from being satisfied
by satisfying another agent k 0 such that Obj + (i)  Obj + (k 0 ) 6= , as the following example
shows: 1 = 2 = x1  x2 , and 2 = x2  x3 . Satisfying the agent 2 only leads to an efficient
and envy-free allocation, whereas the condition 1 does not hold.
Proof (Proposition 13) In the following we will denote by I1 the set of all the agents whose preferences are inclusion-minimal, that is, I1 = {i | @j such that Obj + (j)  Obj + (i)}. We will denote by
I2 the other agents: I2 = I \ I1 .
Here is a simple procedure for finding a Pareto-efficient and envy-free allocation: greedily select
a maximal set S of agents from I1 , such that each agent i  S receives Obj + (i) (until it becomes
impossible to select another unsatisfied agent in I1 ).
The allocation  resulting from this procedure is minimally regular, and by Lemma 13 it is clearly
envy-free (by definition of I1 ). Moreover, suppose there is an i 6 Sat() such that Obj + (i)  X \
Allocated(). Then i 6 I1 , since if it was the case, the procedure would have selected her and therefore
she should be satisfied. We have also i 6 I2 , because if it was the case, then there is a j  I1 such
that Obj + (j)  Obj + (i), and therefore Obj + (j)  X \ Allocated(), which is impossible for the same
reasons as above. Therefore,  is also Pareto-efficient by Lemma 11.


After having investigated two natural restrictions on the propositional language used
for dichotomous preferences, we introduce a more general result, based on the fact that
the hardness result of Proposition 6 is clearly linked to the NP-completeness of the sat
problem. Now what happens if we restrict the expression of preferences to a certain class C
such that sat(C) can be solved in polynomial time ? In the general case, where no additional
assumption is made on C we cannot say anything more about the complexity of the eef
existence problem than about the complexity of the general problem. However, if C is
also closed by conjunction, the complexity falls down to NP:
Proposition 14 Let C be a class of propositional formulae closed by conjunction and such
that sat(C) is in P. Then the eef existence for agents having dichotomous preferences
expressed with formulae from class C is in NP.
Proof Membership to NP comes from the fact that, after having non-deterministically guessed an
allocation , checking if it is envy-free and Pareto-efficient can be done in polynomial time. Given an
allocation, checking if it is envy-free can be done in time O(nm) (where m is the length of the biggest
CNF), just by checking, for each unsatisfied agent, if it would have been satisfied with the share of
another agent. Given the set Sat() ofVthe agents satisfied by , checking the Pareto-efficiency of 
comes down to check i  I \ Sat() if jsatI j  i is unsatisfiable. This can be done by making a
linear number of calls to a sat(C) oracle, since all the preferences are in C, and since this class is closed
by conjunction. It thus proves that the eef existence with formulae in C is in NP.

7. Otherwise, the Proposition 12 would be false, or we would have proved that P = NP.

545

fiBouveret & Lang

As a corollary, for all classes of propositional formulae such that sat(C) is polynomial,
and that contain cubes, the eef existence problem is NP-complete. This applies for
example to the class of 2-CNF formulae or to the class of Horn clauses.
4.3 Alternative Efficiency Criteria
The main reason for the high complexity of the eef existence problem is that the Paretoefficiency of an allocation is hard to check. As a consequence, complexity can decrease if
we choose an alternative notion of efficiency. We investigate here two alternative efficiency
criteria: completeness of the allocation, and maximal number of satisfied agents.
First, we weaken the Pareto-efficiency by only requiring the allocations to be complete.
Unsurprisingly, this makes the complexity fall down to NP.
Proposition 15 The problem of deciding whether a complete envy-free allocation for agents
with dichotomous preferences exists is NP-complete, even for 2 agents with identical preferences.
Proof Since checking that an allocation is complete can be done in polynomial time, membership to
NP is straightforward.
We will prove hardness by a reduction from the sat problem. Let  be a propositional formula. We
create the following instance of the resource allocation problem : we map each propositional variable
of  to a different object and we add another object y ; the two agents have the same preferences,
represented by the formula   y. Obviously, every complete allocation satisfies at least one agent (the
one who receives y). If  is satisfiable, it is possible to satisfy the other agent as well with a share
that corresponds to a model of : thus in this case there exists a complete and envy-free allocation.
Conversely, suppose that there exists a complete and envy-free allocation. Then one of the two agents
must be satisfied thanks to  (since y cannot be given to both agents), hence proving that  is satisfiable.


Notice that the hardness proof above is no longer valid if we require preferences to be
monotonic. As an anonymous referee pointed out, it can be proved by a reduction from
exact-cover-by-3-sets that the result holds if we require monotonicity, while relaxing
the restriction on the number of agents. However, we do not know if NP-hardness holds for
two agents with monotonic preferences (we conjecture it does).
Secondly, we can think of looking for cardinality-maximal subsets of satisfied agents,
instead of inclusion-maximal subsets like Pareto-efficiency does.
Proposition 16 The problem of deciding whether an envy-free allocation satisfying a maximal number of agents with monotonic dichotomous preferences exists is p2 -complete.
Proof Checking whether there exists an envy-free allocation satisfying at least k agents is in NP;
therefore, the maximal number of agents who can be satisfied simultaneously can be computed by
dichotomy within log n NP oracles. It then suffices, after this step is done, to guess an allocation and
check that it is envy-free and satisfies a maximal number of agents, adding just one more NP oracle.
Hence the membership to p2 .
Hardness is obtained by a reduction from the following problem8 :
Problem 4: max-index-satodd (Wagner, 1990)
INSTANCE: A sequence of propositional formulae h1 , . . . , n i such that (i is unsatisfiable)  (i+1
is unsatisfiable.)
QUESTION: Is the maximum index i such that i is satisfiable an odd number ?
8. This problem is referred to several times in the literature, but it does not seem to have a name.

546

fiEfficiency and Envy-freeness in Fair Division of Indivisible Goods

First notice that the complexity of the latter problem does not decrease under the following assumptions:
 n is even (if it is not, we can just add the  formula at the end of the sequence);
 the sets of propositional variables of the formulae i are pairwise-disjoint (if two formulae i and
i+1 share some variables, just transform each variable v of say i into a copy v 0 : it will not
change the (un)satisfiability of i but the set of propositional variables of i and i+1 will now
be disjoint).
Let h1 , . . . , n i be an instance of max-index-satodd with the two additional latter assumptions,
and let Vi denote the set of propositional variables appearing in i . We translate this instance to the
following instance P(1 , . . . , n ):
Agents:
Objects:
Preferences:

2n agents : I1,2  I3,4      In1,n , where the group I2i1,2i contains the four agents
{4i  3, 4i  2, 4i  1, 4i}.
we create for each v  Vi (for each i  {1, . . . , n}) four objects xv , xv , yv , yv , and we
add n dummy objects dk (k  {1, . . . , n});
for each group I2i1,2i (i  {1, . . . , n/2}), the preferences of the agents are:
 4i3 = 4i2 = (02i1  d2i1 )  (02i  d2i ),
V
 4i1 = vV2i1 V2i xv  xv ,
V
 4i = vV2i1 V2i yv  y v ,
where 0k is the formula k where v has been replaced by xv  yv , and v has been
replaced by xv  y v .

The proof of the proposition is primarily based on the fact that the problem can be split into n/2
subproblems concerning the agents from I2i1,2i :
Lemma 14 We denote by P|i the restriction of P(1 , . . . , n ) to the set of agents I2i1,2i and to the
objects they want. An allocation  will be said to be splittable if i 6= j, (I2i1,2i )  (I2j1,2j ) = .
The restriction of a splittable allocation  to (I2i1,2i ) will be written |i .
There exists an envy-free allocation satisfying a maximal number of agents for P(1 , . . . , n ) if and
only if there exists a splittable allocation  such that i  {1, . . . , n/2}, |i is envy-free and satisfies a
maximal number of agents for P|i .
Proof First, we restrict our attention to regular allocations, where regular means, like in Lemma 2,
that an allocation gives an object to an agent only if she wants it. This is safe for the same reasons
as in Lemma 2: the existence of an envy-free allocation satisfying a maximal number of agents
is equivalent to the existence of a regular envy-free allocation satisfying a maximal number of
agents. Since the sets Vi are pairwise-disjoint, two different subproblems P|i and P|j do not share
any object, and therefore any regular allocation is also splittable.
0
Let  be a regular allocation. Suppose that there is an allocation |i
for the problem P|i that
satisfies more agents than |i . Then the splittable allocation made from the sub-allocations |j
0
for j 6= i and |i
is valid, regular, and satisfies more agents than . Conversely, suppose that
there is a regular allocation  0 that satisfies more agents than . Then there is at least one i such
0
that strictly more agents from I2i1,2i are satisfied by |i
than by |i . It proves that any regular
allocation  satisfies a maximal number of agents if and only if for each i, |i satisfies a maximal
number of agents.
Suppose now that  is envy-free. Then obviously all the |i are as well. Conversely, suppose
that all the |i are envy-free. Then  is envy-free, because (1) no agent can envy another agent
from the same group, because the |i are envy-free, and (2) no agent from a group i can envy an
agent from another group j, since (I2i1,2i )  (I2j1,2j ) = .

For each interpretation Intk of Vk , we define the following sets of objects:
 f (Intk ) = {xv | Intk |= v}  {xv | Intk 6|= v};
 g(Intk ) = {yv | Intk |= v}  {yv | Intk 6|= v};
 f (Intk ) = {xv | Intk 6|= v}  {xv | Intk |= v};

547

fiBouveret & Lang

 g(Intk ) = {yv | Intk 6|= v}  {yv | Intk |= v}.
Moreover, given two interpretations Int2i1 and Int2i of respectively V2i1 and V2i , we will write
Int2i1 ,Int2i the following allocation of P|i :
 Int2i1 ,Int2i (4i  3) = f (Int2i1 )  g(Int2i1 )  {d2i1 };
 Int2i1 ,Int2i (4i  2) = f (Int2i )  g(Int2i )  {d2i };
 Int2i1 ,Int2i (4i  1) = f (Int2i1 )  f (Int2i );
 Int2i1 ,Int2i (4i) = g(Int2i1 )  g(Int2i ).
Lemma 15 Let Int2i1 and Int2i be two respective interpretations of V2i1 and V2i .
 Int2i1 ,Int2i satisfies both agents 4i  1 and 4i;
 Int2i1 ,Int2i satisfies 4i  3 if and only if Int2i1 |= 2i1 , and Int2i1 ,Int2i satisfies 4i  2 if
and only if Int2i |= 2i ;
Proof Let Int2i1 and Int2i be two respective interpretations of V2i1 and V2i .
 By definition, f (Intk ) contains xv or xv for each v  Vk , thus Int2i1 ,Int2i (4i1) contains xv
or xv for each v  V2i1  V2i . Therefore the agent 4i  1 is satisfied by Int2i1 ,Int2i (4i  1).
The same reasoning holds for the agent 4i.
 By definition, 2i1 is satisfied by Int2i1 if and only if 02i1 is satisfied by the interpretation
defined by setting to true all the xv and yv (resp. all the xv and yv ) such that Int2i1 |= v
(resp. Int2i1 6|= v). Thus, if Int2i1 |= 2i1 , Int2i1 ,Int2i satisfied 02i1 . Since it also
satisfies d2i1 , then 4i  3 is satisfied by Int2i1 ,Int2i . Conversely, if 4i  3 is satisfied by
Int2i1 ,Int2i , then obviously 02i1 must be satisfied by Int2i1 ,Int2i (because 4i  3 does
not receive d2i ), which proves that 2i1 is satisfied by Int2i1 . The same result holds for
2i and the agent 4i  2.

Lemma 16 Consider the restricted problem P|i .
 If neither 2i1 nor 2i is satisfiable, then for any interpretations Int2i1 and Int2i of V2i1 and
V2i respectively, Int2i1 ,Int2i is envy-free and satisfies a maximal number of agents.
 If only 2i1 is satisfiable, then if M2i1 is a model of 2i1 , M2i1 ,Int2i satisfies a maximal
number of agents. Moreover, there is no envy-free allocation satisfying a maximal number of
agents in this case.
 If both 2i1 and 2i are satisfiable, then if M2i1 and M2i are respective models of 2i1 and
2i , M2i1 ,M2i satisfies a maximal number of agents and is envy-free.
Proof Suppose that neither 2i1 nor 2i is satisfiable. Then any allocation |i satisfying 4i  3
(resp. 4i  2) must be such that there is at least one v  V2i1  V2i such that {xv , xv , yv , yv } 
|i (4i  3) (resp. |i (4i  2)), because otherwise one could deduce a model of 2i1 or 2i from
|i (4i  3) (resp. |i (4i  2)). Thus any of the agents 4i and 4i  1 can be satisfied in this case:
the maximal number of agents it is possible to satisfy is 2. Since every allocation of the form
Int2i1 ,Int2i satisfies both agents 4i  1 and 4i, it satisfies a maximal number of agents in this
case. It is also obviously envy-free, since neither d2i nor d2i1 are in the shares of agents 4i  1
and 4i, and thus the 2 other agents cannot envy them.
Suppose that only 2i1 is satisfiable. Then any allocation satisfying both agents 4i  3 and
4i  2 must satisfy 02i1 for one of these two agents, and 02i for the other one (because of d2i
and d2i1 ). Since 2i is not satisfiable, in that case neither 4i  1 nor 4i can be satisfied by |i ,
for the same reasons as above. From that we can deduce that it is not possible to satisfy the 4
agents. Neither is it possible to satisfy 3 agents with both 4i  3 and 4i  2 satisfied. Now consider
the allocation M2i1 ,Int2i , M2i1 being a model of 2i1 . By Lemma 15, M2i1 ,Int2i satisfies
3 agents: 4i  3, 4i  1 and 4i. This allocation is not envy-free, but no allocation satisfying a
maximal number of agents can be in this case (because either 4i  3 or 4i  2 remains unsatisfied
in such an allocation, envying her partner).
Lastly, suppose that both 2i1 and 2i are satisfiable, and let M2i1 and M2i be their models.
Then by Lemma 15, M2i1 ,M2i satisfies the 4 agents, thus satisfying a maximal number of agents
and obviously being envy-free.


548

fiEfficiency and Envy-freeness in Fair Division of Indivisible Goods

We can now conclude the proof. By Lemma 14, there exists an envy-free allocation satisfying a
maximal number of agents for P(1 , . . . , n ) if and only if there exists a splittable allocation  such
that i  {1, . . . , n/2}, |i is envy-free and satisfies a maximal number of agents for P|i . By Lemma 15,
there exists an envy-free allocation |i satisfying a maximal number of agents for P|i if and only if either
none of the two formulae 2i1 and 2i are satisfiable, or both are. Now suppose that the maximum
index j such that j is satisfiable is an odd number (say 2i  1). In that case, there is not any envyfree allocation satisfying a maximal number of agents for P|i since 2i1 is satisfiable but 2i is not.
Conversely, suppose that the maximum index j such that j is satisfiable is an even number (say 2i).
In that case, there is an envy-free allocation satisfying a maximal number of agents for all P|k , since for
each P|k either the two formulae 2k1 and 2k are satisfiable (if k  i), or none of them is (if k > i).
We thus have a reduction from the latter problem to the problem of existence of an envy-free
allocation satisfying a maximal number of agents. It proves the p2 -completeness.


5. Non-dichotomous Preferences
We will now consider the case where preferences are no longer dichotomous.
5.1 General Logical Preferences
Again, since an explicit description of preferences is exponentially large, the need for a
compact description thereof is clear. Many languages exist for succinct representation of
preference. We limit our investigation to the following class of languages:
Definition 9 (Compact language under logical form) Let L be a language representing a set of preference relations over a set of alternatives 2X . L will be said to be a compact
language under logical form if and only if :
(a) it is able to express any dichotomous preference as compactly as the previous language
introduced, that is, the language expressing dichotomous preferences in propositional
form can be polynomially reduced to L;
(b) comparing two sets of goods can be done in polynomial time.
These two previous conditions are in practise not very restricting, and are met by many
languages for succinct representation of representation. See for instance the paper by Lang
(2004) for a survey of logical languages for compact preference representation. Note that
several widely studied representation languages, such as CP-nets and other graphical languages, are not under logical form, because they fail to represent preferences expressed
by logical formulas within polynomial space9 . Interestingly, Proposition 6 extends to any
compact representation language under logical form:
Corollary 2 eef existence with monotonic compact preference under logical form is p2 complete.
Proof The eef existence problem can be solved using the following algorithm:
1. non-deterministically guess an allocation ;
2. check that it is envy-free;
3. check that it is Pareto-efficient.
9. A natural question is the complexity of the fair division problems when preferences are expressed in
these languages. This is left for further study.

549

fiBouveret & Lang

By condition (b), step two can be done in polynomial time, since it requires at most a quadratic number
of polynomial oracles. By condition (b) also, the problem of checking whether a given allocation is
Pareto-efficient is in co-NP. Therefore, the previous non-deterministic algorithm uses 1 NP oracle, and
runs in polynomial-time. Hence membership to p2 .
Hardness is a corollary of Proposition 6 together with condition (a).


5.2 Numerical Preferences under Logical Form
For the latter result preferences do not have to be numerical since Pareto-efficiency and
envy-freeness are purely ordinal notions. Now, if preferences are numerical, which implies
the possibility of intercomparing and aggregating preferences of several agents, then, besides
Pareto-efficiency, we may consider efficiency based on social welfare functions. We consider
here only the two most classical way of aggregating a collection of utility functions into a
social welfare function:
Definition 10 (Classical utilitarianism and egalitarianism) Given a collection of individual utility functions hu1 , . . . , un i, with for each i, ui : 2X  Z:
?
 the
P classical utilitarian social welfare function is the function defined by sw :  7
i ui ((i));

 the egalitarian social welfare function is the function defined by sw(e) :  7 mini ui ((i));
Maximizing the egalitarian social welfare function is often viewed as an alternative criterion of fairness, encoding the Rawlsian egalitarian point of view (Rawls, 1971). However,
as we will see in Proposition 17, egalitarianism (as well as classical utilitarianism) is not
always compatible with envy-freeness. The link between these two alternative points of
view about fairness is deeply investigated by Brams and King (2005).
Since we do not deal anymore with ordinal (or dichotomous) preferences, we have to
define precisely what we will mean by compact representation of numerical preferences. Here
we will pick as the basic numerical language one of the most simple compact languages,
consisting in associating numerical weights to propositional formulae  see e.g. (Chevaleyre,
Endriss, & Lang, 2006), or (Ieong & Shoham, 2005) in the context of coalitional games:
Definition 11 (Weighted propositional language) Given a set of goods X, the weighted
propositional language associated to X is the set of all possible subsets of LX  Z.
Given a set of weighted propositional formulae  = {h1 , w1 i, . . . , hr , wr i}, the utility
function associated is:

1 if S |= k
X
u : 2
 Z
, with k =
Pr
0 otherwise.
S
7
k=1 wk  k
Using this language, preferences are monotonic if all formulae are positive and all weights
are positive.
Now, we can define our notion of compact numerical language:
Definition 12 (Compact numerical language under logical form) Let L be a language representing a set of utility functions over a set of alternatives 2X . L will be said to
be a compact numerical language under logical form if and only if :
550

fiEfficiency and Envy-freeness in Fair Division of Indivisible Goods

(a) it is able to express any utility function as compactly as the weighted propositional
language, that is, the weighted propositional language can be polynomially reduced to
L;
(b) computing the utility of one set of goods can be done in polynomial time.
Of course, since a compact numerical language under logical form is also a compact
language under logical form, the complexity result form Corollary 2 still holds. However, it
appears that the complexity of the problem of deciding whether an efficient and envy-free
allocation exists decreases when the Pareto-efficiency is replaced by a weaker notion: the
maximization of one of the two latter social welfare functions.
Proposition 17 Given a collection of utility functions on 2R given in a compact numerical
language under logical form:
 the problem of deciding whether there exists an envy-free allocation among those that
maximize utilitarian social welfare is p2 -complete, even if N = 2, and even if the
agents have identical preferences.
 the problem of deciding whether there exists an envy-free allocation among those that
maximize egalitarian social welfare is p2 -complete, even if N = 2.
Proof For both results, membership comes easily from the fact that the maximum value of social
welfare can be computed by dichotomy over the set of all possible social welfare values; there are
exponentially many, therefore we need a polynomial number of NP oracles to do this; after this step
is done, it suffices to guess an allocation and check that it is envy-free and that it maximizes social
welfare, adding just one more NP oracle.
Hardness is obtained in both utilitarian and egalitarian cases by a simple reduction to an instance
of the fair division problem with preferences expressed in the weighted propositional language from the
following problem:
Problem 5: max-sat-asgeven (Wagner, 1987)
INSTANCE: A propositional formula  in Conjunctive Normal Form, over a set of propositional
variables V = {v1 , . . . , vn }, and a weight function w over interpretations I : V  {0, 1},
def P
i1
defined by w(I) =
.
i I(vi )  2
QUESTION: Is maxM model of  w(M ) an even number (in other words, is v1 falsified in the model of
maximal weight) ?
We will suppose that the formula  has at least on model M such that M 6|= v1 . It does not
change the complexity, because if v1 is verified in every model of , clearly the answer to the problem
max-sat-asgeven is no: as a consequence, every instance h, V i without any assumption on  can be
solved by first checking if v1   is unsatisfiable (which is a coNP-complete problem), and then, if
not, by solving the unsat-or-max-sat-asgeven problem on an instance that has at least one model
falsifying v1 .
Utilitarian social welfare: From an instance h, V i of max-sat-asgeven , we create the following
instance P(, V ):
Agents:
Objects:
Preferences:

2 agents;
for each literal vi of , we create two objects xi and x0i , except for v1 , for which only
one object x1 is created, and we add two objects y and y 0 ;
the agents 1 and 2 have identical preferences, and both ask for h(  y)  ( 0 
y 0 ), 2n+1 i, hx1  y, 1i, . . . , hxn  y, 2n1 i, hx02  y 0 , 2i, . . . , hx0n  y 0 , 2n1 i, with  the formula  in which each symbol vi has been replaced by xi , and  0 the formula  in which
each symbol vi (except v1 replaced by x1 ) has been replaced by x0i .

551

fiBouveret & Lang

Let (M1 , M2 ) be a pair of models of  (with possibly M1 = M2 ) such that M2 6|= v1 . Then we define
the allocation M1 ,M2 by: M1 ,M2 (1) = {y}  {xi |M1 |= vi } and M1 ,M2 (2) = {y 0 }  {x0i |M2 |= vi }.
The proof is based on the following lemma:
Lemma 17 There exists an envy-free allocation among those that maximize utilitarian social welfare if
and only if there are two models M1 and M2 of  (possibly M1 = M2 ) with M2 6|= v1 , such that M1 ,M2
is envy-free and maximizes utilitarian social welfare.
Proof Let  be an allocation maximizing the utilitarian social welfare. Let M be a model of
 falsifying v1 (our hypothesis is that there is at least one). Then F (M,M (1)) |=   y and
F (M,M (2)) |=  0  y 0 , which proves that the individual utility of the two agents is at least 2n+1 .
Hence there is at least one allocation whose utilitarian social welfare is greater than or equal
to 2n+2 . Therefore, an allocation  maximizing the utilitarian social welfare must be such that
F ((1)) |= y   and F ((2)) |= y 0   0 , or vice versa. Moreover, either x1 6 (1), or x1 6 (2).
Suppose that x1  (2): swapping the shares of the agents leads to an allocation  0 which is
completely equivalent to  with respect to Pareto-efficiency and envy-freeness, due to the identical
preferences. We can therefore assume w.l.o.g that  is such that x1 6 (2)
Since F ((1)) |= , then there is a model M1 of  such that (1) = {y}  {xi |M1 |= vi }  S1 ,
where S1  {x1 , x02 , . . . , x0n }. Similarly, there is a model M2 such that M2 6|= v1 , and (2) =
{y 0 }  {x0i |i > 1, M2 |= vi }  S2 , where S2  {x1 , . . . , xn }. Now consider the allocation M1 ,M2 ,
that is well-defined since M2 6|= v1 . We have u1 () = u1 (M1 ,M2 ), since the x0i do not satisfy any
formula of the preferences of the agent 1 without y 0 (given to the agent 2), and u2 () = u2 (M1 ,M2 )
for the same reasons. In other terms, M1 ,M2 gives the same utility as  to both agents. M1 ,M2
is thus envy-free and maximizes the utilitarian social welfare.

By Lemma 17, we can thus restrict our problem to the allocations of the form M1 ,M2 . We
have, for each M1 and M2 as defined earlier, u1 (M1 ,M2 ) = 2n+1 + w(M1 ) and u2 (M1 ,M2 ) = 2n+1 +
w(M2 ); thus sw? (M1 ,M2 ) = 2n+2 + w(M1 ) + w(M2 ). We have: argmaxM ,M sw? (M1 ,M2 ) =
1
2
argmax(M ,M ) {w(M1 )+w(M2 )|M1 6|=v1 or M2 6|=v1 } . Given the symmetry of the problem, we can assume
1
2
that only M2 has to satisfy M2 6|= v1 , thus the latter allocation becomes: Mopt ,argmaxM {w(M2 )|M2 6|=v1 } ,
2
where Mopt is the model of  of maximal weight.
Suppose Mopt 6|= v1 , then the allocation maximizing the utilitarian social welfare is Mopt ,Mopt and
it is clearly envy-free, because both agents have the same utility. Now suppose that Mopt |= v1 , then
the allocation maximizing the utilitarian social welfare is Mopt ,Mopt0 , where Mopt0 is the model of 
of maximal weight that assigns v1 to false. We have w(Mopt0 ) < w(Mopt ), thus u1 (Mopt ,Mopt0 ) >
u2 (Mopt ,Mopt0 ), hence this allocation is not envy-free.
The latter reduction is clearly polynomial (recall that the weights 2n+1 can be encoded using a
linear space). This proves the proposition for the utilitarian case.
Egalitarian social welfare: From an instance h, V i of max-sat-asgeven , we create the following
instance P(, V ):
Agents:
Objects:
Preferences:

2 agents;
for each literal vi of , we create two objects xi and x0i , and we add two objects y and
y0 ;
the preferences of the agent 1 are hx1 , 1i, . . . , hxn , 2n1 i, h  y, 2n i, and the preferences
of the agent 2 are hy  y 0 , 22n i, hx1 , 1i, with  the formula  in which each symbol vi
has been replaced by xi .

Every allocation that maximizes egalitarian social welfare must give at least a utility of 22n to
agent 2. In that case, the egalitarian social welfare will be given by the utility of agent 1, because this
utility cannot be greater than 22n . Therefore, maximizing social welfare comes down to maximizing the
utility of agent 1, or in other words to give her the items corresponding to the model of  of maximum
weight. If v1 is set to true in this model, then x1 is given to agent 1, and since y is also given to
agent 1, agent 2 could get a strictly higher utility with agent 1s share. Therefore this allocation is not
envy-free. If v1 is set to false in the latter model, then x1 is not given to agent 1, and thus can be given
to agent 2, producing an envy-free allocation. Since the reduction is polynomial, it proves hardness for
the egalitarian case.


552

fiEfficiency and Envy-freeness in Fair Division of Indivisible Goods

We can notice here that the combination of envy-freeness with a numerical criterion
such as classical utilitarianism or egalitarianism induces a complexity gap, since, as stated
by Bouveret, Fargier, Lang, and Lematre (2005), the complexity of the problems of maximizing the classical utilitarian or egalitarian collective utility functions, with agents having
weighted logical preferences, are only NP-complete.
From the previous proof in the utilitarian case, we can notice that the hardness result still
holds if we require the allocation to be Pareto-efficient instead of maximizing the utilitarian
social welfare. It suggests that in the case of a language extending the weighted propositional
formulae, the eef existence problem with identical preferences is much harder than in
the case of agents having identical dichotomous preferences. We have actually the following
result:
Proposition 18 Given a collection of N identical utility functions on 2R given in compact
numerical language under logical form the problem of deciding whether a Pareto-efficient
and envy-free allocation exists is p2 -complete, even if N = 2, even if the preferences are
monotonic.
Proof Since the preferences are identical, any envy-free allocation satisfies all the agents equally. Thus,
a Pareto-efficient and envy-free allocation, if there is one, is an allocation that gives everyone a utility of
M , maximal among the set of allocations that satisfy everyone equally. This value M can be computed
using a polynomial number of NP oracles (like in the previous proof). Now that we have this value
of M , checking if there is a Pareto-efficient and envy-free allocation comes down to check if there is
no allocation giving at least M to all the agents, and at least M + 1 to at least one agent, which is a
problem in coNP, and hence adds only one call to an NP oracle.
For the hardness proof, one may notice that the same reduction as the one used in the utilitarian
case of the proof of Proposition 17 works in this case, because an allocation is Pareto-efficient and
envy-free in this particular problem if and only if it is envy-free and maximizes the utilitarian social
welfare.


5.3 Additive Numerical Preferences
A last case that we consider here is the case of additive numerical preferences. Additive
numerical preferences is a degenerate case of weighted logical preferences, where all the
formulae are single positive literals. In other words, the preferences of an agent i are given
by a set i of pairs hxk , wk i, where xk is an object and wk is the weight (possibly 0)
associated with the object. The utility function associated with such preferences is thus the
following:
u : 2X  Z
P
S
7
xk S wk .
Notice that the agents preferences are monotonic if and only if all the numbers wk are
positive.
This preference representation language is the most natural one when dealing with
resource allocation problems; however, it is unable to express compactly any kind of dependencies (superadditivity or subadditivity) between the objects. In particular, it does
not extend dichotomous preferences. Hence the previous hardness results do not extend
to additive preferences. However, since we are still able to compare two alternatives in
polynomial time, membership to p2 is guaranteed.
553

fiBouveret & Lang

Our intuition is that this problem is as hard as the eef existence problem with
dichotomous preferences:
Conjecture 1 eef existence with additive numerical preferences is p2 -complete, even if
the preferences are monotonic.
All we know about this problem is that it is NP-hard (this is implied by Proposition 20
presented later) and in p2 , but its precise complexity remains open. However, things become
much easier if we only require the allocation to be complete, instead of Pareto-efficient. This
case has already been investigated by Lipton et al. (2004), and we have the following result:
Proposition 19 (Lipton et al., 2004) The problem of deciding whether there exists a
complete envy-free allocation for agents having additive preferences is NP-complete, even if
their preferences are monotonic.
Other restrictions of the eef existence problem with additive preferences are worth
being studied. First, we study as in the dichotomous case the restriction to identical additive
preferences:
Proposition 20 eef existence with N identical additive numerical preferences is NPcomplete, for any fixed N  2. The same result holds if we require the preferences to be
monotonic.
Proof Membership is easy to prove. Since all the preferences are identical (we write hu(x1 ), . . . , u(xp )i
the utility vector associated to the set of object), an allocation is Pareto-efficient if and only if it gives
each object xj such that u(xj ) > 0 to one agent, and trashes each object xj such that u(xj )  0.
Moreover, an allocation is envy-free if and only if all the agents have the same utility. These two latter
properties can be checked in polynomial-time, hence membership to NP.
Hardness comes from a reduction from partition:
Problem 6: partition
INSTANCE: A finite set S and a size s(a)  N for
P each a  S.P
QUESTION: Is there a subset S  S such that aS 0 s(a) = aS\S 0 s(a) ?
From a given instance hS, si of the partition problem, we create the following instance P(S, s) of
the eef existence problem:
Agents:
Objects:
Preferences:

2 agents;
to each a  S, we associate an object xa ;
The two agents preferences are identical and defined by the size of the elements in the
initial set: u(x(a)) = s(a).

There isP
a Pareto-efficient
P and envy-free allocation for P(S, s) if and only if there is an allocation
 such that x(1) u(x) = x(2) u(x), that is, the partition problem returns true. The reduction
can be clearly done in polynomial time, which proves the proposition.


Now another interesting case is the case where the preferences are not necessary identical,
but where all the atomic utilities ui (xj ) are either 0 or 1. In other words, an agent either
wants an object or does not want it, and each agent wants to maximize the number of
desired objects she gets.
Proposition 21 eef existence with additive 01-preferences (i.e. i, j, ui (xj )  {0, 1})
is NP-complete.
554

fiEfficiency and Envy-freeness in Fair Division of Indivisible Goods

Proof Pareto-efficiency is easy to check in this case. We can first safely remove the objects that
do not appear anywhere in the preferences. Afterwards, an allocation is Pareto-efficient if and only
if each object xj is given to an agent i such that ui (xj ) = 1, for the following reasons. () Let 
be a Pareto-efficient allocation, and suppose that there is an xj which is not given to any agent, or
which is given to an agent such that ui (xj ) = 0. Let k be an agent such that uk (xj ) = 1 (there
is one since we previously trashed the undesired objects). Then giving xj to the agent k increases
ks utility while the others utilities remains the same. Thus  is Pareto-dominated. () Let  be
an allocation such that each object xj is given
such P
that ui (xj ) = 1, and
P to an agent iP
P suppose  is
Pareto-dominated by an allocation  0 . Then iI ui ( 0 (i)) = iI xj 0 (i) ui (xj ) > iI ui ((i)) =
P P
iI
xj  0 (i) ui (xj ) = p. Therefore there is at least one ui (xj ) such that ui (xj ) > 1, which is not
possible due to our restriction to 01-preferences.
It thus give an simple way to check Pareto-efficiency, by just checking if the sum of utilities is equal
to the number of objects p that are desired by at least one agent. As usual, envy-freeness can be verified
in polynomial time; therefore eef existence with additive 01-preferences is in NP.
Hardness can be proved by a polynomial reduction from exact cover by 3-sets (problem 3).
Given an instance hS, C = hS1 , . . . , S|C| ii of exact cover by 3-sets, create the following eef existence instance P(C, S) (we will suppose that the elements of S will be written ai , with i  {1, . . . , |S|}):
Agents:
Objects:
Preferences:

a set of 3|C| agents gathered by triples {3i  2, 3i  1, 3i};
a set of |S| + 3|C| items X =SM  D (M for main, and D for dummy), with
M = {m1 , . . . , m|S| }, and D = i{1,...,|C|},j{1,2,3} {di,j };
S
the agents from {3i  2, 3i  1, 3i} all desire the same set of objects ak Si {mk } 
{di,1 , di,2 , di,3 } (the three objects corresponding to Si plus the three dummy objects
di,j ).

If there is an exact cover C 0 for the instance hC, Si, then we will consider the following allocation:
each agent from the triple {3i  2, 3i  1, 3i} gets respectively di,1 , di,2 , and di,3 , and if Si  C 0 , each
one of these three agents gets one of the three objects mk corresponding to the elements of the set
Si . This allocation is admissible and Pareto-efficient (because all the objects are allocated). It is also
envy-free, for the following reasons:
 The agents from the same triple cannot envy each other, because they are equally satisfied.
 An agent k1 cannot envy any agent k2 from another triple, because the only objects k1 could
envy from k2 s share are the mi . k2 having at most one mi , and k1 having a utility of at least
one, k1 cannot envy k2 .
The rest of the proof is based on the following result: if an allocation
S  is Pareto-efficient and
envy-free for P(C, S) then we must have (3i  2)  (3i  1)  (3i) = ak Si {mk }  {di,1 , di,2 , di,3 }
or (3i)  (3i  1)  (3i) = {di,1 , di,2 , di,3 }. This is easy to show. Since the agents from the triple
{3i  2, 3i  1, 3i} are the only ones to desire the objects di,k , these three objects must be given to these
three agents, for the allocation to be efficient. Since these three agents have the same preferences, the
allocation has to satisfy them equally in order to be envy-free. Thus the number of objects allocated
to the three agents must be divisible by 3, which gives only two possible numbers, 3 and 6, and hence
only two possible allocations.
Suppose that there is a Pareto-efficient and envy-free allocation  for P(C, S). Consider the subcollection C 0 S
= hS1 , . . . , S|C 0 | i made of the triples Si from the collection C such that (3i  2)  (3i 
1)  (3i) = ak Si {mk }  {di,1 , di,2 , di,3 }. Then we have the following results.
 The Si are pairwise disjoints. Suppose that there is a pair (i, j) such that i 6= j and there is
an element ak belonging to both Si and Sj . Then mk is allocated to two different agents: one
member of triple {3i  2, 3i  1, 3i}, and one member of triple {3j + 1, 3j + 2, 3j + 3}, which is
impossible.
S
 i{1,...,|C 0 |} Si = S. Let ak be an element of S. Since  is Pareto-efficient, then mk must be
allocated to one agent that wants it (say
S this agent belongs to the triple {3j + 1, 3j + 2, 3j + 3}),
unless no one wants it, which occurs if i{1,...,|C 0 |} Si 6= S. Then, by the previous result, all the
S
objects from al Sj {ml } must be allocated to this triple. Consequently, Sj  C 0 . Since ak  Sj ,
ak belongs to at least one set from the collection C 0 .

555

fiBouveret & Lang

Therefore, C 0 is an exact cover of S, which finally proves the proposition.



We can see with Proposition 21 and Conjecture 1 that there is a huge complexity gap
between the problem where we allow the weights to be freely given and the problem where
we require the weights to be 0 or 1 (at least if the conjecture is true). The natural question
it raises is to know if this complexity fall is specific to the 01-preferences, or if it occurs
for any fixed upper bound of the weights.
Conjecture 2 The complexity of the eef existence problem with additive 01. . . k
preferences for k  2 fixed is as hard as the general problem with unbounded additive preferences.
The precise complexity of this problem remains an open problem, but as it is stated
in the conjecture, our intuition is that it is as hard as the eef existence problem with
unbounded additive preferences.
Another natural problem is raised by the Proposition 21: what is the complexity of the
eef existence problem with stratified 01-preferences ? By stratified 01-preferences,
we mean that the preferences are given by a set of pairs hxk , pi, where xk is an object and p
is a priority level. Comparing two sets of objects comes down to compare lexicographically
the vectors where the component at index i is the number of objects of priority i in the
share of the agent. Notice that this problem is not an instance of the eef existence
problem with additive preferences, nor an instance of the eef existence problem with
logical numerical preferences under logical form. However it is easy to see that it remains
in p2 , but its precise complexity remains unknown.
Finally, we investigate the case where the number of objects is less than the number
of agents. One could think intuitively that the problem is trivial in this case. However, it
is not always the case, as we will see. To begin with, the following results shows that the
problem is easy for monotonic preferences:
Proposition 22 Let P be an allocation problem with n agents having additive monotonic
numerical preferences and all wanting at least one object, and p objects that are desired by
at least one agent.
 If p < n, then there is no Pareto-efficient and envy-free allocation.
 If p = n, the problem of deciding whether there exists an efficient and envy-free allocation for agents having monotonic additive preferences is in P.
Proof
 Each object being desired by at least one agent, every Pareto-efficient allocation is complete. If the number of objects p is strictly lower then the number of agents N , then at least one
agent i is unsatisfied. Consequently, there is an agent j that obtains an object wanted by i, hence
creating envy. Thus no Pareto-efficient allocation can be envy-free.
 Since there are as many objects as agents, each agent should receive one object that she values
the most (that is, such that ui ({x}) is maximal), for an allocation  to be Pareto-efficient and
envy-free. Indeed, if an agent i receives an object that is not her preferred one, it means that
another agent j receives it (otherwise the allocation would not be Pareto-efficient), creating envy
from i. Therefore, checking the existence of a Pareto-efficient and envy-free allocation comes
down in this case to checking if it is possible to give to every agent one of her best-valued objects.
It comes down to checking if there is a perfect matching in the bipartite graph made with one
node per agent on the one side, and one node per object on the other side, and connecting an

556

fiEfficiency and Envy-freeness in Fair Division of Indivisible Goods

agent i to an object x if and only if x is among the best-valued objects in agent is preferences.
Such a perfect matching can be computing in polynomial time, hence the result.


Interestingly, the latter result does not hold at all if we allow non-monotonic preferences.
In that case, the complexity increases up to the complexity of the general eef existence
problem with additive preferences.
Proposition 23 The eef existence problem with additive numerical preferences and such
that the number of objects is less than the number of agents has the same complexity as the
eef existence problem with additive numerical preferences, but no assumption on the
number of objects.
Proof Let us consider an instance hI, X, h. . . , ui (xj ), . . . i of the eef existence problem with additive numerical preferences, with N agents and p objects (p > N ). We create the following instance
P(hI, X, h. . . , ui (xj ), . . . i):
Agents:
Objects:
Preferences:

p + 3 agents (the number of agents is not important, it just has to be greater than the
number of objects and of the initial number of agents);
the p initial objects xi plus two dummy ones d1 and d2 ;
the preferences of the N first agents are the same as in hI, X, h. . . , ui (xj ), . . . i; the
preferences of the (N +1)st agent are uN +1 ({d1 }) = uN +1 ({d2 }) = 1 and u{N +1} (xj ) =
0 for the other items xj ; and the preferences of the remaining agents are uN +1 ({d1 }) =
1, uN +1 ({d2 }) = 2 and uN +1 (xj ) = 0 for the remaining objects.

If there is an efficient and envy free allocation  for hI, X, h. . . , ui (xj ), . . . i then it can be easily
checked that the allocation that gives the same items to the N first agents of P(hI, X, h. . . , ui (xj ), . . . i),
{d1 , d2 } to the (N + 1)st agent, and nothing to the remaining ones is efficient and envy-free. Conversely,
any Pareto-efficient and envy-free allocation for P(hI, X, h. . . , ui (xj ), . . . i) yields a Pareto-efficient and
envy-free allocation for hI, X, h. . . , ui (xj ), . . . i by restricting it to the N first agents and all the objects
but the two dummy ones.


6. Related Work and Discussion
As already argued in the Introduction, computational studies in resource allocation either
concern divisible goods, or focus on classical utilitarianism such as in combinatorial auctions.
Existing work on fair division of indivisible goods, on the other hand, is mainly axiomatic,
and its computational aspects have been neglected, except in a few papers that we are
mentioning below.
Our results have of course a lot in common with complexity results for combinatorial
auctions. After all, the structure of the problems are, to some extent, similar: items are
indivisible, allocations are preemptive10 , and each agent has preferences over sets of items
expressed in some compact representation language. Logical bidding languages have also
been designed (Boutilier & Hoos, 2001). However, the complexity results completely differ:
the standard decision problem for combinatorial auctions is NP-complete (Rothkopf, Pekec,
& Harstad, 1998) while the decision problems considered here are typically located at the
second level of the polynomial hierarchy, even in the degenerate case where preferences
are dichotomous. This can be explained by the fact that combinatorial auctions care only
about efficiency, not about envy-freeness. Requiring both criteria together (efficiency and
10. Here, preemptive means that an object cannot be allocated to more than one agent. This assumption
can be absent from some problems implying for example virtual objects, such as software licences.

557

fiBouveret & Lang

envy-freeness) makes things much more difficult: while, under the usual assumption that
preferences are monotonic, efficiency is a monotonic property (allocating more goods never
makes an allocation less efficient), envy-freeness is not (allocating more goods to an agent
may generate envy)11 . This is the reason why there may not exist an EEF allocation, and
this is also the source of the high complexity of the problem.
Moreover, due to the failure of monotonicity for envy-freeness, searching for an EEF
allocation cannot simply be formulated as the maximization or minimization of a simple
criterion, which is problematic when designing local search algorithms or approximation
schemes. A few authors (Lipton et al., 2004; Chevaleyre, Endriss, Estivie, & Maudet,
2007a; Brams, Jones, & Klamler, 2007) have suggested to relax the envy-freeness criterion
and make it a gradual notion, by defining a measure on envy-freeness. Lipton et al. (2004)
assume that the input consists of numerical utility functions over sets of goods; the degree
to which agent i envies agent j in allocation  is either defined as the envy difference
di,j () = max(0, ui ((j))  ui ((i))) or the envy ratio rij () = max 1, uuii((j))
((i)) . In both
cases, the global degree of envy is then the maximum degree of envy between any pair of
players. Alternative definitions of the degree of envy in a society have been proposed by
Chevaleyre et al. (2007a), such as the number of envious agents, the number of pairs (i, j)
such as i envies j, or the sum of all local degrees of envy, which is relatively similar to
the measure of envy considered by Brams et al. (2007), based on the maximum number
of agents that any single agent may envy. Chevaleyre et al. (2007b) suggest a radically
different way of relaxing envy-freeness: the society comes along with an undirected graph
(which reflects acquaintance between agents), and an allocation is envy-free if and only if
no agent envies an agent to whom she is connected.
Then, Lipton et al. (2004) focus on the search for a complete allocation with minimum
envy; moreover, in the case of additive utilities, they provide approximation schemes. Another work on approximation algorithms for the fair allocation of indivisible goods is the
one by Asadpour and Saberi (2007), who assume from the beginning that utilities are linear
and consider the problem of finding a maximally equitable allocation, that is, an allocation maximizing the utility of the least satisfied agent (cf. the problem considered in our
Proposition 17); they do not consider envy-freeness at all12 .
All the approaches we have considered so far (including ours) assume that the allocation
is computed in a centralized way by a neutral, objective agent. In other contexts, this
centralized approach is not possible or not realistic, and the allocation is obtained in a
decentralized way, by successive negotiations between groups of agents. Such an approach
has been initiated by Sandholm (1998), who studies convergence properties on the allocation
depending on the structural restrictions made on exchanges of goods that may occur. It
has been further investigated by Dunne (2005) and Dunne et al. (2005), who study the
computational complexity of these negotiation problems, and by Endriss, Maudet, Sadri,
and Toni (2006). In these approaches, the optimality criterion is the classical utilitarian
11. Note that it is not antimonotonic either: allocating less goods to an agent may generate envy as well.
12. Note that alternative ways of relaxing the search for EEF allocations exist. One may for instance
keep envy-freeness as a hard requirement and relax efficiency, or allow for relaxing both and look for
an allocation that shows a good trade-off between efficiency and envy-freeness (considering then the
problem as a two-criteria optimization problem).

558

fiEfficiency and Envy-freeness in Fair Division of Indivisible Goods

social welfare. Envy-freeness is considered in a distributed setting by Chevaleyre et al.
(2007a, 2007b).
So far, by computational issues we referred to the design and the study of algorithms
to be run on computers so as to find an allocation, and not to designing and studying
protocols that query agents interactively so as to gather enough information for a solution to
be determined. These procedural issues, although extensively studied in the literature of
fair division of divisible goods (see below), as well as in voting (Conitzer & Sandholm, 2005)
have rarely been considered for allocating indivisible goods, with the notable exception
of Herreiner and Puppe (2002), who study the properties of interactive protocols where
two agents enumerate their preferred bundles one by one, until an allocation is found. As
mentioned in the Introduction, the drawback of such protocols is that they are exponentially
long, and henceforth infeasible as soon as the number objects is more than a few units.
Beyond these few works on the computational aspects of fair division of indivisible goods,
there are much more that consider the computational and procedural aspects of fair division
of divisible goods (or, at least, assume that at least one good is divisible  e.g., money).
The literature on the subject is vast and the techniques are quite far from those used for
allocating indivisible goods (see in particular the literature on cake-cutting algorithms, e.g.
Brams & Taylor, 1996; Robertson & Webb, 1998) so we do not find it relevant to give here a
detailed bibliography on this subject. The interested reader can refer to the book by Brams
(2008) that covers fair resource allocation in both the indivisible and the divisible case.

7. Conclusion
We have studied several computational aspects the search for efficient and envy-free allocations in fair division problems with indivisible goods. Our results of Section 3 show that
in the case of dichotomous preferences, the search for such allocations can be reduced to
the search for preferred models in prerequisite-free default logic. Such a connection was
rather unexpected, and it implies that the practical search for EEF allocations can be done
using existing algorithms for default logic. However this search is likely to be very timeconsuming, due to our complexity results: indeed, our extensive study of the complexity of
deciding whether an efficient and envy-free allocation exists, under various restrictions (dichotomous preferences or not, two agents or more, all agents having identical preferences or
not, monotonic preferences or not) and for various notions of efficiency (Pareto-efficiency,
completeness, maximum number of satisfied agents, maximum social welfare  classical
utilitarian or egalitarian), seems to show that the problem is intrinsically very difficult,
since it lies at the second level of the polynomial hierarchy, even if preferences are dichotomous and monotonic. This implies that designing fast algorithms for solving the problem
in the general case is out of reach. We may first focus on those restrictions for which the
problem is at most NP-complete. Unfortunately, these restrictions (agents with identical
preferences; only two agents; purely conjunctive, purely disjunctive or 2-CNF preferences;
search for complete allocations without any other efficiency requirement; additive 0-1 preferences) are very compelling and imply a huge loss of generality.
The complexity results introduced in this paper are summed-up in Figure 1 and Table 2.
Several issues for further research remain to be explored.
559

fiBouveret & Lang

12
12

1

16

?

1

p2

22

13

?

p2

15

14

15

p2

p2

7
7

p2

p2
5

3

coBH2

coBH2
4
11

NP

2

11
6

9

9

6

?

18
6?

17

18
17

19

NP

8
8

P

10

21

10

P

20

O(1)

O(1)
? Proof not included in this paper.

1

A problem whose complexity has been proved in this paper (the mapping between
the numbers and the problems is specified in table 2).

17

A problem whose complexity was already known in the literature.

22

i

?

A problem whose complexity remains unknown.

j

The intersection of the problems corresponding to its outgoing edges.
Problem i is included in problem j. Arcs that can be obtained by transitivity are
omitted.

Figure 1: The different problems and their complexity classes and inclusion relations.

560

fiEfficiency and Envy-freeness in Fair Division of Indivisible Goods

Efficiency

number of agents

preferences

monotonicity

comp.

any

yes (1) or no (1)

p2 -c.

identical

yes

NP-c.

identical

no

coBH2 -c.

any
any

yes
no

NP-c.
coBH2 -c.

ident. or not

yes (6) or no (6, 6)

NP-c.

any

yes (7) or no (7)

p2 -c.

disjunctions
conjunctions
conj. with
condition 1
C st sat(C)  P
and closed by 

yes (8) or no (8)
yes (9) or no (9)

P
NP-c.

yes (10) or no (10)

O(1)

yes (11) or no (11)

NP-c.

numerical

yes (12) or no (12)

p2 -c.

numerical

no

p2 -c.

numerical

no

p2 -c.

Dichotomous preferences
1, 1

Pareto-eff.

not fixed

2

Pareto-eff.

3

Pareto-eff.

4
5

Pareto-eff.
Pareto-eff.

6, 6, 6

complete all.

7, 7

max nb of ag.

not fixed (6, 6, 6)
or fixed with N  2
(6, 6)
not fixed

8, 8
9, 9

Pareto-eff.
Pareto-eff.

any
any

10, 10

Pareto-eff.

any

11, 11

Pareto-eff.

any

12, 12

Pareto-eff.

not fixed

13

utilitarian sw

14

egalitarian sw

15, 15

Pareto-eff.

16
17, 17

Pareto-eff.
complete all.

18, 18

Pareto-eff.

19
20
21
22

Pareto-eff.
Pareto-eff.
Pareto-eff.
Pareto-eff.

not fixed or fixed
with N  2
not fixed or fixed
with N  2
2 agents
2 agents

Non-dichotomous preferences
not fixed or fixed
with N  2
not fixed or fixed
with N  2
not fixed or fixed
with N  2
not fixed
not fixed
not fixed or fixed
with N  2
any
> Nb of objects
= Nb of objects
 Nb of objects

numerical,
identical
additive
additive

yes (15) or no (15)

p2 -c.

no
yes (17) or no (17)

p2 -c. ?
NP-c.

additive ident.

yes (17) or no (17)

NP-c.

additive 01
additive
additive
additive

yes
yes
yes
no

NP-c.
O(1)
P
p2 -c. ?

Table 2: The set of resource allocation problems studied in this paper. Their complexity
classes are represented in figure 1.

561

fiBouveret & Lang

First, knowing that there is no efficient and envy-free allocation for a given problem
is not very helpful in practice when an allocation has to be found anyway. The solution
then consists in defining functions that return an allocation in all cases, even when envyfreeness and efficiency cannot be jointly met. A way of addressing this issue consists in
defining suitable relaxations of the problem, such as: (a) using a measure of envy instead
of seeing envy-freeness as a strict criterion (as suggested by Lipton et al., 2004; Chevaleyre
et al., 2007b); (b) make envy-freeness a relative notion, for instance by introducing an
acquaintance graph between agents (Chevaleyre et al., 2007b); or (c) keeping envy-freeness
as a strict criterion and relaxing efficiency. In all cases, new problems arise, the complexity
of which has to be identified.
Second, our results are mostly negative, since most of the interesting problems we studied are NP-hard (and often even worse), therefore, it would be worth pursuing work and
design practical algorithms for these problems. Most likely this would require coming up
with appropriate optimization criteria and then either (a) giving polynomial algorithms
that can approximate the desired objective (Lipton et al., 2004) or (b) implementing and
experimenting local search algorithms with relevant heuristics.
Third, throughout our paper it is assumed that everyones preferences are completely
known. In reality, presumably agents need to report their preferences, which introduces the
issue of strategic misreporting (manipulation). One direction for future research would be
to investigate how to prevent this, that is, mechanism design aspects.

Acknowledgments
We thank Michel Lematre for stimulating discussions about fair division and compact
representation; Thibault Gajdos for stimulating discussions about envy-freeness and for
pointing to us some relevant papers; Steven Brams, for giving us some feedback on an
earlier version of the paper and pointing to us some relevant references; and the participants
of the AgentLink Technical Forum Group on Multiagent Resource Allocation. This work
has been partly supported by the project ANR-05-BLAN-0384 Preference Handling and
Aggregation in Combinatorial Domains, funded by Agence Nationale de la Recherche.

References
Asadpour, A., & Saberi, A. (2007). An approximation algorithm for max-min fair allocation
of indivisible goods. Tech. rep., Department of Management Science and Engineering,
Stanford University, Stanford.
Baral, C. (2003). Knowledge Representation, Reasoning and Declarative Problem Solving.
Cambridge University Press.
Bogomolnaia, A., Moulin, H., & Stong, R. (2005). Collective choice under dichotomous
preferences. Journal of Economic Theory, 122, 165184.
Boutilier, C., & Hoos, H. H. (2001). Bidding languages for combinatorial auctions. In Proc.
of the 17th International Joint Conference on Artificial Intelligence (IJCAI-01), pp.
12111217, Seattle, Washington, USA.
562

fiEfficiency and Envy-freeness in Fair Division of Indivisible Goods

Bouveret, S., Fargier, H., Lang, J., & Lematre, M. (2005). Allocation of indivisible goods:
a general model and some complexity results. In Dignum, F., Dignum, V., Koenig, S.,
Kraus, S., Singh, M. P., & Wooldridge, M. (Eds.), Proceedings of AAMAS05, Utrecht,
The Nederlands. ACM Press.
Brams, S., & Fishburn, P. (1978). Approval voting. American Political Science Review,
72 (3), 831857.
Brams, S. J. (2008). Mathematics and Democracy: Designing Better Voting and FairDivision Procedures. Princeton University Press.
Brams, S. J., Edelman, P. H., & Fishburn, P. C. (2003). Fair division of indivisible items.
Theory and Decision, 55 (2), 147180.
Brams, S. J., Jones, M. A., & Klamler, C. (2007). Divide-and-conquer: A proportional,
minimal-envy cake-cutting procedure. Tech. rep., NYU Department of Politics.
Brams, S. J., & King, D. L. (2005). Efficient fair division: Help the worst off or avoid envy?.
Rationality and Society, 17 (4), 387421.
Brams, S. J., & Taylor, A. (1996). Fair Division: From Cake-Cutting to Dispute Resolution.
Cambridge Univ. Press.
Chevaleyre, Y., Dunne, P. E., Endriss, U., Lang, J., Lematre, M., Maudet, N., Padget, J.,
Phelps, S., Rodrguez-Aguilar, J. A., & Sousa, P. (2006). Issues in multiagent resource
allocation. Informatica, 30, 331. Survey paper.
Chevaleyre, Y., Endriss, U., Estivie, S., & Maudet, N. (2004). Multiagent resource allocation with k-additive utility functions. In Proc. DIMACS-LAMSADE Workshop on
Computer Science and Decision Theory, Vol. 3 of Annales du LAMSADE, pp. 83100.
Chevaleyre, Y., Endriss, U., Estivie, S., & Maudet, N. (2007a). Reaching envy-free states
in distributed negotiation settings. In Veloso, M. (Ed.), Proceedings of the 20th International Joint Conference on Artificial Intelligence (IJCAI-2007), pp. 12391244.
Chevaleyre, Y., Endriss, U., & Lang, J. (2006). Expressive power of weighted propositional
formulas for cardinal preference modelling. In Proceedings of the 10th International
Conference on Principles of Knowledge Representation and Reasoning (KR), pp. 145
152, Lake District, UK. AAAI Press.
Chevaleyre, Y., Endriss, U., & Maudet, N. (2007b). Allocating goods on a graph to eliminate
envy. In Proceedings of AAAI-07, pp. 700705.
Conitzer, V., & Sandholm, T. (2005). Communication complexity of common votiong rules.
In Proceedings of the EC-05.
Cramton, P., Shoham, Y., & Steinberg, R. (Eds.). (2005). Combinatorial Auctions. MIT
Press.
Demko, S., & Hill, T. P. (1998). Equitable distribution of indivisible items. Mathematical
Social Sciences, 16, 145158.
Dunne, P. E. (2005). Extremal behaviour in multiagent contract negotiation. Journal of
Artificial Intelligence Research, 23, 4178.
563

fiBouveret & Lang

Dunne, P. E., Wooldridge, M., & Laurence, M. (2005). The complexity of contract negotiation. Artificial Intelligence, 164 (1-2), 2346.
Endriss, U., Maudet, N., Sadri, F., & Toni, F. (2006). Negotiating socially optimal allocations of resources. Journal of Artificial Intelligence Research, 25, 315348.
Ford, L. R., & Fulkerson, D. R. (1962). Flows in Networks. Princeton University Press.
Gebser, M., Liu, L., Namasivayam, G., Neumann, A., Schaub, T., & Truszczynski, M.
(2007). The first answer set programming system competition. In Baral, C., Brewka,
G., & Schlipf, J. (Eds.), Proceedings of the Ninth International Conference on Logic
Programming and Nonmonotonic Reasoning (LPNMR07), Vol. 4483 of Lecture Notes
in Artificial Intelligence, pp. 317. Springer-Verlag.
Gottlob, G. (1992). Complexity results for nonmonotonic logics. Journal of Logic and
Computation, 2, 397425.
Herreiner, D. K., & Puppe, C. (2002). A simple procedure for finding equitable allocations
of indivisible goods. Social Choice and Welfare, 19, 415430.
Ieong, S., & Shoham, Y. (2005). Marginal contribution nets: a compact representation
scheme for coalitional games. In Proceedings of EC05.
Karp, R. M. (1972). Reducibility among combinatorial problems. In Miller, R. E., &
Watcher, J. W. (Eds.), Complexity of Computer Computations, pp. 85103, New York.
Plenum Press.
Lang, J. (2004). Logical preference representation and combinatorial vote. Annals of Mathematics and Artificial Intelligence, 42 (1), 3771.
Lipton, R. J., Markakis, E., Mossel, E., & Saberi, A. (2004). On approximately fair allocations of indivisible goods. In EC 04: Proceedings of the 5th ACM conference on
Electronic commerce, pp. 125131, New York, NY, USA. ACM Press.
Nisan, N. (2005). Bidding Languages for Combinatorial Auctions. MIT Press.
Papadimitriou, C. H. (1994). Computational complexity. AddisonWesley.
Rawls, J. (1971). A Theory of Justice. Harvard University Press, Cambridge, Mass.
Reiter, R. (1980). A logic for default reasoning. Artificial Intelligence, 13, 81132.
Robertson, J., & Webb, W. (1998). Cake-Cutting Algorithms. A.K. Peters.
Rothkopf, M., Pekec, A., & Harstad, R. (1998). Computationally manageable combinational
auctions. Management Science, 8 (44), 11311147.
Sandholm, T. (1998). Contract types for satisficing task allocation: I theoretical results. In
Proc. AAAI Spring Symposium: Satisficing Models.
Wagner, K. W. (1987). More complicated questions about maxima and minima, and some
closures of NP. Theoretical Computer Science, 51, 5380.
Wagner, K. W. (1990). Bounded query classes. SIAM Journal on Computing, 19 (5), 833
846.
Young, H. P. (1995). Equity in Theory and Practice. Princeton University Press.

564

fi