Journal of Artificial Intelligence Research 51 (2014) 493-532

Submitted 07/14; published 10 /14

Reasoning about Topological and Cardinal Direction Relations
Between 2-Dimensional Spatial Objects
Anthony G. Cohn

A.G.C OHN @ LEEDS . AC . UK

School of Computing, University of Leeds, UK
Faculty of Engineering and Information Technology,
University of Technology Sydney, Australia

Sanjiang Li

S ANJIANG .L I @ UTS . EDU . AU

AMSS-UTS Joint Research Lab,
Centre for Quantum Computation & Intelligent Systems,
University of Technology Sydney, Australia
College of Computer Science, Shaanxi Normal University, China

Weiming Liu

L IU W EIMING @ BAIDU . COM

Baidu (China) Co., Ltd., Shanghai, China

Jochen Renz

J OCHEN .R ENZ @ ANU . EDU . AU

Research School of Computer Science,
The Australian National University, Australia

Abstract
Increasing the expressiveness of qualitative spatial calculi is an essential step towards meeting the
requirements of applications. This can be achieved by combining existing calculi in a way that
we can express spatial information using relations from multiple calculi. The great challenge is
to develop reasoning algorithms that are correct and complete when reasoning over the combined
information. Previous work has mainly studied cases where the interaction between the combined
calculi was small, or where one of the two calculi was very simple. In this paper we tackle the
important combination of topological and directional information for extended spatial objects. We
combine some of the best known calculi in qualitative spatial reasoning, the RCC8 algebra for
representing topological information, and the Rectangle Algebra (RA) and the Cardinal Direction
Calculus (CDC) for directional information. We consider two different interpretations of the RCC8
algebra, one uses a weak connectedness relation, the other uses a strong connectedness relation.
In both interpretations, we show that reasoning with topological and directional information is decidable and remains in NP. Our computational complexity results unveil the significant differences
between RA and CDC, and that between weak and strong RCC8 models. Take the combination of
basic RCC8 and basic CDC constraints as an example: we show that the consistency problem is
in P only when we use the strong RCC8 algebra and explicitly know the corresponding basic RA
constraints.

1. Introduction
Qualitative Spatial Reasoning (QSR) is a multi-disciplinary research field that aims at establishing
expressive representation formalisms of qualitative spatial knowledge and providing effective reasoning mechanisms. Originating from Allens work (1983) on temporal interval relations, QSR has
been widely acknowledged as the AI approach to spatial knowledge representation and reasoning,
with applications ranging from natural language understanding (Davis, 2013), robot navigation (Shi,
Jian, & Krieg-Bruckner, 2010; Falomir, 2012), geographic information systems (GISs) (Egenhofer
c
2014
AI Access Foundation. All rights reserved.

fiC OHN , L I , L IU , & R ENZ

& Mark, 1995), sea navigation (Wolter et al., 2008), to high level interpretation of video data (Sridhar, Cohn, & Hogg, 2011; Cohn, Renz, & Sridhar, 2012). We refer the reader to the work of Cohn
and Renz (2008), and Wolter and Wallgrun (2012) for more information.
The qualitative approach usually represents spatial information by introducing a relation model
on the domain of spatial entities, which could be points, line segments, rectangles, or arbitrary
regions. In the literature, such a relation model is often called a qualitative calculus (Ligozat &
Renz, 2004), which contains a finite set of jointly exhaustive and pairwise disjoint (JEPD) relations
defined on the domain. In the past three decades, dozens of spatial relation models have been
proposed in the literature (Cohn & Renz, 2008; Chen, Cohn, Liu, Wang, Ouyang, & Yu, 2013).
Many of these qualitative calculi approximate spatial entities by points. While this is convenient
when representing spatial direction, distance and positions (providing the extent of the objects is
small compared to their distance apart), it is inappropriate as far as the shapes and/or topology
of the spatial objects are concerned. In this paper, we represent spatial entities as 2-dimensional
bounded regions in the real plane, which may have holes or multiple connected components.
In the literature, most spatial calculi focus on one single aspect of space, e.g. topology, direction, distance, position, or shape. Topological relations are those relations that are invariant under
homeomorphisms such as scale, rotation, and translation. It is widely acknowledged that topological relations are of crucial importance. One influential formalism for topological relations is the
region connection calculus (RCC) (Randell, Cui, & Cohn, 1992). Based on one primitive binary
connectedness relation, a set of eight JEPD topological relations can be defined in the RCC. This
calculus is known as the RCC8 algebra. According to different interpretations of connectedness,
this calculus may have different variants. In this paper, we say two (closed) regions are weakly connected if they share at least a common point, and say they are strongly connected if their intersection
is at least one-dimensional. Accordingly, we address the two resulting RCC8 algebras as the weak
and the strong RCC8 algebras respectively. For convenience, we denote the weak RCC8 algebra as
RCC8, and the strong one as RCC80 .
The importance of the distinction between strong and weak RCC8 becomes clear when analysing
the different ways of defining the neighbourhood of pixels commonly used in Computer Vision. 4connectedness refers to the pixels that are horizontally and vertically connected to a pixel, while
8-connectedness includes the diagonally neighbouring pixels as well. This distinction corresponds
nicely to the distinction between strong and weak RCC8 as 8-connectedness considers connections at a point, while 4-connectedness only considers connections along a line (which is onedimensional). Therefore, we can use strong or weak RCC8 in a similar way we use 4- or 8connectedness, depending on the requirements of the application at hand.
The RCC8 algebra only represents topological information between spatial objects. In many
practical applications, however, other kinds of relations are often used together with topological
relations. For example, when recommending a restaurant you dined at before it is common to give
descriptions such as the restaurant is in the city centre, west of the central station, and nearby there
is a McDonalds.
Among all these aspects of spatial information other than topology, directional relations are
perhaps the most important. There are two well-known formalisms that can cope with directional
relations between extended spatial objects. One is the Rectangle Algebra (RA) (Balbiani, Condotta,
& Farinas del Cerro, 1999), the other is the Cardinal Direction Calculus (CDC) (Goyal & Egenhofer,
2001; Skiadopoulos & Koubarakis, 2005). When representing the direction of a primary object
to a reference object, RA approximates both the reference object and the primary object by their
494

fiR EASONING ABOUT T OPOLOGICAL AND C ARDINAL D IRECTION R ELATIONS

minimum bounding rectangles (MBRs), and relates the two objects by the interval relations between
the projected intervals. On the other hand, CDC only approximates the reference object by its MBR,
while leaving the primary object unchanged. The CDC has 511 basic relations, and RA has 169
basic relations. Most (487 out of 511) basic CDC relations intersect with one and only one basic
RA relation and, hence, are contained in a unique basic RA relation. Therefore, CDC is in a sense
more expressive than RA.
A central reasoning problem in QSR is the consistency problem. An instance of the consistency
problem is a set  of constraints like (xy), where x, y are spatial variables, and  is a qualitative
relation from a qualitative calculus. We say  is consistent or satisfiable if there exists an instantiation of the spatial variables such that all constraints in  are satisfied. Without loss of generality,
we assume that there is a unique constraint between any two variables. Note that if x and y are not
related, we can add (x ? y) in  without changing its consistency, where ? is the universal relation
in the calculus. Unlike classical CSPs, the domain of a spatial variable is usually infinite, and it may
be undecidable to determine the consistency of binary CSPs with infinite domains (Hirsch, 1999).
In the past three decades, QSR has made significant progress in solving the consistency problems
for a variety of qualitative calculi (Renz & Nebel, 1999; Renz, 1999; Balbiani et al., 1999; Zhang,
Liu, Li, & Ying, 2008; Skiadopoulos & Koubarakis, 2005; Liu, Zhang, Li, & Ying, 2010; Liu & Li,
2011).
In order to bring spatial reasoning theory closer to practical applications, it is necessary to
combine multiple aspects of spatial information. A growing number of works have been devoted to
combining topological RCC relations with other aspects of spatial information, e.g. qualitative size
(Gerevini & Renz, 2002), cardinal directions (Sistla & Yu, 2000; Li, 2006a, 2007; Liu, Li, & Renz,
2009; Li & Cohn, 2012), connectivity (Kontchakov, Nenov, Pratt-Hartmann, & Zakharyaschev,
2011), convexity (Davis, Gotts, & Cohn, 1999; Schockaert & Li, 2012), betweenness (Schockaert
& Li, 2013), and gravity (Ge & Renz, 2013). Recently, Wolfl and Westphal (2009) also empirically
compared two approaches to the combination of binary qualitative constraint calculi in general.
There are also interesting works on combining spatial and temporal formalisms (Gerevini & Nebel,
2002; Gabelaia, Kontchakov, Kurucz, Wolter, & Zakharyaschev, 2005). Moreover, in other subareas
of formalisms of constraint research, combination of formalisms has been discussed for a long time
and there are some very strong results, see e.g. the work by Bodirsky and Kara (2010), and Jonsson
and Krokhin (2004).
The current paper considers the full combination of RCC8 and RCC80 with the two directional
relation models RA and CDC. We identify the joint satisfaction problem (JSP) as the main reasoning
task. Given a network of topological (RCC8 or RCC80 ) constraints  and a network of directional
(RA or CDC) constraints , assuming that  and  involve the same set of variables, the JSP is to
decide when the joint network  ]  is satisfiable. Note that we use ], instead of , to indicate
that  and  are over the same variables.
Since topological and directional information is not independent, it is possible that the joint
network  ]  is unsatisfiable while both  and  are satisfiable. Solving the joint satisfaction
problem is in general harder than solving  and  independently. In this paper, we interpret directional relations in terms of RA and CDC, and interpret topological relations in terms of the weak
and the strong RCC8 algebras. When only basic constraints are involved, we show that the JSP
for basic (weak or strong) RCC8 and basic RA networks can be solved in polynomial time, but the
JSP for basic (weak or strong) RCC8 and basic CDC networks is NP-complete. Furthermore, we
show that, when the three calculi (viz. RCC8, RA, and CDC) are combined together, the JSP for
495

fiC OHN , L I , L IU , & R ENZ

basic RCC80 networks and basic RA and CDC networks is tractable. Since non-basic constraints
can always be backtracked to basic constraints, these results show that the JSP over (weak or strong)
RCC8 and RA or CDC is in NP.
This paper is a significant extension of the conference paper (Liu et al., 2009), where the combination of basic weak RCC8 and RA or CDC constraints was considered. This paper also considers
the combination of RCC80 and RA and/or CDC constraints. In addition, we extend our tractable
results to two maximal tractable subsets of RCC8 and one large tractable subset of RA. This paper
is also closely related to the work of Li (2007), and Li and Cohn (2012), where the combination of
the weak RCC8 algebra and two subalgebras (viz. DIR9 and DIR49) of RA is considered.
1.1 An Application Scenario
As an example for demonstrating the usefulness of our results, we use the Angry Birds domain.
Similar representation and reasoning tasks can be applied whenever we use computer vision to
detect objects in image or video. Angry Birds is a popular computer game that has gained increasing
attention within the AI community, see e.g. the work of Zhang and Renz (2014). The Angry Birds
AI competition is an AI challenge problem, where the goal is to build an intelligent agent that can
play Angry Birds better than the best human players (see http://aibirds.org).

Figure 1: A screenshot of the Angry Birds game.
The Angry Birds domain includes a number of building blocks of different materials, sizes
and shapes, and even with holes. The building blocks form complicated spatial structures that
protect pigs from the attacking birds (see Figure 1). AI agents have to be able to play the game
like humans do, that is they only get visual information about the game in the form of screenshots.
The competition organisers provide a basic computer vision software that detects the minimum
bounding boxes of all objects in a screenshot as well as the object category. So what is given is a
set of rectangles that form the minimum bounding boxes of the actual objects (see Figure 1). While
each object is a solid physical object that cannot overlap another object (only RCC8 relations DC
and EC are possible between objects), their bounding boxes can be related in any relation of the
Rectangle Algebra and any relation in CDC. Instead of considering only spatial relations between
single objects, we can also take into account sets of objects, for example, the set of all objects that
are directly or indirectly supported by a particular other object, or the set of all objects that provide
cover for a particular pig, or the set of all wooden blocks.
496

fiR EASONING ABOUT T OPOLOGICAL AND C ARDINAL D IRECTION R ELATIONS

Notations
, , , , , 
D, R, S, T

 w 
x, y, z,vi , vj
, , 
a, b, c, m
b8 , Q8 , C8
H
P, Q
H
Ix (a), Iy (a)
M(a)

m = (mi )ni=1
(, )
x (, ), y (, )
(, )
]
JSP(S, T )
RA(T )
RCC8(D)
CCP(vi , vj )

Meanings
relations, usually basic relations (page 498)
relations, usually non-basic relations (page 498)
the converse relation of  (page 498)
the weak composition of  and  (page 498)
spatial variable or interval variable (page 498)
network of constraints (page 498)
bounded regions (page 500)
the three maximal tractable subclasses of RCC8 (page 500)
points (page 501)
the unique maximal tractable subclass of IA (page 502)
the x- and y- projective intervals of region a (page 503)
the minimal bounding rectangle (MBR) of region a (page 503)
the RA relation induced by two IA relations ,  (page 503)
an n-tuple of regions mi that form a solution to some network (page 504)
a consistent pair of basic CDC relations (page 505)
the x- and y- projective interval relations of (, ) (page 505)
the RA relation x (, )  y (, ) induced by (, ) (page 506)
the combination of two networks over the same set of variables (page 507)
the joint satisfaction problem over subclasses S and T (page 507)
the RA relation induced by an RCC8 relation T (page 509)
the RCC8 relation induced by an RA relation D (page 509)
two variables vi , vj have the common conflict point relation (page 510)
Table 1: Notations.

These sets of building blocks form spatial regions in the general sense as used by RCC8 and
BRCC8 (Wolter & Zakharyaschev, 2000), which also include regions with multiple disconnected
pieces or regions with holes. In particular, it means that any RCC8 relation is possible between two
sets of objects, not just DC or EC.
Given spatial configurations in the Angry Birds domain, we can now use RCC8 relations as well
as RA and CDC relations to represent spatial information about (sets of) objects and their minimum
bounding boxes that is extracted from the screenshots. The results of this paper allow us to accurately reason about the combined information represented using RCC8, RA, and CDC. Important
reasoning tasks that can benefit from our results include, for example, inferring how a configuration
changes after it is hit by a bird or inferring whether a given representation is consistent or whether
it is stable under gravity (Zhang & Renz, 2014). An algorithm for predicting the configuration of
the blocks after a shot might work by envisaging individual possible block positions but these might
be mutually or globally inconsistent. An algorithm for reasoning about the consistency of such
predictions is therefore desirable.
The remainder of this paper proceeds as follows. Section 2 introduces basic notions, important
examples, and essential results of qualitative calculi. Section 3 then describes the joint satisfaction
problem and considers the simple example of the combination of RA and CDC constraints. Sections
4 and 5 consider the computational complexity of the combination of weak and, respectively, strong
497

fiC OHN , L I , L IU , & R ENZ

RCC8 with RA. Section 6 discusses the computational complexity of the combination of weak and
strong RCC8 with CDC. We conclude the paper in Section 7 and give proofs of major computational complexity results in the appendices. For the convenience of the reader, Table 1 summarises
notations used in this paper.

2. Qualitative Calculi
The establishment of a proper qualitative calculus is the key to the success of the qualitative approach to temporal and spatial reasoning. This section introduces basic notions of qualitative calculi and recalls the RCC8 algebra, the Rectangle Algebra, and the Cardinal Direction Calculus. In
addition, we will also summarise some essential results that will be used in the main part of the
paper.
2.1 Basic Notions
Let U be the domain of temporal or spatial entities, and Rel(U) be the set of binary relations on U.
With the usual relational operations of intersection, union, and complement, Rel(U) is a Boolean
algebra. A finite set B of nonempty binary relations on U is jointly exhaustive and pairwise disjoint
(JEPD for short) if any two entities in U are related by one and only one relation in B. Write hBi
for the subalgebra of Rel(U) generated by B. Clearly, relations in B are atoms in the algebra hBi.
We call hBi a qualitative calculus on U, and call relations in B basic relations of the calculus.
Notation. Note that each relation in hBi is the union of a set of basic relations. In this paper, we
write R = {1 , 2 , ..., k } if R is the union of basic relations 1 , 2 , ..., k . For convenience, we
regard each basic relation  as the singleton {}.
For two relations R, S in a qualitative calculus M = hBi, we write R for the converse of R,
which is defined as
R = {(x, y)  U  U : (y, x)  R},

(1)

and write R w S for the smallest relation in M which contains R  S, the usual composition of R
and S, which is defined as
R  S = {(x, y)  U : (z  U)(x, z)  R  (z, y)  S}.
We call R w S the weak composition of R and S (Duntsch, Wang, & McCloskey, 2001).
A constraint over hBi has the form (xRy), where R is a relation in hBi. We call (xRy) a basic
constraint if R is a basic relation in B. An important reasoning problem in a qualitative calculus is to
determine the satisfiability or consistency of a network  = {vi Rij vj }ni,j=1 of constraints over hBi,
where  is satisfiable (or consistent) if there is an instantiation (ai )ni=1 in U such that (ai , aj )  Rij
holds for all 1  i, j  n.
Given two constraint networks  = {vi Rij vj }ni,j=1 and  = {vi Tij vj }ni,j=1 , we say  refines
 if Tij is a subset of Rij for any 1  i, j  n. A consistent scenario of  is a consistent basic
network that refines . It is clear that  is consistent iff it has a consistent scenario. On the other
hand, given an n-tuple of entities (ai )ni=1 in U, write ij for the basic relation in a fixed qualitative
calculus that relates ai to aj . Then  = {vi ij vj }ni,j=1 is a consistent scenario and we call this the
scenario (or basic constraint network) induced by (ai )ni=1 .
498

fiR EASONING ABOUT T OPOLOGICAL AND C ARDINAL D IRECTION R ELATIONS

The consistency of a constraint network can be partially determined by path-consistency algorithms. We say a network  = {vi Rij vj }ni,j=1 is path-consistent if

Rji = Rij
,

 6= Rij  Rik w Rkj

(2)

for any i, j and any k 6= i, j. In case  is a basic network, this is equivalent to saying that every
subnetwork involving three variables of  is consistent.
Path-consistency can be enforced in cubic time (Vilain & Kautz, 1986). That is, if we apply
the path-consistency algorithm on a constraint network , then in cubic time the algorithm will
terminate and we either get an empty constraint (and hence know that  is inconsistent) or transform
 into an equivalent path-consistent network. For basic networks, it is easy to see that consistency
implies path-consistency, but the opposite proposition does not always hold.
In the following subsections we recall the qualitative topological and directional calculi that will
be discussed in this paper.
2.2 The Region Connection Calculus RCC8
The region connection calculus (RCC) (Randell et al., 1992) is a first-order theory based on a binary
connectedness relation. Standard RCC models arise from topological spaces. In this paper, we are
only concerned with interpretations of RCC in the real plane, which provides arguably the most
important model for RCC. Another reason lies in that the directional calculi considered in this paper
are also defined over the real plane. A plane region (or region) is a nonempty regular closed subset
of the real plane. We only consider bounded regions, as cardinal directions only involve bounded
regions. But these regions could have multi-pieces and/or have holes.1
One standard interpretation of RCC is based on the Whiteheadean connectedness (Whitehead,
1929) on plane regions, where two regions are connected if they have a common point. This connectedness may be considered too weak in many cases. For example, a worm cannot pass from the
interior of one apple to another, which touch just at a point, without becoming visible to the exterior  so from the worms point of view we might as well say that the apples are not sufficiently
connected. (Borgo, Guarino, & Masolo, 1996, p. 223) In this paper, we also consider a stronger
connectedness, in which two regions are regarded as connected if their intersection is at least onedimensional (Li, Liu, & Wang, 2013). In the case of a rectangular grid of spatial primitive entities,
as already noted, strong and weak connectedness correspond to, respectively, the important notion
of 4- and 8-neighbourhood of pixels commonly used in Computer Vision.
In both interpretations, the relations in Table 2 and the converses of TPP and NTPP form a
JEPD set. Write Brcc8 and Brcc80 for these two sets. We call the Boolean algebras generated by
Brcc8 and Brcc80 , respectively, the weak and the strong RCC8 models, written as RCC8 and RCC80 .
Strong connectedness has been considered by Borgo et al., (1996), Cohn and Varzi (1999), and
Li et al., (2013). It is easy to see that, as relations, strong connectedness is contained in weak
connectedness. Table 2 illustrates a configuration (the 2nd from the left) which is an instance of EC
in RCC8 but an instance of DC in RCC80 , and a configuration (the 2nd from the right) which is an
instance of TPP in RCC8 but an instance of NTPP in RCC80 .
1. We stress here that the restriction of RCC to bounded plane regions does not affect the complexity of reasoning with
RCC8, as every consistent RCC8 network has a solution in any RCC model (Li, 2006b).

499

fiC OHN , L I , L IU , & R ENZ

Relation
equals
disconnected
externally connected

Symb.
EQ
DC
EC

partially overlap

PO

tangential proper part
non-tangential proper part

TPP
NTPP

Definition (weak)
a=b
ab=
a  b 6=   a  b = 
a  b 6=  
a 6 b  a 6 b
a  b  a 6 b
a  b

Definition (strong)
a=b
dim(a  b)  0
dim(a  b) = 1
a  b 6=  
a 6 b  a 6 b
a  b  dim(a  b) = 1
a  b  dim(a  b)  0

Table 2: The set of basic RCC8 and RCC80 relations, where a, b are two plane regions and x , x, dim(x)
denote, respectively, the interior, boundary, and dimension of x. Note that for notational convenience we set dim() = 1.

Remark 1. As far as consistency and realisations are concerned, Li (2006b) has shown that any
consistent RCC8 network has a solution in any RCC model. The cubic realisation algorithm described there can be used to construct a solution in both the weak and the strong RCC8 models.
This implies in particular that an RCC8 network has a solution in the weak RCC8 model iff it has
a solution in the strong RCC8 model. As we will show in this paper, this is, however, not the case
when cardinal directions are combined with topological relations.
In the following, we recall some important properties of the three maximal tractable subclasses
b
H8 , C8 , and Q8 of RCC8 identified by Renz (1999). A complete list of relations in these subclasses
can be found in Appendix A of the work of Renz (2002).
Lemma 2. Suppose R is a non-basic RCC8 relation such that R  {DC, EC, PO} = . Then
(1) R  Q8 iff R is either {TPP, NTPP} or {TPP , NTPP }.
b8 iff R is in Q8 or one of the following relations
(2) R  H
{TPP, EQ}, {TPP, NTPP, EQ}, {TPP , EQ}, {TPP , NTPP , EQ}.
b8 , or either {NTPP, EQ} or {NTPP , EQ}.
(3) R  C8 iff R is in H
We note the above lemma does not define these subclasses. In particular, these subclasses do
include RCC8 relations R such that R  {DC, EC, PO} =
6 .
Renz also shows that a consistent scenario can be constructed in O(n2 ) time for any pathconsistent network  over one of the three maximal tractable subclasses.
500

fiR EASONING ABOUT T OPOLOGICAL AND C ARDINAL D IRECTION R ELATIONS

Theorem 3 (Renz, 1999). A consistent scenario s of a path-consistent network  of constraints
b8 , C8 , or over Q8 can be computed in O(n2 ) time, by replacing every constraint (vi Rvj )  
over H
with (vi base(R) vj )  s , where base(R) is a basic relation obtained as follows:
(1) If R  B, then base(R) = R;
(2) else if {DC}  R, then base(R) = {DC};
b8 , then base(R) = {EC};
(3) else if {EC}  R and S = Q8 or S = H
(4) else if {PO}  R, then base(R) = {PO};
(5) else if {NTPP}  R and S = C8 , then base(R) = {NTPP};
(6) else if {TPP}  R, then base(R) = {TPP};
(7) else base(R) = base(R ).
In what follows, we call s the canonical consistent scenario of .
2.2.1 R EALISATION OF BASIC RCC8 N ETWORKS
It is known that, for basic RCC8 networks, path-consistency implies consistency (Nebel, 1995). We
next give a a short description of the cubic realisation algorithm proposed by Li (2006b), as we need
to devise a similar algorithm later for the combination cases.
Given a basic RCC8 network  = {vi ij vj }ni,j=1 , suppose  is path-consistent. An ntpp-chain
in  is defined to be a series of variables vi1 , vi2 ,    , vik such that vis NTPPvis+1   for all
s = 1,    , k  1. The ntpp-level l(i) of a variable vi is defined to be the maximum length of the
ntpp-chains contained in  that ends with vi .
A realisation can be constructed as follows, where a variable may be interpreted as a bounded
region with multiple pieces. Without loss of generality, we assume (vi EQvj )   only when
i = j. We first define for each variable vi a finite set Xi of control points as follows. For each i,
introduce a point Pi to vi ; if vi ECvj or vi POvj , then introduce a point Pij to vi ; if vi TPPvj or
vi NTPPvj , then put all Xi points into Xj . We then expand each point P in Xi a little to obtain a
square s(P ). These squares are pairwise disjoint. Then, taking the union of these squares, we obtain
an instantiation of bounded regions to these vi . This works for all but the EC and NTPP constraints.
Further modifications are needed to cope with these constraints (cf. Li, 2006b or Appendix C of
this paper).
2.3 Interval Algebra and Rectangle Algebra
In this subsection, we recall Interval Algebra (IA) (Allen, 1983) and Rectangle Algebra (RA) (Balbiani et al., 1999). IA is the qualitative calculus generated by the 13 basic relations between closed
intervals on the real line shown in Table 3. We write
Bint = {b, m, o, s, d, f, eq, fi, di, si, oi, mi, bi}

(3)

for the set of basic IA relations. Ligozat (1994) defines the dimension2 of a basic interval relation
as 2 minus the number of equalities appearing in the definition of the relation (see Table 3). That is,
2. We stress that this notion of dimension is different from the topological dimension.

501

fiC OHN , L I , L IU , & R ENZ

for basic relations we have
dim(eq) = 0, dim(m) = dim(s) = dim(f) = 1, dim(b) = dim(o) = dim(d) = 2.

(4)

For a non-basic relation R we define
dim(R) = max{dim() :  is a basic relation in R}.

Relation
before
meets
overlaps
starts
during
finishes
equals

Symb.
b
m
o
s
d
f
eq

Conv.
bi
mi
oi
si
di
fi
eq

Dim.
2
1
2
1
2
1
0

(5)

Definition
x+ < y 
x+ = y 
x < y  < x+ < y +
x = y  < x+ < y +
y  < x < x+ < y +
y  < x < x+ = y +
x = y  < x+ = y +

(i)

(ii)

Table 3: IA basic relations (i) definitions and (ii) conceptual neighbourhood graph, where x =
[x , x+ ], y = [y  , y + ] are two intervals.
Nebel and Burckert (1995) have shown that there is a unique maximal tractable subclass of IA
which contains all basic relations. This subclass, written as H, is known as the ORD-Horn class.
Using the conceptual neighbourhood graph (CNG) of IA (Freksa, 1992), Ligozat (1994) gives a
geometrical characterisation for ORD-Horn relations. Consider the CNG of IA (shown in Table 3
(ii)) as a partially ordered set (Bint , ) (by interpreting any relation smaller than its right or upper
neighbours). For 1 , 2  Bint with 1  2 , we write [1 , 2 ] as the set of basic interval relations 
such that 1    2 , and call such a relation a convex interval relation. An IA relation R is called
pre-convex if it can be obtained from a convex relation by removing one or more basic relations with
dimension lower than R. For example, [o, eq] = {o, s, fi, eq} is a convex relation and {o, eq} is a
pre-convex relation. Ligozat has shown that ORD-Horn relations are precisely pre-convex relations.
Nebel and Burckert also show that every path-consistent IA network over H is consistent. Furthermore, we can construct a consistent scenario for every path-consistent IA network over H in
quadratic time.
Suppose R is an IA relation and let
Rcore = {  Bint : dim() = dim(R),   R}.

(6)

By (6) it is clear that Rcore = {eq} iff R = {eq}, and Rcore = R  {b, o, d, di, oi, bi} if R 
{b, o, d, di, oi, bi} is nonempty, and Rcore = R \ {eq} otherwise. Then we have
Lemma 4. (Renz, 1999) Suppose  = {vi Rij vj }ni,j=1 is a path-consistent IA network over H. Let
core
core = {vi Rij
vj }ni,j=1 .

Then core is also path-consistent.
502

(7)

fiR EASONING ABOUT T OPOLOGICAL AND C ARDINAL D IRECTION R ELATIONS

From Table 3 (ii) it is easy to see that a pre-convex relation R has dimension 1 iff either R is a
1-dim basic relation or R is contained in {s, eq, si} or {fi, eq, f}. As a consequence, we know
Corollary 5. Suppose  = {vi Rij vj }ni,j=1 is a path-consistent network over H. Then  has a
 v }n
consistent scenario  = {vi Rij
j i,j=1 which has the following property:
 ) = dim(R ), and
dim(Rij
ij
 = {eq} only if R = {eq}, R = {m} only if R = {m}, R = {mi} only if R = {mi}.
Rij
ij
ij
ij
ij
ij

This result shows that, for any path-consistent network  over H, we can construct in quadratic
time a consistent scenario for .

(i)

(ii)

Figure 2: (i) The minimum bounding rectangle M(a) of a region a; (ii) the RA relation of a to b is
m  o.
IA can be naturally extended to regions in the plane. We assume an orthogonal basis in the Euclidean plane. For a bounded region a, its minimum bounding rectangle (MBR), denoted by M(a),
is the smallest rectangle which contains a and whose sides are parallel to the axes of the basis.
We write Ix (a) and Iy (a) as, respectively, the x- and y-projections of M(a). The basic rectangle
relation between two bounded regions a, b is    iff (Ix (a), Ix (b))   and (Iy (a), Iy (b))  ,
where ,  are two basic IA relations (see Figure 2 for illustration). We write Brec for the set of
basic rectangle relations, i.e.,
Brec = {   : ,   Bint }.

(8)

There are 169 different basic rectangle relations in Brec . The Rectangle Algebra (RA) is the algebra
generated by relations in Brec (Balbiani et al., 1999).
The following definitions will be used later.
Definition 6. Suppose  = 1  2 is a basic RA relation. We say  is a 0-meet relation if
1 , 2  {m, mi}, and is a corner relation if 1 , 2  {m, mi, s, si, f, fi, eq}. In general, we say a
non-basic RA relation R = {1 , ..., k } (k  2) is a corner relation if each i (1  i  k) is a
corner relation.
By definition, each 0-meet relation is a corner relation. Furthermore, it is easy to see that a basic
RA relation  is a 0-meet relation iff, for every two rectangles r, r0 with (r, r0 )  , r  r0 is a
singleton in the plane; and  is a corner relation iff every two rectangles r, r0 with (r, r0 )   have,
at least, a corner point in common.
The following lemma is straightforward.
503

fiC OHN , L I , L IU , & R ENZ

Lemma 7. Let  = {vi (Rij  Sij )vj }ni,j=1 be an RA network, where Rij and Sij are arbitrary IA
relations. Then  is satisfiable iff its projections x = {xi Rij xj }ni,j=1 and y = {yi Sij yj }ni,j=1
are satisfiable IA networks.
By Corollary 5 and the above lemma we have
Lemma 8. Suppose  = {vi Rij vj } is a path-consistent RA network over H  H. Then  has a
consistent scenario  = {vi ij vj } such that
 ij is a 0-meet relation iff Rij is a 0-meet basic relation, and
 ij is a corner relation iff Rij consists only of basic corner relations.
As a consequence, we know H H is a tractable subclass of RA. No maximal tractable subclass
has been identified for RA, but a larger tractable subclass of RA has been identified (Balbiani et al.,
1999).
We next show that each path-consistent basic IA or RA network has a canonical solution in the
following sense.
+ n
Definition 9 (canonical tuple of intervals (rectangles)). Suppose m = ([m
i , mi ])i=1 is an n-tuple
of intervals. Let E(m) be the set of the values of the end points of intervals in m. We say m is
canonical iff E(m) = {0, 1,    , M }. A tuple of rectangles (mi )ni=1 is canonical iff its x- and
y-projections, (Ix (mi ))ni=1 and (Iy (mi ))ni=1 , are canonical tuples of intervals. A solution of an
IA (RA, respectively) network is called a canonical solution if it is a canonical tuple of intervals
(rectangles, respectively).

For a basic satisfiable IA network, we can compute the total order of all the end points. Hence
we can obtain a canonical solution (by assigning 0 to the first end point, 1 to the second, etc.). This
gives us the following proposition.
Proposition 10. Suppose  is a satisfiable basic IA (RA) constraint network. Then  has a unique
canonical solution.
2.4 Cardinal Direction Calculus
The cardinal direction calculus (CDC) was proposed by Goyal and Egenhofer (1997). Given a
bounded region b in the real plane, by extending the four edges of M(b), we partition the plane into
nine tiles, denoted by bij (1  i, j  3), see Figure 3 (i) for illustration.
For a primary region a and a reference region b, the CDC relation of a to b, denoted by ab ,
is encoded in a 3  3 Boolean matrix (dij )1i,j3 , where dij = 1 iff a  bij 6=  (where a is
again the interior of a). For example, the basic CDC relations ab and ba for the regions a, b in
Figure 3(ii) are represented by the following matrices.




0 0 0
0 0 1
  = ab = 1 0 0 ,   = ba = 0 0 1 .
(9)
0 0 0
0 0 1
A CDC relation can be any but the zero Boolean matrix, so there are 29 1 = 511 basic relations
in CDC. We denote this set by Bcdc . A pair of basic CDC relations (, ) is called a consistent pair
504

fiR EASONING ABOUT T OPOLOGICAL AND C ARDINAL D IRECTION R ELATIONS

(i)

(ii)

(iii)

Figure 3: Illustrations of (i) the nine tiles of a reference region; (ii) and (iii): two solutions of the
CDC basic constraint network {v1   v2 , v2   v1 }, where   and   are defined in Eq. (9).

if the constraint network {v1 v2 , v2 v1 } has a solution. We also call  a weak converse of  if
(, ) is a consistent pair. Figure 4 shows that a basic CDC relation may have more than one weak
converse. Therefore, we need both the relation of a to b and the relation of b to a to give a complete
description (in terms of the CDC calculus) of the directional information between two regions a, b.

(i)

(ii)

Figure 4: Illustration of two consistent CDC pairs (i) (ab , ba ) and (ii) (a0 b0 , b0 a ), where ab =
a0 b0 but ba 6= b0 a0 . Also note that the rectangle relation between a, b and that between
a0 , b0 are both o  o.
In the following we show that there is a strong connection between CDC and RA relations.
Definition 11. (Zhang et al., 2008; Liu et al., 2010) For a pair of basic CDC relations (, ), we
define the x-projective interval relation of (, ), written as x (, ), as the disjunction of all basic
IA relations  which has an instance that is the x-projection of some solution of {v1 v2 , v2 v1 },
i.e.
x (, ) = {  Bint : (m1 , m2 )[(m1 , m2 )    (m2 , m1 )    (Ix (m1 ), Ix (m2 ))  ]}.
A similar definition applies for the y-direction.
Note that if (, ) is not a consistent pair, then both x (, ) and y (, ) are the empty relation.
If (, ) is a consistent pair, then we can prove (Liu et al., 2010) that its x- (or y-) projective interval
505

fiC OHN , L I , L IU , & R ENZ

relation is an IA relation R which has the following property
R = {b, m} or R = {bi, mi}, or R is a basic IA relation in {o, s, d, f, eq, oi, si, di, fi}.

(10)

The two projective interval relations can then be combined into an RA relation.
Definition 12. (Zhang et al., 2008; Liu et al., 2010) For a pair of basic CDC relations (, ), we
call (, ) = x (, )  y (, ) the RA relation induced by (, ). In general, for a basic CDC
constraint network  = {vi ij vj }ni,j=1 , we call () = {vi Rij vj }ni,j=1 the RA constraint network
induced by , where Rij = (ij , ji ).
Note that (, ) is not necessarily a basic RA relation. If (, ) is consistent, then we know the
RA relation (, ) has the form   , where ,  are IA relations that satisfy (10). Furthermore,
a solution of {v1 v2 , v2 v1 } is always a solution of {v1 (, )v2 }. We note that a solution of
{v1 (, )v2 } is not necessarily a solution of {v1 v2 , v2 v1 }.
Take the consistent pair (  ,   ) defined in (9) as an example. Figure 3 (ii) and (iii) show two
solutions (a, b) and (a0 , b0 ) of the basic CDC constraint network {v1   v2 , v2   v1 }. This implies
by definition that x (  ,   ) contains {b, m}. It is easy to see from the definition that x (  ,   )
contains no other basic IA relations and x (  ,   ) = {b, m}. Similarly, we can show y (  ,   ) =
{d}. This shows that this consistent pair (  ,   ) corresponds to basic RA relations, viz. m  d and
b  d.
2.4.1 C ANONICAL S OLUTIONS OF BASIC CDC N ETWORKS
Just like IA and RA, consistent CDC networks also have canonical solutions.
Definition 13 (regular solution, Zhang et al., 2008; Liu et al., 2010). Suppose m = (mi )ni=1 is
a solution of a basic CDC constraint network . We say that m is maximal if m0i  mi holds
for any solution (m0i )ni=1 of  with M(mi ) = M(m0i ); we say m is regular if m is maximal and
(M(mi ))ni=1 is a canonical tuple of rectangles.
A basic CDC network in general has many regular solutions, but we have the following result.
Proposition 14. Let  be a basic CDC network. Suppose  is a basic RA network that refines
(), the induced RA network of . Then we can determine in cubic time whether  has a solution
that also satisfies . Moreover, if  has a solution, then it has a unique regular solution which also
satisfies . Furthermore, this unique regular solution can be constructed in cubic time.
Proof. The proof is similar to that for Proposition 12 in the work of Liu et al., (2010). A sketch is
given in Appendix A.
From the proof of the above result, we can see that each region mi in a regular solution (mi )ni=1
consists of unit cells (i.e. rectangles of the form [i, i+1][j, j +1], where i, j  Z) in the canonical
solution of , i.e. for each region mi and each cell c, we have either c  mi or c  mi  = .
For a basic CDC network , there may exist exponentially many different basic RA networks
that refine (). Hence,  may have exponentially many different regular solutions (see Figure 11(a) for an example of such a network). However, to verify that  has a solution, we need
only prove that  has a solution for some special basic RA network that refines () (Liu et al.,
2010, Proposition 12).3 Therefore, the consistency of  can be determined in cubic time, and, if 
is consistent, a regular solution can be constructed in cubic time (Liu et al., 2010).
3. Such a special network is called a meet-free basic RA network in the work of Liu et al., (2010).

506

fiR EASONING ABOUT T OPOLOGICAL AND C ARDINAL D IRECTION R ELATIONS

3. The Joint Satisfaction Problem
After the preparatory introduction of basic notions and essential results of qualitative calculi, we are
now ready to describe the joint satisfaction problem.
Let M1 and M2 be two qualitative calculi over the same domain U. Suppose Si is a subclass of
Mi (i = 1, 2). We write JSP(S1 , S2 ) for the joint satisfaction problem (Gerevini & Renz, 2002; Li,
2007) over S1 and S2 .
Suppose  = {vi Tij vj }ni,j=1 is a constraint network over S1 , and  = {vi Dij vj }ni,j=1 is a
constraint network over S2 involving the same variables. Then we say  ]  is an instance of
JSP(S1 , S2 ). The joint satisfaction problem was first considered for RCC8 and the qualitative size
calculus (identical to the Point Algebra in Vilain & Kautz, 1986) by Gerevini and Renz (2002).
Moreover, it was shown that the consistency of a joint network can be approximated by the polynomial bipath-consistency algorithm. Li and Cohn (2012) recently showed that bipath-consistency
can be equivalently expressed as below.
Definition 15. Let ] be a joint constraint network over M1 and M2 , where  = {vi Tij vj }ni,j=1
and  = {vi Dij vj }ni,j=1 . We say  ]  is bi-closed if   Dij and Tij   are nonempty for any
basic relation   Tij , any basic relation   Dij , and any 1  i, j  n (here we regard each
relation as a subset of U  U). A bi-closed joint network  ]  is bipath-consistent if  and  are
both path-consistent.
Informally speaking, a joint constraint network is bi-closed if each basic relation of a given
relation in one of the calculi is consistent with the corresponding relation in the other calculus.
As a simple example of the joint satisfaction problem, we consider the combination of RA and
CDC in the next subsection.
3.1 The Combination of RA and CDC
Let R be a basic CDC relation. Then R , the set-theoretic converse (or inverse) relation of R
(cf. (1)), may be not representable in the relation algebra CDC (Cicerone & Di Felice, 2004; Liu
et al., 2010). That is, R cannot be represented as the union of several basic CDC relations. In this
sense, we say the CDC is not closed under converse. Recently, Schneider et al. (2012) proposed a
variant of CDC, called the Object Interaction Model (OIM), which is closed under converse.
For two bounded regions a, b, OIM divides the plane into up to (l1 + 2)  (l2 + 2) tiles by
extending the edges of M(a) and M(b), where l1 + 1 and l2 + 1 are the numbers of horizontal
and, respectively, vertical lines. It is clear that 1  l1 , l2  3 since edges of M(a) and M(b) may
coincide. The OIM relation ab is represented by an l1  l2 matrix (also written as ab ) considering
existence of interior points of a and/or b in corresponding bounded tiles. Let T be such a bounded
tile. We set the entry corresponding to T in the matrix ab to 0 if T has no interior point which is in
either a or b; and set it 1 (2, respectively) if T has an interior point which is in a (b, respectively) and
has no interior point which is in b (a, respectively); and set it 3 otherwise. The converse relation of
a basic OIM relation is also a basic OIM relation. In particular, the basic OIM relation ba of b to a
can be obtained by swapping the occurrences of 1 and 2 in ab .
For example, the OIM relations between the regions in Figure 3 (ii) and (iii) are respectively




0 0 2
0 2
ab = 1 0 2 , a0 b0 = 1 2 ,
0 0 2
0 2
507

fiC OHN , L I , L IU , & R ENZ

and the OIM relations between the regions in Figure 4 are respectively

ab



0 2 2
= 1 3 2 ,
1 1 0

a0 b0



0 2 2
= 1 1 2 .
1 1 0

We note that for regions a, b, a0 , b0 in both figures we have ab = a0 b0 . This suggests that OIM is
finer grained than CDC in the sense that it splits one basic CDC relation into several OIM relations.
Nevertheless, since CDC is not closed under converse, we need to consider consistent pairs of basic
CDC relations in order to evaluate its expressivity. When comparing the expressivity of the two
calculi in this way, we can see that (ab , ba ) 6= (a0 b0 , b0 a0 ) in Figure 4, but (ab , ba ) = (a0 b0 , b0 a0 )
in Figure 3. This shows that OIM makes finer distinctions than CDC in describing the scenarios
given in Figure 3(ii) and (iii): when saying a is west of b, CDC does not differentiate if the east
boundary of a meets or precedes the west boundary of b. The following result shows that OIM is
only finer than CDC in describing these cardinal relations, and it is in essence the combination of
CDC and RA.
Theorem 16. (Li & Liu, 2014) For any two regions a and b, we can compute the RA relation of a
to b, the CDC relation of a to b, and the CDC relation of b to a from the OIM relation of a to b, and
vice versa.
In other words, for each basic OIM relation , there exist two basic CDC relations ,  0 and a
basic RA relation  such that  =    0   , i.e. for any two regions a and b, the relation  is the
OIM relation of a to b iff ,  0 and  are, respectively, the CDC relation of a to b, the CDC relation
of b to a, and the RA relation of a to b. Because basic CDC and RA relations are both JEPD, the
above choices of ,  0 ,  are unique. In the following, we call  the CDC relation induced by  and
call  the RA relation induced by . Note that in this case  0 (as a relation of b to a) is the CDC
relation induced by  , which is the OIM relation of b to a.
As a consequence, we have the following result.
 for any
Proposition 17. Suppose  = {vi ij vj }ni,j=1 is a basic OIM network such that ji = ij
n
n
i, j. Let  = {vi ij vj }i,j=1 and  = {vi ij vj }i,j=1 , where ij and ij are, respectively, the CDC
relation and the RA relation induced by ij . Then  is consistent iff the joint network  ]  is
consistent.

Proof. Recall that the converse of a basic OIM relation is also a basic OIM relation. Because
 , it is straightforward to show that  =       . Therefore, solutions of  are
ji = ij
ij
ij
ij
ji
exactly the solutions of  ] .
As a consequence of Propositions 14 and 17 we have
Corollary 18. Let ,  and  be as given in Proposition 17. Then  is a basic RA network that
refines (), and the consistency of  can be determined in cubic time. Moreover, if  is consistent,
then there is a unique regular solution of  that is also a solution of .
So far, we have described by an example what is a JSP. In the next three sections, we will
consider the main task of this paper: the JSP of topological and directional constraints.
508

fiR EASONING ABOUT T OPOLOGICAL AND C ARDINAL D IRECTION R ELATIONS

4. Combination of Weak RCC8 and RA Networks
In this section we represent topological information as weak RCC8 relations and directional information as RA relations. We first consider the interaction between weak RCC8 and RA relations,
then consider the JSP for basic constraints, and, lastly, consider the JSP in general.
4.1 Interaction Between Weak RCC8 and RA Relations
Relations in different calculi may interact in the sense that a relation from one calculus may intersect
with several relations from the second calculus. We here recall related definitions and preliminary
results obtained by Li and Cohn (2012).
Definition 19. Let T be an RCC8 relation and D an RA relation. The RA relation induced by T
and the RCC8 relation induced by D are defined as
RA(T ) = { :  is a basic RA relation and   T 6= }

(11)

RCC8(D) = { :  is a basic RCC8 relation and   D 6= }.

(12)

Note that a joint network  ]  is bi-closed if ij  RA(ij ) and ij  RCC8(ij ) for any i, j.
S
It is easy to see (cf. Li and Cohn, 2012) that RA(T ) = {RA({}) :   T } and
RA({DC})  RA({EC}) RA({PO})  RA({TPP})  RA({NTPP, EQ}),




RA({PO})  RA({TPP })  RA({NTPP , EQ}),

(13)
(14)

where, for example, RA({EC})  RA({PO}) holds because, for each basic RA relation ,  is
in RA({EC}) if M(a)  M(b) 6=  for all (a, b)  , and  is in RA({PO}) if M(a)  M(b) is
a non-degenerate rectangle for all (a, b)  .
Lemma 20. Let T be an RCC8 relation and D an RA relation. Then RCC8(D) is a relation in the
b8 , Q8 , and C8 ; and RA(T ) is a relation in H  H if T is a relation in H
b8 or Q8 .
intersection of H
Proof. This follows from the definitions of RCC8(D) and RA(T ) and a simple table look-up from
Appendix A of the work of Renz (2002).
The second statement does not apply to relations in C8 . For example, consider T = {NTPP,
EQ}. Then T is a relation in C8 , but RA(T ) = {d  d, eq  eq} is outside H  H.
4.2 Combination of Basic Networks
We now consider the combination of RCC8 and RA. First we show that bipath-consistency is not
sufficient for consistency in JSP(Brcc8 , Brec ) (Li & Cohn, 2012). Let  = {vi ij vj }4i,j=1 be the
basic RA network induced by the four rectangles mi (i = 1, 2, 3, 4) illustrated below.
Let  = {vi ij vj }4i,j=1 be the basic RCC8 constraint network in which 12 = 34 = {EC} and
all the others are {DC}. Clearly,  is satisfiable. Although  ]  is bipath-consistent, it is not
satisfiable. This is because, otherwise, there exists a solution m = (mi )4i=1 and M(m1 )M(m2 ) =
M(m3 )  M(m4 ) = {P } is a singleton. By 12 = 34 = {EC} we know P  mi (i = 1, 2, 3, 4).
This contradicts 13 = {DC}.
We call point P in the above configuration a conflict point. In general, we have the following
definition.
509

fiC OHN , L I , L IU , & R ENZ

Definition 21 (conflict point). Let  = {vi ij vj }ni,j=1 be a basic RCC8 network and  = {vi
ij vj }ni,j=1 a basic RA network. Suppose m is the canonical solution of . A point Q is called a
conflict point of mi if there exists j such that mi  mj = {Q} and ij = {EC}. We write Ci for
the set of all conflict points of mi .
Clearly, each conflict point of mi is also a corner point of mi . This implies that mi and mj
may have at most one common conflict point. Moreover, suppose m = (mi )ni=1 is a solution of
 ]  such that M(mi ) = mi for all 1  i  n. Then each conflict point of mi is contained in
mi . This means Ci  mi . As a consequence, we have
Ci  Cj 6=   ij 6= {DC} (1  i, j  n)

(15)

The following theorem shows that this is also sufficient.
Theorem 22. Let  = {vi ij vj }ni,j=1 be a basic RCC8 network and  = {vi ij vj }ni,j=1 a basic RA
network. Suppose  ]  is bipath-consistent. Then  ]  is satisfiable iff (15) holds.
Proof. The necessity part is clear. We defer the proof of the sufficiency part to Appendix B.
As a corollary, we have JSP(Brcc8 , Brec ) is in P.
Corollary 23. For a basic RCC8 network  and a basic RA network , the consistency of  ] 
can be decided in cubic time.
Proof. Bipath-consistency of  ]  can be checked in cubic time. We can construct the unique
canonical rectangle solution of  in quadratic time. The conflict point set Ci can also be computed
in quadratic time. That is, the condition of Theorem 22 can be checked in cubic time.
4.3 Large Tractable Subsets
b8 , C8 , and Q8 , and IA has one maximal
Recall that RCC8 has three maximal tractable subclasses H
tractable subclass H, all containing the basic relations. In this subsection, we aim to extend the
b8 , C8 of RCC8, and the large tractable subset H  H of
above result to maximal tractable subsets H
RA.
To this end, we need to extend the notion of conflict points from basic networks to arbitrary
networks. Recall that 0-meet relations and corner relations are basic RA relations defined in Definition 6.
Definition 24 (common conflict point). Let  = {vi Tij vj }ni,j=1 be an RCC8 network and  =
{vi Dij vj }ni,j=1 an RA network. We say two variables vi , vj have the CCP (common conflict point)
relation, written CCP(vi , vj ), if Dij is a 0-meet (basic) relation and Tij = {EC}, or
 Dij is a (possibly disjunctive) corner relation; and
510

fiR EASONING ABOUT T OPOLOGICAL AND C ARDINAL D IRECTION R ELATIONS

 there exist i0 , j 0 such that Dii0 and Djj 0 are 0-meet (basic) relations, Dij 0 , Di0 j and Di0 j 0 are
(possibly disjunctive) corner relations, and Tii0 = Tjj 0 = {EC}.
If CCP(vi , vj ) and vi0 , vj0 are variables that satisfy the above conditions, we also write CCP(i, j :
i0 , j 0 ) to stress the roles of vi0 and vj 0 .

(i)

(ii)

Figure 5: Two joint constraint networks in JSP(RCC8, RA), where in both (i) and (ii)
Dij is the basic RA relation between vi and vj as illustrated in the picture, T14 = T23 = {EC} and all unspecified RCC8 constraints are
non-basic RCC8 relation {DC, EC, PO}.
In both (i) and (ii) we have
CCP(1, 2), CCP(1, 3), CCP(1, 4), CCP(2, 3), CCP(2, 4), CCP(3, 4).

Examples are shown in Figure 5. Note that if  and  are all basic networks, then vi and vj
have the CCP relation iff Ci  Cj is nonempty, i.e. vi and vj have a common conflict point.
Definition 25. Let  = {vi Tij vj }ni,j=1 be an RCC8 network and  = {vi Dij vj }ni,j=1 an RA
network. We say  ]  is CCP-consistent if
CCP(vi , vj )  DC 6 Tij

(16)

holds for any i 6= j. We say a joint network  ]  is BC-consistent if it is bipath-consistent and
CCP-consistent.
In general, if vi and vj have the CCP relation, then (in any realisation) vi and vj share at least
one corner point (of their MBRs) in common. Therefore, in the weak RCC8 algebra, they cannot be
disconnected, and neither can be contained in another as a non-tangential proper part. Note that the
latter statement also follows from the bi-closedness of  ] .
Similar to the bipath-consistency algorithm (Gerevini & Renz, 2002), we devise an algorithm
(Algorithm 1) for enforcing BC-consistency. The following theorem shows that this algorithm is
sound.
Theorem 26. Suppose  ]  is a joint network of RCC8 and RA constraints, where  = {vi Tij
vj }ni,j=1 and  = {vi Dij vj }ni,j=1 . Then in O(n4 ) time, the algorithm BC-C ONSISTENCY either
finds an inconsistency or transforms  ]  into an equivalent joint network 0 ] 0 which is
BC-consistent.
511

fiC OHN , L I , L IU , & R ENZ

Input: A joint network  ] , where  = {vi Tij vj }ni,j=1 and  = {vi Dij vj }ni,j=1 .
Output: false, if an empty constraint is generated; a BC-consistent joint network equivalent
to  ] , otherwise.
Q  {(i, k, j) | i 6= j, k 6= i, k 6= j};
(i indicates the i-th variable of  ] .
Analogously for j and k)
while Q 6=  do
select and delete a path (i, k, j) from Q;
if BC-R EVISION(i, k, j) then
if Tij =  or Dij =  then
return false;
end
Q  Q  {(i, j, k), (k, i, j) | k 6= i, k 6= j};
end
end
Function: BC-R EVISION(i, k, j)
Input: three variables i, k and j
Output: true, if Tij or Dij is revised; false otherwise.
Side effects: Tij and Dji revised using the operations  and w .
Tij 
(Tij  RCC8(Dij ))  (Tji  RCC8(Dji ))  (Tik  RCC8(Dik )) w (Tkj  RCC8(Dkj ));
Dij  (Dij  RA(Tij ))  (Dji  RA(Tji ))  (Dik  RA(Tik )) w (Dkj  RA(Tkj ));
if CCP(i, j : k) then
Tij  Tij \ {DC};
end
if neither Tij nor Dij is revised then
return false;
end
;
Dji  Dij
Tji  Tij ;
return true.
Algorithm 1: BC-C ONSISTENCY, where we write CCP(i, j : k) to represent the situation
where there exists another variable vl such that vl and vk together are evidence of CCP(i, j).

512

fiR EASONING ABOUT T OPOLOGICAL AND C ARDINAL D IRECTION R ELATIONS

Proof. This is because, if we iteratively use the following updating rules then either an empty constraint occurs or the network becomes stable.
Tij  (Tij  RCC8(Dij ))  (Tji  RCC8(Dji ))
 (Tik  RCC8(Dik )) w (Tkj  RCC8(Dkj ))


(17)

Dij  (Dij  RA(Tij ))  (Dji  RA(Tji ))  (Dik  RA(Tik )) w (Dkj  RA(Tkj ))

(18)

Tij  Tij \ {DC} if CCP(i, j : k),

(19)

where i, j, k represent the variables vi , vj and vk and CCP(i, j : k) represents the situation where
there exists another variable vl such that vl and vk together are evidence of CCP(i, j). For each
triple, CCP(i, j : k) can be determined in O(n) time and the subroutine BC-R EVISION(i, k, j) can
be carried out in O(n) time. Since each Tij is a set of basic RCC8 relations and each Dij is a set of
basic RA relations, (Tij , Dij ) can be revised for a constant number of times. Therefore the number
of the loops remains cubic, and BC-C ONSISTENCY will terminate in O(n4 ) time.
The algorithm is in general not complete. The following lemma will be useful to prove the main
result (Theorem 28), which will guarantee the completeness of the algorithm for RCC8 networks
b8 and RA networks over H  H.
over H
Lemma 27. Let  = {vi Tij vj }ni,j=1 be an RCC8 network and  = {vi Dij vj }ni,j=1 an RA network.
b8 or Q8 and  ]  is bipath-consistent. Assume that  is the canonical
Suppose  is over H
consistent scenario of  (cf. Theorem 3), and  is any consistent scenario of . Then  ]  is
bipath-consistent.
Proof. Because both  and  are path-consistent basic networks, we need only show that  ]
  RA(  ) and    RCC8(  ) for any i 6= j. Since   and   are both basic
is bi-closed, i.e. ij
ij
ij
ij
ij
ij
    is nonempty for any i 6= j. By (13) and (14) it
relations, this is equivalent to showing that ij
ij
 ). Therefore    D  RA(T ) = RA(  ),
is straightforward to show that RA(Tij ) = RA(ij
ij
ij
ij
ij


i.e. ij  ij is nonempty.
We note that this result does not apply to C8 . For example, let T = {NTPP, EQ}, D =
{d  d, eq  eq}. The RCC8 relation NTPP is inconsistent with the RA relation eq  eq.
Theorem 28. Let  = {vi Tij vj }ni,j=1 be an RCC8 network and  = {vi Dij vj }ni,j=1 an RA netb8 , and  is over H  H. Then  ]  is consistent if it is BC-consistent.
work. Suppose  is over H
Proof. Recall that each RA network over H  H is in essence a pair of IA networks over H. By
 is a 0-meet relation iff D is;
Lemma 8 we know  has a consistent scenario  such that (i) ij
ij

and (ii) ij is a corner relation iff Dij consists of corner relations. Let  be the canonical consistent
scenario of . We show  ]  is consistent.
By Lemma 27 we know  ]  is bipath-consistent. We next show it satisfies (15), which is
equivalent to (16) when only basic constraints are concerned. To this end, we show that CCP(i, j :
i0 , j 0 ) holds in  ]  only if it holds in  ] . By the choice of  and  , we know Tii0 =
Tjj 0 = {EC} and all the RA relations are either 0-meet relations or consist of corner relations.
Therefore, CCP(i, j : i0 , j 0 ) also holds in  ] . Because  ]  is BC-consistent, we know DC is
 6= {DC} and  ] satisfies (15). By Theorem 22, we know  ] ,
not in ij . This implies ij
hence  ] , is consistent.
513

fiC OHN , L I , L IU , & R ENZ

b8 or Q8 and H  H can be
As a consequence, we know the joint consistency problem over H
solved in polynomial time.
b8 , H  H) and JSP(Q8 , H  H) are in P.
Theorem 29. The joint satisfaction problems JSP(H
b8 or Q8 , and  is over H  H.
Proof. Suppose  ]  is a joint network such that  is over H
We first apply the algorithm BC-C ONSISTENCY to  ] . If an empty relation occurs during the
process, then  ]  is inconsistent. Otherwise, suppose 0 ] 0 is the BC-consistent joint network
b8 or Q8 and 0 is over H  H. We note that,
equivalent to  ] . We assert that 0 is still over H
b8 (or Q8 ), and any RA relation D in H  H, we have by Lemma 31
for any RCC8 relation T in H
b8 and Q8 ;
 RCC8(D) is a relation in both H
 RA(T ) is a relation in H  H;
b8 (or Q8 ).
 T \ {DC} = T  {EC, PO, TPP, NTPP, TPP , NTPP , EQ} is in H
Because BC-C ONSISTENCY only uses the rules (17)-(19) to update relations, each RCC8 relation
b8 (or Q8 ), and each RA relation in 0 remains in HH. The consistency 0 ]0
in 0 remains in H
then follows from Theorem 28.
The property in the proof of the above theorem does not hold for C8 . It remains open if
JSP(C8 , H  H) is tractable (though this is not very important for practical purposes since either
b8 or Q8 can be used to backtrack over to find a solution if required).
H

5. Combination of RCC80 and RA Networks
In this section, we represent topological information as RCC80 relations and directional information
as RA relations. In the previous section we have shown that, for certain tractable subclasses of RCC8
and RA, the JSP can be determined in polynomial time, but we also show that bipath-consistency
is incomplete for these subclasses. The reason lies in that two regions that are constrained by DC
may have a common conflict point. For RCC80 , this situation does not exist anymore because two
disjoint regions may still have a 0-dimensional intersection. This section will show that, for RCC80 ,
bipath-consistency alone is sufficient to show the consistency of a joint network  ]  for  over
H8 or C8 and  over H  H.
As in the case of weak RCC8, we first consider the interaction between RCC80 and RA relations,
then consider the consistency of joint basic networks, and, lastly, consider the general case.
Similar to Definition 19, we have the following definition.
Definition 30. Let T be an RCC80 relation and D an RA relation. The RA relation induced by T
and the RCC80 relation induced by D are defined as
RA(T ) = { :  is a basic RA relation and   T 6= }
0

RCC8 (D) = { :  is a basic RCC80 relation and   D 6= }.
S
It is easy to see that RA(T ) = {RA({}) :   T } and

(20)
(21)

RA({DC})  RA({EC}) RA({PO})  RA({TPP}) = RA({NTPP})  RA({EQ}).
RA({PO})  RA({TPP }) = RA({NTPP })  RA({EQ}).
514

fiR EASONING ABOUT T OPOLOGICAL AND C ARDINAL D IRECTION R ELATIONS

Note that we have RA({TPP}) = RA({NTPP})= {s, d, f, eq}  {s, d, f, eq}. This is because
in RCC80 a non-tangential proper part of a region a may have the same MBR as a. For example,
each star region in Figure 6 is a non-tangential proper part of its MBR in RCC80 .
Lemma 31. Let T be an RCC80 relation and D an RA relation. Then RCC80 (D) is a relation in
b8 , Q8 , and C8 ; and RA(T ) is a relation in H  H if T is a relation in H
b8 or
the intersection of H
Q8 or C8 .
In particular, unlike the case for weak RCC8, we have RA({NTPP, EQ}) = {s, d, f, eq} 
{s, d, f, eq} is a relation in H  H.

Figure 6: Basic regions of a control point P in the combination of RCC80 and RA.
Theorem 32. Suppose  is a basic RCC80 network and  is a basic RA network. Then  ]  is
consistent if it is bipath-consistent.
Proof. The proof follows the same pattern as for the combination of weak RCC8 and RA (Theorem 22), but we need to replace the basic regions around a control point P with the star regions shown in Figure 6, where we only show three regions b, r, g around P , and bNTPPr and
rNTPPg.
We have the following result for RCC80 and RA.
b8 or Q8 in RCC80 ,  is an RA network. Then  ] 
Theorem 33. Suppose  is a network over H
is consistent if  ]  is bi-closed,  is path-consistent, and  is consistent.
Proof. Assume that  is the canonical consistent scenario of , and  is any consistent scenario
 ) = RA( ) and hence the
of . Then, completely similar to Lemma 27, we can show that RA(ij
ij




bi-closeness of  ]  . Because  and  are consistent, we know  ]  is bipath-consistent,
hence consistent by Theorem 32.
b8 , RA) can be polynoThe above result shows that the consistency of a joint network in JSP(H
b8 and an RA network.
mially reduced to determining the consistency of an RCC8 network over H
b8 , RA) is a separable problem. In particular, we have
In this sense, JSP(H
515

fiC OHN , L I , L IU , & R ENZ

Theorem 34. If RCC8 relations are interpreted by using strong connectedness, then the joint satisb8 , H  H) and JSP(Q8 , H  H) are in P.
faction problems JSP(H
Again, it remains open whether the above result holds for networks over C8 in RCC80 , even
though in this case RA({NTPP, EQ}) = RA(TPP) is a relation in H  H.
In the following section, we consider the combination of RCC8 and CDC constraints.

6. Combination of RCC8 and CDC Constraints
Although basic RCC8 networks and basic CDC networks can be solved in cubic time independently, the interaction between RCC8 and CDC constraints makes the joint satisfaction problem
hard to solve. In this section, we first show that the joint satisfaction problem is in NP by designing a polynomial non-deterministic algorithm and then show it is NP-hard even for basic constraints. This shows that JSP(Brcc8 , Bcdc ) is NP-complete. We then consider three variants of
JSP(Brcc8 , Bcdc ) obtained by replacing RCC8 with RCC80 and/or CDC with OIM. Write Boim for
the set of basic OIM relations. We show JSP(Brcc8 , Boim ) and JSP(Brcc80 , Bcdc ) are NP-complete,
but JSP(Brcc80 , Boim ) is in P.
6.1 Algorithms
Let  be an instance of a joint basic RCC8 or RCC80 network and  a basic CDC or OIM network
over the same set of variables. We provide in this subsection algorithms for determining the consistency of  ] . Our key idea is first showing that  ]  is consistent iff  has a regular solution
that is RA consistent with  (see below) and then giving algorithms for determining whether  has
such a regular solution.
Suppose m = (mi )ni=1 is a solution of . Recall that we say m = (mi )ni=1 is a regular solution
if it is a maximal solution and {M(mi )}ni=1 is a canonical tuple of rectangles (cf. Dfn. 13). Note
that each region in a regular solution m is the union of a set of cells introduced by the canonical
tuple of rectangles.
Definition 35. Let  = {vi ij vj }ni,j=1 be a basic RCC8 network and  = {vi ij vj }ni,j=1 a basic
CDC network. Suppose m = (mi )ni=1 is a regular solution of . Write  for the RA network
induced by m. We say a regular solution m of  is RA consistent with  if there exists a solution of
 ]  which also satisfies .
The following lemma gives a characterisation of consistent joint basic networks.
Lemma 36. Let  = {vi ij vj }ni,j=1 be a basic RCC8 network and  = {vi ij vj }ni,j=1 a basic
CDC network. Then  ]  is consistent iff  has a regular solution that is RA consistent with .
Proof. The sufficiency part is clear by definition. We only prove the necessity part. Suppose a =
(ai )ni=1 is a solution of ]. Write  for the RA network induced by a. Then a is also a solution of
 ] . Hence there is a unique regular solution of  which also satisfies . Write m = (mi )ni=1 for
this regular solution. It is clear that m is a regular solution of  that is RA consistent with .
By this lemma, to determine the consistency of  ] , we need only determine the existence
of regular solutions of  that are RA consistent with . Suppose m is a regular solution of . We
next give a necessary and sufficient condition for m being RA consistent with .
516

fiR EASONING ABOUT T OPOLOGICAL AND C ARDINAL D IRECTION R ELATIONS

To this end, we first fix some notation and terminology. For a region mi in m, we say a corner
point P of mi is a potential conflict point (in m) if exactly one of the four cells incident to P is
contained in mi . For example, the grey region shown in Figure 7 has five potential conflict points
Pi (i = 1, ..., 5). Later we will show that these points may introduce conflicts that are hard to resolve
when RCC8 constraints are involved. Furthermore, we denote by Gi the set of cells contained in
mi , Ei the set of edges of cells which lie on the boundary of mi , and Ni the set of potential conflict
points of vi .

Figure 7: Illustration of potential conflict points.
Lemma 37. Let  = {vi ij vj }ni,j=1 be a basic RCC8 network and  = {vi ij vj }ni,j=1 a basic
CDC network. If a regular solution m = (mi )ni=1 of  is RA consistent with , then we have:
if ij = TPP or NTPP then Gi  Gj .

(22)

Proof. We prove this by contradiction. Assume that (vi TPPvj ) or (vi NTPPvj ) is a constraint in
 and Gi * Gj .
Suppose (vs vt ) is a constraint in , where  is a basic CDC relation represented by the 3  3
Boolean matrix (dpq )1p,q3 . Because m is a solution of , we have for any 1  p, q  3 that
dpq = 1 iff ms  mpq
t 6= ,

(23)

where mpq
t denotes one of the nine tiles generated by the MBR of mt (cf. Fig. 3). Since m is a
regular solution and Gs is the set of cells contained in ms , this is equivalent to saying that
dpq = 1 iff

Gs and mpq
t have a common cell.

(24)

Now let g be a cell in Gi \ Gj . Because g is not in Gj , by the construction procedure of regular
solutions (see Appendix A), there exists a constraint (vj  0 vk )   with  0 = (d0uv ) such that g is a
0pq = 0 and hence,
cell contained in mpq
k for some p, q. By (24) and that g is not in Gj we know d
pq

00
by (23), mj  mk = . Let (vi  vk ) be the CDC constraint between vi and vk in  and suppose
00pq = 1 by (24).
 00 = (d00uv ). Because g is cell in both Gi and mpq
k , we have d
Because m is RA consistent with , there exists a solution a = (ai )ni=1 of  ]  such that
M(ai ) = M(mi ). Since (vi TPPvj ) or (vi NTPPvj ) is in , we know ai  aj . Furthermore,
pq
we have aj  mj as m is a maximal solution of . Therefore, ai  mj . Because mpq
k = ak
pq
pq


00
00pq
and mj  mk = , ai  ak is empty. This shows that (ai , ak ) is not in  since d
= 1. A
contradiction.
The NTPP constraints may furthermore exclude some edges in Ei and nodes in Ni from the
valuation of vi . Suppose vi NTPPvj is a constraint in  and m = (mi )ni=1 is RA consistent with
. For any solution a = (ai )ni=1 of  ]  with M(ai ) = M(mi ), by ai NTPPaj and aj  mj
517

fiC OHN , L I , L IU , & R ENZ

we have aj  mj = . This is to say, ai cannot touch the edges and nodes in Ej and Nj . To
characterise this, we define
[
Ei  Ei \ {Ej : vi NTPPvj  },
(25)
[
Ni  Ni \ {Nj : vi NTPPvj  }.
(26)
Since every region in m can be represented by a Boolean matrix, Gi , Ei , Ni can be calculated
in polynomial time. The following proposition then gives a necessary and sufficient condition for m
being RA consistent with .
Lemma 38. Let  = {vi ij vj }ni,j=1 be a basic RCC8 network and  = {vi ij vj }ni,j=1 a basic
CDC network. Then a regular solution m = (mi )ni=1 of  is RA consistent with  iff
 vi TPPvj   or vi NTPPvj   implies Gi  Gj , and
S
 M( Ei ) = M(mi ) for any i, and
 vi POvj   implies Gi  Gj 6= , and
S
 there exists a resolving function f , which is defined as a function from V to P( {N1 ,    , Nn })
satisfying (27)-(29).
f (vi )  Ni ,

(27)

vi ECvj    Gi  Gj 6=  or Ei  Ej 6=  or f (vi )  f (vj ) 6= ,

(28)

vi DCvj    f (vi )  f (vj ) = .

(29)

Proof. We begin with the necessity part. Suppose m is RA consistent with . Then by definition
there exists a solution a = (ai )ni=1 of  ]  such that M(ai ) = M(mi ). The first condition is
proven in Lemma 37. For the second condition, because M(ai ) = M(mi ), and ai  mi , we know
that ai has a nonempty intersection with one unit edge on a cell that lies on the top (bottom, leftmost,
or rightmost) edge of M(mi ). This unit
S edge is clearly in Ei . Furthermore, it can be proven that this
edge is in Ei , and thus we have M( Ei ) = M(mi ). The following two conditions guarantee that
the PO, EC constraints can
S be satisfied while not violating DC constraints. The third condition
follows directly from ai  Gi and ai POaj . For the last condition, we define a resolving function
f as f (vi ) = {P  Ni : P  ai }. It is straightforward to prove that f satisfies (27)-(29).
For the sufficiency part, we construct a solution of  ] . The procedure is quite similar to that
given for Theorem 22 in Appendix B. For vi , we choose a control point from each cell in Gi and
a control point from each edge in Ei . If vi POvj , we choose a control point for both of them from
a common cell of Gi and Gj . If vi ECvj , we choose a control point for them in a common cell if
Gi  Gj 6= , or from a common edge if Ei  Ej 6= , or from f (vi )  f (vj ) by the resolving
function f . It can then be proven that these control points lead to a solution of . Moreover, the
choice of control points ensures that the regions are also a solution of .
Since the conditions in Lemma 38 can be verified by a nondeterministic polynomial algorithm,
we have the following theorem.
Theorem 39. JSP(Brcc8 , Bcdc ) is in NP.
518

fiR EASONING ABOUT T OPOLOGICAL AND C ARDINAL D IRECTION R ELATIONS

Proof. Suppose ] is an instance of JSP(Brcc8 , Bcdc ). We devise a nondeterministic polynomial
algorithm as follows. We first guess a basic RA network  that is consistent with the basic CDC
network , and compute the regular solution m of  that satisfies  in cubic time, and further guess
a resolving function f that satisfies the conditions (27)-(29), and check whether m is consistent
with the basic RCC8 network  by Lemma 38 via f . If this is the case, the algorithm returns true.
Otherwise, the algorithm returns false. This shows that JSP(Brcc8 , Bcdc ) is in NP.
Since each OIM network has at most one regular solution, by Lemma 38 we have
Corollary 40. JSP(Brcc8 , Boim ) is in NP.
If we interpret topological constraints in RCC80 , then we have the following simplified condition
for determining whether a regular solution of  is RA consistent with .
Proposition 41. Suppose that  is a basic RCC80 network, and  is a basic CDC network, both
over the same set of variables V = {v1 ,    , vn }. Then a regular solution of  is RA consistent
with  iff
 vi TPPvj   or vi NTPPvj   implies Gi  Gj , and
 vi POvj   implies Gi  Gj 6= , and
 vi ECvj   implies that either Gi  Gj or Ei  Ej is nonempty.
Moreover, the above conditions can be checked in polynomial time.
Proof. The proof is similar to that for Lemma 38. The resolving function is now irrelevant, because
in RCC80 conflict points are no longer evidence for EC relations, where a point P (a set X, respectively) is regarded as evidence
S of a relation (aECb) if P 0 a  b (X  a  b), respectively.
Note that we do not require M( Ei ) = M(mi ), as in RCC8 it is possible that aNTPPb and
M(a) = M(b), see Figure 6 for illustration.
This directly leads to the following two results.
Theorem 42. JSP(Brcc80 , Bcdc ) is in NP.
Proof. The proof is similar to that for Theorem 39. Suppose ] is an instance of JSP(Brcc8 , Bcdc ).
We first guess a basic RA network  that is consistent with  and construct a regular solution m of
 that satisfies  and then check whether m is RA consistent with  by Proposition 41.
Recall that OIM is in essence the combination of CDC and RA, and a basic OIM network is
consistent iff the two component CDC and RA networks are consistent (see Proposition 17). In the
case when RCC80 is combined with OIM, we have the following tractability result.
Theorem 43. JSP(Brcc80 , Boim ) is in P.
Proof. The algorithm for JSP(Brcc80 , Boim ) contains three steps. Suppose  ]  is an instance
with n variables. The first step is to decide whether  and  are independently consistent. If not
so, then return false; otherwise, construct the unique regular solution m of . This can be achieved
in O(n3 ) time. We then calculate Gi and Ni , which can be done in O(n4 ) time. The third step is
to decide whether m is RA consistent with  according to Proposition 41, which can be done in
O(n4 ) time. Therefore, the consistency of  ]  can be determined in O(n4 ) time and, hence,
JSP(Brcc80 , Boim ) is in P.
519

fiC OHN , L I , L IU , & R ENZ

In the next subsection, we show that JSP(Brcc8 , Bcdc ), JSP(Brcc80 , Bcdc ), and JSP(Brcc8 , Boim )
are all NP-hard.
6.2 NP-Hardness Results
Recall that in the proof of Theorem 39, we guess twice when determining the consistency of an
instance  ]  of JSP(Brcc8 , Bcdc ), once for a basic RA network that is consistent with , and
once for a resolving function f that satisfies (27)-(29) (see Proposition 38). In this subsection we
devise two polynomial reductions from known NP-hard problems to JSP(Brcc8 , Bcdc ) by exploiting
these two facts.
Theorem 44. JSP(Brcc8 , Bcdc ) is NP-hard.
Proof. The first reduction is from 3-SAT to JSP(Brcc8 , Bcdc ). Because it is quite complicated, we
defer the construction to Appendix C. Here we only explain why this problem is NP-hard.
For each 3-SAT instance , we construct an instance  ]  of JSP(Brcc8 , Bcdc ) such that
each RCC8 constraint is either a DC or an EC constraint. Furthermore, we can show that  has a
unique regular solution that is RA consistent with  if  is consistent.
The intractability is caused by the potential conflict points in the regular solution, which, together with the EC and DC constraints, may introduce conflicts that are hard to resolve. By
Lemma 38, to satisfy an EC constraint vi ECvj , we need to check whether mi and mj share a
cell, or else an edge, or else a corner point. In the last case, it can be proven without much difficulty
that points shared by mi and mj are exactly those points in Ni  Nj . Therefore, if mi and mj share
no cell or edge, then the evidence point for the constraint vi ECvj can only be chosen from Ni  Nj .
It turns out that choosing such evidence points for all the EC constraints while not violating the
DC constraints in  is NP-hard.
The second reduction is from Graph 3-colouring problem to JSP(Brcc8 , Bcdc ). We defer the construction to Appendix D. For each graph G, we construct an instance G ] G in JSP(Brcc8 , Bcdc ).
This reduction differs from the first one in that it does not exploit the intractability of finding a
resolving function. In fact, when vi ECvj is a constraint, then in each regular solution m of G ,
either mi and mj share a cell or an edge, or mi and mj are disjoint (in which case m is not RA
consistent with ). That is to say, resolving functions have no effect on the RA consistency of m.
The reduction is based on the fact that G has exponentially many regular solutions, and there is no
general way to test all of them in polynomial time (unless P = NP).
Note that in the first reduction we have shown  has a unique regular solution that is RA
consistent with  if  is consistent, where  is a 3-SAT instance and  ]  is the instance
of JSP(Brcc8 , Bcdc ) defined by the reduction. Write  for the basic RA network induced by this
particular regular solution of  . It is easy to see that  ]  is consistent iff  ]  ]  is
consistent. In other words, the reduction from 3-SAT is also a reduction to JSP(Brcc8 , Boim ).
Corollary 45. JSP(Brcc8 , Boim ) is NP-hard.
Similarly, the second reduction is also a reduction to JSP(Brcc80 , Bcdc ). This is because the
JSP(Brcc8 , Bcdc ) instance for each graph G only uses DC and EC constraints, and when two variables are required to be EC, then their MBRs do not 0-meet, but their MBRs may overlap.
Corollary 46. JSP(Brcc80 , Bcdc ) is NP-hard.
520

fiR EASONING ABOUT T OPOLOGICAL AND C ARDINAL D IRECTION R ELATIONS

By these NP-hardness results and Theorem 39, Corollary 40, and Theorem 42, we know
Theorem 47. The joint satisfaction problems JSP(Brcc8 , Bcdc ), JSP(Brcc80 , Bcdc ), and JSP(Brcc8 ,
Boim ) are all NP-complete.

7. Conclusion
In this paper, we have investigated the computational complexity of reasoning with topological
relations and cardinal directions between extended spatial objects. We used two different interpretations of the well-known RCC8 algebra for representing topological information, and use the
Rectangle Algebra (RA) and the cardinal direction calculus (CDC) to describe directional information. We have shown that the joint satisfaction problems are decidable and remain in NP for all
these interpretations of topological and directional information. More importantly, we have shown
that the consistency problem is in P when basic (weak or strong) RCC8 and basic RA constraints
are involved, or when topological constraints are basic strong RCC8 constraints and directional
constraints are jointly represented by basic RA and CDC constraints.
Some related work has been reported in the work of Sistla and Yu (2000), Li (2007), and Li
and Cohn (2012), but only small fragments of RA are used to express directional information. Our
results represent a large step towards the applicability of qualitative spatial reasoning techniques for
real-world problems. In particular the tractable results are very promising as they enable efficient
reasoning about these important calculi. It also means that if efficient reasoning is important for
a potential application, developers should aim for representing directional information using RA
(or together with CDC) instead of CDC alone and/or representing topological information by using
RCC80 instead of RCC8. Our results about combining RCC8 and CDC/OIM are very important
from a theoretical point of view as they are the first formal results for this combination. As demonstrated using a concrete application scenario, our results are also of practical significance, as the
combined information we consider can be easily extracted in cases where computer vision is used
for obtaining spatial information.

Acknowledgments
We thank the anonymous reviewers for their invaluable comments and detailed suggestions. The
first author also thanks the University of Technology Sydney for their funding of a visit to Sydney
as an Adjunct Professor. This work was partially supported by Australian Research Council (Grant
No.s DP120104159, DP120103758 and FT0991917), the National Natural Science Foundation of
China (Grant No. 61228305), and the EU funded projects RACE (FP7-ICT-287752) and STRANDS
(FP7-ICT-600623).

Appendix A. Realisation of Basic CDC Networks
We here describe the cubic algorithm given in the work of Zhang et al., (2008), and Liu et al., (2010).
Given a basic CDC network, first, we compute a canonical solution of the induced (possibly nonbasic) RA network. Next, we remove the cells that violate some constraints from each rectangle.
Third, we check whether what we have obtained is a valid solution. In the following, we give a
detailed description with a running example illustrated in Table 4 and Figure 8.
521

fiC OHN , L I , L IU , & R ENZ

(1, 2)

(1, 3)

(2, 3)


0
1
1
0
1
1
1
1
0

ij
0
1
0
0
0
0
1
0
0


0
0
0
0
0
0
0
0
0


0
0
0
0
0
0
0
0
0

ji
1
1
0
0
1
0
0
0
1

xij  yij

xij  yij

oo

oo

{m, b}  fi

b  fi

o  oi

o  oi



1
1
0
0
0
0
0
1
1

Table 4: Example of solving a basic CDC network.

Step 1. Compute the induced RA network 0 of .
Step 2. Refine 0 to a basic RA network  = {vi (xij  yij )vj }ni,j=1 by setting xij = xij \{m, mi}
and yij = yij \{m, mi}. If  is unsatisfiable, then neither is . Suppose  is satisfiable and construct
its canonical solution m = (mi )ni=1 (cf. Figure 8).

Figure 8: Illustration of Step 3: Deriving a solution m of  from a canonical solution m of .
Step 3. This step tries to find a solution m = (mi )ni=1 of the basic CDC network  such that
M(mi ) = M(mi ). Recall a basic CDC relation ij is represented as a 3  3 Boolean matrix
((ij )xy ). If m is a solution, mi  (mj )xy =  holds for every (ij )xy = 0, where (mj )xy is one
of the nine tiles generated by M(mj ) (cf. Figure 3). This
to make m a solution to , we
S means,


need to exclude all impossible cells from mi . Set Ti = {(mj )xy : (ij )xy = 0}nj=1 . Let mi be
the closure of mi \ Ti (cf. Figure 8 left).
Step 4. The last step checks whether m = (mi )ni=1 is a solution of . If it is a solution, then m
must be a regular solution; if it is not, then we assert that  has no solution at all.
We note that other regular solutions may exist (cf. Figure 8 right). We can get all of them by
repeating Steps 2 to 4 using every possible refinement of 0 .

Appendix B. Proof of Theorem 22
We only need to show the sufficiency part. Similar to the cubic construction method for basic RCC8 constraints (cf. Li, 2006b and Section 2.2.1 of this paper), we construct a solution
m = (mi )ni=1 with an additional requirement that M(mi ) = mi for each 1  i  n, where
{m1 , ..., mn } is the canonical solution of . Recall that the coordinates of each corner point of a
rectangle mi are integral. Assuming the ntpp-level l(i) has been computed for each 1  i  n, we
next describe the construction in detail.
522

fiR EASONING ABOUT T OPOLOGICAL AND C ARDINAL D IRECTION R ELATIONS

Step 1. Selection of Control Points
For each vi we select a set of control points Xi . First of all, each corner point in Ci is a control point
for vi . We then select one (non-integral) point from each edge of mi and put the four points into
Xi . Then, for any j > i with ij = EC or PO select a point Pij from mi  mj (which is nonempty
because of the bipath-consistency of  ] ), and put it into both Xi and Xj . Note that mi  mj
could be a single point, or a line segment, or a rectangle. When choosing Pij from mi  mj , we
require that each Pij is a fresh point that has not been chosen before and is not a corner point of any
rectangle (unless i  mj is a singleton set). We write P for the set of all the control points.
Step 2. Basic Regions Associated to Control Points
For each control point Q, we construct a series of sectors {q i,k : k = 1,    , 4}ni=1 and a series
of squares {q (i) }ni=1 (see Figure 9). We call these the basic regions associated to Q. Note that we
use an upper case letter to denote a control point, and use the corresponding lower case letter (with
indices) to denote basic regions. The sectors are chosen in this way as this allows us to distinguish
up to four connecting regions in cases where Q is a corner point (such as point P in Figure3). The
sectors completely fill all the disks.

Figure 9: Basic regions of a control point Q.
For any two different control points, we require their outermost squares to be disjoint. Furthermore, a basic region must be small enough so that it is not crossed by the border of any mi of which
Q is not a boundary point.
Step 3. Region Construction
For each control point Q, set q i =
a1i
a2i
a3i
a4i

S4

k=1 q

i,k .

Let
[
= mi  {q i : Q  Xi }
[
= a1i  (mi  {q j : ij = PO, Q  Xi  Xj })
[
= a2i  {a2j : ji = TPP or ji = NTPP}
[
= a3i  {q (l(i)) : ji = NTPP, Q  a3j }

Set mi = a4i and m = (mi )ni=1 . It is easy to prove that m satisfies all RCC8 constraints in . For
example, suppose (vi DC vj ) is a constraint in . Because (15) holds, we know vi and vj share no
common conflict point, i.e. Ci  Cj = . Due to the choice of control points for vi and vj , we know
523

fiC OHN , L I , L IU , & R ENZ

Xi  Xj is also empty. It is now easy to show that mi  mj is empty and hence the DC constraint
is satisfied.
To show m also satisfies , we need only prove M(mi ) = mi for each i. It is clear that a1i
and a2i are subsets of mi . By the choice of Xi , we know mi = M(a1i ) = M(a2i ). If ji = TPP
or NTPP, then mj  mi by bipath-consistency. This implies M(a3i ) = mi . Furthermore, if
ji = NTPP, we have (mj , mi )  d  d by bipath-consistency. So for any control point Q in
a3j  mj , Q is also in the interior of mi . Therefore, by the choice of basic regions, we know the
outmost square q (n) at Q, hence q (l(i)) , is contained in mi . Therefore, M(a4i ) = mi . This proves
that m is a solution to  ] .

Appendix C. The Reduction from 3SAT to JSP(Brcc8 , Bcdc )
V
n
Let  = m
i=1 cj be a 3SAT instance involving n propositional variables {pk }k=1 and m clauses.
Assume that the j-th clause cj is qi1  qi2  qi3 , where each qij is a literal in {pk }nk=1  {pk }nk=1 .
We construct a JSP(Brcc8 , Bcdc ) instance  ]  and choose a particular regular solution m of
 such that  is satisfiable iff m is RA consistent with  .
There are three types of spatial variables in  ]  : auxiliary variables (called grid variables)
which are used to fix the relative locations of other variables, variables to simulate propositional
variables, and variables to simulate propositional clauses.
C.1 Grid Variables
We introduce 10  n grid variables Gij (1  i  2n, 1  j  5). The CDC constraints between
these variables are specified as in Figure 10 (left). The RCC8 relation between two grid variables
Gij , Gi0 j 0 is EC if they are 4-neighbours, i.e. {|i  i0 |, |j  j 0 |} = {0, 1}. These EC constraints
make sure that there is no gap between the MBRs of two neighbouring grid variables. This implies
that there is at most one regular solution of  .
Grid variables are mainly used to locate other spatial variables. For a new variable v and a grid
variable Gij , we say v occupies Gij if v  M(Gij ) is nonempty, and its MBR is M(Gij ), i.e.
M(v  M(Gij )) = M(Gij ).

Figure 10: Grid and spatial variables for propositional variables.

C.2 Spatial Variables for Propositional Variables
For each propositional variable pi in , four spatial variables Ai , Bi , Ci and Di are introduced such
that each occupies two grid cells, but has an empty intersection with the interiors of the MBRs of
524

fiR EASONING ABOUT T OPOLOGICAL AND C ARDINAL D IRECTION R ELATIONS

all other grid variables. The corresponding grid cells are illustrated in Figure 10 (right). Take Ai
as example. By assigning the CDC constraints between Ai and the grid variables, we require Ai
occupies G2i1,1 and G2i1,4 , but is disjoint from the MBRs of all other grid variables. It is easy to
see that Ai  Bi contains at most two points, viz. Pi+ and Pi , and so does Ci  Di .
As for the topological constraints, we require Ai ECBi and Ci ECDi , and all other constraints
are DC. The EC constraints imply that both Ai  Bi and Ci  Di are nonempty. On the other hand,
since Ai DCCi , we can conclude that Ai and Bi must share only one of Pi+ and Pi , while Ci and
Di share the other one.
C.3 Spatial Variables for Propositional Clauses
For each clause (qj1  qj2  qj3 ) in , we introduce two new spatial variables Ej and Fj , both
occupy three grid cells. The precise occupied grid cells are set according to the variables and signs
of qjk . Figure 11 gives an example to illustrate the construction, where we assume qj1 = pi1 , qj2 =
pi2 , qj3 = pi3 . As for the topological constraints, we set the constraint between Ej and Fj
as EC, and set all other constraints as DC. This implies Ej  Fj contains at least one point of
Pi1 , Pi+2 , Pi+3 . We claim that it is not the case that Ai1  Bi1 = {Pi1 }, Ai2  Bi2 = {Pi+2 } and
Ai3  Bi3 = {Pi+3 }. Otherwise, some DC constraint, e.g. that between Ai1 and Ej , will be violated.
C.4 The Regular Solution That May Be RA Consistent with 

Figure 11: Spatial variables for clauses.
We have now finished the construction. Note that  is always satisfiable and there are exponentially many regular solutions of it (as there may be or may be not a gap between 4-neighbouring
grid variables). However, the EC constraints between the 4-neighbouring grid variables imply that
only the regular solution in which there is no gap between 4-neighbouring grid variables can be RA
consistent with  . We denote this regular solution by m.
We next show that  is consistent iff  ]  is consistent. Suppose  ]  has a solution a.
We define an assignment  : {pi }ni=1  {true, f alse} such that (pi ) = true iff Ai  Bi = {Pi+ }
in a. We can verify that  satisfies . On the other hard, suppose  is an assignment that satisfies
. We prove that  ]  has a solution. The idea is to introduce an instance of JSP(Brcc8 , Brec ),

in which we have two spatial variables A+
i and Ai instead of Ai (also for Bi , Ci , Di ), and three
k
variables Ej (1  k  3) instead of Ej (also for Fj ). The RA constraints are set according to
Figure 10 and Figure 11, while the RCC8 constraints are set by  and . It can be proven that
this new joint network satisfies (15), and a solution can be obtained in cubic time. A solution of

 ]  can then be obtained by merging the related regions (e.g. merging A+
i and Ai into Ai ).
525

fiC OHN , L I , L IU , & R ENZ

The verification is straightforward. Therefore,  is satisfiable iff  ]  is satisfiable, and thus 
is satisfiable iff m is RA consistent with  .

Appendix D. The Reduction from Graph 3-Colouring to JSP(Brcc8 , Bcdc )
Suppose G = (V, E) is a graph. We construct an instance G ] G of JSP(Brcc8 , Bcdc ) as follows.
For each node vi in V , we construct a gadget with 10 spatial variables: uki (k = 1, 2,    , 8), xi
0
and yi . We first describe their CDC constraints. The basic CDC constraints between uki and uki are
specified as in Figure 12 (i). For example, G contains the following basic CDC constraints








0 0 0
0 0 0
1 1 0
0 0 0
u1i 1 0 0 u2i , u2i 0 0 1 u1i , u2i 1 1 0 u7i , u7i 0 1 1 u2i .
0 0 0
0 0 0
0 0 0
0 1 1
Note that, the induced RA constraint between u2l+1
and u2l+2
for l = 0, 1, 2 is (b  m)  eq. The
i
i
basic CDC constraints between xi and yi are specified as in Figure 12 (ii), i.e.




0 0 0
0 0 0
xi 1 1 0 yi , yi 0 1 1 xi .
0 0 0
0 0 0
The CDC constraints concerning xi , yi and uki are specified as follows.

0
xi 0
0

1
xi 0
0

0
k
ui 0
0

0

yi 0
0

1
yi 0
0

0
uki 0
0




0 0 0
0 0
1 0 u1i , xi 1 0 0 u2i ,
0 0 1
0 1



0 0
1 0 0
1 0 u5i , xi 1 0 0 u6i ,
0 0
0 0 0

0 0
1 0 xi (k 6= 6),
0 0



0 0
0 0 0
0 1 u1i , yi 0 1 0 u2i ,
0 1
0 0 1



0 0
1 0 0
0 1 u5i , yi 0 1 0 u6i ,
0 0
0 0 0

0 0
1 0 yi (2  k  8),
0 0


1
xi 0
0

1
xi 0
0

0
6
ui 0
0

1

yi 0
0

1
yi 0
0

0
u1i 1
0




1 0 0
0 0
1 0 u3i , xi 1 0 0 u4i ,
0 0 1
0 1

0 0
0 0 uki (k = 7, 8),
0 1

0 0
0 1 xi ;
0 0



0 0
1 0 0
0 1 u3i , yi 0 1 0 u4i ,
0 1
0 0 1

0 0
0 0 uki (k = 7, 8),
0 1

0 0
0 0  yi .
0 0

Figure 12 (ii) illustrates a regular solution of uki , xi and yi , where u1i meets u2i while there is
a gap between u3i and u4i , and between u5i and u6i . We note that there are in total eight different
regular solutions when the network is restricted to the gadget of vi .
526

fiR EASONING ABOUT T OPOLOGICAL AND C ARDINAL D IRECTION R ELATIONS

(i)

(ii)
Figure 12: Illustrations of the CDC constraints: (i) constraints between uki (k = 1, 2,    , 8); (ii)
constraints relating xi , yi . Note we use dashed squares to denote variables u7i and u8i ,
which connect two other variables. Note that both xi and yi have three disjoint parts.

527

fiC OHN , L I , L IU , & R ENZ

The RCC8 constraint between any two variables is either EC or DC. We require xi ECyi . This
is realisable only if u2l+1
meets u2l+2
in x-direction for at least one l  {0, 1, 2}.4 We use this fact
i
i
to mimic that the node vi  V is coloured with one of the three colours. The RCC8 constraints of
the remaining pairs of variables are all specified as DC. 5
The gadgets for all nodes in V are horizontally aligned, as illustrated in Figure 13.

Figure 13: Illustrations of the gadgets for all nodes in V

Figure 14: Illustrations of the gadget for edge ek = (vi , vj ), where dashed lines suggest that corresponding edges are aligned according to proper CDC constraints.
We then devise the gadgets for edges in graph G. Let ek = (vi , vj ) be an edge in E. For each
0 , w 1 , w 2 and w 3 as well as constraints to
colour l  {0, 1, 2}, we introduce four variables wk,l
k,l
k,l
k,l
2l+2
2l+1
2l+2
guarantee that u2l+1
cannot
meet
u
if
u
meets
u
,
which
corresponds
to that nodes vi
i
i
j
j
and vj cannot both have colour l (because ek is an edge in G). The CDC constraints are specified
1 meets w 3 iff u2l+1 meets u2l+2 , and w 3 meets w 2 iff u2l+1
as in Figure 14. We note that wk,l
i
i
j
k,l
k,l
k,l
3 ) is contained in
meets u2l+2
,
all
in
x-direction.
By
the
CDC
constraints
we
can
show
that
M(w
j
k,l
0 ). This implies that there is either a gap between w 1 and w 3 or a gap between w 3 and
M(wk,l
k,l
k,l
k,l
2 . In other words, w 1 meets w 3 and w 3 meets w 2 cannot happen simultaneously. By the
wk,l
k,l
k,l
k,l
k,l
4. If there are more than one l such that u2l+1
meets u2l+2
in x-direction, we always choose the smallest such l as the
i
i
colour of the node vi .
5. Note that u1i DCu2i together with the CDC relations between u1i and u2i does not necessarily imply that u1i should
precede u2i in x-direction. That is, u1i could still meet u2i in x-direction in this case.

528

fiR EASONING ABOUT T OPOLOGICAL AND C ARDINAL D IRECTION R ELATIONS

constraints enforcing the dashed lines we know u2l+1
cannot meet u2l+2
if u2l+1
meets u2l+2
, and
i
i
j
j
vice versa.
Note that we need to complete both  and . While unspecified CDC constraints can be easily
deduced from these figures, unspecified RCC8 constraints are all DC.
It is not hard to verify that graph G is 3-colourable iff the joint network G ] G is consistent.
The idea is that, if  : V  {0, 1, 2} is a 3-colouring of G, then we may construct a solution of
G ] G in which the RA relation between u2l+1
and u2l+2
is m  eq if (i) = l, and is b  eq
i
i
otherwise. This guarantees that xi and yi are realisable. The fact that no incident nodes in G have
r are realisable. On the other hand, if  ]  is satisfiable,
the same colour implies that all wk,l
G
G
then at least one pair in {(u1i , u2i ), (u3i , u4i ), (u5i , u6i )} should have RA relation m  eq (otherwise,
xi ECyi is violated). Define  : V  {0, 1, 2} by (vi ) = min{l : u2l+1
m  eq u2l+2
}. It can be
i
i
r are realisable.
verified that  is a 3-colouring of G due to the fact that wk,l
Now we have completed the reduction from Graph 3-Colouring to JSP(Brcc8 , Bcdc ). We note
that the EC constraints can also be interpreted in terms of RCC80 . This means that G ] G can
also be regarded as an instance of JSP(Brcc8 , Bcdc ). Therefore, we have also provided a reduction
from Graph 3-Colouring to JSP(Brcc80 , Bcdc ).

References
Allen, J. F. (1983). Maintaining knowledge about temporal intervals. Communications of the ACM,
26(11), 832843.
Balbiani, P., Condotta, J.-F., & Farinas del Cerro, L. (1999). A new tractable subclass of the rectangle algebra. In Dean, D. (Ed.), Proceedings of the Sixteenth International Joint Conference
on Artificial Intelligence (IJCAI-99), pp. 442447. Morgan Kaufmann.
Bodirsky, M., & Kara, J. (2010). The complexity of temporal constraint satisfaction problems. J.
ACM, 57(2).
Borgo, S., Guarino, N., & Masolo, C. (1996). A pointless theory of space based on strong connection
and congruence. In Aiello, L. C., Doyle, J., & Shapiro, S. C. (Eds.), KR, pp. 220229. Morgan
Kaufmann.
Chen, J., Cohn, A. G., Liu, D., Wang, S., Ouyang, J., & Yu, Q. (2013). A survey of qualitative
spatial representations. The Knowledge Engineering Review, FirstView, 131.
Cicerone, S., & Di Felice, P. (2004). Cardinal directions between spatial objects: the pairwiseconsistency problem. Information Sciences, 164(1-4), 165188.
Cohn, A. G., & Renz, J. (2008). Qualitative spatial reasoning. In van Harmelen, F., Lifschitz, V., &
Porter, B. (Eds.), Handbook of Knowledge Representation. Elsevier.
Cohn, A. G., Renz, J., & Sridhar, M. (2012). Thinking inside the box: A comprehensive spatial
representation for video analysis. In KR, pp. 588592.
Cohn, A. G., & Varzi, A. C. (1999). Modes of connection. In Freksa, C., & Mark, D. M. (Eds.),
COSIT, Vol. 1661 of Lecture Notes in Computer Science, pp. 299314. Springer.
Davis, E. (2013). Qualitative spatial reasoning in interpreting text and narrative. Spatial Cognition
& Computation, 13(4), 264294.
529

fiC OHN , L I , L IU , & R ENZ

Davis, E., Gotts, N. M., & Cohn, A. G. (1999). Constraint networks of topological relations and
convexity. Constraints, 4(3), 241280.
Duntsch, I., Wang, H., & McCloskey, S. (2001). A relation-algebraic approach to the Region
Connection Calculus. Theoretical Computer Science, 255, 6383.
Egenhofer, M. J., & Mark, D. M. (1995). Naive geography. In Frank, A., & Kuhn, W. (Eds.),
COSIT-95, pp. 115. Springer.
Falomir, Z. (2012). Qualitative distances and qualitative description of images for indoor scene
description and recognition in robotics. AI Communications, 25(4), 387389.
Freksa, C. (1992). Temporal reasoning based on semi-intervals. Artificial Intelligence, 54(1), 199
227.
Gabelaia, D., Kontchakov, R., Kurucz, A., Wolter, F., & Zakharyaschev, M. (2005). Combining
spatial and temporal logics: Expressiveness vs. complexity. Journal of Artificial Intelligence
Research, 23, 167243.
Ge, X., & Renz, J. (2013). Representation and reasoning about general solid rectangles. In Rossi,
F. (Ed.), IJCAI. IJCAI/AAAI.
Gerevini, A., & Renz, J. (2002). Combining topological and size information for spatial reasoning.
Artificial Intelligence, 137(1), 142.
Gerevini, A., & Nebel, B. (2002). Qualitative spatio-temporal reasoning with rcc-8 and allens
interval calculus: Computational complexity. In ECAI, pp. 312316.
Goyal, R., & Egenhofer, M. (1997). The direction-relation matrix: A representation for directions
relations between extended spatial objects. In The Annual Assembly and the Summer Retreat
of University Consortium for Geographic Information Systems Science.
Goyal, R., & Egenhofer, M. (2001). Similarity of cardinal directions. In Jensen, C., Schneider, M.,
Seeger, B., & Tsotras, V. (Eds.), Proceedings of the 7th International Symposium on Advances
in Spatial and Temporal Databases (SSTD-01), pp. 3658. Springer.
Hirsch, R. (1999). A finite relation algebra with undecidable network satisfaction problem. Logic
Journal of the IGPL, 7(4), 547554.
Jonsson, P., & Krokhin, A. A. (2004). Complexity classification in qualitative temporal constraint
reasoning. Artificial Intelligence, 160(1-2), 3551.
Kontchakov, R., Nenov, Y., Pratt-Hartmann, I., & Zakharyaschev, M. (2011). On the decidability of
connectedness constraints in 2D and 3D Euclidean spaces. In IJCAI, pp. 957962.
Li, S. (2006a). Combining topological and directional information: First results. In Lang, J., Lin, F.,
& Wang, J. (Eds.), Proceedings of the First International Conference on Knowledge Science,
Engineering and Management (KSEM-06), pp. 252264. Springer.
Li, S. (2006b). On topological consistency and realization. Constraints, 11(1), 3151.
Li, S. (2007). Combining topological and directional information for spatial reasoning. In Veloso,
M. (Ed.), Proceedings of the 20th International Joint Conference on Artificial Intelligence
(IJCAI-07), pp. 435440. AAAI.
Li, S., & Cohn, A. G. (2012). Reasoning with topological and directional spatial information.
Computational Intelligence, 28(4), 579616.
530

fiR EASONING ABOUT T OPOLOGICAL AND C ARDINAL D IRECTION R ELATIONS

Li, S., & Liu, W. (2014). Cardinal directions: A comparison of direction relation matrix and objects
interaction matrix. International Journal of Geographical Information Science, accepted for
publication, doi: http://dx.doi.org/10.1080/13658816.2014.954580.
Li, S., Liu, W., & Wang, S. (2013). Qualitative constraint satisfaction problems: An extended
framework with landmarks. Artificial Intelligence, 201, 3258.
Ligozat, G. (1994). Tractable relations in temporal reasoning: pre-convex relations. In ECAI-94.
Workshop on Spatial and Temporal Reasoning, pp. 99108.
Ligozat, G., & Renz, J. (2004). What is a qualitative calculus? A general framework. In Zhang, C.,
Guesgen, H., & Yeap, W.-K. (Eds.), PRICAI-04, pp. 5364. Springer.
Liu, W., & Li, S. (2011). Reasoning about cardinal directions between extended objects: The NPhardness result. Artificial Intelligence, 175(18), 21552169.
Liu, W., Li, S., & Renz, J. (2009). Combining RCC-8 with qualitative direction calculi: Algorithms
and complexity. In Boutilier, C. (Ed.), Proceedings of the Twenty-first International Joint
Conference on Artificial Intelligence (IJCAI-09), pp. 854859.
Liu, W., Zhang, X., Li, S., & Ying, M. (2010). Reasoning about cardinal directions between extended objects. Artificial Intelligence, 174(12-13), 951983.
Nebel, B. (1995). Computational properties of qualitative spatial reasoning: First results. In KI-95,
pp. 233244, Berlin, Germany. Springer-Verlag.
Nebel, B., & Burckert, H.-J. (1995). Reasoning about temporal relations: A maximal tractable
subclass of Allens interval algebra. Journal of the ACM, 42(1), 4366.
Randell, D. A., Cui, Z., & Cohn, A. G. (1992). A spatial logic based on regions and connection. In
KR-92, pp. 165176.
Renz, J. (1999). Maximal tractable fragments of the Region Connection Calculus: A complete
analysis. In Dean, D. (Ed.), Proceedings of the Sixteenth International Joint Conference on
Artificial Intelligence (IJCAI-99), pp. 448454. Morgan Kaufmann.
Renz, J. (2002). Qualitative spatial reasoning with topological information, Vol. 2293 of Lecture
Notes in Artificial Intelligence. Springer-Verlag, Berlin, Germany.
Renz, J., & Nebel, B. (1999). On the complexity of qualitative spatial reasoning: A maximal
tractable fragment of the Region Connection Calculus. Artificial Intelligence, 108, 69123.
Schneider, M., Chen, T., Viswanathan, G., & Yuan, W. (2012). Cardinal directions between complex
regions. ACM Transactions on Database Systems, 37(2), 8:18:40.
Schockaert, S., & Li, S. (2012). Convex solutions of RCC8 networks. In ECAI, pp. 726731.
Schockaert, S., & Li, S. (2013). Combining RCC5 relations with betweenness information. In
IJCAI, pp. 10831089.
Shi, H., Jian, C., & Krieg-Bruckner, B. (2010). Qualitative spatial modelling of human route instructions to mobile robots. In ACHI, pp. 16.
Sistla, A., & Yu, C. (2000). Reasoning about qualitative spatial relationships. Journal of Automated
Reasoning, 25(4), 291328.
Skiadopoulos, S., & Koubarakis, M. (2005). On the consistency of cardinal direction constraints.
Artificial Intelligence, 163(1), 91135.
531

fiC OHN , L I , L IU , & R ENZ

Sridhar, M., Cohn, A. G., & Hogg, D. C. (2011). From video to RCC8: Exploiting a distance
based semantics to stabilise the interpretation of mereotopological relations. In COSIT, pp.
110125.
Vilain, M. B., & Kautz, H. A. (1986). Constraint propagation algorithms for temporal reasoning. In
AAAI, pp. 377382.
Whitehead, A. (1929). Process and Reality: An Essay in Cosmology. Cambridge University Press,
Cambridge.
Wolfl, S., & Westphal, M. (2009). On combinations of binary qualitative constraint calculi. In
Boutilier, C. (Ed.), Proceedings of the Twenty-first International Joint Conference on Artificial
Intelligence (IJCAI-09), pp. 967972.
Wolter, D., & Wallgrun, J. (2012). Qualitative spatial reasoning for applications: New challenges
and the sparq toolbox. In Hazarika, M. (Ed.), Qualitative Spatio-Temporal Representation
and Reasoning: Trends and Future Directions, pp. 336362.
Wolter, D., Dylla, F., Wolfl, S., Wallgrun, J. O., Frommberger, L., Nebel, B., & Freksa, C. (2008).
Sailaway: Spatial cognition in sea navigation. KI, 22(1), 2830.
Wolter, F., & Zakharyaschev, M. (2000). Spatial reasoning in RCC-8 with boolean region terms. In
ECAI, pp. 244250.
Zhang, P., & Renz, J. (2014). Qualitative spatial representation and reasoning in angry birds: the
extended rectangle algebra. In KR.
Zhang, X., Liu, W., Li, S., & Ying, M. (2008). Reasoning with cardinal directions: An efficient
algorithm. In Fox, D., & Gomes, C. (Eds.), Proceedings of the Twenty-Third AAAI Conference
on Artificial Intelligence (AAAI-08), pp. 435440. AAAI.

532

fi