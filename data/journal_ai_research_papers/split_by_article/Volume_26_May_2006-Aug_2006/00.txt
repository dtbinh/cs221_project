Journal of Artificial Intelligence Research 26 (2006) 134

Submitted 11/05; published 05/06

A Logic for Reasoning about Evidence
Joseph Y. Halpern

halpern@cs.cornell.edu

Cornell University, Ithaca, NY 14853 USA

Riccardo Pucella

riccardo@ccs.neu.edu

Northeastern University, Boston, MA 02115 USA

Abstract
We introduce a logic for reasoning about evidence that essentially views evidence as
a function from prior beliefs (before making an observation) to posterior beliefs (after
making the observation). We provide a sound and complete axiomatization for the logic,
and consider the complexity of the decision problem. Although the reasoning in the logic
is mainly propositional, we allow variables representing numbers and quantification over
them. This expressive power seems necessary to capture important properties of evidence.

1. Introduction
Consider the following situation, essentially taken from Halpern and Tuttle (1993) and
Fagin and Halpern (1994). A coin is tossed, which is either fair or double-headed. The coin
lands heads. How likely is it that the coin is double-headed? What if the coin is tossed
20 times and it lands heads each time? Intuitively, it is much more likely that the coin
is double-headed in the latter case than in the former. But how should the likelihood be
measured? We cannot simply compute the probability of the coin being double-headed;
assigning a probability to that event requires that we have a prior probability on the coin
being double-headed. For example, if the coin was chosen at random from a barrel with
one billion fair coins and one double-headed coin, it is still overwhelmingly likely that the
coin is fair, and that the sequence of 20 heads is just unlucky. However, in the problem
statement, the prior probability is not given. We can show than any given prior probability
on the coin being double-headed increases significantly as a result of seeing 20 heads. But,
intuitively, it seems that we should be able to say that seeing 20 heads in a row provides
a great deal of evidence in favor of the coin being double-headed without invoking a prior.
There has been a great deal of work in trying to make this intuition precise, which we now
review.
The main feature of the coin example is that it involves a combination of probabilistic outcomes (e.g., the coin tosses) and nonprobabilistic outcomes (e.g., the choice of the
coin). There has been a great deal of work on reasoning about systems that combine both
probabilistic and nondeterministic choices; see, for example, Vardi (1985), Fischer and Zuck
(1988), Halpern, Moses, and Tuttle (1988), Halpern and Tuttle (1993), de Alfaro (1998),
He, Seidel, and McIver (1997). However, the observations above suggest that if we attempt
to formally analyze this situation in one of those frameworks, which essentially permit only
the modeling of probabilities, we will not be able to directly capture this intuition about
increasing likelihood. To see how this plays out, consider a formal analysis of the situation
in the Halpern-Tuttle (1993) framework. Suppose that Alice nonprobabilistically chooses

c
2006
AI Access Foundation. All rights reserved.

fiHalpern & Pucella

one of two coins: a fair coin with probability 1/2 of landing heads, or a double-headed coin
with probability 1 of landing heads. Alice tosses this coin repeatedly. Let k be a formula
stating: the kth coin toss lands heads. What is the probability of k according to Bob,
who does not know which coin Alice chose, or even the probability of Alices choice?
According to the Halpern-Tuttle framework, this can be modeled by considering the
set of runs describing the states of the system at each point in time, and partitioning
this set into two subsets, one for each coin used. In the set of runs where the fair coin
is used, the probability of k is 1/2; in the set of runs where the double-headed coin is
used, the probability of k is 1. In this setting, the only conclusion that can be drawn is
(PrB (k ) = 1/2)  (PrB (k ) = 1). (This is of course the probability from Bobs point of
view; Alice presumably knows which coin she is using.) Intuitively, this seems reasonable:
if the fair coin is chosen, the probability that the kth coin toss lands heads, according to
Bob, is 1/2; if the double-headed coin is chosen, the probability is 1. Since Bob does not
know which of the coins is being used, that is all that can be said.
But now suppose that, before the 101st coin toss, Bob learns the result of the first 100
tosses. Suppose, moreover, that all of these landed heads. What is the probability that the
101st coin toss lands heads? By the same analysis, it is still either 1/2 or 1, depending on
which coin is used.
This is hardly useful. To make matters worse, no matter how many coin tosses Bob
witnesses, the probability that the next toss lands heads remains unchanged. But this
answer misses out on some important information. The fact that all of the first 100 coin
tosses are heads is very strong evidence that the coin is in fact double-headed. Indeed, a
straightforward computation using Bayes Rule shows that if the prior probability of the
coin being double-headed is , then after observing that all of the 100 tosses land heads,
the probability of the coin being double-headed becomes

 + 2100 (1  )

=

2100 
.
2100  + (1  )

However, note that it is not possible to determine the posterior probability that the coin is
double-headed (or that the 101st coin toss is heads) without the prior probability . After
all, if Alice chooses the double-headed coin with probability only 10100 , then it is still
overwhelmingly likely that the coin used is in fact fair, and that Bob was just very unlucky
to see such an unrepresentative sequence of coin tosses.
None of the frameworks described above for reasoning about nondeterminism and probability takes the issue of evidence into account. On the other hand, evidence has been
discussed extensively in the philosophical literature. Much of this discussion occurs in the
philosophy of science, specifically confirmation theory, where the concern has been historically to assess the support that evidence obtained through experimentation lends to various
scientific theories (Carnap, 1962; Popper, 1959; Good, 1950; Milne, 1996). (Kyburg (1983)
provides a good overview of the literature.)
In this paper, we introduce a logic for reasoning about evidence. Our logic extends a
logic defined by Fagin, Halpern and Megiddo (1990) (FHM from now on) for reasoning about
likelihood expressed as either probability or belief. The logic has first-order quantification
over the reals (so includes the theory of real closed fields), as does the FHM logic, for
reasons that will shortly become clear. We add observations to the states, and provide an
2

fiA Logic for Reasoning about Evidence

additional operator to talk about the evidence provided by particular observations. We also
refine the language to talk about both the prior probability of hypotheses and the posterior
probability of hypotheses, taking into account the observation at the states. This lets us
write formulas that talk about the relationship between the prior probabilities, the posterior
probabilities, and the evidence provided by the observations.
We then provide a sound and complete axiomatization for the logic. To obtain such an
axiomatization, we seem to need first-order quantification in a fundamental way. Roughly
speaking, this is because ensuring that the evidence operator has the appropriate properties
requires us to assert the existence of suitable probability measures. It does not seem possible to do this without existential quantification. Finally, we consider the complexity of the
satisfiability problem. The complexity problem for the full language requires exponential
space, since it incorporates the theory of real closed fields, for which an exponential-space
lower bound is known (Ben-Or, Kozen, & Reif, 1986). However, we show that the satisfiability problem for a propositional fragment of the language, which is still strong enough to
allow us to express many properties of interest, is decidable in polynomial space.
It is reasonable to ask at this point why we should bother with a logic of evidence. Our
claim is that many decisions in practical applications are made on the basis of evidence.
To take an example from security, consider an enforcement mechanism used to detect and
react to intrusions in a computer system. Such an enforcement mechanism analyzes the
behavior of users and attempts to recognize intruders. Clearly the mechanism wants to
make sensible decisions based on observations of user behaviors. How should it do this?
One way is to think of an enforcement mechanism as accumulating evidence for or against
the hypothesis that the user is an intruder. The accumulated evidence can then be used as
the basis for a decision to quarantine a user. In this context, it is not clear that there is a
reasonable way to assign a prior probability on whether a user is an intruder. If we want
to specify the behavior of such systems and prove that they meet their specifications, it is
helpful to have a logic that allows us to do this. We believe that the logic we propose here
is the first to do so.
The rest of the paper is organized as follows. In the next section, we formalize a notion
of evidence that captures the intuitions outlined above. In Section 3, we introduce our logic
for reasoning about evidence. In Section 4, we present an axiomatization for the logic and
show that it is sound and complete with respect to the intended models. In Section 5, we
discuss the complexity of the decision problem of our logic. In Section 6, we examine some
alternatives to the definition of weight of evidence we use. For ease of exposition, in most
of the paper, we consider a system where there are only two time points: before and after
the observation. In Section 7, we extend our work to dynamic systems, where there can be
multiple pieces of evidence, obtained at different points in time. The proofs of our technical
results can be found in the appendix.

2. Measures of Confirmation and Evidence
In order to develop a logic for reasoning about evidence, we need to first formalize an
appropriate notion of evidence. In this section, we review various formalizations from the
literature, and discuss the formalization we use. Evidence has been studied in depth in the
philosophical literature, under the name of confirmation theory. Confirmation theory aims

3

fiHalpern & Pucella

at determining and measuring the support a piece of evidence provides an hypothesis. As we
mentioned in the introduction, many different measures of confirmation have been proposed
in the literature. Typically, a proposal has been judged on the degree to which it satisfies
various properties that are considered appropriate for confirmation. For example, it may be
required that a piece of evidence e confirms an hypothesis h if and only if e makes h more
probable. We have no desire to enter the debate as to which class of measures of confirmation
is more appropriate. For our purposes, most confirmation functions are inappropriate:
they assume that we are given a prior on the set of hypotheses and observations. By
marginalization, we also have a prior on hypotheses, which is exactly the information we do
not have and do not want to assume. One exception is measures of evidence that use the
log-likelihood ratio. In this case, rather than having a prior on hypotheses and observations,
it suffices that there be a probability h on observations for each hypothesis h: intuitively,
h (ob) is the probability of observing ob when h holds. Given an observation ob, the degree
of confirmation that it provides for an hypothesis h is


h (ob)
,
l(ob, h) = log
h (ob)
where h represents the hypothesis other than h (recall that this approach applies only if
there are two hypotheses). Thus, the degree of confirmation is the ratio between these
two probabilities. The use of the logarithm is not critical here. Using it ensures that the
likelihood is positive if and only if the observation confirms the hypothesis. This approach
has been advocated by Good (1950, 1960), among others.1
One problem with the log-likelihood ratio measure l as we have defined it is that it can
be used only to reason about evidence discriminating between two competing hypotheses,
namely between an hypothesis h holding and the hypothesis h not holding. We would like
a measure of confirmation along the lines of the log-likelihood ratio measure, but that can
handle multiple competing hypotheses. There have been a number of such generalizations,
for example, by Pearl (1988) and Chan and Darwiche (2005). We focus here on the generalization given by Shafer (1982) in the context of the Dempster-Shafer theory of evidence
based on belief functions (Shafer, 1976); it was further studied by Walley (1987). The
description here is taken mostly from Halpern and Fagin (1992). While this measure of
confirmation has a number of nice properties of which we take advantage, much of the work
presented in this paper can be adapted to different measures of confirmation.
We start with a finite set H of mutually exclusive and exhaustive hypotheses; thus,
exactly one hypothesis holds at any given time. Let O be the set of possible observations
(or pieces of evidence). For simplicity, we assume that O is finite. Just as in the case of loglikelihood, we also assume that, for each hypotheses h  H, there is a probability measure
h on O such that h (ob) is the probability of ob if hypothesis h holds. Furthermore, we
assume that the observations in O are relevant to the hypotheses: for every observation
ob  O, there must be an hypothesis h such that h (ob) > 0. (The measures h are often
called likelihood functions in the literature.) We define an evidence space (over H and O)
1. Another related approach, the Bayes factor approach, is based on taking the ratio of odds rather than
likelihoods (Good, 1950; Jeffrey, 1992). We remark that in the literature, confirmation is usually taken
with respect to some background knowledge. For ease of exposition, we ignore background knowledge
here, although it can easily be incorporated into the framework we present.

4

fiA Logic for Reasoning about Evidence

to be a tuple E = (H, O, ), where  is a function that assigns to every hypothesis h  H
the likelihood function (h) = h . (For simplicity, we usually write h for (h), when the
the function  is clear from context.)
Given an evidence space E, we define the weight that the observation ob lends to hypothesis h, written wE (ob, h), as
h (ob)
.
h0 H h0 (ob)

wE (ob, h) = P

(1)

The measure wE always lies between 0 and 1; intuitively, if wE (ob, h) = 1, then ob fully
confirms h (i.e., h is certainly true if ob is observed), while if wE (ob, h) = 0, then ob
disconfirms h (i.e.,
P h is certainly false
P if ob is observed). Moreover, for each fixed observation
ob for which

(ob)
>
0,
h
hH
hH wE (ob, h) = 1, and thus the weight of evidence
wE looks like a probability measure for each ob. While this has some useful technical
consequences, one should not interpret wE as a probability measure. Roughly speaking, the
weight wE (ob, h) is the likelihood that h is the right hypothesis in the light of observation
ob.2 The advantages of wE over other known measures of confirmation are that (a) it is
applicable when we are not given a prior probability distribution on the hypotheses, (b) it
is applicable when there are more than two competing hypotheses, and (c) it has a fairly
intuitive probabilistic interpretation.
An important problem in statistical inference (Casella & Berger, 2001) is that of choosing
the best parameter (i.e., hypothesis) that explains observed data. When there is no prior
on the parameters, the best parameter is typically taken to be the one that maximizes
the likelihood of the data given that parameter. Since wE is just a normalized likelihood
function, the parameter that maximizes the likelihood will also maximize wE . Thus, if all
we are interested in is maximizing likelihood, there is no need to normalize the evidence as
we do. We return to the issue of normalization in Section 6.3
Note that if H = {h1 , h2 }, then wE in some sense generalizes the log-likelihood ratio
measure. More precisely, for a fixed observation ob, wE (ob, ) induces the same relative order
on hypotheses as l(ob, ), and for a fixed hypothesis h, wE (, h) induces the same relative
order on observations as l(, h).
Proposition 2.1: For all ob, we have wE (ob, hi )  wE (ob, h3i ) if and only if l(ob, hi ) 
l(ob, h3i ), for i = 1, 2, and for all h, ob, and ob 0 , we have wE (ob, h)  wE (ob 0 , h) if and
only if l(ob, h)  l(ob 0 , h).
2. We could have taken the log of the ratio to make wE parallel the log-likelihood ratio l defined earlier,
but there are technical advantages in having the weight of evidence be a number between 0 and 1.
3. Another representation of evidence that has similar characteristics to wE is Shafers original representation of evidence via belief functions (Shafer, 1976), defined as
wES (ob, h) =

h (ob)
.
maxhH h (ob)

This measure is known in statistical hypothesis testing as the generalized likelihood-ratio statistic. It is
another generalization of the log-likelihood ratio measure l. The main difference between wE and wES is
how they behave when one considers the combination of evidence, which we discuss later in this section.
As Walley (1987) and Halpern and Fagin (1992) point out, wE gives more intuitive results in this case.
We remark that the parameter (hypothesis) that maximized likelihood also maximizes wES , so wES can
also be used in statistical inference.

5

fiHalpern & Pucella

Although wE (ob, ) behaves like a probability measure on hypotheses for every observation ob, one should not think of it as a probability; the weight of evidence of a combined
hypothesis, for instance, is not generally the sum of the weights of the individual hypotheses (Halpern & Pucella, 2005a). Rather, wE (ob, ) is an encoding of evidence. But what
is evidence? Halpern and Fagin (1992) have suggested that evidence can be thought of as
a function mapping a prior probability on the hypotheses to a posterior probability, based
on the observation made. There is a precise sense in which wE can be viewed as a function
that maps a prior probability 0 on the hypotheses H to a posterior probability ob based
on observing ob, by applying Dempsters Rule of Combination (Shafer, 1976). That is,
ob = 0  wE (ob, ),

(2)

where  combines two probability distributions on H to get a new probability distribution
on H defined as follows:
P
1 (h)2 (h)
(1  2 )(H) = PhH
.
hH 1 (h)2 (h)
(Dempsters Rule of Combination is used to combine belief functions. The definition of  is
more complicated when considering arbitrary belief functions, but in the special case where
the belief functions are in fact probability measures, it takes the form we give here.)
Bayes Rule is the standard way of updating a prior probability based on an observation,
but it is only applicable when we have a joint probability distribution on both the hypotheses
and the observations (or, equivalently, a prior on hypotheses together with the likelihood
functions h for h  H), something which we do not want to assume we are given. In
particular, while we are willing to assume that we are given the likelihood functions, we
are not willing to assume that we are given a prior on hypotheses. Dempsters Rule of
Combination essentially simulates the effects of Bayes Rule. The relationship between
Dempsters Rule and Bayes Rule is made precise by the following well-known theorem.
Proposition 2.2: (Halpern & Fagin, 1992) Let E = (H, O, ) be an evidence space. Suppose
that P is a probability on H  O such that P (H  {ob} | {h}  O) = h (ob) for all h  H
and all ob  O. Let 0 be the probability on H induced by marginalizing P ; that is, 0 (h) =
P ({h}  O). For ob  O, let ob = 0  wE (ob, ). Then ob (h) = P ({h}  O | H  {ob}).
In other words, when we do have a joint probability on the hypotheses and observations, then Dempsters Rule of Combination gives us the same result as a straightforward
application of Bayes Rule.
Example 2.3: To get a feel for how this measure of evidence can be used, consider a
variation of the two-coins example in the introduction. Assume that the coin chosen by
Alice is either double-headed or fair, and consider sequences of a hundred tosses of that coin.
Let O = {m : 0  m  100} (the number of heads observed), and let H = {F, D}, where F
is the coin is fair, and D is the coin is double-headed. The probability spaces associated
with the hypotheses are generated by the following probabilities for simple observations m:



1 100
1 if m = 100
F (m) = 100
D (m) =
0 otherwise.
2
m
6

fiA Logic for Reasoning about Evidence

(We extend by additivity to the whole set O.) Take E = (H, O, ), where (F ) = F and
(D) = D . For any observation m 6= 100, the weight in favor of F is given by

1 100
wE (m, F ) =

0

2100 m

1 100
+ 2100
m

= 1,

which means that the support of m is unconditionally provided to F ; indeed, any such
sequence of tosses cannot appear with the double-headed coin. Thus, if m 6= 100, we get
that
0
 = 0.
wE (m, D) =
1 100
0 + 2100 m
What happens when the hundred coin tosses are all heads? It is straightforward to check
that
1
1
1
2100
100
w
(100,
D)
=
;
wE (100, F ) = 2 1 =
=
E
1
1 + 2100
1 + 2100
1 + 2100
1 + 2100

this time there is overwhelmingly more evidence in favor of D than F .
Note that we have not assumed any prior probability. Thus, we cannot talk about the
probability that the coin is fair or double-headed. What we have is a quantitative assessment
of the evidence in favor of one of the hypotheses. However, if we assume a prior probability
 on the coin being fair and m heads are observed after 100 tosses, then the probability
that the coin is fair is 1 if m 6= 100; if m = 100 then, applying the rule of combination, the
posterior probability of the coin being fair is /( + (1  )2100 ).
t
u
Can we characterize weight functions using a small number of properties? More precisely,
given sets H and O, and a function f from O  H to [0, 1], are there properties of f that
ensure that there are likelihood functions  such that f = wE for E = (H, O, )? As
we saw earlier, for a fixed observation ob, f essentially acts like a probability measure on
H. However, this is not sufficient to guarantee that f is a weight function. Consider the
following example, with O = {ob 1 , ob 2 } and H = {h1 , h2 , h3 }:
f (ob 1 , h1 ) = 1/4
f (ob 1 , h2 ) = 1/4
f (ob 1 , h3 ) = 1/2

f (ob 2 , h1 ) = 1/4
f (ob 2 , h2 ) = 1/2
f (ob 2 , h3 ) = 1/4.

It is straightforward to check that f (ob 1 , ) and f (ob 2 , ) are probability measures on H,
but that there is no evidence space E = (H, O, ) such that f = wE . Indeed, assume that
we do have such h1 , h2 , h3 . By the definition of weight of evidence, and the fact that f
is that weight of evidence, we get the following system of equations:
h1 (ob 1 )
h1 (ob 1 )+h2 (ob 1 )+h3 (ob 1 )
h2 (ob 1 )
h1 (ob 1 )+h2 (ob 1 )+h3 (ob 1 )
h3 (ob 1 )
h1 (ob 1 )+h2 (ob 1 )+h3 (ob 1 )

h1 (ob 2 )
h1 (ob 2 )+h2 (ob 2 )+h3 (ob 2 )
h2 (ob 2 )
h1 (ob 2 )+h2 (ob 2 )+h3 (ob 2 )
h3 (ob 2 )
h1 (ob 2 )+h2 (ob 2 )+h3 (ob 2 )

= 1/4
= 1/4
= 1/2

= 1/4
= 1/2
= 1/4.

It is now immediate that there exist 1 and 2 such that hi (ob j ) = j f (ob j , hi ), for
i = 1, 2, 3. Indeed, j = h1 (ob j ) + h2 (ob j ) + h3 (ob j ), for j = 1, 2. Moreover, since hi is
a probability measure, we must have that
hi (ob 1 ) + hi (ob 2 ) = 1 f (ob 1 , hi ) + 2 f (ob 2 , hi ) = 1,
7

fiHalpern & Pucella

for i = 1, 2, 3. Thus,
1 /4 + 2 /4 = 1 /4 + 2 /2 = 1 /2 + 4 /4 = 1.
These constraints are easily seen to be unsatisfiable.
This argument generalizes to arbitrary functions f ; thus, a necessary condition for f to
be a weight function is that there exists i for each observation ob i such that h (ob i ) =
i f (ob i , h) for each hypothesis h is a probability measure, that is, 1 f (ob 1 , h) +    +
k f (ob k , h) = 1. In fact, when combined with the constraint that f (ob, ) is a probability
measure for a fixed ob, this condition turns out to be sufficient, as the following theorem
establishes.
Theorem 2.4: Let H = {h1 , . . . , hm } and O = {ob 1 , . . . , ob n }, and let f be a real-valued
function with domain O  H such that f (ob, h)  [0, 1]. Then there exists an evidence space
E = (H, O, ) such that f = wE if and only if f satisfies the following properties:
WF1. For every ob  O, f (ob, ) is a probability measure on H.
P
WF2. There exists x1 , . . . , xn > 0 such that, for all h  H, ni=1 f (ob i , h)xi = 1.
This characterization is fundamental to the completeness of the axiomatization of the
logic we introduce in the next section. The characterization is complicated by the fact
that the weight of evidence is essentially a normalized likelihood: the likelihood of an
observation given a particular hypothesis is normalized using the sum of all the likelihoods
of that observation, for all possible hypotheses. One consequence of this, as we already
mentioned above, is that the weight of evidence is always between 0 and 1, and superficially
behaves like a probability measure. In Section 6, we examine the issue of normalization
more carefully, and describe the changes to our framework that would occur were we to
take unnormalized likelihoods as weight of evidence.
Let E = (H, O, ) be an evidence space. Let O be the set of sequences of observations
hob 1 , . . . , ob k i over O.4 Assume that the observations are independent, that is, for each basic
hypothesis h, take h (hob 1 , . . . , ob k i), the probability of observing a particular sequence of
observations given h, to be h (ob 1 )    h (ob k ), the product of the probability of making
each observation in the sequence. Let E  = (H, O ,  ). With this assumption, it is well
known that Dempsters Rule of Combination can be used to combine evidence in this setting;
that is,
wE  (hob 1 , . . . , ob k i, ) = wE (ob 1 , )      wE (ob k , )
(Halpern & Fagin, 1992, Theorem 4.3). It is an easy exercise to check that the weight
provided by the sequence of observations hob 1 , . . . , ob k i can be expressed in terms of the
weight of the individual observations:
wE  (ob 1 , h)    wE  (ob k , h)
.
1 0
k 0
h0 H wE  (ob , h )    wE  (ob , h )

wE  (hob 1 , . . . , ob k i, h) = P

(3)

4. We use superscript rather than subscripts to index observations in a sequence so that these observations
will not be confused with the basic observations ob 1 , . . . , ob n in O.

8

fiA Logic for Reasoning about Evidence

If we let 0 be a prior probability on the hypotheses, and hob 1 ,...,ob k i be the probability on
the hypotheses after observing ob 1 , . . . , ob k , we can verify that
hob1 ,...,ob k i = 0  wE  (hob 1 , . . . , ob k i, ).
Example 2.5: Consider a variant of Example 2.3, where we take the coin tosses as individual observations, rather than the number of heads that turn up in one hundred coin
tosses. As before, assume that the coin chosen by Alice is either double-headed or fair. Let
O = {H, T }, the result of an individual coin toss, where H is the coin landed heads and
T is the coin landed tails. Let H = {F, D}, where F is the coin is fair, and D is the
coin is double-headed. Let E  = (H, O ,  ). The probability measure h associated with
the hypothesis h are generated by the following probabilities for simple observations:
F (H) =

1
2

D (H) = 1.

Thus, for example, F (hH, H, T, Hi) = 1/16, D (hH, H, Hi) = 1, and H (hH, H, T, Hi) =
0.
We can now easily verify results similar to those that were obtained in Example 2.3.
For instance, the weight of observing T in favor of F is given by
wE  (T, F ) =

1
2

0+

1
2

= 1,

which again indicates that observing T provides unconditional support to F ; a doubleheaded coin cannot land tails.
How about sequences of observations? The weight provided by the sequence hob 1 , . . . , ob k i
for hypothesis h is given by Equation (3). Thus, if H = hH, . . . , Hi, a sequence of a hundred
coin tosses, we can check that
wE  (H, F ) =

1

1
2100
1
+ 2100

=

1
1 + 2100

wE  (H, D) =

Unsurprisingly, this is the same result as in Example 2.3.

2100
1
.
=
1
1 + 2100
1 + 2100
t
u

3. Reasoning about Evidence
We introduce a logic Lfo -ev for reasoning about evidence, inspired by a logic introduced in
FHM for reasoning about probability. The logic lets us reason about the weight of evidence
of observations for hypotheses; moreover, to be able to talk about the relationship between
prior probabilities, evidence, and posterior probabilities, we provide operators to reason
about the prior and posterior probabilities of hypotheses. We remark that up to now we
have been somewhat agnostic about whether the priors exist but are not given (or not
known) or whether the prior does not exist at all. It is beyond the scope of this paper to
enter the debate about whether it always appropriate to assume the existence of a prior.
Although the definition of evidence makes sense even if the priors does not exist, our logic
implicitly assumes that there are priors (although they may not be known), since we provide
9

fiHalpern & Pucella

operators for reasoning about the prior. We make use of these operators in some of the
examples below. However, the fragment of the logic that does not use these operators is
appropriate for prior-free reasoning.
The logic has both propositional features and first-order features. We take the probability of propositions and the weight of evidence of observations for hypotheses, and view
probability and evidence as propositions, but we allow first-order quantification over numerical quantities, such as probabilities and evidence. The logic essentially considers two
time periods, which can be thought of as the time before an observation is made and the
time after an observation is made. In this section, we assume that exactly one observation
is made. (We consider sequences of observations in Section 7.) Thus, we can talk of the
probability of a formula  before an observation is made, denoted Pr0 (), the probability
of  after the observation, denoted Pr(), and the evidence provided by the observation ob
for an hypothesis h, denoted w(ob, h). Of course, we want to be able to use the logic to
relate all these quantities.
Formally, we start with two finite sets of primitive propositions, h = {h1 , . . . , hnh }
representing the hypotheses, and o = {ob 1 , . . . , ob no } representing the observations. Let
Lh (h ) be the propositional sublanguage of hypothesis formulas obtained by taking primitive propositions in h and closing off under negation and conjunction; we use  to range
over formulas of that sublanguage.
A basic term has the form Pr0 (), Pr(), or w(ob, h), where  is an hypothesis formula,
ob is an observation, and h is an hypothesis. As we said, we interpret Pr0 () as the
prior probability of , Pr() as the posterior probability of , and w(ob, h) as the weight of
evidence of observation ob for hypothesis h. It may seem strange that we allow the language
to talk about the prior probability of hypotheses, although we have said that we do not
want to assume that the prior is known. We could, of course, simplify the syntax so that
it did not include formulas of the form Pr0 () or Pr(). The advantage of having them is
that, even if the prior is not known, given our view of evidence as a function from priors
to posteriors, we can make statements such as if the prior probability of h is 2/3, ob is
observed, and the weight of evidence of ob for h is 3/4, then the posterior probability of h
is 6/7; this is just
Pr0 (h) = 1/2  ob  w(ob, h) = 3/4  Pr(h) = 6/7.
A polynomial term has the form t1 +    + tn , where each term ti is a product of integers,
basic terms, and variables (which range over the reals). A polynomial inequality formula
has the form p  c, where p is a polynomial term and c is an integer. Let Lfo -ev (h , o )
be the language obtained by starting out with the primitive propositions in h and o
and polynomial inequality formulas, and closing off under conjunction, negation, and firstorder quantification. Let true be an abbreviation for an arbitrary propositional tautology
involving only hypotheses, such as h1  h1 ; let false be an abbreviation for true. With
this definition, true and false can be considered as part of the sublanguage Lh (h ).
It should be clear that while we allow only integer coefficients to appear in polynomial
terms, we can in fact express polynomial terms with rational coefficients by crossmultiplying.
For instance, 31 Pr() + 12 Pr(0 )  1 can be represented by the polynomial inequality formula
2Pr() + 3Pr(0 )  6. While there is no difficulty in giving a semantics to polynomial terms
that use arbitrary real coefficients, we need the restriction to integers in order to make use
10

fiA Logic for Reasoning about Evidence

of results from the theory of real closed fields in both the axiomatization of Section 4 and
the complexity results of Section 5.
We use obvious abbreviations where needed, such as    for (  ),    for
  , x for x(), Pr()  Pr()  c for Pr() + (1)Pr()  c, Pr()  Pr() for
Pr()  Pr()  0, Pr()  c for Pr()  c, Pr() < c for (Pr()  c), and Pr() = c
for (Pr()  c)  (Pr()  c) (and analogous abbreviations for inequalities involving Pr0
and w).
Example 3.1: Consider again the situation given in Example 2.3. Let o , the observations,
consist of primitive propositions of the form heads[m], where m is an integer with 0  m 
100, indicating that m heads out of 100 tosses have appeared. Let h consist of the two
primitive propositions fair and doubleheaded. The computations in Example 2.3 can be
written as follows:
w(heads[100], fair) = 1/(1 + 2100 )  w(heads[100], doubleheaded) = 2100 /(1 + 2100 ).
We can also capture the fact that the weight of evidence of an observation maps a prior
probability into a posterior probability by Dempsters Rule of Combination. For example,
the following formula captures the update of the prior probability  of the hypothesis fair
upon observation of a hundred coin tosses landing heads:
Pr0 (fair) =   w(heads[100], fair) = 1/(1 + 2100 )  Pr(fair) = /( + (1  )2100 ).
We develop a deductive system to derive such conclusions in the next section.

t
u

Now we consider the semantics. A formula is interpreted in a world that specifies which
hypothesis is true and which observation was made, as well as an evidence space to interpret
the weight of evidence of observations and a probability distribution on the hypotheses to
interpret prior probabilities and talk about updating based on evidence. (We do not need
to include a posterior probability distribution, since it can be computed from the prior and
the weights of evidence using Equation (2).) An evidential world is a tuple w = (h, ob, , E),
where h is a hypothesis, ob is an observation,  is a probability distribution on h , and E
is an evidence space over h and o .
To interpret propositional formulas in Lh (h ), we associate with each hypothesis formula
 a set [[]] of hypotheses, by induction on the structure of :
[[h]] = {h}
[[]] = h  [[]]
[[1  2 ]] = [[1 ]]  [[2 ]].
To interpret first-order formulas that may contain variables, we need a valuation v that
assigns a real number to every variable. Given an evidential world w = (h, ob, , E) and a
valuation v, we assign to a polynomial term p a real number [p]w,v in a straightforward way:
[x]w,v = v(x)
[a]w,v = a
[Pr0 ()]w,v = ([[]])
11

fiHalpern & Pucella

[Pr()]w,v = (  wE (ob, ))([[]])
[w(ob 0 , h0 )]w,v = wE (ob 0 , h0 )
[t1 t2 ]w,v = [t1 ]w,v  [t2 ]w,v
[p1 + p2 ]w,v = [p1 ]w,v + [p2 ]w,v .
Note that, to interpret Pr(), the posterior probability of  after having observed ob (the
observation at world w), we use Equation (2), which says that the posterior is obtained by
combining the prior probability  with wE (ob, ).
We define what it means for a formula  to be true (or satisfied) at an evidential world
w under valuation v, written (w, v) |= , as follows:
(w, v) |= h if w = (h, ob, , E) for some ob, , E
(w, v) |= ob if w = (h, ob, , E) for some h, , E
(w, v) |=  if (w, v) 6|= 
(w, v) |=    if (w, v) |=  and (w, v) |= 
(w, v) |= p  c if [p]w,v  c
(w, v) |= x if (w, v 0 ) |=  for all v 0 that agree with v on all variables but x.
If (w, v) |=  is true for all v, we write simply w |= . It is easy to check that if 
is a closed formula (that is, one with no free variables), then (w, v) |=  if and only if
(w, v 0 ) |= , for all v, v 0 . Therefore, given a closed formula , if (M, w, v) |= , then in fact
w |= . We will typically be concerned only with closed formulas. Finally, if w |=  for
all evidential worlds w, we write |=  and say that  is valid. In the next section, we will
characterize axiomatically all the valid formulas of the logic.
Example 3.2: The following formula is valid, that is, true in all evidential worlds:
|= (w(ob, h1 ) = 2/3  w(ob, h2 ) = 1/3)  (Pr0 (h1 )  1/100  ob)  Pr(h1 )  2/101.
In other words, at all evidential worlds where the weight of evidence of observation ob for
hypothesis h1 is 2/3 and the weight of evidence of observation ob for hypothesis h2 is 1/3,
it must be the case that if the prior probability of h1 is at least 1/100 and ob is actually
observed, then the posterior probability of h1 is at least 2/101. This shows the extent to
which we can reason about the evidence independently of the prior probabilities.
t
u
The logic imposes no restriction on the prior probabilities to be used in the models.
This implies, for instance, that the formula
fair  Pr0 (fair) = 0
is satisfiable: there exists an evidential world w such that the formula is true at w. In other
words, it is consistent for an hypothesis to be true, despite the prior probability of it being
true being 0. It is a simple matter to impose a restriction on the models that they be such
that if h is true at a world, then (h) > 0 for the prior  at that world.
12

fiA Logic for Reasoning about Evidence

We conclude this section with some remarks concerning the semantic model. Our semantic model implicitly assumes that the prior probability is known and that the likelihood
functions (i.e., the measures h ) are known. Of course, in many situations there will be
uncertainty about both. Indeed, our motivation for focusing on evidence is precisely to deal
with situations where the prior is not known. Handling uncertainty about the prior is easy
in our framework, since our notion of evidence is independent of the prior on hypotheses. It
is straightforward to extend our model by allowing a set of possible worlds, with a different
prior in each, but using the same evidence space for all of them. We can then extend the
logic with a knowledge operator, where a statement is known to be true if it is true in all
the worlds. This allows us to make statements like I know that the prior on hypothesis
h is between  and . Since observation ob provides evidence 3/4 for h, I know that the
posterior on h given ob is between (3)/(2 + 1) and (3)/(2 + 1).
Dealing with uncertainty about the likelihood functions is somewhat more subtle. To
understand the issue, suppose that one of two coins will be chosen and tossed. The bias of
coin 1 (i.e., the probability that coin 1 lands heads) is between 2/3 and 3/4; the bias of coin
2 is between 1/4 and 1/3. Here there is uncertainty about the probability that coin 1 will
be picked (this is uncertainty about the prior) and there is uncertainty about the bias of
each coin (this is uncertainty about the likelihood functions). The problem here is that, to
deal with this, we must consider possible worlds where there is a possibly different evidence
space in each world. It is then not obvious how to define weight of evidence. We explore
this issue in more detail in a companion paper (Halpern & Pucella, 2005a).

4. Axiomatizing Evidence
In this section we present a sound and complete axiomatization AX(h , o ) for our logic.
The axiomatization can be divided into four parts. The first part, consisting of the
following axiom and inference rule, accounts for first-order reasoning:
Taut. All substitution instances of valid formulas of first-order logic with equality.
MP. From  and    infer .
Instances of Taut include, for example, all formulas of the form   , where  is an
arbitrary formula of the logic. It also includes formulas such as (x)   if x is not free
in . In particular, (x(h))  h for hypotheses in h , and similarly for observations in
o . Note that Taut includes all substitution instances of valid formulas of first-order logic
with equality; in other words, any valid formula of first-order logic with equality where
free variables are replaced with arbitrary terms of our language (including Pr0 (), Pr(),
w(ob, h)) is an instance of Taut. Axiom Taut can be replaced by a sound and complete
axiomatization for first-order logic with equality, as given, for instance, in Shoenfield (1967)
or Enderton (1972).
The second set of axioms accounts for reasoning about polynomial inequalities, by relying
on the theory of real closed fields:
RCF. All instances of formulas valid in real closed fields (and, thus, true about the reals),
with nonlogical symbols +, , <, 0, 1, 1, 2, 2, 3, 3, . . . .

13

fiHalpern & Pucella

Formulas that are valid in real closed fields include, for example, the fact that addition on the
reals is associative, xyz((x+y)+z = x+(y +z)), that 1 is the identity for multiplication,
x(x1 = x), and formulas relating the constant symbols, such as k = 1+  +1 (k times) and
1 + 1 = 0. As for Taut, we could replace RCF by a sound and complete axiomatization
for real closed fields (cf. Fagin et al., 1990; Shoenfield, 1967; Tarski, 1951).
The third set of axioms essentially captures the fact that there is a single hypothesis
and a single observation that holds per state.
H1. h1      hnh .
H2. hi  hj if i 6= j.
O1. ob 1      ob no .
O2. ob i  ob j if i 6= j.
These axioms illustrate a subtlety of our logic. Like most propositional logics, ours is
parameterized by primitive propositions, in our case, h and o . However, while axiomatizations for propositional logics typically do not depend on the exact set of primitive
propositions, ours does. Clearly, axiom H1 is sound only if the hypothesis primitives are
exactly h1 , . . . , hnh . Similarly, axiom O1 is sound only if the observation primitives are
exactly ob 1 , . . . , ob no . It is therefore important for us to identify the primitive propositions
when talking about the axiomatization AX(h , o ).
The last set of axioms concerns reasoning about probabilities and evidence proper. The
axioms for probability are taken from FHM.
Pr1. Pr0 (true) = 1.
Pr2. Pr0 ()  0.
Pr3. Pr0 (1  2 ) + Pr0 (1  2 ) = Pr0 (1 ).
Pr4. Pr0 (1 ) = Pr0 (2 ) if 1  2 is a propositional tautology.
Axiom Pr1 simply says that the event true has probability 1. Axiom Pr2 says that probability is nonnegative. Axiom Pr3 captures finite additivity. It is not possible to express
countable additivity in our logic. On the other hand, just as in FHM, we do not need an
axiom for countable additivity. Roughly speaking, as we establish in the next section, if
a formula is satisfiable at all, it is satisfiable in a finite structure. Similar axioms capture
posterior probability formulas:
Po1. Pr(true) = 1.
Po2. Pr()  0.
Po3. Pr(1  2 ) + Pr(1  2 ) = Pr(1 ).
Po4. Pr(1 ) = Pr(2 ) if 1  2 is a propositional tautology.

14

fiA Logic for Reasoning about Evidence

Finally, we need axioms to account for the behavior of the evidence operator w. What
are these properties? For one thing, the weight function acts essentially like a probability
on hypotheses, for each fixed observation, except that we are restricted to taking the weight
of evidence of basic hypotheses only. This gives the following axioms:
E1. w(ob, h)  0.
E2. w(ob, h1 ) +    + w(ob, hnh ) = 1.
Second, evidence connects the prior and posterior beliefs via Dempsters Rule of Combination, as in (2). This is captured by the following axiom. (Note that, since we do not
have division in the language, we crossmultiply to clear the denominator.)
E3. ob  (Pr0 (h)w(ob, h) = Pr(h)Pr0 (h1 )w(ob, h1 ) +    + Pr(h)Pr0 (hnh )w(ob, hnh )).
This is not quite enough. As we saw in Section 2, property WF2 in Theorem 2.4 is
required for a function to be an evidence function. The following axiom captures WF2 in
our logic:
E4. x1 . . . xno (x1 > 0      xno > 0  w(ob 1 , h1 )x1 +    + w(ob no , h1 )xno = 1
    w(ob 1 , hnh )x1 +    + w(ob no , hnh )xno = 1).
Note that axiom E4 is the only axiom that requires quantification. Moreover, axioms E3
and E4 both depend on h and o .
As an example, we show that if h and h0 are distinct hypotheses in h , then the formula
(w(ob, h) = 2/3  w(ob, h0 ) = 2/3)
is provable. First, by RCF, the following valid formula of the theory of real closed fields is
provable:
xy(x = 2/3  y = 2/3  x + y > 1).
Moreover, if (x, y) is any first-order logic formula with two free variables x and y, then
(xy((x, y)))  (w(ob, h), w(ob, h0 ))
is a substitution instance of a valid formula of first-order logic with equality, and hence is
an instance of Taut. Thus, by MP, we can prove that
w(ob, h) = 2/3  w(ob, h0 ) = 2/3  w(ob, h) + w(ob, h0 ) > 1,
which is provably equivalent (by Taut and MP) to its contrapositive
w(ob, h) + w(ob, h0 )  1  (w(ob, h) = 2/3  w(ob, h0 ) = 2/3).
By an argument similar to that above, using RCF, Taut, MP, E1, and E2, we can derive
w(ob, h) + w(ob, h0 )  1,
and by MP, we obtain the desired conclusion: (w(ob, h) = 2/3  w(ob, h0 ) = 2/3).
15

fiHalpern & Pucella

Theorem 4.1: AX(h , o ) is a sound and complete axiomatization for Lfo -ev (h , o ) with
respect to evidential worlds.
As usual, soundness is straightforward, and to prove completeness, it suffices to show
that if a formula  is consistent with AX(h , o ), it is satisfiable in an evidential structure. However, the usual approach for proving completeness in modal logic, which involves
considering maximal consistent sets and canonical structures does not work. The problem
is that there are maximal consistent sets of formulas that are not satisfiable. For example,
there is a maximal consistent set of formulas that includes Pr() > 0 and Pr()  1/n for
n = 1, 2, . . . . This is clearly unsatisfiable. Our proof follows the techniques developed in
FHM.
To express axiom E4, we needed to have quantification in the logic. This is where the
fact that our representation of evidence is normalized has a nontrivial effect on the logic: E4
corresponds to property WF2, which essentially says that a function is a weight of evidence
function if one can find such a normalization factor. An interesting question is whether it
is possible to find a sound and complete axiomatization for the propositional fragment of
our logic (without quantification or variables). To do this, we need to give quantifier-free
axioms to replace axiom E4. This amounts to asking whether there is a simpler property
than WF2 in Theorem 2.4 that characterizes weight of evidence functions. This remains
an open question.

5. Decision Procedures
In this section, we consider the decision problem for our logic, that is, the problem of
deciding whether a given formula  is satisfiable. In order to state the problem precisely,
however, we need to deal carefully with the fact that the logic is parameterized by the sets
h and o of primitive propositions representing hypotheses and observations. In most
logics, the choice of underlying primitive propositions is essentially irrelevant. For example,
if a propositional formula  that contains only primitive propositions in some set  is
true with respect to all truth assignments to , then it remains true with respect to all
truth assignments to any set 0  . This monotonicity property does not hold here. For
example, as we have already observed, axiom H1 clearly depends on the set of hypotheses
and observations; it is no longer valid if the set is changed. The same is true for O1, E3,
and E4.
This means that we have to be careful, when stating decision problems, about the role
of h and o in the algorithm. A straightforward way to deal with this is to assume that
the satisfiability algorithm gets as input h , o , and a formula   Lfo -ev (h , o ). Because
Lfo -ev (h , o ) contains the full theory of real closed fields, it is unsurprisingly difficult to
decide. For our decision procedure, we can use the exponential-space algorithm of Ben-Or,
Kozen, and Reif (1986) to decide the satisfiability of real closed field formulas. We define
the length || of  to be the number of symbols required to write , where we count the
length of each coefficient as 1. Similarly, we define kk to be the length of the longest
coefficient appearing in f , when written in binary.
Theorem 5.1: There is a procedure that runs in space exponential in || kk for deciding,
given h and o , whether a formula  of Lfo -ev (h , o ) is satisfiable in an evidential world.
16

fiA Logic for Reasoning about Evidence

This is essentially the best we can do, since Ben-Or, Kozen, and Reif (1986) prove that
the decision problem for real closed fields is complete for exponential space, and our logic
contains the full language of real closed fields.
While we assumed that the algorithm takes as input the set of primitive propositions
h and o , this does not really affect the complexity of the algorithm. More precisely, if
we are given a formula  in Lfo -ev over some set of hypotheses and observations, we can
still decide whether  is satisfiable, that is, whether there are sets h and o of primitive
propositions containing all the primitive propositions in  and an evidential world w that
satisfies .
Theorem 5.2: There is a procedure that runs in space exponential in || kk for deciding
whether there exists sets of primitive propositions h and o such that   Lfo -ev (h , o )
and  is satisfiable in an evidential world.
The main culprit for the exponential-space complexity is the theory of real closed fields,
which we had to add to the logic to be able to even write down axiom E4 of the axiomatization AX(h , o ).5 However, if we are not interested in axiomatizations, but simply in
verifying properties of probabilities and weights of evidence, we can consider the following
propositional (quantifier-free) fragment of our logic. As before, we start with sets h and
o of hypothesis and observation primitives, and form the sublanguage Lh of hypothesis
formulas. Basic terms have the form Pr0 (), Pr(), and w(ob, h), where  is an hypothesis
formula, ob is an observation, and h is an hypothesis. A quantifier-free polynomial term
has the form a1 t1 +    + an tn , where each ai is an integer and each ti is a product of
basic terms. A quantifier-free polynomial inequality formula has the form p  c, where
p is a quantifier-free polynomial term, and c is an integer. For instance, a quantifier-free
polynomial inequality formula takes the form Pr0 () + 3w(ob, h) + 5Pr0 ()Pr(0 )  7.
Let Lev (h , o ) be the language obtained by starting out with the primitive propositions
in h and o and quantifier-free polynomial inequality formulas, and closing off under conjunction and negation. Since quantifier-free polynomial inequality formulas are polynomial
inequality formulas, Lev (h , o ) is a sublanguage of Lfo -ev (h , o ). The logic Lev (h , o )
is sufficiently expressive to express many properties of interest; for instance, it can certainly
express the general connection between priors, posteriors, and evidence captured by axiom
E3, as well as specific relationships between prior probability and posterior probability
through the weight of evidence of a particular observation, as in Example 3.1. Reasoning
about the propositional fragment of our logic Lev (h , o ) is easier than the full language.6
5. Recall that axiom E4 requires existential quantification. Thus, we can restrict to the sublanguage
consisting of formulas with a single block of existential quantifiers in prefix position. The satisfiability
problem for this sublanguage can be shown to be decidable in time exponential in the size of the formula
(Renegar, 1992).
6. In a preliminary version of this paper (Halpern & Pucella, 2003), we examined the quantifier-free fragment
of Lfo -ev (h , o ) that uses only linear inequality formulas, of the form a1 t1 +    + an tn  c, where each
ti is a basic term. We claimed that the problem of deciding, given h and o , whether a formula  of
this fragment is satisfiable in an evidential world is NP-complete. We further claimed that this result
followed from a small-model theorem: if  is satisfiable, then it is satisfiable in an evidential world over
a small number of hypotheses and observations. While this small-model theorem is true, our argument
that the satisfiability problem is in NP also implicitly assumed that the numbers associated with the
probability measure and the evidence space in the evidential world were small. But this is not true

17

fiHalpern & Pucella

Theorem 5.3: There is a procedure that runs in space polynomial in || kk for deciding,
given h and o , whether a formula  of Lev (h , o ) is satisfiable in an evidential world.
Theorem 5.3 relies on Cannys (1988) procedure for deciding the validity of quantifierfree formulas in the theory of real closed fields. As in the general case, the complexity is
unaffected by whether or not the decision problem takes as input the sets h and o of
primitive propositions.
Theorem 5.4: There is a procedure that runs in space polynomial in || kk for deciding
whether there exists sets of primitive propositions h and o such that   Lev (h , o ) and
 is satisfiable in an evidential world.

6. Normalized Versus Unnormalized Likelihoods
The weight of evidence we used throughout this paper is a generalization of the log-likelihood
ratio advocated by Good (1950, 1960). As we pointed out earlier, this measure of confirmation is essentially a normalized likelihood: the likelihood of an observation given a particular
hypothesis is normalized by the sum of all the likelihoods of that observation, for all possible hypotheses. What would change if we were to take the (unnormalized) likelihoods h
themselves as weight of evidence? Some things would simplify. For example, WF2 is a
consequence of normalization, as is the corresponding axiom E4, which is the only axiom
that requires quantification.
The main argument for normalizing likelihood is the same as that for normalizing probability measures. Just like probability, when using normalized likelihood, the weight of
evidence is always between 0 and 1, and provides an absolute scale against which to judge
all reports of evidence. The impact here is psychologicalit permits one to use the same
rules of thumb in all situations, since the numbers obtained are independent from the context of their use. Thus, for instance, a weight of evidence of 0.95 in one situation corresponds
to the same amount of evidence as a weight of evidence of 0.95 in a different situation;
any acceptable decision based on this weight of evidence in the first situation ought to be
acceptable in the other situation as well. The importance of having such a uniform scale
depends, of course, on the intended applications.
For the sake of completeness, we now describe the changes to our framework required
to use unnormalized likelihoods as a weight of evidence. Define wEu (ob, h) = h (ob).
in general. Even though the formula  involves only linear inequality formulas, every evidential world
satisfies axiom E3. This constraint enables us to write formulas for which there exist no models where
the probabilities and weights of evidence are rational. For example, consider the formula
Pr0 (h1 ) = w(ob 1 , h1 )  Pr0 (h2 ) = 1  Pr0 (h1 )  Pr(h1 ) = 1/2  w(ob 1 , h2 ) = 1/4
Any evidential world satisfying the formula must satisfy
Pr0 (h1 ) = w(ob 1 , h1 ) = 1/8(1 


17)

which is irrational. The exact complexity of this fragment remains open. We can use our techniques to
show that it is in PSPACE, but we have no matching lower bound. (In particular, it may indeed be in
NP.) We re-examine this fragment of the logic in Section 6, under a different interpretation of weights
of evidence.

18

fiA Logic for Reasoning about Evidence

First, note that we can update a prior probability 0 via a set of likelihood functions h
using a form of Dempsters Rule of Combination. More precisely, we can define 0 wEu (ob, )
to be the probability measure defined by
0 (h)h (ob)
.
0
h0 H 0 (h )h0 (ob)

(0  wEu (ob, ))(h) = P

The logic we introduced in Section 3 applies just as well to this new interpretation of
weights of evidence. The syntax remains unchanged, the models remain evidential worlds,
and the semantics of formulas simply take the new interpretation of weight of evidence
into account. In particular, the assignment [p]w,v now uses the above definition of wEu , and
becomes
[Pr()]w,v = (  wEu (ob, ))([[]])
[w(ob 0 , h0 )]w,v = wEu (ob 0 , h0 ).
The axiomatization of this new logic is slightly different and somewhat simpler than the
one in Section 3. In particular, E1 and E2, which say that w(ob, h) acts as a probability
measure for each fixed ob, are replaced by axioms that say that w(ob, h) acts as a probability
measure for each fixed h:
E10 . w(ob, h)  0.
E20 . w(ob 1 , h) +    + w(ob no , h) = 1.
Axiom E3 is unchanged, since wEu is updated in essentially the same way as wE . Axiom E4
becomes unnecessary.
What about the complexity of the decision procedure? As in Section 5, the complexity
of the decision problem for the full logic Lfo -ev (h , o ) remains dominated by the complexity of reasoning in real closed fields. Of course, now, we can express the full axiomatization
for the unnormalized likelihood interpretation of weight of evidence in the Lev (h , o ) fragment, which can be decided in polynomial space. A further advantage of the unnormalized
likelihood interpretation of weight of evidence, however, is that it leads to a useful fragment
of Lev (h , o ) that is perhaps easier to decide.
Suppose that we are interested in reasoning exclusively about weights of evidence, with
no prior or posterior probability. This is the kind of reasoning that actually underlies
many computer science applications involving randomized algorithms (Halpern & Pucella,
2005b). As before, we start with sets h and o of hypothesis and observation primitives,
and form the sublanguage Lh of hypothesis formulas. A quantifier-free linear term has
the form a1 w(ob 1 , h1 ) +    + an w(ob n , hn ), where each ai is an integer, each ob i is an
observation, and each hi is an hypothesis. A quantifier-free linear inequality formula has
the form p  c, where p is a quantifier-free linear term and c is an integer. For example,
w(ob 0 , h) + 3w(ob, h)  7 is a quantifier-free linear inequality formula.
Let Lw (h , o ) be the language obtained by starting out with the primitive propositions
in h and o and quantifier-free linear inequality formulas, and closing off under conjunction
and negation. Since quantifier-free linear inequality formulas are polynomial inequality
formulas, Lw (h , o ) is a sublanguage of Lfo -ev (h , o ). Reasoning about Lw (h , o ) is
easier than the full language, and possibly easier than the Lev (h , o ) fragment.
19

fiHalpern & Pucella

Theorem 6.1: The problem of deciding, given h and o , whether a formula  of Lw (h , o )
is satisfiable in an evidential world is NP-complete.
As in the general case, the complexity is unaffected by whether or not the decision
problem takes as input the sets h and o of primitive propositions.
Theorem 6.2: The problem of deciding, for a formula , whether there exists sets of
primitive propositions h and o such that   Lw (h , o ) and  is satisfiable in an
evidential world is NP-complete.

7. Evidence in Dynamic Systems
The evidential worlds we have considered until now are essentially static, in that they model
only the situation where a single observation is made. Considering such static worlds lets
us focus on the relationship between the prior and posterior probabilities on hypotheses
and the weight of evidence of a single observation. In a related paper (Halpern & Pucella,
2005b), we consider evidence in the context of randomized algorithms; we use evidence to
characterize the information provided by, for example, a randomized algorithm for primality
when it says that a number is prime. The framework in that work is dynamic; sequences of
observations are made over time. In this section, we extend our logic to reason about the
evidence of sequences of observations, using the approach to combining evidence described
in Section 2.
There are subtleties involved in trying to find an appropriate logic for reasoning about
situations like that in Example 2.5. The most important one is the relationship between
observations and time. By way of illustration, consider the following example. Bob is
expecting an email from Alice stating where a rendezvous is to take place. Calm under
pressure, Bob is reading while he waits. We assume that Bob is not concerned with the
time. For the purposes of this example, one of three things can occur at any given point in
time:
(1) Bob does not check if he has received email;
(2) Bob checks if he has received email, and notices he has not received an email from
Alice;
(3) Bob checks if he has received email, and notices he has received an email from Alice.
How is his view of the world affected by these events? In (1), it should be clear that,
all things being equal, Bobs view of the world does not change: no observation is made.
Contrast this with (2) and (3). In (2), Bob does make an observation, namely that he has
not yet received Alices email. The fact that he checks indicates that he wants to observe a
result. In (3), he also makes an observation, namely that he received an email from Alice.
In both of these cases, the check yields an observation, that he can use to update his view
of the world. In case (2), he essentially observed that nothing happened, but we emphasize
again that this is an observation, to be distinguished from the case where Bob does not
even check whether email has arrived, and should be explicit in the set O in the evidence
space.

20

fiA Logic for Reasoning about Evidence

This discussion motivates the models that we use in this section. We characterize
an agents state by the observations that she has made, including possibly the nothing
happened observation. Although we do not explicitly model time, it is easy to incorporate
time in our framework, since the agent can observe times or clock ticks. The models in this
section are admittedly simple, but they already highlight the issues involved in reasoning
about evidence in dynamic systems. As long as agents do not forget observations, there is
no loss of generality in associating an agents state with a sequence of observations. We do,
however, make the simplifying assumption that the same evidence space is used for all the
observations in a sequence. In other words, we assume that the evidence space is fixed for
the evolution of the system. In many situations of interest, the external world changes. The
possible observations may depend on the state of the world, as may the likelihood functions.
There are no intrinsic difficulties in extending the model to handle state changes, but the
additional details would only obscure the presentation.
In some ways, considering a dynamic setting simplifies things. Rather than talking
about the prior and posterior probability using different operators, we need only a single
probability operator that represents the probability of an hypothesis at the current time.
To express the analogue of axiom E3 in this logic, we need to be able to talk about the
probability at the next time step. This can be done by adding the next-time operator
 to the logic, where  holds at the current time if  holds at the next time step.7 We
further extend the logic to talk about the weight of evidence of a sequence of observations.
-ev
We define the logic Lfo
dyn as follows. As in Section 3, we start with a set of primitive
propositions h and o , respectively representing the hypotheses and the observations.
Again, let Lh (h ) be the propositional sublanguage of hypotheses formulas obtained by
taking primitive propositions in h and closing off under negation and conjunction; we use
 to range over formulas of that sublanguage.
A basic term now has the form Pr() or w(ob, h), where  is an hypothesis formula,
ob = hob 1 , . . . , ob k i is a nonempty sequence of observations, and h is an hypothesis. If
ob = hob 1 i, we write w(ob 1 , h) rather than w(hob 1 i, h). As before, a polynomial term has
the form t1 +    + tn , where each term ti is a product of integers, basic terms, and variables
(which intuitively range over the reals). A polynomial inequality formula has the form
-ev
p  c, where p is a polynomial term and c is an integer. Let Lfo
dyn (h , o ) be the language
obtained by starting out with the primitive propositions in h and o and polynomial
inequality formulas, and closing off under conjunction, negation, first-order quantification,
and application of the  operator. We use the same abbreviations as in Section 3.
The semantics of this logic now involves models that have dynamic behavior. Rather
than just considering individual worlds, we now consider sequences of worlds, which we
call runs, representing the evolution of the system over time. A model is now an infinite
run, where a run describes a possible dynamic evolution of the system. As before, a run
records the observations being made and the hypothesis that is true for the run, as well as
a probability distribution describing the prior probability of the hypothesis at the initial
state of the run, and an evidence space E  over h and o to interpret w. We define an
evidential run r to be a map from the natural numbers (representing time) to histories of
7. Following the discussion above, time steps are associated with new observations. Thus,  means that
 is true at the next time step, that is, after the next observation. This simplifies the presentation of
the logic.

21

fiHalpern & Pucella

the system up to that time. A history at time m records the relevant information about the
runthe hypothesis that is true, the prior probability on the hypotheses, and the evidence
space E  and the observations that have been made up to time m. Hence, a history has
the form h(h, , E  ), ob 1 , . . . , ob k i. We assume that r(0) = h(h, , E  )i for some h, , and
E  , while r(m) = h(h, , E  ), ob 1 , . . . , ob m i for m > 0. We define a point of the run to be a
pair (r, m) consisting of a run r and time m.
We associate with each propositional formula  in Lh (h ) a set [[]] of hypotheses, just
as we did in Section 3.
In order to ascribe a semantics to first-order formulas that may contain variables, we
need a valuation v that assigns a real number to every variable. Given a valuation v, an
evidential run r, and a point (r, m), where r(m) = h(h, , E  ), ob 1 , . . . , ob m i, we can assign
to a polynomial term p a real number [p]r,m,v using essentially the same approach as in
Section 3:
[x]r,m,v = v(x)
[a]r,m,v = a
[Pr()]r,m,v = (  wE  (hob 1 , . . . , ob m i, )))([[]])
where r(m) = h(h, , E  ), ob 1 , . . . , ob m i
[w(ob, h0 )]r,m,v = wE  (ob, h0 )
where r(m) = h(h, , E  ), ob 1 , . . . , ob m i
[t1 t2 ]r,m,v = [t1 ]r,m,v  [t2 ]r,m,v
[p1 + p2 ]r,m,,v = [p1 ]r,m,v + [p2 ]r,m,v .
We define what it means for a formula  to be true (or satisfied) at a point (r, m) of
an evidential run r under valuation v, written (r, m, v) |= , using essentially the same
approach as in Section 3:
(r, m, v) |= h if r(m) = h(h, , E  ), . . .i
(r, m, v) |= ob if r(m) = h(h, , E  ), . . . , obi
(r, m, v) |=  if (r, m, v) 6|= 
(r, m, v) |=    if (r, m, v) |=  and (r, m, v) |= 
(r, m, v) |= p  c if [p]r,m,v  c
(r, m, v) |=  if (r, m + 1, v) |= 
(r, m, v) |= x if (r, m, v 0 ) |=  for all valuations v 0 that agree with v on all variables
but x.
If (r, m, v) |=  is true for all v, we simply write (r, m) |= . If (r, m) |=  for all points
(r, m) of r, then we write r |=  and say that  is valid in r. Finally, if r |=  for all
evidential runs r, we write |=  and say that  is valid.
It is straightforward to axiomatize this new logic. The axiomatization shows that we
can capture the combination of evidence directly in the logic, a pleasant property. Most of
22

fiA Logic for Reasoning about Evidence

the axioms from Section 3 carry over immediately. Let the axiomatization AXdyn (h , o )
consists of the following axioms and inference rules: first-order reasoning (Taut, MP), reasoning about polynomial inequalities (RCF), reasoning about hypotheses and observations
(H1,H2,O1,O2), reasoning about probabilities (Po14 only, since we do not have Pr0 in
the language), and reasoning about weights of evidence (E1, E2, E4), as well as new axioms
we now present.
Basically, the only axiom that needs replacing is E3, which links prior and posterior
probabilities, since this now needs to be expressed using the  operator. Moreover, we
need an axiom to relate the weight of evidence of a sequence of observation to the weight
of evidence of the individual observations, as given by Equation (3).
E5. ob  x((Pr(h) = x) 
Pr(h)w(ob, h) = xPr(h1 )w(ob, h1 ) +    + xPr(hnh )w(ob, hnh )).
E6. w(ob 1 , h)    w(ob k , h) = w(hob 1 , . . . , ob k i, h)w(ob 1 , h1 )    w(ob k , h1 ) +    +
w(hob 1 , . . . , ob k i, h)w(ob 1 , hnh )    w(ob k , hnh ).
To get a complete axiomatization, we also need axioms and inference rules that capture
the properties of the temporal operator .
T1.   (  )  .
T2.   .
T3. From  infer .
Finally, we need axioms to say that the truth of hypotheses as well as the value of polynomial
terms not containing occurrences of Pr is time-independent:
T4.   .
T5. (p  c)  p  c if p does not contain an occurrence of Pr.
T6. (x)  x().
-ev
Theorem 7.1: AXdyn (h , o ) is a sound and complete axiomatization for Lfo
dyn (h , o )
with respect to evidential runs.

8. Conclusion
In the literature, reasoning about the effect of observations is typically done in a context
where we have a prior probability on a set of hypotheses which we can condition on the
observations made to obtain a new probability on the hypotheses that reflects the effect of
the observations. In this paper, we have presented a logic of evidence that lets us reason
about the weight of evidence of observations, independently of any prior probability on the
hypotheses. The logic is expressive enough to capture in a logical form the relationship
between a prior probability on hypotheses, the weight of evidence of observations, and the
result posterior probability on hypotheses. But we can also capture reasoning that does not
involve prior probabilities.
23

fiHalpern & Pucella

While the logic is essentially propositional, obtaining a sound and complete axiomatization seems to require quantification over the reals. This adds to the complexity of the
logicthe decision problem for the full logic is in exponential space. However, an interesting and potentially useful fragment, the propositional fragment, is decidable in polynomial
space.
Acknowledgments. A preliminary version of this paper appeared in the Proceedings of
the Nineteenth Conference on Uncertainty in Artificial Intelligence, pp. 297304, 2003. This
work was mainly done while the second author was at Cornell University. We thank Dexter
Kozen and Nimrod Megiddo for useful discussions. Special thanks to Manfred Jaeger for
his careful reading of the paper and subsequent comments. Manfred found the bug in our
proof that the satisfiability problem for the quantifier-free fragment of Lfo -ev (h , o ) that
uses only linear inequality formulas is NP-complete. His comments also led us to discuss the
issue of normalization. We also thank the reviewers, whose comments greatly improved the
paper. This work was supported in part by NSF under grants CTC-0208535, ITR-0325453,
and IIS-0534064, by ONR under grant N00014-01-10-511, by the DoD Multidisciplinary
University Research Initiative (MURI) program administered by the ONR under grants
N00014-01-1-0795 and N00014-04-1-0725, and by AFOSR under grant F49620-02-1-0101.

Appendix A. Proofs
Proposition 2.1: For all ob, we have wE (ob, hi )  wE (ob, h3i ) if and only if l(ob, hi ) 
l(ob, h3i ), for i = 1, 2, and for all h, ob, and ob 0 , we have wE (ob, h)  wE (ob 0 , h) if and
only if l(ob, h)  l(ob 0 , h).
Proof. Let ob be an arbitrary observation. The result follows from the following argument:
wE (ob, hi )  wE (ob, h3i )
iff hi (ob)/(hi (ob) + h3i (ob))  h3i (ob)/(hi (ob) + h3i (ob))
iff hi (ob)hi (ob)  h3i (ob)h3i (ob)
iff hi (ob)/h3i (ob)  h3i (ob)/hi (ob)
iff l(ob, hi )  l(ob, h3i ).
A similar argument establishes the result for hypotheses.

t
u

Theorem 2.4: Let H = {h1 , . . . , hm } and O = {ob 1 , . . . , ob n }, and let f be a real-valued
function with domain O  H such that f (ob, h)  [0, 1]. Then there exists an evidence space
E = (H, O, h1 , . . . , hm ) such that f = wE if and only if f satisfies the following properties:
WF1. For every ob  O, f (ob, ) is a probability measure on H.
P
WF2. There exists x1 , . . . , xn > 0 such that, for all h  H, ni=1 f (ob i , h)xi = 1.
Proof. () Assume that f = wE for some evidence space E = (H, O, h1 , . . . , hm ). It is
routine to verify WF1, that for a fixed ob  O, wEP
(ob, ) is a probability measure on H.
To verify WF2, note that we can simply take xi = h0 H h0 (ob i ).
() Let f be a function from O  H to [0, 1] that satisfies WF1 and WF2. Let
x1 , . . . , xnh be the positive reals guaranteed by WF2. It is straightforward to verify that
24

fiA Logic for Reasoning about Evidence

taking h (ob i ) = f (ob i , h)/xi for each h  H yields an evidence space E such that f =
wE .
u
t
The following lemmas are useful to prove the completeness of the axiomatizations in
this paper. These results depend on the soundness of the axiomatization AX(h , o ).
Lemma A.1: AX(h , o ) is a sound axiomatization for the logic Lfo -ev (h , o ) with respect to evidential worlds.
Proof. It is easy to see that each axiom is valid in evidential worlds.

t
u

Lemma A.2: For all hypothesis formulas ,   h1      hk is provable in AX(h , o ),
when [[]] = {h1 , . . . , hk }.
Proof. Using Taut, we can show that  is provably equivalent to a formula 0 in disjunctive
normal form. Moreover, by axiom H2, we can assume without loss of generality that each
of the disjuncts in 0 consists of a single hypothesis. Thus,  is h1      hk . An easy
induction on structure shows that for an hypothesis formula  and evidential world w, we
have that w |=  iff w |= h for some h  [[]]. Moreover, it follows immediately from the
soundness of the axiomatization (Lemma A.1) that   h1  . . .  hk is provable iff for all
evidential worlds w, w |=  iff w |= hi for some i  {1, . . . , k}. Thus,   h1  . . .  hk is
provable iff [[]] = {h1 , . . . , hk }.
t
u
An easy consequence of Lemma A.2 is that 1 is provably equivalent to 2 if and only if
[[1 ]] = [[2 ]].
Lemma A.3: Let  be an hypothesis formula. The formulas
P
Pr(h) and
Pr() =
h[[]]

Pr0 () =

P

Pr0 (h)

h[[]]

are provable in AX(h , o ).
Proof. Let h = {h1 , . . . , hnh } and o = {ob 1 , . . . , ob no }. We prove the result for Pr.
We proceed by induction on the size of [[]]. For the base case, assume that |[[]]| = 0.
By Lemma A.2, this implies that  is provably equivalent to false. By Po4, Pr() =
Pr(false), and it is easy to check that Pr(false) = 0 is provable using Po1, Po3, and Po4,
thus Pr() = 0, as required. If |[[]]| = n + 1 > 0, then [[]] = {hi1 , . . . , hin+1 }, and by
Lemma A.2,  is provably equivalent to hi1      hin+1 . By Po4, Pr() = Pr(  hin+1 ) +
Pr(  hin+1 ). It is easy to check that   hin+1 is provably equivalent to hin+1 (using
H2), and similarly   hin+1 is provably equivalent to hi1      hin . Thus, Pr() =
     hin ]]| = n, by the induction
is provable. Since |[[hi1P
Pr(hin+1 ) + Pr(hi1      hin ) P
hypothesis, Pr(hi1   hin ) = h{hi ,...,hin } Pr(h) = h[[]]{hi } Pr(h). Thus, Pr() =
1
n+1
P
P
Pr(hin+1 ) + h[[]]{hi } Pr(h), that is, Pr() = h[[]] Pr(h), as required.
n+1

The same argument applies mutatis mutandis for Pr0 , using axioms Pr14 instead of
Po14.
u
t
25

fiHalpern & Pucella

Theorem 4.1: AX(h , o ) is a sound and complete axiomatization for the logic with respect to evidential worlds.
Proof. Soundness was established in Lemma A.1. To prove completeness, recall the following definitions. A formula  is consistent with the axiom system AX(h , o ) if  is
not provable from AX(h , o ). To prove completeness, it is sufficient to show that if  is
consistent, then it is satisfiable, that is, there exists an evidential world w and valuation v
such that (w, v) |= .
As in the body of the paper, let h = {h1 , . . . , hnh } and o = {ob 1 , . . . , ob no }. Let  be
a consistent formula. By way of contradiction, assume that  is unsatisfiable. We reduce
the formula  to an equivalent formula in the language of real closed fields. Let u1 , . . . , unh ,
v1 , . . . , vno , x1 , . . . , xnh , y1 , . . . , yno , and z11 , . . . , zn1 h , . . . , z1no , . . . , znnho be new variables, where,
intuitively,
 ui gets value 1 if hypothesis hi holds, 0 otherwise;
 vi gets value 1 if observation ob i holds, 0 otherwise;
 xi represents Pr0 (hi );
 yi represents Pr(hi );
 zi,j represents w(ob i , hj ).
Let v represent that list of new variables. Consider the following formulas. Let h be the
formula saying that exactly one hypothesis holds:
(u1 = 0  u1 = 1)      (unh = 0  unh = 1)  u1 +    + unh = 1.
Similarly, let o be the formula saying that exactly one observation holds:
(v1 = 0  v1 = 1)      (vno = 0  vnh = 1)  v1 +    + vnh = 1.
Let pr be the formula that expresses that Pr0 is a probability measure:
pr = x1  0      xnh  0  x1 +    + xnh = 1.
Similarly, let po be the formula that expresses that Pr is a probability measure:
po = y1  0      ynh  0  y1 +    + ynh = 1.
Finally, we need formulas saying that w is a weight of evidence function. The formula
w ,p simply says that w satisfies WF1, that is, it acts as a probability measure for a fixed
observation:
z1,1  0      z1,nh  0  zno ,1  0      zno ,nh  0
z1,1 +    + z1,nh = 1      zno ,1 +    + zno ,nh = 1.
The formula w ,f says that w satisfies WF2:
w1 , . . . , wno (w1 > 0      wno > 0  z1,1 w1 +    + zno ,1 wno = 1
    z1,nh w1 +    + zno ,nh wno = 1)
26

fiA Logic for Reasoning about Evidence

where w1 , . . . , wno are new variables.
Finally, the formula w ,up captures the fact that weights of evidence can be viewed as updating a prior probability into a posterior probability, via Dempsters Rule of Combination:
(v1 = 1  (x1 z1,1 = y1 x1 z1,1 +    + y1 xnh z1,nh 
    xnh z1,nh = ynh x1 z1,1 +    + ynh xnh z1,nh ))

(vno = 1  (x1 zno ,1 = y1 x1 zno ,1 +    + y1 xnh zno ,nh 
    xnh zno ,nh = ynh x1 zno ,1 + . . . ynh xnh zno ,nh )).
Let  be the formula in the language of real closed fields obtained from  by replacing
each occurrence of the primitive proposition
hi by ui = 1, each occurrencePof ob i by vi =
P
1, each occurrence of Pr0 () by hi [[]] xi , each occurrence of Pr() by hi [[]] yi , each
occurrence of w(ob i , hj ) by zi,j , and each occurrence of an integer coefficient k by 1 +    + 1
(k times). Finally, let 0 be the formula v(h  o  pr  po  w ,p  w ,f  w ,up  ).
It is easy to see that if  is unsatisfiable over evidential worlds, then 0 is false when
interpreted over the real numbers. Therefore, 0 must be a formula valid in real closed
fields, and hence an instance of RCF. Thus, 0 is provable. It is straightforward to show,
using Lemma A.3, that  itself is provable, contradicting the fact that  is consistent.
Thus,  must be satisfiable, establishing completeness.
t
u
As we mentioned at the beginning of Section 5, Lfo -ev is not monotone with respect to
validity: axiom H1 depends on the set of hypotheses and observations, and will in general
no longer be valid if the set is changed. The same is true for O1, E3, and E4. We do,
however, have a form of monotonicity with respect to satisfiability, as the following lemma
shows.
Lemma A.4: Given h and o , let  be a formula of Lfo -ev (h , o ), and let H  h
and O  o be the hypotheses and observations that occur in . If  is satisfiable in an
evidential world over h and o , then  is satisfiable in an evidential world over 0h and
0o , where |0h | = |H| + 1 and |0o | = |O| + 1.
Proof. We do this in two steps, to clarify the presentation. First, we show that we can
add a single hypothesis and observation to h and o and preserve satisfiability of . This
means that the second step below can assume that h 6= H and o 6= O. Assume that
 is satisfied in an evidential world w = (h, ob, , E) over h and o , so that there exists
v such that (w, v) |= . Let 0h = h  {h }, where h is a new hypothesis not in h ,
and let 0o = o  {ob  }, where ob  is a new observation not in o . Define the evidential
world w0 = (h, ob, 0 , E 0 ) over 0h and 0o , where E 0 and 0 are defined as follows. Define the
probability measure 0 by taking:
(
(h) if h  h
0
 (h) =
0
if h = h .

27

fiHalpern & Pucella

Similarly, define the evidence space E 0 = (0h , 0o , 0 ) derived from E = (h , o , ) by taking:


h (ob) if h  h and ob  o



0
if h  h and ob = ob 
0h (ob) =

0
if h = h and ob  o



1
if h = h and ob  ob  .
Thus, 0h extends the existing h by assigning a probability of 0 to the new observation ob  ;
in contrast, the new probability 0h assigns probability 1 to the new observation ob  . We
can check that (w0 , v) |= .
The second step is to collapse all the hypotheses and observations that do not appear
in  into one of the hypotheses that do not appear in H and O, which by the previous step
are guaranteed to exist. By the previous step, we can assume that h 6= H and o 6= O.
Assume  is satisfiable in an evidential world w = (h, ob, , E) over h and o , that is,
there exists v such that (w, v) |= . Pick an hypothesis and an observation from h and o
as follows, depending on the hypothesis h and observation ob in w. Let h be h if h 6 H,
otherwise, let h be an arbitrary element of h  H; let 0h = H  {h }. Similarly, let ob 
be ob if ob 6 O, otherwise, let ob  be an arbitrary element of o  O; let 0o = O  {ob  }.
Let w0 = (h, ob, 0 , E 0 ) be an evidential world over 0h and 0o obtained from w as follows.
Define the probability measure 0 by taking:
(
(h)
if h  H
0 (h) = P
0

h0 h H (h ) if h = h .
Define E 0 = (0h , 0o , 0 ) derived from E = (h , o , ) by taking:


if h  H and ob  O

h (ob)


P 0
0
h (ob )
if h  H and ob = ob 
0h (ob) = Pob o O

if h = h and ob  O

h0 h H h0 (ob)

P

P
0


h0 h H
ob 0 o O h0 (ob ) if h = h and ob = ob .
We can check by induction that (w0 , v) |= .

t
u

Theorem 5.1: There is a procedure that runs in space exponential in || kk for deciding,
given h and o , whether a formula  of Lfo -ev (h , o ) is satisfiable in an evidential world.
Proof. Let  be a formula of Lfo -ev (h , o ). By Lemma A.4,  is satisfiable if we can
construct a probability measure  on 0h = H  {h } (where H is the set of hypotheses
appearing in , and h 6 H) and probability measures h1 , . . . , hm on 0o = O  {ob  }
(where O is the set of observations appearing in  and ob  6 O) such that E = (0h , 0o , ),
w = (h, ob, , E) with (w, v) |=  for some h, ob, and v.
The aim now is to derive a formula 0 in the language of real closed fields that asserts
the existence of these probability measures. More precisely, we can adapt the construction
of the formula 0 from  in the proof of Theorem 4.1. The one change we need to make
is ensure that 0 is polynomial in the size of , which the construction in the proof of
28

fiA Logic for Reasoning about Evidence

Theorem 4.1 does not guarantee. The culprit is the fact that we encode integer constants k
as 1+  +1. It is straightforward to modify the construction so that we use a more efficient
representation of integer constants, namely, a binary representation. For example, we can
write 42 as 2(1 + 22 (1 + 22 )), which can be expressed in the language of real closed fields as
(1 + 1)(1 + (1 + 1)(1 + 1)(1 + (1 + 1)(1 + 1))). We can check that if k is a coefficient of length
k (when written in binary), it can be written as a term of length O(k) in the language of
real closed fields. Thus, we modify the construction of 0 in the proof of Theorem 4.1 so
that integer constants k are represented using the above binary encoding. It is easy to see
that |0 | is polynomial in || kk (since |0h | and |0o | are both polynomial in ||). We can
now use the exponential-space algorithm of Ben-Or, Kozen, and Reif (1986) on 0 : if 0 is
satisfiable, then we can construct the required probability measures, and  is satisfiable;
otherwise, no such probability measures exist, and  is unsatisfiable.
t
u
Theorem 5.2: There is a procedure that runs in space exponential in || kk for deciding
whether there exist sets of primitive propositions h and o such that   Lfo -ev (h , o )
and  is satisfiable in an evidential world.
Proof. Let h1 , . . . , hm be the hypotheses appearing in , and ob 1 , . . . , ob n be the hypotheses
appearing in . Let h = {h1 , . . . , hm , h } and o = {ob 1 , . . . , ob n , ob  }, where h and ob 
are an hypothesis and observation not appearing in . Clearly, |h | and |o | are polynomial
in ||. By Lemma A.4, if  is satisfiable in an evidential world, it is satisfiable in an evidential
world over h and o . By Theorem 5.1, we have an algorithm to determine if  is satisfied
in an evidential world over h and o that runs in space exponential in || kk.
t
u
Theorem 5.3: There is a procedure that runs in space polynomial in || kk for deciding,
given h and o , whether a formula  of Lev (h , o ) is satisfiable in an evidential world.
Proof. The proof of this result is very similar to that of Theorem 5.1. Let  be a formula
of Lev (h , o ). By Lemma A.4,  is satisfiable if there exists a probability measure  on
0h = H  {h } (where H is the set of hypotheses appearing in , and h 6 H), probability
measures h1 , . . . , hm on 0o = O  {ob  } (where O is the set of observations appearing in
 and ob  6 O), a hypothesis h, observation o, and valuation v such that (w, v) |= , where
w = (h, ob, , E) and E = (0h , 0o , ).
We derive a formula 0 in the language of real closed fields that asserts the existence
of these probability measures by adapting the construction of the formula 0 from  in
the proof of Theorem 4.1. As in the proof of Theorem 5.1, we need to make sure that 0
is polynomial in the size of , which the construction in the proof of Theorem 4.1 does
not guarantee. We modify the construction so that we use a more efficient representation
of integer constants, namely, a binary representation. For example, we can write 42 as
2(1 + 22 (1 + 22 )), which can be expressed in the language of real closed fields as (1 + 1)(1 +
(1 + 1)(1 + 1)(1 + (1 + 1)(1 + 1))). We can check that if k is a coefficient of length k
(when written in binary), it can be written as a term of length O(k) in the language of
real closed fields. We modify the construction of 0 in the proof of Theorem 4.1 so that
integer constants k are represented using this binary encoding. It is easy to see that |0 | is
polynomial in || kk (since |0h | and |0o | are both polynomial in ||). The key now is to
notice that the resulting formula 0 can be written as x1 . . . xn (00 ) for some quantifierfree formula 00 . In this form, we can apply the polynomial space algorithm of Canny (1988)
29

fiHalpern & Pucella

to 00 : if 00 is satisfiable, then we can construct the required probability measures, and 
is satisfiable; otherwise, no such probability measures exist, and  is unsatisfiable.
u
t
Theorem 5.4: There is a procedure that runs in space polynomial in || kk for deciding
whether there exists sets of primitive propositions h and o such that   Lev (h , o ) and
 is satisfiable in an evidential world.
Proof. Let h1 , . . . , hm be the hypotheses appearing in , and ob 1 , . . . , ob n be the hypotheses
appearing in . Let h = {h1 , . . . , hm , h } and o = {ob 1 , . . . , ob n , ob  }, where h and ob 
are an hypothesis and observation not appearing in . Clearly, |h | and |o | are polynomial
in ||. By Lemma A.4, if  is satisfiable in an evidential world, it is satisfiable in an evidential
world over h and o . By Theorem 5.3, we have an algorithm to determine if  is satisfied
in an evidential world over h and o that runs in space polynomial in || kk.
t
u
The proofs of Theorem 6.1 and 6.2 rely on the following small model result, a variation
on Lemma A.4.
Lemma A.5: Given h and o , let  be a formula of Lfo -ev (h , o ), and let H  h
and O  o be the hypotheses and observations that occur in . If  is satisfiable in an
evidential world over h and o , then  is satisfiable in an evidential world over 0h and
0o where |0h | = |H| + 1 and |0o | = |O| + 1, and where, for each h  0h and ob  0o , the
likelihood h (ob) is a rational number with size O(|| kk + || log(||)).
Proof. Let  be a formula satisfiable in an evidential world over h and o . By Lemma A.4,
 is satisfiable in an evidential world over 0h and 0o , where |0h | = |H|+1 and |0o | = |O|+1.
To force the likelihoods to be small, we adapt Theorem 2.6 in FHM, which says that
if a formula f in the FHM logic is satisfiable, it is satisfiable in a structure where the
probability assigned to each state of the structure is a rational number with size O(|f | kf k+
|f | log(|f |)). The formulas in Lw (0h , 0o ) are just formulas in the FHM logic. The result
adapts immediately, and yields the required bounds for the size of the likelihoods.
t
u
Theorem 6.1: The problem of deciding, given h and o , whether a formula  of Lw (h , o )
is satisfiable in an evidential world is NP-complete.
Proof. To establish the lower bound, observe that we can reduce propositional satisfiability
to satisfiability in Lw (h , o ). More precisely, let f be a propositional formula, where
p1 , . . . , pn are the primitive propositions appearing in f . Let o = {ob 1 , . . . , ob n , ob  } be
a set of observations, where observation ob i corresponds to the primitive proposition pi ,
and ob  is another (distinct) observation; let h be an arbitrary set of hypotheses, and let
h be an arbitrary hypothesis in h . Consider the formula f obtained by replacing every
occurrence of pi in f by w(ob i , h) > 0. It is straightforward to verify that f is satisfiable
if and only if f is satisfiable in Lw (h , o ). (We need the extra observation ob  to take
care of the case f is satisfiable in a a model where each of p1 , . . . , pn is false. In that case,
w(ob 1 , h) =    w(ob n , h) = 0, but we can take w(ob  , h) = 1.) This establishes the lower
bound,
The upper bound is straightforward. By Lemma A.5, an evidential world over h and
o can be guessed in time polynomial in |h | + |o | + || kk, since the prior probability
in the world requires assigning a value to |h | hypotheses, and the evidence space requires
30

fiA Logic for Reasoning about Evidence

|h | likelihood functions, each assigning a value to |o | observations, of size polynomial in
|| kk. We can verify that a world satisfies  in time polynomial in || kk + |h | + |h |.
This establishes that the problem is in NP.
t
u
Theorem 6.2: The problem of deciding, for a formula , whether there exists sets of
primitive propositions h and o such that   Lw (h , o ) and  is satisfiable in an
evidential world is NP-complete.
Proof. For the lower bound, we reduce from the decision problem of Lw (h , o ) over fixed
h and o . Let h = {h1 , . . . , hm } and o = {ob 1 , . . . , ob n }, and let  be a formula in
Lw (h , o ). We can check that  is satisfiable in evidential world over h and o if and
only if   (h1      hm )  (ob 1      ob n ) is satisfiable in an evidential world over arbitrary
0h and 0o . Thus, by Theorem 6.1, we get our lower bound.
For the upper bound, by Lemma A.5, if  is satisfiable, it is satisfiable in an evidential
world over h and o , where h = H  {h }, H consists of the hypotheses appearing in ,
o = O  {ob  }, O consists of the observations appearing in , and h and ob  are new
hypotheses and observations. Thus, |h |  || + 1, and |o |  || + 1. As in the proof of
Theorem 6.1, such a world can be guessed in time polynomial in || kk + |h | + |o |, and
therefore in time polynomial in || kk. We can verify that this world satisfies  in time
polynomial in || kk, establishing that the problem is in NP.
t
u
-ev
Theorem 7.1: AXdyn (h , o ) is a sound and complete axiomatization for Lfo
dyn (h , o )
with respect to evidential runs.
Proof. It is easy to see that each axiom is valid in evidential runs. To prove completeness, we
follow the same procedure as in the proof of Theorem 4.1, showing that if  is consistent,
then it is satisfiable, that is, there exists an evidential run r and valuation v such that
(r, m, v) |=  for some point (r, m) of r.
As in the body of the paper, let h = {h1 , . . . , hnh } and o = {ob 1 , . . . , ob no }. Let  be
a consistent formula. The first step of the process is to reduce the formula  to a canonical
form with respect to the  operator. Intuitively, we push down every occurrence of a  to
the polynomial inequality formulas present in the formula. It is easy to see that axioms and
inference rules T1T6 can be used to establish that  is provably equivalent to a formula
0 where every occurrence of  is in the form of subformulas n (ob) and n (p  c), where
p is a polynomial term that contains at least one occurrence of the Pr operator. We use the
notation n  for  . . . , the n-fold application of  to . We write 0  for . Let N
be the maximum coefficient of  in 0 .
By way of contradiction, assume that 0 (and hence ) is unsatisfiable. As in the proof
of Theorem 4.1, we reduce the formula 0 to an equivalent formula in the language of real
closed fields. Let u1 , . . . , unh , v10 , . . . , vn0 o , . . . , v1N , . . . , vnNo , y10 , . . . , yn0 o , . . . , y1N , . . . , ynNo , and
zhi1 ,...,ik i,1 , . . . , zhi1 ,...,ik i,nh (for every sequence hi1 , . . . , ik i) be new variables, where, intuitively,
 ui gets value 1 if hypothesis hi holds, 0 otherwise;
 vin gets value 1 if observation ob i holds at time n, 0 otherwise;
 yin represents Pr(hi ) at time n;
31

fiHalpern & Pucella

 zhi1 ,...,ik i,j represents w(hob i1 , . . . , ob ik i, hj ).
The main difference with the construction in the proof of Theorem 4.1 is that we have variables vin representing the observations at every time step n, rather than variables representing observations at the only time step, variables yin representing each hypothesis probability
at every time step, rather than variables representing prior and posterior probabilities, and
variables zhi1 ,...,ik i,j representing the weight of evidence of sequences of observations, rather
than variables representing the weight of evidence of single observations. Let v represent
that list of new variables. We consider the same formulas as in the proof of Theorem 4.1,
modified to account for the new variables, and the fact that we are reasoning over multiple
time steps. More specifically, the formula h is unchanged. Instead of o , we consider formulas 1o , . . . , N
o saying that exactly one observation holds at each time time step, where
no is given by:
(v1n = 0  v1n = 1)      (vnno = 0  vnnh = 1)  v1n +    + vnnh = 1.
Let 0o = 1o      N
o .
Similarly, instead of pr and po , we consider formulas 1p , . . . , N
p expressing that Pr is
a probability measure at each time step, where np is given by:
y1n  0      ynnh  0  y1n +    + ynnh = 1.
Let p = 1p      N
p .
Similarly, we consider w ,p and w ,f , except where we replace variables zi,j by zhii,j , to
reflect the fact that we now consider sequences of observations. The formula w ,up , capturing
the update of a prior probability into a posterior probability given by E5, is replaced by
the formulas 1w ,up , . . . , N
w ,up representing the update of the probability at each time step,
n
where w ,up is given by the obvious generalization of w ,up :
z1,nh 
(v1n = 1  (y1n1 z1,1 = y1n y1n1 z1,1 +    + y1n ynn1
h
n1
n1
n
z1,nh ))
    ynh z1,nh = ynh y1 z1,1 +    + ynnh ynn1
h

zno ,nh 
(vnno = 1  (y1n1 zno ,1 = y1n y1n1 zno ,1 +    + y1n ynn1
h
n y n1 z
n y n1 z
    ynn1
z
+
.
.
.
y
=
y
no ,nh
no ,1
no ,nh )).
nh 1
nh nh
h
Let 0w ,up = 1w ,up      N
w ,up .
Finally, we need a new formula w ,c capturing the relationship between the weight
of evidence of a sequence of observations, and the weight of evidence of the individual
observations, to capture axiom E6:
^
zhi1 i,h1    zhik i,h1 = zhi1 ,...,ik i,h1 zhi1 i,h1    zhik i,h1
1kN
+    + zhi1 ,...,ik i,h1 zhi1 i,hnh    zhik i,hnh 
1i1 ,...,ik no
^
 
zhi1 i,hnh    zhik i,hnh = zhi1 ,...,ik i,hnh zhi1 i,h1    zhik i,h1
1kN
+    + zhi1 ,...,ik i,hnh zhi1 i,hnh    zhik i,hnh .
1i1 ,...,ik no

32

fiA Logic for Reasoning about Evidence

Let  be the formula in the language of real closed fields obtained from  by replacing
each occurrence of the primitive proposition hi by ui = 1, each occurrence of n ob i by
vin = 1, and within
each polynomial inequality formula n (p  c), replacing each occurrence
P
of Pr() by hi [[]] yin , each occurrence of w(hob i1 , . . . , ob ik i, hj ) by zhi1 ,...,ik i,j , and each
occurrence of an integer coefficient k by 1 +    + 1 (k times). Finally, let 0 be the formula
v(h  0o  p  w ,p  w ,f  0w ,up  w ,c  ).
It is easy to see that if  is unsatisfiable over evidential systems, then 0 is false about
the real numbers. Therefore, 0 must be a formula valid in real closed fields, and hence an
instance of RCF. Thus, 0 is provable. It is straightforward to show, using the obvious
variant of Lemma A.3 that  itself is provable, contradicting the fact that  is consistent.
Thus,  must be satisfiable, establishing completeness.
t
u

References
Ben-Or, M., Kozen, D., & Reif, J. H. (1986). The complexity of elementary algebra and
geometry. Journal of Computer and System Sciences, 32 (1), 251264.
Canny, J. F. (1988). Some algebraic and geometric computations in PSPACE. In Proc. 20th
Annual ACM Symposium on the Theory of Computing (STOC88), pp. 460467.
Carnap, R. (1962). Logical Foundations of Probability (Second edition). University of
Chicago Press.
Casella, G., & Berger, R. L. (2001). Statistical Inference (Second edition). Duxbury.
Chan, H., & Darwiche, A. (2005). On the revision of probabilistic beliefs using uncertain
evidence. Artificial Intelligence, 163, 6790.
de Alfaro, L. (1998). Formal Verification of Probabilistic Systems. Ph.D. thesis, Stanford
University. Available as Technical Report STAN-CS-TR-98-1601.
Enderton, H. B. (1972). A Mathematical Introduction to Logic. Academic Press.
Fagin, R., & Halpern, J. Y. (1994). Reasoning about knowledge and probability. Journal
of the ACM, 41 (2), 340367.
Fagin, R., Halpern, J. Y., & Megiddo, N. (1990). A logic for reasoning about probabilities.
Information and Computation, 87 (1/2), 78128.
Fischer, M. J., & Zuck, L. D. (1988). Reasoning about uncertainty in fault-tolerant distributed systems. Technical report YALEU/DCS/TR643, Yale University.
Good, I. J. (1950). Probability and the Weighing of Evidence. Charles Griffin & Co. Ltd.
Good, I. J. (1960). Weights of evidence, corroboration, explanatory power, information
and the utility of experiments. Journal of the Royal Statistical Society, Series B, 22,
319331.
Halpern, J. Y., & Fagin, R. (1992). Two views of belief: belief as generalized probability
and belief as evidence. Artificial Intelligence, 54, 275317.
Halpern, J. Y., Moses, Y., & Tuttle, M. R. (1988). A knowledge-based analysis of zero
knowledge. In Proc. 20th Annual ACM Symposium on the Theory of Computing
(STOC88), pp. 132147.
33

fiHalpern & Pucella

Halpern, J. Y., & Pucella, R. (2003). A logic for reasoning about evidence. In Proc. 19th
Conference on Uncertainty in Artificial Intelligence (UAI03), pp. 297304.
Halpern, J. Y., & Pucella, R. (2005a). Evidence with uncertain likelihoods. In Proc. 21th
Conference on Uncertainty in Artificial Intelligence (UAI05), pp. 243250.
Halpern, J. Y., & Pucella, R. (2005b). Probabilistic algorithmic knowledge. Logical Methods
in Computer Science, 1 (3:1).
Halpern, J. Y., & Tuttle, M. R. (1993). Knowledge, probability, and adversaries. Journal
of the ACM, 40 (4), 917962.
He, J., Seidel, K., & McIver, A. (1997). Probabilistic models for the guarded command
language. Science of Computer Programming, 28 (23), 171192.
Jeffrey, R. C. (1992). Probability and the Art of Judgement. Cambridge University Press.
Kyburg, Jr., H. E. (1983). Recent work in inductive logic. In Machan, T., & Lucey, K.
(Eds.), Recent Work in Philosophy, pp. 87150. Rowman & Allanheld.
Milne, P. (1996). log[p(h|eb)/p(h|b)] is the one true measure of confirmation. Philosophy of
Science, 63, 2126.
Pearl, J. (1988). Probabilistic Reasoning in Intelligent Systems: Networks of Plausible Inference. Morgan Kaufmann.
Popper, K. R. (1959). The Logic of Scientific Discovery. Hutchinson.
Renegar, J. (1992). On the computational complexity and geometry of the first order theory
of the reals. Journal of Symbolic Computation, 13 (3), 255352.
Shafer, G. (1976). A Mathematical Theory of Evidence. Princeton University Press.
Shafer, G. (1982). Belief functions and parametric models (with commentary). Journal of
the Royal Statistical Society, Series B, 44, 322352.
Shoenfield, J. R. (1967). Mathematical Logic. Addison-Wesley, Reading, Mass.
Tarski, A. (1951). A Decision Method for Elementary Algebra and Geometry (2nd edition).
Univ. of California Press.
Vardi, M. Y. (1985). Automatic verification of probabilistic concurrent finite-state programs.
In Proc. 26th IEEE Symposium on the Foundations of Computer Science (FOCS85),
pp. 327338.
Walley, P. (1987). Belief function representations of statistical evidence. Annals of Statistics,
18 (4), 14391465.

34

fi