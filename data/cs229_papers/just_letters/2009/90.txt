estimating missing temporal attributes
in genealogical data
nam wook kim
stanford visualization group
stanford university
namwkim cs stanford edu
abstract

we present a machine learning approach for estimating
missing temporal attributes in genealogical data  genealogy analyses have been commonly focused on understanding generational relations  the importance of temporal
analyses has often been suppresed in genealogical research 
we have observed that temporal attributes of an individual 
birth  death  marriage and divorce dates  are frequently
missing in genealogical data  filling out those attributes
allows users to reconstruct temporal streams of their family
stories  which in turn make fruitful genealogy analyses
possible 
keywords  machine learning  visualization  genealogy 

missing data
introduction

genealogy is an incredibly popular activity pursued by
millions of people spanning from hobbyist genealogists to
professional genealogy researchers  genealogical research
involves understanding not only not only where and when
people lived  but also their life styles and biographies  in
addition  it often requires  or leads to  diverse knowledge of
religion histories  migration trends  political and historical
social conditions and genetics  complex nature of genealogy leveraging diverse fields lends itself to a challenging
problem as well as incredibly useful for enriching community 
correctly identifying individuals and their relationships
are the most important part of genealogical research  to
keep track of their findings  people often use typical genealogical graphs such as pedigree charts and descendent
charts  such existing graphs are limited in showing only
generational relations  we have previously developed a
new visualization for genealogical data  figure     it is
designed to reveal other useful aspects of the data with
focus on temporal information  it requires temporal attributes  birth  death  marriage and divorce dates  to be visualized  not only enabling efficient temporal analysis in family history  it also provides a way to identify nonhierarchical patterns such as divorce  re marriage and intermarriage 
a commonly faced problem in producing the visualization is that required temporal attributes are frequently missing  filling out missing attributes will allow users to reconstruct temporal streams of their family stories through visu 

figure    temporal visualization of genealogy 
converging and diverging lines indicate marriage
and divorce respectively  parent child relationship is
signified by a gray drop line

alizations  which in turn make fruitful genealogy analyses
possible 
in addition  missing temporal attributes are important in
larger genealogy context as well  for example  genealogists
often run into the ambiguity problem when identifying an
individual in ancestry  two possible sources for the ambiguity come from geographic location and temporal records 
if it were possible to estimate dates  genealogists would be
able to gain insight figuring out who is likely to be their
ancestors and their temporal relationships 
in this paper  we present a machine learning based approach for estimating missing temporal attributes in genealogical data  we have used freebase web service to extract
genealogical data  features are constructed based on evidences from non missing attributes  support vector regression is then used to estimate missing temporal attributes  at
final stage  estimated attributes are fed into the visualization system  the visualization put visual makers to indicate
the presence of estimated attributes  or missing attributes 
related work

many researchers in different fields such as statistics have
faced missing data problems  yumei at el     introduced a
support vector regression  svr  based approach to filling
in missing values  to do it  they set the decision attribute
 output attribute  as the condition attribute  input attribute 
and the condition attribute as the decision attribute  svm
regression is then executed to predict the condition attribute values  they compared results with different methods
not using machine learning techniques  including the mean
and median of all the values of the same class  they then
showed that svr approach outperformed than the others 

fifeng at el     also presented a svr based imputing method
utilizing orthogonal coding scheme to estimate missing
values for dna microarray gene expression data  a comparative study of their method with the previously developed methods such as k nearest neighbor and bayesian
principal component analysis impute method demonstrated
that the svr method has powerful estimation ability 
drizd at el     addressed importance of properly handling
missing and uncertain data in visualizations  they observed
that missing data sometimes causes misinterpretation  with
between subject graph interpretation study  they concluded
that correctly identifying missing data and indicating the
presence of them are necessary 

table   a subset of features for each attribute is
shown  for example  for birth date  we can further
use attributes  other than the ones given  such as
siblings death dates or parents divorce date and so
on and so forth 

there are a number of constraints in relationships between different attributes  for example  childs birth date
cannot be after mothers death or parents marriage date
cannot be after childs birth unless its the child out of
wedlock  another extreme case is fathers birth date is after
childs birth date  in our system  however  we do not en 

methods

in this section  we describe overall procedure of our system  we do this by dividing the system into five different
stages  data extraction  feature set construction  support
vector regression  data estimation and visualization 
data extraction

we build a web interface that extracts genealogical data
from freebase web service  figure     a user can specify
four parameters  filename  start date  end date and maximum size  person entries whose lifespans are within the
bound  from the start date to the end date are extracted up
to the specified maximum size  to avoid script time limit 
multiple queries are sent to freebase in sequence and then
results are concatenated into a single array 
feature set construction

to construct feature sets  we make use of strong relations
among temporal attributes  in other words  each attribute
plays a pivotal role in estimating another attribute  for example  marriage dates can be inferred from birth dates of
children and vice versa  we summarized how we use relevant information contained in other attributes to create features  table    
attribute

relevant information

birth date

siblings birth date  parents
marriage date  spouses
birth date  childs birth
date   

death date

siblings death date  parents
marriage
date 
spouses death date

marriage date

birth date  death date  oldest
childs birth date  spouses
birth and death dates

divorce date

birth date  death date 
youngest childs birth date 
spouses birth and death
dates 

figure    web interface for genealogy data extraction

force these constraints 
once feature attributes of individuals are extracted  we
normalize attributes with respect to a reference date  for
example  let say we have a feature tuple  siblings birth
date  sbb   parents marriage date  pm   spouses birth
date  spb   childs birth date  cb  and we normalize it
with respect to parents marriage date  it then becomes
 sbb pm  spb pm  cb pm   every example in the feature set is normalized in such way  accordingly  the normalization process reduces the dimension of the feature set
by one  a primary reason for this normalization is that
range of dates can be very large possibly spanning from      to       this requires huge amount of data for training sets 
there are two problems when constructing a feature set 
missing features and outliers  it is observed that features
are frequently missing either because of the incompleteness
or nonexistence  i e  missing records for siblings or nonexistence of siblings   for either case  we use the mean of
existing values to fill in the missing feature value  if the
reference date is missing  we simply discard the example 
the missing feature problem occurs again at the data estimation stage  which in turn requires constructing more than
one feature set for each attribute with different reference
dates  in addition  after constructing the normalized feature set  we detect and remove outliers  for example  it
may not make sense that difference between childs birth

fifigure    the percent of the total variability explained by each principal component  the left figure
is for f  and the right figure is for f  

after the parameter w is learned using the support vector
regression  we now estimate person as birth date in real
time  if a has no parents marriage date available  we cannot proceed 

figure    the above is a boxplot of the feature set
normalized with respect to siblings birth date  f  
and the below is the same with parents marriage
date  f   

date and parents marriage is greater than     years  so we
remove the example  aside from the aforementioned problems  if there are more than one sibling  we use the mean of
siblings birth dates  we do same thing for similar attributes such as spouses birth dates  in case multiple spouses
exist 
support vector regression

after the feature set is constructed  we divide it into training set and test set      and       we then use epsilonsupport vector regression to learn parameters from the
training set 
l
 
 
w   c   i   i   
 
i   
yi    w  xi   b     i
subject to   w  xi    b  yi     i 

minimize

i   i    
we used fixed value     for epsilon and did    fold crossvalidation test on the training set to determine the regularization parameter c 
data estimation

at this stage  we run into the same missing feature problem presented at the feature set construction stage  we
briefly describe how this problem enforces construction of
feature sets using different reference dates  lets assume
that we are estimating missing birth dates and have a normalized feature set with respect to parents marriage date 

if a has siblings birth date and the feature set was normalized with respect to it  we could perform the estimation
of as birth date  this informs us that we need to learn
more than one parameter w from feature sets that are normalized with respect to different reference dates 
visualization

estimated attributes are then used to generate a temporal
visualization of genealogical data  we place visual markers
to indicate the presence of missing attributes 
results and discussion

in this section  we present results on estimating birth
dates  estimating other attributes will be similarly done  to
measure the performance  we use the normalized root mean
square error  nrmse  defined as follows 

nrmse  

mean   yguess  yanswer      
variance yanswer  

among endless possibility of features  we narrowed it
down to five features  siblings birth dates  spouses birth
dates  parents marriage date  childrens birth dates and
marriage date  because of frequent missing feature problem  we hypothesized that having less number of features
would lessen the problem  we then constructed two feature
sets with two reference dates  parents marriage date and
siblings birth dates  we call f  and f  respectively   before running the support vector regression  we have done
data analysis on the feature sets  figure   shows box blot of
normalized features  both feature sets seem to follow similar distributions  we then tried principal component analysis  figure     they also show similar patterns  that is  the
first two principal components cover more than     of
variances and the first component has positive coefficients
for all features  although we end up using all the given
features  we could reduce the dimension of the feature sets
by two  considering the missing feature problem  we be 

fifigure    the percent of the total variability explained by each principal component  the left figure
is for f  and the right figure is for f  

lieve that further reducing features but maintain accuracy
of estimation will be crucial in estimating temporal attributes in genealogical data 
with    fold cross validation  we choose the regularization parameters c   for both feature sets  we then  run
support vector regression on training sets of different size
 figure     we observed that  with more training examples 
the performance increase  for the largest training set  we
got nrmses of        and        for the feature sets with
different reference dates respectively 
we have also done feature ranking using fishers criterion
and forward search to select the best subset of features  as
nothing interesting found  we do not describe them in this
paper  we have also done data estimation on real time data
and have visualized charles darwins genealogy and elizabeth ii of united kingdoms genealogy  figure   

figure    the above is a family tree of elizabeth ii
of united kingdom and the below is a family tree of
charles darwin 
conclusion

we have presented a machine learning based system for
estimating missing temporal attributes in genealogical data
and its visualization  the overall procedure is summarized
as follows  first  it extracts genealogical data from freebase  online database service  second  it constructs feature
sets with data cleaning  it then uses the support vector regression to learn to estimate missing attributes  estimated
attributes are then used to generate visualization 
there are several natural avenues for future work  first 
one might extend the system so that users can author  or
supply  training data through visualization on the fly  second  not only placing a visual maker for estimated attribute 
one might visualize uncertainty of estimation  lastly  we
mentioned biological constraints in feature set construction
section  e g  parents marriage date vs childs birth date 
one might enforce such constraints to improve accuracy 

fimissing data has been always a problem in visualization
field  in fact  most current visualization system will crash
with missing data  we believe that our system will provide
a guide to visualization researchers on using machine
learning techniques to handle missing information 

   yi cao  kim leng poh   an accurate and robust missing value estimation for microarray data  least absolute deviation imputation   icmla  pp          fifth international conference on machine learning and applications  icmla           

references

   oba s  sato ma  takemasa i  et al  a bayesian missing
value estimation method for gene expression profile
data  bioinformatics                  

   honghai  f  guoshun  c  cheng  y  bingru  y  yumei 
c        a svm regression based approach to filling
in missing values  springer          
   xian wang  ao li  zhaohui jiang and huanqing feng 
      missing value estimation for dna microarray
gene expression data by support vector regression imputation and orthogonal coding scheme  bmc bioinformatics       
   cyntrica eaton   catherine plaisant   terence drizd 
visualizing missing data  classification and empirical
study  proceedings of interact       springer 

   alex j  smola   bernhard schlkopf   bernhard sch
olkopf  a tutorial on support vector regression  statistics and computing      
   cherkassky v  ma y  practical selection of svm parameters and noise estimation for svm regression 
      pubmed         

fi