hotel recommendation based on hybrid model
jing wang  jiajun sun  zhendong lin
abstract  this project develops a hybrid model that combines content based with collaborative filtering  cf 
for hotel recommendation  this model considers both hotel popularity in input destination and users preference 
it produces the prediction with       accuracy on test data    improvement on purely content based model 
addtionally  three issues are well resolved when implementing cf  sparsity in utility matrix  cold start  and
scalability 
keywords  collaborative filtering  content based  svd  hierarchical clustering  decision tree 

i  introduction

tem  hybrid model compensates the shortcomings
in two models by combining these two models sucthe goal of the project is to develop a hybrid cessfully  at the same time  it introduces new
model for better hotel recommendation  at this methods 
moment  the majority of the recommendation systems are content based models  which only consider a  content based model
the searching paramaters input by customers but
not the users preference  for instance  expedia content based filtering is a common approach in
focuses on the searching criterion and recommends recommendation system  the features of the items
the top popular local hotels  personalizing the user previously rated by users and the best matching
search by their preference is a burning need for bet  ones are recommended  in our case  the local popter hotel recommendation  collaborative filtering ularity of the hotel clusters based on ratings by
is considered as the starting point of this project  it users is used to be the main feature in the contenthas been widely used in recommendation systems based model  more details will be explained later 
but rarely in hotel recommendation 
there are three main shortcomings of this
nevertheless  there are still related works  ryosuke approach     
saga  et al     created a preference transition based
network system to recommend hotels  by tran       it is limited by the number and the types
versing user booking history  a transition network of features associated with the objects for recomof user preference is constructed to do recommen  mendation 
dation  but the network is too specific to accept
new users and detect the further changes of old      it may involve the issue of over specialization
customers  xiong yu ning et al     came up with a as no inherent method is included for finding somepersonalized intelligent hotel recommendation sys  thing unexpected 
tem for online reservation  this research firstly extracts hotel characteristic factors  attempts to an       it may not predict precisely for new users 
alyze customers browsing and purchasing behaviors usually  a content based recommendation system
and secondly constructs a personalized online hotel need enough ratings to provide accurate recommarketing recommendation system polymerization mendations 
model for multi level customers  they combined
user item sytem and achieved positive outcomes  in our project  we used content based filtering as a
but it does not expand for new users 
reference for result comparison 
in this project  hybrid model is applied to com  b  collaborative filtering
bine user preference and item properties  based
on the final comparison of accuracy  the model the philosophy of collaborative filtering is to idenachieves good results  more details are as follows  tify similar users and give recommendation based
on the preference of similar user  but collaboraii  methodology
tive filtering have the following issues  first of
all  user behavior are chaotic  such as the gray
in this part  three models will be introduced  sheep problem  the gray sheep refers to the users
content based model and collaborative filtering whose preference do not consistently agree or disare traditional methods in recommendation sys  agree with any group and itself  in our dataset
 

fiof the next experiment  we find some users choose
different hotel cluster every time  this makes collaborative filtering extremely ineffective on those
gray sheep users  secondly  collaborative filtering assumes that users make decisions purely due
to their preference  however  we find their choices
are highly correlated with hotel destination  a
destination sometimes only have certain types of
hotel  and a certain type of hotel is very famous
or popular in that destination  thus  the users
choices will be significantly limited by destination
or influenced by destination  besides the chaotic
user behavior and hotel destination influence  collaborative filtering have utility matrix sparsity and
data scalability issue that we will address them in
detail in next hybrid model section 

cluster 
 
mi k
  mi k 

k
x

mi k

k

where  i represents user cluster  k represents hotel
cluster and k is the total number of hotel cluster 
mi k means the rating of user cluster i on hotel
 
cluster k and mi k
is the normalised rating  m represents it in the rest of paper   cosine distance is
written as follow 
pk
ak bk
cosine similarity   qp k   pp
k
n
 
 
k   ak
k   bk
where ak and bk is the ratings on hotel cluster
k by user cluster a  b  respectively and k is the
total number of hotel cluster 

c  hybrid model
svd  singular value decomposition  method
the goal of hybrid model is to resolve two big
problems  first of all  we need to work out three
big issues of cf mentioned in part b  on the other
hand  we would like to combine users preference
and popularity of hotels to recommend 

after clustering the users based on their preference in utility matrix  the utility matrix might still
be super sparse because it is also rare to a cluster
of users to rate most of the hotel  we would like to
find a method to fill the unrated entries in utility
matrix by smallest error  here svd is applied to
do that 

utility matrix
the utility matrix gives each user item pair  a value
represents the degree of preference of that user for
that item  in the later experiments  we will use
user id representing user  and hotel cluster representing item  when a hotel cluster is viewed by a
user  rating of   is given  when a hotel is booked 
rating of   is given 

svd seeks a low rank matrix x   u v t   where
u  rn c and v  rkc  n is the total number
of distinct customers  k is the number of distinct
items and c is the dimension factor   that minimizes the sum squared distance to the fully obseved
target matrix m  here is clustered utility matrix 
with the dimension rn k   matrices u and v are
initialized with small random values sampled from
hierarchical clustering
a zero mean normal distribution with standard dein terms of scalability problem  hierarchical clus  viation       we minimized the following objective
   
tering is applied to cluster the large number of function  
x
users into different clusters  most of the users have
 mik  vkt ui         vk         ui      
little booking history  less than   booking history 
 i k 
in the data  this leads to a very sparse utility
matrix  also  the number of user in the data is where  is the regularization parameter in order to
massive  which makes it impossible to implement avoid overfitting  to solve this objective  we can
matrix factorization on the original utility matrix  use stochastic gradient descent  sgd   after taktherefore  users are classified into user cluster and ing derivatives of the objective with respect to u
utility matrix is compressed based on that  the and v   and the following is the update rules 
hierarchical clustering method builds a hierarchy
ui    ui     mik  vkt ui  vk  ui  
of clusters  by moving up this hierarchy  similar
pairs of clusters are merged as a cluster  to be
vk    vk     mik  uit vk  ui  vk  
more specific  cosine distance is applied to measure
similarity between users  normally  cosine distance where  is the learning rate parameter 
requires data normalisation  the original rating
is substracted by the average rating of that user after estimating u and v by iterating over the
known  i  k  pairs in the data  user is recommendation for product k can be estimate by computing
 

fiui vkt  
from the previous procedures  a clustered svdutitlity matrix m is attained  we created a new
matrix r with the dimension n  k by m and d 
in order to resolve the cold start problem  on  that is 
 i 
 j 
tology model is introduced  the ontology decision
rik   mk  dk
   
model is making up by user ontology characwhere i is customer id  j is destination id  k is
teristics and results of sub comities  which are
hotel cluster id  n is the total number of users
regarded as attributes and classes  respectively 
that have booking histories 
the ontology theory demonstrates that users profile determines the users behavior  to some extent 
m reflects the user preference  and d represents the
generally speaking  we explore the users profile
popularity of hotel in local destination  matrix r
data  such as age  gender  occupation  class  loconnects two attributes  the other benefit is for a
cation and so forth  to predict the users behavior 
single users perspective  by clustering customers 
that is to say  if the users have similar or same probooking histories from several users are combined
file information  we think they have same or similar
together  but for a single user  he or she might not
preference so that they might do the same behavior 
go to the hotel with the high rating of that cluster 
which produces a great error if recommending the
decision tree is to predict the cluster label of a new
top hotel by purely clustered utitliy matrix  it is
user by inputting the users profile data  decision
about     accuracy in the later experiment  furtree is a high level overview of all the sample data 
thermore  the top cluster recommended by utility
which not only can accurately identify all categories
matrix might not in that destination input by the
of the sample  but also can effectively identify the
customer  which also leads to big bias  however  in
class of the new customer  in order to avoid overfitthe end  matrix r can get better tradeoff 
ting  cross validation method is adopted to obtain
the best decision tree  a procedure to do that in
all the process is shown in the flow chart in fig    
hotel recommendation is in fig    
decision tree classifier

figure    decision tree classifier
combination
the second problem we would like to resolve is
combining the user preference with the item properties  take the hotel recommendation as an example  set a evaluation metric  if the hotel was
booked  it is rated as   points  if it is just clicked 
it gets   point  otherwise  it is unrated  based on
booking history we have  a ranking matrix in terms
of hotel properties  i e  destination  can be created
by average all ratings based on counts of booking
or clicking  shown as follows 


d   d      d k
 d   d      d k



d   
 
 
 
  
  
   
   

dj  dj     djk
jk

figure    hybrid model flow chart
iii  experimental results
in order to test the validation of hybrid model 
datasets from random       customers on expedia
are accepted to do experiments  the dataset is
shown in tab   
table    dataset head

when applying hierarchical  in order to control
whether two clusters should be merged or not  a

where j is the total number of hotel destinations 
k is the total number of hotel type or hotel cluster 
 

fidistance threshold should be specified  here we set
the threshold based on fig    it is found that after
      the number of hotel cluster starts to converge 
therefore  we set threshold        resulting    
user cluster  after clustering utility matrix  svd
is applied on the clustered utility matrix  fig  
shows how stochastic gradient descent converges 
however  it is found that svd does not converge figure    clustered utility matrix  left  and utility
on dimension  fig   shows the rmse linearly matrix after svd
decreases with a increase of dimension  number of
based on data we have  user country  region  city 
eigenvalue  
is mobile and is package  the users booked the hotel with a flight  are regarded as the features of user
profiles in this case  but we would like to detect
if all these attributes show obvious users preference 
from the fig    it is easy to see that users in
different cities are inclined to choose the range of
small hotel cluster id  which means it has obvious
relation with users preference  it is same with the
attribute that the user used mobiles to book or not
because the figures show the same distribution 
nevertheless  country  region and package factors
show the different density for users in different
factor values  for example  package users prefer to
choose hotel cluster id     while not package users
would like to book id    hotel cluster 

figure    cosine threshold

hybrid model results in prediction with      
accuracy on testing data    improvement on
content base model  this result is consistent with
our hypothesis  both user preference and hotel
popularity are vital in recommendation system  in
kaggle  the benchmark content based model  data
leak method  has       accuracy 

figure    svd converge

table    accuracy comparison
accuracy
train
test

hybrid model
      
      

content based
      
      

iv  future work
our hybrid model can be further improved in
these two aspects 

figure    svd rank and rmse

   larger dataset will be applied in this model so
density based clutesring method should be used
instead of hierarchical clustering 

it is also found that utility matrix become significantly less sparse after applying svd  the left figure of fig   is the utility matrix after clustering
users  while the right one is the svd utility matrix  it can be found that  after applying svd 
utility matrix become less sparse 

   more features such as hotel country and hotel
market might be included to test their impacts in
prediction 

 

fi a  density of users country

 b  density of users region

 c  density of users city

 d  density of mobile users

 e  density of not mobile users

 f  density of package users

 g  density of not package users

figure    user profile detection  package user is the user booked the hotel with the flight 
v  reference

mender systems  state of the art and trends  springer
science business media      

    saga r  hayashi y  tsuji h  hotel recommender system based on users preference transition c   systems 
man and cybernetics        smc       ieee international conference on  ieee                  

    salakhutdinov r  mnih a  hinton g  restricted boltzmann machines for collaborative filtering c   proceedings of the   th international conference on machine learning  acm                

    yuning x  li xiao g  personalized intelligent hotel recommendation system for online reservation
a perspective of product and user characteristics c   management and service science  mass  
     international conference on  ieee            

    meng c  cheng y  jiechao c  et al  a method to
solve cold start problem in recommendation system
based on social network sub community and ontology decision model c    rd international conference
on multimedia technology  icmt      atlantis press 
     

    lops p  and gemmis m   content based recom 

 

fi