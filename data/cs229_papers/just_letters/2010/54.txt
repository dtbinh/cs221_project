the fundamentals of a
text based soccer simulator
sergei chevtsov  chevtsov stanford edu 
december         

introduction
since the      fifa world cup  it s been our goal
to develop a realistic as well as entertaining
soccer simulator  our demo     generates goals
from a probability distribution that is based on
the elo ratings of national teams     
encouragingly  the results of this simple engine
don t deviate far from what actually happened in
the tournament 
this paper proposes a path to a much more
sophisticated simulator that can achieve a level of
entertainment similar to those of real soccer
matches  with several years of experience in
following soccer games online  e g  through
yahoo  live commentary      we decided to base
this new soccer simulator on the existing textual
descriptions of historic matches 

for the training set  we randomly chose      
comments that we manually classified into   
categories  socceractions   injury  yellow card 
added time  goal  goal kick  free kick  offside  red
card  pass  kick off  substitute  game break  shot
 on goal   clearance  corner kick  disallowed goal 
own goal  foul  penalty goal  penalty miss  throw
in  penalty awarded  and other  e g 
observations about the weather  
in addition  we cleaned tokens by removing
punctuation marks from every comment  all in all 
our global vocabulary consisted of       tokens 

learning the hypothesis
data representation

mining data
we wrote a python script and downloaded      
comments from all    games of the fifa world
cup          

our features were tokens from the vocabulary  we
converted each comment into a binary vector of
      elements  where the i th element was    if
the i th token was present in the comment  and  
otherwise  our target variable was an integer
between   and    

balancing the dataset
the number of socceractions in our original
training set ranged from    the number of
disallowed goals  to      the number of other
actions   we decided to simply copy the sets of
comments from each category until each category
had roughly the same number of comments and
ended up with     to     comments per category 
illustration    yahoo  world cup      coverage

fifeature selection

in addition  we implemented a   fold cross
validation on equally and randomly sliced subsets
of the training data  we executed the algorithm
for random training sets of                  
            and       i e  all  elements 

illustration    feature selection via mi
in order to prevent overfitting and to speed up the
gradient descent  we decided to calculate the
mutual information  mi  between the values of
every feature and the target variable  empirically 
we chose to keep only those features that had mi
        removing features with higher mis as
well as keeping features with lower mis resulted
in higher test errors 
this process left us with just     tokens  among
the removed tokens were the obviously useless
a and the  

learning algorithm
initially  we coded up    nave bayes classifiers
for each socceraction  but the training error
stayed above      eventually  we decided to use
the
logistic
regression
for
multi class
classification  aka the softmax regression   we
decided to stop the gradient descent  if the
training error stabilized and or fell below    

illustration    training  below  and test errors
then we plotted the average training error  blue 
and the average test error  red  against the size of
each training set  m  
finally  we trained a     by    matrix  theta 
using the entire training set and obtained the
following training errors per category 
category
injury

 

yellow card

 

added time

 

goal

 

goal kick

 

free kick

    

offside

 

red card

 

pass
kick off
substitute
game break
illustration    softmax regression

training error  in   

     
 
    
 

shot

     

clearance

     

ficorner kick

 

disallowed goal

 

own goal

 

foul

 

penalty goal

 

penalty miss

 

throw in

 

penalty awarded

 

other

    

the overall training error was       

proof of concept
we used the obtained theta to classify each of the
      comments from every world cup game via
the softmax function  then for each game  we
counted every occurred socceraction and put the
results into a    element vector  here a red flag
came up  because unfortunately  we were not able
to classify goal  the most important
socceraction  correctly  counting much fewer
goals     than were actually scored in the
tournament        nevertheless  we believed that
we were at least somewhat on the right track and
decided to use the principal component analysis
to plot each game vector in  d to possibly gain
some insights 

as seen below  pca was able to separate most
games of the eventual world champion spain
 red points  from other games in the tournament
 blue points   indeed    of spain s   games ended
with a score          which many observers
attributed to the unusually destructive strategies
of their tactically inferior opponents     
therefore  we have a reason to believe that our
approach has some potential after all 

discussion
so where did we go wrong 
in retrospect we probably were not correct to
apply the logistic regression to classes that are
subsets of each other  e g  a goal is also a shot   a
better approach would be to create a top down
decision tree of several softmax classifiers  in
fact  we already identified the   most general
classes for the initial softmax regression  foul 
shot  pass  substitute  and other 
moreover  we should balance the training dataset
with an algorithm that is better grounded in
statistical theory  e g  bootstrapping  

future research
once we have a reliable classifier for soccer
comments  we will model each soccer game as a
markov decision process  socceractions will
obviously form the set of actions  our states will
likely have three parameters  the win probability
of each team as well as an indicator of who has
the ball  we will derive the initial state from the
elo ratings  
furthermore  we believe that we can estimate the
probability of a team that commits a
socceraction keeping the ball as well as the
transition probabilities between the states from
the hundreds of thousands of comments that were
created during actual soccer games 
finally  we would like to develop an algorithm
that adapts a comment from a real game to a
simulated situation in a virtual soccer match 
you are most welcome to follow our progress on
scikick com 

illustration    principal component analysis
 lighter dots   spain s games 

fihttp   uk eurosport yahoo com football worldcup netherlands spain        html

references

    wikipedia      fifa world cup
http   en wikipedia org wiki      fifa world cup

    fifa world cup simulator http   www scikick com 
    world football elo ratings http   www eloratings net 

    wikipedia tiki taka http   en wikipedia org wiki tikitaka

    yahoo  sport world cup     

 and  of course  prof  ng s lecture notes 

fi