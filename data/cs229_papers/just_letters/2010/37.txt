musicalpitchidentification
manojdeshpande

introduction
musicalpitchidentificationisthefundamentalproblemthatservesasabuildingblockformanymusic
applicationssuchasmusictranscription musicaccompaniment querybyhumming instrumentidentification 
sourceseparation etc thereisaneedforrobustandaccuratetechniquesforpitchidentification 
pitchdetectionisanimportantandactiveresearchtopicwithdeephistory theresearchcommunityhaspursued
severaltechniquesforfundamentalfrequencyestimation inspiteofsuccessofdomainspecificestimation
techniques nosinglegeneralpurposetechniqueexistthatworkswellformusicparticularlyinpresenceof
multiplefundamentalfrequenciessuchasinpolyphonicinput unpitchedaudiosourcessuchaspercussion
instruments andnoise 
forcs   classproject iemployedthemachinelearningtechniqueslearnedintheclassformusicalpitch
determination myinterestisguitar andiaimedtoapplywhatilearnedintheclasstoguitar inmyapproach i
leveragedgeneralmachinelearningtechniquestobuildpitchclassifierwithoutrelyingonanyexplicitdomain
knowledgebasedonthemusicalstructure inthisreport idescribemyuseofnavebayes logisticregression 
andsupportvectormachinevariants ialsoexperimentedwithadditionaltechniquessuchasmultilayer
perceptron radialbasisfunctionnetworkusingkmeans etc  however findingsfromtheseadditional
techniquesarenotdescribedinthereportduetospacelimitation 

trainingsetpreparation
asabuddingguitarist ifancyuseofmachinelearningtechniquestodevelopacomprehensiveguitarlearning
system suchasystemcanlistentoandunderstandaplayerplayingascaleorpracticingascore this
understandingcanbeusedtotrackstudentsprogress lendadvice andaccompanyauser 
theguitarpitchdetectionisthefirstbuildingblockofsuchasystem andtheguitarpitchformsthetargetvariable
orclassvariableofthemachinelearningsystem 

targetvariable
themusicalpitchconsistsofmixoffundamentalfrequencyanditsharmonics thefundamentalfrequency hz
     theresultingpitchvaluescreatealinearspace
relatestomusicalpitchpbyequation
      log
withasemitoneofsize andanoctaveofsize   therangefrom
 to
   formsthemidituning
standard pitchdetectiontothisgranularityisagreatcapability however idiscoveredthatmanymachine
learningalgorithmsfaceperformancechallengeinlarge   waysclassification tomitigatethischallenge i
limitedmyclassificationtopitchclassspaceratherthanthepitchspace incontrastto   elementpitchspace 
thepitchclassspaceisa  elementcircularquotientspacethatgroupspitchoctavestogetherformingthe
following  chromas 
c

c  db

d

d  eb

e

f

f  gb

g

g  ab

a

a  bb b

 

 

 

 

 

 

 

 

 

 

  

  

pitchidentificationwithinachromaisnotaseverelimitationforguitarlearningsystemasthestudentisawareof
his herpositionofplayingontheguitarfretboardandwillaccordinglyinterpretanyfeedbackfromthesystem 

fitrainingdata
fortheendgoalofbuildingaguitarlearningsystem iselected  guitarinstrumentalmusictrackswithmedium
difficultysuchasthoseintheguitartrainingmethodstextbooks thesetracksincludealeadguitarmelody
accompaniedbyguitarchordsforpopulartunessuchasjinglebells yankeedoodle thestarspangledbanner 
etc isampledthetracksat khztogeneratemonophonicwavencodedfiles 
followingtheadvicefromtheclassinthelearningtheorylecture forsupervisedlearningalgorithmsthenumber
oftrainingexamplesneededtolearnwellisusuallyroughlylinearinthenumberofparameters basedonthis
adviceandliteraturesurvey iaimedfortrainingsetwith       trainingexamples 
iusedwavesurfer anopensourcetool toestimatefundamentalfrequencyforeach  millisecondframein  
hzto    hzrange therationalforselectionoftheseparametersisexplainedinthefeaturevariablessection
below subsetofwavesurferoutputwasmanuallycheckedagainstthemusicalscoresoftheselectedsongsfor
correctness theerroneoussamplescorrespondingtotheunidentifiedpitchwereeliminatedfromthetraining
set thissetupresultedin       frameswithchromalabels 
thedistributionofthetrainingdataisshownbelowinfigure thebeginningandintermediateguitarsongsare
oftenplayedeitherinthekeyofcmajororaminorandavoidtheuseofaccidentals however aguitarstudentin
hispracticemayoftenmakeamistakeandplayaccidentals thestudentmayalsopracticemusicscalesinkeys
otherthancmajororaminor forthisreason itwasimportanttogeneratetrainingdatawithenough
representationofaccidentals toremedy iimplementedaphasevocoderinmatlabthatshiftedthepitchofeach
  millisecondframeover             semitones thephasevocoderimplementationensuredthatpitchshifting
didnotintroduceanydiscontinuitiesandartifactsintheresampledsong thecorrespondinglabelswerealso
shiftedtogeneratetrainingdataappropriately thedistributionofthesecondtrainingdatasetwith       
samplesisalsoshownbelowinfigure 


figure trainingdatadistribution

asanalternativetoresampling theaboveproblemcanbesolvedbydesigningcostmatrixwithappropriate
misclassificationcost 

featurevariables
ireviewedseveraltimedomainandfrequencydomainaudiosignalprocessingtechniquesforselectionof
appropriatefeaturevariablesforthepitchidentificationproblem thetimedomaintechniquesincludedzero
crossingrate autocorrelation andyinmetricswhereasthefrequencydomaintechniquesincludedtheshort

fitermfouriertransform stft  spectrogram andcepstrummetricsasfeaturevariables aftersome
experimentationandliteratureresearch ifocusedontheuseofspectrogrammetricsasfeaturevariable 
asexplainedearlier isampledtheguitarmusictracksat khzinthemonophonicwavformat andiresampled
toshiftpitchtocoverthepitchclassscaleuniformly withthesewavdatasetasinput iusedmatlabtocalculate
a    pointspectrogramwith    sampledurationslidinghanningwindowand  pointoverlap the  point
overlapat khzsamplingfrequencycorrespondsto  milliseconds aguitarstudentmaynotexceedfasttempo
of   beatsperminute atthattempowith   timesignature      notesaresustainedfor   milliseconds 
   millisecondwindowswith  millisecondoverlapprovideampleopportunitytocaptureguitaroutputwith
sufficientfidelity 
theguitarpitchismainlydeterminedbyfundamentalfrequency andtheguitarproducesfundamental
frequenciesintherangefrom  hzto    hz assuch ilimitthespectrogramcontentto khzcorrespondingto
first   bins inaddition toaccountfortimbresvariationacrossguitarsandadditionalcontext inormalizedthe
contentofthefirst   frequencybinsbysubtractingthemeananddividingbythestandarddeviation the
normalizedmagnitudesofthefirst   frequencybinsarethe   featurevariables 

algorithmsselectionandexperiments
followingthedeterminationoffeaturevariablesandgenerationoftrainingdata iresearchedpossiblesupervised
andunsupervisedlearningalgorithmsformusicalpitchdetectionandshortlistednavebayes logisticregression 
multilayerperceptron andsupportvectormachinetechniques aftersomeinitialimplementationefforts i
discoveredwekamachinelearningtoolkitanduseditforexperimentationwiththeselectedmachinelearning
techniques alltheexperimentationbelowused foldcrossvalidationforperformanceanalysis 

navebayes
ifirstselectednavebayesalgorithmduetoitssimplicity anditsfastexecutionhelpedmerunmanyquick
experimentsanddevelopbetterunderstandingofthedata iplottheperformancecurvesbelowfortheoriginal
datasetandtheresampleddataset theresampleddatasetexhibitsmarginallybetterlearningthantheoriginal
datasetwhileplateauingat    accuracy resampleddatasetrepresentseachchromamoreorlessuniformly 
however theoriginaldatasetisbynomeansuniform tounderstandindividualchromaclassificationbetter iplot
therocandprecallcharacteristicsforresampleddatasetandchroma  c andchroma  c  oftheoriginal
dataset 


figure naivebayesperformance

fiwithitslargerrepresentationintheoriginaldataset chroma exhibitsbetterrocandprecallcharacteristics
comparedtothoseoftheresampleddataset however theperformancecharacteristicsforlessrepresented
chroma intheoriginaldatasetaresignificantlyimpairedcomparedtothatoftheresampleddataset similar
observationsweremadeforotherlearningalgorithmsaswell forreasonsnotedearlier aguitarlearningsystem
mayrequireuniformperformanceacrossallchroma andlearningfromtheresampleddatasetispreferredto
learningfromtheoriginaldataset assuch theremaininglearningalgorithmsarecomparedusingtheresampled
datasetbaseline 
navebayesassumesthatthefeaturevariablesdescribingthe   frequencybincontentsofthespectrogramare
conditionallyindependentofeachothergiventhechroma thisindependentassumptionisclearlynottrue 
additionally theimplementationofnavebayesassumesthatconditionaldistributionofthefrequencybin
contentisnormallydistributedandestimatesthedistributionparametersusingthetrainingdata boththese
assumptionslikelylimittheperformanceofthenavebayestoatmost   accuracy 

logisticregression
thelogisticregressionalgorithminwekaisamultinomiallogisticregressionmodelwitharidgeestimatorthat
stabilizesdegeneratecasesandguardsagainstoverfittingtheparametermatrix
 theprobabilitythatthe
 
 to  isgivenbytheprobability
   lengthfeaturevector correspondstochroma
 



 thecorrespondingvalueforc   isobtainedbynormalization theparametermatrix

isestimatedbymaximizingthemultinomialloglikelihoodfunctionusingquasinewtonmethod logistic

regressionperformanceiscomparedwithnavebayesperformancebelow 


figure logisticregressionandnaivebayesperformance

withoutanydependenceandnormalityassumptions logisticregressionachievestheaccuracyof     andits
rocandprecallperformancewelldominatesthatofnavebayes 

supportvectormachines
followingtheuseofnavebayesandlogisticregression iusedthesupportvectormachinewithsequential
minimaloptimizationimplementationinweka iselectedthelinearkernelthattakesmajorityvotefromthe
outputofallpairs
    discriminantfunctions 

fi
figure svm logisticregression andnaivebayesperformance

svmnotonlyexhibitshigheraccuracythanbothlogisticregressionandnavebayesbutalsoachievesthis
accuracyonasmallertrainingset however forafulltrainingsetof  ksamples logisticregressionhasslightly
betterrocandprecallcharacteristics svmdeterminesthemaximalmarginhyperplaneseparatingthetraining
set apparently     ktrainingexamplesareenoughforthesvmtodiscoverthesupportvectorsdefiningthe
nearoptimalseparatinghyperplane theadditionaltrainingexamplesdonotaffectthehyperplaneorientation
significantly ontheotherhand logisticregressiondeterminestheparametersbymaximizingloglikelihood and
additionaltrainingsetexampleshelpitimprovetheprobabilityestimatesfurther thisbetterprobabilityestimate
alsohelpslogisticregressiontoimprovethequalityofitsdecisionasdepictedbyrocandprecallcharacteristics
albeitatsignificantlyhighertrainingsetsize theabilityofsvmtotraincomparablyatmuchsmallertrainingsetis
asignificantadvantageduetoslowerexecutionofwekatoolkitimplementedinjava  

epilogue
cs   projectofferedmeanexcellentopportunitytounderstandmachinelearningalgorithmsbyexperimenting
withthem inaddition igainedvaluableknowledgeregardingmusic signalprocessing andtoolsofthetrade i
aimtocontinuetinkeringwithuseofmachinelearningfordevelopingguitarlearningapplicationandiappreciate
anyfeedbackyoumayhaveonimprovingmyunderstanding 
thankyou 

references 
   g poliner d ellis a ehmann e gmez s streich b ong       melodytranscriptionfrommusic
audio approachesandevaluation ieeetr audio speech lang proc  vol   no   pp          may
      
   d ellisandg poliner       classificationbasedmelodytranscription machinelearning special
issueonmachinelearninginandformusic vol    no    pp        dec     
   andrewng adviceforapplyingmachinelearning
   wekadataminingjavasoftware
   additionalreferencesnotlistedduetospacelimitationandareavailableonrequest


 

inspiteofseveralattemptstospeedupwekabyparallelizingandcompilingweka iwasnotabletoimplementsvmwith
radialbasefunctionkernelwithfulltrainingsetduetoexecutionandmemorysizeconstraints  however with  ksized
trainingset rbfsvmdidnotshowsignificantimprovementoverlinearsvmpotentiallyindicatingfeaturesetsaturation 

fi