modeling activity patterns
nipun dave  aditya gudipati  shantanu kurhekar
cs      fall       stanford university
abstract   this paper describes a simple model based on
supervised learning that can learn an individuals activity
pattern with the data acquired through their cell phones 
this model can thereafter be used to predict an individuals
location after a transition and the time of the transition  we
also present two supervised learning models that can
accurately predict if a strong friendship exists between two
individuals or not 
index terms  activity profiling  activity modeling  location
prediction  relationship prediction 
i  introduction
over the past few years  cell phones have become a necessity
that people always carry on person  cell phones have a wide
variety of sensors that can gather information about the
individuals social context  including location with respect to
time  other individuals in proximity and interactions like calls
and text messages exchanged  this data can be used to learn and
predict an individuals future activity  specifically  in terms of
location and time  it can also be used to infer strengths of social
relationships between individual users  these predictions enable
better targeted advertising  personalization of smart phone
applications and more efficient allocation of infrastructure 
among other purposes 
the reality mining group at mit  in collaboration with
nokia  carried out a project to study complex interactions within
social groups in              the original reality mining
experiment was one of the largest mobile phone projects
attempted which leveraged the increasingly widespread use of
mobile phones to provide insight into dynamics of individual as
well as group behavior  more specifically  the research at mit
addressed questions related to evolution of social networks over
time  predictability of user activity  flow of information and
inferring topology of a social network from proximity data 
nathan eagle and alex pentland employed pca to identify
the individuals principal behaviors in terms of their location as
a function of time  called as eigenbehaviors  these locations
were described with   different labels  namely  home 
elsewhere  work  no signal and off      the individuals
behavior during the first half on the day is projected on these
eigenbehaviors to obtain their weights  which is then used to
predict their behavior for the rest of the day  the eigenbehaviors
for the individuals are also used to cluster them and thereby
infer their community affiliations  k  laasonen et al present an
adaptive framework  implementable on a phone  for identifying
locations and routes important to an individual from cellular
network data      this framework uses adaptive weighting of
locations based on the number of times the individual goes there
and also the time since the last visit  thereafter  the important

route is determined by sorting the locations in terms of their
weights in a descending order  a more detailed description of
the related work can be found in     
our project presents a model to predict an individuals future
location at a much finer level  this model predicts the
transitions  rather than the actual locations at each instant of
time  we also present two models that determine if two
individuals are close friends  we use the data made public by
mit reality mining project for building and evaluating our
model      this dataset contains logs gathered for    individuals
at mit over the course of the academic year of september     
  june       these individuals were sloan business school
students  media lab incoming students  media lab senior
students or mit staff  overall  this data represents over        
hours of continuous data on human behavior  more specifically 
it contains information about passive behavior such as location
 from cell tower ids   other proximate individuals  from
bluetooth device discovery scans   and active behavior such as
phone activity  including voice calls and text messages  active
applications  such as the calendar or games   and the phones
charging status  it also had self reported relational data for each
individual  where they reported their proximity to  and
friendship with  others 
section   gives a description of the different models
employed predicting an individuals location after a transition
and the time of transition  section   presents the models for
capturing the factors in a relationship and thereafter predicting if
a particular relationship is close friendship or not  an evaluation
of these models is given in section    section   presents our
conclusions 
ii  location prediction
most individuals have a well defined routine in terms of their
daily activities and social context of these activities  which
includes time  location and their companions  this regularity is
definitely not a trait exclusive to the subjects considered for the
study  typically  a weekday comprises leaving home in the
morning  traveling to work  breaking for lunch  and returning
home in the evening  these daily routines are also coupled with
routines across other temporal scales  such as going out with
friends on weekends  or spending time with family during the
holidays 
by capturing knowledge about an individuals past activities
and the context into an appropriate model  their future activity
can be predicted  given the current context  there are two
equivalent ways of modeling this system   based on the
individuals transitions or based on their actual location versus
time  we focus on the former wherein we predict the
individuals transitions  specifically  this includes predicting

fiwhen the transition will occur and where the individual would
be after the transition 
in the data  the location is determined in terms of the cell
tower ids  each handoff from one cell to another is logged with
the transition time and the tower id of the new cell  the cells
are then grouped together into areas and are assigned an area id 
we focus on predicting the location at the level of these areas 
rather than individual cells  we are not assuming any
restrictions on the memory or computational complexity
presently 
a  feature selection
the future location of an individual typically depends on the
following factors 
   current location  an individual can move to only
one of the neighboring areas from the current
location 
   day of the week  depending on the day of the
week  an individual might or might not visit a
particular area 
   time of the day  the time of the day determines
if the individual is more likely to be at home  work
or traveling 
while there are many more parameters that have an impact on
an individuals future location  we consider only these three for
the sake of simplicity 
the individuals visited     different areas over a span of  
months  taking into account the fact that  most of the transitions
from a particular area are into the same area or one of the
adjacent areas  the number of nonzero transition probabilities
become significantly smaller  we determined the set of areas
adjacent to an area for all the     areas through the transitions
logged across all users  thereafter  the transition probabilities
from one area were learned only for a transition to the same area
or one of these neighboring areas 
b  supervised learning models
for the listed set of parameters  we tested a supervised learning
algorithm  nave bayes  to obtain results for accuracy of
prediction  these parameters are certainly not independent of
each other  we evaluated this model over different sets of
independency assumptions to determine the one which gave the
best performance  the baseline for performance was established
with the random guessing model 
   random guessing
the probability of being in a location is learned using the data
logs for each individual  this distribution was learned for each
individual  the future location for the individual was thereafter
guessed by sampling from this distribution  this very
rudimentary model does not incorporate any additional
knowledge we have about the system  hence  it was used to
establish a baseline for measuring the performance of other
more complex prediction models 
   nave bayes
a nave bayes classifier assumes that the value of a particular
parameter is independent of the value of any other parameters 
even if they could be dependent on each other or upon the

existence of other parameters  the primary advantage of this
classifier is that it simplifies the classification problem by
making strong assumptions and requires a small amount of
training data to estimate the classification parameters 
the current location parameter models the probability of
transitioning from the current area id to a particular location 
current location parameter ensures that the predicted future area
is adjacent to the current area 
the day of the week parameter models the probability of
transition to a particular location on the current day of the week 
for eg   this parameter would incorporate the fact that people
are less likely to go to their offices on weekends 
the entire day was broken into    slots of one hour each  the
time of the day parameter models the probability of transition to
a particular location at the current time slot  for eg   this
parameter would incorporate the fact that people are more likely
to stay in their homes at night 
c  transition prediction
as mentioned previously  we predict when the user makes the
next transition and where the individual would be after the
transition 
   time of transition prediction
the duration between successive transitions can vary from less
than a minute to more than a day  typically  the former case is
observed when the individual is traveling through a particular
area and the latter case is seen when the individual stays at a
particular location for a long time  we want to model the order
of magnitude of time spent before the next transition  rather than
the exact time spent  hence  we considered different
discretizations of the duration between successive transitions
and compared accuracy of the models obtained from each
method  these boundaries were empirically chosen  one such
discretization is given below 
   between   and   minutes
   between   and    minutes
   between    and    minutes
   between    and    minutes
   between   and   hours
   more than   hours
the training data was used to train a model based on naive
bayes to predict the next transition time and this model was
applied on the test set to find the training error over all
individuals  the parameters used for training are their previous
time of transition and their current location  the model had an
accuracy of         this may be an indicator that the time slots
chosen are inappropriate as it may to be fairly easy to classify
transition times in terms of these time slots  so  we changed the
discretization boundaries and compared the results  the new
discretization considered is given below  this is considered to
be more meaningful for the applications we envision 
  
  
  
  
  
  

between   and   minute
between   and   minutes
between   and    minutes
between    and    minutes
between    and    minutes
more than    minutes

fithe accuracy with this model was         much lower than
that for the previous case  the fact that the accuracy goes down
can be countered by training the model on more data 
it is clear from this experiment that the accuracy of the model
depends on the discretization chosen and hence  the degree of
accuracy desired by the application can be a crucial parameter in
deciding the discretization boundaries  a better method of
choosing the distribution of duration between successive
transitions can be a part of the future work for this project  the
experiment was repeated by adding the previous location too as
a parameter  in this case  the accuracy improved by only      
which is not significant  this also confirms our initial
assumption that the markov property applies to the parameters
used for modeling the predictor 
   location prediction
given the fact that a cell to cell transition occurred recently and
given the information about the current location  current time
and the day  we predict the future location of the user after the
next transition  as mentioned before  the random guess was
used as the baseline for the performance of our models  the
nave bayes model was implemented with different sets of
parameters and different independence assumptions  these are
given in table   along with the accuracy 
iii  social relationship prediction
broadly  the ways of communication between two individuals
includes talking face to face  talking and texting over the phone
or messaging through various online media  the strength of a
relationship between them has a significant impact on these
interactions  the stronger a relationship  the more frequent and
longer are these interactions  we focus on learning a model that
captures the differences in these communications with a close
friend versus that with others  thereafter  this model can be
used to estimate the strength of relationships  primarily if two
individuals are close friends or not 
in the dataset  information about proximity between
individuals was captured through bluetooth  the devices visible
to a phone were logged periodically  every   minutes   the
interactions over the phone in the form of voice calls and text
are also logged  however  the interactions over online media are
not available  while the available data does not sufficiently span
the different kinds of relationships and their manifestation in the
communication  we believe that the patterns learned are
sufficiently representative of the group of individuals for which
the data was gathered 
triangle closure is a dominant mechanism for edge formation
in social networks      this has been shown to be true for
formation of connections in sites like linkedin  flickr etc 
however  these connections might not always correspond to a
close relationship  to ensure a simple model  we assume that
the labels of the relationships are independent of others  we
implemented two algorithms  nave bayes and svm for
labeling a particular relationship  we considered the   features
given below in our models 
   mean call duration
   standard deviation of call duration
   number of calls

   mean duration of proximity
   standard deviation of proximity
   number of times proximate to each other
   listed as a contact in the phone book 
these parameters were extracted from the bluetooth logs of
each individual  we also observed that the data contained some
asymmetry  in some cases the durations for which two people
were together as recorded by their phones were significantly
different  we believe this can be attributed to temporal
staggering of the logs and occasional low reception power at
one of the phones resulting in missing the transmitters
presence 
a  logistic classifier
with only two possible labels for a relationship  we model the
conditional distribution of the label given the values of
parameters as a binomial distribution  hence  the hypothesis
function
is the logistic function
  the
parameter is of size
where is the number of features
chosen  it was learned using batch gradient ascent rule with
learning rate
 
b  svm
we used the svm toolbox completely implemented in matlab
     we evaluated the performance of svm with   different
kernel functions  gaussian radial basis function  rbf  and the
linear kernel  since we have a small number of features  we
expect
the
svm
with
gaussian
kernel
  which map the data to a
higher dimensional space to be able to label the relationships
more accurately  there are two parameters which impact the
performance of an svm with a gaussian rbf  namely  c and  
c is l  regularization parameter  as mentioned in      we
performed a grid search over the values of c and to determine
the values resulting in the best performance  the performance
was measured as the fraction of the true positives identified by
the svm  this is based on the fact that any application utilizing
such a system would be expected to identify most of the close
friends even if there are few false positives 
iv  results
a  future transition prediction
we have considered the accuracy to be the fraction of
predictions which are correct  the accuracy averaged over all   
individuals is used as the metric for evaluating the performance
of the models  the models are learned using     of the log data
for each individual and then tested over the remaining      the
predictions of time until transition and the location after
transition are done independently of each other  we are not
imposing a time limit on the validity of the prediction of the
next location  however  doing this could potentially improve the
performance of the models even further 
future location prediction model
random prediction
nb prediction given current location
nb prediction given
current location   day of week

accuracy
   
   
   

finb prediction given
current location   time of day
nb prediction given
current location  day of week   current time
nb prediction given
 current location  day of week 
nb prediction given
 current location  day of week    time of day

   
   
   
   

table    prediction of future location after transition

the accuracy we obtained for models with different
independence assumptions are given in table    we obtained a
    improvement in performance on an average when we had
knowledge about the individuals current location  however 
relative to this model  we observed a slight deterioration in
performance when we included our knowledge about additional
temporal parameters such as the current time of the day and the
day of the week  the sparsity of the data also contributes to the
increase in error to some extent  this decrease in accuracy is
also because of the fact that we train over the first     of the
data set     months  and then test over the remaining        
months   however  the weekly routines of individuals might
change over a span of   months and hence predictions based on
the day of the week might be erroneous  to capture these
changes in weekly routines  the training and testing data should
be done differently  for example  the training could be done
over   weeks and tested in the fourth week 
some individuals have a fairly consistent weekly routine
whereas some do not  the ones with steady routines stayed in
the same location for a longer duration  for these individuals 
we saw that the naive bayes model performed much better 
future transition time prediction model
nb prediction given current location   prev 
transition time
nb prediction given current   previous location

accuracy
      
      

table    prediction of future transition time

b  relationship prediction
the data had overall      labeled relationships  out of these 
only     were labeled as close friends  considered as a
positive   we observed that this labeling was not symmetric  if
one individual called another as a close friend  the reverse was
not always true  to ensure that the our model does not get too
biased by either label  our training set had    data points of
close friends and    data points of not close friends  the models
were tested over    data points of positive labels and     data
points with negative labels  the accuracy obtained with both
models is given in table   
relationship
prediction
model
logistic
classifier
svm  gaussian
kernel 

false
pos 

false
neg 

true
pos 

true
neg 

accuracy

   

 

  

   

   

   

  

  

   

   

table    prediction of future transition time

logistic classifier had many more false positives than svm
while svm correctly labeled most true negatives  however 
logistic classifier identified the positive scenarios much more
accurately than did svm  based on the weights assigned to the
different parameters  it was seen that the higher the average
duration of call and of proximity and the lower their standard
deviations  the higher was the likelihood of the relationship
being a close friendship  svm with a linear kernel was not able
to separate the points  which implies that the data is not linearly
separable  hence  we did not perform any further evaluation
with a linear kernel 
on increasing the number of data points with negative labels 
both methods accurately labeled a smaller number of positives
and a larger number of negatives  the training set was chosen to
ensure that the positive labels were also classified accurately 
the performance of the algorithms  in terms of the ability to
accurately identify the data points with positive labels  can be
improved further with more data points having positive labels 
v  conclusion
in conclusion  we note that the daily routines of different
individuals can be learned using simple supervised learning
algorithms and these models can then be used to predict their
locations across time  these predictions can be further improved
by incorporating additional factors such as the current mode of
transportation of the individual  other individuals in their
proximity  information about their schedule  etc  it is also
possible to predict the location at a finer level  i e  individual
cells  by first predicting the area and then predicting the most
likely cell within the area  an alternative technique is to
incorporate metadata about each location into the model and
learn their transitions  this metadata should capture the users
activity in that location  for example  it could include the fact
that the location is a theater or an office or a train station 
we also showed that it is possible to use information about
the communication and proximity between two individuals 
which can be acquired using a phone  to predict the strength of
the relationship between them  in this case  it is seen that the
models are quite accurate after training with a training set
having a small number of labeled relationships  the svm
performs well in terms of identifying the negative cases whereas
the logistic classifier performs better in identifying strong
friendships  these predictions can be enhanced further by
exploiting the fact that many friendships are formed by the
triangle closure mechanism 
vi  references
    n  eagle  a  pentland  and d  lazer         inferring
social network structure using mobile phone data 
proceedings of the national academy of sciences
 pnas           pp             
    n  eagle and a  pentland          eigenbehaviors 
identifying structure in routine   behavioral ecology and
sociobiology                 
    k  laasonen  m  raento  h  toivonen  adaptive ondevice location recognition  proceedings for pervasive 
springer verlag  pp               

fi    j  leskovec  l  backstrom  r  kumar and a  tomkins 
microscopic evolution of social networks  kdd    las
vegas  usa 
    s  canu and y  grandvalet and v  guigue and a 
rakotomamonjy  svm and kernel methods matlab toolbox 
perception systmes et information  insa de rouen  rouen 
france       
    c  hsu  c  chang  and c  lin  a practical guide to support
vector classification technical report department of
computer science and information engineering  national
taiwan university       

fi