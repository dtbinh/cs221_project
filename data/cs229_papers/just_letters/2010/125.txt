hearst challenge   a framework to learn magazine sales volume
reza omrani

 

introduction

 a  number of households
 b  number of individuals older than   

this project is based on a        competition by
the hearst magazines posted on www kdnuggets com
  the goal of this project is to predict the sales of
   different magazine titles published by the hearst
magazines at each newsstand location across united
states  to optimize the overall contribution of the
newsstand locations  to predict the magazines sales
volume  hearst magazines has provided a database
of the sales of    different magazines for almost
      newsstands across the us for the period of
            the data set includes          training
examples  in addition they have provided different
statistical demographical information from the different sources  we need to find a learning algorithm
which can use these information to learn the pattern
of each titles sales based on newsstand statistical demographic and time frame 
there are   different category of information provided by the hearst magazines as follows 

 c  number of households with different type
of occupations 
professional technical 
sales service  farm related  blue collar 
other  retired  unknown
 d  number of households with each educational level  high school diploma  some college  bachelor degree  graduate degree  less
than high school diploma  unable to determine education
 e  individuals age distribution                                                             
                                
 f  gender distribution  male  femal  unknown
 g  marital status distribution  married  single  other  including divorced and widowed 
 h  household distribution  head of household 
spouse  young adult  elderly individual

   store chain table   this table has the information of the       training newsstands 
each stores information includes two category
of data  some descriptive information about the
stores plus the demographic of the neighborhood
stand is located in  the store description data
includes 

 i  income distribution      k    k   k 
  k   k    k   k    k   k    k   k     k    k     k    k     k   k     k    k     k    k       k 
unknown
 j  home ownership distribution 
renter  unknown

owner 

 a  chain key  unique identifier denoting a
particular chain  each chain has numerous
stores under it 

 k  residence type distribution  single family  multi family  multi family or marginal 
post office box indication

 b  store key  unique identifier denoting a store

 l  length of residence distribution  in years  
                           

 c  city

 m  number of units at address distribution  in
units                                         
     

 d  zip code          zip code
 e  state
 f  store type 
booksto  c store 
club st  college  departm 
discoun  drug  enterta  home
   liquor  mass me  militar 
newssta  office   other  sports 
superce  superma  termina

 n  median house value distribution       k 
   k    k     k    k     k    k 
   k  m      m   unknown
 o  some extra summarized area level statistics  a h
 p  vehicle distribution in         zip code 
number of vehicles  number of households
with a vehicle  number of households without a vehicle  number of new cars  number

demographic information includes average statistical information of the   digit zip code area
in which the store is located 
 

fi 

of new light trucks  number of used cars 
number of used light trucks  average msrp
for vehicle  average current vehicle retail
value

data processing

all the simulations for this project are done  using
r programming language  as described above the
data sets are too big  and they are not clean  there
are many missing and repeated data   that is why we
are using some preprocessing to reformat data sets to
more useful forms  first of all  the sales data is broken to    different files for each title  the next step is
to combine issue table and sales table  as we wish to
have monthly prediction of sales while not all of the
titles are monthly periodicals one of them is weekly 
one is bi weekly  and one is bi monthly   furthermore we dont have the sales information of each title
for all data points  and that makes the problem even
more complicated  as for some time intervals we have
much larger training sets compared to other time intervals  and our algorithm should take that into the
consideration too 
we choose a random issue of title    and extract
all the sales data corresponding to the issue  then
we link every sales point for the given issue with the
stores information  looking at sales histogram  the
sales volume beyond    issue is very sporadic  and
including these points just biases our estimation  that
is why  we get rid of the sales     data in following 

   zip   table  includes the same statistical data
as above for every   digit         zip code in us 
   sales table  includes the sales data of various
newsstands declared with store key  for a given
issue of a magazine title 
   issue table  gives price  on sale date  and off sale
date for every issue in the sales table 
   wholesaler table  gives wholesaler geographical
information for each newssatand wholesaler 
furthermore a blind test data of size       is provided  once your algorithm works good enough you
can run the test data and predict the sales of some
different newsstand and submit it to the competition
to get their feedback on your predictions 
now lets look at the problem more carefully  as
it is observed  there are too many parameters in the
model  and we dont have enough training data  already a huge training set  to use all of them  in addition  many of these parameters are highly correlated
and using them may not be useful  that is why we
need to apply some feature extraction method to data
to focus on the useful data  furthermore we need to
come up with a good model which works good both
on trainig data and test data  finally we should consider the time variations  as we have training points
for different points of the time  one idea may be
to use separate model for each time of interest    
months  
once we learned the sales volume for the training
examples  for any given new store  with given descriptive data  the demographic data can be extracted
from zip   data  once we have all the parameter
about the store we can feed it to our model and get
an estmate on sales volume 
in following  we focus on learning the sales of one
title  say title   for a given period  once we have
estimated the sales of one title  the same process can
be repeated for all the other titles  furthermore  as
mentioned above  we can repeat the same procedure
for any given period  once we are done with modeling
one titles sales for a given period  we will repeat
the same procedure with several other title period
combination to make sure our algoithm is working
satisfactorily  in follwoing we investigate these issues
in more detail 

 

linear model

after all we get to the actual modelling  as a first
step  lets try to fit a linear model based on the statistical demographics of the newsstands for thr specific
title for a random time interval 
to do this the training data is randomly assigned to
    training and     cross validation portions  and
we used r to fit a linear model to the training portion 
to fit the model  we need to get rid of some correlated
numbers  since the summation of numbers in each
category adds up to either number of households  or
number of individuals  we need to get rid of one of the
subcategories in each group  otherwise they wont be
independent and a linear model cant be fit   after
doing these modifications  we fit a full model to the
training data and use a backward elimination using
p value of each variable to reduce the model  the
backward elimination continues untill the p value of
all the variables in the model are smaller than      all
the parameters are significant   repeating this for
various time intervals gave almost uniform results in
terms of number of variables in the model and the
major variables in the model 
the initial full model starts with    parameters
with residual standard error equal to       and the
final reduced model has    parameters with standard
error equal to       the derived model parameters
show some nice positive and negative correlation be 

fihaviors of sales with different parameters  although
it should be noticed that this is newsstand sales and
doesnt include subscription to magazines through
mail and internet 
but how good is this model  the mean of sales for
this data is      and the standard deviation of sales
is        so our model is barely doing better than
the average estimator  lets see why is that  we
know that  the main assumption of linear regression
is that the residuals should be samples of a normal
distribution  but if we look at the plot of the residuals for all training examples in figure    we see that
the distribution of residuals doesnt look like to be
samples of a normal distribution  and they are asymmetric around zero  if the residuals were samples of
a normal distribution  then the q q plot of studentized residual vs  standard normal which depicted in
figure   should be a straigh line  but it can be seen
that it is far from a straigh line  and it has curvature
in middle  which is not common 

ues are ess than    but the ta s not decreas ng
fast enough and st more than    of sa es va ues
are above    for a norma d str but on we expect ess
than       probab ty at     so the near mode
behav or s governed by the sma sa es va ues but
we have enough arge sa es va ues wh ch ncrease the
standard dev at on and make the res dua s asymmetrc

 

categorical linear model

  

 








 









 






 














 








    

 





 
 























  









 



 





 











   
















  







 

  

 
  

 











  
 


  



 























 







 
 






 


 










 










   











 



   




 
 





   











 







  













 

 
 

 






   

 



























 




















 





 







 
 

 







 





  
 




 

 







  


















































 




 






 




  



















 

 



    



















 








 

 













 








  



 















 









































 
















































































 


  





 

 

 



 












  

























 









 



  


 
  













  



 























 






















  










 




















 




 


















    



































 











 




  
 









  






































 











 


  

 




  





















   















 

















  




 







 

 































 



































   
































 
















































 
   










 










































































 
















































































































































 

































 


























 





 






















 

 


































 










































































































 

   

























 


















































































































 





  






































 
































































































































































 

 

















































 







 




































 
















































































































































 
































































































 













































































 












 























































































































































































 





























































































































































































 







 


















































































































































































































































  






















































































































































































 


























 
























































































































































































































 






































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































 



































































































































































































































































































































































































































































































































































































































































































































 


























































































































































































































































































































































































































































































































































































































































































































































































































































 













































































































































































































































































































































































































































































































































































































































































































































































































































































































 



















































































































 













































































































































































































































































































































































































































  








 


  







 

























































 






























































































































  






































  


















 
















   











































































 






 







   

 


















 

 







   












   










  





















 






   









r

  

  

 

residuals

  

  

  

the above observat on eads to a mode wh ch uses
d fferent mode s for d fferent port ons of sa es data
let s assuume that we have a gen e that te s us the
n ghborhood of sa es va ues say f sa es      or not
let s see how nformat ve that nformat on s let s
treat th s gen e nformat on as a categor ca parameter and fit a mode to sa es us ng the parameters from
the ast part p us th s gen e nformat on
the n t a fu mode starts w th    parameters
model residuals
w th res dua standard error equa to     and the fina reduced mode has    parameters w th standard
error equa to     and obv ous y the sma est p va ue
corresponds to the gen e nformat on so the gen e
nformat on reduces standard error to a most ha f
essent a y the same mode w th two d fferent constant ntercept for tra n ng examp es w th sa es    
and sa es      mproved mode a ot
obv ous y the next step s to go to more gen e
nformat on say sa es        sa es     and     
sa es     the n t a fu mode starts w th   
parameters w th res dua standard error equa to    
and the fina reduced mode has    parameters w th
 
    
     
     
     
     
standard error equa to    
index
q q p o o s ud n
d r du
p ots nt the f gure   show the res dua p ots for
the above ment oned gen e mode s as t can be
seen the res dua s are gett ng more symmetr c and
the var at on of res dua s s decreas ng too and that
s the reason why the res dua standard error s mprov ng
unfortunate y we have no gen e to te us the
ne ghborhoo of the sa es  we can not use mode ed
parameter n ts own est mat on  let s see f we can
use the d scr pt ve data n our data base to categor ze
se
lets ook at the store type d str but on n the
or g na data set  tra n ng   test  for sa es      and
sa es     dep cted n f gure   the store type d str but ons are apparant y d ffeent n two cases and
q
n m
f gure   res dua p ots for near mode based on we can use th s d fference n d str but ons to est mate
the gen e nformat on
just demograph cs
let s use the or g na demograph c parameters and
if we study the data and res dua s more c ose y we add t ona categor a var ab es on type of the stores
see that the data s dom nated w th a ot of sma
to fit a near mode to the sa es data the n t a
sa es va ues such that more than     of the sa es fu mode starts w th     parameters w th res dua
va ues are be ow    and more than     of sa es va   standard error equa to     and the fina reduced






























































































































































































































































































































































































































 

fi 
  

 

 

residuals

  

  

  

model residuals

so

t p d

bu on o





 





















 





 
  








 


 


 











 



 







 








 




  




























    


 
 
















     


 

 



  




 

     



  





 

 



 
 







  

 



 




 
  














 




















 










 





 

















 


 














 










 









 







































































































































































 
  













    



 






















  

















































































  

































































































































































 


















 

  




 
 

































































 










 











 






















 









































 















































































































 


 

























































































 







  


























 







 































































































 





















































































 













 









































 















































 
































































































































 















































 




















 





















































































































































 















































































































































































































  
































































































































































































 






 





 







































































































































































 



































 







































































































































































































































  



































































































































































































































  






















































































































































































































































  


































































































































































































































































































































































































































 













































































































































































 


























































  


























































































































































































































































































































 




































































































































































































































































 
























































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































 




































 






















































































































 



































































































































































































































 




 




 
 
   








 































 


 




 










 



 



 

 




 


















 




 












 
  





 


 



 


 










 









 



 





  


 






  


 

  




















  
 


 
 
  











  









 







 

    

     

     

     

     

oo

o

d

r m

hom

m

r

o h r

u

rm

r

o h r

u

rm

index

mod

du

so

t p d

bu on o











  





  
 















  






















 

  





 



 












  





  
 
  










 
 













 
 











 




 







  







   




 

 







 



 



 








  

  




 








   





  


      












 

 


 
  
  

















 
 










  
 











 






 



 






 



 


 








 






      





 






 






















 



    






 












  

 






 




 



 













 



 




 

















 

 
   






 








  





 

     




 
  



   





 










 








































 













































 
























 







  


































































 










 






 











 


































































































 



































 



 
















































 






























 












 
  

































 






























































 


































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































 































































































































































































































































































































 














































































































 












  
 




 







 




 
























 


 






 



 






















 











 
 





































 






 












 



 







 









 








 


 

























































 
 
















 
  





   
 
 


 

  









 




 

  





























 











 





























 






 
































 












 

 



























   


 


   



















 
 






















 






 




 















 














 



















































 



 

































 




 







 













 












  













 

 




























 




 

















































































 












 




r

r







oo

o

d

r m

hom

m

f gure   res dua p ots for mode w th extra gen e f gure   store type d str but on for sa es      and
parameter sa es      and the mode for extra gen e sa es     n the who e data set
parameters sa es        sa es     and     
sa es    
proved the res dua standard error a ot a though t
s not as good as gen e nformat on let s ook at
the res dua p ots of the mode presented n f gure  
it can be seen that the res dua d str but on s more
symmetr c around zero and the q q p ot of student zed res dua s vs standard norma s much c oser to
stra ght ne compared to f gure   a of these nd cate that our res dua s d str but on s c ose to norma
if the norma and d assumpt ons ho ds for res dua s then we cannot mprove our mode and as the
res dua p ots show enough resemb ance to norma
d str but on we can stop here

mode has    parameters w th standard error equa
to     and major ty of categor ca parameters are
present n the fina reduced mode s m ar y we can
add the categor ca data of wh ch state the store s
ocated n to get even more nformat on and f we do
so the n t a fu mode starts w th     parameters
w th res dua standard error equa to     and the
fina reduced mode has    parameters w th standard
error equa to     inc ud ng state nformat on we get
a tt e b t of ga n over store type mode but f we
check state nformat on we w find out that a the
data are from on y    states if we use the mode
to est mate sa es of a store from some other state t
shou d be ok as t uses a non state regressors to
est mate the sa es assum ng the mean of the eft out
states doesn t d ffer s gn ficant y w th the mean of
the present    states  as we are not ga n ng much
by add ng state nformat on and t comp cates the
mode we focus on the ear er mode w th on y store
type data added to demograph ca data th s mode
s presented n f gure  
obv ous y by go ng to th s mode we have m 

now that our mode s work ng good enough on
our tra n ng data we need to cross va date t w th
the test data if the above mode s used to pred ct the sa es va ue for the test port on of data wh ch
s not used yet  we get some est mate for the sa es
of each store n the test data if we compute the
res dua error between the est mated sa es va ue vs
actua sa es va ue for a tra n ng data the quant ty
has mean equa to      and standard dev at on equa
to     wh ch s c ose enough to our mode res dua
mean on tra n ng data    and standard error      
 

fimodel residuals


  

 

residuals

  

  







 



 
 











  







   
 



 
  








  















     





 

 







 

   



 





























 
 
 











   


 






 






 

 








 




  







 
  


 

 


 

 

 

   

  
 

  



 












 



 

 

















 



  





























  


 







 
  
 







  

  

 




 








 





 
 





 

 
























































  


 







 


 






 

 

 














 

 







 







   






 
 




 
















 











 
















 

 

















 









  




 

























































 













    



























 

 
 






































 


 

 

















 















































































 














































 







 




















 















 

























 












































































































































  

 





 

 

























































 








 
































































































 






























































































 























































































 




















































  
































































































































































 





























































































































































































































































































 







  


































































































































































































































































































































































































































































































































































































































 


































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































 












































































































































































































































































































































































































































































































































































































 



































































 
















































































































































































































































































































































































































































  









































































































 




 








  

























  



























 





















































 
 




























 








 

























 
























 




  














 








 








 




























 
  
 


 

 








  




 

  


 



































 

    

     

     

     

     

index

q q p o o s ud n

dr

du

r



 


















































































































































































































































































































































































































q

n m

f gure   res dua p ots for near mode based on
demograph c nformat on and store type

 

other approaches

the great success of the gen e approach encouraged
us to ook for more effic ent methods to part t on
sa es one method we came up w th was to earn
a superv sed c ass ficat on prob em of est mat ng say
sa es      and then feed th s va ue nto near
method to get c oser to gen e resu ts we used og st c regress on to est mate sa es      th s method
gave resu ts s m ar to the fina mode n the prev us f gure   l near mode based on demograph ca nsect on
format on and store types x  x   are categor ca
furthermore we tr ed to come up w th some non  parameters for store type      
near mode nc ud ng powers of parameters and og
of some parameters ke number of househo ds and
number of ind v dua s and none of them d d as good   m h kutner c j nachtshe m j neter and
w l app ied linear statistica mode s mcgrawas the mode we der ved n the prev ous sect on
h new york     
  t l la and h x ng statistica mode s and
methods for financia markets spr nger new
york     

references
  s chatterjee and a s had regression ana ysis
by examp es w ey new jersey     
 

fi