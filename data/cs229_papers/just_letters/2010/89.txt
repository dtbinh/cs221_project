short term load forecasting under dynamic pricing
yu xian lim  jonah tang  de wei koh
  abstract
short term load forecasting of electrical load demand has become essential for power planning
and operation  and is a well researched area      in this study  we propose a locally weighted
linear regression model for    hour ahead short term load forecasting of the electrical load for
individual customers  taking into account dynamic pricing effects  as shown by the results  the
model presented can work effectively 

  introduction
    data set
we obtained the electrical load data from     residential customers     serviced by the pacific
gas and electric company  and    by southern california edison  in the state of california
under experimental dynamic pricing rates in the period dating april      to september      
each customers data included the electrical load usage at    minute intervals  for a total of    
per day spanning varying periods of    to     days  of the     customers     were subjected to
variable time period critical peak pricing  cpp v  rates and    were subjected to fixed time
period critical peak pricing  cpp f  rates  the remaining customers were on constant tier rate
schemes 
in the cpp v rate scheme  isos provide consumers with   day notice of a critical peak period
 cpp  event that may occur at any time for a variable amount of time  during which customer
electrical rates are increased to a pre determined  typically much higher  level  in the cpp f
scheme  customers have access to the list of upcoming cpp events at the beginning of the
month  these events have a fixed time window of     pm  however  the actual price data was
not made available  and an indicator variable was used to mark the presence of a dynamic pricing
event occurring during a given time 
we also obtained the hourly temperature and humidity data collected by weather stations in each
customers residential area over the corresponding time period  hence  the data set comprises a
total of three quantitative variables  load  temperature  humidity  and one qualitative variable
 dynamic pricing indicator  henceforth termed cpp indicator variable  
    data pre processing
simple initial diagnostic box plots of the data suggested large idiosyncratic load usage pattern
differences across customers and for different times of the day  therefore  model selection and
fitting as described in the following section was applied independently to each individual
customer  we considered the data for each customer as a twenty four hourly series  over about
    days  

 

fito deal with missing points  we performed data imputation on each customers data by
interpolating missing values using the mean value of adjacent values for all   types of
quantitative data  for temperature and humidity  the mean of values before and after missing
values was taken  for electrical load  the mean was taken across load values from the same time
of day from the days before and after  if the missing data was unable to be interpolated in this
way  such as when the points were at the very start or end of the customers data   the entire day
was removed from consideration  we also removed    customers completely for having a
significant proportion        of missing temperature  humidity or load values 

  methodology
    moving window linear regression
given a specified feature set  we applied the following simple linear regression model 

where
is the electrical load at hour h 
is the i th predictor variable  
the
parameters  and
is the size of the feature set  training sets were taken as moving    day
windows  indexed by d  such that window d contains the training set  
  for days j  
d        d   this training set is used to compute the least squares estimate 
   note that
the training set size was     but     days of data were needed  because the predictors may
include autoregressive components up to lag      from the least squares fit  the mean of the


squared residuals over the training set 
 
    was taken as one
observation
of training error  the trained parameters 
were then used to make a
single prediction of the electrical load on day d at hour h  and the squared difference between the
true load and the predicted load was taken as one observation
of generalization error 
another set of parameters 
were then trained for the next value of h  and the process
repeated for all h         the entire window is then moved forward by one day to train the
parameters 
  predictions made on day d    and so on until the last day for which data is
available  the training error and estimated generalization error for this feature set   by hour 
are taken as
 



 

  

 

and likewise we can define the overall training error and estimated generalization error as
 

 



  

 

    feature set selection
the features that go into our regression model are selected from  the variables cpp indicator 
temperature  humidity on the current day and on previous days  up to n      days   and also the

 

fiload on previous days  autoregressive components   all corresponding to hour h  therefore  there
 n
are about  n possible features  or   possible feature sets  to pick an appropriate feature set  we
use the forward search algorithm  evaluating feature sets by their estimated generalization
error 
as defined above  our forward search algorithm terminates if the addition of the
next feature fails to decrease the estimated generalization error 
    time binning selection
for each d  the model equation     fits         parameters to predict    load values  to
guard against over fitting to the fine   hour time binnings  we explored models with variable 
coarser time binnings  i e  varying combinations of bins   this can be formalized as




where we have defined


 

 

 

 

 

roughly speaking  we have introduced features from adjacent h  but under the imposed
constraint that that all 
for the same bin are equal  for selecting an appropriate time binning
  
out of the possible   binning combinations  a backward search algorithm was employed  the
algorithm initialized with the finest binning  and at each step of the backward search picked the
best pair of adjacent bins to coalesce  here best was measured as having the lowest estimated
generalization error   for a given binning
  all the linear regression  moving window
evaluation  and feature selection was performed to yield the estimated generalization error for
binning    our backward search terminates when generalization error failed to improve for
several consecutive fusions  overall the entire model selection procedure  feature selection and
time binning selection  can be viewed as a heuristic attempt to find optimal feature set
and
optimal binning
to give the minimal generalization error 
 
 

 





    locally weighted linear regression
locally weighted linear regression  lwr  was also explored as a modification to the simple
linear regression training scheme  as follows  the training examples in each moving window
were weighted according to their distance from the test example  which recall is the load on the
day immediately after the training window   specifically  the weighting function for window d
was chosen as
 

  

 

 

 

fiwhere
is the vector of predictor variables  features  for the j th training data point of the
   day training window d   i e  j   d        d      and  is an estimate of the covariance of
the predictor variables from the points in this training window  just for this weight calculation 
the constant term and indicator variable have been excluded from the feature vector  this form of
weighting function has heavier tails than a gaussian form  so heavier weights can be assigned to
points at a greater distance  this helps in cases when the test example is an outlier  with no or
very few training examples close to it in distance  
    comparing errors
some customers have very high electricity usage while others have very low electricity usage 
since in general their loads would have different variances  and our training and estimated
generalization errors are mean squared errors  it is difficult to compare them directly between
customers  we thus normalize the root mean square errors  rmse  by dividing them by the
mean load to obtain a form of noise to signal ratio for each customer  and implicitly we have
assumed that the variances are roughly proportional to the square of the means   for purposes of
comparing across customers  we define the hourly quantities
 
 
 

 
 

 

 

 

 
 

 

and overall quantities
 
 

  results
typical features selected during the forward search were the load   day ago  the load   days ago 
and the current days temperature 

control customer    h 
 
gen

   

cpp v customer    h 
 
gen
   

cpp f customer    h 
 
gen

   

control customer    h 
 
tr

   

cpp v customer    h 
 
tr
cpp f customer    h 
 
tr



 h 

  rmse mean

 hourly 

test and training normalized errors     for typical customers   by hour of day
 

 

 

 

  
  
hour of day

  

 

  

ficomparing locally weighted and unweighted linear regression

   rmse mean

 

locally weighted linear regression   gen  
 unweighted  linear regression   gen  

   

 unweighted  linear regression   tr  

   
   
   
 

 

 
  
customer id   control         cpp v          cpp f          

  

  discussion   future directions
we have obtained some encouraging preliminary results in the application of machine learning
to load forecasting under dynamic pricing  in future work  the following could be taken into
consideration 
firstly  we assumed a linear relationship between the variables  if the true relationship is
nonlinear  appropriate transformations  e g  taking log  might yield an improved fit 
the choice of training window width     days  was arbitrary  it could be included as a model
parameter over which to minimize error 
we could also expand the set of features under consideration by higher order terms  as well as
interaction terms between variables  in particular interaction terms between the cpp indicator
variable and the other feature variables  also  we have currently allowed for inclusion of features
with other values of h in only a very rigid way  binning   this could be relaxed by  for instance 
directly including features from other h into the linear regression model 

  acknowledgements
we would like to thank dr amit narayan and rajeev singh for working with us on this project 
we would also like to thank professor andrew ng and our tas for their guidance 

  references
   

a  munoz  e  f  sanchez ubeda  a  cruz  j  marin  short term forecasting in power
systems  a guided tour  springer verlag berlin heidelberg      

 

fi