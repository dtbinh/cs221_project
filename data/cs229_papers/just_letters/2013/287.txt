using tweets to predict the stock market
zhiang hu  jian jiao  jialu zhu

   abstract
in this project we would like to find the relationship between tweets of one
important twitter user and the corresponding one stock price behavior  the
tweets of elon musk  who is the ceo of tesla  and the change of tesla stock
price are used as data in our project  we have tried different sets of features
using svm model 

   background
it is found that some important twitter users words can influence the stock
prices of certain stocks  the stock price of tesla  a famous electric automobile
company  for example  recently seen a huge rise after elon musk  the ceo of
tesla  updated his twitter about the self driving motors  besides  the dow jones
and s p     indexes dropped by about one percent after the twitter account of
associated press falsely posted the message about an explosion in the white
house 

   prior work
a number of prior works are there to predict stock price using twitter or other
social network  in       bollen et al  predicted the direction of djia movement
using twitter data with an accuracy of       using the google profile of mood
states  gpoms  and a self organizing fuzzy neural network         they
found that the calm mood profile yields the best result for stock market
prediction     

   methods
    data process
     tweet data
one challenge of this project is to get the data from twitter  since the large data
set used in the prior work are no longer available according to twitters privacy
policy      therefore  we use the twitter developer tool tweepy to obtain the
content of tweets  number of favorites  and number of retweets of twitter
accounts  at most      tweets information could be collected for a certain user 
in this project  information of     tweets of elon musk from jun          to

finov            was collected via tweepy 

      finance data
we use the yahoo  finance as our data source  the finance data consists of
opening price and closing price on daily basis  ranging from dec   st       to
nov            including     trading days in total  we then convert the data to
the input for our model  two kinds of labeling vector are constructed according
to the finance data set     we use    or   to denote price goes up or down in one
trading day     the feature whether there is a price jump in a specific day is
used to construct the label in one of our sets of features 
      match of twitter and finance data
we match the stock with tweets posted in the same trading day  we discard the
tweets posted before stock market open time and after stock market close time 
and for remaining tweets posted in the same day  we aggregate the content of
tweets and average the number of favorites and the number of retweets 

    models
an svm model with gaussian kernel is used in this project  three groups of
features are tried and evaluated in this project in order to investigate the
relationship between the tweets of an important twitter user  elon musk  and
the direction of stock price movement of tesla  all of these sets of features and
labels are trained using svm 

    feature selection
      frequent words and jump of the stock price
the label vector of this set is to examine if the stock price changes more than
r     the jump is labeled    otherwise it is labeled    
for the feature vector x  we observe the tweets  and use the following as
features  the number of favorites  the number of retweets  and a vector
constructed by the words of the tweets  which is established in the following
way 
firstly  construct a dictionary according to the content of all the tweets 
secondly  set an upper threshold of frequency fh and a lower threshold fl of
frequency to consider only the medium frequency words  thirdly  we compute
the indication factor

p x i y   
p x i y   

and select k words with largest indication

fifactors according to the labeling vector y  then  the vector v is established as
vi to be the number of ith largest word appears in the tweet 
the number of favorites and number of retweets of one day are averaged
and the word vectors are aggregated 
   valid days of data points of the tweets and stock prices out of     stock
features and     tweets  however  even for the training set  the error rate is
quite high  below is a figure showing the error rate under different choices of
jump 
open
price
      

error
rate
 r      
table  

highest
price
      

lowest
price
      

close
price
      

volume
     

adjacent
close
      

error rate of different choices to construct the label vector

in table    for the best case  using volume generates       error  however 
all the predictions we get are jump  meaning that information is lost in this
hypothesis  the behavior of this group is bad even for the jump of the stock
market  therefore  new groups of features and labels need to be selected to
examine the relationship between tweets and stock prices 
      sentiment scores and stock price movement
in this group of features  we use the sentiment scores of one days tweets to be
the feature x  and the direction of stock price movement to be the label y 
we use the following steps to preprocess the tweets for the sentiment analysis 
first  the url like contents of tweets that contain http and www are
removed  second  the non alpha elements such as commas in the content are
deleted  third  all the letters are turned into lower cases 
then  we refer to prior work of others  we use sentiment label instead of just
using the tweets itself  we use nature language toolkit  nltk  to label every
tweet  positive  negative or neutral to get the sentiment scores  table   is the
confusion matrix of the prediction this group of features versus the real test
data 
reality prediction

price rises

price falls

 percentage of test sample 

price rises
price falls

      
 
      
     
table   confusion matrix

fiwe use all samples      trading days in total  to train our model and then
investigate the training error  as one could observe in table    although the
accuracy of our prediction is around      the model tends to simply predict
every test data as price rise  which is not acceptable  one explanation of such
result is that the data in these features are inseparable  which makes the svm
model result in high bias and thus under fits the data  simply predicting almost
everything as rise  hence  more or some other features are needed so that the
data set is more separable 
      time processing
in this tempt  we decide to adopt more features  first  add the number of
favorites and number of retweets as our features  since more favorites and
retweets indicates the tweet has more influences on the public  which will
probably affect the stock price movement 
then  we consider time series effect in our model  the most recent days data 
because tweets effect may not influence the stock price movement immediately 
we use a parameter n to denote how many days will be considered in
generating a sample  and in the test we will try n from   to   
in validation part  we set a pole denoting the separating day  we use the data
before separating day  inclusive  as training data  and use the data after the
separating day as testing data  in the test  we found n     is the best value 
figure   and table   shows the accuracy and confusion matrix of this set of
features and label vector 

figure  
reality prediction

accuracy of the model on test data
price rises

price falls

 percentage of test sample 

price rises
price falls
table  

      
      
     
      
confusion matrix of time processing

fias presented in figure   and table    both the accuracy and the confusion
matrix of this set of features and labeling are reasonable  around     accuracy
can be reached if we leave     data to be testing set  besides  the confusion
matrix indicates that this set of features is not resulting in predicting all rise or
all fall 

   conclusion and future work
in this project we have tried three pairs of features and labels to investigate the
relationship of an important twitter accounts tweets and the stock price
behavior     the most frequent words and the jump of price     the sentiment
scores and the direction of movement  and    most recent days aggregation of
sentiment  favorites  retweets  and previous stock price movement directions 
we found that only the third pair reports both reasonable accuracy and
reasonable confusion matrix 
in the future  the relationship between the tweets of some important twitter
accounts and the whole stock market would be investigated using the
generalization of this project  besides  features such as the tweets of the
followers of these accounts could also be considered to test the relationship 

   references
    bollen  j   mao  h  and zeng  x  j        twitter mood predicts the stock
market  journal of computational science         
    twitter  twitter privacy policy   online  october      
https   twitter com privacy  accessed   november       

fi