improving differential diagnosis of pathologically similar dermatological
conditions to minimize invasive procedures
jason bouhenguel
ryan gallagher
stanford university  department of bioengineering
abstract
the erythemato squamous dermatological diseases share many clinical and histopathological
attributes making their differential diagnosis a challenging task for physicians  in this paper  we
develop a classification algorithm based on previous clinical data to assist dermatologists in
differentiating among these conditions  the final embodiment of the model was an optimized svm
with a guassian kernel          combined with principal component analysis  pca   achieving a
maximum classification accuracy of        an average sensitivity and specificity of        and
        respectively  feature selection revealed a subset of features with relatively high positive
predictive impact  e g   itchiness of affected area  and relatively negative predictive impact  e g  
age   optimized models trained on only non invasive feature subsets  features not requiring invasive
biopsy  yielded an average sensitivity of        and a specificity of         suggesting the utility
of our model as a first line screening tool for dermatologists to rule out the more severe diseases  and
thus minimize subsequent invasive testing 

introduction
computer aided diagnostic tools hold much
promise for assisting in the differential
diagnosis of diseases that bear minor
differences in presentation  such tools often
combine elements of artificial intelligence 
digital image processing  and computer vision
to improve diagnostic accuracy of radiologists
when interpreting x ray  mri  ultrasound  and
other radiological results  since the initial use
of these technologies in radiology  there has
been a demand for similar tools in numerous
other medical specialties  however  because
of difficulty of image standardization and a
paucity of readily extractable features  such
tools have developed more slowly for some
specialties than others 
traditionally  dermatologists have based their
diagnoses of skin conditions on visual
inspection of the pathological area and
assessment of histological samples biopsied
from the area of concern  diagnostic accuracy
in dermatology has been shown to be highly
dependent on the experience of the
practitioner and their visual acumen  to avoid
potential misdiagnoses resulting from these

human factors  the dermatological community
has shown increasing interest in automated
and aided diagnostic tools 
in particular  these tools hold much promise to
assisting in narrowing the differential
diagnosis of skin diseases that bear only small
differences in symptoms and clinical features 
the erythemato squamous dermatological
diseases  literally red skin diseases  share
many clinical attributes including erythema
 redness   itching  and scaling  for example 
making their differential diagnosis a
challenging task for physicians  beyond visual
similarity  these conditions share several
histopathological similarities  as well  and the
differences are often nuanced  it is from these
indistinguishable
differences
that
dermatologists often elect to perform more 
sometimes potentially extraneous biopsies in
an effort to bolster the certainty of their
diagnosis  in much of todays medical
practice  the consequences of biopsies are
overlooked  however  similar to other invasive
procedures  biopsies are not without
consequenceincreasing
the
risk
of
procedure related
complications
 e g  

fiinfection  scarring  chronic pain  etc    patient
anxiety  and overall medical costs 
in this project we first investigated the use of
support vector machines  svm  to predict the
correct diagnosis of the erythemato squamous
diseases based on non invasive clinical and
histopathological features of      patients 
the model was optimized by exploring the
effects of feature selection and pca  in
addition
to
parameter
optimization
specifically  l  regularization and kernel
selectiongaussian  sigmoid  linear  and
polynomial  utilizing this optimization
scheme we subsequently assessed model
performance when trained on a subset of
features  specifically comparing the use of
non invasive features to those derived from
invasive biopsy 

class
class name
code
 
psoriasis
 
seboreic dermatitis
 
lichen planus
 
pityriasis rosea
 
chronic dermatitis
 
pityriasis rubra pilaris
table    erythemato squamous disease classes 

 

 

 

 

 

 

instances
in data
   
  
  
  
  
  

figure    erythemato squamous disease skin visuals 

data set
the data set used for this project was obtained
from the university of california irvine
machine learning repository  the data
include a total of    discrete valued features
and     examples collected in a clinical
setting  a   th nominal attribute is included
which indicates the dermatological diagnosis
of the patient  of the features     features
were obtained from an initial non invasive
clinical evaluation and    features from an
additional histopathological examination of
biopsied skin samples under a microscope 
data was de identified before it was published
on the repository 
the age feature is linearly valued and
indicates the age of the patient in years  if any
of the six skin diseases have previously been
found in the patients family  the family
history feature takes a value of    and  
otherwise 
all
other
clinical
and
histopathological features were subjectively
assessed in the range of   to    a values of  
indicated the feature was not present   
indicated the largest amount possible for the
feature  and   and   indicated relative
intermediate values  all patients received only
one of the six possible diagnoses 

data processing
the data set contained eight missing values in
the age attribute  distinguished with a    to
reduce unwanted issues introduced by the
absence of these data  the eight training
examples for which this issue occurred were
omitted  leaving     examples 
methods
below is a description of the workflow that
was followed in building the differential
diagnosis classification algorithm 

figure    flowchart showing high level process of model
development 

   preprocess data  clean up and normalize
dataset 
   using loocv      optimize kernel
selection comparing linear  polynomial 
gaussian  and logistic kernels with respective
parameter optimization      optimize model
performance  assessing impact of pca 
feature selection  and l  regularization
   repeat for feature subsets  non invasive
clinical  invasive  combined
   compare performance of models

firesults
feature impact
on model
performance 
     
     
     
     
    
    
    

feature description

itching    
pnl infiltrate     
koebner phenomenon    
spongiosis     
papillary dermis fibrosis     
eosinophils in infiltrate     
scaling    
   
     
definite borders    
     
acanthosis     
inflammatory monoluclear
     
infiltrate     
      
age     
table    feature impact on model performance  descending order  
clinical and histological features indicated by blue and green 
respectively  top box  features whose inclusion positively benefits
the model  bottom box  features whose inclusion is detrimental to
the model 

in our approach  our optimal classifier
incorporated an svm  trained using
libsvm   with a guassian kernel         
combined with principal component analysis
 pca   achieving a maximum classification
accuracy of        with average sensitivity 
specificity  ppv  and npv of              
      and       respectively  see table    

figure    relative feature impact on model accuracy  feature
numbers represent indices to features in the data set 

table   and figure   illustrate the results of
feature selection  stratifying features by their
relative contributions to the overall model
accuracy  of the total    features    
positive impact features and   negativeimpact features were identified 

                                                        
  error contribution of individual features from sequential feature
selection analysis 

to improve the svm model performance  we
compared the impact of four kernels classes
 polynomial  linear  sigmoid  gaussian  
optimizing respective parameters for each
class  optimal performance was achieved
using a gaussian kernel         figure    
boasting a classification error of       
feature reduction techniques  including
feature selection and pca were compared 
pca feature reduction produced superior
model performance  demonstrated in figure   

figure    svm optimization by kernel type  respective kernel
parameters were optimized iteratively  optimal values 
polynomial      d     linear  sigmoid        gaussian       

figure    impact of feature selection vs  pca on smv loocv
error  fs feature selection  pifs positive impact fs  nonnifs non negative impact fs 

figure   compares model performance when
trained using one of four feature subsets  a
non invasive subset  comprised of   
features   an invasive subset     features   a
positive impact subset     features   and a
non negative impact subset     features 
which were identified through feature
selection  the non invasive and invasive
feature sets demonstrated       and     

ficlassification error  respectively  when trained
using loocv 

figure    loocv classification error of models trained on total
feature subsets  non invasive clinical features           
invasive biopsy derived features          pi positive impact
 features with positive impact on model error  positive blue bars in
figure     non ni non negative impact  features with non negative
impact  excluding negative red bars in figure    
feature subset
sens 
all
    
non invasive
    
invasive
    
non negative impact
    
table    sensitivity  specificity  positive
and negative predictive value  npv  of
tested on the svm model 

spec 
ppv
npv
    
         
    
         
    
         
    
         
predictive value  ppv  
various feature subsets

discussion
cadx tools built using machine learning
principles can assist physicians in more
accurately diagnosing conditions that present
with similar symptoms and features  in
particular  if such tools can improve
diagnostic accuracy using non invasive
features alone  the need for invasive biopsy
procedures can be significantly reduced 
previous approaches to machine assisted
classification of erythemato squamous disease
have included an svm with a novel f score
feature selection approach  and a voting
feature
interval
 vfi  
classifier  
classification accuracies greater than    
were achieved in each of these studies 
although these classifiers have been built  no
attempts have been made to assess and rank
the relative contributions of the non invasive
and invasive feature subsets to the overall
classification accuracy 

through feature selection we identified noninvasive features  specifically  itching  and
the presence of the  koebner phenomenon  
that had a larger impact on the predictive
accuracy of our classifier compared to the
majority of invasive features  additionally 
invasive features such as the presence of
 acanthosis  and the degree of  inflammatory
mononuclear infiltrates  were found to be
detrimental to the accuracy of the model 
unexpectedly  age was shown to increase
model error by       when included as a
feature  while not only providing physicians
with better insight into the disease process 
these results suggest that fewer histological
tests can be performed in the laboratory while
still yielding comparable diagnostic accuracies
and concurrently reduce costs of extraneous
tests and ultimately the number of invasive
procedures 
our model  an optimized gaussian svm 
when combined with pca demonstrated a
classification performance of        this
model subsequently served as a basis to
address the impact of training only on noninvasive clinical features  while model
accuracy decreased with this feature reduction
 classification accuracy of         an       
sensitivity and        specificity were still
achieved  the exclusion of a disease can be
just as effective as an absolute diagnosis  the
utility of an absolute diagnosis is only
valuable to a patient if it will result in a
change in the therapeutic approach 
significantly alter the patients overall
prognosis  or influence a significant change in
behavior  the specificity achieved by our
feature reduced model could function as a
screening tool to assist physicians in better
risk stratifying
patients
and
tailoring
subsequent diagnostic work up  in certain
more severe cases where stringency is desired 
non invasive features can serve to pre screen
patients for potential diagnoses and assess
whether an invasive biopsy is necessary for
confirmation 

fiwhile such pre screening can be beneficial 
determining appropriate thresholds to use can
be challenging and context dependent  such
thresholds are influenced by several factors
such as the downstream benefits of a
definitive diagnosis and the cost of additional
workup  further research must be done to
assess the threshold at which a biopsy would
be justified in the case of the erythematosquamous
diseases 
an
additional
consideration for future work is to cluster
diseases based on severity and procedural
costs before running the diagnostic model  in
our own ongoing research  we intend to use
publicly available medical billing data to
identify procedural costs associated with
various features used in this model  with this
added prognostic and economic context  we
believe an optimal balance can be identified
between maximizing predictive accuracy of
the model and minimizing both cost and
excessive intervention associated with feature
collection and follow up treatment  given
these pre specified objectives 
summary
in this work we developed a classification
algorithm to assist in the differential diagnosis
of the erythemato squamous diseases  the
model was developed using previous
dermatological data that included both clinical
and histopathological features  the final
embodiment of the model was an optimized
svm with a guassian kernel         
combined with principal component analysis
 pca   achieving a maximum classification
accuracy of        after performing feature
selection on clinical and histological subsets
of the data  we found features        and  
were most important to model accuracy while
feature     age  had the greatest confounding
effect on the models accuracy  using only
non invasive clinical features our models
performance decreased to a classification
accuracy of        despite the decrease this
result suggests the utility of such a model in
minimizing number of biopsies performed 
future work will focus on developing
reasonable clinical thresholds for biopsy and

diagnosis
decisions
using
additional
considerations such as procedure costs 

references
   

uc irvine machine learning repository  dermatology data
set  http   archive ics uci edu
 ml datasets dermatology 

   

h  a  gvenir  g  demirz  n  lter  learning differential
diagnosis of erythemato squamous diseases using voting
feature intervals  machine learning in medicine       

   

j  xie  c  wang  using support vector machines with a
novel hybrid feature selection method for diagnosis of
erythemato squamous diseases  expert systems with
applications       

   

libsvm  a library for support vector machines 
http   www csie ntu edu tw  
cjlin libsvm  

   

e  maglogiannis  c  caroni  s  pavlopoulos  v  karioti 
utilizing artificial intelligence for the characterization of
dermatological images  nnesmed       

   

nanni  l          an ensemble of classifiers for the
diagnosis
of
erythemato squamous
diseases 
neurocomputing             

   

h  a     emeksiz  n          an expert system for the
differential diagnosis of erythemato squamous diseases 
expert systems with applications           

   

karabatak  m     ince m  c          a new feature
selection method based on association rules for diagnosis of
erythemato squamous diseases  expert systems with
applications                 

appendix
clinical features  non invasive   erythema  scaling 
definite borders  itching  koebner phenomenon 
polygonal papules  follicular papules  oral mucosal
involvement  knee and elbow involvement  scalp
involvement  family history  age
histopathological features  invasive   melanin
incontinence  eosinophils in the infiltrate  pnl
infiltrate  fibrosis of the papillary dermis  exocytosis 
acanthosis  hyperkeratosis  parakeratosis  clubbing of
the rete ridges  elongation of the rete ridges  thinning
of the suprapapillary epidermis  spongiform pustule 
munro
microabcess 
focal
hypergranulosis 
disappearance of the granular layer  vacuolisation
and damage of basal layer  spongiosis  saw tooth
appearance of retes 
follicular horn plug 
perifollicular
parakeratosis 
inflammatory
monoluclear infiltrate      band like infiltrate

fi