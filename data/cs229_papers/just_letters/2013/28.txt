classifying search advertisers
by lars hirsch  sunet id   lrhirsch 
summary
multinomial event model and softmax regression were applied to classify search marketing advertisers
into industry verticals using advertiser spend data across keywords and keyword categories  using
multinomial event model  an error rate of     was achieved  using softmax regression  an error rate of
    was achieved 
background
advertising works by making the customer aware of the product and by focusing on customers need to
buy the product  globally  advertising has become an essential part of the corporate world  therefore 
companies allot a huge part of their revenues to the advertising budget  with the overwhelming
penetration of the internet  online advertising consumes a major part of this budget  in united states
alone internet advertising revenues amounts to     billion 
like other advertising media  online advertising frequently involves both a publisher  who integrates
advertisements into its online content  and an advertiser  who provides the advertisements to be
displayed on the publishers content  most of search advertising is built around the pay per click
business model  where advertisers keywords are matched to user queries  and advertisers only pay for
ads that are clicked by a user  with this business model it becomes crucial that the correct keywords are
selected for each query  and relevant ads are displayed onto a user s screen  an integral part of deciding
which ads are relevant  is to understand the advertisers  hence any system that would help identify
advertisers would provide a valuable edge in the endeavor to target relevant advertisement to users 
currently at microsoft bing ads  our advertiser base differ considerably in terms of their business  the
approach that has been adopted is to hire vendors that would manually classify our large advertisers
with no classification available for small advertisers  however this approach over time has proved
expensive and is not scalable as our advertiser base is growing  the unavailability of classification for
smaller advertisers is limiting the effectiveness of our marketing efforts and is a blind spot with regards
to knowledge of our customer base  this becomes very crucial as we move into developing markets 
two supervised learning models were developed to classify advertisers into different industry verticals
 labels   the training sets used consisted of the manually classified advertisers that we currently possess
and use features such as spend weighted distribution of keywords and query categories   note that
query  supply  taxonomy is different from the advertiser  demand  taxonomy  a single query category
could be relevant for multiple advertiser categories  for example   soccer  which has query class
 sports   could be relevant for advertiser categories such as  entertainment    sporting goods  etc   
also  while query intent and therefore category is often ambiguous  for example  jaguar    advertiser
category is not 

fiexecution
classifying advertisers is similar to classifying email into spam non spam in the sense that we are looking
for particular words  aka keywords in a search advertising context  that identify the subject as
belonging to a particular category  here  we are looking at identifying the correct industry vertical  e g 
automotive  retail  financial services etc   which an advertiser belongs to 
two types of features were used 




the top                   and        keywords advertiser bid for  by overall spend for each
advertiser vertical  were selected  then  percentage of spend per advertiser across each of these
keywords were calculated and used as features 
keywords are categorized based upon the meaning of the word according to an internal
dictionary known as che  this is a two level categorization  with    top levels and      branch
levels  percentage of advertiser spend across che level   and che level   were calculated and
used as features as well 

keywords and che categories were used independently and combined 








n top keywords  i e  n features 
che level       features 
che level         features 
n top keywords with che level  
n top keywords with che level  
che level   with che level  
n top keywords with che level   and che level  

data was collected for all currently manually classified advertisers in the system with a spend     for the
period extracted  initially    day periods  then    due to the time required to extract the data for   
days  and    day periods were tried as well to check if the model was sensitive to the data collection
period  it was for certain feature sets   data was extracted from the log files using microsofts internal
mapreduce cluster known as cosmos scope 
since this is a multi class classification problem with a high dimensionality feature vector  and with the
similarity with spam classification in mind  multinomial event model  a variation of nave bayes
classifier   seemed to be a natural initial choice of algorithm  since nave bayes rely upon the unrealistic
assumption of independence of features  an alternative classification algorithm  softmax regression 
was tried as well 
initially  the algorithms were run in octave  but with bigger and bigger datasets  up to several hundred
mb of data within some training set  it was eventually not feasible to run the algorithms in octave 
therefore  a custom multinomial event model was implemented using mapreduce  and run using
cosmos scope  softmax regression was run on the smaller datasets using r  it was not run on the larger
datasets  
for all models  a     simple cross validation sample was use to test each model 

fimultinomial event model
since the features represent the percentage of spend for a given keyword or che vertical  they will
usually be       and the convention of using a laplace smoothing factor of   in the numerator will not be
ideal  multinomial event model was applied  using a laplace smoothing factor equal to the lowest value
of any feature in the feature set  and number of features times this lowest value in the denominator  
the  vector and prior probability was calculated for each possible class  advertiser vertical  using the
training set  and the log likelihood was calculated on the cross validation set 
in other words 


   



      min
  fffi



    

   fi
   min    



where k is a feature  c is a class  i e  advertiser vertical    is the percentage of spend by advertiser i
on feature k  which can be a keyword or a keyword category i e  che   n is number of features  so

      for any i if an exhaustive and non overlapping list of features are included  which is the
case for che but not for kws or any combination of feature types such as kws   che   since in that case
spend will add up to      
finally  prediction was run on the cross validation sample  and the advertiser was assigned to the class
 vertical  with the highest log likelihood value given the feature set of the training example  the prior
and the  vector for the class 
the best performing multinomial event model combined spend distribution  for each advertiser  across
che  with spend distribution across che   table     resulting in an error rate of     on the crossvalidation set  see table   for error rates for other feature combinations 
multinomial event model che  che 
error rate
   

actual

autos
autos
education
finance
health
other
retail
technology
travel
total predicted
precision

edu
  
 
 

predicted
health
other

finance
  

 
  

 
 

 
 
 

 
 

 
  
   

  
   

   
   

 
 
  
  
 
 
  
   

  
  
  
  
   
  
  
  
   
   

retail
 
 
  
  
  
   
 
 
   
   

tech

travel
 
 
 
  
 
  
 
  
   

 
 
 
  
  
   

table    cross validation of multinomial event model with che  and che  as features 

total
actual recall
  
   
  
   
   
   
  
   
   
   
   
   
  
   
  
   

fisoftmax regression
softmax regression using stepwise feature selection with aic was run on the che level   dataset 
producing a model with an error rate of      table    
softmax regression che 
error rate
   

actual

autos
autos
education
finance
health
other
retail
technology
travel
total predicted
precision

  
 
 
 
 
 
 
 
  
   

edu

predicted
total
health
other
retail
tech
travel
actual recall
  
   
 
 
 
 
 
 
 
 
  
 
 
 
  
   
  
 
  
 
 
 
   
   
 
  
  
  
 
 
  
   
  
  
   
  
  
  
   
   
   
   
 
  
  
   
 
 
 
 
  
  
  
 
  
   
 
 
  
 
 
  
  
   
  
  
   
   
  
  
   
   
   
   
   
   

finance
 
  
 
 
  
 
 
 
  
   

table    cross validation of softmax regression using advertiser spend distribution across che  as
features 
using pca  the che level   dataset was reduced from      features to    principal components 
explaining     of the variance in the original dataset  this was necessary to run softmax regression 
running prediction on the training set  the error rate was     while on the cross validation set it was
      clearly an issue of overfitting  again  stepwise feature selection with aic was run  but the
algorithm only removed two of the    principal components and the results were very marginally better 
experimentation with fewer principal component did not yield better results either 
using pca and softmax regression with keywords as features was attempted as well but the feature set
was too large to run successfully  since che categories seemed to be better features using the
multinomial event model  it was assumed that this would be the case for softmax as well  but further
experimentation may be warranted 
additional results
table   has an overview of error rates for some of the other feature combinations which were tried 
data extracion
multinomial event model
softmax
time span
che  che  che       l      l       l    l     l      l       l    l     l      l che  che 
  days
   
   
       
   
   
       
   days
       
   
   
   
   
           
   days
       
   

table    error rates for some feature combinations that were attempted  che  and che  denotes top
level and branch level query categories  nlm denotes top n keywords for all level m advertiser verticals 
for example    l  uses top     keywords  by spend  for each level    top level  advertiser vertical  each
level has roughly     orders of magnitude more categories 
two takeaways from running feature combinations      adding more keywords to the mix will produce
higher error rates  and     collecting data over a longer time period significantly improves the quality of

fithe multinomial event models with keywords as features  but improves only marginally the multinomial
event models with che verticals as features  a continuation of this project will further explore the effect
on softmax regression  
based upon the first takeaway  additional feature training sets will be attempted with fewer keywords
per vertical    l     l   
future work
as described  additional feature training sets with fewer keywords per vertical will be explored for the
multinomial event model  further exploration of feature reduction  and reduction of overfitting of the
softmax regression algorithm will be attempted  as well as exploration of longer data collection periods
    days  
exploration of likelihood confidence cutoff points will be done to increase precision  with low
confidence  advertisers will remain unclassified  
the insights produced from this project will be used by microsoft bing ads to classify currently
unclassified advertisers 

fi