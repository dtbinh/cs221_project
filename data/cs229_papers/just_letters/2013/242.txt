personalized expedia hotel searches
xinxing jiang  yao xiao  and shunji li
stanford university
december         
abstract
in this paper  we propose machine learning algorithms with search data of expedia
to solve personalized hotel ranking problem  first  we implement model selection
and feature selection to improve classification result  we use different classifiers and
implement backward search algorithm  in addition  we explored another alternative
and implement collaborative filtering to rank hotels for each search item  finally  we
give conclusion and discuss our future work 

 

introduction

the past decade of internet evolution has led to the establishment of e commerce markets 
in the tourism industry  there is already a gradual shift towards electronic transactions 
in recent years  growth rates in online tourism have moved much faster than in the overall
world economy and travel expenses are the third largest cost block in companies after labour
and it  several prominant online travel agencies  otas  are already offering personalized
services to help custormers to choose their hotels  it is still the customers job to take
consideration of different aspects of hotels before final decision  our goal is to apply machine
learning techniques to rank hotels  which is based on a particular customers characteristics
and recommend those with high matching scores specifically to him her 
some hotel selection and recommendation engines are based on knowledge based systems
and knowledge modelling      moreover  techniques such as semantic web based extended
    matching process to improve the precision  collaborative filtering  used as one of the
most effective method of dealing with recommender problems  are also studied  a hotel
recommendation system based on collaborative filtering method of clustering and rankboost
algorithm has been proposed     this is also the basis for our final algrithm discussed in this
paper 
the paper however  elaborates the procedures of finding a better algorithm for the construction of a learning model for personalized hotel selection and recommendation  our
data  which includes features such as hotel characteristics  hotel location  users aggregate
 

fipurchase history and competitive online travel agencys information  will be used to design
a machine learning algorithm to rank these hotels in such a way that hotels with higher
rankings are those with a higher probability to be clicked booked  our work will include
model selection  optimization and feature selection 
this paper is organized as follows  section   describes the data sets we use  section  
shows the model selection process  section   shows the feature selection  section   shows
the collaborative filtering we use as an alternative to rank hotels  finally  section   gives
our conclusion and discusses the future plan of our work 

 

dataset

the data provided by expedia consists of a list of hotel search queries  and each row of a
query is associated with a particular hotel  after data cleaning  our training set contains
about    million data items  each item contains over    features  since the dataset is huge
and the data items are randomly organized  we will not consider trying to train our algorithm
on a small subset of the whole dataset  and since some features  date and time  are obviously
irrelevant to our prediction result  we will not consider them during our training process 

 

model selection

due to the nature of consumers online activity  both the click through rate and the ac  tual
booking rate are extremely low   in our first       training set  the click through rate is
       and the booking rate is about          therefore  we did not apply the classification
error to determine the efficiency of our training algorithm but instead  we chose the precision
and recall metric  fscore  to evaluate the performance of our training algorithm 
during the process of trying to fit our data to a better model  we applied several common
machine learning classifiers but neither precision nor recall rate can reach a desirable level 
the svm and logistic regression algorithm always predict the click through booking to be
false and moreover  their precision and recall rate fails to make significant improvements
with the growing size of training sets  the best precision and recall rate we could achieve
after applying perceptron and backward feature selection were      and       which is still
a little disappointing  therefore  we came up with a hypothesis that collaborative filtering
could work better for this problem and more details will be discussed in the future work
section 

 

feature selection

we implement feature selection in the following two ways 

 

fi   

preprocess

we manually remove some features which are obviously irrelevant to our prediction to reduce
noise and improve time efficiency 

   

backward search

we implement backward search algorithm  and use k fold cross validation to choose best
features from the rest features  in particular  for each feature  we compute f score of two
cases  say removed or preserved  and choose a better case 
each classifier gives different evaluation of same feature set  for perceptron classifier 
the feature set finally removed is 
 prop country id  prop review score  srch length of stay  srch children count 
srch query affinity score  comp  inv  comp  rate percent diff  comp  inv  comp  inv 
comp  rate percent diff  comp  rate  comp  inv  comp  rate percent diff  comp  rate  comp  inv 
comp  rate percent diff  
after feature selection  we can achieve f score of       take not book as true  and     
 take book as true  

 

collaborative filtering

in this part  we choose another method to rank hotels based on collaborative filtering  a model
used in recommendation systems  we notice a phenomenon in real life that people who click
or book similar hotels should be similar  in order to make use of this phenomenon  we
implement collabrative filtering to rank hotels for a specific search as shown in the following 
 a  we calculate the average of features of all the queries that click through or book the
hotel for each of the hotels and let it be the hotels profile feature 
 b  for each  search id  hotel id  pair  we calculate the distance between the querys
features and the hotels profile based on several similarity metrics 
 c  for each unique search id  we rank the hotels from low to high according to the
numerical value of the distances calculated in the previous step 
 d  we evaluate quality of the rank based on a score related to weight and rank and
choose the best similarity metric 
in order to reduce the risk of unbalanced feature range  we compute the mean value and
standard derivation value of each hotel to normalize features in each search item 
figure   shows the evaluation of different similarity metrics  the third column of figure
  shows the percent of score of the rank and total score  the total score is computed in the
following way 
 a  if a hotel is clicked  we add   point to the total score 
 b  if a hotel is booked  we add   points to the total score 

 

fitable    evaluation of different simialrity metrics
similarity metric
score
percent    
hamilton
             
     
euclidean
             
     
third order
             
     
cosine
             
     

to convert from a rank to a score  we use the following fomula 
 

w eight     

   
    e    rank   
we discover the number of hotels corresponding to a search item is about     and we
need a convert formula to map rank to score  in specific  we need to map rank no   to   
and rank no    to about    after several trails  we choose the above formula 
we run the baseline algorithm which uses ramdom forest to rank the hotel  according
to previous metric  the rank can achieve     of total score  in addition  baseline algorithm
needs several hours to run  while our algorithm runs much faster  say less than one minute 
below is a plot of our learning curve  the y axis shows the percentage of our score as
compared to the maximum score we can achieve 

 

fi 

conclusion and future work

in this paper  we implement personalized hotel ranking based on collaborative filtering  we
analyze the phenomenon of similarity between people who click or book similar hotels  and
design our algorithm based on the finding  compared to baseline algorithm  our algorithm
is much faster and is online  our work raises a number of questions about how to deal
with sparse profiles  which contains many null values  of the search data  currently 
we simply replace null values with    which is not ideal  we might use mean values or
ramdom sampling to deal with null values  another main focus of our future work is to
combine and modify different models instead of using just one classifier  limited by time
and computation resources  more detailed analysis will be conducted in the future 

 

acknowledgement

we express our sincere thanks to kaggle and expedia for offering us the dataset 

references
    b  a  gobin  and r  k  subramanian knowledge modelling for a hotel recommendation
system  world academy of science  engineering and technology       
    t  berners lee  j  hendler  and o  lassila the semantic web 
pages       may    

scientific american 

    gao huming  li weili a hotel recommendation system based on collaborative filtering
and rankboost algorithm       second international conference on multimedia and
information technology mmit   pages          april     

 

fi