predictinghousingprice
shuniu
introduction
thegoalofthisprojectistoproduceamodelforpredictinghousingpricesgivendetailed
information themodelcanbeusefulformanypurpose fromestimatingtheworthforahouse
thatsnotonmarket tofiguringoutwhichcomponentfactorsthemostintoahouse whichcan
helpdecideifaremodelmakessensefinancially 
datacollection
forthepurposeofthisproject ihavewrittenascripttocrawlrecentlysoldlistingsonzillow com
toobtaindetailsabouthousessoldinthelast years iamfocusingmydatasetonthesouth
bayarea withtheexpectationthattheyadheretosomeconsistentpatternandtrend 
hereisasamplelistingicollectedfromzillow 
address     callemesaalta milpitasca     
solddate           
soldprice        
builtyear     
interiorsize     sqft
lotsize     sqft
 bedroom  
 bathroom    
theseinformationneedstobetranslatedintonumberssotheycanbefedintoamodel mostof
thecomponentsarestraightforward 
solddate representedasnumberofmonthssince       
soldprice representedasnumberofthousanddollars
interiorsize exteriorsize numberofsquarefoot
 bedroom numberofbedroom
 bathroom itriedtodealwithonlyintegersintheinput sothiscomponentisconvertedtoan
integerthatequalstodoublethenumberofbathrooms
addressishardtoquantifydirectly ihaveconsideredusingthelatitudeandlongitudeasdata
points buttheresnosimpletrendlikewhenlatitudeincreases weexpectthehousevalueto
rise idoexpecttheretobesometrendingpatternfortheintrinsicvalueofthelocation butthe
contourofthatwouldbetoocomplextomodelusingthelimiteddatasetihave idohowever
expectthecontourtoformaroundcityboundariesandschooldistricts soiamusingthe
followingtwovaluestorepresentthelocation 
 medianpriceofthecity foreachcityihavecollectedatleast   recentsales andthe

fimedianpricewillbeusedasadatapoint thiscanbeusedtocapturethebasevaluefor
eachcity icouldhavealsoused city zipcode astheunithere however iwonthave
hundredsofdatapointforeachzipcode 
 schoolapiscore ihavealsocrawledschoolandhousing comforeachrecentlysold
listingtocollectaschoolscorethatrangesfrom to    thescoreiscomputedbased
ontheapiscoresfortheelementaryschool middleschool andhighschoolthehouseis
assignedto soitshouldbeafairestimatefortheschoolvalueportionofthehouse 
overallihavecollected    datapoints eachonecanberepresentedas xi yi  
 xi  xi  xi  xi  xi  xi  xi  x  xi  
 xi  salemonthssince       
 xi  interiorsize
 xi  lotsize
 xi  builtyear
 xi  numberofbedrooms
 xi  numberofbathroomstimes 
 xi  schoolapiscore
 xi  medianpriceofthecity
 yi price inthousanddollars 
forexample wewouldrepresentthesamplelistingaboveas
 x                               
 y    
dataanalysis
nextiwantedtolookatthedistributionofthedataineachdimension comparingittotheyvalue
toseeiftheresanyimmediatetrendjumpingoutfromthegraph intruitivelyiwouldexpectfor
eachxjdimension thehigherthexjvalue thehighertheyvalue 
hereisavisualrepresentationofeachxjvsy 

salemonthvspriceinteriorsizevspricelotsizevsprice

fibuiltyearvsprice bedroomvsprice bathroomvsprice

schoolscorevspricecitymedianpricevsprice
fromthegraph interiorsizeandschoolscorearethetwothatshowsthestrongestcorrelation
withprice theotherfactorsarenotasobvious astherearealsoexpensivehouseswithlowxj
values 
linearregression
myfirsthypothesisisalinearmodel whereitwouldpredicty atx andx    x  x  x  x  x  
x  x  x  
totesttheerrorsofthishypothesis idividedmydatasetinto  groupstoperforma  fold
crossvalidation eachtimeusing groupstotrainthelinearregressionmodel andthenusethe
  thgroupfortesting theerroriscalculatedtobetheaverageerrorinthetest thesetthat
producedthesmallesterrorisusedasmyfinalmodel theresultingmodelhadanerrorof   
inthetestinggroup 
thesurprisingfindingisthattherearetwocoefficientsthatturnouttobenegative a anda  
correspondingtobuiltyearandnumberofbedrooms andtheyareconsistentlynegativeinall  
crossvalidationgroups 
forbuiltyear theintuitiveexpectationisforthesamespecificationofahouse themorerecent
oneswouldcostmore howevertheleastsquarefittingshowsanegativeslopebetweenbuilt
yearandprice itcouldbethatamongthedataicollected mostoftheexpensivehousesarethe
olderones andtheirvalueiscapturedbyanotherdimensionthatsnotpartofourdataset 
anotherconjectureisthatthelinearmodelisabadperformingmodelatleastfortheyear
dimension theresasignificantdifferenceinvaluebetweenabrandnewhouseanda  year

fioldhouse butalmostnodifferenceinvaluebetweena  yearhouseanda  yearoldhouse 
withthelinearmodel itcannotdifferentiatebetweenthosescenarios 
numberofbedroomsisalsotrendingnegativelywithprice thisissurprisingatfirst butitcanbe
explained becauseinteriorsizeisalreadyadimensioninthedata giventhesameinteriorsize 
morebedroomsmeanssmallerfootageperroom thusmostlikelytobeabudgethousethana
luxuryhouse 
normalization
next iappliedanormalizationtoallthexi j  where
xi normalized j   xi j meanofxi  standarddeviationofxi
thenapplyinglinearregressionagainonthenormalizeddatasetgivesthefollowingvaluesfor
thecoefficientsa                                   
sinceallthexivaluesarenormalized wecancomparetheircoefficientstogetasenseofhow
mucheachdimensioncontributestotheprice basedthat werankthedimensionsfromthe
mostimportanttoleastimportantas 
 x  mediancityprice     
 x  interiorsize     
 x  soldmonthsince           
 x  lotsize     
 x  schoolscore    
 x   bathroom    
 x  builtyear    
 x   bedroom    
weallknowthatlocationisaveryimportantfactorinhousingprice andthemediancityprice
beingthemostprominentfactoralsoreflectsthat thereisacaveatthatthemediancitypriceis
generatedfromthepricevalueofthesamedatasetwhereweevaluateourmodel thiscould
meanthemedianpriceisalreadyadjustedtofitthedatasetwell amoreunbiasedindicator
wouldbegettingthemediancitypricefromacensusdataratherthanthesamedataset 
componentanalysis
adifferentwayofdoingthecomponentanalysisistodoabackwardsearch removeone
dimensioneachtimeandseewhatstheerrorofthenewmodel andthenpickthedimension
thatleavesthesmallesterror bydoingso thesewouldbetheorderofdimensionswetake
away withtheresultingerrorinmodelaftertakingawaythatdimension  
 x   bedroom     
 x   bathroom     
 x  builtyear     
 x  schoolscore     

fi




x  soldmonthsince           
x  lotsize     
x  interiorsize     
x  mediancitypriceisthelastdimensionremaining

ialsodidaforwardsearchforthemostprominentdimensions startingfrom dimension each
timeaddingadimensionthatleavesthesmallesterrorinthemodel itresultedinthesameorder
ofcomponentsasthebackwardsearch 
comparingthesewiththeorderfoundinnormalization theorderingisalmostidentical theonly
onesthatareswitchedaroundaretheonesthathaveveryclosecoefficientsinnormalization
andverycloseadditionalerrorsinbackwardsearch thisalsosolidifiestheconjecturethat
locationisthemostimportantfactor followedbysizeofhouse 
quadraticmodel
thefinalmodeliusedisaquadraticnormalizedmodel 
iconvertedeachdatapointfrom   x  x  x x  to
   x n x n x nx n x n x n x n x n x n x nx n x n wherexinisxinormalizedtonumberof
standarddeviationsfrommean thisexpandsthexdimensionsfrom to   whichshouldstill
bemodelableusingour    datapoints 
usingthesame  foldcrossvalidationaslinearmodel ifindtheerrorforthequadraticmodelis
    betterthantheerrorof   producedinlinearmodel sothisindicatesthatquadratic
functionisamorefittingmodelinthiscase 
bycomparingthecoefficientsofallthequadraticterms thefollowingarethetop combinations
thathadthehighestcoefficients inbrackets  
 x  x  soldmonth schoolscore    
 x  x  schoolscore mediancityprice    
 x  x  interiorsize mediancityprice    
mostofthesearealsothemostvaluabledimensionsseeninthelinearmodel notingthatschool
scoreishavinganincreasedeffecthere 

fi