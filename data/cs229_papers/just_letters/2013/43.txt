driving behavior improvement and driver recognition based on real time driving
information
kexin nie   luyan wu   and jiafan yu 
 

stanford university  stanford  ca        usa
 dated  december          

based on real time driving information recording data  we raised a regression model for predicting gasoline consumption rate from speed  acceleration and heading degree information  we
also developed a grouping method to sort high frequency fragmented driving information to sets of
trips  and then implemented supervised learning to illustrate the relationship between average speed
and gasoline usage  the general mpg mph relationship gives useful suggestions of good driving
speed  the ranking of different vehicles mpg from real time driving information are more close
to practical data  compared with the data given by automakers  which is a useful criteria for new
vehicle consumers  we also implemented both supervised learning  nave bayes and support vector
machine  and unsuperivised learning  k means clustering  to try to classify potential multi driver
vehicles  though the ultimate goal is still not achievable  we can still classify driving behaviors to
  patterns with different speeds  which is a hint for distinguishing different driving conditions  and
drivers driving preference  which could be a good foundation for further work 

a drivers gasoline usage is very sensitive to his her
driving habits  since americans spend about      billion dollars on gasoline every year  a good driving habits
which could spend less gasoline and less money could result in      billion savings per year  in the meantime  a
drivers driving behavior could be defined as a set of all
real time tractable driving information  including speed 
gas usage  acceleration and heading degrees and it is a
reasonable assumption that different drivers have different driving behavior patterns  nowadays  we are able to
record the high frequency real time driving information 
this information is potential for us to find out more information  including drivers driving habit patterns and
the effect to gasoline consumptions  this patterns in
drivers driving behavior and gasoline consumption efficiency could give us better guidance to drive more efficiently  in the same time  the abundant information
also gives us the potential to distinguish different drivers
only by analyzing the real time data by illustrating different drivers driving behavior patterns  in this paper 
we managed to find out the relation between gasoline usage and driving informations in order to give suggestions
to better driving habits  and we made the initial trial to
distinguish different drivers in the same vehicle 

data grouping and initial analysis

the original     mb data includes real time driving
information of    different vehicles  every data sample
only records transient speed  heading degrees  acceleration and gas usage  in the first stage  we sorted the fragmented data samples to long enough trips  which contain more systematically information and are beneficial
for further analysis  we treat   original data points in

the same trip if the time interval between   original data
points ls less than a constant time  in practical  considering traffic lights  traffic congestion and passenger picking
up    minutes is a good threshold in our application  the
separation of different trips is shown in fig    
  
ith trip
i  th trip
  

  

  

speed mph

introduction

  

  

  

  

 

 

 

 

  

  
time min

  

  

  

fig     illustration of the saparation of different trips

for every trip we calculated calculated the average
speed of the trip  total mileage  trip time and gas usage 
in the meantime  we also calculated the speed variance
and l   norm of the acceleration during the trip  which is
sensitive to gas usage and drivers information patterns 
the trip information is better organized  compared with
the original data  for our analysis  at the same time  this
grouping process could efficiently decrease the size of data
samples so we could train the trip info in personal computer  which is crucial for the first stage implementation
of the project  for example  there are        data sam 

fi 
ples for a      volkswagen gti   door hatchback  but
after dividing them to different trips  there are only     
trips in total 

 

 

x   

     

   

number of original realtime data points

number of original realtime data points

     

     

    

    

    

    

 

 

   

 

table i  model with response variable log gas mpg     
coefficients
 intercept 
speed mph
speed mph 
speed mph 
af
a f
a f
a u
speed mph  af
speed mph  ar

estimate
    
         
         
         
    
         
    
    
         
         

   

 

   

 

 

 

  

  
  
  
time in a day hours

  

  

  

 

  

 

 

 a       cadillac cts

  
  
time in a day hours

  

  

 b       vw jetta

considering the effect of
acceleration in regression model to
predict gas usage efficiency

 

 

 

x   

 

x   

   

 
number of original realtime data points

number of original realtime data points

 

   

 

   

 

   

 

 

 

 

 
   

 

 

 

  
  
time in a day hours

  

 

  

 

 

 c       acura mdx
   

  

  

  

  

x   

 

number of original realtime data points

number of original realtime data points

  
  
  
time in a day hours

 

x   

  

  

 

 

 

 

 

  

 d       subaru impreza

 

  

 

   

 

   

 

   

 

 

  
  
time in a day hours

  

 e       mb gl    

  

 

 

 

  
  
time in a day hours

  

  

 f       toyota corolla

fig     histograms of driving time of   vehicles

in addition  fundamental statistics of original data
could be helpful for further analysis  it is a reasonable
assumption that the number of original data points in
some time range in a day is proportional to the total
driving time in the time range in a day  we plotted
the histogram of all original datas recording time in a
day fig      which clearly shows the difference of driving habit  for some vehicles  there are two main peaks in
the morning and afternoon denoting the daily commuting  there are also some relatively even distribution in
all day for some vehicles  which indicates a higher probability of commercial use in work time  this pattern is
the basis for driver recognition in next section 

in the original datasets  we have variables ax gs  ay gs 
and az gs  which are accelerations at three orthogonal
directions  however  since the acceleration measurement
systems are different in different cars  it is hard to interpret these variables directly  luckily  we have variables
of record date time  heading degrees and speed mph 
from which we can obtain new variables af  forward acceleration  af     stands for accelerating forwards  and
ar  centrifugal acceleration  according to mechanics  we
can also obtain variable au  vertical acceleration  au    
stands for accelerating upwards  through deducting the
gravity acceleration  then we have gas mpg as response
variable and other variables as predictors to find an appropriate regression model for predicting gasoline usage
efficiency 
the linear regression model was first implemented  due
to the low adjusted r squared criteria  linear model is not
a good fit for predicting gas usage efficiency  when introducing polynomial fitting and interaction  the r squared
criteria got improved  we further introduced stepwise
variable selection of polynomial fitting and got the lowest cross validation mean squared errors  final improvement is done by performing a box cox transformation to
the response variable  the result shows that if we take
log gas mpg      instead of the gas mpg as the response
variable  we get better regression model  which is shown
in table i 
the final model after variable selection is given as
log gas mpg                  speed mph
   speed mph       speed mph       af       a f
     a f       a u          speed mph af
         speed mph ar  
we could use this model to predict mpg usage according to observed speed and acceleration information 

fi 
spline fitting of gas usage and trip
average speed

we investigated the relationships between all trip informations and trip average gasoline usage  the relationship between trip average speed and trip average gasoline
consumption rate is one of the most obvious pair  so we
implemented several supervised learning algorithms to
figure out the relationship  including polynomial fitting 
exponential fitting and spline fitting  we chose spline
fitting as our best estimation  though for higher order
polynomial provides smaller bias  the variance is enormous large  the same spline fitting parameters are used
for all vehicles trip information  the plot of spline fitting between trip average speed and trip average gas consumption rate is shown in fig    
  
     toyota prius
     toyota corolla
     honda civic
     honda accord
     subaru impreza
     honda pilot
     toyota camry
     cadillac cts
     vw gti
     subaru outback
     vw jetta
     nissan versa
     bmw    
     bmw x 
     acura mdx
     toyota camry
     mb gl   

  

average gas usage mpg

  

  

  

  

  

  

 

 

 

  

  

  
average speed mph

  

   

   

fig     trip average mph trip average mpg spline fitting

regarding of different vehicles curves  there are obvious difference in gas consumption rate between different
vehicles  the gas consumption rate could be as high as
   mpg for      toyota prius  and could also be as low
as    mpg for      mercedes benz gl      a difference
of a factor of   
the championship of gasoline consumption efficiency
competition is the only hybrid car in the list  the toyota prius could defeat all other vehicles in all speed range 
the hybrid energy recycle system improves the gas consumption especially in lower speed range  the low speed
mpg of prius is higher than     at the same time  all
other cars low speed mpg is below     the curve is
still lower than official labeled mpg     city    highway  indicating that lower speed is still affecting the gas
consumption performance even for hybrid cars 
the championship in regular vehicle division is also
japanese automaker       toyota corolla  actually 
japanese automakers dominates the energy efficiency

competition  the   most energy efficient vehicles are
japanese brands  including a full size suv  honda pilot 
although we did not consider the effect of the difference
of drivers driving behaviors  the result is sufficient to
indicate that japanese vehicles are more energy efficient
than others 
the size of the vehicles is also one of the key factor
affecting trip average mpg  most of the suv models
suffer  the contrast is more severe in high speed range 
avoid full size suv is a good way to save gasoline 
it is interesting to compare the mpg mph curve of  
toyota camry vehicles  the      toyota camry holds
one of the lowest mpg  in comparison  the mpg of     
toyota camry is much higher than which of the      one 
it is reasonable to contribute this to the degradation of
performance  still  we ignore the difference of drivers
habits 
regarding of different speed regions  it is universal that
the mpg is very low in very low speed region  saying 
below    mph  the gasoline consumption drops when
the trip average speed increases  then the average mpg
reaches a plateau  that mpg is relatively insensitive to
average speed  the mpg value usually reaches its maximum from    mph to    mph  varying for different
vehicles  then mpg drops when the average speed goes
to extremely high 
from the real time data  low trip average speed indicates very frequently stop and start  which is one of the
most inefficient driving mode  on the other hand  extremely high speed brings extremely high wind resistance
and tire resistance  which increases the mpg 
in our conclusion  in order to save gasoline consumption  you should replace super old car and buy or trade
in a hybrid  if you want to keep your current car  try to
pick up a good time to keep your average speed around
   mph and dont drive crazily fast even in a vacant
highway  to get maximum energy efficiency 

driving pattern driver recognition
through supervised learning

in this section we aim to detect if more than one driver
has drove a certain car  here we syntheses hypothesis testing method and classifiers to solve this problem 
based on the way data was collected  we found that for
some car  such as the      honda civic  the      nissan
versa and      toyota camry are only driven in some
certain time in a day  from the fig    shown in section   
for this situation  we need only to test if the collections
of data  which are recorded in different time periods  revealing different driving behaviors  if so  we may make
the conclusion that this car was drove by several drivers 
to test if different drivers have driven the car in different time periods  we can firstly pick two time periods
and assume two drivers was driving the car  we test the

fi 
following statement 
 h    the two time periods were droven by two
drivers 
verses
 h    the two time periods were droven by one same
driver 
to make the decision whether we should reject the null
hypothesis h    we use classify methods  i e  nave bayes
and support vector machine to verify the test  we gain
our result based on the following procedures 
   randomly choose     of the original data from the
two time periods  use them as the training sample 
and leaving the residual     to be the test dataset 
   after labeling training data from the first time period as class one  and the other time period as class
two  we implement nave bayes and svm on the
test data to see which class they belong to  we can
analysis on the outcomes to see whether the original two time periods are actually in the same class 
for example  if the proportion of wrongly predicted
samples is high in both time periods  we can draw
the conclusion that there is actually no large difference in the two time periods  thus they should be
in the same class 
   if the two periods are in one class  then the classifier
model  nave bayes or svm   which is constructed
based on the training set will not be significant to
class the test set  the predicted results will only
based on the sample sizes of training data from two
time periods  let
n      training sample of time period one 
n      training sample of time period two 
since the two periods are actually in one class 
then the testing data from time period one has
the probability p    n    n    n    to be assigned to class one and has the probability p   
n    n    n    to be assigned to class two  by comparing the predicting results with p  and p    we
can draw the conclusion whether the two periods
belong to the same class 
we perform this procedure on the      honda civic 
this dataset totally contains observations of   days  and
has    time periods  to simplify the results  we only select time periods           in day  data                in
day  data                in day  data   and           in
day  data      datasets in total to detect if any two time
periods belong to different classes  by running nave
bayes and svm  the results come as table ii and table iii 

table ii  predict error of nave bayes
predict error   nb 
data 
data 
data 
data 

data 
        
      
      

data 
      
        
      

data 
      
      
        

data 
      
      
      
   

table iii  predict error of svm
predict error   svm 
data 
data 
data 
data 

data 
        
      
      

data 
      
        
      

data 
      
      
        

data 
      
      
      
   

since we have make the number of sample sizes to be
same when testing two time period datasets  we only need
to compare the predict error with      if the error is
nearly      it means that no difference is show between
the two class  thus they should belong to one class  and
vice versa  based on the results predicted by nave bayes
and support vector machine  we might conclude that
data   data  might be in one same class  due to the predict error is around      while data  and data  should
not be in the same class  because the predicted errors
are far less than      we may draw the conclusion that
in the      honda civic  drivers were changed after  th
day  and should be more than   drivers drove that car 
we can adopt the same method to other cars and collect
other driving behaviors on different time periods 

driving pattern driver recognition
through unsupervised learning

since the relationship between trip average mpg and
trip average mph is one of the most key characters
of driving behavior  we also implemented k means clustering algorithm to explore potential patterns different
drivers for one vehicle  fig    illustrates the k means
clustering results of   different vehicles 
we could clearly distinguish   different regions in
mph mpg scattering plots  one region is mainly in low
speed range and another is in high speed range  which is
consistent with spline fitting analysis in previous section 
for some vehicles  two different clusters are very close 
which indicates the possibility of multiple drivers in the
vehicle is low  but for some vehicles  two clusters are well
separated  fig   b and fig   e   which is a sign of two
drivers  or two very different gas consumption modes of
the vehicle 
besides of the main aim of driver driving mode recognition  it is also interesting to observe that different vehicles drivers have different cluster patterns  which shows

fi 

  

driven in local area  which indicates the possibility that
the distance between the drivers workplace and home is
close  or the main use of the vehicle is not long distance
commute  the analysis is beneficial for driver recognition and for future commercial opportunities  for example  precision advertising 

  

  
  

average gas usage mpg

average gas usage mpg

  

  

  

  

  

  

  
  
 
low speed mode
high speed mode
spline fitting

 

 

 

  

  

  
  
average speed mph

  

low speed mode
high speed mode
spline fitting
 

  

 

  

 a       cadillac cts

  

  
average speed mph

  

  

  

  

  

  
  

average gas usage mpg

average gas usage mpg

  

  

  

  

  

  
 
  

low speed mode
high speed mode
spline fitting
 

 

  

  

  
  
average speed mph

  

  

low speed mode
high speed mode
spline fitting

 

  

 

 c       acura mdx

  

  

  

  
  
average speed mph

  

  

  

 d       subaru impreza
  

  

  

  

  

average gas usage mpg

average gas usage mpg

low speed mode
high speed mode
spline fitting

  

  

  
  
 

  

  

  

 
  

 
low speed mode
high speed mode
spline fitting

 
 

 

  

  

  
  
average speed mph

  

 e       mb gl    

conclusion and future improvement

 b       vw jetta

  

  

 

 

  

  

  

  
  
average speed mph

  

  

  

 f       toyota corolla

fig     k means clustering and spline fitting of   vehicles

different daily driving habits or the driver s   for example  the number of points in high speed region of the
     mercedes benz gl     and the      toyota corolla
is almost the same as those in low speed region  respectively fig   e and fig   f   it is reasonable to assume
that points in high speed region represent highway driving  and points in low speed region represent local area
driving  these two vehicles are equally driven in highway and local  in contrast  the      vw jetta are mostly

we sorted fragmental high frequency real time driving
information to well organized trip information  this information provided the first hand practical relationship
between trip average speed and trip average gasoline consumption rate  the spline regression provides highly visualizable mpg mph curves of different vehicles  which
gave a very intuitive guidance to find an optimal driving
speed and to choose a more energy efficient vehicle 
we also implemented both supervised learning method
and unsupervised learning method to try to distinguish
different driving patterns for different vehicles and  possible  different drivers in the same vehicle  supervised
learning requires some assertions but draw a powerful
conclusion that      honda civic may have   drivers 
unsupervised learning algorithms do not need any assumptions and could also provide useful hints 
there are still some open problems unsolved  firstly 
we still do not make full utilization of the data set  the
acceleration and change of heading degree do not help
us much in current stage  how to integrate the gas consumption with these parameters is an interesting topic 
furthermore  the lack of traffic information is a great
loss  if we could know the traffic information and build
a markov chain  we could use dynamical programing to
figure out the best action  throttle paddle  gear shift  etc 
to get best gasoline consumption efficiency 

acknowledgments

we thank metromile  inc  for providing real time driving information for our analysis 

fi