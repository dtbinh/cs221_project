a prediction reference model for air conditioning systems in commercial
buildings
mahdis mahdieh  milad mohammadi  pooya ehsani
school of electrical engineering  stanford university
abstract
nearly     of the total energy of commercial buildings in
u s  is consumed on the air conditioning system  machine
learning techniques can be used to predict building a c energy consumption to help with efficiently automating the air
conditioning process  this study focuses on an in depth analysis of stanford y e  building dataset to model the effect of
each building sensor measurement on the a c system energy
consumption  by training different data models using a variety of supervised learning methods  we discovered that  rd
order polynomial support vector regression  svr  model best
predicts the building a c system  however  all other trained
models we studied generated acceptably low training error
rates  smaller than       and higher then     correlation
with our labels  while linear regression is the simplest and
least accurate model used in this study  it works well with
a small training dataset and reaches the desirable accuracy
faster than other models 

figure    space heating and cooling accounted for     of total energy use in       from u s  energy information administration  commercial buildings energy consumption survey 
        

of corresponding feature in the prediction models  this can
guide the building managers to find which sensors play a
stronger role in determining the behavior of the building and
which sensors can be eliminated for economizing the total cost 
moreover  if the weights of some sensors are unexpectedly
different from their expected value  one may infer there is
either a deficiency in the sensor performance or its location is
not effectively provisioned  furthermore  a prediction model
for a building like y e  can provide a predictive model that
can be used in other campus building with similar structure 
the remaining of this report is organized as follows  first
we go through related works on machine learning applications
in prediction of building energy consumption in section    we
introduce our dataset in section   and also define the features
and labels used to train all models  in section   we describe the
three different supervised learning algorithms applied to the
dataset  finally  we discuss the results in section    followed
by the conclusion in section   

   introduction
according to the u s  energy information administration
 commercial buildings energy consumption survey  in      
    of the energy in commercial buildings is consumed on
air conditioning as illustrated in figure       
the a c system in y e  building is managed by a fairly
complex automated system  operating based on the present
outside inside atmospheric state of the building using numerous sensors for temperature  wind  solar energy  etc  using this
data the building consumes various levels of heating and cooling resources to maintain the building temperature at around
   c with    c fluctuation 
we make use of some supervised learning algorithms to
predict the amount of energy consumed to maintain the temperature at a desirable level  because of the numerical and
continuous characteristics of the dataset  we applied three different supervised learning algorithms including linear regression  support vector regression  and neural networks  different
parameter settings are used for each method to minimize the
risk of overfitting and underfitting 
resultant prediction models can give a clear insight on how
the building facilities work and how various sensors and controllers perform in the building  influence of each sensor data
on the overall performance can be implied from the weight

   related work
energy and sustainability issues have raised a large number of
academic research  due to big success of machine learning
and data mining approaches many have been convinced to
apply those methods in the context of residential and commercial buildings energy consumption  while predicting values in
residential and commercial buildings have outstanding differences  applied models on residential buildings in     give us
insight on conventional and well used models in this context 
dong et  al  in     apply support vector machines to predict

 mahdis stanford edu
 milad cva stanford edu
 pooya stanford edu

 

fienergy consumption of buildings in tropical regions where
have similarity to weather conditions to the framework which
we are studying  the stanford campus  in addition  the authors
in        claim artificial neural networks achieve good results
in predicting consumed energy in commercial buildings and
offices 

   data set
the stanford y e  building has      sensors that report
building energy system status and performance every minute 
these sensors measure a variety of physical properties such
as inside outside temperature  air humidity  wind direction 
plug loads  etc  this information is provided to the users
through an online database system called seeit hosted by
the university      in this wealth of information  we were
interested in predicting the a c system energy consumption
via numerous environmental properties affecting it 
the y e  a c system energy consumption mostly consists
of the energy consumed on providing the cold water and hot
steam coming into the building  the cold water and hot steam
are provided by a central building in the university campus
which is responsible for heat steam and cold water spreading
out the flow to all campus buildings  the natural choice of
a label for this study would be energy consumption of the
building by the a c system  however  since we do not have
access to this data  the total heat exchange in time unit is
linearly calculated based on the heat capacity relation from
fluid dynamic  using the flow rate which we recorded from the
available data on seeit  we chose the following two labels 
 building a c cold water flow rate
 building a c hot steam flow rate
selecting flow rate and building learning models for predicting those labels is valuable in a number of application such
as resource sharing and energy management on campus  if
the model is capable of predicting future fluid consumption 
managers can be informed about uncommon peaks in urgent
situations like sudden temperature rises in advance in order to
make appropriate provisioning  this can alleviate the issues
like the heat wave incident in summer      when the campus
management shut off all commercial building a c systems in
order to sustain the a c support to stanford hospital and a
few other sensitive buildings 
our studies of the existing datasets of the y e  building
sensors suggested potential correlations between the following
building measurements and labels 
 outside temperature humidity
 outside wind speed direction
 building atrium automatic windows
 inside temperature  space air temperature 
 hot chilled water  differential  temperature  pressure
 solar energy radiation diffuse
figure   shows the changing trend of some of the features
along with the labels  the first step was to select the right
features from the list by computing the correlations and mutual

figure    strong correlation between different sensor measurements

information mi   most features are visually quite correlated
with the labels  however  we found out some features are less
correlated than perceived and some others are correlated with
some time shift  for example  the water flow rate and inside
temperature are correlated with a time lag which is caused by
the fact that chilled water changes the temperature after some
time proportional to the diffusion rate of heat in air 
table   lists some of the measured correlation and mi analysis between features and the cold water flow label in summer
season  the time column suggests the time lag that maximizes
the correlation and mi between each feature and the label 
features
outtemp
windspeed
spacetemp
humidity
solarrad

corr
    
    
    
    
    

max
    
    
    
    
    

time
 
     
     
     
     

mi
    
    
    
    
    

max
    
    
    
    
    

time
 
     
     
     
     

table    summer correlation and mi analysis  regarding to
cold water flow rate   time corresponds to the shift in data
between the label and the measured feature in order to get
the maximum correlation and mutual information  this table
is generated from the data collected in july      

based on the correlation and mi information  we excluded
wind direction  automatic windows states  and diffuse solar
radiation from our feature sets  for the features that were
correlated with our labels with a time shift  we also added
the shifted features to the feature set  surprisingly  adding
the shifted features ended up not significantly improving the
results in any of the models 
because of the obvious difference in the feature label relation in different seasons  we chose to train different models
for summer  jul  st       to aug  st        and winter  jan
 st       to feb  st        seasons  this model can be expanded to all    months of the year and can be made even
more accurate by combining data from several years 
 

fi   prediction methodology

this step is visualized for cold water flow rate in july as an
example in figure    while a similar process has been done
for other prediction models as well 

y e  building sensors are recording continuous numerical values  because of these characteristics of features and labels  we
were to use regression learning algorithms  we applied three
different supervised algorithms on the dataset  including linear
regression  support vector regression svr   and neural networks  different parameter settings are used in each method
to find the one with minimum train and test error which also
minimizes the risk of overfitting and underfitting 
in this section we introduce each method and its parameter
settings in more details  linear regression method is discussed
in part      while svr and neural networks are explained in
part     

   results and discussion
to have a fair comparison over various prediction models 
unique train and test sets were applied to all models and corresponding errors were computed  squared difference of predicted and measured values normalized by the set size was
chosen as the error metric  figure   depicts the comparison
results of built models for july      dataset 
we assume any error value lower then      is acceptable 
in this study  as shown in figure    all methods match our expected error rate by a large margin  a related observation from
the comparison chart is the same error percentage for linear
regression and linear svr  it aligns with the expectation since
the gist of the linear svr is nothing but linear regression with
an acceptable margin  on the other hand  applying  rd order
polynomial or radial basis kernel resulted in higher accuracy 
it implies linearity of data sets in a higher dimension 
the error rates in this figure also imply an interesting fact
about the neural network model  this model achieves the least
training error among all other models  despite its relatively
higher validation and test errors  one may infer that neural
network is overfitted and may not have the acceptable performance in the context of our study 
figures   and   illustrate the average trends of hot steam
and cold water flow rates over    hours in one month  they
show both linear regression and  rd order polynomial kernel
 svr  as the accurate non linear model  track the average
monthly flow rates closely  the svr tracks the measured labels more precisely  indicating the more accurate prediction by
this model  however  the computation time of svr is noticeably higher than linear regression  making linear regression
a more practical technique for this application  to formulate
the accuracy by other metric  we computed the correlation
of the measured labels and predicted values of both models 
we observed higher than     correlation for all models and
training sets 
figures   and   show the train and test error rates for linear
regression in january and july  all error rates reach below
the acceptable error rate of      with relatively small training
set sizes  the small training set size for predicting flow rate
makes our prediction scheme quite attractive in practice  the
low error rates in these graphs also suggest our prediction
models are well fitted for this application 

     linear regression
the first regression method to apply on the y e  building was
the linear regression algorithm  it gave a clear vision about
the data characteristics and helped us to adjust our features
and training size such that our model is neither overfitted nor
underfitited 
we then evaluated the effect of various bandwidth parameters    on the prediction accuracy of the weighted linear
regression  our conclusion was due to the high correlation of
the label with the input features  different bandwidth values
result only in marginal changes in the prediction outcome 
thus  in this work  we choose to report our results for the
unweighted linear regression model 
       model training  
the training model was applied to      elements from
the input set selected randomly  the test set consists of    
randomly selected elements from the remaing part of the input
set 
     svr and neural networks
the authors in       have claimed that more sophisticated models like support vector regression and neural network work
well for the same framework of commercial buildings energy
prediction  thus we decided to evaluate the performance of
other prediction models as well as linear regression  including
 svr   svr and neural networks 
       model training   optimization  
working with complex svr models can be tricky  as the
influential parameters and kernel should be chosen carefully
to result in the optimal solution  misplacing the parameters or
choosing sophisticated kernels could easily yield in overfitting 
various models were built and compared using different level
of kernelization  in addition  in each try     of the training
data was used as validation set to quiz if the model was suffering from high variance and overfitting  resultant validation
error was investigated to compare the accuracy and to find the
optimal point of the effective parameters for each model  such
as  c    for  svr   c    for  svr   b    for kernelized
svr ans n as the number of hidden nodes in neural network 

   conclusion
three prediction models  svr  neural networks  linerregression were built for prediction of cold water and hot
steam flow rates in commercial buildings  although currently
there are individual models for each season  the prediction
systems can be combined by introducing time as a new feature
 

fifigure    normalized test  validation  and train errors for various svr and linear regression trained models  blue and red
stacks correspond to models for cold water and hot steam
flow rate respectively   july      dataset 

figure    y e  building hot steam and cold water flow rates
in    hours  on    minute intervals  in january       the two
dashed graphs illustrate the average of flow rate daily measurements in this months  the solid lines illustrate linear regression and svr predictions for both flow rates 

to accumulate the results and improve the prediction accuracy 
all our prediction models generated acceptably low training
error rates  smaller than       and higher then     correlation with the labels  while linear regression is the simplest
and least accurate model used in this study  it works well with
a small training dataset and reaches the desirable accuracy
faster than other models 
our prediction model can be used in predicting the flowrate of similar buildings on campus that do not have such
suffisticated sensor infrastructure for adjusting its a c system 
furthermore  computed weights can assist building managers

figure    trend of validation error while the effective parameters are swept  a  c   for linear   svr  b  c   for linear
  svr  c  c   for  rd order polynomial kernel   svr  d  c 
 for  rd order polynomial kernel   svr  e f  c     b   for radial basis kernel   svr  g  number of intermediate nodes in
hidden layer for neural network 

 

fifigure    y e  building hot steam and cold water flow rates in
   hours  on    minute intervals  in july       the two dashed
graphs illustrate the average of flow rate daily measurements
in this months  the solid lines illustrate linear regression and
svr predictions for both flow rates 

figure    training error and test error rates versus training set
size for linear regression model for hot steam and cold water
flow rates in july     

references
    seeit  y e  building sensor database software  http   stanford edu 
class cee    labs seeitv     setup msi  accessed october  th       
    a  e  ben nakhi and m  a  mahmoud  energy conservation in buildings
through efficient a c control using neural networks  applied energy 
vol      no     pp            
    b  dong  c  cao  and s  e  lee  applying support vector machines
to predict building energy consumption in tropical region  energy and
buildings  vol      no     pp               
    r  e  edwards  j  new  and l  e  parker  predicting future hourly residential electrical consumption  a machine learning case study  energy
and buildings  vol      pp               
    b  hojjati and s  h  wade  us commercial buildings energy consumption and intensity trends  a decomposition approach 
    s  wong  k  k  wan  and t  n  lam  artificial neural networks for
energy analysis of office buildings with daylighting  applied energy 
vol      no     pp               

figure    training error and test error rates versus training set
size for linear regression model for hot steam and cold water
flow rates in january     

to find the most and least influential measurements  and economize the overall sensor assembly and maintenance cost 

acknowledgement
we would like to thank professor john kunz  scott gould 
and gerry hamilton for their insightful advises and helps in
collecting y e  building data and processing them as well as
the cs     course staff for their support during the course of
this project 
 

fi