a novel method for predicting the end price of
ebay auctions
stanford cs     fall     
david nicholson

rohan paranjpe

department of applied physics
stanford university
stanford  ca      
email  davidjn stanford edu

department of electrical engineering
stanford university
stanford  ca      
email  rap     stanford edu

abstractthe ebay marketplace offers millions of items for sale
each day  understanding and being able to better predict the
outcome of these auctions is important to buyers and sellers
alike for individual profit maximization  in this paper  we explore
the use of multinomial logistic regression  softmax   naive bayes
 nb   and uniform prior naive bayes  upnb  algorithms to
predict both whether or not an item will sell and how much it will
sell for  in predicting whether an item will sell or not  we find that
the nb classifier performs with greater than     accuracy over
a test data set  for final price prediction  we find that for multiclass binary prediction decision tree models  upnb is able to
outperform both the general nb and softmax algorithms  unlike
algorithms from previous works  our upnb classifier uses the
item title as the sole contributor to the feature vector  we provide
a discussion on the results  as well as some insight about our
particular data set and avenues for future exploration 

i  i ntroduction and m otivation
ebay has been the leading online auction marketplace for
nearly two decades  while auction final sale prices generally
reflect the intrinsic item value      there exists variability in
sale prices that may be attributed to factors such as item
start price  seller ratings  or item visibility  in this paper  we
aim to build a model which identifies and utilizes important
item features to predict both whether or not an item will sell
and how much it will sell for  armed with this knowledge 
sellers can optimize their listing strategies so as to maximize
estimated profits  while buyers can more easily identify good
and bad purchases 
previous studies of final sale price predictions have used a
large selection of features with classification and regression
trees  cart      or nearest neighbor clustering      another
approach focused primarily on the text description  but also
included additional weighting features in a regressive analysis
    
the work presented in this paper extends upon these previous works as follows  each of the three papers trained and
tested on only items that sold  we aim to make this as a
prediction  in our nb and upnb schemes  we use only the
item title text  while others used a mix of item features  finally 
to our knowledge  we are the first to use a classifier based
solely on the item title text to make our predictions 

general 
data collection period
category studied
total completed auctions  pre post filtering
total sold auctions  pre post filtering
percent sold
average   total bids
average start   end price
total sales volume
words in title dictionary  all items   sold items
approximate classification errors  s  
naive bayes  sold unsold
softmax regression  final bin
multi class naive bayes  final bin
multi class uniform prior nb  final bin
common words  classical music
indicative of selling
indicative of not selling

                 
music   records
            
           
     
            
               
       
           
   
   
   
   

concerto  tchaikovsky  brahms 
organ  schumann
digital  tulip  ensemble  great  ed 

table i  data at a glance 

ii  data c ollection
auction data is accessed via ebays application programming interface  api      using the python software development kit  sdk       after signing up for a developer account 
api calls can be made in an automated fashion  allowing
autonomous data scraping  keyword searches are made using
the finditemsadvanced function  and specific item information is obtained using the getsingleitem function 
data is returned in xml format  which is then parsed for
insertion and storage in an sql database 
we gathered as much information per item as possible 
features stored included  item number  item title  start time 
end time  text description  detailed item specifications    seller
feedback percentage and total score  shipping costs  return policy  and image presence  furthermore  each item was queried
regularly through its complete auction duration so that page
views  current price  and bid counts could be tracked as a
function of time 
  these vary by auction category  and are optional for sellers to include  for
music records  this includes genre  condition  and many other specifications 

fidiscretized end prices labeled by y  the n dimensional feature
vector x  and a training set s as follows 
s    x i    y  i   
 i 

r  

 i 

          k 

x
y

n

for i           m
n   number of features

for a given feature vector x  we will want to maximize a
likelihood function over the bins 
n
y
y   arg max p y 
p xi  y 
   
y

i  

the algorithm needs to identify the appropriate features for
x as well as to model p xi  y   with this framework  the sell not
sell prediction becomes a binary decision problem and the end
price prediction becomes a multi class classification problem 
a  naive bayes
in order to predict whether or not a given item would sell 
we implemented a multinomial naive bayes classifier with
the item title as the sole contributor to the feature vector  a
complete word list v              v    was created from all
item titles in the complete set  for each new item on which
to make a prediction  our feature vector x i  is of length  v   
where the v th entry represents the number of times that the
v th word appears in the title 
the maximum likelihood estimates  j y       for each word
are calculated from the training set data 
fig     main  histograms for the start and end price distributions of
the items in our data set  inset  the same histograms shown with
smaller bin sizes  the peaks at common start and end prices show a
non smooth distribution  which may play a role in our classification
errors 

in an effort to reduce the size and scope of our data  we
restricted ourselves to a single category  music   records  calls
to the finditemsadvanced function were made daily 
with parameters set to a blank keyword search and to return the
most recently listed items with each call  likewise  we called
the getsingleitem function daily for each live auction in
order to trace the temporal data 
before analysis  the auction data is processed to remove
potentially complicating outliers  for the work herein  the filter
removes items where the complete text description  not just the
title  contains any of the following words  skip  skips  damage 
damaged  broken  warped  scuffs  and scratches  previous work
performed similar filtering to reduce their set by          this
filtering reduces our data set by     and increases our upnb
prediction accuracy by      percent 
iii  m odeling the p roblem
like other works        we discretize the end prices as a
set  b  of k equally sized bins  each of size  b 
b       b   b           k    b 
where the jth element of b represents end prices in the interval
   j    b  jb        we model the prediction problem using k

j y     p xj     y     
n
o
pm pni
 i 
 i 
  
i  
j   i xj   k  y

 
pm
 
 i      n
i
i   i y
j y     p xj     y     
n
o
pm pni
 i 
 i 
i
x
 
k

y
 
 
j
i  
j  

 
pm
 
 i      n
i
y
i
i  

   

with ni as the number of words in the title of the ith training
example  y  i      representing unsold items  and y  i     
representing sold items  with p y      as the percent of items
unsold in the training set and p y      as the percent of items
sold in the training set  a prediction is made on a new test
item using equation     
before performing this analysis  words that appeared only
once amongst all titles were removed from the word list 
furthermore  words shorter than three characters  and the
following common words  were removed from the list  and 
for  from  that  there  these  this  and those  this analysis
provided an error s        when predicting on all genres 
b  multinomial logistic regression
the first multi class algorithm we attempted was a softmax
regression  our main assumption is that there exist k multivariate gaussian distributions for each x y  with equivalent
covariance matrices after zeroing out the mean 

fifig     flowchart description of the algorithm

the feature vector for each item included the starting price 
starting time  condition  seller feedback score  whether returns
were accepted  shipping price  duration of the auction  genre
 e g  rock  country  etc    and a constructed page views
parameter  the page views parameter roughly corresponds to
the average page views per hour during the auction listing  our
reasoning was that this gives some insight to the popularity of
the item and may help in estimating its end price 
the softmax model and equations are as follows 
t

ej x
p y   j x                k               k     k
p t x
e i
i  
 
  t  
j   log j  
  j 
j  
  j
where  is the zero mean adjusted covariance matrix of the
data  k are the class priors for y  and j is the averaged
feature vector for items that end in bin j  we then argmax j
over each jt x for each item 
this method worked decently  predicting with s       
for the items in our test set with b     and a maximum
price range of      after implementing a feature selection
process  a surprising result we found was that the starting price
of the item dominated the regression more than we initially
predicted  excluding the starting price did not improve our
results  seeing this  we decided to look for new methods to
make our predictions 
c  multi class naive bayes
in an effort to extend the title based naive bayes algorithm 
we developed a multi class naive bayes scheme  the final

prices are discretized into bins of size b dollars  and a series
of title based naive bayes classifications are made 
the first classifier asks  does the item sell for more or less
than     the second asks  does the item sell for more or less
than   b   the third  does the item sell for more or less than
   b    and so on  each decision is made using a standard
naive bayes classifier and requires a retraining of the data set 
the first classification is identically the sold unsold problem
and the remaining classifications determine which final price
bin  y  that the algorithm should predict 
the practical implementation is illustrated in figure     
for the first price at which an item is deemed not to sell 
the algorithm predicts the preceding bucket as the final sale
price  in the case where yi   binof start pricei    y is
reassigned to y  binof start pricei    those that were
deemed to sell at greater than all bin values are assigned the
maximum bin value 
when training on all genres and with the same bin values
as the softmax regression  this algorithm performs with s 
     
d  multi class  uniform prior naive bayes
our final algorithm is derived from an analysis of the end
price distributions  we were finding that weighting the probabilities  p x y   by their class priors  p y   j   tended to skew
the multi class classifier predictions  we propose something
new  given a multi class binary decision tree process  we
assume a uniform prior over all classes  this effectively states
that the probability of a given item for selling above a price
is equal to the probability of it selling below that price 
this algorithm predicts better than softmax and nb in
general  reducing our classification error to s        with
   bins and s       with    bins  this result is presented in

fifig     classification error vs  bin sizes for the nb  red  and upnb
 blue  classification schemes  the spikes at    and     in classification error with unbp are likely off by one misclassifications due to
huge amounts of end prices distributed at places like               
etc   see figure    

as expected  figure     shows that the classification error
improves with increasing bin size  the absolute error  shown
in figure      helps display where our prediction inaccuracies
lie  the histograms largest bin represents all items where yi  
yi   the second largest bin represents where our predictions
were off by one bin  the inset shows the raw data  the solid
line represents points where yi   yi   points below the line
represent where yi   yi   and points above the line represent
where yi   yi  
we can see the large majority of our errors are overpredicting the final sale price  and that most of the inaccurate yi
predictions fall in the closest bin to what would have been the
correct prediction  we hypothesize that this is a direct result of
the uniform prior assumption  still  there exists a substantial
amount of outliers where yi  yi   dealing with these outliers
will help improve the robustness of our predictions  as well as
make this tool a safer bet for practical use 
finally  some representative successes and mistakes in our
predictions are shown in figure     
v  c onclusions
a  remarks

fig     main  the binned error histogram for the upnb scheme 
note the majority of misclassifications are off by one errors  inset 
relative error of the raw data  most of the misclassifcations made
by upnb overpredict the end price because the uniform class prior
assumption does not skew the likelihood 

comparison with the pure naive bayes algorithm performance
in figure      we hypothesize that this improvement could be
attributed to our decision making process  and we are still
exploring the full repercussions of assuming a uniform prior 
iv  a nalysis
a  errors and results
the absolute error for each item  i abs   and the classification error on the entire set  s   are measured as 
fi
fi
i abs   fiy  i   y  i  fi
m
o
   
  x n  i 
s  
i y    y  i 
m i  

one of the more interesting insights we were able to draw
from this project was the importance of particular features
over others  one of our biggest assumptions prior to the start
of this project was the importance of the start price  in reality
we found that the start price is not always a good indicator
of the end price  this can be attributed to the items intrinsic
value or the flexible valuation of an item from user to user 
these factors may be predominant in categories featuring
collectibles 
we found that eliminating the start price from the classifier
and focusing on the words in the item titles improved the accuracy  this came as a surprise initially  but after scrutinizing
the data  we began to see trends associated with particular
words that affect the final sale price  this became clearer as
we narrowed the data set down to test on particular genres 
and artist names or keywords in the title tended to boost or
lower the probabillity of selling for some price  as an example 
the words most indicative of selling and not selling for the
classical music genre are shown in table   
b  further work
there are many directions to proceed in improving the
performance of our algorithm  keeping with the title based
naive bayes theme  we hope to extend the classifier to include
bigrams and trigrams to capture particular phrases  e g  very
rare  and complete artist names  which may help deal with
the outlier problem discussed in figure     
another direction wed like to try is to use a highdimensional kernel mapping and subsequent set of svms on
our model  this approach can also help capture the bigram
and trigram features without explicit representation  and may
perform better than the pure nb algorithms 
the novelty of our work is that our nb classifiers use
feature vectors based entirely on the titles of the items  as

fifig     left  some remarkable end price predictions made using upnb  right  misclassifications due to the over predicting nature of upnb 

previous works have shown  there is wealth of information
available in the rest of the features extracted for each auction 
future work will seek to identify the most relevant of these
features and incorporate this information with our title based
predictions 
r eferences
    w  vickrey  counterspeculation  auctions  and competitive sealed tenders  the journal of finance                    
    r  ghani and h  simmons  predicting the end price of online auctions 
decision support systems                         
    i  raykhel and d  ventura  real time automatic price prediction for
ebay online trading  association for the advancement of artificial
intelligence       
    d  van heijst  r  potharst    m  van wezel  a support system for
predicting ebay end prices  decision support systems                  
    http   developer ebay com common api 
    https   github com timotheus ebaysdk python 

fi