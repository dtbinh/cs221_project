analysis and clustering of musical compositions using melody based features
isaac caswell

erika ji

december         

abstract
this paper demonstrates that melodic structure fundamentally differentiates musical genres  we use two methods  the
k means algorithm as an unsupervised learning method for understanding how to cluster unorganized music and a markov
chain model which determines relative probabilities for the next notes most likely value  and evaluate our algorithms
accuracy in predicting correct genre  our experiments indicate that the k means approach is modestly successful for
separating out most genres  whereas the markov chain model tends to be very accurate for music classification 

 

objective

    carnatic  south indian classical  compositions in equivalent scales to the irish modes 
shankarabharanam  major   kharaharapriya  dorian   harikambhoji  mixolydian   bhairavi  minor   and malahari  incomplete minor  

this paper demonstrates that melodic structure  i e 
note subsequences and which notes are likely to follow
other notes  can fundamentally differentiate musical
genres  without additional information about instrumentation  chord structure  language  etc 

 smaller data sets  a variety of childrens songs
and    sarali varasai  carnatic vocal exercises  in
ragam mayamalavagowla 

this idea is inspired in part by the concept in indian
classical music that each raga  or scale  is distinguished
by its own characteristic melodic phrases  or melodic
idioms  this occurs in western classical music also  for
instance  consider the typical third  trilled second  root 
root to end phrases in baroque pieces in the major scale 

all data are expressed relative to the root  the key is
disregarded 

 

potential applications of our models include  using
the k means algorithm to define musical clusters for
melodies without specified genres  using either k means
cluster centroids or the markov chain model to determine known melodies similar to a new melody  using
the either technique for automated genre prediction 
and using the markov chain model to generate new
melodies within a musical genre or tradition 

 

   
     

methods
k means clustering
rationale

given a dataset of melodies with unknown genre  can
we identify which melodies are similar  to answer
this question  we looked for an unsupervised learning
algorithm with a non probabilistic model to identify
song clusters  although we believed that our data
would fit subspaces better than clusters  we did not
want to obscure the datas original features in our
results  therefore  we decided to use the k means algorithm as opposed to alternatives such as the pca model 

data

in order to test the success of our clustering  we
ran k means on two melody genres with only two
clusters  used maximum recall probability to determine
the correct cluster assignment  and calculated an
f score to account for both precision and recall error 
a higher f score indicates less error and better success 
to account for variability in k means  we averaged the
f scores for multiple iterations of k means 

songs were stored as arrays of integers  with each integer
representing a musical note  rhythm was ignored  the
sources of data were the following 
       irish traditional songs scraped from thesession org in the dorian  mixolydian  ionian  major 
and aeolian  minor  modes and in the time signatures                    and      the majority
      were major 

eventually  to determine the ideal cluster for a
new song  one could compare the songs distance in the
feature space to the cluster centroids  and the cluster
with the centroid a minimum distance away would be
considered the cluster of best fit 
 

fi     

where each term p di  dik    i    is the smoothed
probability given by the markov chain that the k note
subsequence dik    i   henceforth also  feature  is
followed by the note di   this equation is the result of
a slightly stronger variant of naive bayes assumption 
 i 
it is derived by assuming that note dj is independent
of all notes further than k notes before it  therefore 
because of the varying sizes of the data sets  we used
a standard        hold out split for the large data
sets and leave out one cross validation  loocv  for
the smaller ones  the markov chain model tended to
perform the quite well  with training error of around
   for k     for the entire data set  the following data
involve representations of the songs in terms of relative
degree 

feature definition

we define our features to be a sequence of absolute notes
of a specified length  such as c e g   we characterize
each composition by the frequency of each feature in that
composition  and cluster the compositions based on their
location in the resulting feature space 
     

feature subset selection

since using all possible note sequences as features
would result in a too sparse feature space for k means
clustering  we selected a subset of features to serve as
the axes for the feature space 
we considered two methods for selecting features 
   selecting the total most frequent features across all
songs in the two genres  and    selecting the features
with the highest variance in relative frequency  i e 
features that are very frequent in some categories and
very infrequent in other categories 
     

observing the performance of the model as a function of
k provides important insight into the data  figure  b  
over a variety of parameter values and data subsets 
markov models of level   and   showed the least average
training error 

number of features

the failure of k     to predict genre well demonstrates that looking only at one note before  suggesting
melodic idioms of length two  i e  intervals   is too
myopic   note that it still performs significantly better
than chance  however   longer features also lead to
poorer models  this also makes intuitive sense  in that
longer subsequences begin to be characteristic of the
overall melody of a specific song  and are consequently
long enough to be easily consciously recognized  the
drive to be unique will therefore discourage songs from
developing similar features of this length  equally importantly  the data becomes sparser for these k values 
because the size of the feature space is exponential in
the length of the feature 

we varied the number of features selected for k means
clustering from   feature to     features    feature would
be equivalent to seeing if a single note sequence is more
prevalent in some genres than others  the maximum
number of features is numbero fn otesf eaturel ength  
     

feature length

we examined features from length   to    for feature
length    our algorithm is equivalent to analyzing
differences in note frequency distributions 

   

markov chain model
we postulate moreover that levels three and four
showed the best genre categorization because they
are similar to the most common lengths of measures 
which are natural structural breaks in melody  irish
songs in particular tend to be strongly rhythmic  and
furthermore are a robuster dataset 
we therefore
separated the irish tunes into four categories  based
on their time signatures                     and     
predicting that k     would predict better for     
    and      whereas k     would predict     better
 figure    

for our second model  we modeled each genre with
a markov chain model for a variety of levels k  this
model makes intuitive sense as a way to capture melodic
idioms  because it explicitly models each note as being
drawn from a probability distribution dependent on the
k notes directly preceding it 
for a level k markov chain model  we model the
probability p  d i   g  that a held out document d i  of
length n belongs to a genre g with the following formula 
p  d i   g   

n
y

 i 

 i 

p dj  djk    j    g 

j k  

 

fithis certainly turned out to be true for k      for
k     the odd numbered time signatures fared much
better  but still had higher error than      this could
either indicate that songs in the tempo     tend to be
more self similar and therefore predictable  or it could
be a result of the fact that this category has more songs 
the effect of the length of feature chosen can therefore
be viewed as  to some extent  implicitly modeling low
level structural elements of the songs  this illuminates
the inevitable bias of a simple model like this over
a domain  music  renowned for its complexity  this
is supported by the fact that increasing the size of
the dataset did not have a significant effect on its
predictive capability  a model which explicitly takes
the structure into account  such as a hierarchical feature
model  would certainly be excellent for this task  but
it was beyond the resources of the authors to implement 
by considering the relative degree of notes in a
melody instead of the absolute displacement in half
steps of a note from the root  as we do with the markov
chain model  we demonstrate something even more
surprising  within the same musical tradition and the
same genre  one can distinguish songs from different
scales  even when projected onto the same relative
scale  it is easy to suppose  for instance  that major
melodies and minor songs are fundamentally the same 
differing only in that the latter have flat thirds  sixths
and sevenths  this paper  however  demonstrates that
at least for irish folk tunes  this is not the case  each
mode instead appears to be characterized by particular
relative melodic idioms that are independent of the
absolute difference in half steps from the root 
this trend is especially visible in irish folk music 
one reason why this trend might be particularly clear
for this genre is a result of the instruments that the
songs are played on  many traditional instruments 
such the penny whistle  feadg  and the harp  are tuned
diatonically  i e  the white keys on the piano   and so
different modes are also necessarily in different keys 
this can affect which melodies are the easiest or most
possible to play  on the penny whistle  for instance 
it is particularly easy to go to the seventh  all fingers
down  before hitting the root  one finger up   whereas
this pattern is impossible in the major scale except for
in the octave above 

 

fitable    f scores for feature subset selection by highest frequency
genre

sarali varasai
malahari
childrens tunes
harikambodhi
shankarabharanam
bhairavi
kharaharapriya
irish major
irish minor
irish dorian
mean f score       

malahari childrens harikam  shanka  bhairavi
tunes
bodhi
rabharanam

kharaha  irish
rapriya major

irish
minor

irish
dorian

      

      
      
      
      
      
      

      
      
      
      
      
      
      
      

      
      
      
      
      
      
      
      
      

      
      

      
      
      

      
      
      
      

      
      
      
      
      

      
      
      
      
      
      
      

irish
mixylodian
      
      
      
      
      
      
      
      
      
      

table    f scores for feature subset selection by highest variance
genre

sarali varasai
malahari
childrens tunes
harikambodhi
shankarabharanam
bhairavi
kharaharapriya
irish major
irish minor
irish dorian
mean f score       

malahari childrens harikam  shanka  bhairavi
tunes
bodhi
rabharanam

kharaha  irish
rapriya major

irish
minor

irish
dorian

      

      
      
      
      
      
      

      
      
      
      
      
      
      
      

      
      
      
      
      
      
      
      
      

      
      

      
      
      

      
      
      
      

      
      
      
      
      

figure    f score by number of features

 

      
      
      
      
      
      
      

irish
mixylodian
      
      
      
      
      
      
      
      
      
      

fifigure  
 a  f score by number of features
 b  average classification error over held out documents in
all genres  for the complete dataset  minus the smaller data
sets     categories 

figure    training error versus time signature  beats per measure   when training with features of length    right   songs
in     are much more accurately classified  a feature of length    left  improves the classification of odd valued tempos
significantly  but are still not classified as well as     

 

fi