electrical energy modeling in y e  building based on
distributed sensors information
mahmoud saadat

 

saman ghili

introduction

close to     of the primary energy consumption in the u s  comes from commercial and residential buildings      therefore  reducing this energy consumption is very important  both
economically  and environmentally  due to the amount of co  emitted in the process of generating the electricity   predicting the energy consumption of buildings  energy modeling  is a
key component in reducing the building energy consumption  two traditional types of energy
modeling are forward modeling  using purely physical simulations  and inverse modeling  using
statistical methods along with expert knowledge  to relate the energy consumption to a set
of general inputs such as the outdoor temperature  etc        if we have access to sensor data
 both inside and outside the building  however  a better alternative is sensor based energy modeling using statistical machine learning techniques      uses seven different machine learning
algorithms to predict the total hourly energy consumption of three residential buildings  called
campbell creek homes  designed to evaluate the effectiveness of residential construction and
efficiency technologies in a controlled environment  in this project  we apply three of these
algorithms  simple linear regression  support vector regression or svr  and least squares
support vector machines or ls svm  to the energy consumption and sensor data from the
y e  building on stanford campus  this rich data set allows us to model different parts of
the total consumption  i g  lighting  ac  plug loads  etc   separately  which could lead to more
accurate results compared to the case where we are modeling the total consumption as a whole 

 

the y e  data

the yang and yamazaki environment   energy building  y e    is a good case study for
energy performance modeling  a number of electrical power sensors are installed throughout
the building  the power sensors measure lighting  plug load  and overall power at different floors
and portions of the building  as an example  figure  a below shows that light is measured
on every floor  plug loads are measured on west and east portions of each floor separately and
a number of other power sensors such as the server room  cafe  etc  are also available  the
sensors data is collected every minute in see it database and can be accessed  plotted  and
exported using see it application  an example of a plot generated by see it is shown in
figure  b  in this plot  the electrical power of the caf on the first floor and outside lighting are
illustrated in a one week period from          to          

 

fi b  sample power consumption time series plotted by see it 

 a  the location of sensors 

 

algorithms  attributes  and features

   

algorithms

let x be a vector of attributes   x  be a feature mapping  and   x i    y  i    m
i   be our training
t
set  we are looking for a hypothesis in the form of hw b  x    w  x    b  in linear regression 

p
 i 
 i   
  in svr  w and b are obtained from the
w and b are minimizers of m
h
 x
 

y
w b
i  
following quadratic program     
m

minimize
w b

x
  t
w w c
 i   i  
 
i  

y  i   wt  x i     b     i  

 im

wt  x i      b  y  i      i  

 im

     

and in ls svm we have to solve the following optimization problem     
m

minimize
w b

x
  t
w w c
i 
 
i  

wt  x i      b   i   y  i   

     

 im

where c and  are tuning parameters  and i and i are slack variables 

   

attributes

first we note that time  measured in hours  should be included in the model for any part of the
total consumption  if everything else was fixed  one
 would expect
  to be a periodic function of
 
time  period   h   therefore we include sin t  
and
cos
t
in our attributes  besides time 
  
  
we could include different attributes when modeling each data set  in modeling the lighting
power  we add the illumination l  measured in lux   in modeling the power consumed by
the ac system however  we add two other attributes  the outside dry bulb temperature t  
and an binary variable s indicating whether the main window is open or closed on each floor 
also note that some of these attributes are different on different floors  which means that some
of the modelings should be done separately for each floor  when modeling the total power
 

ficonsumption of the building  we include all of these attributes  in order to distinguish between
weekends or holidays and weekdays  we can add a binary attribute d that is   on the weekdays
and   otherwise  or we can model them separately 

   

features

if we use the kernel trick for training in ls svm and svr  we will not need to explicitly write
down the features  however  in ls  or when we are using a linear kernel in ls svm and svr 
we need to state the features explicitly  here we briefly explain what features we are going to
use for those cases 
for features
that are functions of time  because of the periodicity  we use  nt features

 
t
 nk  
  where nt will be determined using a feature selection scheme  for
 sin kt      cos kt  
  
the outside temperature and illumination  we use polynomials of degrees nt and nl respectively 
although the degree of each of these polynomials can also be determined using a feature selection
scheme  they are easier to tune intuitively  for example  it makes sense to use a polynomial of
degree   in the outside temperature  the reason is that a cubic polynomial can capture the
facts that i  the needed power is positive if the outside temperature is either below or above the
set point temperature  and ii  the power needed for cooling is different from that of heating 
finally  the interaction of these features can also be used  specifically  we should include
the interaction of the holiday and weekend indicator d with all the other parameters  this is
equivalent to modeling these days and the weekdays separately 

 

implementation and results

we train the ls and ls svm for the power consumption data gathered every over a   months
 from february  st to october  st         once every    minutes     and assess the accuracy of
the trained model by looking at the coefficient of variance  cv  for a test data set of power
consumption collected over an  almost  three week period  from october  th to october   rd  
      one data point per hour   the coefficient of variance is defined as follows 
cv  

 
n  

pn

i  

y  i   y  i 
y

 
    

     

where n is the size of the test set  y  i  s are the actual consumption values  and y  i  s are the
oned predicted by the model 
before training  a simple preprocessing was performed by scaling all the attributes  so that
they all are of the same order  we then trained different models to the following data sets  ac
power for each of the three floors  the lighting power of the building  the plug load for the whole
building  and the total power consumption  we trained linear least squares  and ls svm
with three different kernels  linear  polynomial  and gaussian  the tuning parameters were
found by a   fold cross validation and grid search as suggested in      we implemented both
methods in matlab  we also tried implementing svr  however the slow running time of
the optimization problem for svr due to inequality constraints  even when using libsvm  
together with the facts that there is one more regularization parameter    and we use a bruteforce grid search method for picking the cross validation parameters made the feasible size of
 

the y e  sensor data is gathered every minute  however using all the data would hugely increase the
training size without adding much information due to the auto correlation in the time series data 

 

fithe data set on which we could train the model very small  and we decided to include the results
only for ls and ls svm 
we used forward feature selection in choosing nt   nl   and nt   in all cases  nt waseither   or

kxzk 
   nl was   or    and nt was   or    when using a gaussian kernel kg  x  z    exp        
the parameter  was included in the cross validation with grid search  for a polynomial kernel
d
kp  x  z    xt z   cp p   cp was found in the grid search  while dp was incremented until the
validation error started to increase  similar to forward selection  
as a final note before we present the results  we note that in building energy modeling  the
cv errors are usually larger compared to modeling the energy consumption of a city  a state 
or a country  the reason is that  roughly speaking  the power consumption time series in a
building is noisier than that of the whole city or state  for example  the cv errors obtained in
    are of the order of       and sometimes as high as     for almost all the methods tried 
table   summarizes the cv errors  in percent  rounded to the nearest integer  for the
application of different methods to different data sets  although we have modeled the ac
power for different floors separately  because the window parameter is different for them   we
present the cv error for the sum of these powers here 
total consumption
ls
   
ls svm   linear kernel
   
ls svm   polynomial kernel
   
ls svm   gaussian kernel
   

plug loads
   
   
   
   

lighting ac power
   
  
   
  
   
  
   
  

table    the cv errors in prediction of different hourly power consumptions by different
methods 
we can see that ls svm with a linear kernel is at least as good as ls  and they are especially
very close to each other when the error is large  the first part is expected form the definition
of these methods  one can easily show that with the same feature mappings  the solution of
ls svm converges to that of ls if we send the regularization parameter c to infinity  in the
cases where the two models are close  our cross validation chose a high value for c  ls svm
with a gaussian kernel seems to be the most accurate learning method for all of the data sets 
while ls svm with a polynomial kernel seems to have the worst accuracy  we suspect that
the sub par performance of the polynomial kernel might be due to effect of the parameter cp  
a large cp would give higher wights to the interactions between different attributes  physical
intuition  and the results for ls svm with a linear kernel  suggest that monomial functions of
the attributes t  l  and t are more important predictors of the power consumption than their
interactions  which suggests that a small cp should be used  however  as explained before  the
interaction between the holiday indicator attribute d and the other variables helps us capture
the difference between the power consumption on the weekends and the weekdays  which we
may not be able to capture very well with a small cp  
although cv is a good indicator for performance of our methods  there are qualitative
differences between the methods that are not reflected through cv  comparing the predicted
time series with the actual one can be useful for a qualitative assessment of the algorithms 
here we look a data set that all four methods approximated relatively well  the ac power
consumption  figure   shows the actual and predicted ac power consumption on the second
floor for each method over our    day test period 
 

fipower  w 

power  w 

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  
  

 

   

   
   
time  hours 

 c  linear
 ls  

   

   

  

  
  

  

  

  

  

  

  

  
  

  

power  w 

  

power  w 

  

  

  

  

  
 

   

   
   
time  hours 

   

  

   

 

   

   
   
time  hours 

   

   

  

 

   

   
   
time  hours 

   

   

regression  d  ls svm with linear  e  ls svm with gaus   f  ls svm with polykernel 
sian kernel 
nomial kernel 

figure    the predicted ac power consumption on the  nd floor  in all plots the red curve is
the predicted time series and the blue curve is the actual power data 
it can be seen that all methods are more accurate on the weekdays  compared to the weekends and holidays  this is likely because for those days i  there are more training examples 
and ii  the consumption patterns are more regular  if we wanted to compare the methods qualitatively  again ls svm with a gaussian kernel seems to be the best  specifically  it is more
accurate on the weekends  ls svm with linear kernel is a close second  its performance on the
weekends is close to  or maybe even slightly better  than gaussian kernel  however it shows a
slight undershoot on the weekdays  simple regression has good accuracy on the weekdays  but
has a large undershoot on the weekends  and finally  ls svm with polynomial is less accurate
than all the other methods  the weekdays  and on the weekends  its accuracy is close to that of
ls  while worse than the other two 

 

conclusion

in this project  we implemented the linear least squares  and the support vector machines least
squares algorithms with various kernel functions for predicting the hourly power consumption
in the using the sensor measurement data in the y e  building  and compared  qualitatively
and quantitatively  the accuracy of the results obtained using these methods 

references
    u s  department of energy  buildings energy data book  d r international  ltd        
available at  http   buildingsdatabook eren doe gov  
    richard e  edwards  joshua new  and lynne e  parker  predicting future hourly residential
electrical consumption  a machine learning case study  energy and buildings              
       
    a j  smola and b  schlkopf  a tutorial on support vector regression  statistics and computing                       
    j  suykens  t v  gestel  j d  brabanter  b d  moor  j  vandewalle  least squares support
vector machines  world scientific publ  co  inc        
    chih wei hsu  chih chung chang  chih jen line  a practical guide to support vector
classification      
 

fi