yonathan perez yperez stanford edu

nora tarano ntarano stanford edu

cs     project final report 
learning convention propagation in beeradvocate reviews from a etwork perspective

abstract
we look at the way conventions propagate between reviews on the beeradvocate dataset  and try to predict whether a specific
convention will be adopted by a user in his coming review  learning and prediction of convention adoption are done based on
exposure of a review  or a reviewer at a specific time point  to the convention  in this project  we define the criteria for exposure of
one review to another  which in turn define an implicit network structure over the reviews  we then use features extracted from this
network to learn and predict convention adoption 

   introduction
beeradvocate is a website in which users write reviews on various brands of beer  the beeradvocate dataset contains over    
million review records  made by more than   k users  some of the users adopt a unique jargon in their review text  and use certain
conventions  specific words  phrases or abbreviations  which are shared by multiple reviewers and across multiple beers 
in the scope of this project  a convention is an element from a pre defined set of pieces of text c   we do not address the semantic
meaning of a convention  or what makes a piece of text to become a convention  in this project  we look at the binary classification
problem of learning when a convention c  c is used  adopted  and try to predict whether a new review r would adopt that
convention  in addition to its content  a review r is characterized by three components  the reviewer user   r     the product beer   r    
and the time of the review time   r     the hypothesis behind this project is that high exposure to a convention c by user   r   while
reviewing beer   r   at time   r   increases the likelihood of review r adopting c  
one key question is how to define exposure in a review website such as beeradvocate  in problems that deal with information
propagation in networks  e g  social networks   the network is given in advance and determines whether a node  which in most cases
represents a user  is exposed to another node  in contrast  a review website such as beeradvocate does not explicitly define a network
structure  instead  it is up to us to define when are two reviews  or two reviewers  are exposed to one another  and at what times  the
definition of exposure then defines an underlying exposure network that can be used to reason about information propagation
between its nodes  the established exposure relations between reviews and the network structure they define are used to define
features for learning and prediction of convention adoption by new reviews that are added to the network 
there are three categories of features  attributes  we use for convention adoption learning  the extent of the exposure the review has
to the convention  user bias  and convention bias  user bias captures the tendency of the user to adopt conventions  and convention
bias captures the tendency of the convention to be adopted  features related to the embedding of the sub graph induced by the
convention adopting reviews within the general exposure graph are included under convention bias as an implicit measure of
correlation between exposure and convention propagation for that convention 

   exposure etwork model
definition  a review r is exposed to review r   if r   is either an earlier review by user   r     or one of the k preceding reviews on
beer   r     review r is exposed to a convention c if one of the reviews r is exposed to uses c   note that there is no requirement for

usage by r itself 
formally  the set of reviews r is exposed to is exp   r     expu   r    expb   r   where 

fiyonathan perez yperez stanford edu

nora tarano ntarano stanford edu

expu   r      review x   user   r     user   x    time   x     time   r   
expb   r      review x   beer   r     beer   x    rank   r    k  rank   x     rank   r   
rank   x   is the chronological rank of review x among the reviews of beer   x     note that rank   x     rank   r   also implies
time   x     time   r    

the reasoning behind this definition is that exposure between reviews originates from previous usage of a convention  user based
exposure  or from contagion from one of the immediate preceding reviews of the same product which are immediately visible to the
reviewer  product based exposure   we set the product exposure parameter k to be     which is the number of reviews in a page on
the beeradvocate website 
while the above definition is binary   r is either exposed to r   or not   the extent of exposure of r to the reviews is not uniform   but a
decreasing function of the time difference between the reviews in the case of same user exposure  using the same conventions as a
recent review is more probable than using a convention from an ancient one   or a decreasing function of the rank difference
between the reviews in the case of same product exposure  the reviews close in rank to the current review are more easily visible to
the reviewer  and probably more relevant  
the above definition of exposure induces a directed network structure g        e   over the dataset  where the nodes represent reviews 
and an edge   r    r   exists in the network if and only if review r is exposed to review r     the extent of exposure of r to r   then
defines a weight for the edge   r    r   which is a decreasing function of the time   rank difference between r and r     we noticed that
the likelihood of convention propagation decreases far more drastically for product based exposures as rank difference increases than
it does for user based exposure as time difference increases  thus the edge weights are modeled in the following manner 
  time   r    rime   r      

w  r    r    
exp    rank   r    rank   r     

 

  if   r    r   is due to user based exposure

 

  if   r    r   is due to product based exposure

the exposure and network model discussed here deal with reviews as basic entities  i e  nodes in the network   and not reviewers  this
is important in order to incorporate temporal considerations into the model  a review is an instantaneous event   and exposure for the
purpose of convention propagation is only relevant at the moment of the review  thus  we cannot discuss absolute exposure between
reviewers  who write multiple reviews at different times   but only exposure at specific times  which is equivalent to discussing
exposure between reviews 

   features
the basic features  attributes  we use for learning and predicting adoption of convention c are described in the table below  they
divided into three categories  the extent of exposure to convention c of the review r  features       bias of user   r   at time   r  
 features       and the bias of the convention c at time   r    features       the last category also includes features that come to capture
the embedding of the sub graph gc induced by the reviews that adopted c within the general exposure network g  features      
these features come to capture the continuity and linearity of the spread of the convention within the exposure network as an implicit
measure of correlation between exposure and convention propagation for that convention 
for more compact formulation  the following sets are defined 
t   r       x   time   x     time   r      c  c   s   r   c      x   x  t   r    x uses c    e   r        x  y    t   r    t   r       x  y    e  
in   x       y     y  x    e    out   x       y     x  y    e 

these sets are in turn used for feature formulation 

fiyonathan perez yperez stanford edu

description
 

extent of user based exposure of review r to convention
c

nora tarano ntarano stanford edu

formulation

    x uses c   w   x  r  

x expu   r  

score   r   c    



x expu   r  

 

extent of product based exposure of review r to
convention c

    x uses c   w   x  r  

x expb   r  

score   r   c    



x expb   r  

 

the fraction of conventions adopted by user   r   up to
time   r  

 

the fraction of reviews by user   r   to adopt a convention
up to time   r     maximized over all possible conventions

 

score   r    

cc

 
     x uses c 
expu   r   xexp   r  
u

score   r   c    

the likelihood of propagation of c given that a review is
score   r   c    

the fraction of adoptions at time   r   that serve as sources in

the fraction of adoptions at time   r   that serve as sinks in
gc  i e  end a propagation flow 

 

average propagation fan out  at time   r     the average
fraction of adopters among the out neighbors of an adopter

t  r  

   x uses c  y uses c   w   x  y  


  x   y  e   r  

w  x  y 

score   r   c    

 
    in   x    s   r   c      
s   r   c   xs  r   c 

score   r   c    

 
    out   x    s   r   c      
s   r   c   xs   r   c 

gc  i e  start a propagation flow 

 

s  r  c 

  x   y  e   r  

 edges in the network  that represent propagations of c

 

w  x  r  

     x  expu   r     x uses c 

c

c c

likelihood of the convention c to get adopted at time   r    

exposed to c   the weighted fraction at time   r   of exposures

 

score   r     max

the fraction of reviews that adopted c by time   r  
 

w  x  r  

score   r   c    

out   x    s   r   c  
 
 
s   r   c   xs  r  c 
out   x  

the exposure network g is a massive graph of over    m nodes and over    m edges  with attribute data on both nodes and edges 
even in a compact binary representation  the object representing g is over   gb in size  therefore it is crucial that all feature
extraction will be performed extremely efficiently  many of the features depend on a sum of the form



x  time   x     time   r  

f   x   

when computed naively  such a sum requires o        steps where  is the number of reviews  which makes the computation
infeasible for such a large graph  however  by visiting reviews in their chronological order and using dynamic programming to
incrementally compute the features  we were able to extract all features in a linear time o       
for programming convenience and computational efficiency  in our analysis we also only address reviews for which all feature values
are available by traversing only the edges   i e  reviews that both serve as a source node and a destination node of some edge  i e  have
in degree and out degree of at least one   this still results in a massive dataset of         reviews 

fiyonathan perez yperez stanford edu

nora tarano ntarano stanford edu

   learning and evaluation
we processed the dataset  constructed the exposure network g   and extracted the feature values using snap   a high performance
library for analysis of massive networks  http   snap stanford edu snap    we learn adoption of the following set of conventions 
a  m  s  t  decent  stick  cream  grass  butter  skunk 
the first four are conventions for abbreviations in the beeradvocate community  stand for aroma  mouth full  smell and
taste   we only counted the appearances of these abbreviations in the text when they were used as conventions   when capitalized
and followed by a colon or a hyphen  the rest are commonly repeating not obvious word roots used in beer descriptions  the
frequencies of these conventions across the entire dataset are given in the following table 
a

m

s

t

decent

stick

cream

grass

butter

skunk

      

      

      

      

      

      

      

     

     

     

we partitioned the dataset          reviews  into a training set containing     of the data points          reviews  and a test set
containing the remaining              reviews   we then trained an svm  using a liblinear svm with a linear kernel with l 
regularization  to learn and predict the adoption of the above conventions using the features extracted from the adoption network  our
baseline for evaluation was naive prediction based on convention frequency  a prediction scheme that considers each review r and
convention c independently and predicts that r would use c with probability pc which is the frequency of convention c across the
entire dataset  we compare accuracy  precision and recall for both prediction methods for each of the conventions  the results are
described in the following figures 

fiyonathan perez yperez stanford edu

nora tarano ntarano stanford edu

accuracy is a more significant for the higher frequency conventions than for lower frequency conventions  but even then  the positive
and negative classes are highly skewed  the vast majority of reviews do not use a given convention   thus  precision and recall should
be taken into account as more significant performance metrics of the prediction scheme  we can see that the svm performs
surprisingly well when a convention appears frequently enough in the dataset  it also seems that the svm predicts more
conservatively  less prone to assign a positive label  than the baseline when the convention has low frequency  which explains the low
recall for infrequent conventions  this can be attributed to the fact that svm captures dependency between the data points  whereas
our baseline predicts for each point independently 
the number of training examples by far exceeds the number of feature used  so it makes sense to use more features and construct a
richer model by mapping the existing nine features into a higher dimensional feature space using a kernel  however  trying to do so
using the entire dataset  using libsvm svms with a higher degree polynomial kernel  proved to be extremely computationally
expensive  we compared the precision and recall scores for the most commonly used conventions using an svm with a linear kernel
vs  one with a  rd  degree polynomial kernel  both using l  regularization  on a sample of   k reviews  despite our initial
assumption  the results showed that the performance of both kernels is very similar  we didnt try higher degree kernels due to long
runtimes  

   conclusion and potential future work
we were surprised to see how well classification based on exposure network features performed in comparison to naive frequencybased prediction  yet  we believe that exposure network based features can be further improved   for instance by using statistical
inference to determine values for network edges weights  or by leveraging network statistics  for instance degree distribution or
weakly connected component decomposition  of the entire graph and convention adopting sub graphs  additionally  such prediction
could be further improved by incorporating non network based features  such as user and product bias  and semantic linguistic
features of the conventions 

fi