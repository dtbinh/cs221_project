how to prevent another financial crisis on wall street 
predicting the riskiness of real estate loans
katelyn gao   susanne halstead 

  introduction
starting in fall       there was a meltdown on
wall street that contributed to what some say
was the worst economic recession since the
great depression  one of the major culprits was
commercial mortgage backed securities
 cmbs   cmbs are securities that are backed
by loans on commercial properties  such as
hotels and office buildings 
cmbs are traded in markets  so we may use the
interest rate as a measure of the riskiness of the
asset  however  since the interest rate is also
determined by other factors such as loan
maturity  we instead use loan spread as a proxy
for riskiness 
the goal of our project was to predict the
average spread of a loan given its other features
and analyze which features have greater effects
on its riskiness  in addition  given aggregate data
on the number of defaults by property type  we
examined whether those property types with
higher default rates also had higher average
spreads  the hope is that we will be able to
predict the riskiness and default likelihood of a
loan using only its features  and gain insight into
business practices and market conditions 
the paper is organized as follows  section  
gives some background on cmbs and explains
relevant terminology  section   describes our
data set and how we pre processed it  section  
explains the data mining methods we used  and
section   gives our results  section   concludes 
  background
cmbs are usually grouped by property type 
and the five main categories are office 
multifamily  retail  lodging  and mixed use  in
practice  the property type plays a large role in
 
 

kxgao stanford edu
susanne  stanford edu

risk assessment  lodging is considered the
riskiest and multifamily the safest 
other factors that affect risk evaluation in
practice are debt service coverage ratio and
loan to value  possibly nonlinearly and
dependent on the property type  next  we define
some loan features used in this paper 









originator  the financial entity that
processes the loan  usually the lender or
broker
spread  the interest rate  adjusted for
market rates
loan to value  ltv   ratio of loan
amount to property value
debt service coverage ratio  dscr  
ratio of cash available for debt servicing
to the value of payments
net operating income  noi   annual
revenues minus expenses for the
property
amortization type  method by which the
loan principal decreases over time
debt yield  ratio of noi to loan amount
cap rate  ratio of noi to property value

  data
    description
our main data set contained information on real
estate loans originated in new york and
california in         from trepp      each
observation loan included the features listed in
section    as well as other features of the loan
and underlying property  such as maturity date 
benchmark  balance  occupancy  and appraised
value 
a secondary dataset lists aggregate information
on delinquency and defaults by property type 

fi    pre processing

  methodology

the loans in our primary data set are
benchmarked by several different baseline
interest rates     year treasury bills    year
treasury bills    year treasury bills  and libor 
to make them comparable  we removed the
loans benchmarked by libor  added    basis
points to the spread of loans benchmarked by  year treasury bills  and added    basis points to
the spread of loans benchmarked by   year
treasury bills 

we carried out separate analyses for new york
and california  and then compared the results 

in addition to the features listed in section    we
also included the following features 





county  where the property is located 
property type
loan purpose  refinance  acquisition 
or recapitalization
occupancy

there was a good deal of missing data  if an
observation was missing loan purpose or
originator  we deleted it  if it was missing debt
yield  dscr  ltv  or cap rate  we imputed the
missing value with the mean over all
observations  if it didnt have occupancy  we
imputed the missing value with the mean
occupancy for all loans with the same property
type 

several of the features in our data set may be
correlated  for example  dscr and debt yield
are essentially measuring the same thing  dscr
was used traditionally and debt yield is a more
modern metric  in addition  as stated in section
   the effect of certain features on spread may be
nonlinear  they may also depend on the
property type  therefore  our primary analysis
took into account correlated features and the
possibility of interaction effects 
    lasso and forward stepwise
lasso and stepwise regression are methods that
build multiple linear regression models on the
data while also performing feature selection     
forward stepwise regression is a greedy
algorithm that starts with the intercept and adds
features that create a best fit model at each step 
backwards regression starts with a model on the
full feature set and then removes features with
the least influence on the fit  hybrid models
consider either forward or backwards steps in
each iteration  we used an implementation of
the stepwise algorithm that considers the aic
measure to evaluate the various options 

instead of noi  we used noi per square feet or
unit  each observation either included
information on the number of units in the
property or the square footage  if an observation
was missing noi per square feet or unit and had
square footage  we imputed the missing value
with the mean noi per square feet or unit over
all observations with square footage present 
likewise  if an observation was missing noi per
square feet or unit and had the number of units 
we imputed the missing value with the mean
noi per square feet or unit over all observations
with the number of units present  finally  we
normalized noi per square feet or unit by
whether the observation included information on
square footage or number of units 

lasso is a method that considers all features
simultaneously           it builds a model that
minimizes the residual sum of squares while also
constraining the absolute value of the sum of the
coefficients  thus forcing coefficients of lowinfluence features to   

 

regression by solving a l  penalized regression
problem 

as explained in the elements of statistical learning
section         we may extend the svm analysis to

these methods will help us gauge which
features are most influential on average spread
and will build models that consider these
important features 
    svms and trees
next  we explored the possibility of interactions
in the effects of certain features on spread  to do
so  we first did support vector machine
regressions with the  insensitive error measure 
using a variety of kernels  including radial and

fipolynomial      our motivation was that  in
addition to building a predictive model  by
finding out which kernel led to the lowest error 
wed be able to discover what types of
interactions are present in the data 

      new york
the following figure is the lasso path 

  ltv
  dscr
  property type
  county
  originator
  loan purpose
  occupancy
  debt yield
  amortization
   noi
   cap rate

after discovering that there were indeed
interaction effects in the model  we built a
predictive model using regression trees 
regression trees fit piecewise constant models
on the feature space      and thus take into
account possible interactions  we pruned the
trees to minimize the cross validated mean
squared error  mse  
for each tree  we also computed the relative
importance of variables      proposed by
breiman et al          the importance of a
variable is equal to the total decrease in mse
over nodes when that variable is used as the
splitting variable while growing the tree 
to improve upon regression trees  we also built
random forests on the data  random forests  by
bootstrapping the data  growing small trees to
each bootstrap sample  and averaging over all
samples  are able to reduce the variance of our
predictions while keeping the bias small      as
with regression trees  we computed the relative
importance of variables using the same metric 
    aggregate defaults
the dataset on delinquency and defaults gives an
overview of actual delinquencies and defaults by
property type  thus providing an ex post
assessment of how risky properties are  we
compare the ex post ranking of riskiness with
the mean spread in each category 
  results
    lasso and forward stepwise
lasso and stepwise produced results in similar
ranges of mse of each other 
mse
new york california
stepwise                  
lasso
                 
we proceed to finding the important features
selected by these models 

the important coefficients found by each
method for ny are 
rank
 
 
 
 
 

stepwise
ltv
dscr
prop type
loan purpose
occupancy

lasso
cap rate
occupancy
ltv
loan purpose
debt yield

ltv and dscr are financial measures directly
linked with the owners ability to repay the debt 
as expected  their coefficients are positive 
occupancy determines the owners ability to
generate income  so does property type 
      california
for california  besides these directly linked
features  originator is included in the list of
important features  here is the lasso path 

fio

the following features were selected as top
ranked by the methods 
rank
stepwise
 
ltv
 
dscr
 
prop type
 
originator
 
loan purpose

lasso
ltv
debt yield
noi
prop type
loan purpose

    svms and trees
we first present the results from svm
regression for both new york and california 
the parameters were roughly chosen to
minimize the cross validated mse 
the following table contains the cross validated
mses for each type of kernel 
radial
linear
polynomial  deg    
polynomial  deg    

new york california
                 
                 
       
        
                 

it is clear that in both data sets  polynomial
kernels  in particular the polynomial kernel of
degree    works best  hence  it is likely that
there are interactions effects in the data 

the numbers in parentheses are the average
spreads at those nodes  this result is somewhat
surprising  lodging  the riskiest property type 
and multifamily  the safest  are in the same
node  in addition  it seems that there is great
variation in spread between counties  with more
affluent counties having lower average spread 
the mse of this tree was           random
forests did improve this  using     trees  the
mse was          
the following table presents the   most
important variables obtained by regression trees
and random forests 
rank regression trees
 
originator
 
property type
 
dscr
 
ltv
 
county

with that in mind  we next present  for both
new york and california  regression trees
pruned to have the lowest cross validated mse
and results from random forests 
      new york
the following is the regression tree for the new
york data set  


 

root         
o originator bana  beech street
capital  cbre  centerline 
cgmrc gacc  cibc  hsbc  jpm 
morgan stanley  ncb  north marq 
capital  walker   dunlop  wells fargo
        

we give it in line form since the lettering on the
graph is too small 

originator amf  barclays  basis real
estate  ccre  ciiicm  citigroup 
gacc  goldman sachs  jlc  key 
lcf  nrec  rait  rbs  redwood 
ubs         
 property type  mh  mu  of  rt 
ss         
 property type in  lo  mf  ot
        
 county bergen  hudson 
nassau  new york  ocean 
richmond          
 county bronx  essex  kings 
morris  queens  suffolk 
union         

random forests
originator
dscr
property type
ltv
county

therefore  originator  property type  and dscr
appear to be the three most important variables
for new york 
      california
the pruned regression tree for california was
simply the root node  with an average spread of
      and an mse of       the random forests
 

mh  manufactured housing mu  mixed use of 
office rt  retail ss  self storage in  industrial lo 
lodging mf  multifamily ot  other

fimethod considerably improves performance 
with an mse of          
the following tree contains the   most important
variables from the unpruned regression tree and
random forests 
rank regression trees
 
property type
 
debt yield
 
occupancy
 
cap rate
 
originator

random forests
originator
property type
occupancy
dscr
debt yield

these rankings are much less regular than those
in new york  however  it appears that overall 
property type  originator  occupancy  and debt
yield are important 
    aggregated defaults
reviewing the ex post default statistics with the
risk assessment implied in the average spread
per property type gives a gauge of how linked
average spread is to observed risk 
rank

avg  spread

 

lodging

 
 
 

industrial
multi use
multi
family
retail

 

   days
delinquent
multi
family
other
retail
industrial
office

foreclosures
multi
family
industrial
office
retail
lodging

we observe that lodging was on average
considered riskiest at loan origination  as
expressed in the average spread of the loans 
however  the category is surpassed by other
categories in the ex post assessment  we expect
the evaluation criteria of new loans and with that
the ranking spread of new loans will adapt to
these outcomes 
  conclusion
one interesting observation is that the originator
figures among the influential features under
several of the methods  this implies that
business practices of individual originators have

considerable influence on loan terms  however 
traditionally it is not considered in risk
assessment 
as expected  the property type was also one of
the influential features in the majority of our
analysis  yet  judging from the default data  the
viewpoint that lodging is the riskiest may be
incorrect 
in both states  lasso stepwise give differing
results for variable importance than regression
trees and random forests  in new york  both of
the traditional metrics used in risk assessment 
ltv and dscr  were returned as important
features  however  in california  only ltv was 
this suggests that the market in california is
unusual  and that banks should take other
features when assessing the risk of loans there 
another finding to support this is that random
forests worked best for new york  but stepwise
worked best for california  this indicates that
there are interaction effects in new york  but
not in california 
  acknowledgements
we would like to thank keith siilats  who
suggested this topic  for obtaining the data 
answering our questions  and giving us guidance
throughout the project 
references
    trepp  llc  treppv          data file  
https   www trepp com 
    hastie  t   tibshirani  r  and friedman  j        
the elements of statistical learning  data mining 
inference  and prediction  new york  springer 
    breiman  l   friedman  j   olshen  r  and stone 
c         classification and regression trees  new
york  wadsworth 
    tibshirani  r  the lasso page  retrieved
december         from
http   statweb stanford edu  tibs lasso html 

fi