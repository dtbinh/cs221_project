cs     project 
home electricity forecasting
atinuke ademola idowu  pawel kupsc  sonya mollinger
december         

introduction

data features

electricity load forecasting is an important aspect of
power systems planning and operation  at the utility
scale  load forecasting is important for pricing and
determination of the size of the spinning reserve  
for this problem  forecasting is done on a large scale
by aggregating the power consumed by many homes
in a single neighborhood 
on a single home scale for grids with real time
pricing  forecasting permits using energy storage
systems to decrease cost of energy for the consumer 
knowledge of future power consumption along with
future electricity prices can make it possible to
decide when to engage a battery storage system as
opposed to drawing power from the grid  the aim of
the project is to carry out a short term forecast on
electricity consumption of a single home 

the data set was obtained from the uci data set
repository   it represents power consumption per
minute measured over   years for a single home near
paris  france  approximately   million data points  
we processed the data into hourly averages for
prediction  to give a total of       points  
to better predict the power consumption  we
used the wunderground api  interfaced with python
to find the temperature  humidity  and precipitation
near the homes location for each hour over the four
years  we combined these with the power data for
the raw feature matrix  these were surprisingly few
data points missing from either source over the
entire data set  so we simply removed these points 
since the data set was very large  we chose to
process it in python using the pandas package 
the raw input data features are the power  from
the home data set  and the temperature  humidity 
and precipitation  from the weather data set  
however  we also created a number of features
while processing the data  we calculated the day of
the week  the past hours power and past days
power  we tested adding some classification like
variables as well  in particular the season and a
boolean variable indicating whether or not the day
was on a weekend  we also tested adding further
feature columns such as multiple past hours power
values and the past temperatures 
we approached the forecasting problem in
several different ways  in one of the approaches  we
separated the data set into    different sub divisions
corresponding to the hour of the day  we ran
regression models on each of these data sets
 subdivided into training and test sets   we hoped
that this would help us account for systematic hourly
variations in the inhabitants behavior  in the
alternative approach we averaged the data set further
over each day  and then did a simple regression to
predict the average power used for the test days 
finally  we subdivided the day into intervals  e g 
morning  afternoon  evening  middle of the night  in

background
load forecasting can be divided into three
categories  short   medium   and long term  shortterm forecasting corresponds to prediction of one
hour to one week ahead  medium term refers to one
week ahead to one year ahead while long term
forecasts are for more than a year   here  we focus
on developing regression models for short term
forecasting 
there is not a lot of previous work on singlehome forecasting  the smart  project at university
of massachusetts  amherst  has studied several
homes over a two three month period  they outfitted
each home with sensor data and were able to model
the power for five intervals throughout the day  the
error of their predictions for some intervals was
under     
additionally a group from technische
universitt mnchen  collected their own data set in
addition to analyzing the redd  data set  their
errors ranged from   to        the group utilized
different sampling strategies including dividing the
data by day and by time series 

fian attempt to both account for systematic patterns
within a day but to not be oversensitive to the
inhabitants precise hourly choices  we also briefly
tested dividing the data into winter and summer sets
in order to probe the effect of season more
effectively 

we also used support vector regression to
address any nonlinearities in our data  this problem
tries to solve the following optimization problem 

methods

                    
                 
                  
equation    the primal problem of  svr

the data was split randomly using hold out cross
validation with      training data and a      test 
we then applied three different learning models to
the data  linear regression  lr   locally weighted
linear regression  lwlr  and support vector
regression  svr  
linear regression was applied both using the
normal equations according to equation   and using
the software package sci kit learn   the obtained
parameters were used to make a prediction on the
training set and the test set  the relationship between
some of the features and the power is not linear so it
was expected that this model would perform poorly 
the main nonlinearity is in the power variation with
time of day  this issue was mitigated by having a
different model for each hour of the day 
           
equation    the normal equations
a lwlr algorithm was implemented according
to equation   to address the issue of nonlinearity in
the power variation with time of the day  the results
obtained using this algorithm were a bit better than
that of the linear regression 
            
 
       

    exp 
 
   
equation    the weighted normal equations
the bandwidth parameter was chosen so as to get a
good fit for our data by avoiding overfitting or
underfitting the data  when        was used  we
obtained a very low training error  about       but a
large test error and when       was used  we
obtained a high training and test error  when     
was used  we got a reasonable value hence this was
the bandwidth parameter value used 





  

  

 
min             
     

we applied svr to our problem using the
algorithm implemented in sci kit learn  we tested
multiple kernels  linear  gaussian  radial basis
function  and polynomial  we saw a dramatic
increase in computation time with the polynomial
kernel and significant overfitting with the gaussian
kernel  removing features from the data matrix
removed the overfitting problem with the gaussian
kernel  but brought perfomance down to
approximately match the linear kernel  in order to
get results from the polynomial kernel within a
reasonable time frame  we reduced the data matrix to
only three features  the temperature and the past two
hours powers  we also limited the polynomial to be
a  nd degree polynomial  additionally  after taking
these steps the polynomial kernel svr model was
much more sensitive to the random splitting of
training and test data than some of the other models 
results
the results of the different regression models are
shown in figure    testing sets  and figure  
 training sets   we have primarily focused on the
approach that divided the data into hourly data sets 
since this allowed us to extract more information
from the data set  for hours in which the inhabitants
of the house could be assumed to be inactive  we
could obtain test errors approaching     but the
hours in the daytime  especially    am  around
noon  and from     pm   potentially the hours near
meal times  were especially difficult  the later hours
have high error possibly due to the unpredictability
and drastic effect on power usage of the inhabitants
dining going to bed at different times  we
hypothesize that the mixed results of our project are
due to the nature of our data set as single home
power data  which is subject to large amounts of
irregular events due to the schedule of the

fiinhabitants  this is in contrast with the typical power
consumption prediction problem  which aggregates
data from many houses at a utility level 

figure    test errors for each hour of the day for
five different models  clear peaks are seen in hours
of typically greatest human activity 

evening night ones  however  this approach also lost
us the ability to predict the finer peaks in the data  in
contrast  the hourly predictions allowed us to capture
much of the peak variation in the data  see figure    
however  we believe this is primarily due to the use
of the previous hours power as a feature in the data
set 
model

test
error

training
error

linear
regression

    

    

lwlr

    

    

svr  linear 

    

    

svr  gaussian 

    

   

table    errors for daily power consumption
prediction 
in general  we concluded that the features we
used were able to explain some of the variability of
power consumption for a single home  but cannot
explain many of the hour to hour individual
variations during times of peak power usage  in
order to more reliably make predictions for a single
home  it would be necessary to include features that
describe the behavior of the inhabitants such as if the
inhabitants are at home and perhaps what room they
are in  for example  knowing that an inhabitant is
showering might allow predicting the high power
peak when they eat breakfast shortly thereafter  we
discuss further improvements at the end of the
report 

figure    training errors for the different regression
models used 
by further aggregating the data into daily averages 
we were able to predict daily power consumption
with errors down to      the test and training errors
for this approach are shown in table    finally  by
dividing the day into   time intervals corresponding
from the hours of  am  am   am  am    am  pm 
and  pm midnight  we were able to obtain errors
that remained flat at around      both test and
training  for the latter three intervals  and from      for the first  early morning  interval  this
represented an improvement over the average errors
from some of the hourly predictions  especially the

interpretation
to better understand the data  we examined how the
features were related to the data in multiple ways 
the covariances between the features and the power
were calculated in order to give an idea which
features are more relevant than others  the
covariance between the power and the temperature
was calculated to be       while the covariance
between the power from one hour before and the
current power was       features like humidity and
day of the week had low covariances         and
      respectively  it is somewhat surprising that the
day of the week feature has such a low covariance

fiwith the power  especially during the weekends one
might expect greater power consumption than during
the week 

figure    a typical comparison of output from a
regression model and the actual power measured 
this shows the two for a test set at     pm with
predictions done by the svr linear model 
a plot of the current power against the power from
the previous hour is shown in figure    the
relationship seems to follow a linear trend  albeit
with a large amount of noise 

figure    scatter plot of the relationship of the power
consumed and the power consumed in the previous
hour of the same day 
the relationship between the various features and
the power data can also be probed using the built in
feature selection module in sci kit learn  this
allowed us to select the k best features by using a
univariate linear regression test to look at a single
features relationship with the power data  and then

take a certain number of features that scored the
best  this showed us that the most significant
features for all hours were the past hours power and
 nd closest hours power  when we included three
previous hours  all three of them were at the top of
the list  the third  or fourth best feature  depending
on how many previous hours were included in the
feature set  was the temperature  and the order of the
others depended on the hour of the day  alternating
between humidity and the is it a weekend feature 
we found that the gaussian kernel required us to
remove the less important features from the data
matrix in order to get the best results  due to its
propensity to overfit the data 
another issue with feature selection was
whether to use the classification like variables as
features or as dividers for our data set  to use with
different regression models   if we had more time 
we could have probed this more thoroughly  since
the season and weekend variables were not
particularly significant as features  we briefly tested
dividing the data sets along those markers  resulting
in   x x       sets  using just cold and warm
seasons   we saw an improvement in errors for some
of these sets  but a slight worsening for other sets 
indicating that perhaps further investigation is
required 

figure    a typical learning curve for one of the
hourly data sets  this figure shows the test error and
training error as a function of the number of training
examples for an svr model with linear kernel at
     pm 
we used the learning curve calculation package in
sci kit learn to examine the dependence of mse on
the number of training samples and test samples 
the precise number of the training and test errors
tends to vary slightly with the run due to the

firandomness of the cross validation data splitting  so
one advantage of this was the built in averaging over
many runs  the results are shown in figure    it is
clear that for the hourly predictions the errors
converge quickly at around         training
samples  the learning curve of daily data  not
shown  has a slower convergence          data
points  but we do have enough samples to allow this
one to converge as well 
finally  we also note that the errors are not
significantly different for the three different
regression methods  and the locally weighted linear
regression  value that gave the best fit approaches
linear regression  changing models in this case
improved our errors only slightly  importantly  this
suggests that our data may be fundamentally
somewhat unstructured  this is likely due to the
inherent variability in the actions of a single family 
conclusions   future work
we have demonstrated that we can predict some
aspects of power variability of single home power
consumption using basic regression models  we
tested linear regression  locally weighted regression 
and  svr with three different kernels  we also
tested various methods of temporally dividing the
data to account for different classes  including
running separate regression models on each hour of
the day  weekdays vs  weekends  and different
seasons  we obtained good results in early morning
hours  and larger errors at times when the inhabitants
may be more active  furthermore  we found that all
the models had similar results  indicating that the
errors may be due to a lack of clean structure in our
data despite our efforts to separate temporally  we
attribute this to the inherent unpredictability of a
single familys actions and consequent power usage 
in the future  to improve our single home model
we ideally would have an increased number of
relevant features  for example  we initially planned
to analyze the smart data set from the university
of massachusetts at amherst   which is equipped
with disaggregated power consumption including
every appliance in the home and room specific
sensor data  unfortunately  this data set was only
two months and thus too short for prediction
purposes  we hypothesize that a longer data set with
these detailed features would allow us to account for
the individual variability of the inhabitants more
precisely  we would also be able to test the

regression algorithms more thoroughly on different
feature subsets to understand which are most
significant for power prediction  also  for both
models we are interested in trying to discretize the
feature space  we currently have some features that
are continuous and some that are boolean or take on
discrete values 
in addition  a related problem is one that utility
companies are interested in   the ability to predict
power for a sector or neighborhood  this relates to
our problem in that it would resolve some the issues
of studying a single home by averaging out the
variability due to individual decisions 
references
  

  

  

  

  

  

  
  

al alawi  s  and islam  s  principles of
electricity
demand
forecasting 
power
engineering journal p            
hobbs  benjamin f   optimization methods for
electric utility resource planning   european
journal of operational research                  
mishra  a   irwin  d   shenoy  p   kurose  j    
zhu  t         may   smartcharge  cutting the
electricity bill in smart homes with energy
storage  in proceedings of the  rd international
conference on future energy systems  where
energy  computing and communication meet
 p       acm 
veit  a  et al  household electricity demand
foreasting  benchmarking state of the art
methods  eprint arxiv                  
j  zico kolter and matthew j  johnson  redd 
a public data set for energy disaggregation
research  in proceedings of the sustkdd
workshop on data mining applications in
sustainability       
bache  k    lichman  m          uci machine
learning
repository
 http   archive ics uci edu ml  
irvine 
ca 
university of california  school of information
and computer science 
weather underground api  see required logo 
scikit learn  machine learning in python 
pedregosa et al   jmlr     pp                 

fi