predictingbreastcancersurvivalusingtreatmentandpatientfactors

williamchenwchen    stanford edu
henrywanghwang  stanford edu

  introduction
breastcanceristheleadingtypeofcancerinwomenworldwide accountingforabout   ofall
cancerdiagnoses thoughthisfractionislowerindevelopedcountries breastcancerisstillthe
secondmostcommonlydiagnosedcancerintheunitedstates inaddition breastcancerstill
claimsthesecondhighestdeathtollofallcancerinwomen behindlungcancer  withthis
project weattempttoshedsomelightonriskfactorsandeffectivetreatmentsofbreastcancer 

  backgroundandpreparations
breastcancerisespeciallydifficulttocharacterizebecausetherearemanyriskfactors subtypes 
andtreatmentmethods inordertoexplorepotentialcorrelationsbetweenthemanyfeaturesof
breastcancerpatientsandpatientsurvival weobtainedalargedatasetof       patientsfrom
thestanfordmedicalschool thedatasetcontainedcategoricalpatientfactorfeatures e g 
socioeconomicstatus degreeofeducation stageofdisease  binarytreatmentfeatures e g 
specificmedications chemotherapy radiationtreatment  andbinaryoutcomefeatures e g    
and yearsurvival foreachofthepatients wechose yearsurvivalasouroutcomevariableof
interestandnoticedthattheproportionofpatientswhoweredeceasedwithinfiveyearsof
diagnosis positivetestcases wasquitelow       tomitigatetheissueofclassbalance we
randomlyselectednegativessothatourtotalproportionofpositiveswas    ourfinaldataset
consistedofroughly   featuresforatotalof    patients     ofwhomdidnotsurvivepast
 yearsofdiagnosis 

ourgoalwastoperformseveraldifferentanalysesonmanyinputvariablestoimprove
managementofbreastcancerbyidentifyingatriskpatients westartedwithlogisticregression
andsvmclassifierstomeasuretheeffectsofvarioustreatmentandpatientfactorsonsurvival 
wethenimplementedbasicrecursivepartitioning randomforest andgradientboosted
classificationtreealgorithmstoimprovetheaccuracyofourpredictions ourhypothesiswasthat
throughthesemethodsandourinputvariables wecouldaccuratelypredict yearsurvivalof
breastcancerpatients 

  initialanalysisofdrugs treatments
webeganouranalysisofthedatabyfirstestimatingthepredictivepoweroftheentirefeature
set whichconsistsof   commonlyuseddrugsthatappearedinatleast  ofourpatients 
alongwith othertreatmentsofinterest chemotherapy hormonetherapy etc   toeffectively
analyzesuchalargesetofdata wedecidedtouselogisticregressionforitsgeneralaccuracyon


fibinaryoutcomevariables survivabilityin years andfolloweditupwithsupportvector
machinesforitsflexibilitytochoosethekernelthatbestmatchedourfeaturesbehaviors since
thesetwoalgorithmsfitgeneraldatasetswellwithoutmakingtoomanyassumptionsonthedata
 e g noassumptionsabouttheexistenceofcorrelations  theyseemtobethemostappropriate
foraninitialestimate usingtheglmnetpackageinr  wewereabletoperformlogistic
regressionanalysisonourdatasetandgeneratetheroccurveshowninfigure  forsvm we
madeuseofthee    rpackage togenerateresultsof  foldcrossvalidationshownin
table  












fortunately wecanseethatthefullfeaturesetisabletogivepromisingresultsfromboth
algorithms butthepositivepredictivevalueasseenfromthesvmanalysisisabitlowerthan
wewouldlike oneexplanationforthiscouldbetheexistenceofnoisyfeatures drugsthatdo
notsignificantlycontributetoapatientswellbeing  somethingwewilltrytoeliminate in
addition itisunrealisticfordoctorstoactuallytestandcollectapatientsreactiontoalmost   
differentdrugs inourfollowinganalyses wewillattempttoisolatethefeaturesthataremost
indicativeofpatientsurvivaltoincreaseeffectivenesswhilemaintaininghighpredictivepower 

  analysisoffeatureimportance throughdecisiontreeclassifiers 
ournextsupervisedlearningapproachwastoimplementclassificationtrees basedonthenature
oftrainingandtestingdecisiontreeclassifiers wesplitourcohortof    patientsintotwo
equallysizedsetswithequalproportionsofpositivespatientswhodidnotsurvivepast 
yearsofdiagnosis onesetwasusedtotrainourpredictivemodelandtheothertovalidateit 

decisiontreeclassifiersaimtoidentifysubgroupsofthedataset representedasconjunctionsof
certaininputfeatures thatgenerallysharesimilarclasslabels todoso decisiontrees
recursivelypartitionthedatainabinaryfashionbasedonaconditionononeoftheinput
variables e g cancerstage    thespecificsplitisselectedasthatwhichmaximizesthe
homogeneityofthenodes i e minimizesthesumoftheginidiversityindicesoftheresulting


finodes  splittingendswheneithertheterminalnodesaretoosmallorwhensubsequentsplits
wouldnotimprovethepurityofthenodeasmeasuredbytheginidiversityindex  throughthis
heuristic decisiontreeclassifiersareoftenabletoachieveexcellentperformance 

wehadseveralmotivationsforimplementingclassificationtrees onemainadvantageof
classificationtreesoverlogisticregressionandsvmclassifiersisthatclassificationtreesare
nonparametric inparticular theydonotassumethatfeaturesarelinearlyrelated whichmakes
themmorerobusttodifferentinputs moreover classificationtreesreducethefeaturespaceby
inherentlyselectingandweightingfeaturesthosefeatureswiththegreatestpredictivepower
arethefactorsonwhichthetreeissplit withhigherpriorityfeaturescomprisingtheprimary
splits athirdbenefitisthatclassificationtreesarenotheavilyimpactedbyoutliers asthose
outlierscanrepresentedasseparatenodes  

recursivelypartitioningdecisiontree
ourfirstattemptatusingadecisiontreeutilizedtherpartrpackage  ourapproach
implementedasinglerecursivelypartitioningdecisiontreeasdescribedabove however to
preventoverfitting weprunedtheresultingtreesuchthatonlypartitionsthatwouldimprove
relativeerrorbyafixedthresholdwouldbeincluded theroccurveforourclassificationtree
methodisdisplayedinfigure  withtheweightsofthemostimportantfeaturesintable  


randomforestmodel
asourinitialclassificationtreeapproachappearedquitepromising wecontinuedtoexplore
modificationstoourclassifier inparticular weidentifiedrandomforestasanapproachthat
couldenhancetheperformancebygrowingmultipleclassificationtreessimultaneouslyand
makingclasspredictionsbasedonweightedvotesofeachtree oneparticularproblemthat
decisiontreesoftenfaceisoverfittingasaresultoflearningtreeswithverylargeheights inour
specificimplementationofadecisiontree wechosetopruneourtreetopreventoverfitting but


fiasaresult wesacrificedpredictiveaccuracy throughtheweightedaverageapproach random
forestclassifiersaddresstheoverfittingissuethroughamoresophisticatedmechanismthan
pruning andasaresult theyoftenachievebetterclassificationperformance theroccurveof
therandomforestclassifiergeneratedusingtherandomforestrpackage isshowninfigure  
andavariableimportanceplotisshowninfigure  


  analysisoftopfeatures
fromtheresultsintheprevioussection wecanseethatthereareindeedseveralkeyfeaturesin
ourdatathathavemuchmorepredictivepowerthanothers thoughthelistcontains
nontreatmentcontrols finalstageandtumorgrade  wearestillabletocompilealistofthe
drugs treatmentswiththehighestimpactonsurvival ourfinalstepwillthusbetoconfirmthat
thesefeaturesareindeedenoughtomakeanaccuratepredictiononpatientsurvivalby
themselves 

wewilldosobymakinguseofgradientboosted
decisiontreesasaclassifiertoanalyzethe
predictivepowerofourhighweightedfeature
subset thoughthegradientboostedtree gbt 
algorithmissimilartothatofrandomforests the
crucialdifferenceisthatrandomforestsmaintain
anensembleoftreesinparalleltovoteona
process whilegradientboostedtreesareusedin
seriestoiterativelyconstructaprediction
function  thisallowsgbttomakepredictions
muchmoreefficientlythanrandomforestscan 
makingitamoresuitablealgorithmtouse 



fiusingthexgboostpackageforr  weperformedthegradientboostedtreesalgorithmonthe
toptentreatmentsfoundintheprevioussection withtheresultingroccurveshowninfigure
  withacomparableaucvaluetotheresultfromtherandomforestalgorithm andeven
greaterthanthatoflogisticregression  wecanseethatlimitingourselvestothese  featuresis
indeedsufficienttomakeafairlyaccuratepredictiononapatient 

  conclusionsandfuturedirections
fromthevariousanalysesabove wecanfirstconcludethatourdatasetcannotbeexplainedbya
simplelinearmodelaswehadhoped moreimportantly however wecanconcludethat 
althoughthesurvivalofapatientafterfiveyearsisfairlyconsistentwiththeoverallsetof
featuresgiven thereisasmallgroupofdrugs treatmentsthatisextremelypredictive infact the
subsetoftentreatmentsfoundaboveisenoughtomakepredictionsthatareaboutasaccurateas
usingtheentirefeatureset thisresultdoesnotonlyenableustobuildanefficientclassifier
withoutrandomnoise butalsoallowsdoctorstomakeanaccuratepredictionwithaverylimited
amountofknowledgeaboutthepatient 

withtheseconclusionsinmind wecansetoursightstowardsfutureanalysesthatcanhelpus
furtherunderstandtherelationshipsbetweenourfeaturesandthepatientsoutcome specifically 
wecanfurtherstudytherelevanceofourfeaturesbyrunningourclassificationtreeand
randomforestalgorithmsrepeatedlywhileremovingthetoptenfeaturesaftereveryrun 
allowingustogenerateagradientoffeatureimportance tofurtheroptimizeourclassifier we
canalsorunclusteringalgorithmsandprincipalcomponentanalysisbetweenthefeaturesto
lookforstrongcorrelationsthatcanberemoved ourendgoalofdevelopinganaccurate
classifierfor yearsurvivalcouldfurtherthemanagementofcareforbreastcancerpatientsby
identifyingthosemostatriskofadverseevents 

references 
  
  
  
  
  
  
  
  
  



u s breastcancerstatistics http   www breastcancer org symptoms understand bc statistics
friedman jeromeh etal regularizationpathsforgeneralizedlinearmodelsviacoordinatedescent 
http   www jstatsoft org v   i   
meyer davidetal packagee     http   cran rproject org web packages e     e     pdf
breimanl  friedmanj h  olshenr a  andstone c j       classificationandregressiontrees 
wadsworth 
classificationandregressiontrees cart theoryandapplications 
http   edoc huberlin de master timofeevroman         pdf timofeev pdf
therneau terryetal packagerpart http   cran rproject org web packages rpart rpart pdf
breiman leoetal packagerandomforest 
http   cran rproject org web packages randomforest randomforest pdf
introductiontoboostingtreesforregressionandclassification 
http   www statsoft com textbook boostingtreesregressionclassification
chen tianqi xgboost http   cran rproject org web packages xgboost index html

fi