learning dota   team compositions

atish agarwala
atisha stanford edu

michael pearce
pearcemt stanford edu

abstract
dota   is a multiplayer online game in which two teams of five players control
heroes and compete to earn gold and destroy enemy structures  teamwork is
essential and heroes are chosen to create a balanced team that will counter the
opponents selections  we studied how the win rate depends on hero selection by
performing logistic regression with models that incorporate interactions between
heroes  our models did not match the naive model without interactions which had
a     win prediction rate  suggesting cleaner data or better models are needed 

 

introduction

with the decreasing cost of high performance personal computers and increased access to broadband
internet  competitive gaming has taken off as both a hobby and a viable career  in particular  the
multiplayer online game  dota    attracts nearly    million unique users each month and has the
largest professional e sports tournaments with prize pools of over     million 
in light of the growing interest in competitive dota  it remains an open problem to develop a good
statistical understanding of the game  starting with baseball in the   s and   s  professional sports
have been undergoing an analytics revolution that is changing the way teams operate and the way
fans consume the game  competitive gaming in general and dota in particular are ripe for their
own statistical study due to their large popularity  monetary incentives for good play  and already
digitized game information 
dota   pits two teams of five players against each other on a standardized map  each player controls
one hero  a character who can gain gold and experience in order to upgrade abilities and buy
items to increase their effectiveness on the battlefield  the object of the game is to destroy the
other players ancient  a fortified structure protected by a total of    towers  as well as computer
controlled creeps which respawn every    seconds and travel predetermined paths to the enemys
ancient 
previous work in this field has focused on regression models incorporating one or more variables
for each hero      however  since there are     possible heroes to choose from  it becomes a
computationally difficult task to incorporate interaction effects between different heroes 
in high level dota matches  understanding these interactions is key to drafting a good team  teams
take turns picking and banning heroes in a draft  and must stick with the heroes they end up with 
games can be won or lost in the drafting stage itself  improving our understanding of the game in a
quantitative way could push the development of strategy at high levels of play 

 

dataset

valve  the game developer of dota    keeps records of end game match statistics and makes them
publicly available through their web api  we downloaded information on        matches in the
time period from         to          this interval was chosen so that all the games were played on
the same balance patch  meaning that hero stats remained unchanged 
 

fitable    features used for hero clustering 
feature

description

kills
deaths
assists
last hits
denies
total gold
gold min
xp min
level
hero damage
tower damage
hero healing
damage taken
neutral

enemy heroes killed
total deaths  any cause
enemies killed by teammate nearby
enemy creeps killed
friendly creeps killed
gold spent in game
gold gathered per minute
experience points per minute
highest level achieved
damage dealt to enemy heroes
damage dealt to enemy towers
damage healed on friendly heroes
damage taken by hero
gold from neutral creeps

the match statistics contain end game data on team results  who won  which towers were destroyed  
individual performances  the statistics in table    for each player   and match parameters  date 
match duration  game mode  
we gathered data only for matches where no player left before the game ended  we also focused
on two game modes  all pick and captains mode  all pick is the most popular format  where
the entire hero pool is open for selection in any order  captains mode involves sequential picks
and bans from a limited pool of heroes  and is the primary format for professional play  these two
modes were chosen for their ubiquity and similarity to the types of dota that are played most often
at the highest level 
unfortunately  we were unable to condition on player skill because the corresponding feature of the
web api was broken by a previous update  our match data contained a mix of low  middle  and high
level play which may have added noise to the data 
we also gathered professional player data from the same time period via datdota  a public repository
of professional dota statistics      here we gathered average statistics for each hero  again as in
table    the statistics were gathered from around      matches 

 

features and preprocessing

we first normalized the average hero statistics from professional play to have mean   and variance   
we then ran pca on the average statistics to derive vectors  x of composite statistics for each hero 
for each game in the public match data  we extracted the hero composition of each team  this
combined with the  x gave us a feature set for our data  all of our models used some subset of these
features  we also stored the identity of the winning team as a binary label 
the public match data was then split randomly           into a training and testing set for our
logistic regression models 
we also attempted to extract features by clustering end game stats for the public match data using
the k means algorithm  we had hoped to find different kinds of play styles and then match heroes
to the play styles they were most often used for  we evaluated the gap statistic     and the silhouette
statistic     for the clustering  we found that our data did not cluster into different play styles possibly
because of the noise associated with having a mix of various levels of play 

 

models

we ran logistic regression to predict the winning team with   different models 
 

fi   

full heroes model

logistic regression with a term for each heros presence on a team  let  v be our feature vector 
where

if hero i is on team  
 
   
vi     if hero i is on team  

 
otherwise
our hypothesis function h is
h   v    

x

i    vi         vi        

   

i

this model was previously studied in      we have antisymmetrized the model so that it does not
depend on the ordering of the teams 
   

 nd order pca
 i 

logistic regression on a second order polynomial of pca scores  let xa be the ath pca score for
p  i 
p  i 
 i 
hero i on team    let ya be similarly defined for team    define xa  i xa and ya  i ya  
then 
x
x
x
h    x  y   
a  xa  ya    
 ab xa yb  
 ab  xa xb  ya yb  
   
a

a b

a b

where  is antisymmetric  the symmetry properties were chosen so that the hypothesis function
is symmetric under permutation of player positions in a team  and antisymmetric under swapping
teams 
this model gives some non linear interaction terms while taking advantage of pca to give dimensionality reduction  if d pca components are used  the model has d    d unique coefficients 
   

sorted pca

in studying the pca components of each hero  we learned that the first pca component roughly
corresponded to the strength of the hero in the late game  the heroes with the highest values for the
first pca component were most likely to be what the dota community defines as carries  heroes
weak in the early game  but essential to victory in the late game  a foundational tenent of dota  
strategy is the need to balance supports and carries 
accordingly  we came up with the following model  let  x i    and  y  i    be the pca scores of the
heroes in teams   and   respectively  sorted in descending order of first pca coefficient  then
x
 k 
h  x  y   
ak  x k 
   
a  ya   
a k

unlike the sorted heroes model  this model can be optimized by a team composition whose pca
components are quite different  across teams  it compares strengths of heroes with other heroes
who are likely playing similar roles 
the total number of coefficients for this model is  d 

 

results and discussion

for the  nd order and sorted pca models  the optimal number of pca dimensions  d  to include
was determined by maximizing the prediction accuracy on the test set  figure   shows the prediction
accuracy vs  number of pca dimensions for the sorted pca model  resulting in an optimal number
d      the  nd order pca model similarly had an optimal number d     
figure   shows the resulting learning curves for logistic regression using our three models  the full
heroes model had a prediction accuracy of     while both pca models had an accuracy of     
 

fisorted pca model

learning curves

    

prediction accuracy

prediction accuracy

    

    
    

training set
test set

    
 

 

 
 
pca dimension

 

    
    
    

sorted pca
 nd order pca
full heroes

    
 

  

    

                                  
training set size

figure    the left plot shows the determination of the optimal number of pca dimensions by
maximizing the prediction accuracy  resulting in d     for the  nd order pca model  the right plot
shows the learning curves of the three models as a function of training set size 

our two pca models failed to match the accuracy of the full heroes model  the pca models were
based on average hero stats which may not be as informative as whether a particular hero was on a
team  for example  some heroes can be used in multiple roles  which would result in different end
game stats  average stats would no longer be a good representation of how a hero is played 
preliminary explorations show that the best teams predicted by the full heroes model are in general
much less realistic than the best teams predicted by the pca models  the best team predicted
by the full heroes model  omniknight  necrophos  abaddon  zeus  ogre magi  is a collection of
heroes who individually have high win rates  but occupy similar roles  strongest in the midgame 
not reliant on teammates   in contrast  the best teams predicted by the sorted pca model  pudge 
io  abaddon  dazzle  spectre  and the  nd order pca model  abaddon  io  spectre  naga  zeus 
are more balanced collections of heroes with very different roles 
both pca models resulted in similar prediction accuracies and optimal numbers of dimensions
despite representing very different models of hero interactions  in the  nd order pca  each team
member is treated equally and the averages and covariances of the pca components xa on a team
are related to the probability of winning  in the sorted pca model  team members are ranked by x 
and treated differently in the regression 
the fact that both pca models behaved similarly and underperformed the full heroes model indicate that our models are not capturing important interaction effects  the issue with numerical stats
 as used for our pca  is determining the appropriate features  a hero that gets many kills might pair
well with a hero that gets many assists  but it is not clear how that depends on the number of kills
and number of assists  ideally  we could classify the heroes into types and then consider a model
similar to the full heroes one but with higher order terms  in this case  the features would be the
presence of certain combinations of heroes on a team 

 

conclusions

we used pca analysis of publically available dota   match data in order to study how team composition affects win probabilities  using data from professional games  we constructed two logistic
regression models that included interactions between heroes  both of our models predicted at    
accuracy for   pca dimensions  compared to the     accuracy for the full model 
however  the strongest teams under our pca models more closely resembled teams that are actually
successful in dota    this suggests that much of the accuracy of the full heroes model comes
from the fact that players are usually choosing teams with reasonable hero balance  at that point 
the marginal strengths of each hero can give us predictive power  in fact  the top   heroes in the
full heroes model are the top   heroes by winrate in the current patch      the full heroes model
leverages the imbalance of the game to make win predictions 
 

fiour pca models are therefore capturing more about the interactions between heroes than the full
heroes model did  the pca components are still missing specific information about each hero which
contribute to a heros relative strength 

 

future work

originally  we had planned to analyze team compositions at different skill levels  unfortunately 
the dota  api functionality to search for matches based on player skill level was broken by the last
update  when this bug gets patched  we hope to train our models on a narrower set of games  we
hope that this both improves the performance of both of our models  and gives us insight into how
team compositions change with player skill level 
we also plan on seeing if we can combine the best of both the full heroes model and our various
pca models  we hope to combine the higher accuracy of the full heroes model with the better team
composition selections of our pca models to both better predict match outcomes  as well as suggest
team compositions that may be currently underutilized in the metagame 

references
    k  conley and d  perry  how does he saw me  a recommendation engine for picking heroes in dota   
cs    previous projects       
    m  decoud  datdota  dec        http   www datdota com 
    r  tibshirani  g  walther  and t  hastie  estimating the number of clusters in a data set via the gap
statistic  j  r  statist  soc  b  vol      pp               
    l  kaufman and p  roussseeuw  finding groups in data  an introduction to cluster analysis  wiley 
     
    dotabuff  highest win rate  this month  dec       
winning 

 

http   www dotabuff com heroes 

fi