face detection and recognition of drawn characters
herman chau

   introduction
face detection of human beings has garnered a lot of interest and research in recent years  there
are quite a few relatively reliable and mature face detectors now available that perform very well 
particularly on frontal face images  however  little research is done in developing technology to
detect faces of drawn characters  it turns out that existing techniques such as haar features  when
applied to drawn characters is reasonably effective at detecting faces  despite the much greater
variance of shapes and lack of variance in intensity across broad patches of the image  building
upon an existing face detector for drawn characters  this project explores different techniques for
improving face detection and recognizing drawn characters 
by a drawn character  we refer to images of characters where the intensity is roughly constant in
large patches of the characters  face detection software trained on human faces perform poorly when
used to detect the faces of drawn characters  in contrast  we refer to images of realistic characters
as those in which the variation in intensity is similar to that of a photograph of a human being 
existing face detection software performs reasonably well in detecting faces of realistic characters 
figure   gives two examples of each to illustrate the difference between drawn characters and
realistic characters 

figure    drawn characters  left  and realistic characters  right 
based on existing human face detection work  we use a haar feature based cascading classifier
trained on a positive sample of     images of drawn characters and a negative sample of     images
of scenery and compare the rate of true positives to an existing drawn character face detector 
despite our relatively small training set  we are able to achieve accuracy comparable to the existing
drawn face detector 
for recognition of drawn characters  our feature extraction consists of producing a hue histogram
of each image after masking out the background pixels  most drawn characters are identifiable
primarily through distinguishable clothing  hair  and eye color  thus  we expect the hue histogram
to be a feature with good predictive power  we compare three different algorithms  softmax
regression  svms  and a k means clustering approach 
   existing face detection software
we first present a comparison two existing face detection software  using a testing set consisting of      images of japanese anime style drawn characters  the testing set is obtained from
 

fi 

herman chau

safebooru  an imageboard in which various features of pictures are tagged and identified manually
by volunteers  our testing set consists of images tagged solo  indicating that there is a single character  and hence a single face  in the image  we test two detectors  opencvs haar feature based
cascading classifier for human faces and imager  animeface  on this training set after converting
each image to grayscale and performing histogram equalization  the results are summarized below
in table   
correct false positive
opencv      
     
imager  animeface      
     
table    accuracy rates of opencv and imager  animeface on      images
beacuse opencvs detector is trained on a training set consisting of human faces it fares poorly
in detecting faces in drawn characters  it uses haar features to detect faces and a large variance
in the intensity of the eye and cheek regions of the face are necessary for the detector to perform
well 
the second detector we tested is imager  animeface  which is designed to detect faces in drawn
characters  this performs siginificantly better than opencvs detector  which is trained on human
faces  imager  animeface uses an algorithm similar to opencvs built in cascading trainer and is
trained on a dataset of roughly       positive samples and   billion negative samples 
   face detection improvements
we take an approach similar to imager  animeface and train a haar feature based cascading
classifier  after training on a positive training set of about     images  each with one face  and
a negative training set of about     images of scenery  our classifier is able to detect faces in a
testing set with limited success  furthermore  there is an extremely high number of false positives 
as depicted in figure   

figure    high number of false positives when using a small training set
after increasing our positive training set to     images  each with one face  and our negative
training set to     images and adjusting parameters for training and detection  we are able to
detect most frontal faces and even some profile faces and significantly cut down on the number of
false positives  this result is depicted in figure   below 

fiface detection and recognition of drawn characters

 

figure    significant improvements to drawn face detection
despite the training set being roughly of the same order of magnitude  we were able to achieve
much greater success in drawn face detection by appropriately tweaking parameters during training
and detection  during training of the haar feature based cascading classifier  we increased the
minimum hit rate  hr  and decreased the maximum percentage of false alarms  fa  at each stage 
although increasing hr and decreasing fa has the tendency to produce a classifier that overfits  in
this case  we found that increasing hr and decreasing fa significantly improved our face detection
rates  to decrease the number of false positives  we used the neighbourhood approach and increased
the minimum number of neighbours required to detect a region as a face  we also made one more
improvement in the form of training and detecting using grayscale images  although the color in
drawn faces are usually relatively constrained in hue and intensity  we have found that it is in fact
better to use grayscale images 
we then compared the accuracy rates of imager  animeface and our own haar feature based
cascading classifier on detection of a different set of      images  the results are summarized in
table   below 
correct false positive
my cascading classifier      
     
imager  animeface      
     
table    accuracy rates of my cascading classifier and imager  animeface on      images
as we can see  with the appropriate choice of parameters for training and detecetion  we are able
to get results comparable to imager  animeface using a much smaller training set of positive and
negative samples 
   character recoginition through hue histograms
a closely related topic to face detection is face recognition  i e  given a picture of a drawn face 
we wish to determine which character the face belongs to  in general  it is quite hard to distinguish
from the faces alone  because unlike human faces  there is not much detail and features in a drawn
face  rather  humans are able to distinguish between different drawn characters primarily by the
clothes they wear  their hairstyle and hair color  and other miscellaneous accessories the character
wears  thus  a relatively effective way of identifying drawn characters is based on a hue histogram
of the drawing 
for a given m  n image i  we may treat it as a vector of mn integers in the interval         
representing the hue of each pixel in the image  then the hue histogram of the image i is a vector

fi 

herman chau

h  r    where

mn
k     imn   i 
mn
that is  the ith element of h is the percentage of pixels in i with hue i  each training example is
thus a pair  h i    y  i    where h i  is the hue histogram of training example i and y  i               n  
is the labelling of the image  in our experimental results below  we chose n      characters from
the same series and compare the effectiveness of using softmax regression  svms  and k means
clustering to identify the character in a given image  in all our results  we used a training set of   
images per character and testing set of     images per character 
with our feature extraction of the hue histogram from each image  applying softmax regression
and svms is straightforward  for k means clustering  we used n clusters on the data set with
each cluster representing the ideal hue histogram for each character  the distance between two
histograms h    and h    was defined as the    distance between the two vectors  a comparison of
the results from each algorithm is shown in table   
hi  

class labels
softmax accuracy
svm accuracy
k means clustering accuracy
table    accuracy

 
   
   
   
rates

 
 
       
       
      
of different

 
 
       
       
       
algorithms

 
 
 
 
  
avg
                         
                         
                        
to identify characters

in all three algorithms  class   is identified with significantly more accuracy than the other
classes  the character labelled   and the corresponding hue histogram obtained is shown below in
figure   

figure    example hue histogram obtained in k means clustering
the hue histogram in this case is quite accurate  with the majority of the hues concentrated in
the blue and skin color regions  thus  the hue histogram is a reasonably good predictor of the
character  comparing the effectiveness of the algorithms  we see that svm performs much better
than both softmax regression and k means clustering  one hypothesis to this is due to the fact that
svms are well equipped to deal with high dimensional data      dimensional in our case here  
   conclusion and future work
in our work on face detection  we have shown that we can get quite good results using a relatively
small dataset by using haar features and training with a cascading classifier  the dataset used
for this paper was manually produced and hence limited in scope  but it is likely that training on

fiface detection and recognition of drawn characters

 

a dataset an order of magnitude larger would produce results that surpass existing face detectors
such as imager  animeface  there are many other approaches to human face recognition such as
principal component analysis  linear discriminant analysis  and neural networks and it would
be interesting to see how such algorithms fare in detecting faces of drawn characters 
with regards to identifying drawn characters  we were able to achieve a moderate     success
rate in identifying a character amongst    others  this is roughly the order of magnitude of the
number of characters in a given animated series and as such  there are potential applications to
automated indexing of animated films  e g  to produce a list of scenes containing a given character  
for identifying drawn characters we only extracted a hue histogram  but we would achieve much
higher accuracy using if we extracted a  hue  saturation   d histogram  for colors of low saturation
 i e  black and white regions   the hue gives us very little information  in particular  the characters
on which our classification did poorly on were characters whose color scheme was primarily black
and white 
overall  we have made some preliminary attempts in face detection and character recognition for
drawn characters  as the amount of digital media continues to grow  work done in this direction
has applications for the indexing of animated clips and comics 
references
    imager  animeface  http   anime udp jp face detect          online  accessed    december       
    kohei takayama  henry johan  and tomoyuki nishita  face detection and face recognition of cartoon characters using
feature extraction 
    paul viola and michael jones  rapid object detection using a boosted cascade of simple features  in computer vision and
pattern recognition        cvpr       proceedings of the      ieee computer society conference on  volume    pages
i     ieee       
    xia wan and c c jay kuo  color distribution analysis and quantization for image retrieval  in electronic imaging  science
  technology  pages      international society for optics and photonics       

fi