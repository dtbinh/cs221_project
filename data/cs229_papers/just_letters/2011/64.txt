electricitydemandpredictionincalifornia
billcarson 



bettinachen 



ericglover

stanforduniversity 

stanforduniversity 

stanforduniversity

wcarson  stanford edu

bettinac stanford edu

esglover stanford edu


abstract
electricitydemandmustbemetatalltimesandthereareeconomicpenaltiestothe
utility for incorrectly predicting the demand  using a training set comprised of a
yearofdata wedevelopedalearningalgorithmtopredicttheelectricitydemandfor
thenextday thelearningalgorithmusedinputfeaturesofhourlytemperaturedata
anddayofweektodetermineamodel itwasfoundthatalinearregressionmodel
ofafirstorderpolynomialgavethelowesterroronthetestset theeffectivenessof
ourmodelwasthencomparedtothedayaheadmarket dam predictionmadeby
californiaindependentsystemoperator caiso  whilethedevelopedmodelhada
highertesterrorthanthecaisoprediction theerroriscomparable thedifference
canlikelybeattributedtothesizeofthetrainingdatasetaswellastotheoverall
complexity of the model  however  our process shows that a simple model using
only hourly temperature data and day of week as features can effectively predict
electricitydemand 

   introduction

electricity is the ultimate perishable resource  there is very little capacity for
storageinthecurrentgrid supplyanddemandmustbeequalatalltimes any
additional power produced is essentially wasted  and mismatches create
undesirablefrequencyvariationsintheoutputsupply therefore itisimportant
that there is an extremely accurate model for predicting demand of electricity 
thisdemanddependsonnumerousfactorsincludingtimeofday temperature 
season anddayofweek 

demandforecastsareusedbythedamtoschedulegenerationcapacity certain
types of generation  such as nuclear and coalfired power plants  can produce
energy very cheaply but can take a long time to ramp production up or down 
because of their slow response rate  these plants are usually operating at full
capacityandarereferredtoasbaseloadproduction othertypesofgeneration 
such as natural gas plants  can ramp up or down very quickly  but these types
also tend to be the most expensive methods of generating power  a more
accuratemodelcanallowforgreateruseofthecheapesttypesofgenerationand
savesignificantcostsintheproductionofelectricity 



 

fi     datasources
we used archived electricity demand data from open access sametime
information system  oasis   the database from the california independent
systemoperator caiso     thecontrolareaofcaisoincludesthemajorityof
california outside of the sacramento municipal utility district and the los
angeles department of water and power  we defined our project scope as the
san diego gas   electric  sdg e  service territory since it covers a relatively
smallareaof     squaremiles butservices   millionpeople    itisidealto
select a location with a large population in order to provide an adequate
representation of electricity demand  additionally  the benefit of a small
geographic location  as opposed to all of caisos service territory  is that the
weather data will be more uniform in a small control region than across the
entire state  for our model  we gathered temperature data from camp elliot 
california amilitarybaseinthesdg eterritory    

   method

     datapreprocessing
given the large data set of electricity demand from all the service providers in
oasis  we isolated the sdg e electricity production  to balance out regional
electricitydifferences aserviceterritorymayneedtobuyorsellaportionofits
electricity production to neighboring territories  however  we simplified our
modelbyassumingthatelectricityproductionisequaltoelectricitydemandfor
thesdg eregion usingthetemperaturedatarepository wefilteredthedatato
selectoutboththeaveragedailyandhourlytemperature 

     leastsquares
we included five features in our first model  the maximum  minimum  and
average daily temperature  hour of day  and day of week   day of week will
distinguish between weekends and weekdays  since electricity demand on any
weekdaywillfollowasimilarpattern whichmaybedifferentthanthedemand
onaweekend usingthehourlytemperaturedata weconstructedourmodelas 
y   ax where y  r n        a  r  n    x    x  r     
wedefinedyastheactualhourlyelectricitydemand aasthematrixcontaining
theinputfeaturesforeachhour nasthenumberofdays andxastheparameter
tooptimize wedeterminedxusingtheleastsquaressolution  x    at a    at y  
additionally wetriedavariantofthismodelbyincludinghigherorderterms i e 
averagetemperaturesquared thisallowedustodetermineifanonlinearmodel
canbetterpredictelectricitydemand 


 wedefineddayofweekasfollows 





 

fi     parameterseparationleastsquares
one potential flaw in our first attempt is the definition of x  our learned
parameter itgivestherelativeweightingbetweenthedifferentattributes such
ashourofdayoraveragedailytemperature however thisintroducesbiasinto
the model since it assumes a direct mapping from the hour of the day to the
energydemandbasedonsomehighorderpolynomialrelationship onewayto
addressthiswasbyredefiningourinitialprobleminto  separateoptimization
problems oneforeachhouroftheday inotherwords givenhourj           
weselectedoutthedemandhistoryandtemperaturefeaturesforhourjfromthe
electricity and weather data  this required changing the temperature
information from daily to hourly temperature statistics  after redefining the
problem  the x values that are obtained as the least squares solution have a
different meaning  now  the x values represent the weighting during hour j
amongthehourlytemperaturestatisticsandthedayofweek thisallowedusto
determinetheweightingamongthedifferentfeaturesforeachuniquehourand
eliminatedthebiasfromtheearlierattempt 

   results

     leastsquares
usingleastsquares wedevelopedalinearmodelthathadfairperformance we
realized that the typical electricity load curve follows a cyclical pattern  with a
valley in the early morning and peak in the late afternoon  therefore  while a
nonlinear model of the features improved performance compared to the linear
combination  it was still not satisfactory  we determined that the cause of the
unnecessarybiasinthemodelwasthearbitrarylabelingofthehoursoftheday 

     parameterseparationleastsquares


















figure  testandtrainingerrorvsorderofinputpolynomial



 

fithe second attempt used a more complicated model  which improved
performance  we gathered a dataset of one full year of electricity demand and
temperaturedata atrainingsetwasgeneratedbyrandomlyselecting   ofthis
datawhiletherestwasreservedforatestset thiswasusedtodeterminethe
optimalorderoftheinputfeatures figure showsthatafirstordermodelgives
the lowest test error for this set of features as this optimizes the tradeoff
betweenbiasandvariance 

     comparisontoutilityprediction
to quantify the effectiveness of our model  we compared the test error of our
models prediction with the dam prediction made by caiso for the dayahead
market  the test error was computed by taking the l norm of the difference
between the actual and predicted energy demands and dividing by the total
numberofdaysinthetestsettodefinetheaverageerrorperday byaveraging
overnumerousiterations wefoundthetesterrorforourmodeltoconvergeto
     mw whereas the utility prediction had a test error of      mw  figure  
compares the predicted electricity demand for one day using our model and
caisostotheactualdemand 



















figure  comparisonofenergypredictionsforrandomdayintestset

   sourcesoferror areasforimprovement

we came up with three possible sources of error in our method  energy data 
temperaturedata andenergybalance firstly onedisparityintesterrorismost
likelyattributabletotheamountoftrainingdataeachmodeluses ourmodelis
onlybasedoffofoneyearofdata whilecaisohascollectedmanyyearsofdata 
the additional data should allow the regression model to train its parameters
more accurately  an additional source of error is the temperature


 

fimeasurements  we used the temperatures measurements from camp elliot as
our sole source of temperature information and made the assumption that the
temperatureacrosstheentiresdg eserviceterritorywasuniform instead we
could supplement the camp elliot temperature data with hourly temperature
measurementsfromeachzipcodewithinthesdg eserviceterritory    lastly 
thefinalmajorsourceoferrorwerecognizedwastheenergybalance oneofour
initialassumptionswasthattheenergydemandinagiventerritorywasequalto
the energy produced in the same territory  in reality  caiso would have
informationonwhichserviceterritoriesaretypicallynetexportersofelectricity
and which service territories are net importers of electricity  this would allow
our model to add a feature to scale up or down its prediction of electricity
demandbasedonthehourlyimport exportcharacteristicsofthesdg eservice
territory 

   conclusion
usinglinearregressiontodetermineafixedweightingamongallfeaturesforthe
entire day was not a successful algorithm  instead  using linear regression for
eachhourofthedaytodeterminefeatureweightingprovidedamoreaccurate
prediction by eliminating the bias caused by the hourly labeling  when
determining model size  using the first order of the features provided the best
model  which we judged using cross validation and selecting the lowest test
error  we found the predictions from our model to be comparable to the dam
predictionsmadebycaisosincetheaveragetesterrorforourmodelwasonthe
sameorderofmagnitudeasthatofthecaisoprediction 

   references
   californiaisooasis  online  available http   oasis caiso com 

   sandiegogas electriccompanyfacts  online  available 
http   sdge com ourcompany aboutus companyfacts

   campelliotcalifornia  online  available 
http   www wrcc dri edu cgibin rawmain pl caccae

   weatherunderground  online  available 
http   www wunderground com history 





 

fi