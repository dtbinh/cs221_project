increasing indoor localization accuracy using wifi signals
chris pak  alex huang
final project report for cs    
stanford university  fall        
december         

abstract

computing technology and the increasing availability of wifi networks have enabled more accurate
localization in indoor environments where gps is
less precise  our goal in particular was to find a
way to localize something ubiquitous in todays society  the cell phone 

the widespread availability of wireless networks has
created an increased interest in harnessing them for
other purposes  such as localizing mobile devices 
our particular goal was to be able to use these
techniques as well as others in order to better predict the location of a smart phone inside a building  the current state of the art techniques use
gaussian process latent variable models to solve
this problem  however  existing implementations
of this technique require ground traces  wifi data
collected sequentially  and are limited to signalrich environments  due to the constraints of using
phones for this  we were restricted to non sequential data  since this eleminates the possbility of
using traditional gp lvm techniques  we created
a locally weighted regression based machine learning algorithm for geographical localization of a mobile device in an indoor environment based on wifi
signal strength data  our contribution is a novel
approach to generating adequate likelihood models
based on locally weighted sums of gaussian probability densities  the results show that our algorithm
is effectively deduces the original floor plan of the
environment and presents a more accurate estimate
of the devices location 

 

 

description of problem

there are several key challenges associated with localization  and in particular doing so with the limitations imposed by using smart phone data  these
include data collection  power usage of the phones 
and the challenge of localization itself  all three of
these aspects add to the difficulty in this problem 

   

data collection

one obstacle to cell phone localization is in data
collection  it is certainly desirable to take thousands of scans of a particular building  and map it
to a ground truth map  however  the time and cost
of this method is prohibitively expensive  instead 
an intelligent method for extracting the most information with the least cost must be found  instead
of this  we chose to use existing smart phone applications to assist us in data collection  working
with a company that is developing other location
based software  we would piggyback data that we
would need along with theirs  this means that anyone with this application installed will be collecting
data  and will not drain batteries more than would
ordinarily occur  while this certainly makes it simple to collect huge amounts of data in a relatively
short amount of time  it creates another problem 
which data do we need for a particular building 
this problem was beyond the scope of our current

introduction

there has long been interest in the ability to determine the physical location of a device given only
wifi signal strength  this problem  called wifi
localization  has important applications in activity
recognition  robotics  and surveillance  this is an
extremely challenging task that hes been researched
for over a decade now  recent advances in mobile
 

figoals  and for this project  data was simply nar  strength for all wifi access points in the indoor
rowed down by hand to a specific building as nec  environment  and the low dimensional space corresponds to the geographical coordinates of the deessary 
vices location  our technique considers that signal
strength correlates with physical location  observa    phone limitations
tions with similar signal strength measurements are
another obstacle to designing an algorithm for likely to be close to each other  this constraint is
smart phones are the limitations of the phones important when dealing with data from close loops 
themselves  as mentioned above  one major lim  where the person visits a location at two different
itation for phones is battery life  this is in fact points in time  the data we collected consists of
the single largest obstacle to designing more com  signal strength measurements annotated with gps
plex algorithms  as we cannot insist that the user readings and error estimates  we collected data sets
constantly be scanning wifi networks in order to lo  via the method described above  and chose packard
calize  as that would be an enourmous strain on building to model  as it has a relatively simple laybattery consumption  one aspect of phones that out and we had the most data for this building  for
we could not account for at all was dealing with the calculation  we offloaded this to the server for two
wide variety of phones and corresponding hardware  reasons in particular  the first  and most obvious 
putting limits on how much we could trust the data is that local regression is non parametric and thus
given to us  finally  the computing and memory we would need to send a phone large amounts of
requirements have to be taken into consideration  data in order to process it onboard  second  this
while it is true that smart phones are highly capa  allows us to use the significantly higher processing
ble machines  the users themselves dont want an power of the servers 
application that takes gigabytes of data just to improve accuracy in localization  similarly  in order
for localization to be useful  it must be relatively   results
fast  ie      seconds   this also limits how we are
after paring down data for a specific building
able to process incoming data 
 packard in this case  we get a design matrix of
    observations with a total of     detected ac    localization challenges
cess points  we denote x as our design matrix 
with
each row xn being a vector in z    with each
the key challenge of localization is overcoming the
unpredictability of wifi signal propagation through dimension representing the signal strength of each
indoor environments  the data distribution may access point  ap  detected by at least one observavary based on changes in temperature and humidity  tion  we also have the labels  y   which represent
as well as the position of moving obstacles  such the estimated gps location given  each row of y  
as people walking throughout the building  this yn contains latitude  longitude  and the error estiuncertainty makes it difficult to generate accurate mate given by the phone  from here we can actuestimates of signal strength measurements  thus  ally generate a likelihood function  the standard
the bulk of research in this area focuses on refining equation is 
the location likelihood models from the available
data collected in the environment 

j    

n
x

wi  yi  t xi   

   

i  

   

approach

we use the standard weight function 
in order to resolve these challenges  we present a
 
kxi  xk 
machine learning based algorithm for localizing a
wi   exp
   
mobile device using a locally weighted regression
   
to map high dimensional data to a likelihood function in a low dimensional latent space  in our con  however  instead of performing a least squares retext  the high dimensional data represents signal gression  we treat each yi as a guassian rv with
 

fifigure    the original gps readings are
black points  for the selected observation 
shown in yellow  we generated a likelihood
function  shown in a contour plot 
figure    the likelihood function  plotted over the area of the environment 

mean at its location  and a variance proportional
to its error estimate  we simplify calculations by
converting the pdf of each yi to be in terms of r 
 
ky  yi k 
pyi  r   exp
 error 
   
error 
we turn the environment into a grid of  m x  m
squares  over which the likelihood function is defined  and then choose the square that contains the
maximum likelihood  this yields our location estimate y as 
j y   

n
x

wi  pyi  kyi  yk 

   

i  

while this function is certainly not convex  we
find that in practice  this function is well behaved
and we can thus easily find maximum estimates of
it  for each observation  we generated a likelihood
function using this equation  we then chose the
maximum value over the distribution to be our mle
for the coordinates of the chosen observation  iterating over the entire data set  we generated a rough
plot of the buildings layout 
for a data set of     observations of     access
points  our algorithm had a run time of about   
to    seconds  while this certainly seems slow  in
fact only one observation will have to be run for a
given person  which means that for a given observation  we can have a computation time of less than a
tenth of a second  an acceptable speed for the given
application 

figure    figure    maximum likelihood
estimates  blue   contrasting with the original data  green   we added a small noise
component  red  to the blue points because
many of the estimates were overlapping 

 

fi 

comparison
techniques

of

localization

throughout this project we tried several different techniques to get more accurate localization
using wifi  the two that are representative of
these methods are gaussian process latent variable models and wifi triangulation 

   

gp lvm

the currently most popular and arguably most
state of the art technique is the gaussian process
latent variable model  in this model  they use a
similar kernel to our in terms of w  a squared exponential weighting for wifi points  however  they
also assign to each wifi reading a latent variable
tied to the time the sample was taken  this allows
them to make the following assumptions  successive
positions in time have a proximity component  the
change in position is likely parallel to other similar
reading transitions  and orientation between successive points is relatively low   this follows from the
fact that most hallways are straight corridors  their
final constraint  again like ours  is to assume that
similar signal strength readings possess similar coordinates in space  while we began our testing using
this model  it was not very effective  since we did
not have the temporal data that we needed  data
collection for a single phone occurred at most once
every    seconds  and more commonly was on the
order of several minutes  this essentially zeroed
out any calculations involving the latent variables 
making this method ineffective 

   

figure    the same data points  overlaid
on top of packards first floor 

triangulation

this is certainly the most naive approach when
attempting localization  essentially  one considers signal strengths to be distances from an access point with an exponentially decaying signal
strength and random noise factor    when we tried
this  we used two steps  we began by using a portion of the data to try to localize the aps nearby 
and from there used the rest of the data in for trying to find any error terms  this was even less effective than the above method  due to the faulty assumption that signal strength decays uniformly as a
function of radius  as mentioned previously  walls 
furniture  and even other people in thte building
 

fican effect the signal strength of a particular access  huang et al         huang  j   millman  d  
quigley  m   stavens  d   thrun  s   and
point  which makes it virtually impossible to use
aggarwal  a         
efficient  generalized
this method without significant error 
indoor wifi graphslam  in proceedings of the
ieee international conference on robotics and
  conclusions
automation 
we developed an algorithm that predicts latent geo   siddiqi et al         siddiqi  s   sukhatme  g  s  
and howard  a          experiments in montegraphical coordinates based on observed wifi data
carlo localization using wifi signal strength  in
by generating likelihood models based on locally
proceedings of the international conference on
weighted sums of gaussian distributions centered
advanced robotics  coimbra  portugal 
at historical observations  our algorithm was able
to deduce the general structure of the packards
 yang et al         yang  q   pan  s  j   and zheng 
layout  including the long hallway and the large
v  w          estimating location using wi fi 
lobby area  from these results we observed  we
ieee intelligent systems 
conclude that the algorithm can accurately localize a mobile device  there remains much room for
future improvement  for example  further testing
with various bandwidths and threshold levels will
be needed to find a better tradeoff between bias
and variance  in future studies  we hope to include
timestamps into the design matrix and develop constraints based on time data  once classification
can be done with higher degrees of confidence and
accuracy  implementation in a mobile environment
would be the next step  moving the operations from
matlab to c or python could increase our computational speed to facilitate future integration with a
mobile application 

references
 biswas and veloso        biswas  j  and veloso 
m          wifi localization and navigation for
autonomous indoor mobile robots  in proceedings of the ieee international conference on
robotics and automation 
 ferris et al         ferris  b   fox  d   and
lawrence  n          wifi slam using gaussian
process latent variable models  in proceedings of
the international joint conferences on artificial
intelligence  pages          
 howard et al         howard  a   siddiqi  s   and
sukhatme  g  s          an experimental study
of localization using wireless ethernet  in proceedings of the international conference on field
and service robotics 
 

fi