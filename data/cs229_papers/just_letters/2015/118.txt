human activity recognition using wearable devices sensor data
zhongyan wu zhowu stanford edu
shutong zhang zhangst stanford edu
chenying zhang czhang  stanford edu

abstract

   directly extracting physical features from raw data 

wearable devices are getting increasingly popular nowadays as the technology products become smaller  more energy efficient and as more sensors are available on our
wrist  by wearing these devices everyday  we could easily
collect mega bytes of data each day  in spite of the abundance of available data from these sensors  there isnt too
much information we can tell from these raw data about
what we have done each day  in this project  our goal is to
recognize patterns from these raw data  and extract useful
information about the users daily activities  we used feature extraction and selection techniques to process the raw
data  and then applied various learning algorithms  the
results are quite impressive as compared to previous work 
as we have significantly reduced the number of features required and therefore made the process more practical on
mobile devices  where energy consumption is a paramount
concern 

an accurate prediction of humans activity through
physical related data could be used to create mobile applications based on different movement and provide useful
suggestions for users  in addition  people can use these results to keep record of self activity 

   introduction
wearable devices are getting more and more popular
recently  which presents a convenient and portable way
to record physiological data from users  thus it is more
possible to collect physical related data and perform
further analysis  all these data will be generated and
made available to better understand the activities users
are performing in and could be used to monitor health or
recreational activities 

   related work
there has been a variety of works trying to identify human activities based on different kinds of data source     
some data comes form environmental sensors  which may
not give much information about human activity as bodyworn sensors      some data comes from specialized devices  which are expensive  uncomfortable for users and become a burden to the user during regular activity     
thus more and more researches are focusing on using wearable devices data to classify human activity         however  usually they only pay attention to activities and ignore
postural transitions  the process between two activities  in
this project  we used a dataset obtained from smartphones
containing data related to both activities and postural transitions 

   problem formulation
in this part  we will formally described our problem formulation here  our problem includes two essiential parts 
   extract useful features f from raw sensor data r
for training examples xtrain    x    x         xm   

however  the data directly come from these devices
are raw data and couldnt provide much information about
humans activities  in this project  we use data come
from smartphones built in sensors  accelerometer and gyroscope  of    users and evaluate several machine learning
algorithms to recognize human activities such as walking 
sitting  standing  etc  thus  we use two strategies to gain
information from raw data 

we use the notation rtrain    r    r         rm  
to denote the raw data  where we directly collected
from the wearable sensors and m is the number
of training data  then  we can extract useful information from the raw data rtrain   and project
them into a new feature space to obtain the features
ftrain    f    f         fm   for each training example
xi   i              m 

   using feature selection strategy to select from given
features 

   use the features f to predict the labels for test data
xtest  

finote that we use the same feature space for xtrain
and xtest   thus we could compute the features for all
the test data ftest    f    f         fmtest    based on
the extracted features we get on the test examples  we
are able to build classification models to classify them 
 
we will use ypredict    y     y          ym
  to denote
test
the predict labels for all the test data 

each volunteer  the time signals were sampled in fixedwidth sliding windows of      seconds  a vector of    
features provided by     was mapped using the functions in
table   for a single sampling window 
     

feature selection

   data preprocessing

 

     dataset

 

we obtained our dataset from uc irvine machine learning repository      this dataset was collected from participants wearing a smartphone  samsung galaxy s ii  on the
waist during the experiment execution 
this dataset involves    volunteers from    to    years 
data related to six basic activities including three static postures  standing  sitting  lying  and three dynamic activities
 walking  walking downstairs and walking upstairs  were
recorded  so were data about six kinds of postural transitions between the three static postures  to use these data
for machine learning      of the volunteers were selected
for generating the training data and     for the test data
randomly 

 

 

 

 

 

 

 
  

 

 

 

  

  

  

     data preprocessing
     

hapt feature

 

 

function
mean
std
mad
max
min
sma
energy
iqr
entropy
arcoeff
correlation
maxfreqind
meanfreq
skewness
kurtosis
energyband
angle

description
mean value
standard deviation
median absolute value
largest values in array
smallest value in array
signal magnitude area
average sum of the squares
interquartile range
signal entropy
autorregresion coefficients
correlation coefficient
largest frequency component
frequency signal weighted average
frequency signal skewness
frequency signal kurtosis
energy of a frequency interval
angle between two vectors

table    list of measures for computing feature vectors

raw data contains triaxial linear acceleration and angular velocity signals collected through the smartphone accelerometer and gyroscope at a sampling rate of   hz of

 

 

 

 

 

 

 
 
 
  

 
 

  
 

  
 

 
 

 
 

 
 

  

figure     d and  d pca component visualization

these     features were given by uc irvine machine
learning repository dataset together with the raw data 
these extracted data were used on several models  see the
method section  and they performed very well  see the result section   but we thought there may be too many features and there may be some redundant information  thus
principal components analysis  pca  is performed on the
train and test matrix x to make feature selections  pca
generates a new set of variables  called principal compo 

finents  each principal component is a linear combination
of the original variables  all the principal components are
orthogonal to each other  so there is no redundant information  the full set of principal components is as large as
the original set of variables  thus there are totally     variables   but it is commonplace for the sum of the variances
of the first few principal components to exceed     of the
total variance of the original data  in our case  the first   
components contribute        of the total variance  therefore      features are projected to a    dimension space
and these new selected features were used to perform activity classification  however  the result is less than satisfactory  see the result section  and we decided to generate
the same amount of features from the raw data ourselves 
which is described later  in addition  to develop a deeper
understanding of the driving forces that generated the original data and visualize data  we drew the plots of the first two
and three new variables generated by pca respectively 
since we have    classes in total  its hard to set color
to these points in the above plots based on their classifiers 
however  we can see clearly that there are no    distinct
clusters and these data points are mixed together  which we
thought may be the reason why the results obtained by using pca feature selection data did not give an accuracy estimate 

max tacc 
min tacc 
mean tacc 
std tacc 
mad tacc 
max tgyro 
mean tgyro 
std tgyro 
mad tgyro 

selected features
largest value of accelerometer
smallest value
mean value
standard deviation
median absolute deviation
largest value in gyro
mean value
standard deviation
standard deviation

table    list of measures for computing feature vectors

   methods
we conducted five different multi classification models
to perform human activity recognition 
   naive bayes
we chose naive bayes as the baseline model to get a
rough idea of how is the training process going 
in a bayes classifier  we assign a class label y   ck
for some k as follows 
y   argmaxk       k  p ck  

n
y

p xi  ck  

i  

     

feature extraction

the data set provided by hapt includes     features  in
the previous section we used pca to select    features
from those features and achieved a correctness rate of
       which is less than satisfactory  therefore  we
performed our own feature extraction process to extract a
same amount of features and achieved a correctness rate of
       

   knn
given a positive integer k and a test observation x   
the knn classifier first identifies the neighbors k
points in the training data that are closest to x    represented by n    it then estimates the conditional probability for class j as the fraction of points in n  whose
response values equal j 
pr y   j x   x     

  x
i yi   j 
k
in 

the features selected for this database come from the
accelerometer and gyroscope   axial raw signals tacc
and tgyro  these time domain signals were captured at a
constant rate of    hz  these signals were used to estimate
variables of the feature vector for each pattern  the set
of variables that were estimated from these signals are 
max tacc tgyro   min tacc tgyro   mean tacc tgyro  
std tacc tgyro   mad tacc tgyro 

   svm
support vector machines     is a supervised learning
algorithm that classifies objects based on the support
vectors of a dataset or points lie closest to the decision
boundary  svm maximize the distance between support vectors and the decision boundary 
the objective function is 
m

the functions we used was performed on each dimension of the triaxial linear acceleration and angular velocity
signals  therefore  we have a total of    features     linear
    angular      functions  
the training and testing datasets were randomly selected
with a       percentage from the entire raw dataset 

min w b
s t 

x
 
kwk    c
i
 
i  
y  i   wt x i    b      i   i              m
i     i              m

   softmax
in softmax model  the probability that an input vector

fix is a member of a class ck is defined as followed 
ewck x bck
p  y   ck  x  w  b    p wj x bj
je
the prediction label y should be 

     experiments results
we use different percentage                    
         of the training dataset to train naive bayes 
knn  svm  softmax and multi layer perceptron model 
and we show the error of test data below to compare the
influence of the number of training data to the performance
of the model 

y   argmaxck p  y   ck  x  w  b 
    

   

    

   

    
svm
naivebayes
knn
softmax
mlp

   

 

   

 

   

 

   

 

   

 

   

 

figure    classification accuracy for naive bayes  knn  svm 
softmax and multi layer perceptron 
figure    structure of mlp
table    classification accuracy percentages for different classification models 

   multi layer perceptron
multi layer perceptron can be seen as a fullyconnected neural network with one input layer  one
hidden layer and one output layer  a one hidden layer
mlp can be formalized as follow 
it is a function f   rd  rl   where d is the size of
input vector x and l is the size of the output vector
f  x   such that  in matrix notation 

model
bayes
knn
svm
softmax
mlp

   
      
      
      
      
      

   
      
      
      
      
      

   
      
      
      
      
      

   
      
      
      
      
      

   
      
      
      
      
      

    
      
      
      
      
      

f  x    g b      w      s b      w     x   
with bias vectors b      b      weight matrices
w       w     and activation functions g and s 

   experiments and evaluation
     evaluation matrices
for evaluation  we use accuracy to represent the performance of the models  also  we have compute the precision 
recall and f score for each class  which can show us the
performance of our classifier on every activity category 
accracy xtest    

m
test
x
i  

  yi    yi   

figure    precision  recall and f score for the existing    activities catagories using svm 

from figure    we can see that knn  svm  softmax
and multi layer perceptron performs much better than

finaive bayes  the former achieve and accuracy around the
  th percentile where naive bayes was only able to get to
the   th percentile  among all the classifiers   multi class
svm reaches the best performance  which reduce the error
to about   percentile  meanwhile  the accuracy of naive
bayes decreases when the percentage of training data is
more than      the decrement here may illustrates that
there is some noise in the dataset  which may cause the
overfitting problem 

 
pca
hapt
preprocessed data

   

   

   

   

   

the results of svm is rather satisfatory  and by looking
at figure   we can see its precision  recall  and f force
shared a similar pattern and was quite high for activities
     however  the results for activities from      has higher
deviation  where the highest point is for activity   of    
to      and the lowest was activity    where the percentile
is only about      note that activities     is pure activity 
while activities      is the transition of different activities 
thus  maybe we should consider using more than one
classifiers for these    activities and to see if the results can
be improved  besides using more than classifiers  what we
can try is to change the features for activities       since
they are transition activities  i e  from sitting to walking 
we could change the feature to be the difference between
the original features 

   

 

   

 

   

 

   

 

   

 

   

 

figure    classification accuracy for hapt features  pca features and our preprocessed data using knn

we were able to achieve a very good result by performing
the    selected function on raw data  it was able to achieve
around     accuracy with only    features  in contrast to
the     features introduced by hatp and this was a very
satisfying result  and it perform outstandingly as compared
to the    features selected by pca from the     hapt
features  of course  the original hapt features have the
best performance among these three features  but with the
fact that these features has     dimensions  we are able to
gain good performance with only    dimensional features 

 

by comparing figure   and    we can draw the conclusion that result of knn and mlp achieved a similar accuracy on our pre processed data 

hapt
pca
preprocessed data

   

   

   conclusion and future work

   

we have worked on feature extraction  feature seletion
and classifiacion methods on the problem of human activity
recognition  after conducting experiments on real world
the sensor data from smart phone  the results have shown
the effectiveness of our chosen methods 

   

   

   

 

   

 

   

 

   

 

   

 

   

 

in our future work  we can explore the following aspects 
figure    classification accuracy for hapt features  pca features and our preprocessed data using mlp
table    classification accuracy percentages for different classification models using knn 
model
hapt
pca
preprocessed

   
      
      
      

   
      
      
      

   
      
      
      

   
      
      
      

   
      
      
      

    
      
      
      

figure   and figure   illustrates the effectiveness of
different features  including the original hapt features 
the features after using pca to select and the features
we extract ourselves  comparing different methods of
processing the input data  we can tell from figure   that

   we need to try more methods to improve our results
accuracy 
   we can collect data ourselves  using different kinds of
smartphones or sensors on different parts of the body 
such as chest  wrist  waist and ankle
   we can try to classify more kinds of motion pattern 
such as jumping  swimming and playing basketball 
we only trained models based on    basic motion patterns right now 
   we can apply our results of motion recognition to
health monitoring and weight control 

fireferences
    d  anguita  a  ghio  l  oneto  x  parra  and j  l 
reyes ortiz  human activity recognition on smartphones using a multiclass hardware friendly support
vector machine  in ambient assisted living and home
care  pages         springer       
    r  poppe  vision based human motion analysis  an
overview  computer vision and image understanding 
                 
    n  ravi  n  dandekar  p  mysore  and m  l  littman 
activity recognition from accelerometer data  in aaai 
volume    pages                
    j  l  reyes ortiz  l  oneto  a  ghio  a  sama  d  anguita  and x  parra  human activity recognition on
smartphones with awareness of basic activities and
postural transitions  in artificial neural networks
and machine learningicann       pages        
springer       
    c  c  yang and y  l  hsu  a review of accelerometrybased wearable motion detectors for physical activity
monitoring  sensors                       

fi