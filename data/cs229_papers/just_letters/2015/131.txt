 

financialmagic
borisa perkhounkov coopergatesfrye emilymargaretfranklin


introduction
weusedmachinelearningtechniquestoattempttopredictthepricesofcardsforthemagic 
thegatheringtradingcardgame eachcardisfundamentallyfairlysimilartoastock sincetheyhavea
marketpricewhichchangesonadaytodaybasedonsupply demand andperceptionoflikelyfuture
value therefore ourprojectisanapplicationofmachinelearningtechniquestoafinancelikedomain
whichisconsiderablylessexploredatpresent 
therearecurrently     uniquemagiccardsinexistence basedonourknowledgeofthe
gamesmicroeconomy andthefactorswhichinfluencethepriceoftradedcommoditiesmoregenerally 
weknowthefactorswhichaffectcardpricesareacombinationofspeculation peoplebuyingforthe
expresspurposeofsellinglater andanddirectdemand thedirectdemandcomesprimarilyfrompeople
wantingaccesstothecardfortournaments andthedegreetowhichacardisdesiredfortournament
playcomesfromwhatitdoes hereafterreferredtoasthecards
attributes
 andwhetherithasdone
wellintournamentspreviously 
thereforetheinputtoouralgorithmisasetofmagiccards andhistoricaldataonthepriceand
tournamentuseofthosecards wethenuseasupportvectormachinetooutputapredictionoftheprice
ofothercardsinthefuture exactlyhowfarinthefutureisaparameter  



relatedwork
weapplythemethodsofsupportvectorregression whichisgivenadetailedexposition
inatutorialonsupportvectorregression smola  thepythonscikitlearnpackages
implementationofsvrisbasedonthispaper moregenerally ourprojectisfundamentallya
timeseriespredictiontask predictingtimeserieswithsupportvectormachines muller 
performsasimilartask buttreatsitasamoregeneralproblem 

datasetacquisitionandfeaturechoice
ourfirstdatacomponenttocollectwashistoricalpricedata wescrapedhistoricalpricedata
fromaggregatorsite
http   www mtgstocks com 
andsaveddataon     cards manycardshavemore
thanoneprinting andtheprintingcanhavedifferentpricepatterns overaperiodof    days as
expectedwithrealworlddatatherewereavarietyofminorissues    cardsdonothavepricedata 
around    oftheexpectedcardsdonotexist andmanycardsaremissingpricedatainthemiddleof
filledinpricedata inmagicthereisanotionofcardsbeingbulkenoughsupplyrelativetodemand
thatyoucantfindanyonewhowillbuythem andtheofficialpricesareessentiallyuseless we
thereforeexamineonlycardsthathaveacurrentpriceofover dollar whichwas    ofthem 
next wedownloadedjsonfilescontainingcarddatadescribinggameplayqualities nameof
card usage description etc  from
http   mtgjson com 
 tocreatevectorswithwhichwecouldtraina

fi 

machine wemappedfromthepricedatatocardname wehadalistofkeywordsthatindicatecard
abilities andwecheckedthedescriptiontoseeifthecardhadsuchanability 
unfortunately wewereunabletomapthenameofthecardfrompricingdatatothejsondata
inthefollowingsituations acardhadmorethanonecardprintedonit aswetreatedpricedataentities
assingularcardsthecharacterappearedinacardname ther  asourjsonparsingsoftwaredid
notallowustolookupcardswithutf characters thankfully allcardsthatfallinthesecategories
areunder  atpresent sowecanignorethem otherwise mappingthedatawentwell 
additionally wedownloadedtournamentwinnersdecklistsfromtournamentwebsiteslistedat
http   magic wizards com en events coverage
 
therewere  protourtournamentshostedbywizards
ofthecoastoverthetimeperiodfromwhichwehavepricedata andsowecollectedthelistsofcards
ofthedecksofeachofthetop playersandsavedthemlocally mappingthisdatatothejsonfiles
revealed typos whichwecorrected andahandfulofcontainingcards 
summarily ourrawfeaturevectorslookedroughlylikethis 

                pricedata                  
priceon                    
priceon                    
   
priceon                    
priceon                    

           cardattributedata            
resourcetype  amountneededtoplay 
   
totalresourcecost 
   
iscardtype creature 
iscardtype land 
   
  thedition 
   
iceage 
innistrad 
invasion 
   
zendikar 

            tournamentdata                 
tournament  winner smaindeck 
   
tournament  winner smaindeck 
tournament  winner ssidedeck 
tournament  othermaindecks 
tournament  othersidedecks 
tournament  alldecks 

fi 

tournament  winner smaindeck 
   

wethenstandardizedourfeaturestohavemean andvariance  sotheywouldwork
withouralgorithm 



methodology


weareinterestedinpredictingthevalueofacontinuousvariableaclassicregression
problem wewantedthefreedomtoexperimentwithkernels sowedecidedtouseinsensitivesupport
vectorregression specifically thealgorithmattemptstosolvethefollowingoptimizationproblem 



where basically eachx
 y
pairisonedatapoint 
giveshowfarawayfromthetruevalueour
i
i
predictionisallowedtobe andthe

sareslackvariablewhichallowformissesbymorethan but
incuracost theseareimportanttohavebecauseofoutliersandmessydata    
however oneofthemostimportantpartsofaskingwhatwillthiscostinthefuture is
havingaclearideaofexactly
when
inthefutureyoumean predictingthepricefortomorrowistooeasy
byjustpredictingtodayspriceyoudofairlywellalready attemptingtopredictthepricethreeyears
intothefutureisalsooflittleusethepriceisinfluencedbymanychaoticfactors andevenifyou
coulddoitperfectlyitisslowertoleverageintoprofit weconsideredfixingtheamountaheadwewere
predictingatsomevalue butultimatelydecidedtosimplymakeitaparameter sowetraindifferent
svmsforpredictingtendaysahead thirty ahundred threesixtyfive andsoon 
finally asimportantasthechoiceoflearningalgorithmitselfisthechoiceofhyperparameters 
whichwedecidedonviaofgridsearch althoughthetypeofkernelisnotformallyahyperparameter 
wedecidedtotreatitasoneinthatwetriedlinear polynomial andradialbasisonesaspartofthesame
modelselectionprocess  wedecidedtouse   ofourdatapointsfortraining validation and
evaluatedthemodelsbyhowwelltheycomparedon foldcrossvalidation afterthemodelwaschosen
thisway weapplyittotheremaining   ofthedatatoevaluatehowwellthealgorithmperforms 

resultsandanalysis
wefoundthatthelinearkernelactuallyendedupgivingthebestresults withacof    the
 
svrlibraryweusedprovidesabuiltinscorefunction thecoefficientofdetermination r
  
specificallyitcalculates
  u v  whereuisthesumof yy
   andvisthesumof yy
    
pred
mean
althoughitcanbehardtogetanintuitivesenseofwhatthesevaluesmean therewasnoparticular
metricwhichwethoughtwouldworkbetter sowefocusedourtimeelsewhere wewerecuriousabout
therelativeimportanceofthepastprices thecardattributes andthetournamentresults sowetrained
ouralgorithmonallthecombinationsofoneandtwo aswellasallthreecombined wefoundthatjust
cardattributesandjusttournamentdataalonegaveterribleresultsnearascoreof  thiswas

fi 

somewhatunsurprising sinceourcardattributesfeatureswerentdesignedtobeusedindependently and
justcoververybasicqualities additionally manycards eventhoseaboveadollar simplyseeno
tournamentplay however bothdidprovideanadvantageoveronlyusingpriceswhentrainingatthe
maximumsize 
wethefollowingrelationshipbetweenhowfaraheadwepredictedandourscore 



asexpected accuracyforallmethodsdecreasesthegreaterthepredictiontimespan 
furthermore themethodswhichrelymoreheavilyonpastpricesaremoreaffected however wewere
quitesurprisedbyjusthowhightheaccuracywas uponfurtherinspectionwediscoveredthatthisscore
wasbeingboostedconsiderablybywhatwereessentiallyfreebiescardswhichcostover   butwere
verystableinpricefromdaytodayandmonthtomonth insomecontextsthiswouldsimplyhavebeena
strokeofgoodluck however theultimatemotivationistomakemoneybytakingadvantageofthese
predictions sogettingabunchofcardswhichwerestayingsteadycorrectisnotactuallyhelpful 



conclusion futurework
themostsurprisingresultwasthelackofimpactfromthetournamentdata wesuspectthere
aretwomaineffectscurrentlyatfault first thenumberofcards esp expensivecards thatsee
tournamentplayisverysmall therearemanysmallertournamentsbeyondtheonesweanalyzedthat

fi 

graduallyaffectcardprices dataforthesetournamentscouldhelp butthedataisnotreadilyavailable 
wewouldhavetosearchforeverythingbyhand 
therearestillafewissueswiththedata thehistoricalpricedatasinconsistencieswere
mentionedabovetoremedythoseissues weplantosmooththedatabyreplacingtheintermediate
missingdatawithanaverageofsurroundingdataandbyremovingbogusdatawhenwenoticeit 
additionally wecouldconstructmorefeaturestoimproveperformance forexample daytodayprices
arehighlycorrelatedtooneanother sotakingaveragesovercertaintimeperiodscouldbebeneficial 
thesystemasitcurrentlyexistspredictsaccuratelyinthe  to  dayrange wewilllikely
completethefinaltweaksdescribedinthissectioninthenearfutureandseeifitimprovesaccuracy but
evenasitfunctionsrightnow itshouldbeprofitabletobuymagiccardsthatwerepredictedtoincrease
inprice asforwhetherornotthisismoreprofitablethaninvestinginsomethingelsewillbethesubject
ofaseparatestudy 

references
mller kr  etal  predictingtimeserieswithsupportvectormachines  
artificialneural
networksicann   
 springerberlinheidelberg              


smola alexj  andbernhardschlkopf  atutorialonsupportvectorregression  
statisticsandcomputing
                  

additionallywecitethepythonscikitlearnlibraries 
scikitlearn machinelearninginpython
 

pedregosa
etal 
 jmlr   pp               
  specificallythelibrariessklearn svm sklearn cv 
sklearn preprocessing sklearn decomposition sklearn pipeline andsklearn grid search 









fi