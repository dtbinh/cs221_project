gaussian prm samplers for
dynamic configuration spaces
yu te lin and shih chia cheng
computer science department
stanford university
stanford  ca        usa
 yutelin  sccheng  cs stanford edu
suid                    
ii  related work

abstract   probabilistic roadmap planners  prms  are
widely used in high dimensional motion planning problem  however  they are less effective in solving narrow passages because
feasible configurations in a thin space are rarely sampled by
random  although some approaches have been proposed  they
are either involved in complicated geometrical computations or
requiring much information about the obstacles  moreover  if the
configuration space is dynamic instead of fixed  some solution
may fail in some unexpected situations  in this work  we provide
a novel approach which makes use of preprocessing to construct
a gaussian prm sampler to replace the randomized sampling 
for dynamic configuration spaces  we employ a machine technique to dynamically match samplers to different spaces  which
is computed off line as well 

a  probabilistic roadmap path planner
in robotics  motion planning usually confronts the problem of high dimensionality  which will cause the search space
of configurations to become extremely large  although the
workspace may have only three degrees of freedom  dof  
the c space may be of   or even higher dof  a general approach to solve this high dimensional problem is to use the
sampling based methods  a very well known technique is
called prm method      basically  there are two phrases in
this algorithm  the learning phrase and the query phrase  in the
learning phrase  it randomly samples free space and uses local
planner to construct a roadmap  in the query phrase  it tries to
connect the start and goal configurations to the roadmap respectively  if both of the end configurations are able to be
connected to the roadmap  a planned path could be generated 
actually  there are different algorithms in this family  such as
rapidly exploring random trees  rrts         which builds the
roadmap from known configurations  fuzzy prm      which
builds the roadmap without a strictly feasible configurations
checking local planner and validates the roadmap in the last
stage  and the predictive prm      which uses active sampling
and predictive prm to reduce expansive configuration validations 

index terms   probabilistic roadmap  prm   sampling strategy  narrow passages  path planning and dynamic configuration
spaces 

i 

introduction

prm is a widely used path planning algorithm  which
works efficiently in high dimensional environments  moreover  it could be involved in a variety of robots  however 
there is a critical problem called  narrow passages   since this
problem comes from the randomized sampling in the roadmap
construction  intuitively  if we can just sample in the narrow
passages  this problem could be solved  in this work  we use
some simple data structure  gaussian distributions  to model
the free space by preprocessing  we find the algorithm could
improve the connectivity  roughly     in our experiment  of
roadmap and success in sampling  roughly     in our experiment  in the learning phrase  for dynamic configuration
spaces  c spaces   to enumerate samplers for all c spaces is
computationally intractable  therefore  we just pick some representative samplers and generate training data by target application  by a machine technique  the support vector machine
 svm  in our experiment  we can produce a classifier off line
and uses it in each path planning 
the rest of this paper is organized as five sections  section ii describes the related work in prm  section iii and section iv describes the construction and reuse of gaussian prm
samplers respectively  section v shows the details of implementation and experimental results and section vii discusses
the future work and conclusion  vii and section viii discuss
possible future work and summarize this research  respectively 

b  sampling strategies for prm
this family of research is derived from the general problem narrow passages of prm  in the learning phrase of roadmap building  this algorithm usually samples for free configurations in a randomized manner  however  by randomized
sampling  we can build a roadmap covering the narrow parts
only by probing almost everywhere in the c space  which
extremely reduces the benefit of prm  consequently  there
are several sampling strategies proposed to overcome this
problem  most of these approaches assume that narrow passages appear near the obstacles in a workspace  therefore 
some of them use the heuristic methods based on obstacle
surface properties     or the shrinking and growing obstacles
     there are also some approaches  such as the gaussian
sampling     and the bridge test     which directly replace the
randomized sampler in prm to make samples near the obstacles 

 

fialgorithm gaussian set generator
   random free configuration  
   identiy covarance matrix  
   if gaussian sample error     tolerance all
extend all element   step 
repeat  
   foreach gaussian sample error     tolerance individual
extend one element   step 
repeat  
algorithm    gaussian prm sampler generator 
figure    gaussian prm sampler  this figure is drawn from a set of gaussian
distributions  the circles model the free space of a c space 

algorithm
modified gaussian set generator
   random free configuration  
   identiy covarance matrix  
   extend variance   bound 
   if gaussian sample error     tolerance all
shrink half all element  
repeat  
   foreach gaussian sample error     tolerance individual
extend one element   step 
repeat  

iii  gaussian prm samplers
in this section  a pre computation method for mending
this problem called gaussian prm sampler is introduced  in a
word  this method learns a set of gaussian distributions to
model the free space offline  that is  by exploring the geography of c space in advance to construct a set of gaussian distribution to approximate it  in this way  we can use the gaussian prm sampler  again  a set of gaussians  to generate free
configurations more efficiently in the learning phrase of prm 
in addition  in addressing the narrow passage problem  some
configurations sampled in the narrow passage are kept and
subsequently fed into the bridge algorithm similar to     for
further improvement of sampling efficiency 

algorithm    modified prm gaussian sampler generator 

algorithm bridge test sampling
   random not free configuration c  
   random not free configuration c  
   c    middile configuration c   c  
   if cehck free configuration c  is false
repeat  
   return c

a  free space learning
initially  we have no assumptions about the c space 
there is nothing we can tell about it  therefore  we use a random algorithm  algorithm    as a start point to generate the set
of gaussians  as the algorithm shows  we adopt the method of
expanding the gaussians gradually to explore the c space 
first we randomly sample a free configuration by adopting the
monte carlo method and use it as the mean of a gaussian 
then we simultaneously increase the variances on the diagonal of covariance matrix and test this gaussian s sampling
error rate  if the rate is less than the tolerance  we continue to
increase the variances and test its sampling error rate until the
error rate is higher than the tolerance  we also have another
tolerance for each variance in the matrix  the algorithm will
then extend each variance individually to fit the c space better  other gaussians are obtained with the same approach  we
repeat this process until the number of gaussians reaches the
threshold and thus get a set of gaussians for approximating
the c space  note that we ignore the entries off the diagonal
of the covariance matrix since it will enormously increase the
computational complexity if we take them into consideration

algorithm    bridge test sampling 

when expanding a single gaussian  after all  what we want is
to generate an adequate number of gaussian distributions to
model the free space instead of using a single one  from figure    we thus believe that the c space can be wellapproximated by these gaussians as long as the number of
them is sufficient even though the ignoring of the covariance
between variables  moreover  if the distribution is too specific
to a single c space  the usefulness of it will be seriously limited 
b  modified gaussian generator
in the above algorithm  we increase the variances by a
small amount at a time and  after the expansion  use the new
gaussian to sample a large set of configurations to calculate
the sampling error rate of it  as a result  this naive approach

 

fisingle query prm problem  in this kind of problem  we can
not reuse every roadmap built in every query since this problem is composed of several different c spaces  therefore  for
every query  the planner has to build a new roadmap for planning  if the c space happens to contain narrow passages  the
planner will either spend much time on sampling new configurations to complete the roadmap or simply fail to find out
a path successfully  to solve this problem  the pre built gaussian prm samplers described before can help  however  it is
impractical to build all gaussian prm samplers for all cspaces  therefore  the machine learning approaches and pattern classification techniques can be adopted to match similar
c spaces to a common sampling strategy 

 
 
x  y
figure    an articulated robot which is parameterized with four variables
 x  y       

will take a lot of time to generate even a single appropriate
gaussian  therefore we propose a modified gaussian generator  algorithm    during the expansion phrase  the algorithm
directly jumps to a set of large variances  and the variances
are cut in half iteratively  then  the same approach described
before applies 

b  c space patterns
since it is impossible to enumerate all gaussian prm
samplers  we can first generate several samplers for future 
intuitively  if we can generate the most representative samplers  our multi step planner can have best candidate strategies
to choose from  nevertheless  in most planning problem  we
should notice that it may be hard to find out the most representatives  so our method here is to generate more gaussians
than are actually needed and then trim them to the reasonable
size later  i e   we can use the target application to produce
possible multiple goals for sampler generation 

c  bridge test gaussian generator
to solve the narrow passage problem efficiently  we invite a bridge test method to generator the gaussians  actually 
it has the same extension process as algorithm   or algorithm
   but it has a different mean sampling method  the algorithm
of bridge test sampling is described in algorithm    we first
choose two infeasible configurations and calculate the middle
configuration of them  if the middle configuration of is feasible  then we choose this configuration as the mean of a gaussian  as a consequence  we will have gaussians spread in the
narrow passage 

another significant and difficult problem is the acquisition of training data  as mentioned before  there is no way we
can get training examples in advance  therefore  we also use
the target application to produce the training data  we can try
many multi step planning to test which sampler is the best for
a specific c space and then record it  as for testing a sampler 
we can simply use it to sample several free configurations and
compare the resulting error rate  in addition  we should also
take into consideration area covering and roadmap connectivity of configurations generated by the sampler 

d  composite usage
theoretically  we can use the set of gaussians in the cspace from which the set is generated  however  it is not a
good idea if we want to use this set of gaussians to do sampling in a similar c space  as a matter of fact  we usually use
a combination of gaussian set and bridge test set to sample
configurations  more specifically  we give each sampling
method a weight  the higher the weight of the method  the
more configurations will be generated from it  therefore  we
may have some configurations generated from general gaussians  some from bridge test gaussians and even some from
random sampling 

v  implementation
a  problem definition
we construct a simplified test bed for dynamic c space
problem  in the setting  there is an articulated robot with one
revolute joint as figure    the robot could be parameterized
by four variables  x  y         there will be several holds for
a robot to grasp  and a robot has to grasp at least one hold at a
time  consequently  in a continuous path  a robot can only
transit by changing the   and   to reach another hold 
therefore  for each one step planning  there will be a different
c space  since the c space is not predefined  whenever there
is a path to be planned  the planner has to build a new roadmap  we conduct two different experiments  in the first experiment  we build a gaussian prm sampler for the specific
c space  as for the second  we choose more than     cspaces to generate gaussian prm samplers  in addition  we

iv  reuse of gaussian samplers
a  multi step single query prm
multi step single query prm needs to rebuild the roadmap in each single query  take automatic climbing robot     
as an example  the planner first plans a sequence of goals for
climbing robot to graphs  in successive configurations  a single query prm planner is responsible for generating a continuous path for the robot motion  obviously  it is a multi step

 

fierror rate
graphs number
variance
   
   
    
table    the result of randomized sampling in the first experiment  while the
error rate is the percentage of samples fall in the infeasible area  the graph
number shows how many graphs in a roadmap and the variance shows the
average variance from the nodes in roadmap 

obstacles
goal
robot

weight

sampler

error rate

   

g
g b
g
g b
g
g b
g
g b
g
g b

     
     
     
     
     
     
     
     
     
     

   

figure    the first experiment  there is only one goal  a gaussian prm sample is made for the specific c space 

   
  

   

 

    
 

 

    
    
    
    
    
    
    
    
    
    

error rate
graphs number
variance
   
   
     
table    the result for randomized sampling in the second experiment  which
is composed of ten dynamic c spaces 

 
 

variance

g  general gaussian prm sampler
g b  both general and bridge test gaussian prm samplers
table    the result of gaussian prm sampling in the first experiment  where
the weight is given for gaussian prm sampler s  

 

 

graphs
number
   
   
   
   
   
   
   
   
   
   

 

 
robot

weight

sampler

error rate

   

g
g b
g
g b
g
g b
g
g b
g
g b

     
     
     
     
     
     
     
     
     
     

figure    the second experiment  there are ten goals in this setting  the planner will conduct ten times of single step path planning  in each planning  the
planner uses a classifier to match the best gaussian prm sampler to replace
the randomized sampler in prm 

   

generate more than       training examples from different cspaces by comparing the error rate in each sampler  then  we
use support vector machine  svm  to get a classifier for future prm path planning  figure   and figure   visualize the
first and second experiment respectively 

    

   
   

graphs
number
   
   
   
   
   
   
   
   
  
  

variance
     
     
    
    
    
    
    
    
    
    

table    the result of gaussian prm sampling in the second experiment 

indicative of a better sampler  in table    there are ten more
results in which the  weight  denotes the percentage of sampling points generated by gaussian prm sampler and the
 methods  indicate whether the gaussian prm sampler consists of only a general gaussian prm sampler  denoted by g 
or of both general and bridge test samplers  denoted by b   as
can be seen from table    it is obvious that a prefect sampler
could not be found  i e  lower error rate and less number of
graphs will inevitably lead to lower variances 

b  results
table   shows the one step planning result where the
 error rate  is the percentage of random sampler s erroneous
sampling  not sample on free space  and  number of graphs 
denotes the number of graphs in the roadmap  meanwhile  the
 variance  is the average of variances from all degrees of freedom  from the  error rate   we could estimate the accuracy of
the sampler s ability to sample in free space while we can
judge the connectivity the roadmap from the number of
graphs   variance   on the other hand  represents how the area
covered by a roadmap is  generally speaking  lower  error
rate   less  number of graphs  and bigger  variances  are

table   and table   demonstrate the results from the second experiment  results of table   come from randomized
sampling while those of table   come from gaussian prm
sampling  we set a total of ten goals in this experiment  in
each one step planning  the planner will use the pre computed

 

fiwith the climbing robot       therefore  the very natural extension of it would be a more flexible and high dimensional
version of it 

classifier to select the most appropriate gaussian prm sampler 
c  discussion

acknowledgment
as described above  there exists an inherent tradeoff between achieving lower error rate and higher connectivity and
obtaining wider coverage  however  in a prm planning problem  the connectivity plays a more important role  that the
planner has a better connectivity means the roadmap may connect through narrow passages  in our experiments  the roadmap always contains more than     graphs since our goal is to
reveal the samplers  ability to sample narrow passages  theoretically  the single and multiple steps planning should lead to
nearly identical results  i e  results from table   should be
similar to those of table   while those of table   should be
similar to those of table    nevertheless  the similarity is hard
to achieve practically because we have not come up with an
effective algorithm that could perfectly generate the most representative gaussian prm samplers for a workspace  moreover  generation of training data is another crucial issue that
should not be ignored  in our application  we produce the
training examples by inspecting and comparing the error rate 
if we can take into the consideration both connectivity and
coverage  the criterion for selecting training examples will
certainly be more complete and justified 

parts of the ideas are discussed with jean claude latombe and timothy wolfe bretl  along with this work  we
produce a prm toolkit      which is composed of several
independent components  especially the sampler and feasible
checker  researchers interested in sampling strategies could
extend the sampler and test it  moreover  the toolkit has a
separate feasible checker which can be easily worked with
existing collision detection packages 
references
    l  e  kavraki  p  svestka  j  c  latombe  and m  overmars   probabilistic
roadmaps for path planning in high dimensional configuration spaces  
ieee transactions automatic control  vol      no     pp                
    s  m  lavalle  rapidly exploring random trees  a new tool for path
planning  iowa state university       
    j  j  kuffner and s  m  lavalle  rrt connect  an efficient approach to
single query path planning  in proceedings of the international conference on robotics and automation  vol     pp                 
    c  l  nielsen and l  e  kavraki  a two level fuzzy prm for manipulation planning  in proceeding of the international conference on intelligent robots and systems  pp                  
    b  burns  o  brock  sampling based motion planning using predictive
models  in proceedings of international conference on robotics and
automation  pp                  
    n  amato  b  bayazid  l  dale  c  jones  and d  vallejo  obprm  an
obstacle based prm for  d workspaces  in robotics  the algorithmic
perspective  ak peters       
    m  saha and j  c  latombe  finding narrow passages with probabilistic
roadmaps  the small step retraction method  in proceedings of international conference of robots and systems       
    v  boor  m  overmars and f  van der stappen  gaussian sampling for
probabilistic roadmap planners  in proceedings of the international
conference on robotics and automation       
    d  hsu  t  jiang  j  reif and z  sun  the bridge test for sampling narrow passages with probabilistic roadmap planners  in proceedings of
the international conference on robotics and automation       
    t  bretl  s  lall  j  c  latombe and s  rock  multi step motion planning
for free climbing robots  in workshop on the algorithmic foundations
of robotics       
    prmkit http   www stanford edu  yutelin prmkit zip

vi  conclusion
in summary  gaussian prm sampler is a sampling strategy which makes use of pre computation to reduce the erroneous sampling rate and solve narrow passage problems in
prm  its ability to improve the connectivity and conduct successful sampling has been proved from our experiments 
however  before we integrate it into other applications  a
more robust sampler generator is required  moreover  in order
to make the sampler reusable in dynamic c spaces  a machine
learning technique is employed as well  the question which
we must consider next is the generation of correct and good
training examples as mentioned in the previous section  one
final point should be made about our sampler  we design our
work and experiment in a way suitable for future integration

 

fi