cs     final project
football ranking system
lawrence wisne
i  introduction
in this paper i will describe the techniques that i used to create a simple but efficient
ranking system for college football teams  to begin  i will go over the methods that are
used in ranking systems that divulge their methodology  there are a multitude of
erroneous assumptions made by other ranking programs that my system works to avoid 
i will then go over the methods that i have employed to improve on previous ranking
attempts  the overall goal of this project was to create a ranking system which can be
used by the bowl championship system  bcs   currently  the rankings used by the bcs
to determine the participants in highly lucrative bowl games are determined partly by the
result of six different computer rankings  some of the rankings used make the kind of
arbitrary assumptions that should  in my opinion  be avoided by a computer based
ranking system 

ii  overview of current systems
first and foremost  current systems that are employed use the politically correct
assumption that the final score of a game doesnt matter and just the winner loser of the
game is relevant  in other words  the algorithms dont get to know whether the game is a
  point victory or a    point blowout  i am very sure that this methodology is incorrect 
previous attempts at capturing the value of margin of victory have used a linear curve to
view point differentials  assuming a    point victory is    times better than a   point
victory is just as wrong as not using the score at all  which is why most programs have
not suffered much of a lack of performance by ignoring the margin of victory 
a second flaw of most computer ranking systems is the one that directly
correlates to the content of this course  each ranking system has its own variety of
features that it uses to determine the rank of teams  in most cases  the main
differentiating feature that separates programs rankings is strength of schedule
calculation  however  many systems use other features as well  the common bond
between these features is that they are weighted arbitrarily  the author of the program
has decided ahead of time what is important and what isnt important  and uses these
assumptions to weight the features that determine a ranking  another goal of mine when
implementing my solution is to avoid arbitrary decisions when calculating a set of
predictions and the rankings that go along with those predictions 

iii  inspiration behind this ranking algorithm
the algorithm i decided to use in ranking teams originated from the idea
presented in problem   of ps   in that problem  conference attendees submit paper
proposals and the papers are reviewed by a set of reviewers  each reviewer gives a rating
that estimates the quality of a paper  however  it is natural that each reviewer uses a
different set of criteria when evaluating papers  and additionally the prevalence of a
certain ranking from a certain reviewer changes for each reviewer  some reviewers may

fionly give the highest score to the very best paper read  or may never give it at all  in
contrast  other reviewers may give the highest score to any paper which he or she deems
worthy of presentation at the conference  as such  one can say that the ratings for each
reviewer are systematically biased around some mean value with a certain variance 
upon inspection of the problems presented in the domain of college football
scores and the goal of this project  i realized that this paper review problem is
analogous to the one i was trying to solve  for each game played by a football team  one
could say that the outcome of the game is a review of both the offensive and defensive
prowess of the team  in addition  these reviews are biased in the same way as those in the
paper review problem  as each team has a systematic bias in the results it yields 
a simple example found in real data is that usc tends to score a very high
number of points in each game  if we treat the number of points team i scores against
team j as a review of the defensive ability of team j  then uscs reviews of the
defensive ability of each team on its schedule are very largely biased towards high
numbers  since this is the case  then any team which holds usc to a low number of
points should receive a large amount of credit for this accomplishment  this is directly
analogous to being the only paper rated highly by a reviewer that otherwise gave low tomediocre ratings 
it should be noted that this approach to solving this problem is a fairly large
departure from the methods i had planned on using earlier in the quarter  my original
plan was to use a methodology that is quite common and domain specific  where i set
some number of features for each team and learn on those features  where i had hoped to
create better results by learning features efficiently  i felt that this idea would create
results that are quite different from  and hopefully superior to  other systems i have
researched while coming up with ideas for this project 

iv  the ranking algorithm and its derivation
taking the paper review problem as a guide  i set out to create a system which
utilized the em class of algorithms in order to solve my football ranking problem 
however  there were some tractibility problems encountered along the way which
required a significant simplification of the ideas used to solve the paper review problem 
with this in mind  i will give the original ideas and explain what led to the design
decision to simplify them 
if implemented as an em algorithm  we could describe this problem as having
two hidden random variables for each team  we will call them o and d for offense and
defense respectively  these variables are assumed to be normally distributed with means
o  d and variances o   d  respectively  we then assume our known variable s 
representing the actual score  to be normally distributed  with its distribution given by
  o d        for some fixed    when we look at a training example  which in this
problem is a game result  then we can designate one team tr as the reviewer  and say
that the other team ts is the subject of the review  then  we can calculate the intrinsic
values of o ts  and d ts  by using the game score as a review of these values by tr  while
considering the biases of tr to be its intrinsic values o tr  and d tr   to do so  we require
two parallel sets of e and m steps which update o ts  and d ts   respectively  in interest
of space  we will only look at one of these steps while understanding that a similar
parallel step exists 

fithe steps for the algorithm proceed as follows  note the subscipt numbers indicate
the value of a variable for a particular team    or    in a game  
 e step 
for each i  set qi o  i   d  i      p o  i   d  i    s  i    o   d   o    d   
  p s  i    o  i   d  i         p o  i    o   o      p d  i    d   d      p s  i  
  wi o   d  
 m step 
set     argmax i o i  d i  wi o   d    log  p s  i   o  i   d  i        wi o   d   

  argmax i o i  d i  wi o   d    log  p s  i    o  i   d  i    p o  i        p d  i        wi o   d   
 
 
  where  is our four parameters o   o    d   d 

in the m step lies the tractability issue  if we solve the gradient of the m step equation
for any of the parameters  we will find that we must perform   sums to set the parameter
 one over all i s and one over all values of o i  or d i   in football  it is reasonable for
either o i  or d i  to take any of a range of    or so values  this range of values is too large
to continually calculate a probability distribution over  and will cause a very large
increase in execution time when compared with the paper review problem which served
as the inspiration for this idea  in the paper review system  the domain was completely
arbitrary and could be easily shrunk to allow easier computation 
at this point in the process  i was faced with a design decision  either i could
attempt to compress the domain of possible scores  or i could simplify the algorithm to
allow the full domain of scores  i chose the latter  as one of the original motivations
behind this problem was that i felt that current systems used for the bcs are in error
when their rankings are determined only by the win loss outcome of the game and not by
the actual score 
to simplify the em based algorithm while keeping the motivation for the original
idea  i kept the original ideas of intrinsic offense and defensive ratings for each team 
but changed them such that they are not a probability distribution  however  they still
represent the same ideas  which is that team i reviews team js offense using the actual
points scored by j against i and the bias of i is represented by its intrinsic defensive rating 
of course  the opposite is also true if you replace defense and offense in the previous
sentence  applying these principles led to the following algorithm 

v  the algorithm
for each game between two teams i and j  we would like to set the offensive rating of i
and the defensive rating of j such that   oi   dj     sij      however  this will surely not
be possible across all games  so we will measure our performance by taking the sum of
the squared error for each game 
ij   oi   dj     sij  
this equation can be compared to the m step equation of the em algorithm  with the
intention that we will update the parameters oi and dj for each i  j with the intention of

fimaximizing the term above  we can do this by taking the derivative of the equation
above w r t oi and di to yield the update rule 
oi     j   sij   dj    n
di     j   sij   oj    n  where n in both cases is the number of teams on i s schedule 
these update rules were computed after each game  for each team  until convergence 
an example of generated rankings is included in the appendix  these rankings are
generated by playing a round robin between all teams  and using the overall winning
percentage in this round robin to rank the teams 

vi  conclusions results
as can be seen in the chart included in the appendix  this algorithm produced very
positive results which are competitive with the best prediction algorithms in this domain 
the chart below includes results from the last   years  and shows that all years results
trend upwards with the number of games played  with   of the   years trending towards
    correct by years end  and the  th trending just below     at the end of the season 
this points to the fact that the program could have benefited from more training
examples  and was still learning at the end of the season  while at first glance  the
consistent drop in accuracy for the final    games of each season seems strange  this can
safely be attributed to the fact that the end of the season consists of conference
championships and bowl games which are set up to be competitive  thus  the last    or
so games of each season will always be more difficult to predict than the rest for human
and computer alike  the fact that we still correctly guess these games with       
accuracy points to the fact that this algorithm can work even when faced with difficult
decisions 
the main disadvantage to the simplification from the em algorithm is the
inability to create something equivalent to the e step  which places a weight on training
examples  the update equation i used could be modified to use a multiplicative weight in
front of the error term  but this weight could not be learned  as it would always be zero  
in attempts to set arbitrary weights which i thought should work based on my knowledge
of football  the unweighted algorithm always produced more accurate results  i believe
this may come from the fact that the training set used in calculating each parameter is
very small  and weighting examples further decreases the diversity of examples which
lead to the ratings 
also rejected quite conclusively by this algorithm were attempts to filter the
score going into the algorithm  for example  i had assumed before beginning that using a
logarithmic curve to modify actual scores would create a more accurate representation of
teams abilities  since it would reduce the effects of victory by a very large margin  i
tried applying a logarithmic filter and this produced undesirable results  this actually
makes sense  as the algorithm accounts for a teams propensity to give up large amounts
of points and thus does not overly reward large margins of victory 
my further work in the college football ranking domain will consist of taking the
opposite path in the design process  and using a more complex algorithm with simplified
data  this will provide an interesting case study once the other method is implemented
and the quality of the results are compared 

fivii  appendix
current rankings  december           for result analysis  see attached file 
upf unbiased points for  called o in this paper   upf unbiased points against  d 
the number before a teams name is its round robin winning percentage 
       texas upf       upa      
         southern california upf       upa      
         ohio state upf       upa       
         penn state upf       upa      
         virginia tech upf       upa      
         notre dame upf       upa     
         michigan upf       upa      
         auburn upf       upa     
         louisville upf       upa      
          oregon upf       upa     
          miami  florida  upf       upa      
          iowa upf       upa      
          texas tech upf       upa     
         minnesota upf      upa      
          west virginia upf       upa     
          georgia upf       upa      
          louisiana state upf      upa     
          wisconsin upf       upa      
          arizona state upf       upa      
          california upf       upa     
          michigan state upf      upa      
          boston college upf       upa      
          florida upf       upa     
          alabama upf       upa      
          purdue upf       upa      
          iowa state upf       upa     
         oklahoma upf       upa     
          texas christian upf       upa     
          ucla upf       upa      
          northwestern upf       upa      
          south florida upf       upa     
          clemson upf       upa     
          fresno state upf      upa      
         florida state upf       upa      
          georgia tech upf       upa     
          colorado upf       upa     
          texas a m upf       upa      
          nebraska upf       upa     
          stanford upf       upa      
          arizona upf       upa     
          washington state upf       upa      
          tennessee upf       upa    
          boise state upf       upa      
          south carolina upf       upa      
          arkansas upf       upa      
          virginia upf       upa      
         maryland upf       upa      
          tulsa upf      upa      
          north carolina state upf       upa     
          pittsburgh upf       upa      
          brigham young upf       upa      
          northern illinois upf       upa      
          missouri upf       upa      
          southern mississippi upf       upa      
          connecticut upf       upa      
          oregon state upf       upa      
          kansas upf      upa      
          washington upf       upa      
          north carolina upf       upa      
        rutgers upf       upa      

          miami  ohio  upf       upa      
          utah upf       upa      
          wake forest upf      upa      
          indiana upf       upa      
          san diego state upf       upa      
          navy upf       upa      
          baylor upf       upa      
          vanderbilt upf      upa      
          kansas state upf       upa      
          houston upf       upa      
          toledo upf       upa      
          colorado state upf       upa      
         memphis upf       upa      
          texas el paso upf       upa      
          air force upf      upa      
          central michigan upf       upa      
          alabama birmingham upf       upa      
          new mexico upf       upa      
          bowling green state upf      upa     
          central florida upf       upa      
          wyoming upf      upa      
          louisiana tech upf       upa      
          hawaii upf       upa     
          nevada upf       upa      
          syracuse upf      upa      
         oklahoma state upf      upa      
          kentucky upf       upa      
          mississippi upf      upa      
          army upf       upa      
          southern methodist upf       upa      
          mississippi state upf      upa      
          akron upf       upa      
         east carolina upf       upa      
          cincinnati upf      upa      
          illinois upf       upa      
          western michigan upf       upa      
          marshall upf      upa      
          eastern michigan upf       upa     
          middle tennessee state upf      upa      
           ball state upf       upa      
           tulane upf       upa      
           ohio upf      upa      
           rice upf      upa      
           duke upf       upa      
           louisiana lafayette upf      upa     
          nevada las vegas upf      upa      
           san jose state upf      upa      
           utah state upf      upa      
           arkansas state upf      upa      
           kent upf       upa      
           idaho upf       upa      
           louisiana monroe upf      upa      
           troy state upf       upa      
           florida international upf      upa      
           new mexico state upf      upa      
           buffalo upf        upa      
           florida atlantic upf       upa     
            temple upf       upa      
         north texas upf       upa      

fi