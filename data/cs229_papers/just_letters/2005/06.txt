cs    autumn     
final project report

music tempo  speed  classification
yu yao chang  and yao chung lin
 yychang  yclin    stanford edu
abstract
music tempo  speed  is one of the most important
features of a song  with successful classification of
the tempo of song  content based music browsing
may utilize this feature and search recommend
songs in the same category of tempo  with some
paper survey we noticed that prior works were
focused on the numerical tempo value instead of the
human perceptual speed of song  we proposed
inter onset interval  ioi  reliability feature to
present a soft tempo information for svm  the
onset detection algorithm in     was implemented
to extract the beat onset timing  and the detection
result is applied to svm     as training features 
the model trained via svm can classify slow and
medium songs with high accuracy  however  the fast
songs are not highly correctly classified  we
consider improving the feature for fast songs as
future work 

introduction
this project presents a music tempo  speed 
classification
with
machine
learning
for
content based retrieval and recommendation  in the
following of this paper we use the term tempo to
represent the number of beats per minute described
on the music score and speed as the human
perceptual speed of the song  the tempo can be
utilized as a feature for searching browsing the
song database  however  recent works on tempo
detection consider all multiples of the target tempo
value a successful estimate  which is an
intolerable error in the sense of speed 
moreover  the tempo on the score may not
correctly reflect the speed of the song  it is possible
that a song of     time signature sounds  faster 
than that of     time signature while they have
identical tempo  although there are the same tempo
quantities from these two time signatures  human
usually catches the strongest beats which appear
more frequently in songs of     time signature 
each user may catch different tempo feature 
for example  one may catch the bass drum beats 
while the other may catch the vocal  in addition 
there is no exact boundary for perceptual speed
categories  a slow song for one listener may be
considered of medium speed for the other 

therefore  personalized classification policies will
be applied for different end users 
from the problems above mentioned  we plan
to train a machine that can correctly predict and
learn the speed classes of songs for different
end users which have different speed sensitiveness 

related works
many recent works are related to this project 
according to our paper survey  musical genre
classification  beat tracking  and musical expression
will be discussed in this section 
a musical genre classification is presented in
     they extract the timbral texture features and
rhythmic content features to classify an audio signal
belonging to its genre  such as pop  rock  jazz 
classic  etc  the timbral texture feature can be used
for separate music and speed signal  rhythmic
content features  including temporal envelope and
beat histogram  are used for classify musical genre 
this work classifies the music into different genre
according to its ground truth  in contrast  our work
classifies the music into different perceived tempo
speed according to the end user feed back  however 
these features are good hints for our tempo
classification 
               and     provide several beat
detection and tracking methods  in      they adopt
filter bank and comb filter to analysis the signal 
and detect the beat with their resonator and tempo
analysis  on the other hand            and     use
onset detection methods  in      several measures
for spectral differencing  including euclidean
distance  kullback liebler distance  and foote
distance  are discussed  they detect the change
point by picking the highest peak in the
unsmoothed measurement functions  the method in
    finds the onset times in spectrogram  and detects
the bass drum and the snare drum by examining the
extracted onset components  further  they
generalized their beat tracking system to detect
hierarchical beat structure with model based beat
tracking method 
the prior works provide several guidelines
for the features related the tempo speed  we are
going to adopt them  develop a classification
method and analysis the useful features 

page  

fics    autumn     
final project report

feature extraction

wave data
 

we extract   sec waveform signals from mp  files
with     khz sampling rate  it is difficult for svm
to learn a model from raw waveform since the raw
waveform has highly correlation in time domain 
therefore  some reasonable features should be
extracted for machine learning 
the rhythmic content  such as beat
information  is considered as the most important
feature which is related to the human perceived
tempo and speed  several tempo detection
algorithms utilize the onset time detection and do
further process  we also extract the feature from
onset information  regarding the onset detection
algorithm  we consider a fast onset detection
algorithm proposed in     
based on the onset information  we develop a
feature  named inter onset interval  ioi  reliability
for svm input  the ioi reliability represents how
probable the tempo of a given song is  the svm
utilize this soft tempo information to build the
model for classification 

   
 
    
  

 

 

 

 

 

 

 

 

 

spectrogram

   
    
    
    
   

   

   

   

   

   

figure    the raw data is the wave form  and its
spectrogram 
d f  t 

   
    
    
    
   

   

   

 

 

   

   

   

d t 

x   

 

i  onset detection
the onset time is defined as the beginning time of a
beat or note played  to track a beat  we apply
spectrogram analysis to raw signals with     
window size  and     overlap  figure   shows a raw
wave signal and its spectrogram  the spectrogram
represents the power of different frequencies at
different time indices  let p t f  being the
spectrogram of given signal  the degree of onset
d t f  is given by
d  t   f     p t   f    pp   max    p t      f    p t   f   

where pp   max  p t     f    p t     f      p t     f     
finally  the degree of onset is a function of time and
given by
   
d t      d  t   f  
f

top plot in figure   shows the degree of onset with
respect to frequency and time  and the bottom plot
shows the degree of onset  d t  on which we are
going to do further process  from the plots  we
assume d t  catches most onsets from the raw
signal 

 

 

 

   

   

   

   

   

   

   

figure    the output of our implemented onset degree

ii  inter onset interval  ioi  reliability
the degree of onset d t  is phase dependent and is
not a good feature sequence for svm learning  we
proposed a soft tempo information  which is called
inter onset interval  ioi  reliability  derived from
the degree of onset  d t  
recalling that we mentioned in introduction 
different beat patterns will yield the different
perceptual speed  for example  pattern    strong
weak weak  strong weak weak will be slower than
pattern     strong strong strong  strong strong
strong  therefore  we proposed a method to
evaluate total onset strength as well as the average
interval between two adjacent onsets 
for each ioi candidates  say ioi k  we begin
at d    and move forward k frames and align to the
local maximum of the degree of onset  we repeat
this step until we reach the end of d t   and we
average those visited local maximum as our
reliability score  we also examine all possible
phases and report the one of highest reliability score
for ioi k 
the pseudo code of the algorithm is in the
following

page  

fics    autumn     
final project report
 
 
 
 
 
 
 
 
 
  
  
  
  
  

libsvm library in     for multi class classifier  we
take leave one out cross validation  loocv  error
as well as training error for measurement  based on
our limited size of data set  the closer between
training error and loocv error the more
reasonable result is 
in our experiment  we got        of training
accuracy  and       loocv accuracy  we also
analysis the classification results and make a
confusion
matrix
to
understanding
the
misclassification situation 
table   shows the confusion matrix of our
experiment  as table   shows  the fast songs are
easy to be classified to other two classes and yields
lower accuracy  less than      the slow songs are
much easy to classified and yield a high accuracy 
     the random guess yields           and    
accuracy for fast  medium  and slow classes
respectively 

input  d t   the onset degree
output  r t   the ioi reliability score
for all ioi  t    tmax
for all possible phase  p   t
s p    sum d t nt   p  over n 
end
s    max s p  over p 
n   argmax    n   t   domain d  
s  t  s  n 
end
s     s    min s   
r   s    sum s   

figure    pseudo code for evaluating ioi reliability

table    confusion matrix
label
fast
medium
clsfd
fast
     
     
medium
     
     
slow
     
    
figure    d t   top  and corresponding ioi reliability
 bottom 

in this algorithm  we loop over possible
inter onset interval from   to     in unit of the
parameter of d t   figure    line      assign the
score of iois to the average peak score  finally 
figure   line       normalize the score and obtain
the ioi reliability score  an example of ioi
reliability score is shown in figure   
amount several features we have tried  the
ioi reliability gives the best accuracy 

experimental results
several experiments are conducted using the
features in sections described above  first  the data
set used for training and testing is described  then 
the experimental setup and results are presented 
we selected    popular songs  in which   
are labeled as fast     are labeled as medium  and
   are labeled as slow  we excerpt   second
                  waveforms from the selected
songs  the waveforms are sampled at sampling rate
     khz  stereo two channels  we take mean of
two channel signals to be our input of feature
extractor 
regarding the learning model  we use the

slow
     
     
     

conclusion
this report has described the human perceived
tempo speed problem and its application  the
machine learning technique is used for music tempo
classification with our proposed feature extraction 
we consider three tempo classes for songs  i e  fast 
medium  and slow  one of beat detection methods
is used for our feature extraction  which is onset
detection proposed in      base on the onset degree 
we have proposed a feature extraction  ioi
reliability score  for classifying the human
perceived musical tempo speed  the ioi reliability
score vector can be considered as soft tempo
information over all possible tempo speed  which
gives high score if the song has high probability to
be in that tempo speed  the svm learns a model
from this feature and yields     for slow songs 
but for fast songs  it only gets     accuracy 

discussion and future work
a bunch of feature candidates were also evaluated 
the partial spectrogram of the waveform  degree of
onsets d t   the sequence of ioi  the indices that
onsets occurs  and so on  it turns out that the model
trained by ioi reliability provides highest
classification accuracy 

page  

fics    autumn     
final project report
in general  our accuracies of medium and
slow songs are fair  however  we are suffering a
high error on classifying fast songs  a possible
reason is that we perceive the speed of a song
basically according to the vocal  if exists   but in
some cases the background beats are intense and
dominate the ioi reliability score  making the svm
confused with the authentic fast song ioi pattern 
figure   demonstrates a slow song rain by
madonna  with intense beats detected 
another issue is that the song labeling done
by human subject is not robust  a lot of ambiguous
labeling decisions were encountered when we
labeled the training data  we noticed that one may
have different labeling result to the same song in
different time  since svm relies on the training
examples close to the boundaries  it turns out that
the ambiguities in our training examples could
deteriorate the classification accuracy  in our
labeling processing  we tend to believe that there
are factors other than the onset strength and pattern
that affects humans perception on music speed 
the knowledge to a certain genre  for example 
could bias the perceptual speed due to past
experience 
to extend our work  we plan to separate the
vocal and instrumental music and work out the ioi
only on the vocal part  we also consider splitting
the spectrogram into several frequency bands and
extracting significant frequency indices 

madonna 

reference
   

   

   

   

   

   

   

figure    the onset detection of the song rain by

page  

george tzanetakis  and perry cook  musical
genre classification of audio signals  ieee
transcation on speech and audio processing 
vol      no     july     
eric d  scheirer  tempo and beat analysis
of acoustic musical signals  journal of
acoustical society of america      
stephen hainsworth  and malcolm macleod 
onset detection in musical audio signals 
in proceeding of the international computer
musical conference      
masataka goto  yoichi muraoka  a beat
tracking system for acoustic signals of
music  acm multimedia     
masataka goto  an audio based real time
beat tracking system for music with or
without drum sounds  journal of new
music research        vol      no   
pp        
chih chung chang  and chih jen lin 
libsvm    a library for support vector
machines 
available
on
http   www csie ntu edu tw  cjlin libsvm 
gerhard widmer  the musical expression
project  a challenge for machine learning
and knowledge discovery  in proceeding of
the   th european conference on machine
learning  ecml      

fi