improving estimation of the nearest neighbor
in mobile wireless sensor networks
hyungjune lee  hyukjoon kwon
stanford university  stanford  ca      
email   abbado  hjkwon  stanford edu
i  i ntroduction
in wireless networks  every node needs to keep its neighbors link connectivity originated from periodic beacon messages in order to maintain the best route and forward packets
along the path  especially  wireless sensor networks should be
working under low power constraint  so retransmission should
be restricted in wsn as far as it can      moreover  low power
wireless link makes the connectivity too volatile since low
power wireless radio is vulnerable due to temporal interference
from higher power radio  e g           bluetooth  and etc      
     additionally  mobility makes the link connectivity more
unstable      these intrinsic wireless link behaviors make the
link estimation for best routes far more difficult  thus  it
would be of great significance to estimate the best neighbor by
efficiently exploiting the previous link status  i e   history of
beacon time and power so as to forward packets successfully 
in our project  we exploit the locally weighted linear regression method to estimate signal power when a node assumes to
receive a packet from neighbors at an arbitrary time and rank
the proximity of neighbors according to the estimated power 
more specifically  the node which has the highest power would
be the closest neighbor 
we use ns   network simulator to model the mobility of
nodes and obtain training data from their own learning tables 
we compare the estimation method with naive deterministic
schemes such that a node  which has the largest received power
in the last beacon time  is selected as the  st rank  we expect
our learning algorithm will reduce the error rate to estimate the
best candidate for forwarding compared to the naive methods 
ii  s ystem m odel
the network model we consider consists of n nodes
randomly distributed over two dimensional region  each node
is assumed to move with its own will under the random
waypoint  rwp  model  the actual location of each node  x i 
where i              n  depends on the speed which is randomly
distributed over     max speed  and a certain pause time in the
rwp model  in order to design the system on this assumption 
we consider two typical models used well in a wireless sensor
network  two ray ground propagation model and shadowing
propagation model 
a  two ray ground propagation model
the transmitted signal from a sender is delivered to a
receiver through multi ray paths  depending on how many it is

reflected  diffracted or scattered on the designated ray paths 
it is assumed that the single ground reflection is dominated
among other multi path components in the two ray model 
which is illustrated in figure   

fig    

two ray ground ropagation model

then  the received power  pr   is calculated via the geometric
view as follows 

pr   pt


 

 

   
 gl
r gr ej  

 
 l

x   x 

   

pt is a transmitted power  gl   ga gb is the product of the
transmit and receive antenna gains in the los direction  gr  
gc gd is the product of the transmit and receive antenna gains
corresponding to the reflective direction  and r is the ground
reflection coefficient        x   x   l   is the phase
difference between a los path and the reflected path 
from the geometry  the distance difference and the phase
difference is given by
p
p
x   x   l  
 ht   hr      d    ht  hr      d    
 ht hr
  x   x   l 

   
   

d
where it is assumed that d is asymptotically large enough
compared to ht   hr   if this assumption makes sense in the
network model  then the parameters can be supposed like
x   x   l  d       gl  gr   and r     therefore  the
eq      is approximated into
 
    
 ht hr
 gl
   
pr  pt
 d
d


 
gl ht hr
  pt
   
d 

fib  shadowing propagation model
the two ray model is assumed that there is no blockage on
the ray paths and only the ray distance difference is thought
of as an important factor for a received power  however  a
signal transmitted from a sender can pass through blockage 
which gives rise to random variations of the receiver power
at a receiver  the shadowing model is considered under the
statistical random fluctuation  typically  the log normal distribution is used in a shadowing model which is superimposed
with the path loss in a wireless sensor network  the receiver
power is attenuated according to a distance between two nodes
and randomly fluctuated for shadowing  therefore  the receiver
power is given by
pr
d
db      log   k     log  
 db
pt
d 

   

where db is a gauss distributed random variable with mean
 
zero and variance db
  k is the path loss coefficient and  is
the path loss exponent 
the routing table on each node is built up based on
the learning table of the received power  which is used for
delivering the messages at any time  however  the information
used to establish a learning table is obtained only at the regular
beacon time  therefore  in order to decide the nearest neighbor
at any time  i e  even at irregular beacon time  we need a new
algorithm to decide who the nearest neighbor is 
iii  a lgorithms
a  naive methods
each mobile node receives beacon packets from its neighbor
mobile nodes  which include the beacon time  node id  and
the received power  naive methods we use deterministically
choose the nearest one at a given time based on the previous
link status for neighbor nodes  these methods do not execute
any further statistical processing 
the first naive method is to use the last received beacon time
only as a main criterion to determine the proximity between a
node and neighbors  for example  in this method  the neighbor
from which a node received a beacon packet the most recently 
would be the closest neighbor to the node 
however  this method do not provide a correct answer
when a node received beacon packets from multiple neighbors 
simultaneously  in this case  the received power of each beacon
can be a useful indicator to determine the proximity between a
node and neighbor nodes  the second naive method considers
the last received power as well as the last received beacon
time as criteria to determine the locality 
both naive methods  however  have some weak points  as
time goes by  the network also changes due to mobility of
nodes  the previous information might be outdated to be used 
for instance  even if a node received a beacon packet from a
neighbor the most recently with the highest received power 
another neighbor node could approach to the node rapidly
in the mean time and be the closest node at the current
time  therefore  it would be required to estimate the received

power at a given time by exploiting some statistical prediction
methods so that each node can estimate the nearest neighbor
with higher accuracy 
b  locally weighted linear regression
the learning algorithm we exploit is a locally weighted
linear regression  in the first step  we try to approximate y 
the received power  as a linear function of x  the beacon time
with a regression variable    then  we define h x  is the
approximated value of y given x 

h x          x

   

the criteria how the approximation is close to y is determined by the cost function  j    where the errors are squared
and summed 
m

j    

 x
 h  x i     y  i    
  i  

   

however  the normal linear regression gives equal weight
for all the training data for approximation  however  depending on the distance from each training data  varying the
weighting factor gives the better performance for estimation 
in a weighted linear regression  the cost function is changed
into
m

j    

  x  i 
w  h  x i     y  i    
  i  

   

where the weighting factor w i  is given by

w i    exp



 x i   x  
   


    

the weighting effect depends on the bandwidth    which
will be given a proper value in our project  when the cost
function approaches to the minimal point  the regression
variable    is optimized for estimating non training data  in
order to obtain the minimum of the cost function  we take a
derivation of j    or the gradient for the case of vector  and
obtain a  which leads to j        as a result  we find that
regression variable  is
    x t w x   x t w y

    

where w is a matrix whose diagonal terms are w i   
with the locally weighted linear regression algorithm  each
node can estimate the received power from neighbor nodes
at a current time  therefore  each node can be aware of who
is the nearest node at a given time based on this regression
method 

fiiv  e valuation

 

probability to find the best neighbor

   
   
   
   
best one
best two
best three

   
   
   
   
   
 
   

   

probability to find the best neighbor

   

   

   
   
   
   
   
   
   
   

 

   



 

locally weighted linear regression
last beacon time power
last beacon time

   
 

   

fig     probability to find the best neighbor for locally weighted linear
regression according to varying  in two ray ground propagation model

probability to find the best neighbor

to evaluate the performance of estimator  we generated test
data from ns    which is one of the most widely used network
simulators in wireless networks  the topology we used is
   m x    m grid and    mobile nodes are moving around
the grid according to random waypoint mobility model  the
maximum speed and pause time we set is  m s and   seconds 
respectively  each node communicates with each other via
         wireless phy mac layer and communication range
is set to   m  we evaluated estimators under two different
propagation models  i e   two ray ground model and shadowing
model 
each node transmits a beacon message with every   seconds  the total simulation time is      seconds  for the
first     seconds  each node updates its learning table which
cumulates neighbor id  received beacon time  and received
beacon power over time  during the remaining     seconds 
each node estimates the best neighbor once per every   
seconds  the specific time is randomly chosen from uniform
random variable over         seconds  this test procedure
provides    different data sets per node  thereby leading to
    data sets from total    nodes  using ns   simulator 
we obtain the real nearest neighbor for each data set at the
every execution time to estimate  estimator tries to predict
the nearest neighborhood list which is sorted by proximity 
we calculated the probability that the real nearest node at
each evaluation time successfully matches to one of the best
k neighbors of each estimation where k         and    we
compared our proposed estimation method with the naive
methods specified in section iii a 

best one

best two

best three

fig     probability to find the best neighbor for locally weighted linear
regression and naive methods in shadowing propagation model

   
   
   
   
   
   
   
locally weighted linear regression
last beacon time power
last beacon time

   
 

best one

best two

best three

fig     probability to find the best neighbor for locally weighted linear
regression and naive methods in two ray ground propagation model

figure   shows that both our proposed scheme and the
estimation scheme based on last received beacon time and
power work pretty durably in two ray ground model  both
two methods outperform the estimation scheme based only on
beacon time  the proposed scheme successfully predicts the
exact best neighbor with     and one of our best   neighbors
from estimation successfully matches to the real best neighbor

with      this means that if a mobile node sends a packet
to the best three next hop nodes by multicast  the packet will
be successfully delivered to the best neighbor with very high
probability 
figure   shows that when  is     or      the maximum
prediction is achieved to find the best neighbor with locally
weighted linear regression method  beyond the value  the
performance is all about the same or rather slightly decreased 
figure   shows that the proposed scheme outperforms two
naive methods with a factor of     in maximum in shadowing
model  the proposed scheme successfully predicts the exact
best neighbor with     and one of our best   neighbors from
estimation successfully matches to the real best neighbor with
     the fidelity in shadowing model is less than in tworay ground model since random behavior in shadowing model
makes the prediction reliability a bit lower 
figure   shows that        or     achieves the maximum
prediction level to find the best neighbor in locally weighted
linear regression  the point we need to address is that the

fi 

probability to find the best neighbor

   
   

best one
best two
best three

   
   
   
   
   
   
   
 
   

   

   

   



   

   

   

fig     probability to find the best neighbor for locally weighted linear
regression according to varying  in shadowing propagation model

larger  leads to the maximum estimation results in shadowing model compared to two ray ground model because less
penalization for the added random error is desirable 
v  c onclusion
our proposed locally weighted linear regression method
works durably for estimation of the best neighbor in mobile
sensor networks even though random nature in shadowing
model makes prediction fidelity lower than the deterministic
two ray ground model  the preliminary findings have strong
implications to the design of ad hoc routing protocols in
mobile wsn  routing protocols can choose the best three
next hop nodes and forward packets to them so as to improve
reliable packet delivery in mobile networks  we leave the
following questions as future works 





how does the proposed estimator based on locally
weighted linear regression work in ns   simulator  execution time  especially for pseudo inverse operation  
memory overhead  etc  
how can normal adaptive kalman filter be applied to the
estimation of the nearest neighbor 
whether can other kinds of supervised machine learning
algorithms be applied 
r eferences

    dongjin son  bhaskar krishnamachari  and john heidemann  experimental analysis of concurrent packet transmissions in low power
wireless networks  acm sensys  november      
    marco zuniga and bhaskar krishnamachari  an analysis of unreliability
and asymmetry in low power wireless links  acm transactions on
sensor networks       
    kannan srinivasan  prabal dutta  arsalan tavakoli  and philip levis 
understanding the causes of packet delivery success and failure
in dense wireless sensor networks  technical report sing       
stanford       
    hyungjune lee  alberto cerpa  and philip levis  improving wireless
simulation through noise modeling  in proceedings of the sixth
international conference on information processing in sensor networks
 ipsn        

    ranveer chanadra  christ fetzer  and h  karin  adaptive topology
discovery in hybrid wireless networks  in proceedings of informatics 
 st international conference on ad hoc networks and wireless  toronto 
vol      september              pp       
    massimo franceschetti  lorna booth  matthew cook  ronald meester 
and jehoshua bruck  continuum percolation with unreliable and spread
out connections  journal of statistical physics  v       n       february
      pp          
    alec woo  terence tong  and david e  culler  taming the underlying
challenges of reliable multihop routing in sensor networks  acm
sensys        pp       
    d  kotz  c  newport  and c  elliott  the mistaken axioms of wirelessnetwork research  dartmouth college computer science technical
report  tr              
    thomas moscibroda  the worst case capacity of wireless sensor
networks  acm ipsn        pp      
     paolo santi  topology control in wireless ad hoc and sensor
networks  acm comput  surv         jun         pp          

fi