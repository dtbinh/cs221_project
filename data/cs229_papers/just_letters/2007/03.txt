robot motion for obstacle negotiation
anish adukuzhiyil  harshit singh  pavani vantimitta
stanford university
 ajohna  harshs  pavani  stanford edu

   present approaches
in related work  one popular approach has been to
apply reinforcement learning      some other
approaches have focused on adapting to terrains
using mechanically higher designs such as clever
mechanical design of legs that automatically adapt
to terrains        another different approach has
been to use gait  using a rule based algorithm   a
method of free gait generation for quadrupeds is
presented in      there are many more approaches
that have been used to tackle this problem 

   problem description

the vicon motion
capture  mocap  system can capture and model
the terrain and its environment in a  d setting 
this information is then processed into parameters
such as joint angles  body posture and terrain
location and made available to the user through the
robot api 
we developed a set of motions keeping in mind the
robot s center of gravity and the range of
parameter values of each of its leg  hip and knee
joints such that no motion execution causes the
robot stance to become unstable  all eight motions 
along with their defining features  are listed in
table   
note that left and right shuffle are not symmetric

distance
moved

angular shift

distance
moved

angular shift

    

    

    

    

    

    

    

    

      

maximum
barrier
width
maximum
height

angular shift

jump motion jump motion
 barrier 
 gap 

distance
moved

right shuffle left rotation right
rotation

angular shift

distance
moved

              

left shuffle

figure    stanforddog on
the gap terrain

distance
moved

backward
motion

the stanforddog  figure    is a four legged
programmable
robot  littledog 
made available by
boston dynamics 
used for motion
planning research
at the stair lab 
the robot comes
with a control and
planning
library
with a matlab
interface 

angular shift

forward
motion
distance
moved
angular shift

given the task of obstacle negotiation  the challenge
is to first identify the obstacles which the robot has
to necessarily cross in order to reach its goals  and
also develop the set of motions that it will need to
execute to successfully overcome those obstacles 
in view of this objective  this project involves
implementation and evaluation of techniques using

   environment description

  

maximum
height

we seek to test for the capability of a quadruped
programmable robot to overcome barriers
 generally referred to as the obstacle negotiation
problem   given appropriate machine learning
algorithm s 
for
motion
planning
and
execution  we programmed a robot to run in an
environment with different terrains and present
results from our trial runs using a combination of
principal component analysis  pca  and
supervised learning  error estimates under varying
conditions of the learning algorithms have also
been highlighted 

which the robot can learn to successfully traverse
various kinds of terrains through an iterative
process of sensing  planning and execution 

maximum
gap width

   introduction

  

 

table    all distance and height measurements are in centimeters  theta measurements are in degrees 

fieven though the parameter values for the atomic
maneuvers are chosen to be symmetric  we believe
this is to be attributed to differential motor power
in the joints  for all our trial runs  we used a fixed
step size of   for the shuffles  and   for all other
motions 
an optimal motion  given a current position of the
robot  is defined as the motion that the robot
should execute in order to bring it closer towards
the goal and consequently  closer to any obstacle
lying between itself and the goal  when the robot is
at the obstacle  the optimal step is then the special
maneuver that will let the robot overcome it 

    heightmaps
the system returns an image representation  which
we call heightmap  of the   d space of the robots
environment  centered on itself  one way of looking
at the heightmap is as a   dimensional image of
size n by n pixels  where each pixels index into
the matrix is given by the x and y coordinates of the
pixel in   d space  and the intensity value of each
pixel stores the z coordinate of the same spatial
representation 

 direction of the final goal 
the test data should be compared on the basis of
the optimized feature space to the learned training
data 

    experimental setup
for the purpose of our experiment  we used two
flat terrain boards  positioned at the origin of
mocap s global coordinates  between the two
boards  we either kept a raised barrier across the
breadth of the boards  or maintained a gap between
the boards  we use the term barrier to denote a
raised bar in the terrain  and the term gap to
denote a depressed region within the terrain 
we then collected a set of     heightmaps
corresponding to different positions of the robot on
the gap terrain  we labeled each of these heightmaps with the maneuver determined to be the
optimal next motion  these were manually
determined  first by looking at the heightmaps only 
and then verified by getting the robot to execute
the maneuvers in the given context 

   feature space reduction

   methodology

    initial pre processing

identifying terrain features in the locality of the
robot is definitely important  but there is an
important caveat to be considered  since the robot
is only concerned with getting to the final goal  it
should not concern itself with barriers that do not
lie in the direct path to this goal  the maximum
displacement that a robot can achieve in any
motion also limits the neighborhood of interest 
recognition of the obstacle is not necessary for the
purpose at hand  we only need the shape of the
obstacle  i e   its contour in   dimensions  
for the purpose of motion  it should not matter if
the robot executes a non optimal motion as long as
it does not fall off the terrain board or hits the
obstacle  at the edges of the board and near the
obstacle  however  it is imperative that the motion
executed by the robot is only the one that is
deemed to be optimal by the training set 

we processed the heightmaps in order to reduce
the number of irrelevant features being considered 
for a heightmap  only the z values around an edge
were taken as features  while the rest of the pixels
were set to    we implemented a gaussian
weighting filter to accentuate image features closer
to the robot  the processing was carried out in the
sequence as shown in figure   

    feature extraction
the

state of the art

in

 

object

recognition

 

 

 

    essential features
keeping these above in mind  it appears that the set
of sufficient features that enable selection of the
optimal motion in any position would have to
include 


representation of objects  possible barriers  in
the robots immediate neighborhood in terms
of their position and orientation as concern the
robot 

 

 

figure    preprocessing cycle for the heightmaps 
   slicing    edge detection  canny     dilation
   element wise multiplication    final feature
representation for a heightmap

fialgorithms have used decision trees based on
feature space transformations such as haar
wavelets        and svms      however  plain
image based comparisons such as these would not
work well in our case 
one reason is that these approaches allow for
rotational and translational invariance of object
shapes  which assumption would lead to wrong
results in our case  also  as argued above  we
believe the choice for next optimal motion depends
not just on the robots local environment  but also
the direction of the goal and the next barrier  some
things that image based features do not
incorporate 
therefore  we decided to modify a simple imagecharacteristic based feature representation in
order to incorporate the more relevant features 
we settled on principal component analysis  pca 
as a good starting point  as it has been used
extensively in applications like face recognition
and fingerprint identification 

    principal component analysis
in the base form of this algorithm  we consider each
training heightmap as a feature matrix  with each
pixel position as a unique feature  across all
training examples  the mean and variance of each
feature is first calculated and then used to
normalize the feature matrix  now  the eigenvalues
and eigenvectors of this matrix are calculated  we
then reduce the feature space based on these
eigenvalues by thresholding them at some
constant 
after thresholding  those eigenvectors whose
eigenvalues were not thresholded form the eigenspace of our problem  now  we take the test
heightmap and find its projection on the eigenspace  the euclidean distance between this and the
each feature vector in the training matrix is
calculated  the least of these calculated distances
gives the best matching heightmap from the
labeled training set  which we hope would also
provide the best maneuver in the current scenario 
essentially  we are faced with a multi classification
problem  identifying the most appropriate
maneuver to be executed on the basis of featurebased similarity of current context to previously
seen situations 

      errors in general pca
as explained  pca was used to extract only the
pertinent features  say k  on a training set by using
a threshold on the variance of the features from the

mean  these k features then were used as a basis
for comparison of a new heightmap  test data 
with the set of training heightmap data  thus we
find the closest match in the labeled data  and
therefore the best optimal maneuver as well 
as shown later  the pca approach does provide
quite accurate results based solely on height map
image characteristics  however  when we used
each pixel as a feature  in addition to matching the
closest images  it also matched to laterally shifted
versions of the input image  this was because the
eigenvectors corresponding to an orientation of the
robot will be in the same direction  essentially 
different positions of the robot on the terrain can
have the same orientation in global coordinates 

    other features
we experimented with a direction feature
extracted from mocaps global coordinate system 
given a fixed goal  on the other side of the obstacle  
we added another
feature

the
distance
between
the barrier and the
robot  the first
obstacle that comes
in the path of the
robot should be the
most
important
feature that the
robot
should
figure     distance offset
consider 
from barrier   x

    pruning

orientation to goal   theta

given a heightmap in the current context of the
robot  we used the value of the current orientation
   as labeled in figure    in order to find a subset
of the training heightmaps that also have robot
orientation within a certain range of  
we later also used the distance between the robot
and the first edge of the obstacle between it and the
goal  x as labeled in figure    to carry out similar
pruning of the training set 
these pruned sets were then passed onto the pca
module in order to obtain the best match to the
current heightmap 
figure   shows the distribution of theta and x in
our training data set 

   optimization
    initial selection of constants

fifigure    histograms showing the spread of a 
barrier distance and b  orientation angle in the
training set

the issue of heightmap size involves a tradeoff
between generality and more features  for the
images of size    by    cm that we are using  a
threshold value of   was needed as the returned
heightmap was most often only a block image
composed of very few variation elements  the
threshold value can be chosen to best suit different
terrains under consideration 
we decided to keep the size offsets of the image
from the robots centroid to reflect the robots view
of its surroundings  while this is not being done in
absolute terms  we tried to incorporate the possible
shifts of view given the robots set of movements so
that it could see atleast as far ahead as the next
position it could get to  since backward forward
motions shift the robot by twice as much as
left right shuffle  we kept the heightmap aspect
ratio at     

    sensitivity analysis
the most important parameters for our algorithm
are the heightmap size on which the pca is to be
performed  the ranges of values around the current
value of the robots orientation     and the range
of values around the current value of the robots
distance from the nearest barrier 
from the different test runs  the optimal values of
image offset size were found to be    and    cm 
the optimal range of theta was found to be  
degrees and the optimal range of distance from the
barrier was found to be   cm  the precision recall
curve for these values is plotted in figure   

figure    precision and recall curve for image
offset of     range of theta as    and range of
barrier distance as   

successfully crosses the obstacle when starting at a
random position on the terrain 
we conducted leave one out validation and
obtained precision recall values to check for
accuracy in the predicted optimal motions  we
only tested on the gap terrain 

    intrinsic evaluation
using just the precision recall  we get high values
of fmean for the special jump gap motion    in fig 
    this result is good because  as clarified earlier  it
is costly for the robot to be wrong as concerns the
jump motion 
the precision and recall values for jump barrier
motion    in fig     were   as this motion was
never labeled as an optimal motion in our training
set of gap terrain heightmaps 
the precision values for left    in fig     and right
rotation   in fig     are high  consistent with the
desired levels   since they have significant rotation
angles which could mean toppling over for
positions near the edge 
since forward    in fig      backward    in fig     
left shuffle    in fig     and right shuffle    in fig    
motions do not require high precision and recall
values because they have been labeled as the
optimal next steps for positions of the robot
following which it has little danger of toppling off
the edges 

  evaluation

    extrinsic evaluation

there are two types of error measurement
techniques that we employed  one is intrinsic
evaluation  which we quantified by using precision
and recall  the other  and the more pertinent one to
the objective of the robot in question  is extrinsic
evaluation  this is the fraction of times the robot

we defined the success rate as the number of times
the robot actually overcomes the obstacle  starting
from random initial positions on the terrain  we
found the success rate to be     

  error analysis

fifeatures used

heightmap slice  
gradient   gaussian
filtering    x   

heightmap slice  
gradient   gaussian
filtering     x   
orientation range

     all 

     

heightmap slice  
gradient   gaussian
filtering     x   
orientation range  
barrier distance
    

      

      

      

      

      

      

pruning basis used
no of training examples
chosen for pca
average fscores for
motion classes      
fscore for motion class  
 jumping the gap 

table    comparison of results obtained using different pruning method for pca selection

we noticed that  often  the robot tended to fall over
the edge when its initial position was near the edge 
or when a motion brought it near the edge  this
means that the sequence of operations to obtain
the gradient of the heightmap were not always
useful in this case  another feature that we need
may need is the offset of the robot from the edges
of the terrain 

and ceilings  in international conference on
advanced robotics  pisa  italy      

   directions for further work

    s  bai  k  h  low  g  seet  and t  zielinska  a
new free gait generation for quadrupeds based on
primary secondary
gait 
in
international
conference on robotics and automation      

in essence  supervised learning and pca will work
well for familiar terrains  for terrains that have not
previously been seen  reinforcement learning
would be a good framework to integrate our
approach with 
other work also involves improving upon the
maneuver set currently developed  in terms of
efficiency and parameters 
another possible direction is to base the robots
assessment of its surrounding on data images
captured from a sensor camera placed on the
robot itself  this will enable motion planning from
the perspective of the robot  and a global motion
capture system would not be necessary  we tried
to best assess the implications of a robot centric
view by taking as small a heightmap as possible 
but much will depend upon what information the
sensor provides 

references
    honglak lee  yirong shen  chih han yu  gurjeet
singh and andrew y  ng  quadruped robot
obstacle negotiation via reinforcement learning 
in international conference on robotics and
automation  orlando  florida  usa      
    s  hirose  a  nagabuko  and r  toyama 
machine that can walk and climb on floors  walls 

    s  hirose  k  yoneda  and h  tsukagoshi  titan
vii  quadruped walking and manipulating robot on
a steep slope  in international conference on
robotics and automation  albuquerque  new
mexico  usa      

    paul viola  michael jones   rapid object
detectionusing a boosted cascade of simple
features        
    viola  p  and jones  m        rapid object
detection using a boosted cascade of simple
features  in computer vision and pattern
recognition  vol     pp         
    c  bahlmann  b  haasdonk  and h  burkhardt 
online handwriting recognition with support
vector machinesa kernel approach  in proc  of the
 th iwfhr  pages            

fi