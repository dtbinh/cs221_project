nitin kapania

cs     final project

predicting fantasy football performance with machine learning techniques
introduction and background
once a paper and pencil game played only by a few sports aficionados  the internet has helped transform
fantasy sports into a    billion dollar industry  accounting for nearly     of this industry is football  with
millions of casual fans playing in fantasy football leagues every year 
the basic premise of fantasy football is as follows  a fantasy football league  typically consisting of     
competitors  holds a draft before every nfl season where each fantasy competitor has a limited
number of virtual resources  usually a salary cap or a fixed number of draft picks  available to spend 
using these resources  each competitor selects a virtual team comprised of real nfl athletes  fantasy
competitors then face one another in heads up games every week of the nfl season  with scoring in the
fantasy games dictated by the statistical in game performance  i e  yards gained  touchdowns scored  etc  
of the nfl athletes in their actual games 
the major challenge of fantasy football is therefore to select players who provide good statistical
performance relative to their price in the draft  as an avid fantasy football player  i decided to focus my
final project on building statistical models to predict the nfl athletes who will score the most fantasy
points in a given season 
project scope
in general  fantasy teams consist of at least one quarterback  two wide receivers  two running backs  a
field goal kicker  and a tight end  to limit the scope of the project  this project will generate pre season
predictions for running backs  rbs  only  however  results from this project can be generalized to
develop models for all other nfl positions as well 
fantasy point rules for running backs
fantasy point scoring for a running back in a given week is given by the following two simple rules 

first crack at the problem  using linear regression
my first project goal was to get a very simple learning model up and running  given that the number of
fantasy points scored by a running back can be viewed as a continuous output  i decided to start with a
simple linear regression model with only two features  

 

i chose to normalize my feature vectors by the number of games a running back played in a given season  to avoid penalizing
running backs who missed games due to injury suspension contract disputes  etc 

finitin kapania

cs     final project

the model therefore predicts fantasy point scoring for a running back solely on how many yards and
touchdowns they had in the previous year  this is admittedly a simple choice of a feature vector  but since
fantasy point scoring is exclusively dependent on scoring touchdowns and gaining yards  it makes sense
to start with this choice of feature vector as a baseline 
data collection 
a training set was collected from the statistics of m     running backs finishing with at least    fantasy
points in both the      and      nfl seasons  the yardage and touchdown statistics to form the feature
data x were collected from       and the fantasy point totals for the target variable y were collected from
      
results of linear regression 
to test the regression model  i made predictions of how    running backs would perform in the     
nfl season  based on their performance in the      nfl season  figure   shows a learning curve for the
regression algorithm  the error metric on the y axis is the average estimation error between predicted and
actual running back performance  given in fantasy points year  the figure shows that the estimation error
stays roughly constant after m       and that our average estimation error is slightly higher  but on par
with the predictions of mike krueger  a human expert who makes fantasy predictions for fftoday com 

figure    learning curve for linear regression algorithm  note that training and test error are similar as
number of training samples increases 

 

the    point cutoff for the training set was chosen to exclude running backs whose first season in the nfl was in
      as well as running backs that missed significant time due to injury in either season  data was collected from
fftoday com

finitin kapania

cs     final project

while a reasonable metric to evaluate a learning curve  average prediction error as defined above is not
the best metric for comparing two prediction methods  since winning in fantasy football is about relative
performance between running backs  a better way is to evaluate the algorithm is to use the numerical
predictions to create a ranked list of running backs for the upcoming season  and then see how these picks
actually end up performing in       this is shown in table   

linear
regression
chris johnson
adrian peterson
maurice jones
drew
frank gore
ray rice
thomas jones
steven jackson
cedric benson
michael turner
ricky williams

predicting the top    running backs of     
predicted
human expert
predicted
actual     
points
 mike krueger 
points
rankings
   
adrian peterson
   
arian foster
   
chris johnson
   
peyton hillis
   
maurice jones
   
adrian peterson
drew
   
ray rice
   
jamaal charles
   
frank gore
   
chris johnson
   
ryan mathews
   
darren mcfadden
   
rashard
   
rashard
mendenhall
mendenhall
   
steven jackson
   
lesean mccoy
   
michael turner
   
michael turner
   
deangelo
   
matt forte
williams

actual points
   
   
   
   
   
   
   
   
   
   

table    running back predictions compared to actual results  first column is from my linear regression
algorithm  second column is from a human expert  third column is actual results  values in parenthesis
represent predicted actual points scored  rankings accurate to within five positions are shown in green 
questionable picks are shown in red 

the difficulty of predicting fantasy performance is immediately apparent  very few people predicted the
explosive emergence of jamaal charles  lesean mccoy  andadrian foster  who were two young
newcomers to the nfl in       similarly  the injury of maurice jones drew  one of the nfls most
consistent running backs  shook up the final season rankings further  a second observation is the relative
similarity between mike kruegers predictions and the predictions from linear regression  the two sets of
predictions share seven common players  each ranked within     spots of one another 
another interesting observation is the regression algorithms high ranking of thomas jones and ricky
williams  while both athletes had solid      seasons  both players were moved to backup roles before
the      season as they competed for playing time with younger running backs on their teams  most
fantasy football experts  mike krueger included  therefore had these two ranked well outside the top    
as it was unlikely they would repeat their      performance  without a way to capture this preseason
information  the algorithm as presented is unable to recognize the risk associated with these two players 
a second attempt at the problem  using a clustering algorithm
an alternate approach to predicting good fantasy football players is to group nfl running backs into
several clusters  based on a variety of features such as number of games played  number of rushing
attempts  rushing yards  touchdowns  and total fantasy points scored  player predictions are then made by
first classifying running backs into their corresponding group  and then applying a regression model
unique to that group 

finitin kapania

cs     final project

figure    combination of clustering and linear regression algorithm used to make predictions

the idea behind this method is that there may be several fundamental types of running backs in the nfl 
in this case  its possible to get more accurate predictions by having a different set of linear regression
coefficients for each type of player  for example  players who were injured in one season will have an
artificially low number of fantasy points scored that year  and will often see a dramatic increase in fantasy
points the next year simply by being healthy  this cluster might therefore have relatively larger regression
coefficients compared to a cluster of players who stayed healthy 
to perform the k means clustering  i gathered a larger dataset of training data  encompassing the
statistical performance of m       running backs from      to       after experimenting with a number
of feature combinations  i found it best to cluster the running backs using only three features  number of
games played  total yards per game  and total touchdowns per game 
  

average prediction error
 fantasy points season 

  
  
  
  
  
  
  
  
  

 

 

 

 

 

 

 

 

 

  

number of clusters  k 
figure    player prediction error as a function of clusters used

to determine the number of clusters to use  i calculated the average prediction error  the same metric
used for linear regression  for a variety of k  see figure    
i found that in terms of this metric  the number of clusters to use wasnt immediately obvious  as the
prediction error hovered around        points per year for k     to    however  i found that as the
number of clusters increased beyond six  the clustering algorithm tended to get stuck in local minima and
came up with increasingly erroneous predictions  in terms of qualitative performance  i found that the
machine learning algorithm came up with the most reasonable picks at k     or   

finitin kapania

games

yards
 game

    

    

    

    

td
 
 game training
data
    
    
    

    

    

    

    

    

   

    

    

    

clustering learning curve  k    
   

average prediction error
 fantasy points season 

cluster
 
cluster
 
cluster
 
cluster
 

cs     final project

   

test error

   

train error
   
   
  

table    cluster centroids found for k    

 

 

  
   
   
   
number of training samples m

   

table   shows the cluster centroids for k      the algorithm splits about one third of the data into cluster
   who appear to be players dealing with injury in       another half of the players are split into clusters
  and    low performing clusters typical of average nfl running backs  on the other hand  cluster  
represents the small but very important number of elite running backs in the nfl  a learning curve is
also plotted for k     as well  showing convergence after about m       

clustering
chris johnson
adrian peterson
mj  drew
frank gore
michael turner
thomas jones
joseph addai
ricky williams
l  tomlinson
d williams

predicting the top    running backs of     
pred  pts 
pred  pts 
actual     
human expert
   
adrian peterson
   
arian foster
   
chris johnson
   
peyton hillis
   
m j  drew
   
adrian peterson
   
ray rice
   
jamaal charles
   
frank gore
   
chris johnson
   
ryan mathews
   
darren mcfadden
   
r mendenhall
   
r mendenhall
   
steven jackson
   
lesean mccoy
   
michael turner
   
michael turner
   
d  williams
   
matt forte

actual pts 
   
   
   
   
   
   
   
   
   
   

table    predictions for      

table   shows the top ten projected picks for      using the clustering algorithm  the clustering
algorithm makes predictions similar to the original linear regression algorithm  although we have now
another questionable top ten pick in a rather old ladainian tomlinson 
conclusion
given the large number of unpredictable factors  it is very difficult for both humans and computers to
pick who the best nfl running backs in a given season will be  the first linear regression algorithm
presented is very easy to implement and gives results on par with human experts  but needs additional
features accounting for offseason injuries  increasing age  and loss of playing time due to new players
entering the league  clustering offers an interesting way to group players with similar historical
performance  but still needs these difficult to collect features  if i were to expand upon this project 
adding playing time and age information would be a top priority  additionally  i might also make each
training sample contain feature data from the past several seasons  instead of just the prior season 

fi