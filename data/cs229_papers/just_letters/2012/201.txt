thats hot  predicting daily temperature for different
locations
alborz bejnood  max chang  edward zhu
stanford university
computer science      machine learning
december         

 

abstract

 

introduction

weather simulations have predominantly
studied weather changes on a relatively microscopic level  with less consideration of
longer time scale data trends and regularities  this small change assumptionthat
the weather tomorrow can best be determined
by the weather from the preceding week
usually provides reasonably accurate shortterm measurements  which is why it is often
used for daily forecasts   yet performs poorly
on predictions more than a week into the future due to the chaotic nature of atmospheric
perturbations  our approach targets a particular aspect of the weather temperaturemeasured at noon daily at particular locations  and looks to generate a predictive temperature model using solely prior temperature information  to improve both the immediate and extended temperature predictions 
we used weather data collected over a    year
period as a training data set 

 
the problem of effectively modeling weather
has been a focus of numeric simulations since
the early     s  we address the specific task
of modeling daily temperature using only
temperature data from preceding days and
equivalent days in previous years  weather
data compiled by the national oceanic and
atmospheric administration  noaa  for five
chosen cities over a period of    years was
used as training data  an autoregressive
analysis generated a temperature hypothesis function with mean absolute error of
     f against the true temperature values  for validation of the applicability of
a temperature based data assumption  we
used the k nearest neighbors algorithm  with
previous days temperatures used as coordinates   obtaining a mean absolute error of
     f   the similar predictions of the two
models suggests stronger confidence in the ef   
data acquisition
fectiveness of temperature modeling through
a singular dependence on preceding temper  the data used was obtained from publicly
ature data 
available weather information from the na 

fitional oceanic and atmospheric administration  temperature data for various cities and
ft         ft      ft      ft 
   
locations  with information from over a hun    my      my 
   
dred years ago to the current day  was obtained from airports  as weather related inwhere
formation from airports are likely to be more
t   time  in days
reliable due to their relevance in flying  from
ff   temperature as a function of t
the years      to       we decided  based on
y   time  in years
the data quality and availability  to analyze
the temperature data in the following five locations 
   london  united kingdom
  k nearest neighbors
   new york city  united states
   paris  france
the k nearest neighbors  knn  algorithm is
   san francisco  united states
a method for supervised classification of an
   tokyo  japan
unknown object based on the closest examples of that object in the previously classified
training data  the knn process is as follows 

 

temperature models

   determine the distance between the unknown object  xin and all examples  ytr
in the training data  where the distance
function d  xin    ytr   between the objects
is given by
v
u n
ux
d  xin    ytr     t  xi  yi   

we implemented two models  an autoregressive model to forecast the temperature one
day ahead based on seven day trailing temperatures  and a k nearest neighbors model
which looked at a weighted average of the    
closest three day trailing temperatures 

   

i  

autoregressive model

   choose test examples corresponding
with the k    k  n  smallest distances
d  xin    ytr  

an autoregressive model is a linear regression
of the current value in a series against one or
more prior values  more formally 
xt       

p
x

   use a weighted average of the values in
the training set to make a prediction for
the unknown value

i xti   at

i  

in the context of creating a temperature
model  we let the temperatures of the days
preceding the test day being predicted represent the coordinates of  ytr  such that  ytr  
 tt    tt       ttm    where t is the day  tt is
the temperature in fahrenheit  and m is the
number of trailing days used in predicting tt   

where at is white noise  i are the parameters  and xt represents the value being predicted  in our case  the autoregressive model
considered temperature values on a rolling  day basis  using those values to predict the
temperature of the following day  the hypothesis function is given by
 

fiand found the k closest neighbors to  xin   for
example  if we look at the measured temperature in london over a   day span in august
      we might find that the temperatures are
given by  ytr       f     f     f     f     f   
to predict the temperature on the following day  we look at all temperature vectors
over   consecutive days  and calculate the distance  as defined above  between that vector and  ytr   we then choose the     vectors
corresponding with the minimum distances 
check the following temperature value of each
of the vectors in the training data set  and
use a weighted mean of those known results
to estimate  xin   an empirical analysis suggested an optimal result of using the preceding three days  for which we let k       
given the likelihood of periodic weather behavior on short term scales  and correspondingly more arbitrary results when extrapolating farther backwards   we included an exponential decay weighting function to prioritize minimum distance vectors occurring at a
more recent time to the predicted day 

 

figure    autoregressive model for london in
year       the black os represent the true
data points  and the green xs represent the
models predicted values

planation for this discrepancy would be due
to the empirical determination of several of
the parameters used  for instance  the size
of the vector used in the knn implementation  for which we chose to check the three
prior days at each data point   as well as
the number of closest such vectors considered  again chosen empirically with k       
are likely to have been suboptimal  despite
relatively accurate results  further testing
would likely reveal stronger parameter values 
alternatively  the knn algorithm might be
improved in a multidimensional context  for
which other factors besides only the temperature  such as wind speed  humidity  or periodic weather phenomenon such as el nino 
would also be included in an analysis  similar arguments would apply to the autoregressive model  however  the coefficient values for
more than three days before the actual day
were found to be small  figure     indicating
that temperatures from more than three days
prior to the current day have little predictive value  this point was confirmed using an
auto correlation function  acf   one par 

results

figure   and   show the temperature function as predicted by the autoregressive and
the weighted     nearest neighbors models
for london  with the corresponding graphs
for san francisco shown in figure   and   
the mean absolute errors for the cities examined ranged from      f from the autoregressive model for san francisco to      f
from the knn model in new york city  see
figure   for complete table of error values
at all evaluated locations   in all cases  we
note that the autoregressive model predictions slightly outperform those of the knn
model  though the difference in the errors remains relatively consistent  a possible ex 

fi


 
 
t     cos
t
   
  t      sin
   
   




 
 
   sin
t     cos
t
   
 
 
   t    
   


figure    knn model for london in year
      the black os represent the true
data points  and the green xs represent the
models predicted values

figure    autoregressive model for san francisco in year       the black os represent the
true data points  and the green xs represent
ticular observation with regards to the error
the models predicted values
shows a link between a regions climate and
the predictive value of the models used  intuitively  one expects that a geography with
less temperature variance would correspond
with more accurate predictions  as increased
temperature ranges introduce greater fluctuations that are difficult to accurately anticipate  the results in figure   are consistent
with that logic  given that san francisco relatively consistent temperature patterns has
a mean absolute error of more than   f less
than that of new york city  which undergoes
a much larger range of temperatures over the
course of a year  several efforts to generate
more realistic models produced less accurate figure    knn model for san francisco in
results  one such model hypothesized that year       the black os represent the true
the temperature function could be assumed data points  and the green xs represent the
to be periodic over the course of a year  with models predicted values
a hypothesis function defined by
 

fi such as el nino effect  hurricanes  etc 
to provide a more comprehensive  multidimensional analysis
 extend this method to other locations
with poorer data quality to check for
consistency

 

figure    table of cities analyzed  with corresponding algorithms used and error values

references

   iurl  ftp   ftp ncdc noaa gov pub data gsod 

   importing weather data from wunderground  california soil research lab 
http   casoilresource lawr ucdavis edu drupal node   
   november      
   hayati  m et all  temperature forecasting based on neural network approach  world applied sciences journal       

figure    coefficients associated with   day
autoregressive analysis

 

   baboo  s et all  an efficient weather
forecasting system using artificial neural network  international journal of
environmental science and development  vol    october      

conclusions

the results support the idea that a sophisticated model to predict temperature can provide accurate results through use of only a
temperature data set  the autoregressive
model and the knn model both produced
predictions to within a mean absolute error
of   f of the true temperatures  future analysis would be liable to include the following 

   lai  l et all  intelligent weather forecast  international conference on machine learning and cybernetics  shanghai  august      

 use the above method on all locations
 instead of a select few cases  to increase
potential to notice trends  in turn improving parameter estimations to reduce
overall error
 use other  more sophisticated techniques
to verify refine algorithmic results
 include knowledge about other factors
 

fi