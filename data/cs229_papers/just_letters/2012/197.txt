predictingflightdelays
dieterichlawsonjdlawson stanford edu
williamcastillowill castillo stanford edu

introduction
everyyearapproximately   ofairlineflightsaredelayedorcancelled costingtravellersover
  billiondollarsinlosttimeandmoney manyfactorsaffectflightdelaysincludingairtraffic
controlbackups equipmentdelays andweather ourgoalwastoleveragethemassiveamount
ofdataavailableonflightpunctualityandweathertoforecastwhetherornotaflightwillbe
delayed 
data
weusedtwomainsourcesofdataforthethisproject thebureauoftransportationstatistics
 bts airlineontimeperformancedataset andnationaloceanicandatmospheric
administrations noaa isdlitedataset  thebtsdatasetcontainsanexhaustivelistingof
flightstoandfromintheussince    andincludesfeaturessuchasdeparturedate airline
carrier originairport numberofminutesdelayed andmore thenoaaisdlitedatasetis
madeupofweatherobservationscollectedvianoaasnetworkofweatherstationsgoingback
to     theisdlitecontainsfeaturessuchasmillimetersofprecipitationinthelasthour wind
speed skycoverage andmore 
tocombinethesetwodatasetsweperformedmultipletransformationsonthedata thebts
datasetusesonlylocaltimestampswhilethenoaadatasetusesutctimestamps additionally 
thenoaadatasetusesanidentifiercalledawbantoidentifywheretheweatherobservation
wasrecorded butthebtsdatausesitsownairportidentifiercalledairportsequenceid 
theseinconsistencieshadtoberesolvedbeforethedatasetscouldbejoined 
thefinaldatasetwas    gbandcontained   millionflights itincludedweatherdataatboth
theoriginanddestinationairportaswellastheflightinformation   featuresinall wesetupa
  machineclusteronamazonsec toperformthesetransformationsandrunourmachine
learningalgorithms 
methods
givenasingleflight weattemptedtopredictwhetherornotitwouldbedelayed i e we
performedbinaryclassificationontheflight weusedseveraldifferentclassifiersincluding
svms naivebayes andrandomforests ingeneral wetriedtochoosealgorithmsthat
 

http   www transtats bts gov tableinfo asp table id     db short name ontime info only  
http   www  ncdc noaa gov pub data noaa isdlite isdlitetechnicaldocument pdf

 

fiparallelizewell sothatwecouldrunthemontopofapachehadoopandtakefulladvantageof
thelargesizeofourdataset 
supportvectormachines
westartedbytryingdifferentapproachesonasmallerdatasettofindthebestperforming
classifier someofourinitialattemptsincludedsvms whentestingwithsvms weselectedone
airport sanfranciscointernational andlimitedthescopetooneyearofflightdatasothatwe
couldexperimentlocallywithareasonablysizeddatasetinsteadofonthecluster weusedthe
svmlibraryinmatlabtoseehowsvmsperformedonthedataandtodetermineifweshould
scalethisapproachtothecluster whenexploringsvms wetriedvariouskernelsincluding
gaussian linear andquadratic butultimatelydidnotseeareasontocontinuetrainingsvms
andinsteadfocusedonothermethods 
naivebayes
toclassifyflightsusingnaivebayes weimplementedourowndistributedversionofnaive
bayesontopofapachehadoop beforetrainingonthedata werandiscretizationscriptsthat
wecreatedtoturnrealvaluedfeatureslikeestimatedflighttimeintocategoricalvariables we
thensplitourdatasetinto  piecesandperformed  foldcrossvalidation wealsotried
trainingononlytheflightsfromspecificairports andperformed  foldcrossvalidationonthat
aswell becausenaivebayesclassifierstrainrelativelyquickly thiswastheonlyclassifierthat
wewereabletotrainontheentire   millionrowdataset 
randomforests
giventhesizeofourdataset wewantedtouseclassifiersthatcouldbeimplementedandrun
onourcluster oneeasilyparallelizedclassifieristherandomforest whichismadeupofan
ensembleofdecisiontrees weusedmatlabsrandomforestlibrarywhentestinglocally and
apachemahoutsrandomforestimplementationwhentrainingonthecluster 
eachdecisiontreewastrainedonofthedata calledthebag andtestedonthetheother 
calledtheoutofbagdata thenumberoftestingerrorsfromeachtreeisthensummedupand
dividedbythenumberoftreeswespecified givingametricknownastheoutofbagerror
 oob  weused   treesforthemajorityofouranalysis butwealsoexploredtheeffectof
increasingthesizeoftheforests specificallywetested            and    treesinan
attempttomaximizeprecisionandrecall 
asisstandardforrandomforests weusedarandomsubsetoffeaturestotraineachdecision
tree andvariedthesubsetwitheachtree afterinitiallocaltestingtoensuretherandomforest
approachwasworking weinvestigatedthefeatureswehadchoseninanattempttosimplifythe
treesandimproveprecisionandrecall usingtheooberror wemeasuredtheeffectivenessof
ourclassifieranddeterminedthemostinfluentialfeaturesforsuccessfulprediction 

fisvmresults
theresultsweachievedwithsvmswerenotpromising oursvmachieved     errorrate 
butitsprecisionandrecallwereextremelylow     and    percent respectively becauseit
predictedthatalmostallflightswereontime becauseonly   ifflightsaredelayed this
appearstobeaworkingclassifierifyouonlyconsidertheerrorrate onsomesmallerdatasets
wesawcloseto   accuracybutthiswasnotconsistent becauseofthis weendedup
abandoningsvmsformorepromisingmethods 
naivebayesresults
ournaivebayesclassifierperformedsurprisinglywellachievingerrorratesbetween  and
  percent however closerinvestigationoftheclassifiersshowedthattheywerealsomostly
predictingthatflightswouldnotbedelayed theprecisionwasalsofairlyhigharound   but
therecallvariedwidely from      onnewarkinternationalflightsto    ontheentire
dataset 
dataset

errorrate   

precision   

recall   

newarkliberty
international

     

    

     

o hareinternational

     

     

     

allflights

     

     

   

figure naivebayesresults

randomforestsresults
randomforestswerethebestperformingclassifiersthatwetried theirerrorrateshovered
around    buttheirprecisionwasashighas   andtheirrecallwasashighas    

dataset

errorrate   

precision   

recall   

newarkliberty
international

     

     

     

o hareinternational

     

     

     

fimiamiinternational

     

     

    

randomsubset

     

     

     

figure randomforestresults

weexperimentedwithdifferentnumbersoftreesondatafromnewarkinternationalairportinan
attempttooptimizeprecisionandrecall asshownintheprecisionrecallcurveplottedinfigure  

figure precisionvsrecallfornumberoftrees

thegraphshowsaseeminglysteeptradeoffbetweenprecisionandrecall butgainsofafew
percentinrecallcanbehadforfractionsofapercentlossinprecision italsoshowsthatmore
treesisntalwaysbetter   treesperformedthebestofalltheforeststhatwetrained 
featureselection
usingourrandomforestsresultsfromthedatawewereabletogaininsightintowhichofour
featureswasmostusefulforpredictingtheoutput themainmethodweusedtodetermine
featureimportanceismostcommonlyknownaspermutationimportance    inthismethodwe
considertheexamplesthatwerenotusedtocreateaparticulardecisiontreeintheforestand
permuteonefeatureatatime wethenclassifyallthepermutedexamples yieldinganerrorrate 

fiandsubtracttheoriginalerrorofthedatabeforethepermutation combiningtheresultsofthisfor
everytreeintheforestanddividingbythenumberoftreeyieldsametricforfeatureimportance 

figure randomforestvariableimportance

theresultsofthisprocessshowedusthatthemostimportantvariableswerethepreviousflight
arrivaldelay whichisrepresentedbythehugespiketotherightofthegraph followedbyorigin
airportprecipitation smallspiketotheright anddeparturehour smallspiketotheleft  
conclusions precisionvs recall
atfacevalue a     errorrateonthetestsetisgood butispotentiallydeceiving as
relativelyfewflightsaredelayed aclassifierthatsimplypredictsthatnoflightswillbedelayed
couldachievesimilarerrorrates thus ourmainchallengewastoinsteadimproverecall the
percentageofdelayedflightsthatwecorrectlyclassifiedasdelayed companiesinindustrythat
workinflightdelaypredictionreportsimilarnumbersfortestingaccuracyandprecision buttheir
recallishigherroughlyaround       thesecompaniesalsociteimprovingrecallastheir
biggestconcern 
becausemostofourapproachesyieldedsimilarprecisionsandrecalls webelievethat
improvementsintheseareaswouldonlycomewithdifferentdata i e morefeatures furtherdata
processing orbetterdomainknowledge insteadofbettermachinelearningalgorithms 
references
   breiman l        randomforests machinelearning           
   breiman l        outofbagestimation pp      technicalreport statisticsdepartment university
ofcaliforniaberkeley berkeleyca          b       
   genuer r  poggi j m   tuleaumalot c        variableselectionusingrandomforests pattern
recognitionletters                 

fi   http   www datawrangling com howflightcastersqueezespredictionsfromflightdata

fi