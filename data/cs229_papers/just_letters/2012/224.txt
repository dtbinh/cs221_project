restaurant recommendation for facebook users
qiaosha han
computer science
stanford university

qiaoshah stanford edu

vivian lin
computer science
stanford university

wenqing dai
computer science
stanford university

vlin   stanford edu

wenqingd stanford edu

abstract
in the past decades  people have gained a wide range of options as the
availability of information expands  to help them make decisions 
recommendation systems play an important role in all kinds of aspects 
e g  news  books  movies and so on  in this project  we built a restaurant
recommendation system by incorporating the power of social networks
and local business review sites  to make accurate predictions and
provide efficient recommendations  we combined the data from
facebook and yelp  tested various machine learning algorithms 
evaluated the results on real world dataset and made detailed analysis on
the experiment results 

 

introduction

when searching for restaurants information and making decisions on where to eat  people
rely on the review sites  but it is possible that the highly rated ones do not align with
individuals tastes  how to provide targeted and good recommendation  this problem
directly inspires the recommendation system  which is one of the typical challenges in the
field of machine learning 
recommendation system became a hot topic around mid     s      during early years 
people used context based approaches where an item similar to the items highly rated by a
user is provided as a recommendation for this user  one limitation of this approach is that
the result would most likely be over specialized  also  users with less previous rating data
could not be provided with a well tailored recommendation  therefore  diversity of the
recommendation system is desirable  another widely used method  the collaborative
filtering  has its own limitations too  for example  if the restaurant is reviewed by only a
small number of users  it will rarely show up in the recommendation result even if it
receives very high ratings from the reviewers  moreover  efficient prediction from small
amount data is very difficult in collaborative approach due to the sparsity of the data  in
our work  we treat each user place pair as a data point and classify it to   classes 
indicating whether this user will be interested in the place and concluding whether the
place is a good recommendation candidate for this user 

 

dataset

   

data collection

the data included in this work comes from two sources  facebook and yelp  we
collected user profiles  place information  and user place relation from facebook website 

fiin order to get as much data as we could  we recruited people by sending out a written
instruction to acknowledge people about our work and a step by step guidance on how to
provide us the facebook access tokens so that we had the permission to collect user
information  then  we gathered additional information about places from yelp 
the place profiles were extracted after combining the data from the two sites  we have
two challenges here  first  how to identify that two places from different sites are the
same one  secondly  how to combine the data of different types  with conflicting or and
duplicate information  in our work  if the same telephone number were in the extracted
place information both from facebook and from yelp  we believed that these two places
referred to the same restaurant  when combining the two pieces of information from
different sites  we parsed the xml file from facebook and json file from yelp  used a
great number of heuristic rules to deal with the conflicting and duplicate information  and
generated the final place profiles 
in total  the dataset in this work contains      users       places  figure   shows the
checkin   like frequencies distributions for places  from the figure  we can see that the
user place relation information is very sparse  and very few restaurants are checkin ed 
liked by a large number of users 

number of places

   
   
   
   
   
  
 
  

                                       
place frequency range

figure    checkin like frequencies distributions

   

features

based on the information provided from facebook and yelp  we had a total of    
features 
a  user profile features  for each user     features that described user
characteristics were extracted from facebook  these features contained
information such as hometown  current location  interests  activities  and spoken
languages 
b  place features  this set of features described the restaurant characteristics  the
profile for a place was the combination of information collected from facebook
and yelp  for each place     features were extracted from the profile  which
captured the information about average rating  locations  payment options  price
range  popularity  restaurant categories and so on 
c  user and place combined features  these set of attributes described the
relations between a user and a place  for each pair  we extracted    features

ficapturing similarity between a user and a place  we considered the factors like
the location similarity  the background similarity 
   

sample generation

in order to maintain the balanced number between positive and negative samples  for a
single user  for each place the user liked or checkin ed  we generated a positive sample 
then we sampled the same number of disliked places from the list of all uninterested
restaurants for this user and generated corresponding user place pair as negative samples 
given the fact that the liked  checkin ed information was very sparse  we set the place
frequency threshold and only considered certain range of frequently liked places when
generating positive and negative data points 

 

e xp erim ents an d r esult s

in this work  we conducted experiments on different classification models and
investigated feature selection process to gain a better understanding of the problem  the
data  and the properties of the model we want  to evaluate the result  we used    fold
cross validation and precision metrics 
   

different classification algorithms

to provide more accurate predictions  we trained different models on the dataset and
compared the results  in the experiment  we used the place frequency range as a
parameter and tested   binary class classifiers  knn  k   decision table  random
forest  smo  svm  logistic regression  naive bayes  

figure    knn results

for k nearest neighbors classifier  different values of k were tested  for each k value  we
obtained percent accuracies for various place frequency range                         
                                as shown in figure    in general  the accuracy is higher
when k       and the accuracy is pretty low when k      this is reasonable because k    
does the prediction based on one nearest neighbor only  which might underfit the data 
in addition to knn  we also tried k      which is similar to knn but uses an entropybased distance function to find the nearest neighbors  also  for the random forest
algorithm  we set  trees        features   total   of features  trees  for smo      we
use linear kernel  for svm  we use radial basis kernel  the overall result is shown in
table    

fitable    percent accuracy for different algorithms with different restaurant minimal
frequencies
freq

knn
 k    

k 

decision random
table
forest

smo

logistic
regression

nb

  

      

      

      

      

             

      

      

   

      

      

      

      

             

      

      

   

      

      

      

      

             

      

      

   

      

      

      

      

             

      

      

   

      

      

      

      

             

      

      

   

      

      

      

      

             

      

      

   

      

      

      

      

      

      

      

   

      

      

      

      

             

      

      

   

      

      

      

      

             

      

      

   

      

      

      

      

             

      

      

   

      

      

      

      

             

      

      

   

svm

from our experiments  we can draw the conclusions that percent accuracy is generally
higher if place frequency threshold is higher even though there is less number of samples
existing in the dataset  this result is reasonable since more users interested in a place then
the model would have better understanding of who would like the place  on the other
hand  place frequency     is better than            even though the dataset for    is
more sparse  this happened because dataset for    has more samples to train the model 
when running the experiment  we also noticed that svm is faster but smo is more
accurate  in fact  percent accuracy from svm is worse than all other algorithms  one
possible way that will help to improve the svm result would be normalizing the feature
values before training 
   

feature selection

we conducted feature selection on three datasets  i e  low place frequency threshold     
one  medium frequency threshold      one  and high frequency threshold      one in
order to evaluate the influences  table   shows the result using decision table      we
can see that the same precision is achieved using    features as using all     features 
and that further feature selection can still improve the precision  both of which indicate
the existence of redundant and non indicative features in the original dataset 
table    feature selection result for decision table with place frequency threshold         and   
freq feature 
   
  
  
  
  
  
  
      
      
      
      
      
      
  

      

      

      

      

      

      

  

      

      

      

      

      

      

fithen we conducted the feature selection for different algorithms and plot the result  we
can tell that feature selection has various influences for knn  dt  lr  but the precision
is quite stable before we select less than    features  which agrees with our conclusion
about the existence of non indicative features 

figure   result of feature selection

after testing on different feature sets  the top   features selected are 
  location  state  city  of the place matches the current location of the user
  location  country  state  of the place matches the users hometown
  type of the place  e g  club  restaurant cafe  bar  food beverages 
  the number of users who ever liked this place on facebook
  average rating of the place from yelp
  number of reviews in last month from yelp

 

c on clu sion s a nd f ut u r e w o r k

we conducted machine learning based recommendation methods in this work  we
conclude that overall  the machine learning model has a better performance on the dataset
where places have higher frequencies and the data is less sparse  and that there exists
some indicative features to predict the relation between a user and a place  in the future 
we can devote more time to feature design  in addition  we should pick the good models
and experiment with different parameter settings to achieve better results  finally  a
larger data set would certainly help on a more accurate model and better feature selection 
acknowledgments
we would like to thank professor andrew ng for his guidance and advice on this project 
we also want to thank andrew mass for his advice and help on data collection 
references
    resnick  p   n  iakovou  m  sushak  p  bergstrom  and j  riedl  grouplens  an open architecture
for collaborative filtering of netnews  in proceedings of the acm conference on computer supported
cooperative work  p              

    john g  cleary  leonard e  trigg  k   an instance based learner using an entropic distance
measure  in    th international conference on machine learning                
    j  platt  machines using sequential minimal optimization  in b  schoelkopf and c  burges and a 
smola  editors  advances in kernel methods   support vector learning       
    ron kohavi  the power of decision tables  in   th european conference on machine learning 
              

fi