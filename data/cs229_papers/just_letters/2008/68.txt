airline departure delay prediction
brett naul
bnaul   stanford
december         

 

introduction

as any frequent flier is no doubt aware  flight delays and cancellations are a largely inevitable part of
commercial air travel  in the past ten years  only twice have more than     of commercial flights arrived
on time or ahead of schedule  punctuality is an issue for all major carriers  with some struggling more than
others  through september       american airlines flights were on time just       of the time  bottoming
out at       on time in the month of june 
in many cases  the causes for delays are unpredictable  for example  as of september   th               of
flights were delayed  of these delays      can be traced back to inclement weather  but in many other cases 
historical data would suggest that some flights are far more likely to be delayed than others  even without
taking present or future weather conditions into consideration  the airline itself is an obvious predictor of
the chance that a flight is delayed  as mentioned previously  american airlines often has one of the highest
percentages of delayed flights among all carriers  while southwest airlines consistently beats the national
averages for punctuality 
despite the extreme complexity of flight patterns in the united states  there are many factors that do
allow us to gauge the likelihood of a flight being delayed  the aim of this project is to use large historical
datasets to make predictions about the punctuality of future flights far in advance  e g  for a customer in
the process of purchasing tickets for a future flight 

 

data

searchable flight data from the last     years is available for download from the bureau of transportation
statistics  part of the research and inovation technology administration and the department of transportation     this database includes basic information such as carrier  origin destination  and expected departure 
as well as detailed delay information  for the purposes of the this paper  only departure delays are studied 
however  preliminary results suggest that the same analyses are valid for arrival information  as well 

   

data collection

given that there are up to         commercial flights per day in the united states  this is a truly massive
dataset  i limited my analysis to the seven major carriers  american  delta  continental  southwest  us
airways  united  and northwest  and fifty highest traffic airports  the same techniques can be applied to
additional airports and carriers outside the very busiest  but including these greatly increases the amount of
data that must be analyzed  since proportionally more total data points are needed to extract a significant
sampling of less traveled routes 

   

features

the data from the bts is very comprehensive  so i was able to include a wide variety of features in my analysis  including  day of week  month of year  day of year  holiday proximity  airline  origin  destination 
scheduled departure time  actual departure time  and distance  only used in arrival time prediction   it

 

fibrett naul
may not be obvious that these features are adequate for our prediction problem  figure   provides some
motivation by showing that these features are indeed strongly correlated with delay 

figure  
one type of feature that is conspicuously absent from the list above is weather data  without a doubt 
weather is the most important factor in airline delays  however  the primary motivation for this project is to
be able to provide information long in advance of the travel date  e g  when a passenger is first ticketing his
or her flight  perhaps many months in advance   weather models are reliable up to at most a week into the
future  and so in most cases would not apply to the problem at hand  long term climate models can give
seasonal information  but i claim that this information is largely redundant  in particular  the existing model
already takes into account geography and season  so inserting vague climate data would only unnecessarily
complicate the setup 

 

methods

using the data and features described above  we wish to be able to calculate some measure of the expected
delay or likelihood of delay for an arbitrary future flight  there are a number of possible such measures that
could be useful  this section lists the various delay estimators considered  as well as methods for computing
them 

   

binary classification

the faa officially designates flights that miss their declared departure or arrival time by more than   
minutes as delayed  using this criteria  or even with a different cutoff   we can attempt to predict
whether a future flight will fall into the category on time or delayed  i attempted to solve this problem
using a number of classifiers  including logistic regression  both weighted and unweighted   naive bayes
classifiers  and svm classifiers  with linear  polynomial  and gaussian kernels   for the first two  i used
my own matlab routines  for the last  i used svmlight      ultimately  none of these attempts produced
satisfactory results  but i attribute this to the nature of the problem itself  rather than the method  see
results  

   

estimated delay

one very useful quantity to produce would be an estimate  in minutes  of the amount by which a flight will
be delayed  in the binary classification problem  most of my models exhibited severe overfitting  so for the
regression problem i attempted to use simpler methods  in particular  i computed most of my regression
estimates using my own matlab implementation of weighted linear regression  which solves the weighted
normal equations in a space efficient way in order to compensate for the extremely large number of training
examples 

 

fi   

   

probability estimation

brett naul

probability estimation

an easier  more tractable problem than that of binary classification is estimating the probability that a
flight is delayed  i experimented with multiple models for this problem  but ultimately found that the speed
and simplicity of naive bayes best complemented the structure of the problem  in particular  i used my
own matlab implementation of the naive bayes classifier  and adapted it so that features are modeled
as multinomial rather than bernoulli random variables  the features themselves are easily modeled by
multinomial distributions  since they all take on bounded integer values  because of the algorithms extreme
simplicity  i was able to train it on full months  or even years  of flights  upwards of            at once  

   

comparison with historical averages

since the context of this project is predicting delays at purchase time  it felt natural to compare my methods
with those used by many travel websites  e g  kayak com  orbitz com   in particular  these sites provide
consumers with delay warnings for flights that are historically prone to delay  a flight in this case is identified
only by its route and flight number  so that the same flight might occur daily  weekly  etc    using the
information on flights from the last several years  i created an algorithm that searches for past instances of
a given flight  and uses the sample mean of these past flights as a sort of naive historical predictor  one of
my primary goals was to improve upon this method of prediction  as it is the one most commonly used in
practice 

 
   

results
binary classification

my attempts at binary classification of future flights were unsuccessful to say the least  figures   and  
demonstrate the learning curves for test and training error for the naive bayes and support vector machine
classifiers  the naive bayes classifiers error is shockingly low at first glance  but upon further examination
the results are less surprising  since the algorithm constructs probability estimates for the on time departure
of each flight  it only predicts that a flight will depart late if its estimated probability is greater than     
intuitively  it is clear that very few flights would actually have a greater than     chance of being late 
although the long run fraction of delayed flights is as high as      the variance is not high enough that
many flights would be more likely to be late than on time 

figure  

figure  

the naive bayes classifiers outputs were consistent with the idea that flights are inherently more likely to
be on time  its classifications consisted of anywhere from    to     negative  i e  on time  predictions  since
up to     of all flights are on time  this results in a seemingly low error rate for such a difficult problem 
in reality  the error is almost the same as simply predicting that every flight will be on time  the error on
the training set is nearly as high as the test error  indicating that this classifier suffers from high bias  as we
would expect 
 

fi   

estimated delay

brett naul

the support vector machine classifier  on the other hand  performs extremely well on the training set 
achieving perfect accuracy for sets of up to      training examples  but these results do not translate to
impressive performance on the test set  indeed  even given several thousand training examples  the test
set error remains much worse than that of the naive bayes classifier  the data in figure   comes from a
gaussian kernel with        c      but all variations on these parameters produced similarly poor results 
it is clear that the problem is one of high variance  but i saw no way to resolve this issue  the number
and variety of flights in the united states is so high that any prediction algorithm must be able to digest
hundreds of thousands  if not millions  of training examles  even with my relatively small feature space  the
quadratic programming problem for the optimal margin classifier becomes unreasonably complicated as the
number of training examples approaches this point  for the remaining problems  i tried to make use of
simple  fast algorithms that would be able to handle the millions of training examples needed to describe
flight patterns 
i also experimented with reducing the number of airports and carriers considered in order to give the
svm classifier another chance  ultimately i did not pursue this strategy as it felt like i would have been
cheapening the problem  or at least reducing it to a narrower and less interesting one  it also cuts down on
the diversity of the already small feature space  which did not seem like a prudent strategy  furthermore 
i decided that the classification problem is not really the best one to consider  it is too much to expect our
algorithm to predict exactly which flights will be on time  instead  i attempted to develop statistics that
would distinguish more fluidly between varying degrees of punctuality 

   

estimated delay

the regression problem associated with flight delays is predicting the exact number of minutes by which
a flight will be delayed  recall that the faa only classifies a flight as delayed if it misses its scheduled
departure by at least    minutes   initially  i expected this aspect of the problem to be infeasible  as with
the classification problem  expecting an algorithm to give an exact delay prediction seems in some sense to
be expecting too much  however  i was surprised by the success of simple regression methods  figure  
shows the test error of locally weighted linear regression using gaussian weights with bandwidth parameter
        small bandwidth parameters performed better in general  intuitively  we would like our prediction
to depend primarily on very similar examples  as the relationships between parameters are highly nonlinear
 e g  delta  is not closer to american than other airlines in any meaningful sense  although they are
labeled   and    respectively  

figure  
the predictions were far from perfect  but nevertheless improve upon the naive historical predictions generated according to section      the mean error of the least squares predictor was      minutes  generated
using         training examples  after which there was no discernable improvement   compared with     
minutes for the historical estimator  this result is perhaps not terribly meaningful  especially since travel
sites do not present passengers with this type of information  nevertheless  it is worth nothing that this very
simple approach was able to generate surprisingly good predictions 

 

fi   

   

probability estimation

brett naul

probability estimation

the most useful and plausible method of predicting of flight delay turned out to be probability estimation 
these probabilities allow travel agencies to warn buyers before they commit to a delay prone route  and
similarly they allow passengers to make smarter and more confident purchasing decisions  fortunately  this
was also the aspect of the problem in which machine learning techniques enjoyed the most success  as seen in
figure    the multinomial naive bayes predictor definitively outperformed the historically based estimates
used by many online travel sites  in the classification problem  the error was seemingly quite good  but
in reality the predictions were largely uniform and uninformative  in contrast  the probability estimates
themselves are varied and really illuminate which flights are comparatively prone to delay 

figure  
it is not obvious what the best way to test these probability estimates should be  and it is even less obvious
how the error should be interpreted  thankfully  the sheer amount of data provided one way to diagnose
our results  the same combinations of features appear numerous times throughout the bts database  so
it was possible to compute one set of past estimates to use as the historical estimators  and another of
results to which we could compare our predictions 

 

conclusion

in all aspects of this problem  simple  uncomplicated algorithms outperformed more sophisticated methods 
the number of training examples required to encapsulate the patterns that characterize the aviation system
is truly staggering  and complicated techniques were unable to digest this quantity of information in a
reasonable quantity of time  furthermore  the simple algorithms actually performed rather impressively  in
particular  the naive bayes probability estimates proved to be more accurate than the historical estimates
used by many travel sites  the success of the naive bayes predictor is reason to believe that such a method 
or perhaps a similar machine learning technique  could be effectively employed by travel agencies to provide
improved delay estimates to its customers 

 

references
   bureau of transportation statistics  transtats database  http   www transtats bts gov 
   t  joachims  making large scale svm learning practical  advances in kernel methods   support
vector learning  b  scholkopf and c  burges and a  smola  ed    mit press       

 

fi