
grasshopper


brian


motivation

theory
dof inverted pendulum
rl construction
dof grasshopper statement
dof plots

appendix dynamics
assumptions
derivation equations
appendix

motivation
grasshopper prototypical testbed vertical takeoff landing
generations launch vehicles
traditional lqr comparable
infrastructure adapt unmodeled
scenarios capability rl
attractive unpredictable landing rocket launch
vehicle mars lqr controllers
experience direct comparisons robustness controller
disturbance rejection closed loop plant


successfully simulated animated fully
functional stable controller virtual grasshopper vehicle controller
simulator hardware processor rated
hrs confidently
scratch ideal realtime architectures deploy reasonably
accommodate disturbances
computationally intensive onboard realtime

theory
comprehensive theoretical ill
equations








argmax




mdp tuple logged timestep dynamical
situation updating
failure employs synchronous solving bellmans equations
mdp

dof inverted pendulum
dynamical theoretical
degrees freedom rocket logical testbed inverted pendulum
preliminary practical leads
convoluted simplistic preferred ideas
peripheral script calls animation tweaks manipulations
led
debugging discretization
benefits parallelization simulators
equations propagate dynamics
dof conclusions identically applicable dof launch vehicle
simulator
command
updates display
failures


updated
failure figures


decreasing
learns

decreasing
dof inverted pendulum simulator
becomes deterministic
videos
trials viewed youtube watch vj
youtube watch sku animations
intuition strategies capabilities

failure

rl construction
ultimate
failures exhibits plateaus
appearing converge
optimum intuitively
optimum gets
inverted pendulum remain
forever

simulator gets rewards
failing associates
repeats
routine encompasses
fraction
mitigated
randomness
greedy

manifested
dynamics forcing
providing failing opposite
intended occurring expanded reinitialization forcing
simulator never solutions
comprehensive optima
coarse discretization logical
angle vertical
lateral discretized finely
manipulation limits defining failure simulator
encouragement intelligently
tweak
pendulum remain inverted forever
plots illustrate

uniform reinitialization

figures reinitialization
uniform reinitialization entails picking failure
reinitialization draws
centered element
figures showing
reveal uniform reinitialization forces
yielding optima
downside uniform
reinitialization yields starts
remain longer practice
reinitialization default uniform reinitialization
modularity option starting uniform
continuing gained robustness

logical
peaks discretization angular velocity
peaks discretization angular
velocity subsequent peaks
extensive parameterized
conclusions gleaned options
synchronous faster asynchronous
asynchronous converges optimum synchronous
schemes initialize encourage
wrote bellmans equations
fewer converge
slowly
rewards slowed great
flexibility
nothing expanded careful isnt

fail
ode solver intelligent ode solver propagate
worth extra

dynamic earths gravity stronger mars
pendulum remains inverted shorter periods
tolerance
longer converge
failure
force
stability
failure limits relax bit controller
regime
discount working decrease
quicker rewards heavily
dynamics timestep fine quick rigor
finer physical
criteria assert converged
differed tolerance waiting
worst converge accounts trials
jumps seeming cumulative

deserves
varies rewards initially employed
failure kept pendulum inverted
nothing regulation werent failure

limits acceptable ranges
rewarding
ultimately

lqr controller weighting didnt
limits ensure failure avoided
behaved

dof grasshopper statement
im defining altitude lateral

mass
rotational euler
angles
yaw roll
derivation
appendix im assuming
angles im restricting
euler angles avoid
im neglecting planetary rotation
gravity differentials drag mass
im approximating
rocket cylinder
assumptions
configuration credit nasa glenn
free rigid
unconstrained
altitude gravitational force





equations



























limits yaw roll unlimited intelligent
discretization ranges ultimately
failure

force capability ive modeled grasshopper axial engine
theoretically capable lbs thrust ive enforced rocket
firing effectively cold gas thrusters grasshopper lateral stability
quadrant capable firing yields
basically orthogonal thrusters fire axial
thrust capability manifests
thrust lateral cold gas decreasing axial force ive incorporated
integral coding simulator scratch
kinematic expertise derive explicit
coupled deterministic simulator proved


dof plots
plots
dof grasshopper
simulations ive
tweak
everything
inherent

literally
substitution
equations
extensive
inverted
pendulum rl applies
equally turn
rigor





station remains nearly
diagonal
expresses benefit schemes
intuitively plots wed
visualize discretization

grasshopper simulator


subsequent pursue simulator
rl scratch
simulated animation months im
fairly satisfied
mdp discretizing
describing pose decent ive
distributing runs
trying store gets
easy surpass
vertical landing introducing
redundant euler angles invert gravity stabilization
dynamics finite horizon mdp inclusion orbital
changing gravity finite horizon doesnt something
chronological altitude

animation ive worked importing solid
rendering nice
animations albeit longer computations
acknowledge dr andrew teaching staff
dedicated commitments profession

fiappendix dynamics
assumptions









im assuming deviations nominal vertical
decoupled dof inverted
restoring forces inertial pendulum cart mine
projected inertial
neglecting mass working rockets principle coordinate
removes newtons
equations
euler angles ranges yaw
roll singularity
euler angle yield attitude singularity parallel
circumvent
restrict ever fully reaching
singularity lateral rocket axial
workaround
euler angles
euler angles
depending configuration pick euler angles
singularity
im neglecting earths rotation easy introduce
ill approximate moments inertia cylinder
angular momentum momentum quantities
conserved

derivation equations





derivation




subsequently propagated
euler complicated solver native
kinematic relations















































inverse yields passive rotation
coordinates inertial rotation orthogonal
inverse transpose




































































notice overhead singularity perfectly vertical
eliminate determinism configuration orientation
infinite quantity euler angle attitude
rocket
aside euler angle yield











































































































notice singularity upright pose
eliminate determinism configuration orientation
infinite quantity euler angle attitude
rocket

force balance

newtons equations















thrusters forces express inertial
coordinates





































equations































rocket approximated cylinder moments
inertia coordinate axes aligned
principle axes





























derivatives euler angle relations











solved propagated
lagrangian formulation
gravitational referenced earths surface




translational kinetic mass rotational kinetic
mass




























derivatives generalized coordinates






























generalized forces transformed











generalized moments explicitly



























evaluating derivatives yields desired equations six generalized
coordinates













formulated force balance isolating
accelerations formulas simulator forces
moments



























fiappendix

script

brian
simulator employs optimize

grasshopper vehicle

dynamics
rewards transitions
failed yet continue
fails rewards transitions


mdp calculating


station psa
repeat converged
cd brian graduate

tic begin timing
definition
fail failures allowed converge

display failures

rush trials display mdp

reasonably fail never display
fastest
visualize beginning
gamma discount emphasizes earlier rewards
tol criteria
consecutive runs
converges perfect mdp
dt resolution dynamics
sim balances seconds ends
considers matter rl

ns denotes
failure
na
initialization
consecutive trials perfect
mdp
nfail failures

iter sim
trial
boolean condition
counter
starting

dot dot dot
psi pi randn psi dot pi randn
theta pi randn theta dot pi randn
phi pi randn phi dot pi randn
psi psi dot theta theta dot phi phi dot discretized


iters fail zeros fail sim failure
zeros fail
failure
vp iter zeros fail


psa zeros ns ns na transitions
happen
timesteps failures old

psa ns ns na ns element
old


updated failure initialize
uniform reaching

zeros ns
timesteps

failures rewards
went

zeros ns

updated failure
zeros ns discounted

zeros ns array

maximize
animation
fail
warning delete
delete animation mp
vidobj animation mp mpeg
vidobj
vidobj dt
vidobj

loop nfail fail
consecutive
psa

passed check failure

coin psa psi theta
coin


simulating dynamics
dot dot dot psi theta phi psi dot theta dot phi dot

dynamics dt dot dot dot
psi theta phi psi dot theta dot phi dot
psi psi dot theta theta dot phi phi dot discretize
nfail
psi theta phi iter dt
iters fail nfail dt nfail vp iter nfail
vidobj gcf



psi theta
counters
psa psa

fails
ns
mdp psa
na loop
ns loop old
psa
nothing

psa psa
calculates
old



ns
checks ever got


updated failure
rewards noticed got

divided went


optimize mdp
iter loop counter
tol loop
zeros ns array
zeros na array

fiwhile tol
tol
iter iter
ns
psi theta
na
synchronous loops updates


psi theta
gamma psa

asynchronous updates

theta
psa



abs
tol tight



optimize pi mdp


iter loop counter

tol loop

zeros ns array


ns

psa psi theta
loop



tol
tol

iter iter

bellman psa gamma bellman equations


ns

psa psi theta




bellman psa gamma

abs
tol tight




check occurred
iter
consecutive consecutive
else
consecutive

counters
nfail nfail
vp iter nfail iter
iters fail nfail iter
iter trial
nfail iters fail nfail

restart counter
pi redundant
ns
psi theta
psa psi theta

print info command
fprintf


nfail iter iters fail nfail dt
visualization mdp animation

gcf
bar tight
xlabel ylabel

visualization

gcf
bar tight
xlabel
ylabel rewards
acting optimally
visualization
pi
gcf
bar tight
xlabel ylabel



visualization pi











psa figures na
na
stem psa
xlabel old ylabel
zlabel
psa num str
gcf
na na



force rl








uniform
dot dot dot
psi pi rand
psi dot pi rand
theta pi rand
theta dot pi rand
phi pi rand
phi dot pi rand

dot dot dot
psi pi randn
psi dot pi randn
theta pi randn
theta dot pi randn
phi pi randn
phi dot pi randn
psi psi dot theta theta dot phi phi dot
else fail continue



inverted pendulum balances

iter dt
iters fail nfail iter element

break


visualization truncate unused arrays
iters fail iters fail
nfail
vp iter vp iter

hold iters fail dt
moving



iters fail dt
iters fail dt
iters fail dt
linewidth

xlabel trial
ylabel failure sec
warning legend
legend failure moving

nfail iters fail dt og
plots green dot ends




floor
floor

fprintf elapsed hour minute
failures
nfail vp iter
xlabel failures
ylabel
failures
failure
nfail
xlabel failures
ylabel
failures
animation
fail
vidobj
animation mp



dot dot dot
psi theta phi psi dot theta dot phi dot

dynamics dt dot dot dot
psi theta phi psi dot theta dot phi dot
simulates dynamics rocket equations





psi theta phi psi theta phi

propagated
angular radians
psi theta phi yaw roll euler
dynamics atmosphere
gravitational earth mars

grasshopper
height
width
radius
pi
adjusted homogenous rp kg
mass kg
ia axial moment inertia kg
transverse moment inertia kg
engines
force
lat force lateral cold gas thrusters
randomness flip prob intended
rand flip prob

intended consideration
pick
na

































fires
fires
fires
fires
fires
fires
fires
fires
fires












fx fy
elseif
fx fy
elseif
fx fy
elseif
fx fy
elseif
fx fy
elseif
fx fy
elseif

lat
lat
lat
lat
lat
lat
lat
lat
lat

fires
fires
fires



fires
fires
fires











lat
lat
lat
lat
lat
lat
lat
lat
lat

lat

fz lat

lat

fz

lat

fz lat



fz lat



fz



fz lat

fires

fires
fires

fires
fires

fires











fx
elseif
fx
elseif
fx


fy lat fz lat

fy lat fz

fy lat fz lat

randomness force multiplied
force prob force
fx fx force rand
fy fy force rand
fz fz force rand
rand force prob
fx fy fz

moments forces mx moment axial
direct roll actuator
fz
mz fy
equations acc
fx cos psi cos theta fy cos psi sin theta sin phi
sin psi cos phi fz sin psi cos phi
cos psi sin theta cos phi
acc fx sin psi cos theta fy cos psi cos theta
sin psi sin theta sin phi fz sin psi sin theta cos phi

cos psi sin phi
acc fx sin theta fy cos theta sin phi fz cos theta cos phi
psi acc
cos theta mz cos phi sin phi ia phi dot theta dot
psi dot theta dot sin theta psi dot theta dot sin theta
theta acc ia psi dot sin theta ia phi dot psi dot
cos theta cos phi mz sin phi
phi acc
mx ia psi dot theta dot cos theta sin theta cos theta
mz cos phi sin phi ia phi dot theta dot theta dot
sin theta psi dot theta dot sin theta
euler dt dot
dt dot
dt dot
dot dot dt acc
dot dot dt acc
dot dot dt acc
psi psi dt psi dot
theta theta dt theta dot
phi mod phi dt phi dot pi modulus
psi dot psi dot dt psi acc
theta dot theta dot dt theta acc
phi dot phi dot dt phi acc


coin psa psi theta
determines psa
pi argmax psa
tie amongst
choices
na psa
zeros na
discounted
rewards psa

sort retention
na
psi theta psa

place
truncate tied
num tied tied
floor num tied rand picks
tied
num tied
coin
else
coin



psi theta
receives calculates
sa regulation thrust minimization
lateral thrusters fire
ease
elseif lateral fires
ease
elseif neither lateral fires
ease



else
sa
abs psi pi abs theta pi
sa
ease






rewards vertical firing
failure psi theta
lqr
except failure

fistate
psi psi dot theta theta dot phi phi dot
discretized
angular ranges psi yaw theta
phi roll yields
permutations plus failure finer
discretization produces
requiring longer computations
limits
outside failure except phi roll cyclic
psi lim pi
psi dot lim pi
theta lim pi
theta dot lim pi
phi lim pi
phi dot lim pi
ranges
psi tot psi lim
psi dot tot psi dot lim
theta tot theta lim
theta dot tot theta dot lim
phi tot phi lim
phi dot tot phi dot lim
numst psi tot psi dot tot theta tot theta dot tot
phi tot phi dot tot failure
multiplier permutations subdivisions
phi dot mult numst phi dot tot
phi mult numst phi dot tot phi tot
theta dot mult numst phi dot tot phi tot theta dot tot
theta mult numst phi dot tot phi tot theta dot tot theta tot
psi dot mult numst phi dot tot phi tot theta dot tot theta tot psi dot tot
psi mult numst phi dot tot phi tot theta dot tot theta tot psi dot tot psi tot
ranges fall
psi intvl interval psi psi lim
psi dot intvl interval psi dot psi dot lim
theta intvl interval theta theta lim
theta dot intvl interval theta dot theta dot lim
phi intvl interval phi phi lim
phi dot intvl interval phi dot phi dot lim
summing subsequent contributions
psi intvl psi dot intvl theta intvl theta dot intvl
phi intvl phi dot intvl
numst
else
phi dot mult phi dot intvl
phi mult phi intvl
theta dot mult theta dot intvl
theta mult theta intvl
psi dot mult psi dot intvl
psi mult psi intvl
shift


fistate
psi psi dot theta theta dot phi phi dot
discretized

limits
outside failure except phi roll cyclic
psi lim pi
psi dot lim pi
theta lim pi
theta dot lim pi
phi lim pi
phi dot lim pi
ranges
psi tot psi lim
psi dot tot psi dot lim
theta tot theta lim
theta dot tot theta dot lim
phi tot phi lim
phi dot tot phi dot lim
numst psi tot psi dot tot theta tot theta dot tot
phi tot phi dot tot failure
multiplier permutations subdivisions
phi dot mult numst phi dot tot
phi mult numst phi dot tot phi tot
theta dot mult numst phi dot tot phi tot theta dot tot
theta mult numst phi dot tot phi tot theta dot tot theta tot
psi dot mult numst phi dot tot phi tot theta dot tot theta tot psi dot tot
psi mult numst phi dot tot phi tot theta dot tot theta tot psi dot tot psi tot
failure
psi psi lim
psi dot psi dot lim
theta theta lim
theta dot theta dot lim
phi phi lim
phi dot phi dot lim

else
phi dot intvl ceil phi dot mult
phi intvl ceil phi dot mult phi dot intvl
phi mult
theta dot intvl ceil phi dot mult phi dot intvl
phi mult phi intvl theta dot mult
theta intvl ceil phi dot mult phi dot intvl
phi mult phi intvl theta dot mult theta dot intvl theta mult
psi dot intvl ceil phi dot mult phi dot intvl
phi mult phi intvl theta dot mult theta dot intvl
theta mult theta intvl psi dot mult
psi intvl ceil phi dot mult phi dot intvl
phi mult phi intvl theta dot mult theta dot intvl
theta mult theta intvl psi dot mult psi dot intvl psi mult
ranges fall
psi interval psi intvl psi lim
psi dot interval psi dot intvl psi dot lim
theta interval theta intvl theta lim
theta dot interval theta dot intvl theta dot lim
phi interval phi intvl phi lim
phi dot interval phi dot intvl phi dot lim



psi theta phi elapsed nfail val iter
updating rocket
timestep visualizing
denotes display
gcf


grasshopper

xc yc zc cylinder
xs ys zs sphere
gray
orange
origin mass rotate
hold
surf xc yc zc facecolor gray edgecolor gray cylinder
rocket rotate psi theta phi origin
surf xs ys zs facecolor gray edgecolor gray nose
rocket rotate psi theta phi origin
surf xs ys zs facecolor edgecolor
rocket rotate psi theta phi origin
surf xs ys zs facecolor orange edgecolor orange
rocket rotate psi theta phi origin
surf xs ys zs facecolor edgecolor
rocket rotate psi theta phi origin
conditionally lateral thrusters

surf xs ys zs facecolor edgecolor pushes
rocket rotate psi theta phi origin
surf xs ys zs facecolor edgecolor pushes
rocket rotate psi theta phi origin


surf xs ys zs facecolor edgecolor pushes
rocket rotate psi theta phi origin
surf xs ys zs facecolor edgecolor pushes
rocket rotate psi theta phi origin


surf xs ys zs facecolor edgecolor pushes
rocket rotate psi theta phi origin
surf xs ys zs facecolor edgecolor pushes
rocket rotate psi theta phi origin


surf xs ys zs facecolor edgecolor pushes
rocket rotate psi theta phi origin
surf xs ys zs facecolor edgecolor pushes
rocket rotate psi theta phi origin

hold
view
xlabel ylabel zlabel



animation xlabel ylabel zlabel
slows

delete delete
annotation string
elapsed num str elapsed sec

annotation string
elapsed num str sec

annotation string
failures num str nfail

annotation string
num str val iter



rotate
rocket rotate psi theta phi origin
euler angles yaw roll radians rotates

graphic handle
passive rotation
psi cos psi sin psi sin psi cos psi
theta cos theta sin theta sin theta cos theta
rotate psi pi origin
rotate psi theta pi origin
rotated
rotate theta psi phi pi origin
rotated twice

bellman
bellman psa gamma
solves bellman equations

ns
zeros ns ns array av
ns
psa

diag ns gamma
gamma


intvl interval val limits
limits
outputs interval falls

outside limits limits

ascending


interval
interval
interval
interval
interval
limits
val limits
intvl



intvl never invoked

limit failure

interval
val interval intvl limits
interval limits intervals

outputs respective interval limits
ascending


interval
interval
interval
interval
val limits intvl limits intvl


force balance



psi double dot

kinematic relations
syms phi theta psi

mz cos sin ia pd td ia sd td sin sd td
sin


rp cos sin sin cos
rt cos sin sin cos
rs cos sin sin cos

cos

theta double dot
rp rt rs inertial
inertial
sin cos cos sin sin
cos cos
euler angle derivatives pd td sd
simplify inv singularity theta deg
euler angle derivatives pd td sd

force balance
newton equations
syms mass gravity
syms fx fy fz forces


ia sin sd
ia pd cos sd cos mz sin



sd

sin



phi double dot
mx
sd td cos sin mz cos sin ia pd td ia
ia sd td sin sd td sin cos

dummy fx fy fz
fb dummy fb dummy fb dummy
euler equations

lagrangian formulation

syms sd sdd pd pdd td tdd derivatives euler angles
syms ia axial moments inertia

generic derivatives

pd sd sin
qq sd sin cos td cos
rr sd cos cos td sin
double letters overload phi
euler angle
pdd sdd sin sd td cos
tdd cos td pd sin sdd cos sin
sd pd cos cos td sin sin
tdd sin td pd cos sdd cos cos
sd td sin cos pd sin cos
syms mx mz moments
sdd fb rr ia sdd
tdd fb simplify subs mz qq sdd sdd fb tdd
sdd fb simplify subs sdd fb tdd tdd fb
pdd fb simplify subs mx ia sdd sdd fb pdd
dd double dot
fprintf

fprintf force balance
fprintf

fprintf psi double dot
pretty sdd fb
fprintf double dot
pretty tdd fb
fprintf double dot


double checked formulas

manipulation
mx sin cos sin mz cos cos
cos mz sin
mx
tdd simplify
tdd sd cos sin ia pd sd cos sd sin cos
tdd
pdd ia pdd sdd sin sd td cos pdd
sdd simplify subs
ia pdd sin pd td cos sdd sin sd td sin cos
sdd cos sd td cos sin pdd pdd sdd
pdd simplify subs pdd sdd sdd
fprintf

fprintf lagrangian formulation
fprintf

fprintf psi double dot
pretty sdd
fprintf double dot
pretty tdd
fprintf double dot na
pretty pdd

pretty pdd fb




lagrangian formulation


ans
psi double dot

mz cos sin ia pd td ia sd td sin sd td
sin
cos

ans

theta double dot

ans


ia sin sd
ia pd cos sd cos mz sin


sd
sin



phi double dot

mx
sd td cos sin mz cos sin ia pd td ia
ia sd td sin sd td sin cos

verification
specify
pi rand
pi pi rand
pi rand
pd rand
td rand
sd rand
ia rand
rand
mx rand
rand
mz rand
fprintf

fprintf subsequent answers identical
fprintf

subs sdd fb
subs sdd
subs tdd fb
subs tdd
subs pdd fb
subs pdd


subsequent answers identical


ans


ans


ans







